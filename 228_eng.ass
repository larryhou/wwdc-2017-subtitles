[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.52,0:00:27.49,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:00:27.99,0:00:29.33,Default,,0,0,0,,>> Welcome to Making Great
Dialogue: 0,0:00:29.33,0:00:30.36,Default,,0,0,0,,SiriKit Experiences.
Dialogue: 0,0:00:31.46,0:00:33.46,Default,,0,0,0,,My name is Jose Angel Castillo
Dialogue: 0,0:00:33.46,0:00:35.34,Default,,0,0,0,,Sanchez and with my coworker
Dialogue: 0,0:00:35.34,0:00:36.13,Default,,0,0,0,,Rohit [assumed spelling], we
Dialogue: 0,0:00:36.13,0:00:37.89,Default,,0,0,0,,want to tell you all about it.
Dialogue: 0,0:00:39.00,0:00:40.94,Default,,0,0,0,,It has been a year since we
Dialogue: 0,0:00:40.94,0:00:41.77,Default,,0,0,0,,announced SiriKit.
Dialogue: 0,0:00:42.27,0:00:44.36,Default,,0,0,0,,Since then, many applications
Dialogue: 0,0:00:44.36,0:00:45.17,Default,,0,0,0,,have [inaudible].
Dialogue: 0,0:00:45.82,0:00:48.56,Default,,0,0,0,,We have heard your feedback, the
Dialogue: 0,0:00:48.56,0:00:49.54,Default,,0,0,0,,developers feedback.
Dialogue: 0,0:00:50.22,0:00:52.07,Default,,0,0,0,,With that, we have put together
Dialogue: 0,0:00:52.17,0:00:53.99,Default,,0,0,0,,four major areas that we want to
Dialogue: 0,0:00:53.99,0:00:54.90,Default,,0,0,0,,focus on today.
Dialogue: 0,0:00:56.26,0:00:57.87,Default,,0,0,0,,First, we want to talk about
Dialogue: 0,0:00:57.87,0:00:58.82,Default,,0,0,0,,contact resolution.
Dialogue: 0,0:00:59.24,0:01:01.40,Default,,0,0,0,,If your application is a
Dialogue: 0,0:01:01.40,0:01:03.65,Default,,0,0,0,,messaging, call, or a payments
Dialogue: 0,0:01:03.65,0:01:05.42,Default,,0,0,0,,application, you probably have
Dialogue: 0,0:01:05.42,0:01:06.55,Default,,0,0,0,,dealed [phonetic] with it.
Dialogue: 0,0:01:07.13,0:01:08.95,Default,,0,0,0,,After that, we're going to talk
Dialogue: 0,0:01:08.95,0:01:09.91,Default,,0,0,0,,about security.
Dialogue: 0,0:01:11.10,0:01:13.50,Default,,0,0,0,,If your application requires an
Dialogue: 0,0:01:13.50,0:01:15.09,Default,,0,0,0,,authorization to finalize a
Dialogue: 0,0:01:15.09,0:01:16.93,Default,,0,0,0,,transaction, we'll tell you how
Dialogue: 0,0:01:16.93,0:01:18.98,Default,,0,0,0,,to achieve that in simple steps.
Dialogue: 0,0:01:21.96,0:01:23.51,Default,,0,0,0,,Next, we're going to cover
Dialogue: 0,0:01:23.67,0:01:24.76,Default,,0,0,0,,custom vocabulary.
Dialogue: 0,0:01:25.92,0:01:28.28,Default,,0,0,0,,Siri understands many words in
Dialogue: 0,0:01:28.28,0:01:30.15,Default,,0,0,0,,many languages, but there might
Dialogue: 0,0:01:30.15,0:01:31.52,Default,,0,0,0,,be some specific words to your
Dialogue: 0,0:01:31.52,0:01:33.26,Default,,0,0,0,,application you might want to
Dialogue: 0,0:01:33.26,0:01:34.26,Default,,0,0,0,,tell Siri about.
Dialogue: 0,0:01:34.77,0:01:38.12,Default,,0,0,0,,Last but not least, we're going
Dialogue: 0,0:01:38.12,0:01:39.12,Default,,0,0,0,,to cover UI testing.
Dialogue: 0,0:01:39.76,0:01:41.29,Default,,0,0,0,,Since the last year, we have
Dialogue: 0,0:01:41.29,0:01:42.89,Default,,0,0,0,,made great improvement of how to
Dialogue: 0,0:01:42.89,0:01:44.29,Default,,0,0,0,,automate Siri testing.
Dialogue: 0,0:01:47.16,0:01:48.82,Default,,0,0,0,,Let's get started with contact
Dialogue: 0,0:01:48.82,0:01:49.45,Default,,0,0,0,,resolution.
Dialogue: 0,0:01:50.42,0:01:52.13,Default,,0,0,0,,For this, I want to use a
Dialogue: 0,0:01:52.13,0:01:53.52,Default,,0,0,0,,messaging example.
Dialogue: 0,0:01:53.73,0:01:54.85,Default,,0,0,0,,A messaging application.
Dialogue: 0,0:01:55.29,0:01:56.37,Default,,0,0,0,,You may be familiar with it.
Dialogue: 0,0:01:57.57,0:01:58.38,Default,,0,0,0,,UnicornChat.
Dialogue: 0,0:01:58.71,0:02:01.56,Default,,0,0,0,,For this, we're going to walk
Dialogue: 0,0:02:01.56,0:02:02.88,Default,,0,0,0,,through the process of sending a
Dialogue: 0,0:02:02.88,0:02:03.36,Default,,0,0,0,,message.
Dialogue: 0,0:02:04.32,0:02:05.91,Default,,0,0,0,,Text hello to John on
Dialogue: 0,0:02:05.91,0:02:06.56,Default,,0,0,0,,UnicornChat.
Dialogue: 0,0:02:07.38,0:02:09.65,Default,,0,0,0,,We clearly see that John is who
Dialogue: 0,0:02:09.69,0:02:12.18,Default,,0,0,0,,we want to message to.
Dialogue: 0,0:02:12.41,0:02:14.93,Default,,0,0,0,,In this case, on my address book
Dialogue: 0,0:02:14.93,0:02:16.48,Default,,0,0,0,,I have multiple Johns.
Dialogue: 0,0:02:16.96,0:02:18.97,Default,,0,0,0,,I have John Appleseed and John
Dialogue: 0,0:02:18.97,0:02:19.29,Default,,0,0,0,,Baily.
Dialogue: 0,0:02:19.74,0:02:22.65,Default,,0,0,0,,From the user intent, it's not
Dialogue: 0,0:02:22.65,0:02:23.95,Default,,0,0,0,,yet clear which of these John I
Dialogue: 0,0:02:23.95,0:02:26.93,Default,,0,0,0,,want to message to.
Dialogue: 0,0:02:27.18,0:02:30.23,Default,,0,0,0,,In iOS 10.3, we introduced a new
Dialogue: 0,0:02:30.23,0:02:32.98,Default,,0,0,0,,property in the INPerson object.
Dialogue: 0,0:02:33.60,0:02:34.37,Default,,0,0,0,,SiriMatches.
Dialogue: 0,0:02:35.74,0:02:37.34,Default,,0,0,0,,SiriMatches is what Siri
Dialogue: 0,0:02:37.34,0:02:38.05,Default,,0,0,0,,understands.
Dialogue: 0,0:02:38.28,0:02:39.72,Default,,0,0,0,,In this case, the multiple
Dialogue: 0,0:02:39.72,0:02:40.14,Default,,0,0,0,,Johns.
Dialogue: 0,0:02:40.44,0:02:42.36,Default,,0,0,0,,It can also be homophones to
Dialogue: 0,0:02:42.36,0:02:42.71,Default,,0,0,0,,John.
Dialogue: 0,0:02:43.55,0:02:44.63,Default,,0,0,0,,You will get an array of
Dialogue: 0,0:02:44.74,0:02:46.31,Default,,0,0,0,,INPerson objects representing
Dialogue: 0,0:02:46.49,0:02:47.88,Default,,0,0,0,,all the possibilities that Siri
Dialogue: 0,0:02:47.88,0:02:48.46,Default,,0,0,0,,understood.
Dialogue: 0,0:02:48.95,0:02:51.78,Default,,0,0,0,,Let's walk through the flow of
Dialogue: 0,0:02:51.90,0:02:53.47,Default,,0,0,0,,text hello to John on
Dialogue: 0,0:02:53.47,0:02:56.10,Default,,0,0,0,,UnicornChat and see how we can
Dialogue: 0,0:02:56.39,0:02:57.65,Default,,0,0,0,,take advantage of these
Dialogue: 0,0:02:58.38,0:03:00.14,Default,,0,0,0,,siriMatches to resolve our
Dialogue: 0,0:03:00.14,0:03:01.31,Default,,0,0,0,,contact.
Dialogue: 0,0:03:02.62,0:03:04.75,Default,,0,0,0,,Text John hello on UnicornChat.
Dialogue: 0,0:03:05.48,0:03:07.89,Default,,0,0,0,,Siri clearly understands that
Dialogue: 0,0:03:07.89,0:03:08.97,Default,,0,0,0,,you want to text John.
Dialogue: 0,0:03:09.43,0:03:13.27,Default,,0,0,0,,After that, Siri is going to
Dialogue: 0,0:03:13.27,0:03:15.79,Default,,0,0,0,,contact your app extension or
Dialogue: 0,0:03:15.79,0:03:17.34,Default,,0,0,0,,your intent parameter
Dialogue: 0,0:03:17.34,0:03:18.34,Default,,0,0,0,,resolveRecipients.
Dialogue: 0,0:03:19.57,0:03:21.23,Default,,0,0,0,,In there, Siri is going to
Dialogue: 0,0:03:21.23,0:03:23.13,Default,,0,0,0,,provide you an array of INPerson
Dialogue: 0,0:03:23.13,0:03:24.57,Default,,0,0,0,,objects, in this case, John
Dialogue: 0,0:03:24.57,0:03:25.85,Default,,0,0,0,,Appleseed and John Baily.
Dialogue: 0,0:03:26.28,0:03:27.82,Default,,0,0,0,,As we saw earlier, John
Dialogue: 0,0:03:27.82,0:03:29.49,Default,,0,0,0,,Appleseed and John Baily are
Dialogue: 0,0:03:29.49,0:03:30.75,Default,,0,0,0,,part of my address book.
Dialogue: 0,0:03:31.52,0:03:32.80,Default,,0,0,0,,It could also be they could be
Dialogue: 0,0:03:32.80,0:03:34.55,Default,,0,0,0,,part of my custom vocabulary on
Dialogue: 0,0:03:34.55,0:03:36.71,Default,,0,0,0,,my property address book on my
Dialogue: 0,0:03:36.71,0:03:37.39,Default,,0,0,0,,application.
Dialogue: 0,0:03:38.33,0:03:39.63,Default,,0,0,0,,At this point, the
Dialogue: 0,0:03:39.63,0:03:40.73,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:03:40.73,0:03:41.69,Default,,0,0,0,,parameter is going to get
Dialogue: 0,0:03:41.69,0:03:43.20,Default,,0,0,0,,invoked and it's up to the app
Dialogue: 0,0:03:43.20,0:03:44.49,Default,,0,0,0,,extension to make a decision.
Dialogue: 0,0:03:44.97,0:03:47.14,Default,,0,0,0,,Do we have enough information to
Dialogue: 0,0:03:47.14,0:03:48.48,Default,,0,0,0,,decide which John we want to
Dialogue: 0,0:03:48.48,0:03:52.21,Default,,0,0,0,,send the message or do we need
Dialogue: 0,0:03:52.24,0:03:53.84,Default,,0,0,0,,the help from the user to decide
Dialogue: 0,0:03:53.84,0:03:54.69,Default,,0,0,0,,which of these John?
Dialogue: 0,0:03:55.71,0:03:57.32,Default,,0,0,0,,In this case, we want to
Dialogue: 0,0:03:57.32,0:03:58.11,Default,,0,0,0,,disambiguate.
Dialogue: 0,0:03:58.46,0:04:00.67,Default,,0,0,0,,We are going to return back to
Dialogue: 0,0:04:00.67,0:04:02.35,Default,,0,0,0,,Siri the disambiguation list.
Dialogue: 0,0:04:03.20,0:04:04.77,Default,,0,0,0,,The list is going to be John
Dialogue: 0,0:04:04.77,0:04:06.14,Default,,0,0,0,,Appleseed and John Baily.
Dialogue: 0,0:04:07.57,0:04:09.09,Default,,0,0,0,,Siri is going to bring a great
Dialogue: 0,0:04:09.09,0:04:10.31,Default,,0,0,0,,experience to our user, going to
Dialogue: 0,0:04:10.31,0:04:11.43,Default,,0,0,0,,ask which one.
Dialogue: 0,0:04:11.90,0:04:13.52,Default,,0,0,0,,John Baily or John Appleseed?
Dialogue: 0,0:04:14.04,0:04:15.54,Default,,0,0,0,,At this point, it's up to the
Dialogue: 0,0:04:15.54,0:04:17.55,Default,,0,0,0,,user to decide which John they
Dialogue: 0,0:04:17.55,0:04:19.81,Default,,0,0,0,,want to use on their message.
Dialogue: 0,0:04:22.30,0:04:23.61,Default,,0,0,0,,For the purpose of this flow,
Dialogue: 0,0:04:23.61,0:04:25.56,Default,,0,0,0,,let's assume John Baily was the
Dialogue: 0,0:04:25.56,0:04:26.45,Default,,0,0,0,,one we chose.
Dialogue: 0,0:04:26.92,0:04:29.76,Default,,0,0,0,,Siri clearly understands that
Dialogue: 0,0:04:29.76,0:04:31.90,Default,,0,0,0,,John Baily is the message-- is
Dialogue: 0,0:04:31.90,0:04:33.11,Default,,0,0,0,,the contact we want to use.
Dialogue: 0,0:04:33.67,0:04:35.64,Default,,0,0,0,,Siri's going to provide back to
Dialogue: 0,0:04:35.64,0:04:36.89,Default,,0,0,0,,your resolveRecipients intent
Dialogue: 0,0:04:36.89,0:04:38.84,Default,,0,0,0,,parameter that John Baily is the
Dialogue: 0,0:04:38.84,0:04:40.18,Default,,0,0,0,,chosen INPerson object.
Dialogue: 0,0:04:40.99,0:04:43.08,Default,,0,0,0,,At this point, it's clearly that
Dialogue: 0,0:04:43.08,0:04:44.34,Default,,0,0,0,,we want to message John Baily
Dialogue: 0,0:04:45.25,0:04:47.15,Default,,0,0,0,,and your intent recipients--
Dialogue: 0,0:04:47.55,0:04:48.99,Default,,0,0,0,,intent parameter is ready to
Dialogue: 0,0:04:48.99,0:04:50.05,Default,,0,0,0,,move to the next stage.
Dialogue: 0,0:04:53.08,0:04:54.64,Default,,0,0,0,,To recap, we walked through the
Dialogue: 0,0:04:54.64,0:04:56.28,Default,,0,0,0,,process when we have multiple
Dialogue: 0,0:04:56.28,0:04:58.09,Default,,0,0,0,,Johns on our address book and we
Dialogue: 0,0:04:58.16,0:04:59.60,Default,,0,0,0,,walked through the flow to
Dialogue: 0,0:04:59.60,0:05:01.84,Default,,0,0,0,,disambiguate between them.
Dialogue: 0,0:05:02.20,0:05:03.34,Default,,0,0,0,,We decided that we want to
Dialogue: 0,0:05:03.34,0:05:04.23,Default,,0,0,0,,message John Baily.
Dialogue: 0,0:05:07.50,0:05:10.99,Default,,0,0,0,,But what if-- what if John Baily
Dialogue: 0,0:05:10.99,0:05:12.94,Default,,0,0,0,,has multiple phone numbers or
Dialogue: 0,0:05:12.94,0:05:14.86,Default,,0,0,0,,email addresses or a combination
Dialogue: 0,0:05:14.86,0:05:15.28,Default,,0,0,0,,of both?
Dialogue: 0,0:05:15.90,0:05:18.37,Default,,0,0,0,,It is yet not clear that-- which
Dialogue: 0,0:05:18.37,0:05:20.05,Default,,0,0,0,,of these handles we want to use
Dialogue: 0,0:05:20.09,0:05:21.06,Default,,0,0,0,,to send our message.
Dialogue: 0,0:05:21.81,0:05:23.72,Default,,0,0,0,,So, let's take a step back to
Dialogue: 0,0:05:23.72,0:05:24.98,Default,,0,0,0,,the point where the user chose
Dialogue: 0,0:05:25.01,0:05:25.59,Default,,0,0,0,,John Baily.
Dialogue: 0,0:05:26.75,0:05:28.51,Default,,0,0,0,,Siri understands that we want to
Dialogue: 0,0:05:28.51,0:05:29.58,Default,,0,0,0,,message John Baily.
Dialogue: 0,0:05:32.12,0:05:33.88,Default,,0,0,0,,Siri's going to communicate back
Dialogue: 0,0:05:34.06,0:05:35.55,Default,,0,0,0,,to your extension under
Dialogue: 0,0:05:35.55,0:05:36.98,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:05:36.98,0:05:40.19,Default,,0,0,0,,parameter with John Baily.
Dialogue: 0,0:05:40.59,0:05:43.53,Default,,0,0,0,,At this point, it's up to your
Dialogue: 0,0:05:43.53,0:05:44.52,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:05:44.52,0:05:47.33,Default,,0,0,0,,parameter implementation to
Dialogue: 0,0:05:47.33,0:05:49.26,Default,,0,0,0,,access your address book and
Dialogue: 0,0:05:49.26,0:05:50.96,Default,,0,0,0,,make sure that you have enough
Dialogue: 0,0:05:50.96,0:05:52.58,Default,,0,0,0,,information to which one handle
Dialogue: 0,0:05:52.58,0:05:53.33,Default,,0,0,0,,is going to be used.
Dialogue: 0,0:05:54.08,0:05:55.66,Default,,0,0,0,,In this case, as we saw, we have
Dialogue: 0,0:05:55.66,0:05:57.39,Default,,0,0,0,,multiple handles, so we need
Dialogue: 0,0:05:57.39,0:05:58.23,Default,,0,0,0,,user input.
Dialogue: 0,0:05:58.78,0:06:00.62,Default,,0,0,0,,Focusing on the phone handles,
Dialogue: 0,0:06:00.62,0:06:01.39,Default,,0,0,0,,we're going to provide the
Dialogue: 0,0:06:01.39,0:06:03.79,Default,,0,0,0,,disambiguation list as we did
Dialogue: 0,0:06:03.79,0:06:05.57,Default,,0,0,0,,before with the multiple Johns,
Dialogue: 0,0:06:05.84,0:06:07.14,Default,,0,0,0,,but in this case it's the
Dialogue: 0,0:06:07.14,0:06:08.81,Default,,0,0,0,,multiple phone number handles.
Dialogue: 0,0:06:09.23,0:06:11.45,Default,,0,0,0,,As we saw, we have home, mobile,
Dialogue: 0,0:06:11.45,0:06:11.95,Default,,0,0,0,,and work.
Dialogue: 0,0:06:13.72,0:06:17.02,Default,,0,0,0,,Siri is going to bring up a
Dialogue: 0,0:06:17.18,0:06:18.11,Default,,0,0,0,,prompt to the user.
Dialogue: 0,0:06:18.30,0:06:19.59,Default,,0,0,0,,Which one do you want to use?
Dialogue: 0,0:06:20.25,0:06:21.32,Default,,0,0,0,,So, in this case, it's pretty
Dialogue: 0,0:06:21.32,0:06:22.98,Default,,0,0,0,,clear to the user that they need
Dialogue: 0,0:06:22.98,0:06:24.35,Default,,0,0,0,,to pick one handle to send their
Dialogue: 0,0:06:24.35,0:06:24.82,Default,,0,0,0,,message.
Dialogue: 0,0:06:25.84,0:06:27.87,Default,,0,0,0,,Let's assume the user wants to
Dialogue: 0,0:06:27.87,0:06:32.28,Default,,0,0,0,,send to the mobile number.
Dialogue: 0,0:06:32.44,0:06:33.75,Default,,0,0,0,,User says mobile to Siri.
Dialogue: 0,0:06:34.27,0:06:35.57,Default,,0,0,0,,We go through the same cycle
Dialogue: 0,0:06:35.73,0:06:37.42,Default,,0,0,0,,where Siri understands that you
Dialogue: 0,0:06:37.42,0:06:38.93,Default,,0,0,0,,want to message on the mobile
Dialogue: 0,0:06:38.93,0:06:40.17,Default,,0,0,0,,number to John Baily.
Dialogue: 0,0:06:40.64,0:06:42.29,Default,,0,0,0,,Siri's going to share that
Dialogue: 0,0:06:42.29,0:06:43.45,Default,,0,0,0,,information back to the
Dialogue: 0,0:06:43.45,0:06:44.96,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:06:44.96,0:06:45.43,Default,,0,0,0,,parameter.
Dialogue: 0,0:06:45.99,0:06:48.06,Default,,0,0,0,,Here you're going to get the
Dialogue: 0,0:06:48.06,0:06:48.96,Default,,0,0,0,,whole information.
Dialogue: 0,0:06:49.11,0:06:50.50,Default,,0,0,0,,We want to message John Baily
Dialogue: 0,0:06:50.55,0:06:51.92,Default,,0,0,0,,and we want to do it in the
Dialogue: 0,0:06:51.92,0:06:52.82,Default,,0,0,0,,mobile handle.
Dialogue: 0,0:06:53.38,0:06:56.11,Default,,0,0,0,,At this point, the
Dialogue: 0,0:06:56.11,0:06:57.11,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:06:57.11,0:06:58.85,Default,,0,0,0,,parameter returns success, so we
Dialogue: 0,0:06:58.85,0:07:00.36,Default,,0,0,0,,have finalized picking our
Dialogue: 0,0:07:00.36,0:07:01.97,Default,,0,0,0,,recipient and we can move on to
Dialogue: 0,0:07:01.97,0:07:03.87,Default,,0,0,0,,the next stage.
Dialogue: 0,0:07:05.00,0:07:06.92,Default,,0,0,0,,As we know, any SiriKit intent
Dialogue: 0,0:07:06.92,0:07:09.49,Default,,0,0,0,,implementation has three steps:
Dialogue: 0,0:07:09.64,0:07:11.35,Default,,0,0,0,,resolve, confirm, and handle.
Dialogue: 0,0:07:12.58,0:07:14.78,Default,,0,0,0,,So, let's take a look at sample
Dialogue: 0,0:07:14.78,0:07:16.38,Default,,0,0,0,,code of the resolveRecipients
Dialogue: 0,0:07:16.45,0:07:17.91,Default,,0,0,0,,intent parameter implementation.
Dialogue: 0,0:07:20.84,0:07:23.20,Default,,0,0,0,,Here I have resolveRecipients
Dialogue: 0,0:07:23.20,0:07:23.84,Default,,0,0,0,,implemented.
Dialogue: 0,0:07:25.23,0:07:26.36,Default,,0,0,0,,The first thing that we're going
Dialogue: 0,0:07:26.36,0:07:28.56,Default,,0,0,0,,to do is make sure a recipient
Dialogue: 0,0:07:28.56,0:07:29.16,Default,,0,0,0,,was provided.
Dialogue: 0,0:07:29.83,0:07:31.05,Default,,0,0,0,,In the case that the recipient
Dialogue: 0,0:07:31.05,0:07:32.53,Default,,0,0,0,,wasn't provided, we can
Dialogue: 0,0:07:32.53,0:07:34.25,Default,,0,0,0,,basically ask Siri to ask for
Dialogue: 0,0:07:34.25,0:07:36.45,Default,,0,0,0,,that value to the user and we do
Dialogue: 0,0:07:36.45,0:07:38.54,Default,,0,0,0,,that by returning needsValue.
Dialogue: 0,0:07:39.41,0:07:40.74,Default,,0,0,0,,Siri will prompt the user.
Dialogue: 0,0:07:41.17,0:07:42.25,Default,,0,0,0,,To who do you want to send your
Dialogue: 0,0:07:42.25,0:07:42.73,Default,,0,0,0,,message?
Dialogue: 0,0:07:43.28,0:07:45.61,Default,,0,0,0,,In the sample we walked through,
Dialogue: 0,0:07:46.22,0:07:47.62,Default,,0,0,0,,the user said they want to
Dialogue: 0,0:07:47.62,0:07:48.26,Default,,0,0,0,,message John.
Dialogue: 0,0:07:49.29,0:07:51.39,Default,,0,0,0,,So, we got John.
Dialogue: 0,0:07:51.69,0:07:53.04,Default,,0,0,0,,We got John Appleseed and John
Dialogue: 0,0:07:53.04,0:07:53.44,Default,,0,0,0,,Baily.
Dialogue: 0,0:07:53.76,0:07:54.91,Default,,0,0,0,,Here is where we're going to
Dialogue: 0,0:07:54.91,0:07:56.10,Default,,0,0,0,,resolve which of these
Dialogue: 0,0:07:56.10,0:07:57.87,Default,,0,0,0,,recipients we want to use or
Dialogue: 0,0:07:57.87,0:07:59.33,Default,,0,0,0,,provide the disambiguation list
Dialogue: 0,0:07:59.36,0:08:01.29,Default,,0,0,0,,back to Siri so it can prompt to
Dialogue: 0,0:08:01.46,0:08:01.97,Default,,0,0,0,,the user.
Dialogue: 0,0:08:03.28,0:08:04.17,Default,,0,0,0,,In the case that we need to
Dialogue: 0,0:08:04.17,0:08:07.03,Default,,0,0,0,,provide back a list to Siri, we
Dialogue: 0,0:08:07.03,0:08:08.25,Default,,0,0,0,,basically return that under a
Dialogue: 0,0:08:08.25,0:08:09.07,Default,,0,0,0,,completion handle.
Dialogue: 0,0:08:11.70,0:08:13.08,Default,,0,0,0,,Let's see a demo of this in
Dialogue: 0,0:08:13.08,0:08:13.47,Default,,0,0,0,,action.
Dialogue: 0,0:08:17.14,0:08:19.94,Default,,0,0,0,,Here I have my resolveRecipients
Dialogue: 0,0:08:20.24,0:08:21.34,Default,,0,0,0,,intent parameter to be
Dialogue: 0,0:08:21.34,0:08:22.84,Default,,0,0,0,,implemented on my UnicornChat
Dialogue: 0,0:08:22.84,0:08:23.41,Default,,0,0,0,,application.
Dialogue: 0,0:08:24.50,0:08:26.23,Default,,0,0,0,,As we saw, the first thing that
Dialogue: 0,0:08:26.23,0:08:29.56,Default,,0,0,0,,we need to do is to validate
Dialogue: 0,0:08:29.56,0:08:30.83,Default,,0,0,0,,that we got a recipient.
Dialogue: 0,0:08:31.98,0:08:33.31,Default,,0,0,0,,Here we're making sure that a
Dialogue: 0,0:08:33.31,0:08:34.35,Default,,0,0,0,,recipient got provided.
Dialogue: 0,0:08:34.90,0:08:38.30,Default,,0,0,0,,In the case the recipient wasn't
Dialogue: 0,0:08:38.30,0:08:40.54,Default,,0,0,0,,provided, we ask Siri to ask the
Dialogue: 0,0:08:40.54,0:08:44.64,Default,,0,0,0,,user that we need that value.
Dialogue: 0,0:08:44.80,0:08:46.51,Default,,0,0,0,,Once we got that recipient
Dialogue: 0,0:08:47.21,0:08:49.67,Default,,0,0,0,,provided, we're going to process
Dialogue: 0,0:08:49.67,0:08:50.51,Default,,0,0,0,,those recipients.
Dialogue: 0,0:08:51.07,0:08:53.12,Default,,0,0,0,,Here we're going to walk through
Dialogue: 0,0:08:53.12,0:08:54.57,Default,,0,0,0,,all the recipients that we got
Dialogue: 0,0:08:54.57,0:08:56.35,Default,,0,0,0,,from Siri so we can process one
Dialogue: 0,0:08:56.35,0:08:56.75,Default,,0,0,0,,by one.
Dialogue: 0,0:08:57.19,0:08:59.41,Default,,0,0,0,,The first thing that I'm going
Dialogue: 0,0:08:59.41,0:09:00.90,Default,,0,0,0,,to do, I'm going to check with
Dialogue: 0,0:09:00.90,0:09:02.92,Default,,0,0,0,,my address book to resolve this
Dialogue: 0,0:09:02.92,0:09:03.42,Default,,0,0,0,,recipient.
Dialogue: 0,0:09:04.71,0:09:06.28,Default,,0,0,0,,My address book will do the
Dialogue: 0,0:09:06.28,0:09:07.77,Default,,0,0,0,,heavy lifting to making sure
Dialogue: 0,0:09:07.92,0:09:10.24,Default,,0,0,0,,that we have a contact backing
Dialogue: 0,0:09:10.24,0:09:11.04,Default,,0,0,0,,up that recipient.
Dialogue: 0,0:09:12.63,0:09:14.34,Default,,0,0,0,,Once that's done, we need to
Dialogue: 0,0:09:14.34,0:09:15.11,Default,,0,0,0,,make a decision.
Dialogue: 0,0:09:16.31,0:09:18.08,Default,,0,0,0,,The first case is where there's
Dialogue: 0,0:09:18.08,0:09:19.78,Default,,0,0,0,,not a contact backing up that
Dialogue: 0,0:09:19.78,0:09:20.27,Default,,0,0,0,,recipient.
Dialogue: 0,0:09:20.67,0:09:21.80,Default,,0,0,0,,Going back to our example of
Dialogue: 0,0:09:21.80,0:09:23.48,Default,,0,0,0,,John, if I don't have any John
Dialogue: 0,0:09:23.48,0:09:25.24,Default,,0,0,0,,on my address book, we basically
Dialogue: 0,0:09:25.24,0:09:26.95,Default,,0,0,0,,tell back Siri that I don't have
Dialogue: 0,0:09:26.95,0:09:28.15,Default,,0,0,0,,it and it's not supported.
Dialogue: 0,0:09:28.70,0:09:30.19,Default,,0,0,0,,It will make Siri to ask the
Dialogue: 0,0:09:30.19,0:09:31.97,Default,,0,0,0,,user to provide a valid
Dialogue: 0,0:09:31.97,0:09:32.55,Default,,0,0,0,,recipient.
Dialogue: 0,0:09:33.08,0:09:35.71,Default,,0,0,0,,In the case where we found one,
Dialogue: 0,0:09:36.22,0:09:37.38,Default,,0,0,0,,we need to process that
Dialogue: 0,0:09:38.00,0:09:38.57,Default,,0,0,0,,recipient.
Dialogue: 0,0:09:39.05,0:09:40.81,Default,,0,0,0,,So, let me walk through this
Dialogue: 0,0:09:40.81,0:09:41.37,Default,,0,0,0,,piece of code.
Dialogue: 0,0:09:42.76,0:09:44.57,Default,,0,0,0,,The first thing that we're going
Dialogue: 0,0:09:44.57,0:09:47.08,Default,,0,0,0,,to do is validate if that
Dialogue: 0,0:09:47.08,0:09:49.00,Default,,0,0,0,,recipient that we found has one
Dialogue: 0,0:09:49.00,0:09:49.94,Default,,0,0,0,,or multiple handles.
Dialogue: 0,0:09:50.36,0:09:51.54,Default,,0,0,0,,This case, we are focusing on
Dialogue: 0,0:09:51.54,0:09:52.29,Default,,0,0,0,,the phone numbers.
Dialogue: 0,0:09:52.83,0:09:54.06,Default,,0,0,0,,Where there are more than one
Dialogue: 0,0:09:54.06,0:09:55.84,Default,,0,0,0,,phone number and we cannot make
Dialogue: 0,0:09:55.84,0:09:57.62,Default,,0,0,0,,the decision for the user, we're
Dialogue: 0,0:09:57.62,0:09:58.45,Default,,0,0,0,,going to return back a
Dialogue: 0,0:09:58.45,0:10:01.32,Default,,0,0,0,,disambiguation response code
Dialogue: 0,0:10:01.65,0:10:02.90,Default,,0,0,0,,with the handle that we want to
Dialogue: 0,0:10:02.90,0:10:03.33,Default,,0,0,0,,display.
Dialogue: 0,0:10:03.67,0:10:05.21,Default,,0,0,0,,This is going to be used by Siri
Dialogue: 0,0:10:05.64,0:10:07.68,Default,,0,0,0,,to ask to the user which of the
Dialogue: 0,0:10:07.68,0:10:08.96,Default,,0,0,0,,handles you want to use.
Dialogue: 0,0:10:12.66,0:10:15.30,Default,,0,0,0,,In the case where we have a
Dialogue: 0,0:10:15.30,0:10:17.33,Default,,0,0,0,,single recipient with a single
Dialogue: 0,0:10:17.33,0:10:18.97,Default,,0,0,0,,handle, we basically return
Dialogue: 0,0:10:18.97,0:10:19.54,Default,,0,0,0,,success.
Dialogue: 0,0:10:19.66,0:10:20.78,Default,,0,0,0,,We tell them we found the
Dialogue: 0,0:10:20.78,0:10:22.22,Default,,0,0,0,,recipient and we're ready to
Dialogue: 0,0:10:22.22,0:10:23.47,Default,,0,0,0,,move on to the next stage.
Dialogue: 0,0:10:24.57,0:10:25.71,Default,,0,0,0,,Have a special case here.
Dialogue: 0,0:10:27.48,0:10:31.22,Default,,0,0,0,,This special case, it will cause
Dialogue: 0,0:10:31.22,0:10:33.77,Default,,0,0,0,,Siri to make a question to user.
Dialogue: 0,0:10:33.77,0:10:35.20,Default,,0,0,0,,Are you sure you want to message
Dialogue: 0,0:10:35.20,0:10:35.52,Default,,0,0,0,,John?
Dialogue: 0,0:10:36.24,0:10:38.17,Default,,0,0,0,,I use this in the cases where I
Dialogue: 0,0:10:38.17,0:10:39.78,Default,,0,0,0,,do some level of fuzzy matching
Dialogue: 0,0:10:39.86,0:10:42.07,Default,,0,0,0,,when the contact that Siri got
Dialogue: 0,0:10:42.07,0:10:43.67,Default,,0,0,0,,requested doesn't completely
Dialogue: 0,0:10:43.67,0:10:44.85,Default,,0,0,0,,match to the one I have on my
Dialogue: 0,0:10:44.85,0:10:48.56,Default,,0,0,0,,address book.
Dialogue: 0,0:10:48.78,0:10:50.03,Default,,0,0,0,,We're missing one or more case
Dialogue: 0,0:10:50.03,0:10:50.56,Default,,0,0,0,,to handle.
Dialogue: 0,0:10:52.32,0:10:54.00,Default,,0,0,0,,This is a case where we have
Dialogue: 0,0:10:54.00,0:10:55.04,Default,,0,0,0,,more than one match.
Dialogue: 0,0:10:56.14,0:10:58.26,Default,,0,0,0,,As we saw, we have John Baily
Dialogue: 0,0:10:58.26,0:11:00.17,Default,,0,0,0,,and John Appleseed on my address
Dialogue: 0,0:11:00.17,0:11:01.75,Default,,0,0,0,,book, so we need to disambiguate
Dialogue: 0,0:11:01.75,0:11:02.36,Default,,0,0,0,,between them.
Dialogue: 0,0:11:02.99,0:11:04.07,Default,,0,0,0,,Here we're using the same
Dialogue: 0,0:11:04.07,0:11:05.18,Default,,0,0,0,,technique, using a
Dialogue: 0,0:11:05.18,0:11:06.98,Default,,0,0,0,,disambiguation and providing the
Dialogue: 0,0:11:06.98,0:11:12.41,Default,,0,0,0,,list of matches.
Dialogue: 0,0:11:12.53,0:11:13.62,Default,,0,0,0,,There is one more case.
Dialogue: 0,0:11:14.02,0:11:15.34,Default,,0,0,0,,As we saw on the flow that we
Dialogue: 0,0:11:15.34,0:11:17.05,Default,,0,0,0,,walked through, first we asked
Dialogue: 0,0:11:17.05,0:11:18.98,Default,,0,0,0,,with John and then when the user
Dialogue: 0,0:11:18.98,0:11:20.77,Default,,0,0,0,,picked John Baily we asked which
Dialogue: 0,0:11:20.77,0:11:21.18,Default,,0,0,0,,handle.
Dialogue: 0,0:11:22.08,0:11:23.62,Default,,0,0,0,,We are going to call back the
Dialogue: 0,0:11:23.62,0:11:24.70,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:11:24.70,0:11:26.35,Default,,0,0,0,,parameter and we need to handle
Dialogue: 0,0:11:26.35,0:11:26.97,Default,,0,0,0,,that case.
Dialogue: 0,0:11:27.58,0:11:28.78,Default,,0,0,0,,In that case, we need to
Dialogue: 0,0:11:28.78,0:11:30.66,Default,,0,0,0,,validate if the handle has been
Dialogue: 0,0:11:30.66,0:11:32.02,Default,,0,0,0,,already provided, we can
Dialogue: 0,0:11:32.02,0:11:33.44,Default,,0,0,0,,basically return back with that
Dialogue: 0,0:11:33.44,0:11:33.97,Default,,0,0,0,,recipient.
Dialogue: 0,0:11:34.49,0:11:36.92,Default,,0,0,0,,So, let's see this in action.
Dialogue: 0,0:11:39.70,0:11:41.24,Default,,0,0,0,,In order to do that, I'm going
Dialogue: 0,0:11:41.24,0:11:44.24,Default,,0,0,0,,to use the edit a scheme.
Dialogue: 0,0:11:44.39,0:11:45.74,Default,,0,0,0,,So, you can provide the Siri
Dialogue: 0,0:11:45.74,0:11:48.09,Default,,0,0,0,,intent query from the get go so
Dialogue: 0,0:11:48.09,0:11:49.71,Default,,0,0,0,,you actually have to trigger
Dialogue: 0,0:11:49.71,0:11:50.81,Default,,0,0,0,,Siri and speak to it.
Dialogue: 0,0:11:51.10,0:11:52.58,Default,,0,0,0,,So, when I run my example, it's
Dialogue: 0,0:11:52.58,0:11:54.06,Default,,0,0,0,,going to trigger Siri for me and
Dialogue: 0,0:11:54.09,0:11:55.67,Default,,0,0,0,,it's going to say text John
Dialogue: 0,0:11:55.67,0:11:56.84,Default,,0,0,0,,hello on UnicornChat.
Dialogue: 0,0:12:08.27,0:12:09.99,Default,,0,0,0,,As we see, we have multiple
Dialogue: 0,0:12:09.99,0:12:11.77,Default,,0,0,0,,Johns on my address book, so we
Dialogue: 0,0:12:11.77,0:12:12.45,Default,,0,0,0,,need to pick one.
Dialogue: 0,0:12:13.14,0:12:14.10,Default,,0,0,0,,Let's pick John Baily.
Dialogue: 0,0:12:14.64,0:12:17.07,Default,,0,0,0,,As we walk through the flow, we
Dialogue: 0,0:12:17.07,0:12:18.38,Default,,0,0,0,,also have to pick a handle.
Dialogue: 0,0:12:18.55,0:12:19.79,Default,,0,0,0,,In this case, we want to pick
Dialogue: 0,0:12:19.79,0:12:20.58,Default,,0,0,0,,the mobile handle.
Dialogue: 0,0:12:21.96,0:12:23.20,Default,,0,0,0,,At this point, we are ready to
Dialogue: 0,0:12:23.20,0:12:24.94,Default,,0,0,0,,send the message and all the--
Dialogue: 0,0:12:25.05,0:12:29.00,Default,,0,0,0,,the recipient has been resolved.
Dialogue: 0,0:12:32.52,0:12:37.33,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:12:37.83,0:12:39.33,Default,,0,0,0,,We just saw how to walk through
Dialogue: 0,0:12:39.33,0:12:41.06,Default,,0,0,0,,the process of resolving a
Dialogue: 0,0:12:41.06,0:12:42.44,Default,,0,0,0,,contact when trying to send a
Dialogue: 0,0:12:42.44,0:12:42.89,Default,,0,0,0,,message.
Dialogue: 0,0:12:43.44,0:12:45.06,Default,,0,0,0,,This technique also applies to
Dialogue: 0,0:12:45.06,0:12:46.54,Default,,0,0,0,,any other intent that requires
Dialogue: 0,0:12:46.58,0:12:47.42,Default,,0,0,0,,contact resolution.
Dialogue: 0,0:12:49.88,0:12:52.42,Default,,0,0,0,,Messaging applications are great
Dialogue: 0,0:12:52.42,0:12:53.86,Default,,0,0,0,,for sending messages, but
Dialogue: 0,0:12:53.86,0:12:55.39,Default,,0,0,0,,they're also great for reading
Dialogue: 0,0:12:55.39,0:12:55.88,Default,,0,0,0,,messages.
Dialogue: 0,0:12:56.50,0:12:58.25,Default,,0,0,0,,A great example of that is
Dialogue: 0,0:12:58.25,0:12:59.85,Default,,0,0,0,,reading messages on CarPlay.
Dialogue: 0,0:13:00.75,0:13:02.72,Default,,0,0,0,,If your application implements
Dialogue: 0,0:13:03.08,0:13:05.12,Default,,0,0,0,,the INSearchForMessagesIntent,
Dialogue: 0,0:13:05.57,0:13:07.40,Default,,0,0,0,,you will get access to reading
Dialogue: 0,0:13:07.40,0:13:09.72,Default,,0,0,0,,experience on iOS as well as on
Dialogue: 0,0:13:09.72,0:13:09.95,Default,,0,0,0,,CarPlay.
Dialogue: 0,0:13:10.45,0:13:14.05,Default,,0,0,0,,So, on iOS 11, we introduce a
Dialogue: 0,0:13:14.05,0:13:16.45,Default,,0,0,0,,new property to make replying to
Dialogue: 0,0:13:16.45,0:13:18.27,Default,,0,0,0,,the messages that Siri just read
Dialogue: 0,0:13:18.27,0:13:19.66,Default,,0,0,0,,to our users easier.
Dialogue: 0,0:13:21.44,0:13:23.29,Default,,0,0,0,,That new property is
Dialogue: 0,0:13:23.29,0:13:24.53,Default,,0,0,0,,conversationIdentifier.
Dialogue: 0,0:13:25.34,0:13:27.12,Default,,0,0,0,,This has been introduced on the
Dialogue: 0,0:13:27.18,0:13:29.91,Default,,0,0,0,,INMessage object as well on the
Dialogue: 0,0:13:29.91,0:13:31.28,Default,,0,0,0,,INSendMessageIntent.
Dialogue: 0,0:13:32.18,0:13:33.97,Default,,0,0,0,,This conversationIdentifier is
Dialogue: 0,0:13:33.97,0:13:36.60,Default,,0,0,0,,going to be used to reply to a
Dialogue: 0,0:13:36.60,0:13:37.06,Default,,0,0,0,,message.
Dialogue: 0,0:13:37.37,0:13:38.63,Default,,0,0,0,,Siri is going to read a message
Dialogue: 0,0:13:38.63,0:13:41.33,Default,,0,0,0,,for you from UnicornChat and the
Dialogue: 0,0:13:41.33,0:13:42.81,Default,,0,0,0,,value of this property is going
Dialogue: 0,0:13:42.85,0:13:44.42,Default,,0,0,0,,to help you to short circuit the
Dialogue: 0,0:13:44.42,0:13:46.00,Default,,0,0,0,,contact resolution process that
Dialogue: 0,0:13:46.00,0:13:48.43,Default,,0,0,0,,we walked through.
Dialogue: 0,0:13:48.63,0:13:51.49,Default,,0,0,0,,Let's see the flow of how this
Dialogue: 0,0:13:51.49,0:13:51.84,Default,,0,0,0,,is done.
Dialogue: 0,0:13:52.35,0:13:55.42,Default,,0,0,0,,Read my messages on UnicornChat.
Dialogue: 0,0:13:56.53,0:13:57.90,Default,,0,0,0,,We want to read the messages
Dialogue: 0,0:13:57.90,0:13:59.70,Default,,0,0,0,,that we have on the UnicornChat.
Dialogue: 0,0:14:00.33,0:14:03.74,Default,,0,0,0,,Siri clearly understands that.
Dialogue: 0,0:14:03.96,0:14:05.50,Default,,0,0,0,,Siri is going to send an
Dialogue: 0,0:14:05.53,0:14:07.36,Default,,0,0,0,,INSearchForMessagesIntent to
Dialogue: 0,0:14:07.36,0:14:08.26,Default,,0,0,0,,your app extension.
Dialogue: 0,0:14:09.15,0:14:10.45,Default,,0,0,0,,Your app extension has
Dialogue: 0,0:14:10.45,0:14:11.56,Default,,0,0,0,,implemented the
Dialogue: 0,0:14:11.56,0:14:13.11,Default,,0,0,0,,SearchForMessageIntent handle.
Dialogue: 0,0:14:14.21,0:14:16.21,Default,,0,0,0,,This handle is going to provide
Dialogue: 0,0:14:16.21,0:14:18.01,Default,,0,0,0,,the list of INMessages object
Dialogue: 0,0:14:18.58,0:14:19.85,Default,,0,0,0,,that Siri is going to read back
Dialogue: 0,0:14:19.91,0:14:20.46,Default,,0,0,0,,to the user.
Dialogue: 0,0:14:21.68,0:14:23.94,Default,,0,0,0,,As we notice, the INMessage
Dialogue: 0,0:14:23.98,0:14:26.57,Default,,0,0,0,,object contains a property named
Dialogue: 0,0:14:26.57,0:14:27.76,Default,,0,0,0,,conversationIdentifier.
Dialogue: 0,0:14:29.03,0:14:31.69,Default,,0,0,0,,This identifier represents the
Dialogue: 0,0:14:31.69,0:14:33.49,Default,,0,0,0,,uniqueness of that conversation.
Dialogue: 0,0:14:34.63,0:14:36.01,Default,,0,0,0,,With that uniqueness, you can
Dialogue: 0,0:14:36.01,0:14:37.62,Default,,0,0,0,,use that conversationIdentifier
Dialogue: 0,0:14:37.85,0:14:38.98,Default,,0,0,0,,when the user wants to reply
Dialogue: 0,0:14:39.81,0:14:39.91,Default,,0,0,0,,back.
Dialogue: 0,0:14:41.15,0:14:43.33,Default,,0,0,0,,As we see, Siri finished reading
Dialogue: 0,0:14:43.33,0:14:44.60,Default,,0,0,0,,the message and it will ask the
Dialogue: 0,0:14:44.60,0:14:45.90,Default,,0,0,0,,user if they want to reply.
Dialogue: 0,0:14:47.52,0:14:49.12,Default,,0,0,0,,To continue this flow, let's
Dialogue: 0,0:14:49.12,0:14:51.17,Default,,0,0,0,,assume the user wants to reply
Dialogue: 0,0:14:51.63,0:14:52.38,Default,,0,0,0,,saying hello.
Dialogue: 0,0:14:52.90,0:14:56.51,Default,,0,0,0,,Siri clearly understands the
Dialogue: 0,0:14:56.51,0:14:58.65,Default,,0,0,0,,user say just hello, meaning I
Dialogue: 0,0:14:58.65,0:15:00.00,Default,,0,0,0,,want to reply to this message
Dialogue: 0,0:15:00.03,0:15:01.73,Default,,0,0,0,,and I want it to say hello on my
Dialogue: 0,0:15:01.73,0:15:02.30,Default,,0,0,0,,content.
Dialogue: 0,0:15:03.68,0:15:05.15,Default,,0,0,0,,Siri is going to send down an
Dialogue: 0,0:15:05.15,0:15:07.02,Default,,0,0,0,,INSendMessageIntent with a
Dialogue: 0,0:15:07.02,0:15:08.33,Default,,0,0,0,,conversationIdentifier
Dialogue: 0,0:15:08.42,0:15:08.98,Default,,0,0,0,,populated.
Dialogue: 0,0:15:09.72,0:15:11.16,Default,,0,0,0,,This conversationIdentifier
Dialogue: 0,0:15:11.16,0:15:12.84,Default,,0,0,0,,value is the same one that you
Dialogue: 0,0:15:12.84,0:15:14.36,Default,,0,0,0,,populated on the INMessage
Dialogue: 0,0:15:14.42,0:15:16.31,Default,,0,0,0,,object that Siri used for
Dialogue: 0,0:15:16.31,0:15:17.11,Default,,0,0,0,,reading the message.
Dialogue: 0,0:15:18.28,0:15:20.21,Default,,0,0,0,,With this value, now it's
Dialogue: 0,0:15:20.21,0:15:20.95,Default,,0,0,0,,provided in the
Dialogue: 0,0:15:20.95,0:15:22.13,Default,,0,0,0,,resolveRecipients intent
Dialogue: 0,0:15:22.13,0:15:22.58,Default,,0,0,0,,parameter.
Dialogue: 0,0:15:23.37,0:15:24.83,Default,,0,0,0,,Would it-- we can short circuit
Dialogue: 0,0:15:24.83,0:15:26.24,Default,,0,0,0,,the contact resolution by
Dialogue: 0,0:15:26.24,0:15:27.78,Default,,0,0,0,,basically using it and going
Dialogue: 0,0:15:27.78,0:15:29.63,Default,,0,0,0,,straight to our messaging
Dialogue: 0,0:15:29.63,0:15:31.43,Default,,0,0,0,,conversation, grabbing that
Dialogue: 0,0:15:31.43,0:15:32.75,Default,,0,0,0,,conversation, getting the
Dialogue: 0,0:15:32.75,0:15:35.00,Default,,0,0,0,,recipients, and moving on to the
Dialogue: 0,0:15:35.00,0:15:36.49,Default,,0,0,0,,next step of replying to the
Dialogue: 0,0:15:36.49,0:15:36.92,Default,,0,0,0,,message.
Dialogue: 0,0:15:41.56,0:15:43.15,Default,,0,0,0,,To learn more about enabling
Dialogue: 0,0:15:43.15,0:15:44.51,Default,,0,0,0,,your app for CarPlay, I
Dialogue: 0,0:15:44.51,0:15:45.53,Default,,0,0,0,,recommend you take a look to
Dialogue: 0,0:15:45.53,0:15:47.28,Default,,0,0,0,,this video that we released this
Dialogue: 0,0:15:47.81,0:15:47.90,Default,,0,0,0,,year.
Dialogue: 0,0:15:52.72,0:15:56.04,Default,,0,0,0,,In addition to doing contact
Dialogue: 0,0:15:56.04,0:15:59.02,Default,,0,0,0,,resolution, we also had looked
Dialogue: 0,0:15:59.02,0:16:00.12,Default,,0,0,0,,at response codes.
Dialogue: 0,0:16:01.23,0:16:02.56,Default,,0,0,0,,Last year, when we introduced
Dialogue: 0,0:16:02.56,0:16:03.95,Default,,0,0,0,,SiriKit, we introduced a set of
Dialogue: 0,0:16:03.95,0:16:05.24,Default,,0,0,0,,response codes that you might be
Dialogue: 0,0:16:05.24,0:16:06.89,Default,,0,0,0,,familiar with on the messaging
Dialogue: 0,0:16:06.89,0:16:07.22,Default,,0,0,0,,world.
Dialogue: 0,0:16:07.61,0:16:09.22,Default,,0,0,0,,For example, when the service is
Dialogue: 0,0:16:09.22,0:16:11.05,Default,,0,0,0,,not available, you can return
Dialogue: 0,0:16:11.05,0:16:13.12,Default,,0,0,0,,back a failure service not
Dialogue: 0,0:16:13.12,0:16:14.60,Default,,0,0,0,,available and Siri will gladly
Dialogue: 0,0:16:14.60,0:16:16.44,Default,,0,0,0,,tell that to the user what went
Dialogue: 0,0:16:16.44,0:16:16.68,Default,,0,0,0,,wrong.
Dialogue: 0,0:16:16.93,0:16:19.65,Default,,0,0,0,,We look at that and we have
Dialogue: 0,0:16:19.65,0:16:21.65,Default,,0,0,0,,improved the response codes on
Dialogue: 0,0:16:22.63,0:16:24.65,Default,,0,0,0,,calling intents, messaging
Dialogue: 0,0:16:24.65,0:16:27.31,Default,,0,0,0,,intents, and payment intents.
Dialogue: 0,0:16:27.99,0:16:30.03,Default,,0,0,0,,In this case, I have an example
Dialogue: 0,0:16:30.09,0:16:32.05,Default,,0,0,0,,of a call intent where we
Dialogue: 0,0:16:32.05,0:16:33.49,Default,,0,0,0,,introduced an invalid number
Dialogue: 0,0:16:33.49,0:16:35.34,Default,,0,0,0,,response code and it will help
Dialogue: 0,0:16:35.34,0:16:36.71,Default,,0,0,0,,us to be more transparent to the
Dialogue: 0,0:16:36.71,0:16:39.44,Default,,0,0,0,,user when the intent created
Dialogue: 0,0:16:39.44,0:16:40.65,Default,,0,0,0,,doesn't have a valid number.
Dialogue: 0,0:16:41.28,0:16:42.65,Default,,0,0,0,,That way Siri will provide a
Dialogue: 0,0:16:42.65,0:16:44.73,Default,,0,0,0,,nice experience and it will be
Dialogue: 0,0:16:44.82,0:16:46.80,Default,,0,0,0,,pretty clear what went wrong.
Dialogue: 0,0:16:47.54,0:16:49.01,Default,,0,0,0,,For more information for this,
Dialogue: 0,0:16:49.22,0:16:49.74,Default,,0,0,0,,you can look at the
Dialogue: 0,0:16:49.74,0:16:50.52,Default,,0,0,0,,documentation.
Dialogue: 0,0:16:52.46,0:16:54.55,Default,,0,0,0,,To recap what we have covered so
Dialogue: 0,0:16:54.55,0:16:56.31,Default,,0,0,0,,far, we talked about
Dialogue: 0,0:16:56.31,0:16:58.23,Default,,0,0,0,,INPerson.siriMatches, the new
Dialogue: 0,0:16:58.23,0:16:59.77,Default,,0,0,0,,property that we introduced on
Dialogue: 0,0:16:59.88,0:17:02.80,Default,,0,0,0,,iOS 10.3 that can help you do
Dialogue: 0,0:17:02.80,0:17:04.02,Default,,0,0,0,,better contact resolution
Dialogue: 0,0:17:04.02,0:17:04.40,Default,,0,0,0,,handling.
Dialogue: 0,0:17:05.47,0:17:06.95,Default,,0,0,0,,After that, we walked through
Dialogue: 0,0:17:06.95,0:17:08.11,Default,,0,0,0,,the process of resolving
Dialogue: 0,0:17:08.11,0:17:09.71,Default,,0,0,0,,multiple handles, meaning
Dialogue: 0,0:17:09.81,0:17:11.61,Default,,0,0,0,,multiple phone numbers or email
Dialogue: 0,0:17:11.61,0:17:13.36,Default,,0,0,0,,addresses or a combination of
Dialogue: 0,0:17:13.36,0:17:13.63,Default,,0,0,0,,both.
Dialogue: 0,0:17:16.30,0:17:17.96,Default,,0,0,0,,We also covered the introduction
Dialogue: 0,0:17:18.09,0:17:19.58,Default,,0,0,0,,of the conversationIdentifier
Dialogue: 0,0:17:19.66,0:17:21.51,Default,,0,0,0,,and how it's helpful to replying
Dialogue: 0,0:17:21.51,0:17:23.67,Default,,0,0,0,,messages that Siri just read.
Dialogue: 0,0:17:24.94,0:17:26.87,Default,,0,0,0,,And we also briefly covered
Dialogue: 0,0:17:26.87,0:17:27.80,Default,,0,0,0,,response codes and the
Dialogue: 0,0:17:27.80,0:17:29.68,Default,,0,0,0,,enhancement we have provided in
Dialogue: 0,0:17:29.74,0:17:30.39,Default,,0,0,0,,iOS 11.
Dialogue: 0,0:17:31.65,0:17:32.90,Default,,0,0,0,,With that, I'm going to hand
Dialogue: 0,0:17:32.90,0:17:34.64,Default,,0,0,0,,over to my coworker Rohit so he
Dialogue: 0,0:17:34.64,0:17:35.83,Default,,0,0,0,,can talk to you more about
Dialogue: 0,0:17:35.83,0:17:36.36,Default,,0,0,0,,security.
Dialogue: 0,0:17:37.52,0:17:42.37,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:17:42.87,0:17:43.53,Default,,0,0,0,,>> Thank you, Angel.
Dialogue: 0,0:17:45.06,0:17:46.10,Default,,0,0,0,,Hello everyone.
Dialogue: 0,0:17:46.73,0:17:48.52,Default,,0,0,0,,My name is Rohit Dasari.
Dialogue: 0,0:17:48.59,0:17:49.87,Default,,0,0,0,,I work on the SiriKit team.
Dialogue: 0,0:17:50.49,0:17:52.03,Default,,0,0,0,,So, let's talk about security in
Dialogue: 0,0:17:52.03,0:17:53.32,Default,,0,0,0,,the context of SiriKit.
Dialogue: 0,0:17:53.85,0:17:56.88,Default,,0,0,0,,Let's go back to the example of
Dialogue: 0,0:17:56.88,0:17:58.11,Default,,0,0,0,,UnicornChat which we saw
Dialogue: 0,0:17:58.11,0:17:58.44,Default,,0,0,0,,earlier.
Dialogue: 0,0:17:59.49,0:18:00.69,Default,,0,0,0,,You see here that the user is
Dialogue: 0,0:18:00.69,0:18:02.37,Default,,0,0,0,,able to send a message even when
Dialogue: 0,0:18:02.37,0:18:03.48,Default,,0,0,0,,the device is locked.
Dialogue: 0,0:18:04.08,0:18:05.47,Default,,0,0,0,,Now, Siri lets this through
Dialogue: 0,0:18:06.00,0:18:07.66,Default,,0,0,0,,makes-- Siri makes a decision
Dialogue: 0,0:18:07.93,0:18:09.70,Default,,0,0,0,,based on the intent whether--
Dialogue: 0,0:18:09.70,0:18:12.46,Default,,0,0,0,,how to balance usability and
Dialogue: 0,0:18:12.46,0:18:14.17,Default,,0,0,0,,convenience with security.
Dialogue: 0,0:18:15.37,0:18:16.95,Default,,0,0,0,,In this case, for the messaging
Dialogue: 0,0:18:16.95,0:18:18.79,Default,,0,0,0,,case, Siri lets requests through
Dialogue: 0,0:18:18.79,0:18:20.09,Default,,0,0,0,,even when the device is locked.
Dialogue: 0,0:18:20.96,0:18:23.37,Default,,0,0,0,,Some of you might be required to
Dialogue: 0,0:18:23.44,0:18:24.79,Default,,0,0,0,,ask the user to unlock the
Dialogue: 0,0:18:24.79,0:18:26.57,Default,,0,0,0,,device before handling intents
Dialogue: 0,0:18:26.57,0:18:27.24,Default,,0,0,0,,of this kind.
Dialogue: 0,0:18:28.64,0:18:29.75,Default,,0,0,0,,This might be due to some
Dialogue: 0,0:18:29.75,0:18:31.96,Default,,0,0,0,,security policies or some
Dialogue: 0,0:18:31.96,0:18:34.14,Default,,0,0,0,,corporate or legal requirements
Dialogue: 0,0:18:34.14,0:18:35.60,Default,,0,0,0,,that your app has to conform to.
Dialogue: 0,0:18:37.16,0:18:39.24,Default,,0,0,0,,There's a way to do this with
Dialogue: 0,0:18:39.50,0:18:42.30,Default,,0,0,0,,the current SiriKit mechanisms
Dialogue: 0,0:18:42.68,0:18:44.06,Default,,0,0,0,,without any code changes.
Dialogue: 0,0:18:44.06,0:18:45.60,Default,,0,0,0,,That is zero code changes.
Dialogue: 0,0:18:47.68,0:18:50.11,Default,,0,0,0,,All you have to do is go into
Dialogue: 0,0:18:50.11,0:18:52.86,Default,,0,0,0,,the info.plist of your SiriKit
Dialogue: 0,0:18:52.86,0:18:56.70,Default,,0,0,0,,intents extension and in the
Dialogue: 0,0:18:56.70,0:18:58.41,Default,,0,0,0,,place where you list the intents
Dialogue: 0,0:18:58.63,0:19:00.11,Default,,0,0,0,,that your extension supports,
Dialogue: 0,0:19:01.03,0:19:05.16,Default,,0,0,0,,add this entry for the intents
Dialogue: 0,0:19:05.16,0:19:06.09,Default,,0,0,0,,you want to restrict.
Dialogue: 0,0:19:07.16,0:19:08.11,Default,,0,0,0,,The section is called
Dialogue: 0,0:19:08.16,0:19:09.82,Default,,0,0,0,,IntentsRestrictedWhileLocked,
Dialogue: 0,0:19:09.82,0:19:11.00,Default,,0,0,0,,which speaks for itself.
Dialogue: 0,0:19:11.95,0:19:14.87,Default,,0,0,0,,So, with this one change, Siri
Dialogue: 0,0:19:14.87,0:19:18.39,Default,,0,0,0,,now knows that when the user
Dialogue: 0,0:19:18.39,0:19:22.32,Default,,0,0,0,,wants to perform an intent which
Dialogue: 0,0:19:22.32,0:19:25.35,Default,,0,0,0,,falls into this category, the
Dialogue: 0,0:19:25.35,0:19:27.34,Default,,0,0,0,,device must first be unlocked.
Dialogue: 0,0:19:29.34,0:19:31.03,Default,,0,0,0,,Zero lines of code change.
Dialogue: 0,0:19:34.98,0:19:37.39,Default,,0,0,0,,But sometimes that's not enough.
Dialogue: 0,0:19:37.97,0:19:39.04,Default,,0,0,0,,Unlocking the device is not
Dialogue: 0,0:19:39.04,0:19:39.46,Default,,0,0,0,,enough.
Dialogue: 0,0:19:40.04,0:19:41.50,Default,,0,0,0,,Let's take this example of an
Dialogue: 0,0:19:41.50,0:19:45.24,Default,,0,0,0,,app which users can use to lock
Dialogue: 0,0:19:45.24,0:19:46.57,Default,,0,0,0,,and unlock their cars.
Dialogue: 0,0:19:47.56,0:19:49.28,Default,,0,0,0,,For an app like this to
Dialogue: 0,0:19:49.28,0:19:51.29,Default,,0,0,0,,integrate with SiriKit, it has
Dialogue: 0,0:19:51.29,0:19:53.65,Default,,0,0,0,,to handle an intent called
Dialogue: 0,0:19:54.06,0:19:56.56,Default,,0,0,0,,setCarLockStatusIntent.
Dialogue: 0,0:19:57.68,0:19:58.94,Default,,0,0,0,,This is an intent we added in
Dialogue: 0,0:19:59.31,0:20:00.62,Default,,0,0,0,,iOS 10.3.
Dialogue: 0,0:20:01.16,0:20:03.96,Default,,0,0,0,,Let's take a quick look at this
Dialogue: 0,0:20:03.96,0:20:04.43,Default,,0,0,0,,intent.
Dialogue: 0,0:20:04.98,0:20:06.07,Default,,0,0,0,,It's a pretty simple intent.
Dialogue: 0,0:20:06.58,0:20:07.85,Default,,0,0,0,,There are two properties.
Dialogue: 0,0:20:08.60,0:20:09.86,Default,,0,0,0,,The name of the car you want to
Dialogue: 0,0:20:09.86,0:20:13.34,Default,,0,0,0,,lock or unlock and the state
Dialogue: 0,0:20:13.43,0:20:14.65,Default,,0,0,0,,that you want to set on that
Dialogue: 0,0:20:14.65,0:20:14.82,Default,,0,0,0,,car.
Dialogue: 0,0:20:17.71,0:20:19.63,Default,,0,0,0,,Once the app provides an
Dialogue: 0,0:20:19.63,0:20:20.81,Default,,0,0,0,,extension that handles this
Dialogue: 0,0:20:20.81,0:20:23.17,Default,,0,0,0,,intent, it can handle commands
Dialogue: 0,0:20:23.17,0:20:25.05,Default,,0,0,0,,like this where the user can say
Dialogue: 0,0:20:25.05,0:20:27.62,Default,,0,0,0,,unlock my car and Siri will know
Dialogue: 0,0:20:27.62,0:20:29.46,Default,,0,0,0,,to invoke the app extension,
Dialogue: 0,0:20:29.46,0:20:30.94,Default,,0,0,0,,give it intent, and let the
Dialogue: 0,0:20:30.94,0:20:32.82,Default,,0,0,0,,intent-- and let the extension
Dialogue: 0,0:20:32.82,0:20:33.26,Default,,0,0,0,,handle it.
Dialogue: 0,0:20:34.16,0:20:35.34,Default,,0,0,0,,Notice I'm not saying the name
Dialogue: 0,0:20:35.34,0:20:36.08,Default,,0,0,0,,of the app here.
Dialogue: 0,0:20:36.66,0:20:38.10,Default,,0,0,0,,This is because Siri is smart
Dialogue: 0,0:20:38.10,0:20:39.38,Default,,0,0,0,,enough to know when there is
Dialogue: 0,0:20:39.38,0:20:41.40,Default,,0,0,0,,only one qualifying app to
Dialogue: 0,0:20:41.40,0:20:42.78,Default,,0,0,0,,handle a particular intent and
Dialogue: 0,0:20:43.22,0:20:45.54,Default,,0,0,0,,it will not ask the user for
Dialogue: 0,0:20:45.64,0:20:47.47,Default,,0,0,0,,either confirming the name of
Dialogue: 0,0:20:47.47,0:20:48.93,Default,,0,0,0,,the app or for disambiguating.
Dialogue: 0,0:20:50.11,0:20:51.61,Default,,0,0,0,,So, with this intent handled,
Dialogue: 0,0:20:52.31,0:20:54.89,Default,,0,0,0,,the example app I have reflects
Dialogue: 0,0:20:54.89,0:20:56.19,Default,,0,0,0,,the change in the state of the
Dialogue: 0,0:20:56.19,0:20:58.48,Default,,0,0,0,,car's doors by showing it
Dialogue: 0,0:20:58.48,0:20:59.76,Default,,0,0,0,,graphically, as you can see
Dialogue: 0,0:21:00.41,0:21:00.50,Default,,0,0,0,,here.
Dialogue: 0,0:21:01.40,0:21:03.10,Default,,0,0,0,,So, this is a pretty sensitive
Dialogue: 0,0:21:03.10,0:21:03.59,Default,,0,0,0,,transaction.
Dialogue: 0,0:21:03.59,0:21:04.90,Default,,0,0,0,,You are unlocking somebody's
Dialogue: 0,0:21:04.90,0:21:05.30,Default,,0,0,0,,car.
Dialogue: 0,0:21:06.03,0:21:07.81,Default,,0,0,0,,So, for transactions like this,
Dialogue: 0,0:21:07.81,0:21:09.03,Default,,0,0,0,,even when the device is
Dialogue: 0,0:21:09.03,0:21:10.60,Default,,0,0,0,,unlocked, you might want to
Dialogue: 0,0:21:10.60,0:21:12.68,Default,,0,0,0,,present another authorization
Dialogue: 0,0:21:12.68,0:21:13.54,Default,,0,0,0,,request to the user.
Dialogue: 0,0:21:14.99,0:21:17.94,Default,,0,0,0,,We recommend you use the secure
Dialogue: 0,0:21:17.94,0:21:19.53,Default,,0,0,0,,authorization mechanism which is
Dialogue: 0,0:21:19.69,0:21:21.99,Default,,0,0,0,,already built into iOS, which is
Dialogue: 0,0:21:22.16,0:21:22.64,Default,,0,0,0,,Touch ID.
Dialogue: 0,0:21:23.74,0:21:24.97,Default,,0,0,0,,Using the local authentication
Dialogue: 0,0:21:24.97,0:21:27.74,Default,,0,0,0,,API, you can even customize the
Dialogue: 0,0:21:27.74,0:21:29.91,Default,,0,0,0,,prompt which is shown along with
Dialogue: 0,0:21:29.91,0:21:32.02,Default,,0,0,0,,the Touch ID to tell the user to
Dialogue: 0,0:21:32.02,0:21:33.92,Default,,0,0,0,,give the user some context about
Dialogue: 0,0:21:33.92,0:21:35.40,Default,,0,0,0,,why they're being asked to
Dialogue: 0,0:21:35.40,0:21:37.87,Default,,0,0,0,,authorize all over again even
Dialogue: 0,0:21:37.87,0:21:38.90,Default,,0,0,0,,when the device is locked--
Dialogue: 0,0:21:38.90,0:21:39.33,Default,,0,0,0,,unlocked.
Dialogue: 0,0:21:41.59,0:21:43.04,Default,,0,0,0,,In case your device does not--
Dialogue: 0,0:21:43.12,0:21:44.70,Default,,0,0,0,,in case the user's device does
Dialogue: 0,0:21:44.70,0:21:46.47,Default,,0,0,0,,not support Touch ID or maybe
Dialogue: 0,0:21:46.47,0:21:47.67,Default,,0,0,0,,the user has not configured
Dialogue: 0,0:21:47.67,0:21:50.33,Default,,0,0,0,,Touch ID yet on that device, the
Dialogue: 0,0:21:50.33,0:21:52.07,Default,,0,0,0,,local authentication API allows
Dialogue: 0,0:21:52.07,0:21:53.99,Default,,0,0,0,,you to fall back to unlocking
Dialogue: 0,0:21:53.99,0:21:55.33,Default,,0,0,0,,the device using just the
Dialogue: 0,0:21:55.33,0:21:55.90,Default,,0,0,0,,passcode.
Dialogue: 0,0:21:57.51,0:21:58.73,Default,,0,0,0,,You notice it has the same
Dialogue: 0,0:21:58.94,0:22:00.36,Default,,0,0,0,,customized string which is
Dialogue: 0,0:22:00.63,0:22:02.37,Default,,0,0,0,,provided by your app over here
Dialogue: 0,0:22:02.37,0:22:03.90,Default,,0,0,0,,to give the user some context.
Dialogue: 0,0:22:04.91,0:22:06.26,Default,,0,0,0,,This is pretty simple to do.
Dialogue: 0,0:22:06.56,0:22:08.08,Default,,0,0,0,,Let me show you a demo of how to
Dialogue: 0,0:22:08.08,0:22:08.43,Default,,0,0,0,,do it.
Dialogue: 0,0:22:09.14,0:22:11.08,Default,,0,0,0,,So, what I have here is the
Dialogue: 0,0:22:11.08,0:22:12.80,Default,,0,0,0,,intent handler for the
Dialogue: 0,0:22:12.80,0:22:15.38,Default,,0,0,0,,setCarLockStatusIntent of the
Dialogue: 0,0:22:15.38,0:22:16.93,Default,,0,0,0,,test app I just showed you.
Dialogue: 0,0:22:18.20,0:22:19.60,Default,,0,0,0,,Let us see what this app looks
Dialogue: 0,0:22:19.60,0:22:19.88,Default,,0,0,0,,like.
Dialogue: 0,0:22:22.64,0:22:23.91,Default,,0,0,0,,As we saw, there is a
Dialogue: 0,0:22:23.91,0:22:25.94,Default,,0,0,0,,representation of the car, of
Dialogue: 0,0:22:26.00,0:22:28.09,Default,,0,0,0,,the user's car, and this also
Dialogue: 0,0:22:28.09,0:22:29.74,Default,,0,0,0,,represents the state of the car,
Dialogue: 0,0:22:29.74,0:22:30.92,Default,,0,0,0,,whether it's locked or unlocked.
Dialogue: 0,0:22:31.13,0:22:33.61,Default,,0,0,0,,In this case, it's locked and I
Dialogue: 0,0:22:33.61,0:22:34.71,Default,,0,0,0,,can unlock it with a tap.
Dialogue: 0,0:22:35.37,0:22:40.97,Default,,0,0,0,,Set it to the lock state and I
Dialogue: 0,0:22:40.97,0:22:42.88,Default,,0,0,0,,want to ask Siri to unlock the
Dialogue: 0,0:22:42.88,0:22:44.34,Default,,0,0,0,,car using this app.
Dialogue: 0,0:22:44.74,0:22:46.83,Default,,0,0,0,,So, as my colleague Angel showed
Dialogue: 0,0:22:46.83,0:22:48.95,Default,,0,0,0,,earlier, I'm going to use the
Dialogue: 0,0:22:48.95,0:22:51.44,Default,,0,0,0,,scheme editor to enter the
Dialogue: 0,0:22:51.44,0:22:53.03,Default,,0,0,0,,request I want to send to Siri
Dialogue: 0,0:22:54.39,0:22:56.41,Default,,0,0,0,,and I'm going to issue the
Dialogue: 0,0:22:56.41,0:22:57.01,Default,,0,0,0,,request.
Dialogue: 0,0:23:00.90,0:23:02.58,Default,,0,0,0,,The scheme editor is very handy,
Dialogue: 0,0:23:02.58,0:23:04.06,Default,,0,0,0,,in case you haven't realized.
Dialogue: 0,0:23:05.01,0:23:05.95,Default,,0,0,0,,It saves you the trouble of
Dialogue: 0,0:23:05.95,0:23:06.93,Default,,0,0,0,,speaking to your phone when you
Dialogue: 0,0:23:06.93,0:23:08.47,Default,,0,0,0,,are testing, which is really
Dialogue: 0,0:23:08.47,0:23:10.22,Default,,0,0,0,,useful in a shared workspace
Dialogue: 0,0:23:10.22,0:23:10.73,Default,,0,0,0,,environment.
Dialogue: 0,0:23:12.00,0:23:15.35,Default,,0,0,0,,So, in this case, Siri has
Dialogue: 0,0:23:15.35,0:23:16.74,Default,,0,0,0,,handled the request, given it to
Dialogue: 0,0:23:16.74,0:23:18.54,Default,,0,0,0,,the app, and has reported
Dialogue: 0,0:23:18.54,0:23:18.99,Default,,0,0,0,,success.
Dialogue: 0,0:23:19.74,0:23:21.53,Default,,0,0,0,,Let us confirm that it actually
Dialogue: 0,0:23:21.53,0:23:22.36,Default,,0,0,0,,did unlock the car.
Dialogue: 0,0:23:23.22,0:23:25.46,Default,,0,0,0,,So, now the car is-- state is
Dialogue: 0,0:23:25.46,0:23:27.44,Default,,0,0,0,,update-- is updated to show that
Dialogue: 0,0:23:27.44,0:23:28.22,Default,,0,0,0,,it has been unlocked.
Dialogue: 0,0:23:28.80,0:23:30.86,Default,,0,0,0,,Let's go back to the intent
Dialogue: 0,0:23:30.90,0:23:31.24,Default,,0,0,0,,handler.
Dialogue: 0,0:23:32.80,0:23:36.06,Default,,0,0,0,,This intent handler extracts the
Dialogue: 0,0:23:36.06,0:23:37.54,Default,,0,0,0,,fields that we saw on the
Dialogue: 0,0:23:37.54,0:23:39.19,Default,,0,0,0,,intent, which is should I lock
Dialogue: 0,0:23:39.19,0:23:41.35,Default,,0,0,0,,the car or unlock the car and
Dialogue: 0,0:23:42.60,0:23:44.59,Default,,0,0,0,,the-- and it looks up an
Dialogue: 0,0:23:44.59,0:23:46.96,Default,,0,0,0,,internal car object matching the
Dialogue: 0,0:23:46.96,0:23:48.08,Default,,0,0,0,,name on the intent.
Dialogue: 0,0:23:49.68,0:23:52.89,Default,,0,0,0,,Then it sets the lock state on
Dialogue: 0,0:23:52.89,0:23:55.03,Default,,0,0,0,,the car object based on the
Dialogue: 0,0:23:55.03,0:23:56.45,Default,,0,0,0,,input on the intent.
Dialogue: 0,0:23:57.21,0:23:59.03,Default,,0,0,0,,And, finally, after having--
Dialogue: 0,0:23:59.03,0:24:01.16,Default,,0,0,0,,after having changed the state
Dialogue: 0,0:24:01.16,0:24:03.20,Default,,0,0,0,,of the car, it returns a success
Dialogue: 0,0:24:03.20,0:24:05.06,Default,,0,0,0,,response to Siri.
Dialogue: 0,0:24:06.29,0:24:08.06,Default,,0,0,0,,In case of a failure or in case
Dialogue: 0,0:24:08.06,0:24:10.41,Default,,0,0,0,,when there is no-- when there is
Dialogue: 0,0:24:10.41,0:24:11.76,Default,,0,0,0,,not enough information on the
Dialogue: 0,0:24:11.76,0:24:14.05,Default,,0,0,0,,intent, it returns a failure
Dialogue: 0,0:24:14.05,0:24:14.57,Default,,0,0,0,,response.
Dialogue: 0,0:24:15.88,0:24:18.53,Default,,0,0,0,,So, you notice how that this
Dialogue: 0,0:24:18.53,0:24:20.23,Default,,0,0,0,,extent-- this intent handler is
Dialogue: 0,0:24:20.23,0:24:21.64,Default,,0,0,0,,unconditionally handling the
Dialogue: 0,0:24:21.64,0:24:23.29,Default,,0,0,0,,request that the user gave it.
Dialogue: 0,0:24:24.20,0:24:25.89,Default,,0,0,0,,We want to add a prompt here
Dialogue: 0,0:24:26.01,0:24:27.50,Default,,0,0,0,,using the local authentication
Dialogue: 0,0:24:27.50,0:24:27.76,Default,,0,0,0,,API.
Dialogue: 0,0:24:28.84,0:24:31.87,Default,,0,0,0,,So, once we confirmed that the
Dialogue: 0,0:24:31.87,0:24:33.32,Default,,0,0,0,,intent has all the parameters we
Dialogue: 0,0:24:33.32,0:24:35.14,Default,,0,0,0,,need, let's call the local
Dialogue: 0,0:24:35.14,0:24:39.98,Default,,0,0,0,,authentication API.
Dialogue: 0,0:24:40.15,0:24:41.04,Default,,0,0,0,,In order to call the local
Dialogue: 0,0:24:41.04,0:24:43.90,Default,,0,0,0,,authentication API, I'm first
Dialogue: 0,0:24:45.11,0:24:47.83,Default,,0,0,0,,generating a string based on the
Dialogue: 0,0:24:47.83,0:24:49.87,Default,,0,0,0,,lock state that is requested.
Dialogue: 0,0:24:51.21,0:24:53.07,Default,,0,0,0,,That is if it is-- if the user
Dialogue: 0,0:24:53.07,0:24:54.44,Default,,0,0,0,,wants me to lock the car, then I
Dialogue: 0,0:24:54.44,0:24:55.72,Default,,0,0,0,,will show the appropriate
Dialogue: 0,0:24:55.72,0:24:56.06,Default,,0,0,0,,prompt.
Dialogue: 0,0:24:57.38,0:24:58.77,Default,,0,0,0,,Then, to the local
Dialogue: 0,0:24:58.77,0:25:00.81,Default,,0,0,0,,authentication context, I'm
Dialogue: 0,0:25:00.81,0:25:03.28,Default,,0,0,0,,going to ask it to evaluate a
Dialogue: 0,0:25:03.28,0:25:04.12,Default,,0,0,0,,certain policy.
Dialogue: 0,0:25:04.91,0:25:06.58,Default,,0,0,0,,In this case, I'm asking it to
Dialogue: 0,0:25:06.58,0:25:07.96,Default,,0,0,0,,evaluate the device owner
Dialogue: 0,0:25:07.96,0:25:09.10,Default,,0,0,0,,authentication policy.
Dialogue: 0,0:25:09.70,0:25:11.50,Default,,0,0,0,,This is a policy which attempts
Dialogue: 0,0:25:11.60,0:25:13.09,Default,,0,0,0,,to do a Touch ID prompt first
Dialogue: 0,0:25:13.09,0:25:14.44,Default,,0,0,0,,and if that doesn't work it
Dialogue: 0,0:25:14.44,0:25:15.77,Default,,0,0,0,,falls back to the device
Dialogue: 0,0:25:15.81,0:25:18.17,Default,,0,0,0,,passcode prompt.
Dialogue: 0,0:25:18.30,0:25:19.90,Default,,0,0,0,,Next, I pass in the prompt
Dialogue: 0,0:25:19.90,0:25:21.44,Default,,0,0,0,,string which I just generated in
Dialogue: 0,0:25:21.44,0:25:23.41,Default,,0,0,0,,the previous line, and finally I
Dialogue: 0,0:25:23.41,0:25:24.35,Default,,0,0,0,,have the reply block.
Dialogue: 0,0:25:25.00,0:25:26.15,Default,,0,0,0,,So, let's fill in the reply
Dialogue: 0,0:25:26.15,0:25:26.43,Default,,0,0,0,,block.
Dialogue: 0,0:25:29.48,0:25:31.78,Default,,0,0,0,,If the user has granted access
Dialogue: 0,0:25:32.27,0:25:33.63,Default,,0,0,0,,via Touch ID or a device
Dialogue: 0,0:25:33.63,0:25:35.53,Default,,0,0,0,,passcode prompt, I'm going to go
Dialogue: 0,0:25:35.53,0:25:38.42,Default,,0,0,0,,ahead and change the state of
Dialogue: 0,0:25:38.42,0:25:40.52,Default,,0,0,0,,the car as I did earlier without
Dialogue: 0,0:25:40.52,0:25:41.58,Default,,0,0,0,,prompting, but this time I'm
Dialogue: 0,0:25:41.58,0:25:42.88,Default,,0,0,0,,actually waiting for the user to
Dialogue: 0,0:25:42.88,0:25:43.79,Default,,0,0,0,,give me access.
Dialogue: 0,0:25:44.17,0:25:46.88,Default,,0,0,0,,And then I'm going to call the
Dialogue: 0,0:25:46.88,0:25:49.24,Default,,0,0,0,,completion block with the
Dialogue: 0,0:25:49.24,0:25:50.96,Default,,0,0,0,,success response to tell Siri
Dialogue: 0,0:25:50.96,0:25:53.17,Default,,0,0,0,,that request has been completed
Dialogue: 0,0:25:53.52,0:25:54.09,Default,,0,0,0,,successfully.
Dialogue: 0,0:25:54.50,0:25:56.91,Default,,0,0,0,,I also need to tell Siri when
Dialogue: 0,0:25:56.91,0:25:58.70,Default,,0,0,0,,there is a failure, that is if
Dialogue: 0,0:25:58.70,0:26:00.71,Default,,0,0,0,,the access was not granted, then
Dialogue: 0,0:26:00.71,0:26:02.04,Default,,0,0,0,,I need to tell Siri that there
Dialogue: 0,0:26:02.04,0:26:02.64,Default,,0,0,0,,was a failure.
Dialogue: 0,0:26:03.03,0:26:05.26,Default,,0,0,0,,I do that by returning a failure
Dialogue: 0,0:26:05.26,0:26:06.83,Default,,0,0,0,,response using the same
Dialogue: 0,0:26:06.83,0:26:07.61,Default,,0,0,0,,completion block.
Dialogue: 0,0:26:09.12,0:26:11.57,Default,,0,0,0,,So, with this change, let us go
Dialogue: 0,0:26:11.57,0:26:13.60,Default,,0,0,0,,and see if unlocking the car
Dialogue: 0,0:26:14.88,0:26:16.41,Default,,0,0,0,,prompts the user to do
Dialogue: 0,0:26:17.96,0:26:18.72,Default,,0,0,0,,authentication.
Dialogue: 0,0:26:19.83,0:26:21.18,Default,,0,0,0,,So, let's restore the car state
Dialogue: 0,0:26:21.18,0:26:24.81,Default,,0,0,0,,back to being locked and run
Dialogue: 0,0:26:24.81,0:26:25.15,Default,,0,0,0,,this.
Dialogue: 0,0:26:26.47,0:26:28.07,Default,,0,0,0,,I'm using the same request as
Dialogue: 0,0:26:28.07,0:26:29.53,Default,,0,0,0,,earlier, which is unlock my car.
Dialogue: 0,0:26:44.19,0:26:46.37,Default,,0,0,0,,So, you notice during the Siri
Dialogue: 0,0:26:46.37,0:26:48.18,Default,,0,0,0,,request a prompt comes up.
Dialogue: 0,0:26:48.89,0:26:50.30,Default,,0,0,0,,If the simulator was configured
Dialogue: 0,0:26:50.30,0:26:51.53,Default,,0,0,0,,to do a Touch ID, it would have
Dialogue: 0,0:26:51.53,0:26:52.56,Default,,0,0,0,,shown a Touch ID prompt.
Dialogue: 0,0:26:53.41,0:26:54.63,Default,,0,0,0,,In this case, I configured it to
Dialogue: 0,0:26:54.63,0:26:56.76,Default,,0,0,0,,do device passcode prompt.
Dialogue: 0,0:26:56.98,0:27:00.08,Default,,0,0,0,,So, let me enter my super secure
Dialogue: 0,0:27:00.08,0:27:00.92,Default,,0,0,0,,password.
Dialogue: 0,0:27:00.92,0:27:01.88,Default,,0,0,0,,Please look away.
Dialogue: 0,0:27:05.70,0:27:07.03,Default,,0,0,0,,And once I've entered the
Dialogue: 0,0:27:07.03,0:27:09.80,Default,,0,0,0,,password, the request went
Dialogue: 0,0:27:09.80,0:27:10.08,Default,,0,0,0,,through.
Dialogue: 0,0:27:10.76,0:27:12.04,Default,,0,0,0,,Let us confirm that it actually
Dialogue: 0,0:27:12.04,0:27:12.92,Default,,0,0,0,,went through by launching the
Dialogue: 0,0:27:12.92,0:27:12.99,Default,,0,0,0,,app.
Dialogue: 0,0:27:15.10,0:27:16.68,Default,,0,0,0,,Yep. The car was unlocked.
Dialogue: 0,0:27:17.52,0:27:25.66,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:27:26.16,0:27:28.11,Default,,0,0,0,,So, with a few lines of code, we
Dialogue: 0,0:27:28.11,0:27:29.50,Default,,0,0,0,,were able to add a local
Dialogue: 0,0:27:29.50,0:27:31.74,Default,,0,0,0,,authentication prompt during a
Dialogue: 0,0:27:31.74,0:27:34.42,Default,,0,0,0,,Siri request.
Dialogue: 0,0:27:34.51,0:27:35.84,Default,,0,0,0,,Using the local authentication
Dialogue: 0,0:27:35.84,0:27:38.50,Default,,0,0,0,,API allows you to do multiple
Dialogue: 0,0:27:38.50,0:27:39.69,Default,,0,0,0,,forms of authentication.
Dialogue: 0,0:27:40.50,0:27:41.99,Default,,0,0,0,,Touch ID, if supported and
Dialogue: 0,0:27:41.99,0:27:44.32,Default,,0,0,0,,configured, or a device passcode
Dialogue: 0,0:27:44.80,0:27:45.28,Default,,0,0,0,,if not.
Dialogue: 0,0:27:46.90,0:27:48.40,Default,,0,0,0,,The place where you call this
Dialogue: 0,0:27:48.40,0:27:50.81,Default,,0,0,0,,local authentication API is in
Dialogue: 0,0:27:50.81,0:27:52.30,Default,,0,0,0,,the handle method of your intent
Dialogue: 0,0:27:52.30,0:27:53.96,Default,,0,0,0,,handler before calling the
Dialogue: 0,0:27:53.96,0:27:54.65,Default,,0,0,0,,completion block.
Dialogue: 0,0:27:56.70,0:27:58.14,Default,,0,0,0,,And because the local
Dialogue: 0,0:27:58.14,0:27:59.64,Default,,0,0,0,,authentication framework is part
Dialogue: 0,0:27:59.64,0:28:01.53,Default,,0,0,0,,of the system, Siri knows to
Dialogue: 0,0:28:01.53,0:28:04.44,Default,,0,0,0,,coordinate with it so that if
Dialogue: 0,0:28:04.44,0:28:07.27,Default,,0,0,0,,the user has made a request over
Dialogue: 0,0:28:07.27,0:28:10.54,Default,,0,0,0,,Hey Siri, then the request waits
Dialogue: 0,0:28:10.54,0:28:12.46,Default,,0,0,0,,for the user for a prompt to be
Dialogue: 0,0:28:12.46,0:28:16.28,Default,,0,0,0,,responded to.
Dialogue: 0,0:28:16.51,0:28:17.79,Default,,0,0,0,,To learn more about the local
Dialogue: 0,0:28:17.79,0:28:19.70,Default,,0,0,0,,authentication API, we refer you
Dialogue: 0,0:28:19.70,0:28:24.52,Default,,0,0,0,,to this talk from 2014.
Dialogue: 0,0:28:24.64,0:28:26.02,Default,,0,0,0,,Some of you might be working on
Dialogue: 0,0:28:26.02,0:28:28.67,Default,,0,0,0,,apps which require a payment to
Dialogue: 0,0:28:28.67,0:28:30.52,Default,,0,0,0,,be completed before a Siri
Dialogue: 0,0:28:30.52,0:28:31.96,Default,,0,0,0,,request can be satisfied.
Dialogue: 0,0:28:35.00,0:28:37.67,Default,,0,0,0,,In this example, the user wants
Dialogue: 0,0:28:37.67,0:28:39.04,Default,,0,0,0,,to book a RainbowCar on
Dialogue: 0,0:28:39.04,0:28:42.56,Default,,0,0,0,,UnicornRides and you need a
Dialogue: 0,0:28:42.56,0:28:44.29,Default,,0,0,0,,payment to be made from the user
Dialogue: 0,0:28:44.38,0:28:45.60,Default,,0,0,0,,before you can accept this
Dialogue: 0,0:28:45.60,0:28:46.15,Default,,0,0,0,,request.
Dialogue: 0,0:28:47.02,0:28:48.86,Default,,0,0,0,,We recommend you use the secure
Dialogue: 0,0:28:48.86,0:28:51.74,Default,,0,0,0,,Apple Pay API for handling
Dialogue: 0,0:28:51.74,0:28:53.44,Default,,0,0,0,,payment transactions during your
Dialogue: 0,0:28:53.44,0:28:54.24,Default,,0,0,0,,Siri request.
Dialogue: 0,0:28:54.98,0:28:56.70,Default,,0,0,0,,Using the Apply Pay API gives
Dialogue: 0,0:28:56.70,0:28:58.67,Default,,0,0,0,,you the same advantages as using
Dialogue: 0,0:28:58.67,0:28:59.91,Default,,0,0,0,,the local authentication API,
Dialogue: 0,0:29:00.38,0:29:03.22,Default,,0,0,0,,which is you get coordination
Dialogue: 0,0:29:03.22,0:29:05.58,Default,,0,0,0,,with Siri and the place where
Dialogue: 0,0:29:05.58,0:29:06.92,Default,,0,0,0,,you could call this API is in
Dialogue: 0,0:29:06.92,0:29:08.31,Default,,0,0,0,,the same place that is in the
Dialogue: 0,0:29:08.31,0:29:09.87,Default,,0,0,0,,handle method before you call
Dialogue: 0,0:29:09.87,0:29:10.63,Default,,0,0,0,,the completion block.
Dialogue: 0,0:29:14.60,0:29:16.04,Default,,0,0,0,,Now let's talk about teaching
Dialogue: 0,0:29:16.04,0:29:17.37,Default,,0,0,0,,Siri new words.
Dialogue: 0,0:29:21.28,0:29:23.13,Default,,0,0,0,,Let's take this example of an
Dialogue: 0,0:29:23.26,0:29:25.64,Default,,0,0,0,,app called UnicornPay which
Dialogue: 0,0:29:25.64,0:29:28.35,Default,,0,0,0,,allows the user to query account
Dialogue: 0,0:29:28.35,0:29:30.28,Default,,0,0,0,,balances on their accounts.
Dialogue: 0,0:29:32.46,0:29:34.32,Default,,0,0,0,,This-- an app like this might
Dialogue: 0,0:29:34.32,0:29:36.63,Default,,0,0,0,,also allow users to give names
Dialogue: 0,0:29:36.68,0:29:38.30,Default,,0,0,0,,to accounts in the app.
Dialogue: 0,0:29:38.58,0:29:39.84,Default,,0,0,0,,Now, these names are user
Dialogue: 0,0:29:39.84,0:29:42.66,Default,,0,0,0,,configured, so they need not be
Dialogue: 0,0:29:42.66,0:29:44.02,Default,,0,0,0,,real English words.
Dialogue: 0,0:29:44.57,0:29:46.02,Default,,0,0,0,,In this example, we have an
Dialogue: 0,0:29:46.02,0:29:48.45,Default,,0,0,0,,account called NestEgg, which
Dialogue: 0,0:29:48.45,0:29:50.04,Default,,0,0,0,,would have been a word, except
Dialogue: 0,0:29:50.04,0:29:50.99,Default,,0,0,0,,there is no space.
Dialogue: 0,0:29:51.43,0:29:53.07,Default,,0,0,0,,So, it's made of two English
Dialogue: 0,0:29:53.07,0:29:55.35,Default,,0,0,0,,words, which, without help, Siri
Dialogue: 0,0:29:55.35,0:29:56.70,Default,,0,0,0,,might not be able to recognize.
Dialogue: 0,0:29:58.84,0:30:00.67,Default,,0,0,0,,When we introduced SiriKit last
Dialogue: 0,0:30:00.67,0:30:03.14,Default,,0,0,0,,year, we talked about some
Dialogue: 0,0:30:03.14,0:30:05.95,Default,,0,0,0,,mechanisms that will allow you
Dialogue: 0,0:30:05.95,0:30:07.93,Default,,0,0,0,,to help Siri understand words
Dialogue: 0,0:30:07.93,0:30:08.49,Default,,0,0,0,,like these.
Dialogue: 0,0:30:09.19,0:30:11.07,Default,,0,0,0,,These words are not unique to an
Dialogue: 0,0:30:11.66,0:30:12.58,Default,,0,0,0,,app, but are unique to a
Dialogue: 0,0:30:12.58,0:30:16.71,Default,,0,0,0,,particular user of that app.
Dialogue: 0,0:30:16.71,0:30:19.08,Default,,0,0,0,,Examples of these are names of
Dialogue: 0,0:30:19.08,0:30:21.20,Default,,0,0,0,,photo albums, names of workouts,
Dialogue: 0,0:30:21.20,0:30:21.83,Default,,0,0,0,,and so on.
Dialogue: 0,0:30:25.66,0:30:27.54,Default,,0,0,0,,The mechanism that we recommend
Dialogue: 0,0:30:27.70,0:30:29.71,Default,,0,0,0,,you use to teach Siri these
Dialogue: 0,0:30:29.71,0:30:32.90,Default,,0,0,0,,words is the INVocabulary API.
Dialogue: 0,0:30:35.80,0:30:39.78,Default,,0,0,0,,To get a refresher about custom
Dialogue: 0,0:30:39.78,0:30:42.08,Default,,0,0,0,,vocabulary introduction, we
Dialogue: 0,0:30:42.08,0:30:43.19,Default,,0,0,0,,refer you to these talks from
Dialogue: 0,0:30:43.19,0:30:44.38,Default,,0,0,0,,last year when we introduced
Dialogue: 0,0:30:44.38,0:30:46.83,Default,,0,0,0,,SiriKit, but today let's dive
Dialogue: 0,0:30:46.83,0:30:49.05,Default,,0,0,0,,deeper into the INVocabulary
Dialogue: 0,0:30:49.64,0:30:49.74,Default,,0,0,0,,API.
Dialogue: 0,0:30:50.48,0:30:52.00,Default,,0,0,0,,The API is pretty simple.
Dialogue: 0,0:30:52.21,0:30:54.50,Default,,0,0,0,,It has one method which takes an
Dialogue: 0,0:30:54.61,0:30:57.96,Default,,0,0,0,,NSOrderedSet of vocabulary
Dialogue: 0,0:30:57.96,0:31:01.27,Default,,0,0,0,,strings and this set is meant
Dialogue: 0,0:31:01.27,0:31:04.23,Default,,0,0,0,,for a particular vocabulary item
Dialogue: 0,0:31:04.23,0:31:04.48,Default,,0,0,0,,type.
Dialogue: 0,0:31:04.48,0:31:06.30,Default,,0,0,0,,For example, a photo album name
Dialogue: 0,0:31:06.50,0:31:07.29,Default,,0,0,0,,or a workout name.
Dialogue: 0,0:31:07.89,0:31:10.38,Default,,0,0,0,,Note that this is an ordered
Dialogue: 0,0:31:10.38,0:31:12.69,Default,,0,0,0,,set, which means that Siri gives
Dialogue: 0,0:31:12.75,0:31:15.38,Default,,0,0,0,,preference to the words towards
Dialogue: 0,0:31:15.42,0:31:18.19,Default,,0,0,0,,the beginning of the set.
Dialogue: 0,0:31:18.40,0:31:21.08,Default,,0,0,0,,But also note that these are
Dialogue: 0,0:31:21.08,0:31:22.21,Default,,0,0,0,,strings that you're teaching
Dialogue: 0,0:31:22.21,0:31:22.54,Default,,0,0,0,,Siri.
Dialogue: 0,0:31:22.64,0:31:24.21,Default,,0,0,0,,Plain strings with no context
Dialogue: 0,0:31:24.21,0:31:24.64,Default,,0,0,0,,around them.
Dialogue: 0,0:31:26.00,0:31:27.47,Default,,0,0,0,,That might have some
Dialogue: 0,0:31:27.47,0:31:28.07,Default,,0,0,0,,limitations.
Dialogue: 0,0:31:29.08,0:31:30.81,Default,,0,0,0,,Let us see what those
Dialogue: 0,0:31:30.81,0:31:33.33,Default,,0,0,0,,limitations are by diving deeper
Dialogue: 0,0:31:33.33,0:31:35.07,Default,,0,0,0,,into how this would actually
Dialogue: 0,0:31:35.78,0:31:35.87,Default,,0,0,0,,work.
Dialogue: 0,0:31:37.06,0:31:38.67,Default,,0,0,0,,Here we have an application
Dialogue: 0,0:31:39.06,0:31:41.85,Default,,0,0,0,,where in its private store has
Dialogue: 0,0:31:41.98,0:31:44.41,Default,,0,0,0,,some accounts which are named by
Dialogue: 0,0:31:44.41,0:31:44.86,Default,,0,0,0,,the user.
Dialogue: 0,0:31:45.70,0:31:47.51,Default,,0,0,0,,To tell Siri about these
Dialogue: 0,0:31:47.51,0:31:49.95,Default,,0,0,0,,accounts, the app would use the
Dialogue: 0,0:31:49.95,0:31:53.22,Default,,0,0,0,,INVocabulary API and send those
Dialogue: 0,0:31:53.22,0:31:56.06,Default,,0,0,0,,strings using the API which we
Dialogue: 0,0:31:56.06,0:31:57.08,Default,,0,0,0,,just saw.
Dialogue: 0,0:31:57.94,0:31:59.94,Default,,0,0,0,,With this knowledge, now Siri is
Dialogue: 0,0:31:59.94,0:32:02.25,Default,,0,0,0,,aware of these new words and the
Dialogue: 0,0:32:02.25,0:32:03.64,Default,,0,0,0,,next time the user makes a
Dialogue: 0,0:32:03.64,0:32:05.69,Default,,0,0,0,,request that uses one of these
Dialogue: 0,0:32:05.69,0:32:08.88,Default,,0,0,0,,words, Siri is capable of
Dialogue: 0,0:32:08.88,0:32:10.32,Default,,0,0,0,,looking up the knowledge that
Dialogue: 0,0:32:10.32,0:32:12.39,Default,,0,0,0,,the app has given it and
Dialogue: 0,0:32:13.22,0:32:14.90,Default,,0,0,0,,identifying candidates in the
Dialogue: 0,0:32:14.90,0:32:18.43,Default,,0,0,0,,user's input that match a custom
Dialogue: 0,0:32:18.43,0:32:21.59,Default,,0,0,0,,word like this and recognize it
Dialogue: 0,0:32:21.59,0:32:22.84,Default,,0,0,0,,correctly as the user would
Dialogue: 0,0:32:22.84,0:32:23.60,Default,,0,0,0,,expect to see.
Dialogue: 0,0:32:24.53,0:32:25.69,Default,,0,0,0,,Now, once this word has been
Dialogue: 0,0:32:25.69,0:32:28.01,Default,,0,0,0,,recognized, Siri will be able to
Dialogue: 0,0:32:28.01,0:32:29.03,Default,,0,0,0,,give this word to the
Dialogue: 0,0:32:29.03,0:32:31.22,Default,,0,0,0,,application's intents extension
Dialogue: 0,0:32:31.56,0:32:34.00,Default,,0,0,0,,and expect it to use that word
Dialogue: 0,0:32:34.28,0:32:35.58,Default,,0,0,0,,to look up the corresponding
Dialogue: 0,0:32:35.58,0:32:36.58,Default,,0,0,0,,object in the store.
Dialogue: 0,0:32:37.70,0:32:39.22,Default,,0,0,0,,But note that this is just a
Dialogue: 0,0:32:39.22,0:32:41.05,Default,,0,0,0,,plain string with no context
Dialogue: 0,0:32:41.05,0:32:41.55,Default,,0,0,0,,around it.
Dialogue: 0,0:32:42.13,0:32:44.16,Default,,0,0,0,,So, your application might not
Dialogue: 0,0:32:44.16,0:32:47.41,Default,,0,0,0,,have enough information to look
Dialogue: 0,0:32:47.41,0:32:48.98,Default,,0,0,0,,it up unambiguously.
Dialogue: 0,0:32:49.24,0:32:52.30,Default,,0,0,0,,It might have to-- it might have
Dialogue: 0,0:32:52.30,0:32:55.27,Default,,0,0,0,,to do fuzzy match, it might not
Dialogue: 0,0:32:55.27,0:32:58.11,Default,,0,0,0,,be an index based on the string
Dialogue: 0,0:32:58.11,0:32:59.85,Default,,0,0,0,,in your application store.
Dialogue: 0,0:33:00.43,0:33:02.13,Default,,0,0,0,,So, this is not an ideal
Dialogue: 0,0:33:02.13,0:33:02.78,Default,,0,0,0,,situation.
Dialogue: 0,0:33:03.50,0:33:05.77,Default,,0,0,0,,In iOS 11, we thought we could
Dialogue: 0,0:33:05.77,0:33:08.78,Default,,0,0,0,,make this better.
Dialogue: 0,0:33:08.95,0:33:11.27,Default,,0,0,0,,We added this new API which
Dialogue: 0,0:33:11.27,0:33:13.86,Default,,0,0,0,,allows you to send Siri
Dialogue: 0,0:33:14.24,0:33:17.84,Default,,0,0,0,,objects-- any objects-- as long
Dialogue: 0,0:33:17.84,0:33:19.53,Default,,0,0,0,,as they conform to an
Dialogue: 0,0:33:19.63,0:33:20.88,Default,,0,0,0,,INSpeakable protocol.
Dialogue: 0,0:33:22.58,0:33:25.28,Default,,0,0,0,,Again, these objects have to be
Dialogue: 0,0:33:25.32,0:33:27.06,Default,,0,0,0,,in an ordered set which follow
Dialogue: 0,0:33:27.06,0:33:28.70,Default,,0,0,0,,the same rules as the strings in
Dialogue: 0,0:33:28.70,0:33:31.32,Default,,0,0,0,,the older API and they are meant
Dialogue: 0,0:33:31.37,0:33:34.01,Default,,0,0,0,,for a particular parameter type.
Dialogue: 0,0:33:34.71,0:33:37.42,Default,,0,0,0,,Let's take a deeper look at what
Dialogue: 0,0:33:37.42,0:33:38.30,Default,,0,0,0,,this protocol is.
Dialogue: 0,0:33:39.90,0:33:42.98,Default,,0,0,0,,The INSpeakable protocol is a
Dialogue: 0,0:33:43.21,0:33:45.30,Default,,0,0,0,,detailed description of the
Dialogue: 0,0:33:45.30,0:33:46.64,Default,,0,0,0,,vocabulary item that you are
Dialogue: 0,0:33:46.64,0:33:47.40,Default,,0,0,0,,teaching Siri.
Dialogue: 0,0:33:49.96,0:33:52.70,Default,,0,0,0,,The main parts of it-- the main
Dialogue: 0,0:33:52.70,0:33:54.29,Default,,0,0,0,,property on it is the actual
Dialogue: 0,0:33:54.29,0:33:55.57,Default,,0,0,0,,word that you're teaching Siri.
Dialogue: 0,0:33:56.62,0:33:57.83,Default,,0,0,0,,In this case, it would be the
Dialogue: 0,0:33:57.83,0:33:59.45,Default,,0,0,0,,word NestEgg without a space in
Dialogue: 0,0:33:59.45,0:34:01.60,Default,,0,0,0,,it or some other creative
Dialogue: 0,0:34:01.60,0:34:04.51,Default,,0,0,0,,misspelling of a workout name or
Dialogue: 0,0:34:04.51,0:34:05.96,Default,,0,0,0,,it could even be a word which
Dialogue: 0,0:34:05.96,0:34:08.01,Default,,0,0,0,,has mixed in numbers or special
Dialogue: 0,0:34:08.01,0:34:08.65,Default,,0,0,0,,characters.
Dialogue: 0,0:34:09.20,0:34:12.68,Default,,0,0,0,,You can also teach Siri-- you
Dialogue: 0,0:34:13.90,0:34:16.44,Default,,0,0,0,,can also give Siri hints about
Dialogue: 0,0:34:16.70,0:34:18.45,Default,,0,0,0,,how to recognize the words that
Dialogue: 0,0:34:18.45,0:34:19.08,Default,,0,0,0,,you are teaching it.
Dialogue: 0,0:34:19.94,0:34:22.35,Default,,0,0,0,,In this case, they are spelled
Dialogue: 0,0:34:23.06,0:34:24.78,Default,,0,0,0,,in a sounds-like pattern, which
Dialogue: 0,0:34:24.93,0:34:26.12,Default,,0,0,0,,is the same pattern you would
Dialogue: 0,0:34:26.12,0:34:27.76,Default,,0,0,0,,use for configuring phonetic
Dialogue: 0,0:34:27.76,0:34:32.31,Default,,0,0,0,,names in your contacts app.
Dialogue: 0,0:34:32.57,0:34:34.52,Default,,0,0,0,,With each INSpeakable object,
Dialogue: 0,0:34:35.12,0:34:36.17,Default,,0,0,0,,you can also provide a
Dialogue: 0,0:34:36.17,0:34:38.53,Default,,0,0,0,,vocabulary identifier which can
Dialogue: 0,0:34:38.53,0:34:40.40,Default,,0,0,0,,uniquely identify this object in
Dialogue: 0,0:34:40.40,0:34:41.14,Default,,0,0,0,,your app store.
Dialogue: 0,0:34:42.17,0:34:43.76,Default,,0,0,0,,We-- it's a plain string, so we
Dialogue: 0,0:34:43.76,0:34:45.82,Default,,0,0,0,,don't restrict what value you
Dialogue: 0,0:34:45.82,0:34:47.93,Default,,0,0,0,,can give this identifier, but
Dialogue: 0,0:34:48.23,0:34:50.96,Default,,0,0,0,,using a unique grid or something
Dialogue: 0,0:34:50.96,0:34:52.80,Default,,0,0,0,,like that will help you match
Dialogue: 0,0:34:53.26,0:34:55.28,Default,,0,0,0,,this object unambiguously in
Dialogue: 0,0:34:55.28,0:34:57.36,Default,,0,0,0,,your app's data store.
Dialogue: 0,0:34:58.86,0:35:01.45,Default,,0,0,0,,Finally, the INSpeakable
Dialogue: 0,0:35:01.45,0:35:04.36,Default,,0,0,0,,protocol also allows Siri to
Dialogue: 0,0:35:05.08,0:35:08.28,Default,,0,0,0,,provide alternative matches for
Dialogue: 0,0:35:08.28,0:35:10.49,Default,,0,0,0,,words which the-- which Siri
Dialogue: 0,0:35:10.49,0:35:12.17,Default,,0,0,0,,thinks the user might mean.
Dialogue: 0,0:35:12.79,0:35:14.61,Default,,0,0,0,,This is analogous to the
Dialogue: 0,0:35:14.61,0:35:16.84,Default,,0,0,0,,siriMatches property that my
Dialogue: 0,0:35:16.84,0:35:18.56,Default,,0,0,0,,college Angel talked about
Dialogue: 0,0:35:18.56,0:35:21.61,Default,,0,0,0,,earlier where an INPerson object
Dialogue: 0,0:35:21.61,0:35:23.18,Default,,0,0,0,,which actually does conform to
Dialogue: 0,0:35:23.18,0:35:26.52,Default,,0,0,0,,the INSpeakable protocol can
Dialogue: 0,0:35:26.52,0:35:28.64,Default,,0,0,0,,have candidate alternative
Dialogue: 0,0:35:28.64,0:35:31.00,Default,,0,0,0,,matches exposed as siriMatches.
Dialogue: 0,0:35:32.31,0:35:34.78,Default,,0,0,0,,With this new protocol and API,
Dialogue: 0,0:35:34.88,0:35:36.34,Default,,0,0,0,,let us take a look again at the
Dialogue: 0,0:35:36.34,0:35:38.42,Default,,0,0,0,,same example and see how things
Dialogue: 0,0:35:38.74,0:35:39.38,Default,,0,0,0,,have changed.
Dialogue: 0,0:35:40.05,0:35:42.54,Default,,0,0,0,,So, the application wants to
Dialogue: 0,0:35:42.54,0:35:44.78,Default,,0,0,0,,tell Siri about the same two
Dialogue: 0,0:35:44.78,0:35:45.89,Default,,0,0,0,,account objects with the
Dialogue: 0,0:35:45.89,0:35:46.85,Default,,0,0,0,,customized names.
Dialogue: 0,0:35:47.92,0:35:50.09,Default,,0,0,0,,It would call the INVocabulary
Dialogue: 0,0:35:50.21,0:35:51.51,Default,,0,0,0,,API, but this time it would give
Dialogue: 0,0:35:51.51,0:35:54.33,Default,,0,0,0,,it the objects themselves and
Dialogue: 0,0:35:54.33,0:35:57.62,Default,,0,0,0,,Siri will use those INSpeakable
Dialogue: 0,0:35:57.62,0:36:00.76,Default,,0,0,0,,parts of these objects and when
Dialogue: 0,0:36:02.58,0:36:06.29,Default,,0,0,0,,the user says a request that has
Dialogue: 0,0:36:06.29,0:36:08.78,Default,,0,0,0,,a word which matches this new
Dialogue: 0,0:36:08.78,0:36:10.97,Default,,0,0,0,,object that Siri has learned
Dialogue: 0,0:36:10.97,0:36:14.38,Default,,0,0,0,,about, Siri will recognize the
Dialogue: 0,0:36:14.38,0:36:19.04,Default,,0,0,0,,pattern and replace it with the
Dialogue: 0,0:36:19.04,0:36:22.76,Default,,0,0,0,,expected spelling and when
Dialogue: 0,0:36:22.90,0:36:24.62,Default,,0,0,0,,communicating back to the app's
Dialogue: 0,0:36:24.62,0:36:26.56,Default,,0,0,0,,intent extension, instead of
Dialogue: 0,0:36:26.56,0:36:28.84,Default,,0,0,0,,giving it a plain string without
Dialogue: 0,0:36:28.84,0:36:30.93,Default,,0,0,0,,any context, Siri will now give
Dialogue: 0,0:36:30.93,0:36:32.84,Default,,0,0,0,,it the INSpeakable object.
Dialogue: 0,0:36:34.46,0:36:36.59,Default,,0,0,0,,Because this INSpeakable object
Dialogue: 0,0:36:36.85,0:36:39.33,Default,,0,0,0,,has the vocabulary identifier,
Dialogue: 0,0:36:39.46,0:36:42.32,Default,,0,0,0,,which, as I said earlier, could
Dialogue: 0,0:36:42.32,0:36:44.54,Default,,0,0,0,,be a unique ID for that object.
Dialogue: 0,0:36:45.10,0:36:47.36,Default,,0,0,0,,The lookup on the app side for
Dialogue: 0,0:36:47.36,0:36:49.11,Default,,0,0,0,,this object becomes easier.
Dialogue: 0,0:36:53.04,0:36:54.99,Default,,0,0,0,,So, we hope that with this new
Dialogue: 0,0:36:54.99,0:36:57.74,Default,,0,0,0,,API requests like this where the
Dialogue: 0,0:36:57.74,0:37:02.31,Default,,0,0,0,,user is able to issue a request
Dialogue: 0,0:37:02.31,0:37:05.66,Default,,0,0,0,,with a custom vocabulary word to
Dialogue: 0,0:37:05.66,0:37:07.92,Default,,0,0,0,,Siri, your app can handle them
Dialogue: 0,0:37:07.92,0:37:09.59,Default,,0,0,0,,without worrying about doing
Dialogue: 0,0:37:09.59,0:37:11.05,Default,,0,0,0,,fuzzy matching against your app
Dialogue: 0,0:37:11.05,0:37:11.37,Default,,0,0,0,,store.
Dialogue: 0,0:37:15.29,0:37:18.21,Default,,0,0,0,,The other example where you
Dialogue: 0,0:37:18.21,0:37:19.45,Default,,0,0,0,,might want to teach Siri new
Dialogue: 0,0:37:19.45,0:37:23.20,Default,,0,0,0,,words is when there's a word
Dialogue: 0,0:37:23.20,0:37:25.17,Default,,0,0,0,,which is unique to your app, but
Dialogue: 0,0:37:25.45,0:37:27.38,Default,,0,0,0,,common to all users of your app.
Dialogue: 0,0:37:27.53,0:37:29.56,Default,,0,0,0,,An example of this would be a
Dialogue: 0,0:37:29.56,0:37:32.49,Default,,0,0,0,,ride-booking app which has a
Dialogue: 0,0:37:32.84,0:37:35.91,Default,,0,0,0,,branded or a customized vehicle
Dialogue: 0,0:37:35.91,0:37:38.83,Default,,0,0,0,,name or a workout app which
Dialogue: 0,0:37:38.88,0:37:43.95,Default,,0,0,0,,might have a non-English workout
Dialogue: 0,0:37:43.95,0:37:44.19,Default,,0,0,0,,name.
Dialogue: 0,0:37:47.34,0:37:49.00,Default,,0,0,0,,In order to teach Siri words
Dialogue: 0,0:37:49.00,0:37:51.19,Default,,0,0,0,,like this, we recommend that you
Dialogue: 0,0:37:51.19,0:37:52.01,Default,,0,0,0,,use the
Dialogue: 0,0:37:52.01,0:37:57.87,Default,,0,0,0,,AppIntentVocabulary.plist.
Dialogue: 0,0:37:58.03,0:38:00.04,Default,,0,0,0,,Once you provide a plist to
Dialogue: 0,0:38:00.58,0:38:02.74,Default,,0,0,0,,Siri, in examples like this
Dialogue: 0,0:38:02.74,0:38:05.11,Default,,0,0,0,,where a ride-booking app has
Dialogue: 0,0:38:05.27,0:38:07.49,Default,,0,0,0,,customized its ride names--
Dialogue: 0,0:38:08.57,0:38:09.83,Default,,0,0,0,,which are not real words in this
Dialogue: 0,0:38:09.83,0:38:10.80,Default,,0,0,0,,case, as you can see--
Dialogue: 0,0:38:11.20,0:38:13.02,Default,,0,0,0,,RainbowCar without a space is
Dialogue: 0,0:38:13.02,0:38:16.06,Default,,0,0,0,,not a real word.
Dialogue: 0,0:38:16.26,0:38:19.16,Default,,0,0,0,,Users can now say the words and
Dialogue: 0,0:38:20.16,0:38:21.89,Default,,0,0,0,,expect Siri to recognize them.
Dialogue: 0,0:38:25.24,0:38:27.34,Default,,0,0,0,,The way you would register words
Dialogue: 0,0:38:27.34,0:38:29.43,Default,,0,0,0,,like this with Siri is to use
Dialogue: 0,0:38:29.43,0:38:31.00,Default,,0,0,0,,the custom vocabulary plist
Dialogue: 0,0:38:31.63,0:38:33.78,Default,,0,0,0,,where the main pieces are the
Dialogue: 0,0:38:33.78,0:38:35.49,Default,,0,0,0,,intent parameter for which you
Dialogue: 0,0:38:35.49,0:38:36.38,Default,,0,0,0,,are providing the custom
Dialogue: 0,0:38:36.38,0:38:37.21,Default,,0,0,0,,vocabulary item.
Dialogue: 0,0:38:38.09,0:38:40.41,Default,,0,0,0,,In this case, this parameter
Dialogue: 0,0:38:40.63,0:38:42.74,Default,,0,0,0,,would itself be of type
Dialogue: 0,0:38:42.74,0:38:47.13,Default,,0,0,0,,INSpeakable and inside that
Dialogue: 0,0:38:47.13,0:38:51.47,Default,,0,0,0,,parameter the subfields of the
Dialogue: 0,0:38:51.76,0:38:53.63,Default,,0,0,0,,INSpeakable object can be
Dialogue: 0,0:38:53.63,0:38:54.25,Default,,0,0,0,,specified.
Dialogue: 0,0:38:55.34,0:38:56.67,Default,,0,0,0,,For example, you can give a
Dialogue: 0,0:38:56.67,0:38:58.76,Default,,0,0,0,,vocabulary identifier for the
Dialogue: 0,0:38:58.76,0:38:59.92,Default,,0,0,0,,SparkleCar which you are
Dialogue: 0,0:38:59.92,0:39:03.22,Default,,0,0,0,,teaching Siri about, and the
Dialogue: 0,0:39:03.45,0:39:04.98,Default,,0,0,0,,actual name that you're teaching
Dialogue: 0,0:39:04.98,0:39:08.05,Default,,0,0,0,,Siri as the spoken phrase, and
Dialogue: 0,0:39:08.05,0:39:09.88,Default,,0,0,0,,the pronunciation hint, similar
Dialogue: 0,0:39:10.01,0:39:11.69,Default,,0,0,0,,to the one we saw in the earlier
Dialogue: 0,0:39:11.69,0:39:13.16,Default,,0,0,0,,case for user-specific
Dialogue: 0,0:39:13.16,0:39:13.80,Default,,0,0,0,,vocabulary.
Dialogue: 0,0:39:15.34,0:39:17.44,Default,,0,0,0,,Having done this, Siri will now
Dialogue: 0,0:39:17.44,0:39:19.11,Default,,0,0,0,,be able to understand requests
Dialogue: 0,0:39:19.11,0:39:20.75,Default,,0,0,0,,like this where the user is
Dialogue: 0,0:39:20.75,0:39:23.14,Default,,0,0,0,,using the customized vocabulary
Dialogue: 0,0:39:23.14,0:39:25.58,Default,,0,0,0,,word which are specific to your
Dialogue: 0,0:39:26.43,0:39:26.51,Default,,0,0,0,,app.
Dialogue: 0,0:39:31.50,0:39:33.52,Default,,0,0,0,,Now let's talk about how you can
Dialogue: 0,0:39:33.69,0:39:35.30,Default,,0,0,0,,test the quality of SiriKit
Dialogue: 0,0:39:35.30,0:39:37.68,Default,,0,0,0,,integration with UI testing.
Dialogue: 0,0:39:39.70,0:39:41.68,Default,,0,0,0,,We introduced UI testing a
Dialogue: 0,0:39:41.68,0:39:43.39,Default,,0,0,0,,couple of years ago as a
Dialogue: 0,0:39:43.39,0:39:45.01,Default,,0,0,0,,mechanism for you to write UI
Dialogue: 0,0:39:45.01,0:39:46.66,Default,,0,0,0,,tests-- automation tests--
Dialogue: 0,0:39:46.66,0:39:48.69,Default,,0,0,0,,inside your project in Xcode.
Dialogue: 0,0:39:49.25,0:39:52.17,Default,,0,0,0,,Now that Siri is supported in
Dialogue: 0,0:39:52.17,0:39:54.13,Default,,0,0,0,,the simulator, you can run these
Dialogue: 0,0:39:54.13,0:39:55.85,Default,,0,0,0,,tests on any hardware
Dialogue: 0,0:39:55.85,0:39:57.96,Default,,0,0,0,,configuration without actually
Dialogue: 0,0:39:57.96,0:39:59.97,Default,,0,0,0,,requiring to have the hardware
Dialogue: 0,0:39:59.97,0:40:00.34,Default,,0,0,0,,with you.
Dialogue: 0,0:40:03.22,0:40:05.20,Default,,0,0,0,,These UI tests are automatable,
Dialogue: 0,0:40:05.35,0:40:06.94,Default,,0,0,0,,so you can keep them running
Dialogue: 0,0:40:07.20,0:40:09.84,Default,,0,0,0,,automatedly in your CI pipelines
Dialogue: 0,0:40:10.22,0:40:11.98,Default,,0,0,0,,or custom integration pipelines
Dialogue: 0,0:40:12.68,0:40:14.83,Default,,0,0,0,,to make sure that code changes
Dialogue: 0,0:40:14.83,0:40:16.08,Default,,0,0,0,,are not breaking existing
Dialogue: 0,0:40:16.08,0:40:16.77,Default,,0,0,0,,functionality.
Dialogue: 0,0:40:17.23,0:40:20.95,Default,,0,0,0,,Using these UI tests also gives
Dialogue: 0,0:40:20.95,0:40:22.59,Default,,0,0,0,,you a certain degree of language
Dialogue: 0,0:40:22.59,0:40:24.80,Default,,0,0,0,,independence, that way you can
Dialogue: 0,0:40:24.80,0:40:26.78,Default,,0,0,0,,test Siri integration in a
Dialogue: 0,0:40:26.78,0:40:28.56,Default,,0,0,0,,language which is not the
Dialogue: 0,0:40:28.56,0:40:29.92,Default,,0,0,0,,primary language of your
Dialogue: 0,0:40:29.92,0:40:30.55,Default,,0,0,0,,development.
Dialogue: 0,0:40:30.96,0:40:32.46,Default,,0,0,0,,We will see an example of this
Dialogue: 0,0:40:32.46,0:40:32.86,Default,,0,0,0,,shortly.
Dialogue: 0,0:40:35.38,0:40:37.22,Default,,0,0,0,,For further info about UI
Dialogue: 0,0:40:37.22,0:40:38.84,Default,,0,0,0,,testing, we refer you to these
Dialogue: 0,0:40:38.84,0:40:40.94,Default,,0,0,0,,docs about when UI testing was
Dialogue: 0,0:40:40.94,0:40:47.12,Default,,0,0,0,,introduced in 2015.
Dialogue: 0,0:40:47.12,0:40:49.31,Default,,0,0,0,,To enable UI testing with Siri,
Dialogue: 0,0:40:49.57,0:40:51.96,Default,,0,0,0,,the main API that is new to iOS
Dialogue: 0,0:40:51.96,0:40:55.45,Default,,0,0,0,,11 is a way to refer to the Siri
Dialogue: 0,0:40:55.45,0:41:00.55,Default,,0,0,0,,service on the device.
Dialogue: 0,0:41:00.69,0:41:02.35,Default,,0,0,0,,Using this reference, you can
Dialogue: 0,0:41:02.35,0:41:05.40,Default,,0,0,0,,feed in Siri request strings
Dialogue: 0,0:41:05.56,0:41:07.42,Default,,0,0,0,,directly into the Siri service
Dialogue: 0,0:41:07.86,0:41:08.42,Default,,0,0,0,,in code.
Dialogue: 0,0:41:09.00,0:41:10.23,Default,,0,0,0,,And because this is done in
Dialogue: 0,0:41:10.23,0:41:12.64,Default,,0,0,0,,code, you no longer need to do a
Dialogue: 0,0:41:12.64,0:41:14.56,Default,,0,0,0,,manual test of your Siri
Dialogue: 0,0:41:14.56,0:41:15.17,Default,,0,0,0,,integration.
Dialogue: 0,0:41:15.57,0:41:17.46,Default,,0,0,0,,Let us see a demo of this.
Dialogue: 0,0:41:22.68,0:41:24.14,Default,,0,0,0,,So, I'll take you back to the
Dialogue: 0,0:41:24.14,0:41:25.84,Default,,0,0,0,,same app that we saw earlier
Dialogue: 0,0:41:26.23,0:41:27.91,Default,,0,0,0,,where we added an authentication
Dialogue: 0,0:41:27.91,0:41:30.12,Default,,0,0,0,,prompt while unlocking a car.
Dialogue: 0,0:41:31.53,0:41:33.92,Default,,0,0,0,,So, it's the same app where
Dialogue: 0,0:41:34.11,0:41:36.11,Default,,0,0,0,,there's an image showing the
Dialogue: 0,0:41:36.11,0:41:38.62,Default,,0,0,0,,locked state of the car and
Dialogue: 0,0:41:40.20,0:41:42.58,Default,,0,0,0,,using Siri I'm able to test
Dialogue: 0,0:41:42.69,0:41:45.93,Default,,0,0,0,,whether I'm able to lock and
Dialogue: 0,0:41:45.93,0:41:46.55,Default,,0,0,0,,unlock the car.
Dialogue: 0,0:41:47.02,0:41:48.54,Default,,0,0,0,,So, if I want to test my Siri
Dialogue: 0,0:41:48.54,0:41:50.70,Default,,0,0,0,,integration in this app, how
Dialogue: 0,0:41:50.70,0:41:52.36,Default,,0,0,0,,would I do it as a manual test?
Dialogue: 0,0:41:52.92,0:41:57.05,Default,,0,0,0,,I would first launch the app,
Dialogue: 0,0:41:57.31,0:41:58.76,Default,,0,0,0,,set the state to the state I
Dialogue: 0,0:41:58.76,0:41:59.61,Default,,0,0,0,,expect it to be.
Dialogue: 0,0:42:00.21,0:42:01.60,Default,,0,0,0,,Let's say I want to test whether
Dialogue: 0,0:42:01.93,0:42:04.14,Default,,0,0,0,,my lock requests are working, so
Dialogue: 0,0:42:04.14,0:42:05.47,Default,,0,0,0,,I would want to start it off in
Dialogue: 0,0:42:05.47,0:42:06.50,Default,,0,0,0,,an unlocked state.
Dialogue: 0,0:42:08.14,0:42:10.24,Default,,0,0,0,,Then I would want to issue a
Dialogue: 0,0:42:10.80,0:42:12.69,Default,,0,0,0,,request to lock the car.
Dialogue: 0,0:42:14.50,0:42:16.22,Default,,0,0,0,,So, let's issue that request.
Dialogue: 0,0:42:31.49,0:42:34.82,Default,,0,0,0,,OK. And then I would need to
Dialogue: 0,0:42:34.82,0:42:36.67,Default,,0,0,0,,verify that the request was
Dialogue: 0,0:42:36.67,0:42:38.06,Default,,0,0,0,,actually handled successfully.
Dialogue: 0,0:42:38.43,0:42:40.12,Default,,0,0,0,,And in order to do that, I would
Dialogue: 0,0:42:40.12,0:42:42.24,Default,,0,0,0,,need to launch the app and check
Dialogue: 0,0:42:42.24,0:42:44.28,Default,,0,0,0,,the state-- visually inspect the
Dialogue: 0,0:42:44.28,0:42:45.05,Default,,0,0,0,,state of the app.
Dialogue: 0,0:42:45.75,0:42:47.43,Default,,0,0,0,,So, it looks like when I asked
Dialogue: 0,0:42:47.43,0:42:49.31,Default,,0,0,0,,Siri to lock the car, the car
Dialogue: 0,0:42:49.31,0:42:50.38,Default,,0,0,0,,was locked, so the test
Dialogue: 0,0:42:50.38,0:42:50.87,Default,,0,0,0,,succeeds.
Dialogue: 0,0:42:51.29,0:42:52.54,Default,,0,0,0,,This was the manual test.
Dialogue: 0,0:42:53.38,0:42:54.79,Default,,0,0,0,,How would I automate a test like
Dialogue: 0,0:42:54.79,0:42:55.12,Default,,0,0,0,,this?
Dialogue: 0,0:42:55.41,0:42:59.17,Default,,0,0,0,,Using the UI automation API, I
Dialogue: 0,0:42:59.17,0:43:01.80,Default,,0,0,0,,can create a UI tests class in
Dialogue: 0,0:43:01.80,0:43:03.94,Default,,0,0,0,,my project using-- by adding it
Dialogue: 0,0:43:03.98,0:43:06.75,Default,,0,0,0,,to my UI testing bundle and
Dialogue: 0,0:43:07.97,0:43:11.17,Default,,0,0,0,,create a test like this.
Dialogue: 0,0:43:11.36,0:43:12.74,Default,,0,0,0,,So, a test is basically a
Dialogue: 0,0:43:12.74,0:43:15.16,Default,,0,0,0,,function with these four steps.
Dialogue: 0,0:43:15.62,0:43:17.08,Default,,0,0,0,,First, I need to set up the
Dialogue: 0,0:43:17.08,0:43:19.07,Default,,0,0,0,,test, then I need to invoke
Dialogue: 0,0:43:19.07,0:43:21.06,Default,,0,0,0,,Siri, then wait for Siri's
Dialogue: 0,0:43:21.06,0:43:23.45,Default,,0,0,0,,response, and then confirm that
Dialogue: 0,0:43:23.45,0:43:25.71,Default,,0,0,0,,Siri's request actually went
Dialogue: 0,0:43:25.71,0:43:26.87,Default,,0,0,0,,through and that the app
Dialogue: 0,0:43:26.87,0:43:28.19,Default,,0,0,0,,actually handled the request.
Dialogue: 0,0:43:28.86,0:43:31.22,Default,,0,0,0,,So, let's start by setting up a
Dialogue: 0,0:43:32.42,0:43:32.59,Default,,0,0,0,,test.
Dialogue: 0,0:43:32.77,0:43:34.53,Default,,0,0,0,,So, in order to set up a test,
Dialogue: 0,0:43:34.67,0:43:36.89,Default,,0,0,0,,I've created a helper method to
Dialogue: 0,0:43:37.09,0:43:38.74,Default,,0,0,0,,set the car lock status to
Dialogue: 0,0:43:38.74,0:43:41.18,Default,,0,0,0,,false, that is to unlock the
Dialogue: 0,0:43:41.18,0:43:41.45,Default,,0,0,0,,car.
Dialogue: 0,0:43:42.00,0:43:43.80,Default,,0,0,0,,So, before running the locking
Dialogue: 0,0:43:43.80,0:43:45.54,Default,,0,0,0,,test, I'm unlocking the car.
Dialogue: 0,0:43:46.43,0:43:49.46,Default,,0,0,0,,Now, this helper method is-- I
Dialogue: 0,0:43:49.46,0:43:51.05,Default,,0,0,0,,configured it by using the UI
Dialogue: 0,0:43:51.05,0:43:53.39,Default,,0,0,0,,recording mechanism, which if
Dialogue: 0,0:43:53.39,0:43:54.80,Default,,0,0,0,,you refer to the UI testing
Dialogue: 0,0:43:54.80,0:43:57.20,Default,,0,0,0,,framework talk, then you can
Dialogue: 0,0:43:57.20,0:43:58.66,Default,,0,0,0,,learn how to do the UI recording
Dialogue: 0,0:43:58.93,0:44:01.91,Default,,0,0,0,,for generating the test like
Dialogue: 0,0:44:03.06,0:44:03.25,Default,,0,0,0,,this.
Dialogue: 0,0:44:03.37,0:44:05.80,Default,,0,0,0,,Then for invoking Siri, I'm
Dialogue: 0,0:44:05.80,0:44:07.58,Default,,0,0,0,,going to use the API which I
Dialogue: 0,0:44:07.58,0:44:08.86,Default,,0,0,0,,talked about, the new API.
Dialogue: 0,0:44:10.23,0:44:12.93,Default,,0,0,0,,So, I'm feeding in the request
Dialogue: 0,0:44:13.39,0:44:14.16,Default,,0,0,0,,lock my car.
Dialogue: 0,0:44:14.20,0:44:16.78,Default,,0,0,0,,And then, finally, I'm going
Dialogue: 0,0:44:16.78,0:44:18.49,Default,,0,0,0,,to-- then next I'm going to wait
Dialogue: 0,0:44:18.49,0:44:19.73,Default,,0,0,0,,for Siri's response.
Dialogue: 0,0:44:20.57,0:44:21.79,Default,,0,0,0,,In order to wait for Siri's
Dialogue: 0,0:44:21.79,0:44:23.22,Default,,0,0,0,,response, I'm using this API
Dialogue: 0,0:44:23.35,0:44:26.80,Default,,0,0,0,,called wait and this wait
Dialogue: 0,0:44:26.88,0:44:28.31,Default,,0,0,0,,parameter-- this wait method
Dialogue: 0,0:44:28.49,0:44:29.46,Default,,0,0,0,,takes two parameters.
Dialogue: 0,0:44:29.87,0:44:32.17,Default,,0,0,0,,One is an expectation and the
Dialogue: 0,0:44:32.17,0:44:33.10,Default,,0,0,0,,other is a time out.
Dialogue: 0,0:44:33.81,0:44:35.73,Default,,0,0,0,,The expectation I'm waiting to
Dialogue: 0,0:44:35.73,0:44:38.65,Default,,0,0,0,,be fulfilled is a predicate
Dialogue: 0,0:44:38.65,0:44:40.93,Default,,0,0,0,,expectation and I'm using the
Dialogue: 0,0:44:40.93,0:44:43.85,Default,,0,0,0,,predicate which basically sleeps
Dialogue: 0,0:44:43.85,0:44:44.82,Default,,0,0,0,,for 5 seconds.
Dialogue: 0,0:44:45.18,0:44:46.09,Default,,0,0,0,,It's nothing fancy.
Dialogue: 0,0:44:46.50,0:44:48.08,Default,,0,0,0,,I think it's enough time for
Dialogue: 0,0:44:48.08,0:44:50.29,Default,,0,0,0,,Siri to respond to this request.
Dialogue: 0,0:44:52.66,0:44:55.61,Default,,0,0,0,,So, it waits for 5 seconds and
Dialogue: 0,0:44:56.02,0:44:57.65,Default,,0,0,0,,I'll wait for that wait for 10
Dialogue: 0,0:44:57.65,0:44:58.71,Default,,0,0,0,,minute-- for 10 seconds.
Dialogue: 0,0:44:59.08,0:45:02.43,Default,,0,0,0,,So, that was the waiting for
Dialogue: 0,0:45:02.43,0:45:04.03,Default,,0,0,0,,Siri's response piece.
Dialogue: 0,0:45:05.50,0:45:07.73,Default,,0,0,0,,Next, I need to confirm that the
Dialogue: 0,0:45:07.73,0:45:09.36,Default,,0,0,0,,state of the app has actually
Dialogue: 0,0:45:09.36,0:45:09.92,Default,,0,0,0,,changed.
Dialogue: 0,0:45:13.06,0:45:15.50,Default,,0,0,0,,In order to do that, I have
Dialogue: 0,0:45:15.50,0:45:17.76,Default,,0,0,0,,tagged one of the UI elements in
Dialogue: 0,0:45:17.76,0:45:19.73,Default,,0,0,0,,my app with an accessibility tag
Dialogue: 0,0:45:20.32,0:45:22.53,Default,,0,0,0,,which I am now using to extract
Dialogue: 0,0:45:22.53,0:45:25.95,Default,,0,0,0,,that view and then comparing the
Dialogue: 0,0:45:25.95,0:45:28.03,Default,,0,0,0,,value of the accessibility label
Dialogue: 0,0:45:28.03,0:45:30.03,Default,,0,0,0,,on that view to see whether it
Dialogue: 0,0:45:30.03,0:45:34.62,Default,,0,0,0,,matches what I expect.
Dialogue: 0,0:45:34.73,0:45:37.44,Default,,0,0,0,,So, now that we've written--
Dialogue: 0,0:45:37.50,0:45:38.88,Default,,0,0,0,,automated the test that we just
Dialogue: 0,0:45:38.88,0:45:41.20,Default,,0,0,0,,saw manually done, let us run
Dialogue: 0,0:45:41.20,0:45:43.28,Default,,0,0,0,,this automated test and see if
Dialogue: 0,0:45:43.28,0:45:45.77,Default,,0,0,0,,it does what we expect.
Dialogue: 0,0:45:52.34,0:45:53.94,Default,,0,0,0,,Because this is an automated
Dialogue: 0,0:45:53.94,0:45:57.09,Default,,0,0,0,,test, it frees me up to do real
Dialogue: 0,0:45:57.09,0:46:00.72,Default,,0,0,0,,development work and not spend
Dialogue: 0,0:46:00.72,0:46:02.88,Default,,0,0,0,,my time testing something which
Dialogue: 0,0:46:02.88,0:46:04.79,Default,,0,0,0,,I already know how it's supposed
Dialogue: 0,0:46:04.79,0:46:05.17,Default,,0,0,0,,to work.
Dialogue: 0,0:46:08.36,0:46:10.30,Default,,0,0,0,,So, you notice that it's waiting
Dialogue: 0,0:46:10.30,0:46:12.18,Default,,0,0,0,,for Siri's response for 5
Dialogue: 0,0:46:12.18,0:46:14.71,Default,,0,0,0,,seconds and then, finally, it
Dialogue: 0,0:46:14.71,0:46:16.68,Default,,0,0,0,,launches the app and checks
Dialogue: 0,0:46:16.88,0:46:18.17,Default,,0,0,0,,whether the state matches what
Dialogue: 0,0:46:18.17,0:46:18.88,Default,,0,0,0,,it expects.
Dialogue: 0,0:46:21.52,0:46:27.28,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:46:27.78,0:46:30.01,Default,,0,0,0,,And these indicators of
Dialogue: 0,0:46:30.01,0:46:32.89,Default,,0,0,0,,happiness tell me that the test
Dialogue: 0,0:46:32.89,0:46:36.32,Default,,0,0,0,,has actually passed.
Dialogue: 0,0:46:37.64,0:46:39.62,Default,,0,0,0,,Now, Siri is supported in many
Dialogue: 0,0:46:39.62,0:46:41.41,Default,,0,0,0,,languages and I am most
Dialogue: 0,0:46:41.41,0:46:43.27,Default,,0,0,0,,comfortable in English, but I
Dialogue: 0,0:46:43.27,0:46:45.44,Default,,0,0,0,,might want to test my app's Siri
Dialogue: 0,0:46:45.44,0:46:47.38,Default,,0,0,0,,integration in Mandarin.
Dialogue: 0,0:46:47.84,0:46:49.60,Default,,0,0,0,,Now, I don't speak Mandarin, but
Dialogue: 0,0:46:50.37,0:46:54.69,Default,,0,0,0,,I can look up the utterances for
Dialogue: 0,0:46:57.06,0:47:01.13,Default,,0,0,0,,this intent on the developer
Dialogue: 0,0:47:01.13,0:47:01.62,Default,,0,0,0,,website.
Dialogue: 0,0:47:01.62,0:47:03.28,Default,,0,0,0,,So, the intent I'm looking for
Dialogue: 0,0:47:03.28,0:47:07.88,Default,,0,0,0,,is INSetCarLockStatusIntent.
Dialogue: 0,0:47:12.05,0:47:13.49,Default,,0,0,0,,And in the documentation for
Dialogue: 0,0:47:13.49,0:47:17.70,Default,,0,0,0,,this intent we actually have
Dialogue: 0,0:47:17.70,0:47:21.20,Default,,0,0,0,,examples of sample utterances in
Dialogue: 0,0:47:21.27,0:47:22.57,Default,,0,0,0,,all the languages that Siri
Dialogue: 0,0:47:22.57,0:47:23.08,Default,,0,0,0,,supports.
Dialogue: 0,0:47:24.18,0:47:26.10,Default,,0,0,0,,So, I am going to take the
Dialogue: 0,0:47:26.10,0:47:28.64,Default,,0,0,0,,example utterance for Mandarin
Dialogue: 0,0:47:32.08,0:47:36.75,Default,,0,0,0,,and feed it in here.
Dialogue: 0,0:47:40.20,0:47:41.65,Default,,0,0,0,,And I'm going to run this test
Dialogue: 0,0:47:42.35,0:47:44.80,Default,,0,0,0,,on a device which is configured
Dialogue: 0,0:47:45.22,0:47:47.04,Default,,0,0,0,,to use Siri in Mandarin.
Dialogue: 0,0:47:47.72,0:47:49.28,Default,,0,0,0,,So, let me first bring up that
Dialogue: 0,0:47:49.28,0:47:50.11,Default,,0,0,0,,device.
Dialogue: 0,0:48:01.32,0:48:02.92,Default,,0,0,0,,So, it launches the app, sets
Dialogue: 0,0:48:02.92,0:48:05.03,Default,,0,0,0,,the initial state, invokes Siri,
Dialogue: 0,0:48:05.03,0:48:06.83,Default,,0,0,0,,gives it the request, waits for
Dialogue: 0,0:48:06.83,0:48:07.59,Default,,0,0,0,,a response.
Dialogue: 0,0:48:08.19,0:48:11.14,Default,,0,0,0,,And then it launches the app
Dialogue: 0,0:48:11.14,0:48:12.74,Default,,0,0,0,,again and confirms that the
Dialogue: 0,0:48:12.74,0:48:14.28,Default,,0,0,0,,state matches what it expects.
Dialogue: 0,0:48:15.52,0:48:19.67,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:48:20.17,0:48:21.06,Default,,0,0,0,,Again, happiness.
Dialogue: 0,0:48:21.13,0:48:21.57,Default,,0,0,0,,Yay!
Dialogue: 0,0:48:29.27,0:48:30.42,Default,,0,0,0,,So, it was that simple to
Dialogue: 0,0:48:30.42,0:48:32.91,Default,,0,0,0,,automate my SiriKit integration
Dialogue: 0,0:48:33.07,0:48:33.46,Default,,0,0,0,,testing.
Dialogue: 0,0:48:34.20,0:48:35.93,Default,,0,0,0,,So, let's recap what we heard
Dialogue: 0,0:48:35.93,0:48:36.22,Default,,0,0,0,,today.
Dialogue: 0,0:48:37.57,0:48:39.76,Default,,0,0,0,,From my colleague Angel, we
Dialogue: 0,0:48:39.76,0:48:41.89,Default,,0,0,0,,learned how to handle situations
Dialogue: 0,0:48:42.33,0:48:44.17,Default,,0,0,0,,where users need to be prompted
Dialogue: 0,0:48:44.59,0:48:46.76,Default,,0,0,0,,about disambiguating between
Dialogue: 0,0:48:47.01,0:48:49.03,Default,,0,0,0,,contacts with the same name or
Dialogue: 0,0:48:49.03,0:48:50.95,Default,,0,0,0,,between handles of the-- of a
Dialogue: 0,0:48:50.95,0:48:51.89,Default,,0,0,0,,particular contact.
Dialogue: 0,0:48:53.25,0:48:55.95,Default,,0,0,0,,We then saw some ways to
Dialogue: 0,0:48:56.39,0:48:58.61,Default,,0,0,0,,reauthorize Siri requests using
Dialogue: 0,0:48:58.61,0:49:00.70,Default,,0,0,0,,the local authentication API.
Dialogue: 0,0:49:01.92,0:49:03.44,Default,,0,0,0,,Then we saw how we can teach
Dialogue: 0,0:49:03.44,0:49:05.19,Default,,0,0,0,,Siri words which are specific to
Dialogue: 0,0:49:05.19,0:49:08.39,Default,,0,0,0,,users or specific to apps, and
Dialogue: 0,0:49:08.39,0:49:10.45,Default,,0,0,0,,then, finally, we saw some demos
Dialogue: 0,0:49:10.45,0:49:13.05,Default,,0,0,0,,of how we can do UI testing of
Dialogue: 0,0:49:13.22,0:49:16.02,Default,,0,0,0,,our SiriKit integration even in
Dialogue: 0,0:49:16.02,0:49:17.58,Default,,0,0,0,,languages that we are not
Dialogue: 0,0:49:18.16,0:49:20.02,Default,,0,0,0,,conversant in.
Dialogue: 0,0:49:20.96,0:49:23.07,Default,,0,0,0,,For more information about the
Dialogue: 0,0:49:23.07,0:49:25.30,Default,,0,0,0,,sample codes and the APIs that
Dialogue: 0,0:49:25.30,0:49:26.41,Default,,0,0,0,,we talked about in this talk,
Dialogue: 0,0:49:26.41,0:49:28.59,Default,,0,0,0,,please refer to this URL.
Dialogue: 0,0:49:28.59,0:49:33.06,Default,,0,0,0,,And we have some other talks
Dialogue: 0,0:49:34.03,0:49:35.72,Default,,0,0,0,,which are relevant to your
Dialogue: 0,0:49:35.72,0:49:37.58,Default,,0,0,0,,SiriKit integration, including
Dialogue: 0,0:49:37.81,0:49:41.07,Default,,0,0,0,,Apple Pay and CarPlay talks and
Dialogue: 0,0:49:41.60,0:49:43.66,Default,,0,0,0,,the talks from previous years
Dialogue: 0,0:49:43.66,0:49:45.03,Default,,0,0,0,,which we referred to in this
Dialogue: 0,0:49:45.03,0:49:45.91,Default,,0,0,0,,talk are listed here.
Dialogue: 0,0:49:47.19,0:49:49.78,Default,,0,0,0,,Thank you for coming and we hope
Dialogue: 0,0:49:49.78,0:49:51.09,Default,,0,0,0,,you have enough information to
Dialogue: 0,0:49:51.23,0:49:53.42,Default,,0,0,0,,create great SiriKit experiences
Dialogue: 0,0:49:53.42,0:49:54.07,Default,,0,0,0,,after this talk.
Dialogue: 0,0:49:54.83,0:49:55.49,Default,,0,0,0,,Thank you everybody.
Dialogue: 0,0:49:56.52,0:50:02.01,Default,,0,0,0,,[ Applause ]
