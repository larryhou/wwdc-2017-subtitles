[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:23.24,0:00:25.99,Default,,0,0,0,,>> Thank you.
Dialogue: 0,0:00:26.18,0:00:27.61,Default,,0,0,0,,Good morning everybody, and
Dialogue: 0,0:00:27.61,0:00:29.19,Default,,0,0,0,,welcome to SceneKit in Swift
Dialogue: 0,0:00:29.19,0:00:29.80,Default,,0,0,0,,Playgrounds.
Dialogue: 0,0:00:30.50,0:00:31.93,Default,,0,0,0,,My name's Michael DeWitt and I'm
Dialogue: 0,0:00:31.93,0:00:33.54,Default,,0,0,0,,really excited today to give you
Dialogue: 0,0:00:33.54,0:00:35.40,Default,,0,0,0,,an inside look into how we use
Dialogue: 0,0:00:35.40,0:00:36.87,Default,,0,0,0,,SceneKit to make the Learn to
Dialogue: 0,0:00:36.87,0:00:37.62,Default,,0,0,0,,Code content.
Dialogue: 0,0:00:38.03,0:00:39.37,Default,,0,0,0,,So hopefully many of you are
Dialogue: 0,0:00:39.37,0:00:40.42,Default,,0,0,0,,already familiar with Swift
Dialogue: 0,0:00:40.42,0:00:42.04,Default,,0,0,0,,Playgrounds, but let me show you
Dialogue: 0,0:00:42.04,0:00:43.29,Default,,0,0,0,,Learn to Code.
Dialogue: 0,0:00:44.58,0:00:46.30,Default,,0,0,0,,So this is an example lesson
Dialogue: 0,0:00:46.30,0:00:47.83,Default,,0,0,0,,from the Learn to Code content
Dialogue: 0,0:00:47.86,0:00:48.92,Default,,0,0,0,,that lives inside Swift
Dialogue: 0,0:00:48.92,0:00:49.43,Default,,0,0,0,,Playgrounds.
Dialogue: 0,0:00:49.56,0:00:51.72,Default,,0,0,0,,On the left-hand side we have
Dialogue: 0,0:00:51.72,0:00:53.25,Default,,0,0,0,,the lesson and the user's code.
Dialogue: 0,0:00:53.25,0:00:55.33,Default,,0,0,0,,But for this talk we're really
Dialogue: 0,0:00:55.33,0:00:56.64,Default,,0,0,0,,going to focus on the right-hand
Dialogue: 0,0:00:56.64,0:00:57.00,Default,,0,0,0,,side.
Dialogue: 0,0:00:57.10,0:00:58.08,Default,,0,0,0,,Notice the live view.
Dialogue: 0,0:00:58.37,0:00:59.82,Default,,0,0,0,,If we could actually take that
Dialogue: 0,0:00:59.82,0:01:01.26,Default,,0,0,0,,full screen to get a little
Dialogue: 0,0:01:01.26,0:01:02.25,Default,,0,0,0,,better view of it.
Dialogue: 0,0:01:03.06,0:01:05.13,Default,,0,0,0,,This character, Byte, that is
Dialogue: 0,0:01:05.13,0:01:06.68,Default,,0,0,0,,now literally sprinting around
Dialogue: 0,0:01:06.68,0:01:09.08,Default,,0,0,0,,this map to collect the gems, is
Dialogue: 0,0:01:09.08,0:01:11.67,Default,,0,0,0,,moving up and down stairs and
Dialogue: 0,0:01:11.67,0:01:13.45,Default,,0,0,0,,after Byte has collected all the
Dialogue: 0,0:01:13.45,0:01:16.14,Default,,0,0,0,,gems, we get a congratulations
Dialogue: 0,0:01:16.14,0:01:17.80,Default,,0,0,0,,sequence that lets the learner
Dialogue: 0,0:01:17.80,0:01:18.73,Default,,0,0,0,,know they've done something
Dialogue: 0,0:01:18.73,0:01:20.68,Default,,0,0,0,,great, and Byte even has a few
Dialogue: 0,0:01:20.68,0:01:22.76,Default,,0,0,0,,dance moves to let people know
Dialogue: 0,0:01:22.76,0:01:23.32,Default,,0,0,0,,it's really good.
Dialogue: 0,0:01:24.11,0:01:25.86,Default,,0,0,0,,So this is our case study today.
Dialogue: 0,0:01:26.51,0:01:28.19,Default,,0,0,0,,We're going to work through this
Dialogue: 0,0:01:28.19,0:01:30.66,Default,,0,0,0,,scene on how to use SceneKit
Dialogue: 0,0:01:30.66,0:01:32.61,Default,,0,0,0,,effectively and really bring the
Dialogue: 0,0:01:32.61,0:01:34.02,Default,,0,0,0,,richness of 3D to your
Dialogue: 0,0:01:34.02,0:01:34.91,Default,,0,0,0,,applications.
Dialogue: 0,0:01:36.10,0:01:39.48,Default,,0,0,0,,So if you're interested in 3D
Dialogue: 0,0:01:39.68,0:01:41.25,Default,,0,0,0,,but are maybe pretty new to it,
Dialogue: 0,0:01:41.78,0:01:42.77,Default,,0,0,0,,you've come to the right place
Dialogue: 0,0:01:42.77,0:01:44.44,Default,,0,0,0,,because we actually started with
Dialogue: 0,0:01:44.44,0:01:46.66,Default,,0,0,0,,something very different than
Dialogue: 0,0:01:47.48,0:01:47.58,Default,,0,0,0,,this.
Dialogue: 0,0:01:47.80,0:01:49.65,Default,,0,0,0,,We started with a simple 2D
Dialogue: 0,0:01:49.74,0:01:50.10,Default,,0,0,0,,scene.
Dialogue: 0,0:01:50.67,0:01:52.21,Default,,0,0,0,,And one of the best parts about
Dialogue: 0,0:01:52.21,0:01:54.21,Default,,0,0,0,,SceneKit is it allowed a couple
Dialogue: 0,0:01:54.21,0:01:56.55,Default,,0,0,0,,of 2D programmers to take this
Dialogue: 0,0:01:56.55,0:01:59.10,Default,,0,0,0,,scene on an existing timeline
Dialogue: 0,0:01:59.46,0:02:01.78,Default,,0,0,0,,and make the rich 3D content
Dialogue: 0,0:02:01.78,0:02:02.98,Default,,0,0,0,,that we shift in Learn to Code.
Dialogue: 0,0:02:04.33,0:02:05.20,Default,,0,0,0,,So that's what we're going to
Dialogue: 0,0:02:05.20,0:02:05.91,Default,,0,0,0,,talk about today.
Dialogue: 0,0:02:06.43,0:02:07.96,Default,,0,0,0,,We've got 40 minutes and we've
Dialogue: 0,0:02:07.96,0:02:09.04,Default,,0,0,0,,broken it down into three
Dialogue: 0,0:02:09.04,0:02:09.63,Default,,0,0,0,,sections.
Dialogue: 0,0:02:10.72,0:02:12.15,Default,,0,0,0,,First, I'll talk about
Dialogue: 0,0:02:12.15,0:02:14.23,Default,,0,0,0,,prototyping and how we refined
Dialogue: 0,0:02:14.23,0:02:15.63,Default,,0,0,0,,the idea to make sure it was
Dialogue: 0,0:02:15.63,0:02:16.81,Default,,0,0,0,,really good.
Dialogue: 0,0:02:17.30,0:02:19.36,Default,,0,0,0,,In iterating I want to go over
Dialogue: 0,0:02:19.36,0:02:20.09,Default,,0,0,0,,when you're actually getting
Dialogue: 0,0:02:20.09,0:02:21.16,Default,,0,0,0,,some real assets from your
Dialogue: 0,0:02:21.16,0:02:22.84,Default,,0,0,0,,vendor, how you can establish an
Dialogue: 0,0:02:22.84,0:02:23.81,Default,,0,0,0,,effective pipeline.
Dialogue: 0,0:02:23.81,0:02:25.78,Default,,0,0,0,,And then Lamont will come on
Dialogue: 0,0:02:25.78,0:02:27.39,Default,,0,0,0,,stage to talk about tuning and
Dialogue: 0,0:02:27.39,0:02:28.86,Default,,0,0,0,,getting your scene ready to
Dialogue: 0,0:02:29.38,0:02:29.49,Default,,0,0,0,,ship.
Dialogue: 0,0:02:30.28,0:02:32.65,Default,,0,0,0,,First up is prototyping.
Dialogue: 0,0:02:33.47,0:02:36.71,Default,,0,0,0,,This is coming at a phase right
Dialogue: 0,0:02:36.71,0:02:38.88,Default,,0,0,0,,after we decided on the idea for
Dialogue: 0,0:02:38.88,0:02:40.07,Default,,0,0,0,,Learn to Code and we're really
Dialogue: 0,0:02:40.07,0:02:41.03,Default,,0,0,0,,ready to start building
Dialogue: 0,0:02:41.03,0:02:41.43,Default,,0,0,0,,something.
Dialogue: 0,0:02:41.94,0:02:43.62,Default,,0,0,0,,So you saw this graphic before,
Dialogue: 0,0:02:43.62,0:02:44.83,Default,,0,0,0,,but here it is in context.
Dialogue: 0,0:02:45.90,0:02:48.80,Default,,0,0,0,,We started off with gems that
Dialogue: 0,0:02:48.80,0:02:50.24,Default,,0,0,0,,came from the emoji tray and
Dialogue: 0,0:02:50.37,0:02:51.59,Default,,0,0,0,,assets we had lying around
Dialogue: 0,0:02:51.77,0:02:52.81,Default,,0,0,0,,because we just needed to get
Dialogue: 0,0:02:52.81,0:02:53.95,Default,,0,0,0,,something up and running as
Dialogue: 0,0:02:53.95,0:02:55.96,Default,,0,0,0,,quickly as possible to test the
Dialogue: 0,0:02:55.96,0:02:57.34,Default,,0,0,0,,interaction model in this new
Dialogue: 0,0:02:58.24,0:02:58.35,Default,,0,0,0,,app.
Dialogue: 0,0:02:58.35,0:02:59.48,Default,,0,0,0,,So we learned a lot from this.
Dialogue: 0,0:02:59.48,0:03:00.57,Default,,0,0,0,,It didn't matter what the assets
Dialogue: 0,0:03:00.57,0:03:03.17,Default,,0,0,0,,looked like, but through this
Dialogue: 0,0:03:03.17,0:03:04.50,Default,,0,0,0,,prototyping process we started
Dialogue: 0,0:03:04.50,0:03:05.43,Default,,0,0,0,,to get some early feedback.
Dialogue: 0,0:03:06.46,0:03:08.12,Default,,0,0,0,,Some of those comments were
Dialogue: 0,0:03:08.12,0:03:09.02,Default,,0,0,0,,about the graphics.
Dialogue: 0,0:03:09.50,0:03:11.13,Default,,0,0,0,,It was requests like could we
Dialogue: 0,0:03:11.13,0:03:12.89,Default,,0,0,0,,change the gem color, could we
Dialogue: 0,0:03:12.89,0:03:14.61,Default,,0,0,0,,add a border around the scene,
Dialogue: 0,0:03:14.73,0:03:16.05,Default,,0,0,0,,or could we pivot the camera at
Dialogue: 0,0:03:16.15,0:03:17.00,Default,,0,0,0,,the end to give a little bit of
Dialogue: 0,0:03:17.00,0:03:17.83,Default,,0,0,0,,visual interest.
Dialogue: 0,0:03:18.95,0:03:21.64,Default,,0,0,0,,While this is good feedback, it
Dialogue: 0,0:03:21.64,0:03:23.94,Default,,0,0,0,,really is very iterative, and
Dialogue: 0,0:03:23.94,0:03:25.05,Default,,0,0,0,,when you're prototyping, you
Dialogue: 0,0:03:25.05,0:03:26.17,Default,,0,0,0,,shouldn't be afraid to throw the
Dialogue: 0,0:03:26.17,0:03:26.88,Default,,0,0,0,,whole thing away.
Dialogue: 0,0:03:27.38,0:03:28.96,Default,,0,0,0,,And so if we go back and look at
Dialogue: 0,0:03:28.96,0:03:30.86,Default,,0,0,0,,the scene in context, you can
Dialogue: 0,0:03:30.86,0:03:32.50,Default,,0,0,0,,see it just is very flat on this
Dialogue: 0,0:03:32.50,0:03:33.04,Default,,0,0,0,,page.
Dialogue: 0,0:03:33.40,0:03:34.64,Default,,0,0,0,,So all of the feedback we're
Dialogue: 0,0:03:34.64,0:03:35.93,Default,,0,0,0,,getting is about the visual
Dialogue: 0,0:03:35.93,0:03:36.12,Default,,0,0,0,,look.
Dialogue: 0,0:03:36.44,0:03:38.13,Default,,0,0,0,,We need to just re-evaluate our
Dialogue: 0,0:03:38.13,0:03:38.61,Default,,0,0,0,,strategy.
Dialogue: 0,0:03:40.40,0:03:41.80,Default,,0,0,0,,So we had been working the
Dialogue: 0,0:03:41.80,0:03:43.79,Default,,0,0,0,,SpriteKit and now we started
Dialogue: 0,0:03:43.79,0:03:44.66,Default,,0,0,0,,exploring SceneKit.
Dialogue: 0,0:03:45.32,0:03:46.38,Default,,0,0,0,,And for many of you who are
Dialogue: 0,0:03:46.38,0:03:48.34,Default,,0,0,0,,familiar with SpriteKit, you'll
Dialogue: 0,0:03:48.34,0:03:49.92,Default,,0,0,0,,know that it has these concepts;
Dialogue: 0,0:03:50.61,0:03:52.21,Default,,0,0,0,,basically a scene to do your
Dialogue: 0,0:03:52.21,0:03:54.36,Default,,0,0,0,,update logic, a node to place
Dialogue: 0,0:03:54.36,0:03:56.55,Default,,0,0,0,,things in view, and actions to
Dialogue: 0,0:03:56.55,0:03:57.68,Default,,0,0,0,,move those objects around.
Dialogue: 0,0:03:58.69,0:04:00.17,Default,,0,0,0,,Now, the benefit of having
Dialogue: 0,0:04:00.17,0:04:01.68,Default,,0,0,0,,SceneKit also developed at Apple
Dialogue: 0,0:04:02.10,0:04:03.39,Default,,0,0,0,,is that it has a lot of those
Dialogue: 0,0:04:03.39,0:04:04.23,Default,,0,0,0,,same concepts.
Dialogue: 0,0:04:05.40,0:04:07.29,Default,,0,0,0,,So this gave us enough
Dialogue: 0,0:04:07.29,0:04:08.98,Default,,0,0,0,,confidence, a simple prefix
Dialogue: 0,0:04:08.98,0:04:10.37,Default,,0,0,0,,switch, to get started with
Dialogue: 0,0:04:10.37,0:04:11.77,Default,,0,0,0,,SceneKit and start diving in.
Dialogue: 0,0:04:12.40,0:04:13.80,Default,,0,0,0,,So like many of you out there,
Dialogue: 0,0:04:14.11,0:04:16.08,Default,,0,0,0,,we watched a WWDC presentation
Dialogue: 0,0:04:16.49,0:04:17.87,Default,,0,0,0,,from 2015.
Dialogue: 0,0:04:17.87,0:04:19.13,Default,,0,0,0,,It's a great talk given by the
Dialogue: 0,0:04:19.13,0:04:21.05,Default,,0,0,0,,SceneKit Team on how to build a
Dialogue: 0,0:04:21.05,0:04:23.19,Default,,0,0,0,,simple scene like the one you
Dialogue: 0,0:04:23.44,0:04:26.49,Default,,0,0,0,,see here, and not only that, but
Dialogue: 0,0:04:26.49,0:04:27.88,Default,,0,0,0,,we got to use some of the assets
Dialogue: 0,0:04:27.88,0:04:30.28,Default,,0,0,0,,from the sample and recreate our
Dialogue: 0,0:04:30.28,0:04:30.71,Default,,0,0,0,,scene.
Dialogue: 0,0:04:32.07,0:04:33.63,Default,,0,0,0,,So now we got to this stage and
Dialogue: 0,0:04:33.63,0:04:35.20,Default,,0,0,0,,immediately we could tell this
Dialogue: 0,0:04:35.20,0:04:36.23,Default,,0,0,0,,is just way better.
Dialogue: 0,0:04:36.31,0:04:37.99,Default,,0,0,0,,I mean, it's far more immersive,
Dialogue: 0,0:04:38.18,0:04:39.74,Default,,0,0,0,,you can freely pan the camera
Dialogue: 0,0:04:39.74,0:04:41.33,Default,,0,0,0,,and it actually helps you solve
Dialogue: 0,0:04:41.33,0:04:41.92,Default,,0,0,0,,the levels.
Dialogue: 0,0:04:42.45,0:04:45.62,Default,,0,0,0,,But the point of this slide is
Dialogue: 0,0:04:45.62,0:04:46.43,Default,,0,0,0,,that even though we've
Dialogue: 0,0:04:46.43,0:04:47.95,Default,,0,0,0,,definitely bumped up the visual
Dialogue: 0,0:04:47.95,0:04:49.77,Default,,0,0,0,,quality, when you're
Dialogue: 0,0:04:49.77,0:04:51.32,Default,,0,0,0,,prototyping, you still want to
Dialogue: 0,0:04:51.32,0:04:52.83,Default,,0,0,0,,keep that visual fidelity low.
Dialogue: 0,0:04:52.99,0:04:54.45,Default,,0,0,0,,So when we're adding new game
Dialogue: 0,0:04:54.45,0:04:55.96,Default,,0,0,0,,mechanics like these portals,
Dialogue: 0,0:04:57.07,0:04:58.12,Default,,0,0,0,,we're doing it with SceneKit
Dialogue: 0,0:04:58.15,0:04:59.78,Default,,0,0,0,,primitives because we don't want
Dialogue: 0,0:04:59.78,0:05:01.01,Default,,0,0,0,,to get too hung up on making
Dialogue: 0,0:05:01.01,0:05:02.57,Default,,0,0,0,,sure the scene looks absolutely
Dialogue: 0,0:05:02.57,0:05:02.93,Default,,0,0,0,,great.
Dialogue: 0,0:05:03.20,0:05:04.04,Default,,0,0,0,,We want to make sure it's a good
Dialogue: 0,0:05:04.04,0:05:04.74,Default,,0,0,0,,idea first.
Dialogue: 0,0:05:05.62,0:05:08.06,Default,,0,0,0,,So if I had to throw this up on
Dialogue: 0,0:05:08.06,0:05:10.77,Default,,0,0,0,,a Business Tool 101 chart, you
Dialogue: 0,0:05:10.77,0:05:11.86,Default,,0,0,0,,basically look at the whole
Dialogue: 0,0:05:11.86,0:05:13.03,Default,,0,0,0,,timeline of your project.
Dialogue: 0,0:05:13.98,0:05:15.40,Default,,0,0,0,,You want to allocate a large
Dialogue: 0,0:05:15.40,0:05:16.57,Default,,0,0,0,,chunk of that to prototyping
Dialogue: 0,0:05:17.14,0:05:18.43,Default,,0,0,0,,because it's the phase with
Dialogue: 0,0:05:18.43,0:05:20.21,Default,,0,0,0,,which you can make the biggest
Dialogue: 0,0:05:20.21,0:05:21.88,Default,,0,0,0,,changes and the effort to change
Dialogue: 0,0:05:21.88,0:05:24.39,Default,,0,0,0,,is low, especially when you're
Dialogue: 0,0:05:24.39,0:05:25.43,Default,,0,0,0,,working in 3D.
Dialogue: 0,0:05:26.08,0:05:27.18,Default,,0,0,0,,When you start to get real
Dialogue: 0,0:05:27.28,0:05:28.55,Default,,0,0,0,,assets, and in this next section
Dialogue: 0,0:05:28.55,0:05:29.40,Default,,0,0,0,,that we're going to talk about,
Dialogue: 0,0:05:29.93,0:05:31.40,Default,,0,0,0,,the effort to change goes way
Dialogue: 0,0:05:31.40,0:05:31.63,Default,,0,0,0,,up.
Dialogue: 0,0:05:32.45,0:05:33.48,Default,,0,0,0,,So be mindful of that when
Dialogue: 0,0:05:33.48,0:05:34.15,Default,,0,0,0,,you're prototyping.
Dialogue: 0,0:05:35.57,0:05:38.09,Default,,0,0,0,,So in summary, really, you want
Dialogue: 0,0:05:38.09,0:05:38.94,Default,,0,0,0,,to work on testing your
Dialogue: 0,0:05:38.94,0:05:39.92,Default,,0,0,0,,interaction model when you're
Dialogue: 0,0:05:39.92,0:05:40.44,Default,,0,0,0,,prototyping.
Dialogue: 0,0:05:40.53,0:05:41.74,Default,,0,0,0,,It's not about the assets.
Dialogue: 0,0:05:42.13,0:05:43.13,Default,,0,0,0,,You want to interpret the
Dialogue: 0,0:05:43.13,0:05:45.19,Default,,0,0,0,,feedback you receive, but don't
Dialogue: 0,0:05:45.19,0:05:46.48,Default,,0,0,0,,look for incremental changes.
Dialogue: 0,0:05:46.69,0:05:47.84,Default,,0,0,0,,Look to make sure the idea is
Dialogue: 0,0:05:47.84,0:05:48.20,Default,,0,0,0,,valid.
Dialogue: 0,0:05:48.86,0:05:50.55,Default,,0,0,0,,And then finally, take the
Dialogue: 0,0:05:50.55,0:05:51.83,Default,,0,0,0,,insights from this section,
Dialogue: 0,0:05:52.02,0:05:52.80,Default,,0,0,0,,believe the code.
Dialogue: 0,0:05:52.89,0:05:53.94,Default,,0,0,0,,I think one of the best
Dialogue: 0,0:05:53.94,0:05:55.07,Default,,0,0,0,,decisions we made was to
Dialogue: 0,0:05:55.10,0:05:56.90,Default,,0,0,0,,actually start file-new-project
Dialogue: 0,0:05:56.97,0:05:58.09,Default,,0,0,0,,when moving forward past this
Dialogue: 0,0:05:58.09,0:06:00.75,Default,,0,0,0,,point, which brings us to
Dialogue: 0,0:06:00.75,0:06:00.96,Default,,0,0,0,,iterating.
Dialogue: 0,0:06:04.25,0:06:06.04,Default,,0,0,0,,So now we've got the idea and
Dialogue: 0,0:06:06.04,0:06:07.04,Default,,0,0,0,,we're ready to get some real
Dialogue: 0,0:06:07.04,0:06:08.46,Default,,0,0,0,,art, so we started working with
Dialogue: 0,0:06:08.46,0:06:10.12,Default,,0,0,0,,an artist and we received this
Dialogue: 0,0:06:10.12,0:06:11.32,Default,,0,0,0,,early 2D comp.
Dialogue: 0,0:06:11.32,0:06:14.48,Default,,0,0,0,,So you can start to see it
Dialogue: 0,0:06:14.48,0:06:16.00,Default,,0,0,0,,resembles Byte's world now.
Dialogue: 0,0:06:16.41,0:06:17.37,Default,,0,0,0,,It looks way better.
Dialogue: 0,0:06:17.81,0:06:19.16,Default,,0,0,0,,And I want to break down this
Dialogue: 0,0:06:19.16,0:06:20.72,Default,,0,0,0,,world into four parts.
Dialogue: 0,0:06:21.67,0:06:22.85,Default,,0,0,0,,The first thing we'll talk about
Dialogue: 0,0:06:23.03,0:06:24.94,Default,,0,0,0,,is how it's constructed and some
Dialogue: 0,0:06:24.94,0:06:25.99,Default,,0,0,0,,strategies to do that
Dialogue: 0,0:06:25.99,0:06:26.51,Default,,0,0,0,,effectively.
Dialogue: 0,0:06:27.48,0:06:30.30,Default,,0,0,0,,Next, we'll look at how you can
Dialogue: 0,0:06:30.30,0:06:32.92,Default,,0,0,0,,accomplish complex animations in
Dialogue: 0,0:06:32.92,0:06:34.49,Default,,0,0,0,,your app by looking at how we
Dialogue: 0,0:06:34.49,0:06:35.98,Default,,0,0,0,,made Byte move up the stairs.
Dialogue: 0,0:06:37.14,0:06:38.69,Default,,0,0,0,,We'll look at how you can add
Dialogue: 0,0:06:38.69,0:06:40.27,Default,,0,0,0,,visual interests with water and
Dialogue: 0,0:06:40.27,0:06:41.41,Default,,0,0,0,,other scenery elements.
Dialogue: 0,0:06:42.62,0:06:44.43,Default,,0,0,0,,And then we're really focused on
Dialogue: 0,0:06:44.43,0:06:46.01,Default,,0,0,0,,the visuals in this talk, but
Dialogue: 0,0:06:46.01,0:06:47.23,Default,,0,0,0,,there's a whole other area of
Dialogue: 0,0:06:47.23,0:06:48.69,Default,,0,0,0,,your users that actually won't
Dialogue: 0,0:06:48.69,0:06:49.82,Default,,0,0,0,,be able to benefit from the
Dialogue: 0,0:06:49.82,0:06:51.26,Default,,0,0,0,,visuals of a 3D scene, so we're
Dialogue: 0,0:06:51.43,0:06:53.05,Default,,0,0,0,,going to spend some time talking
Dialogue: 0,0:06:53.05,0:06:54.48,Default,,0,0,0,,about accessibility support, and
Dialogue: 0,0:06:54.48,0:06:55.50,Default,,0,0,0,,VoiceOver specifically.
Dialogue: 0,0:06:56.69,0:06:57.01,Default,,0,0,0,,All right.
Dialogue: 0,0:06:58.00,0:07:00.41,Default,,0,0,0,,First up, modeling this world.
Dialogue: 0,0:07:00.98,0:07:02.38,Default,,0,0,0,,So as you can sort of see by the
Dialogue: 0,0:07:02.38,0:07:04.12,Default,,0,0,0,,stencil we built this out of
Dialogue: 0,0:07:04.33,0:07:04.88,Default,,0,0,0,,blocks.
Dialogue: 0,0:07:05.02,0:07:06.14,Default,,0,0,0,,We had individual assets.
Dialogue: 0,0:07:06.35,0:07:07.86,Default,,0,0,0,,There was a couple reasons to do
Dialogue: 0,0:07:08.78,0:07:08.93,Default,,0,0,0,,this.
Dialogue: 0,0:07:09.38,0:07:11.15,Default,,0,0,0,,We needed to not only iterate on
Dialogue: 0,0:07:11.15,0:07:12.85,Default,,0,0,0,,the asset design, but also on
Dialogue: 0,0:07:12.85,0:07:13.67,Default,,0,0,0,,the lesson design.
Dialogue: 0,0:07:14.05,0:07:15.51,Default,,0,0,0,,So we were putting together very
Dialogue: 0,0:07:15.51,0:07:17.93,Default,,0,0,0,,simple puzzles like this to make
Dialogue: 0,0:07:17.93,0:07:19.31,Default,,0,0,0,,sure that learners had a smooth
Dialogue: 0,0:07:19.31,0:07:20.39,Default,,0,0,0,,path through the curriculum.
Dialogue: 0,0:07:21.92,0:07:23.47,Default,,0,0,0,,But rather than placing these
Dialogue: 0,0:07:23.47,0:07:25.07,Default,,0,0,0,,individual blocks in a Scene
Dialogue: 0,0:07:25.07,0:07:26.41,Default,,0,0,0,,Editor, which would be pretty
Dialogue: 0,0:07:26.49,0:07:28.20,Default,,0,0,0,,tedious, we actually wrote some
Dialogue: 0,0:07:28.20,0:07:29.15,Default,,0,0,0,,code to do this.
Dialogue: 0,0:07:29.55,0:07:31.20,Default,,0,0,0,,So much like learners use in
Dialogue: 0,0:07:31.20,0:07:32.19,Default,,0,0,0,,Learn to Code 2 when they're
Dialogue: 0,0:07:32.19,0:07:34.22,Default,,0,0,0,,building their own worlds, we
Dialogue: 0,0:07:34.22,0:07:35.67,Default,,0,0,0,,wrote some code to generate this
Dialogue: 0,0:07:35.75,0:07:36.82,Default,,0,0,0,,and it looks like this.
Dialogue: 0,0:07:37.69,0:07:39.85,Default,,0,0,0,,So to build that world you first
Dialogue: 0,0:07:39.85,0:07:41.57,Default,,0,0,0,,give it a size, 5 by 5.
Dialogue: 0,0:07:42.27,0:07:43.98,Default,,0,0,0,,You place items into it, like
Dialogue: 0,0:07:44.03,0:07:45.74,Default,,0,0,0,,actor, or Byte in the scene you
Dialogue: 0,0:07:45.74,0:07:46.29,Default,,0,0,0,,saw before.
Dialogue: 0,0:07:46.61,0:07:48.18,Default,,0,0,0,,And then you can add additional
Dialogue: 0,0:07:48.18,0:07:50.11,Default,,0,0,0,,elements, such as gems or the
Dialogue: 0,0:07:50.11,0:07:51.09,Default,,0,0,0,,water that you saw in the
Dialogue: 0,0:07:51.09,0:07:51.46,Default,,0,0,0,,center.
Dialogue: 0,0:07:51.50,0:07:53.70,Default,,0,0,0,,But the reason I'm showing you
Dialogue: 0,0:07:53.70,0:07:55.64,Default,,0,0,0,,this code is not because, wow,
Dialogue: 0,0:07:55.64,0:07:56.60,Default,,0,0,0,,we wrote an API to build a
Dialogue: 0,0:07:56.60,0:07:58.17,Default,,0,0,0,,world, that's cool, but it's
Dialogue: 0,0:07:58.17,0:08:00.33,Default,,0,0,0,,really because this is totally
Dialogue: 0,0:08:00.33,0:08:01.76,Default,,0,0,0,,independent from the graphics.
Dialogue: 0,0:08:02.01,0:08:03.12,Default,,0,0,0,,Right. This code will be just as
Dialogue: 0,0:08:03.12,0:08:05.29,Default,,0,0,0,,valid in 2D as it is in 3D.
Dialogue: 0,0:08:06.46,0:08:08.64,Default,,0,0,0,,And let me show you actually
Dialogue: 0,0:08:08.64,0:08:09.10,Default,,0,0,0,,what I mean by that.
Dialogue: 0,0:08:09.10,0:08:09.92,Default,,0,0,0,,I have a short video here for
Dialogue: 0,0:08:09.92,0:08:09.99,Default,,0,0,0,,you.
Dialogue: 0,0:08:15.42,0:08:17.02,Default,,0,0,0,,So here we have Byte moving
Dialogue: 0,0:08:17.02,0:08:18.32,Default,,0,0,0,,around this world and we're
Dialogue: 0,0:08:18.32,0:08:19.78,Default,,0,0,0,,going to add in a few nodes.
Dialogue: 0,0:08:19.99,0:08:21.37,Default,,0,0,0,,The green and red nodes you see
Dialogue: 0,0:08:21.37,0:08:23.10,Default,,0,0,0,,in the scene actually represent
Dialogue: 0,0:08:23.10,0:08:23.85,Default,,0,0,0,,the data that we're
Dialogue: 0,0:08:23.85,0:08:24.98,Default,,0,0,0,,reconstructing gameplay with.
Dialogue: 0,0:08:29.35,0:08:31.86,Default,,0,0,0,,And then really, that data is
Dialogue: 0,0:08:31.86,0:08:32.48,Default,,0,0,0,,all we need.
Dialogue: 0,0:08:33.18,0:08:34.96,Default,,0,0,0,,We've actually separated the
Dialogue: 0,0:08:34.96,0:08:36.44,Default,,0,0,0,,visuals of the scene from the
Dialogue: 0,0:08:36.44,0:08:38.01,Default,,0,0,0,,data that's used to reconstruct
Dialogue: 0,0:08:38.01,0:08:38.44,Default,,0,0,0,,gameplay.
Dialogue: 0,0:08:39.34,0:08:40.25,Default,,0,0,0,,There are a couple of big
Dialogue: 0,0:08:40.25,0:08:41.47,Default,,0,0,0,,benefits to this, and I want you
Dialogue: 0,0:08:41.47,0:08:42.26,Default,,0,0,0,,to think about it when you're
Dialogue: 0,0:08:42.26,0:08:43.44,Default,,0,0,0,,modeling a 3D world.
Dialogue: 0,0:08:44.72,0:08:46.29,Default,,0,0,0,,So separate the data from
Dialogue: 0,0:08:46.29,0:08:46.83,Default,,0,0,0,,visuals.
Dialogue: 0,0:08:47.19,0:08:48.88,Default,,0,0,0,,First is it allows you to swap
Dialogue: 0,0:08:48.88,0:08:49.86,Default,,0,0,0,,out assets easily.
Dialogue: 0,0:08:50.26,0:08:51.60,Default,,0,0,0,,Remember, we're still iterating
Dialogue: 0,0:08:51.60,0:08:52.04,Default,,0,0,0,,on this stuff.
Dialogue: 0,0:08:52.04,0:08:53.84,Default,,0,0,0,,We will get a new version of the
Dialogue: 0,0:08:53.84,0:08:55.45,Default,,0,0,0,,block any day, and we don't want
Dialogue: 0,0:08:55.45,0:08:56.80,Default,,0,0,0,,to have to rebuild those maps,
Dialogue: 0,0:08:57.00,0:08:58.38,Default,,0,0,0,,so we're dynamically generating
Dialogue: 0,0:08:58.38,0:08:58.58,Default,,0,0,0,,them.
Dialogue: 0,0:08:59.96,0:09:01.47,Default,,0,0,0,,It also allows you to take that
Dialogue: 0,0:09:01.47,0:09:02.78,Default,,0,0,0,,data and send it elsewhere.
Dialogue: 0,0:09:03.01,0:09:04.05,Default,,0,0,0,,Maybe you need to send it across
Dialogue: 0,0:09:04.05,0:09:06.07,Default,,0,0,0,,a network or send some gameplay
Dialogue: 0,0:09:06.07,0:09:07.66,Default,,0,0,0,,logic across process, like we
Dialogue: 0,0:09:07.66,0:09:08.88,Default,,0,0,0,,were doing in some playgrounds.
Dialogue: 0,0:09:09.61,0:09:11.38,Default,,0,0,0,,And later on down the road it
Dialogue: 0,0:09:11.38,0:09:13.21,Default,,0,0,0,,will also allow you to optimize
Dialogue: 0,0:09:13.21,0:09:13.88,Default,,0,0,0,,the geometry.
Dialogue: 0,0:09:14.51,0:09:15.80,Default,,0,0,0,,And Lamont will get into that in
Dialogue: 0,0:09:15.80,0:09:17.64,Default,,0,0,0,,more detail, but it's really key
Dialogue: 0,0:09:17.64,0:09:18.89,Default,,0,0,0,,that you're not dependent on the
Dialogue: 0,0:09:18.89,0:09:20.65,Default,,0,0,0,,actual nodes and scene for this
Dialogue: 0,0:09:20.65,0:09:21.13,Default,,0,0,0,,to work well.
Dialogue: 0,0:09:21.13,0:09:23.33,Default,,0,0,0,,And I have one caveat.
Dialogue: 0,0:09:24.31,0:09:26.90,Default,,0,0,0,,You need some debugging tools to
Dialogue: 0,0:09:26.90,0:09:27.83,Default,,0,0,0,,make this work really well.
Dialogue: 0,0:09:27.95,0:09:29.11,Default,,0,0,0,,We found that out early on.
Dialogue: 0,0:09:29.11,0:09:30.89,Default,,0,0,0,,You can't just look at the world
Dialogue: 0,0:09:30.89,0:09:32.53,Default,,0,0,0,,anymore and see how gameplay
Dialogue: 0,0:09:32.53,0:09:34.42,Default,,0,0,0,,will be reconstructed, and so we
Dialogue: 0,0:09:34.42,0:09:36.10,Default,,0,0,0,,actually built a pretty simple
Dialogue: 0,0:09:36.10,0:09:36.59,Default,,0,0,0,,Mac app.
Dialogue: 0,0:09:37.68,0:09:39.40,Default,,0,0,0,,This app can actually load in
Dialogue: 0,0:09:39.40,0:09:41.65,Default,,0,0,0,,all the levels that we have, and
Dialogue: 0,0:09:41.65,0:09:42.99,Default,,0,0,0,,more than that, it has
Dialogue: 0,0:09:43.20,0:09:44.75,Default,,0,0,0,,scene-specific knowledge.
Dialogue: 0,0:09:45.54,0:09:47.90,Default,,0,0,0,,So in this case this is the tool
Dialogue: 0,0:09:47.90,0:09:49.17,Default,,0,0,0,,that allows us to show those
Dialogue: 0,0:09:49.17,0:09:50.62,Default,,0,0,0,,debugging nodes you saw before,
Dialogue: 0,0:09:51.47,0:09:54.03,Default,,0,0,0,,and it also can run hard-to-hit
Dialogue: 0,0:09:54.10,0:09:56.18,Default,,0,0,0,,cases in our game, like rotating
Dialogue: 0,0:09:56.18,0:09:57.34,Default,,0,0,0,,around the world when you hit
Dialogue: 0,0:09:57.34,0:09:58.69,Default,,0,0,0,,the congratulations sequence.
Dialogue: 0,0:09:58.87,0:09:59.84,Default,,0,0,0,,We want to make sure that works
Dialogue: 0,0:09:59.84,0:10:01.44,Default,,0,0,0,,on every map, but we don't want
Dialogue: 0,0:10:01.44,0:10:02.83,Default,,0,0,0,,to test every map all the way to
Dialogue: 0,0:10:02.83,0:10:04.87,Default,,0,0,0,,the end just to see that work.
Dialogue: 0,0:10:05.38,0:10:07.45,Default,,0,0,0,,So that's our first stop.
Dialogue: 0,0:10:07.81,0:10:08.66,Default,,0,0,0,,That's how we put the world
Dialogue: 0,0:10:08.66,0:10:09.07,Default,,0,0,0,,together.
Dialogue: 0,0:10:09.36,0:10:10.53,Default,,0,0,0,,We separated the data from
Dialogue: 0,0:10:10.53,0:10:12.11,Default,,0,0,0,,visuals and we used tools.
Dialogue: 0,0:10:13.35,0:10:15.83,Default,,0,0,0,,Now on to animations.
Dialogue: 0,0:10:16.70,0:10:18.00,Default,,0,0,0,,So if we look closely at the
Dialogue: 0,0:10:18.00,0:10:21.55,Default,,0,0,0,,stairs, you can see this is
Dialogue: 0,0:10:21.55,0:10:23.06,Default,,0,0,0,,actually a fairly complicated
Dialogue: 0,0:10:23.06,0:10:23.87,Default,,0,0,0,,piece of geometry.
Dialogue: 0,0:10:24.05,0:10:24.97,Default,,0,0,0,,Right. Not only are there
Dialogue: 0,0:10:24.97,0:10:26.66,Default,,0,0,0,,individual steps, but there are
Dialogue: 0,0:10:26.66,0:10:28.25,Default,,0,0,0,,little cutouts from the step.
Dialogue: 0,0:10:28.56,0:10:29.89,Default,,0,0,0,,So we want to be super precise
Dialogue: 0,0:10:29.89,0:10:31.39,Default,,0,0,0,,about where our character's foot
Dialogue: 0,0:10:31.39,0:10:32.53,Default,,0,0,0,,lands on each step.
Dialogue: 0,0:10:33.31,0:10:34.48,Default,,0,0,0,,So we considered a couple
Dialogue: 0,0:10:34.48,0:10:36.17,Default,,0,0,0,,different strategies, and one
Dialogue: 0,0:10:36.17,0:10:37.85,Default,,0,0,0,,thing that's pretty common for
Dialogue: 0,0:10:38.06,0:10:40.06,Default,,0,0,0,,3D scenes to use is just swap
Dialogue: 0,0:10:40.06,0:10:42.21,Default,,0,0,0,,this out for a ramp because
Dialogue: 0,0:10:42.21,0:10:42.91,Default,,0,0,0,,ramps are easy.
Dialogue: 0,0:10:43.35,0:10:45.17,Default,,0,0,0,,You have a character, you move
Dialogue: 0,0:10:45.17,0:10:46.53,Default,,0,0,0,,that character forward, you
Dialogue: 0,0:10:46.53,0:10:47.70,Default,,0,0,0,,figure out how far up they need
Dialogue: 0,0:10:47.70,0:10:49.31,Default,,0,0,0,,to move, and you just translate
Dialogue: 0,0:10:49.31,0:10:50.67,Default,,0,0,0,,them from point A to point B
Dialogue: 0,0:10:50.74,0:10:51.80,Default,,0,0,0,,while running the walk cycle.
Dialogue: 0,0:10:52.98,0:10:55.17,Default,,0,0,0,,For stairs, not so great.
Dialogue: 0,0:10:55.65,0:10:57.48,Default,,0,0,0,,So here's Byte trying to walk up
Dialogue: 0,0:10:57.48,0:10:59.25,Default,,0,0,0,,the stairs, and if you look
Dialogue: 0,0:10:59.25,0:11:01.74,Default,,0,0,0,,closely, Byte hasn't even gotten
Dialogue: 0,0:11:01.74,0:11:02.93,Default,,0,0,0,,to the first step and he's
Dialogue: 0,0:11:02.93,0:11:03.82,Default,,0,0,0,,already floating in midair.
Dialogue: 0,0:11:03.88,0:11:05.21,Default,,0,0,0,,So we need to do something a
Dialogue: 0,0:11:05.21,0:11:05.98,Default,,0,0,0,,little bit better.
Dialogue: 0,0:11:10.30,0:11:11.40,Default,,0,0,0,,The second thing we considered
Dialogue: 0,0:11:11.40,0:11:13.99,Default,,0,0,0,,is using a built-in type in
Dialogue: 0,0:11:13.99,0:11:14.52,Default,,0,0,0,,SceneKit.
Dialogue: 0,0:11:14.52,0:11:15.58,Default,,0,0,0,,It's actually part of SceneKit's
Dialogue: 0,0:11:15.58,0:11:17.12,Default,,0,0,0,,constraint system to be able to
Dialogue: 0,0:11:17.12,0:11:18.31,Default,,0,0,0,,do inverse kinematics.
Dialogue: 0,0:11:18.80,0:11:20.34,Default,,0,0,0,,Now, inverse kinematics allow
Dialogue: 0,0:11:20.34,0:11:21.81,Default,,0,0,0,,you to be super precise about
Dialogue: 0,0:11:21.81,0:11:22.86,Default,,0,0,0,,where you want the character's
Dialogue: 0,0:11:22.86,0:11:23.69,Default,,0,0,0,,foot to land.
Dialogue: 0,0:11:24.11,0:11:26.08,Default,,0,0,0,,So we would specify each step
Dialogue: 0,0:11:26.08,0:11:27.17,Default,,0,0,0,,where we wanted the character to
Dialogue: 0,0:11:27.17,0:11:29.27,Default,,0,0,0,,take, but it comes with a
Dialogue: 0,0:11:29.27,0:11:30.94,Default,,0,0,0,,sacrifice of some personality in
Dialogue: 0,0:11:30.94,0:11:31.48,Default,,0,0,0,,the character.
Dialogue: 0,0:11:31.55,0:11:33.55,Default,,0,0,0,,Right. We're not able to control
Dialogue: 0,0:11:33.55,0:11:34.87,Default,,0,0,0,,the eye movement or the upper
Dialogue: 0,0:11:34.87,0:11:36.58,Default,,0,0,0,,body as detailed as we'd like.
Dialogue: 0,0:11:37.18,0:11:38.07,Default,,0,0,0,,So we actually went with a third
Dialogue: 0,0:11:38.07,0:11:40.27,Default,,0,0,0,,option, and that's to bake the
Dialogue: 0,0:11:40.27,0:11:42.07,Default,,0,0,0,,displacement into the animation.
Dialogue: 0,0:11:42.41,0:11:43.69,Default,,0,0,0,,And so because this is the one
Dialogue: 0,0:11:43.69,0:11:44.81,Default,,0,0,0,,we went with, let me break it
Dialogue: 0,0:11:44.81,0:11:46.09,Default,,0,0,0,,down for you in a little bit
Dialogue: 0,0:11:46.61,0:11:47.72,Default,,0,0,0,,more detail.
Dialogue: 0,0:11:47.86,0:11:50.35,Default,,0,0,0,,Usually, most games you have a
Dialogue: 0,0:11:50.35,0:11:51.56,Default,,0,0,0,,node, which represents a
Dialogue: 0,0:11:51.56,0:11:53.77,Default,,0,0,0,,position, and you have geometry,
Dialogue: 0,0:11:53.96,0:11:54.95,Default,,0,0,0,,which is what you're actually
Dialogue: 0,0:11:54.95,0:11:56.03,Default,,0,0,0,,seeing in the scene.
Dialogue: 0,0:11:57.13,0:11:59.07,Default,,0,0,0,,Now, it's common for these two
Dialogue: 0,0:11:59.07,0:12:00.54,Default,,0,0,0,,things to move together, so you
Dialogue: 0,0:12:00.54,0:12:02.07,Default,,0,0,0,,translate the node and the
Dialogue: 0,0:12:02.07,0:12:03.70,Default,,0,0,0,,geometry, while playing the walk
Dialogue: 0,0:12:03.70,0:12:05.02,Default,,0,0,0,,cycle, it moves the character
Dialogue: 0,0:12:05.02,0:12:06.05,Default,,0,0,0,,from point A to point B.
Dialogue: 0,0:12:06.93,0:12:08.14,Default,,0,0,0,,But for the stairs we did
Dialogue: 0,0:12:08.14,0:12:10.42,Default,,0,0,0,,something different.
Dialogue: 0,0:12:10.46,0:12:12.68,Default,,0,0,0,,We leave the node alone and we
Dialogue: 0,0:12:12.68,0:12:14.11,Default,,0,0,0,,apply an animation, which
Dialogue: 0,0:12:14.11,0:12:15.74,Default,,0,0,0,,actually has displacement in it.
Dialogue: 0,0:12:16.06,0:12:18.41,Default,,0,0,0,,So this moves the geometry away
Dialogue: 0,0:12:18.41,0:12:20.62,Default,,0,0,0,,from the node and then when that
Dialogue: 0,0:12:20.62,0:12:22.66,Default,,0,0,0,,animation is complete, we
Dialogue: 0,0:12:22.66,0:12:24.12,Default,,0,0,0,,synchronize the node's position
Dialogue: 0,0:12:24.76,0:12:25.87,Default,,0,0,0,,and remove the animation.
Dialogue: 0,0:12:26.88,0:12:28.41,Default,,0,0,0,,We do that with a type in
Dialogue: 0,0:12:28.41,0:12:29.36,Default,,0,0,0,,SceneKit called an
Dialogue: 0,0:12:29.36,0:12:30.46,Default,,0,0,0,,SCNTransaction.
Dialogue: 0,0:12:31.01,0:12:33.57,Default,,0,0,0,,And SCNTransactions allow you to
Dialogue: 0,0:12:33.57,0:12:35.01,Default,,0,0,0,,make sure that update happens in
Dialogue: 0,0:12:35.01,0:12:35.66,Default,,0,0,0,,one frame.
Dialogue: 0,0:12:35.66,0:12:36.69,Default,,0,0,0,,So let me show you what that
Dialogue: 0,0:12:36.69,0:12:37.18,Default,,0,0,0,,looks like.
Dialogue: 0,0:12:38.31,0:12:40.07,Default,,0,0,0,,You set up the transaction with
Dialogue: 0,0:12:40.07,0:12:42.29,Default,,0,0,0,,the begin and commit calls, and
Dialogue: 0,0:12:42.29,0:12:43.69,Default,,0,0,0,,in our case we want an animation
Dialogue: 0,0:12:43.69,0:12:45.90,Default,,0,0,0,,duration of zero because we need
Dialogue: 0,0:12:45.90,0:12:47.95,Default,,0,0,0,,it to happen in the exact same
Dialogue: 0,0:12:48.08,0:12:48.20,Default,,0,0,0,,frame.
Dialogue: 0,0:12:48.20,0:12:49.72,Default,,0,0,0,,We move the character to the new
Dialogue: 0,0:12:49.72,0:12:51.78,Default,,0,0,0,,position and we remove the
Dialogue: 0,0:12:51.78,0:12:54.06,Default,,0,0,0,,animations, making Byte ready
Dialogue: 0,0:12:54.06,0:12:55.28,Default,,0,0,0,,for the next round of
Dialogue: 0,0:12:55.28,0:12:55.96,Default,,0,0,0,,animations.
Dialogue: 0,0:12:56.82,0:12:57.81,Default,,0,0,0,,So let's see this in action.
Dialogue: 0,0:12:58.65,0:13:00.28,Default,,0,0,0,,Got to stretch it out first,
Dialogue: 0,0:13:01.62,0:13:04.29,Default,,0,0,0,,walks up the stairs, and you can
Dialogue: 0,0:13:04.29,0:13:05.81,Default,,0,0,0,,see now, because we're allowing
Dialogue: 0,0:13:05.81,0:13:07.50,Default,,0,0,0,,our animator the freedom to put
Dialogue: 0,0:13:07.50,0:13:08.39,Default,,0,0,0,,the displacement in the
Dialogue: 0,0:13:08.39,0:13:10.11,Default,,0,0,0,,animation, we can be far more
Dialogue: 0,0:13:10.11,0:13:11.70,Default,,0,0,0,,precise about Byte's movements.
Dialogue: 0,0:13:12.03,0:13:14.64,Default,,0,0,0,,Byte's head turns while it walks
Dialogue: 0,0:13:14.64,0:13:15.77,Default,,0,0,0,,up and down the stairs.
Dialogue: 0,0:13:16.22,0:13:17.21,Default,,0,0,0,,So this is a much better
Dialogue: 0,0:13:17.21,0:13:18.61,Default,,0,0,0,,solution and something you
Dialogue: 0,0:13:18.61,0:13:19.80,Default,,0,0,0,,should consider for complex
Dialogue: 0,0:13:19.80,0:13:21.15,Default,,0,0,0,,animations in your scenes.
Dialogue: 0,0:13:21.65,0:13:25.20,Default,,0,0,0,,On to train stop number three,
Dialogue: 0,0:13:26.42,0:13:27.56,Default,,0,0,0,,and that's to look at how we did
Dialogue: 0,0:13:27.56,0:13:28.59,Default,,0,0,0,,the scenery elements, because
Dialogue: 0,0:13:28.59,0:13:29.49,Default,,0,0,0,,it's not all about the
Dialogue: 0,0:13:29.49,0:13:30.02,Default,,0,0,0,,character.
Dialogue: 0,0:13:30.28,0:13:31.19,Default,,0,0,0,,You also need to make sure the
Dialogue: 0,0:13:31.19,0:13:32.14,Default,,0,0,0,,world feels alive.
Dialogue: 0,0:13:32.14,0:13:34.51,Default,,0,0,0,,So let's take a close look at
Dialogue: 0,0:13:34.51,0:13:34.96,Default,,0,0,0,,the water.
Dialogue: 0,0:13:34.96,0:13:39.17,Default,,0,0,0,,Now, you saw before we have been
Dialogue: 0,0:13:39.17,0:13:41.00,Default,,0,0,0,,using maps like this, right,
Dialogue: 0,0:13:41.00,0:13:43.17,Default,,0,0,0,,fairly basic, just enough to
Dialogue: 0,0:13:43.17,0:13:44.57,Default,,0,0,0,,reconstruct the puzzle with, but
Dialogue: 0,0:13:45.32,0:13:46.69,Default,,0,0,0,,we want to get to a point where
Dialogue: 0,0:13:46.69,0:13:47.69,Default,,0,0,0,,our maps look like this.
Dialogue: 0,0:13:48.28,0:13:51.29,Default,,0,0,0,,And the way we did that is to
Dialogue: 0,0:13:51.29,0:13:53.33,Default,,0,0,0,,actually save the original map
Dialogue: 0,0:13:53.33,0:13:55.81,Default,,0,0,0,,out to an SCN file so we can add
Dialogue: 0,0:13:55.81,0:13:56.99,Default,,0,0,0,,in those additional elements.
Dialogue: 0,0:13:57.27,0:13:58.14,Default,,0,0,0,,Right. So instead of writing
Dialogue: 0,0:13:58.14,0:13:59.72,Default,,0,0,0,,code to place each scenery
Dialogue: 0,0:13:59.72,0:14:00.88,Default,,0,0,0,,element, we can do it in the
Dialogue: 0,0:14:00.88,0:14:01.97,Default,,0,0,0,,Scene Editor now because it
Dialogue: 0,0:14:01.97,0:14:03.05,Default,,0,0,0,,makes much more sense.
Dialogue: 0,0:14:03.61,0:14:04.86,Default,,0,0,0,,So if we look at that in the
Dialogue: 0,0:14:04.86,0:14:07.33,Default,,0,0,0,,SceneKit Scene Editor, it looks
Dialogue: 0,0:14:07.33,0:14:10.05,Default,,0,0,0,,great, but now we're investing a
Dialogue: 0,0:14:10.05,0:14:11.72,Default,,0,0,0,,ton of time and effort into each
Dialogue: 0,0:14:11.72,0:14:12.37,Default,,0,0,0,,individual map.
Dialogue: 0,0:14:12.88,0:14:14.63,Default,,0,0,0,,You can see that by the node
Dialogue: 0,0:14:14.63,0:14:17.42,Default,,0,0,0,,hierarchy on the left there.
Dialogue: 0,0:14:17.52,0:14:19.63,Default,,0,0,0,,So the problem is you still want
Dialogue: 0,0:14:19.63,0:14:20.61,Default,,0,0,0,,to keep some amount of
Dialogue: 0,0:14:20.61,0:14:21.25,Default,,0,0,0,,flexibility.
Dialogue: 0,0:14:21.25,0:14:22.54,Default,,0,0,0,,Make sure if the artist comes in
Dialogue: 0,0:14:22.54,0:14:23.49,Default,,0,0,0,,next week and says I have a new
Dialogue: 0,0:14:23.49,0:14:24.48,Default,,0,0,0,,waterfall that would look so
Dialogue: 0,0:14:24.48,0:14:25.92,Default,,0,0,0,,much better, you're not changing
Dialogue: 0,0:14:25.92,0:14:27.23,Default,,0,0,0,,out at 81 maps.
Dialogue: 0,0:14:27.57,0:14:29.52,Default,,0,0,0,,And the way to do that, if we
Dialogue: 0,0:14:29.52,0:14:30.66,Default,,0,0,0,,look closely at the waterfall,
Dialogue: 0,0:14:30.66,0:14:32.74,Default,,0,0,0,,is to use a technique called
Dialogue: 0,0:14:32.74,0:14:33.60,Default,,0,0,0,,reference nodes.
Dialogue: 0,0:14:34.16,0:14:36.26,Default,,0,0,0,,So these are the water nodes in
Dialogue: 0,0:14:36.26,0:14:37.92,Default,,0,0,0,,our scene and the arrow
Dialogue: 0,0:14:37.92,0:14:39.32,Default,,0,0,0,,indicates that they're being
Dialogue: 0,0:14:39.32,0:14:41.13,Default,,0,0,0,,referenced out to a single SCN
Dialogue: 0,0:14:41.13,0:14:41.47,Default,,0,0,0,,file.
Dialogue: 0,0:14:41.79,0:14:43.06,Default,,0,0,0,,So you update that file in one
Dialogue: 0,0:14:43.06,0:14:44.48,Default,,0,0,0,,place and it propagates through
Dialogue: 0,0:14:44.48,0:14:45.24,Default,,0,0,0,,all your maps.
Dialogue: 0,0:14:45.76,0:14:48.88,Default,,0,0,0,,Now, that's not all there is to
Dialogue: 0,0:14:48.88,0:14:49.29,Default,,0,0,0,,water.
Dialogue: 0,0:14:49.84,0:14:51.05,Default,,0,0,0,,If we take a closer look at that
Dialogue: 0,0:14:51.05,0:14:54.08,Default,,0,0,0,,SCN file, water kind of also has
Dialogue: 0,0:14:54.08,0:14:55.24,Default,,0,0,0,,to move for it to be
Dialogue: 0,0:14:55.24,0:14:55.68,Default,,0,0,0,,interesting.
Dialogue: 0,0:14:55.77,0:14:56.81,Default,,0,0,0,,Right. The artist did a great
Dialogue: 0,0:14:56.81,0:14:57.87,Default,,0,0,0,,job here, the texture looks
Dialogue: 0,0:14:57.87,0:14:59.91,Default,,0,0,0,,amazing, but it's not real.
Dialogue: 0,0:15:01.33,0:15:02.90,Default,,0,0,0,,So in order to accomplish moving
Dialogue: 0,0:15:02.90,0:15:04.05,Default,,0,0,0,,the water, we're using a
Dialogue: 0,0:15:04.05,0:15:05.98,Default,,0,0,0,,technique, a geometry modifier,
Dialogue: 0,0:15:06.03,0:15:08.24,Default,,0,0,0,,actually writing a shader, and
Dialogue: 0,0:15:08.31,0:15:09.97,Default,,0,0,0,,you access that by the button
Dialogue: 0,0:15:09.97,0:15:11.42,Default,,0,0,0,,down in the lower right here.
Dialogue: 0,0:15:12.49,0:15:13.41,Default,,0,0,0,,I'll zoom in on it for you a
Dialogue: 0,0:15:13.41,0:15:13.86,Default,,0,0,0,,little bit.
Dialogue: 0,0:15:13.86,0:15:15.43,Default,,0,0,0,,It's going to be hard to see.
Dialogue: 0,0:15:15.43,0:15:16.62,Default,,0,0,0,,And that will bring up a tray,
Dialogue: 0,0:15:16.84,0:15:19.10,Default,,0,0,0,,new in Xcode 9, where you can
Dialogue: 0,0:15:19.10,0:15:20.79,Default,,0,0,0,,modify -- or you can specify
Dialogue: 0,0:15:20.79,0:15:22.77,Default,,0,0,0,,your geometry modifier built off
Dialogue: 0,0:15:22.77,0:15:24.65,Default,,0,0,0,,this SCN shader geometry type
Dialogue: 0,0:15:24.82,0:15:25.86,Default,,0,0,0,,provided to you by SceneKit.
Dialogue: 0,0:15:26.64,0:15:28.47,Default,,0,0,0,,Now, all this is doing is moving
Dialogue: 0,0:15:28.47,0:15:29.31,Default,,0,0,0,,the texture around the
Dialogue: 0,0:15:29.31,0:15:31.38,Default,,0,0,0,,waterfall, but it adds a great
Dialogue: 0,0:15:31.38,0:15:31.73,Default,,0,0,0,,effect.
Dialogue: 0,0:15:31.86,0:15:32.98,Default,,0,0,0,,So let's check it out in action.
Dialogue: 0,0:15:39.05,0:15:39.42,Default,,0,0,0,,There we go.
Dialogue: 0,0:15:40.02,0:15:41.26,Default,,0,0,0,,So now the water actually is
Dialogue: 0,0:15:41.26,0:15:42.56,Default,,0,0,0,,flowing, you can just see the
Dialogue: 0,0:15:42.56,0:15:43.91,Default,,0,0,0,,textures moving around and it
Dialogue: 0,0:15:44.05,0:15:44.84,Default,,0,0,0,,adds this great effect.
Dialogue: 0,0:15:45.21,0:15:46.85,Default,,0,0,0,,And we use that same technique
Dialogue: 0,0:15:46.88,0:15:48.54,Default,,0,0,0,,for the vines that sway in the
Dialogue: 0,0:15:48.63,0:15:49.93,Default,,0,0,0,,scene and for the grass that
Dialogue: 0,0:15:49.97,0:15:51.18,Default,,0,0,0,,blows in the breeze.
Dialogue: 0,0:15:51.51,0:15:52.99,Default,,0,0,0,,So this can add a lot of life to
Dialogue: 0,0:15:53.03,0:15:55.00,Default,,0,0,0,,your scene and it's a great
Dialogue: 0,0:15:55.00,0:15:56.57,Default,,0,0,0,,technique for you to try out.
Dialogue: 0,0:15:57.16,0:15:58.03,Default,,0,0,0,,That's three.
Dialogue: 0,0:15:58.94,0:16:00.32,Default,,0,0,0,,And we've really been focused on
Dialogue: 0,0:16:00.32,0:16:00.99,Default,,0,0,0,,the visuals.
Dialogue: 0,0:16:01.19,0:16:03.05,Default,,0,0,0,,We've taken a number of stops to
Dialogue: 0,0:16:03.05,0:16:04.05,Default,,0,0,0,,figure out how you can make that
Dialogue: 0,0:16:04.05,0:16:05.56,Default,,0,0,0,,great, but there's a whole other
Dialogue: 0,0:16:05.56,0:16:07.62,Default,,0,0,0,,aspect you have to consider and
Dialogue: 0,0:16:07.62,0:16:09.16,Default,,0,0,0,,that's what the scene would look
Dialogue: 0,0:16:09.16,0:16:10.28,Default,,0,0,0,,like to a visually-impaired
Dialogue: 0,0:16:10.28,0:16:10.59,Default,,0,0,0,,user.
Dialogue: 0,0:16:11.86,0:16:13.57,Default,,0,0,0,,So when you're trying to design
Dialogue: 0,0:16:13.57,0:16:15.64,Default,,0,0,0,,a great experience in VoiceOver,
Dialogue: 0,0:16:16.52,0:16:17.68,Default,,0,0,0,,you want to focus on things
Dialogue: 0,0:16:17.79,0:16:18.67,Default,,0,0,0,,other than the visuals
Dialogue: 0,0:16:18.67,0:16:20.77,Default,,0,0,0,,obviously, but without
Dialogue: 0,0:16:20.77,0:16:22.16,Default,,0,0,0,,describing everything we did, I
Dialogue: 0,0:16:22.16,0:16:23.54,Default,,0,0,0,,first want you to just listen to
Dialogue: 0,0:16:23.54,0:16:23.98,Default,,0,0,0,,the experience.
Dialogue: 0,0:16:24.52,0:16:28.76,Default,,0,0,0,,[ Music ]
Dialogue: 0,0:16:29.26,0:16:30.27,Default,,0,0,0,,>> VoiceOver on.
Dialogue: 0,0:16:30.56,0:16:31.53,Default,,0,0,0,,Landscape.
Dialogue: 0,0:16:31.53,0:16:33.88,Default,,0,0,0,,The world is five columns by
Dialogue: 0,0:16:33.88,0:16:35.93,Default,,0,0,0,,five rows.
Dialogue: 0,0:16:35.93,0:16:37.72,Default,,0,0,0,,Column 0, row 0, [inaudible] at
Dialogue: 0,0:16:37.81,0:16:39.82,Default,,0,0,0,,height 0 facing north.
Dialogue: 0,0:16:39.89,0:16:41.42,Default,,0,0,0,,Double attach to switch
Dialogue: 0,0:16:41.42,0:16:42.16,Default,,0,0,0,,characters.
Dialogue: 0,0:16:42.22,0:16:44.85,Default,,0,0,0,,Column 0, row 1, gem at height
Dialogue: 0,0:16:44.85,0:16:44.98,Default,,0,0,0,,0.
Dialogue: 0,0:16:45.51,0:16:47.51,Default,,0,0,0,,[ Music ]
Dialogue: 0,0:16:52.05,0:16:55.22,Default,,0,0,0,,>> So we did a number of things
Dialogue: 0,0:16:55.22,0:16:56.65,Default,,0,0,0,,to support VoiceOver in Learn to
Dialogue: 0,0:16:56.65,0:16:58.86,Default,,0,0,0,,Code, but the first thing I want
Dialogue: 0,0:16:58.86,0:17:01.05,Default,,0,0,0,,you to notice is we're actually
Dialogue: 0,0:17:01.05,0:17:02.66,Default,,0,0,0,,focusing on a great nonvisual
Dialogue: 0,0:17:02.66,0:17:03.28,Default,,0,0,0,,experience.
Dialogue: 0,0:17:03.31,0:17:05.05,Default,,0,0,0,,By adding music, by adding
Dialogue: 0,0:17:05.05,0:17:07.14,Default,,0,0,0,,character noises, you make the
Dialogue: 0,0:17:07.14,0:17:10.01,Default,,0,0,0,,scene auditorily rich.
Dialogue: 0,0:17:11.54,0:17:14.64,Default,,0,0,0,,There's other things we added to
Dialogue: 0,0:17:14.64,0:17:16.24,Default,,0,0,0,,VoiceOver, and to go for a deep
Dialogue: 0,0:17:16.24,0:17:17.83,Default,,0,0,0,,dive on those techniques, you
Dialogue: 0,0:17:17.83,0:17:19.16,Default,,0,0,0,,can check out a great talk this
Dialogue: 0,0:17:19.16,0:17:20.43,Default,,0,0,0,,year about how to make your
Dialogue: 0,0:17:20.43,0:17:21.75,Default,,0,0,0,,media and games accessible.
Dialogue: 0,0:17:21.75,0:17:24.01,Default,,0,0,0,,The one that was really
Dialogue: 0,0:17:24.01,0:17:25.73,Default,,0,0,0,,important for us is actually
Dialogue: 0,0:17:25.73,0:17:26.93,Default,,0,0,0,,describing the important
Dialogue: 0,0:17:26.93,0:17:29.07,Default,,0,0,0,,locations using VoiceOver, and
Dialogue: 0,0:17:29.07,0:17:30.58,Default,,0,0,0,,the reason I want to show you
Dialogue: 0,0:17:30.58,0:17:31.91,Default,,0,0,0,,this in more detail is because
Dialogue: 0,0:17:31.91,0:17:33.49,Default,,0,0,0,,it's surprisingly easy to do.
Dialogue: 0,0:17:34.41,0:17:36.18,Default,,0,0,0,,So just like in your UIKit apps
Dialogue: 0,0:17:36.87,0:17:37.80,Default,,0,0,0,,we're overriding an
Dialogue: 0,0:17:37.80,0:17:40.80,Default,,0,0,0,,accessibility element so that we
Dialogue: 0,0:17:40.80,0:17:42.24,Default,,0,0,0,,can provide a custom label.
Dialogue: 0,0:17:42.83,0:17:44.80,Default,,0,0,0,,In this case we're providing a
Dialogue: 0,0:17:44.80,0:17:46.86,Default,,0,0,0,,label which is updated with the
Dialogue: 0,0:17:46.86,0:17:48.15,Default,,0,0,0,,current contents of the world.
Dialogue: 0,0:17:48.50,0:17:51.09,Default,,0,0,0,,So this is basically the same
Dialogue: 0,0:17:51.09,0:17:52.42,Default,,0,0,0,,technique you're already used to
Dialogue: 0,0:17:52.62,0:17:54.26,Default,,0,0,0,,in UIKit, and it really is that
Dialogue: 0,0:17:54.26,0:17:54.60,Default,,0,0,0,,simple.
Dialogue: 0,0:17:54.71,0:17:55.64,Default,,0,0,0,,You create one of those
Dialogue: 0,0:17:55.64,0:17:59.28,Default,,0,0,0,,elements, you specify its frame,
Dialogue: 0,0:17:59.70,0:18:00.88,Default,,0,0,0,,we're using projectPoint from
Dialogue: 0,0:18:00.88,0:18:03.01,Default,,0,0,0,,SceneKit to get from 3D to 2D,
Dialogue: 0,0:18:03.61,0:18:04.86,Default,,0,0,0,,and you add that element to the
Dialogue: 0,0:18:04.86,0:18:05.17,Default,,0,0,0,,view.
Dialogue: 0,0:18:06.56,0:18:08.24,Default,,0,0,0,,So my point is even though 3D
Dialogue: 0,0:18:08.31,0:18:09.43,Default,,0,0,0,,seems really tough to make
Dialogue: 0,0:18:09.43,0:18:11.61,Default,,0,0,0,,accessible, it's quite easy and
Dialogue: 0,0:18:11.61,0:18:12.56,Default,,0,0,0,,it's already techniques you're
Dialogue: 0,0:18:12.56,0:18:13.33,Default,,0,0,0,,familiar with.
Dialogue: 0,0:18:14.04,0:18:15.30,Default,,0,0,0,,So there are really three main
Dialogue: 0,0:18:15.30,0:18:16.71,Default,,0,0,0,,reasons to support it.
Dialogue: 0,0:18:17.55,0:18:19.37,Default,,0,0,0,,One, it's great for your users.
Dialogue: 0,0:18:19.44,0:18:20.40,Default,,0,0,0,,It's probably one of the most
Dialogue: 0,0:18:20.40,0:18:22.16,Default,,0,0,0,,rewarding aspects, that I
Dialogue: 0,0:18:22.16,0:18:23.13,Default,,0,0,0,,thought, of working on this
Dialogue: 0,0:18:23.13,0:18:23.54,Default,,0,0,0,,project.
Dialogue: 0,0:18:24.72,0:18:25.49,Default,,0,0,0,,One of the aspects that I
Dialogue: 0,0:18:25.49,0:18:26.30,Default,,0,0,0,,thought was most rewarding.
Dialogue: 0,0:18:26.30,0:18:26.68,Default,,0,0,0,,Excuse me.
Dialogue: 0,0:18:26.79,0:18:28.94,Default,,0,0,0,,Two, is that it's just easy to
Dialogue: 0,0:18:28.94,0:18:29.27,Default,,0,0,0,,do.
Dialogue: 0,0:18:29.97,0:18:31.93,Default,,0,0,0,,It's many of the familiar things
Dialogue: 0,0:18:31.93,0:18:32.86,Default,,0,0,0,,you're used to from UIKit
Dialogue: 0,0:18:32.86,0:18:33.39,Default,,0,0,0,,development.
Dialogue: 0,0:18:33.64,0:18:34.98,Default,,0,0,0,,And three, just like there are
Dialogue: 0,0:18:34.98,0:18:36.81,Default,,0,0,0,,no excuses for not making your
Dialogue: 0,0:18:36.81,0:18:39.27,Default,,0,0,0,,apps in UIKit accessible, there
Dialogue: 0,0:18:39.27,0:18:40.60,Default,,0,0,0,,really should be no excuses for
Dialogue: 0,0:18:40.60,0:18:41.44,Default,,0,0,0,,doing so in 3D.
Dialogue: 0,0:18:42.41,0:18:43.95,Default,,0,0,0,,So if you want to see this code
Dialogue: 0,0:18:43.95,0:18:46.36,Default,,0,0,0,,in full detail, you can always
Dialogue: 0,0:18:46.36,0:18:47.71,Default,,0,0,0,,check out the source for Learn
Dialogue: 0,0:18:47.71,0:18:49.62,Default,,0,0,0,,to Code by diving into the
Dialogue: 0,0:18:49.62,0:18:51.55,Default,,0,0,0,,auxiliary sources in the
Dialogue: 0,0:18:51.55,0:18:53.02,Default,,0,0,0,,Playground book, and this file
Dialogue: 0,0:18:53.02,0:18:54.10,Default,,0,0,0,,actually sits in
Dialogue: 0,0:18:54.10,0:18:56.25,Default,,0,0,0,,Accessibilityextensions.swift.
Dialogue: 0,0:18:57.20,0:18:59.00,Default,,0,0,0,,So that is iterating.
Dialogue: 0,0:18:59.57,0:19:01.19,Default,,0,0,0,,We talked about how you should
Dialogue: 0,0:19:01.19,0:19:02.70,Default,,0,0,0,,separate your data from the
Dialogue: 0,0:19:02.70,0:19:03.75,Default,,0,0,0,,visuals of your scene.
Dialogue: 0,0:19:03.97,0:19:05.49,Default,,0,0,0,,Right. We did that for modeling
Dialogue: 0,0:19:05.49,0:19:06.88,Default,,0,0,0,,the world, but also how we did
Dialogue: 0,0:19:06.88,0:19:07.86,Default,,0,0,0,,the stair animation.
Dialogue: 0,0:19:08.38,0:19:11.38,Default,,0,0,0,,You should value flexibility
Dialogue: 0,0:19:11.38,0:19:12.20,Default,,0,0,0,,even at this phase.
Dialogue: 0,0:19:12.20,0:19:13.25,Default,,0,0,0,,So when you're putting all that
Dialogue: 0,0:19:13.25,0:19:14.29,Default,,0,0,0,,time and effort into your
Dialogue: 0,0:19:14.29,0:19:15.38,Default,,0,0,0,,levels, make sure you're doing
Dialogue: 0,0:19:15.38,0:19:16.63,Default,,0,0,0,,things like using reference
Dialogue: 0,0:19:16.63,0:19:18.08,Default,,0,0,0,,nodes so that you still have
Dialogue: 0,0:19:18.08,0:19:18.96,Default,,0,0,0,,some flexibility.
Dialogue: 0,0:19:19.91,0:19:21.82,Default,,0,0,0,,And then finally, make sure you
Dialogue: 0,0:19:21.82,0:19:23.37,Default,,0,0,0,,audit that accessibility support
Dialogue: 0,0:19:23.37,0:19:23.75,Default,,0,0,0,,early.
Dialogue: 0,0:19:24.06,0:19:25.05,Default,,0,0,0,,It's not something that can be
Dialogue: 0,0:19:25.05,0:19:26.58,Default,,0,0,0,,bolted on at the end, and it's
Dialogue: 0,0:19:26.58,0:19:28.40,Default,,0,0,0,,surprisingly easy to do if you
Dialogue: 0,0:19:28.40,0:19:30.45,Default,,0,0,0,,plan for it.
Dialogue: 0,0:19:30.71,0:19:32.63,Default,,0,0,0,,Now to talk about how we took
Dialogue: 0,0:19:32.63,0:19:34.74,Default,,0,0,0,,these design time assets and
Dialogue: 0,0:19:34.74,0:19:35.87,Default,,0,0,0,,really tuned them up to make
Dialogue: 0,0:19:35.87,0:19:37.00,Default,,0,0,0,,them super performant, I'm going
Dialogue: 0,0:19:37.00,0:19:37.74,Default,,0,0,0,,to invite Lamont up to the
Dialogue: 0,0:19:37.74,0:19:37.89,Default,,0,0,0,,stage.
Dialogue: 0,0:19:38.52,0:19:41.12,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:19:41.62,0:19:42.24,Default,,0,0,0,,>> Thank you, Michael.
Dialogue: 0,0:19:42.68,0:19:44.59,Default,,0,0,0,,That's great [applause].
Dialogue: 0,0:19:45.05,0:19:46.16,Default,,0,0,0,,Hello everyone.
Dialogue: 0,0:19:46.71,0:19:47.33,Default,,0,0,0,,I'm Lamont.
Dialogue: 0,0:19:47.33,0:19:48.40,Default,,0,0,0,,I'm an engineer on the Swift
Dialogue: 0,0:19:48.40,0:19:50.74,Default,,0,0,0,,Playgrounds' Content Team, and
Dialogue: 0,0:19:50.74,0:19:51.83,Default,,0,0,0,,today I'm going to talk to you
Dialogue: 0,0:19:51.83,0:19:52.91,Default,,0,0,0,,about how you can improve the
Dialogue: 0,0:19:52.91,0:19:53.92,Default,,0,0,0,,performance of your SceneKit
Dialogue: 0,0:19:53.92,0:19:56.70,Default,,0,0,0,,apps in terms of frame rate and
Dialogue: 0,0:19:56.70,0:19:57.47,Default,,0,0,0,,user experience.
Dialogue: 0,0:19:59.78,0:20:02.63,Default,,0,0,0,,When we first started developing
Dialogue: 0,0:20:02.63,0:20:04.31,Default,,0,0,0,,Learn to Code, one of the things
Dialogue: 0,0:20:04.31,0:20:05.60,Default,,0,0,0,,that was critical for us was to
Dialogue: 0,0:20:05.60,0:20:07.14,Default,,0,0,0,,have a really rich and detailed
Dialogue: 0,0:20:07.14,0:20:09.03,Default,,0,0,0,,world, and as you can see here,
Dialogue: 0,0:20:09.03,0:20:10.26,Default,,0,0,0,,that's exactly what we have.
Dialogue: 0,0:20:11.01,0:20:13.81,Default,,0,0,0,,The waterfalls look realistic,
Dialogue: 0,0:20:13.81,0:20:15.50,Default,,0,0,0,,the shadows behind the
Dialogue: 0,0:20:15.75,0:20:17.36,Default,,0,0,0,,staircases look pretty good, the
Dialogue: 0,0:20:17.36,0:20:19.31,Default,,0,0,0,,colors are rich and vivid.
Dialogue: 0,0:20:19.31,0:20:21.07,Default,,0,0,0,,We even have nice statues hidden
Dialogue: 0,0:20:21.07,0:20:22.05,Default,,0,0,0,,in the waterfalls there.
Dialogue: 0,0:20:23.55,0:20:25.90,Default,,0,0,0,,But as you know, a good-looking
Dialogue: 0,0:20:25.90,0:20:28.97,Default,,0,0,0,,application isn't the only
Dialogue: 0,0:20:28.97,0:20:31.87,Default,,0,0,0,,aspect of a great experience.
Dialogue: 0,0:20:31.99,0:20:32.95,Default,,0,0,0,,It's also performance.
Dialogue: 0,0:20:34.13,0:20:35.24,Default,,0,0,0,,So what does that actually mean?
Dialogue: 0,0:20:35.24,0:20:38.16,Default,,0,0,0,,To have a good experience we
Dialogue: 0,0:20:38.16,0:20:40.06,Default,,0,0,0,,actually want to have a really
Dialogue: 0,0:20:40.06,0:20:41.03,Default,,0,0,0,,responsive frame rate.
Dialogue: 0,0:20:41.20,0:20:42.33,Default,,0,0,0,,Your users are interacting with
Dialogue: 0,0:20:42.33,0:20:43.24,Default,,0,0,0,,your application, they're
Dialogue: 0,0:20:43.31,0:20:44.61,Default,,0,0,0,,pinching, they're gesturing,
Dialogue: 0,0:20:45.01,0:20:45.88,Default,,0,0,0,,they're adding things to the
Dialogue: 0,0:20:45.88,0:20:46.92,Default,,0,0,0,,scene, removing things.
Dialogue: 0,0:20:47.31,0:20:48.39,Default,,0,0,0,,You want this to be really fast
Dialogue: 0,0:20:48.39,0:20:49.05,Default,,0,0,0,,and very fluid.
Dialogue: 0,0:20:49.10,0:20:51.84,Default,,0,0,0,,So I'm going to show you how we
Dialogue: 0,0:20:51.84,0:20:52.81,Default,,0,0,0,,actually increased the
Dialogue: 0,0:20:52.81,0:20:53.59,Default,,0,0,0,,performance of our application
Dialogue: 0,0:20:53.59,0:20:53.98,Default,,0,0,0,,in Learn to Code.
Dialogue: 0,0:20:58.05,0:20:59.55,Default,,0,0,0,,Let's take a look at one of our
Dialogue: 0,0:20:59.55,0:21:01.14,Default,,0,0,0,,geometrically complex scenes.
Dialogue: 0,0:21:01.42,0:21:02.40,Default,,0,0,0,,And when I say geometrically
Dialogue: 0,0:21:02.40,0:21:05.12,Default,,0,0,0,,complex, what I mean is this
Dialogue: 0,0:21:05.12,0:21:06.84,Default,,0,0,0,,scene is comprised of thousands
Dialogue: 0,0:21:06.84,0:21:09.80,Default,,0,0,0,,of individual geometry parts.
Dialogue: 0,0:21:11.18,0:21:12.70,Default,,0,0,0,,Now, each of these parts have to
Dialogue: 0,0:21:12.70,0:21:14.33,Default,,0,0,0,,be rendered separately by the
Dialogue: 0,0:21:14.33,0:21:14.89,Default,,0,0,0,,GPU.
Dialogue: 0,0:21:16.34,0:21:18.32,Default,,0,0,0,,So let's take a look at what the
Dialogue: 0,0:21:18.32,0:21:19.44,Default,,0,0,0,,performance of our application
Dialogue: 0,0:21:19.44,0:21:19.72,Default,,0,0,0,,is.
Dialogue: 0,0:21:20.64,0:21:22.16,Default,,0,0,0,,SceneKit has a really useful
Dialogue: 0,0:21:22.16,0:21:24.06,Default,,0,0,0,,tool called the Debug Statistics
Dialogue: 0,0:21:24.06,0:21:26.95,Default,,0,0,0,,View and I want to zoom in on it
Dialogue: 0,0:21:26.95,0:21:29.00,Default,,0,0,0,,now and take a look at it.
Dialogue: 0,0:21:29.65,0:21:30.69,Default,,0,0,0,,Now, you can enable this in your
Dialogue: 0,0:21:30.69,0:21:32.97,Default,,0,0,0,,applications by simply setting
Dialogue: 0,0:21:32.97,0:21:35.24,Default,,0,0,0,,the showStatistics property on
Dialogue: 0,0:21:35.24,0:21:36.31,Default,,0,0,0,,your view to true.
Dialogue: 0,0:21:36.34,0:21:39.94,Default,,0,0,0,,If we take a look at some of the
Dialogue: 0,0:21:39.94,0:21:41.93,Default,,0,0,0,,more interesting numbers on this
Dialogue: 0,0:21:42.20,0:21:44.17,Default,,0,0,0,,debug view, you'll notice we
Dialogue: 0,0:21:44.17,0:21:46.11,Default,,0,0,0,,have a low frame rate, 29 frames
Dialogue: 0,0:21:46.11,0:21:46.57,Default,,0,0,0,,per second.
Dialogue: 0,0:21:47.35,0:21:48.61,Default,,0,0,0,,That's not very great.
Dialogue: 0,0:21:49.01,0:21:50.35,Default,,0,0,0,,What we actually really want is
Dialogue: 0,0:21:50.35,0:21:51.73,Default,,0,0,0,,60 frames per second minimum.
Dialogue: 0,0:21:52.33,0:21:54.63,Default,,0,0,0,,This allows us to get that fluid
Dialogue: 0,0:21:54.63,0:21:55.74,Default,,0,0,0,,interaction as the users are
Dialogue: 0,0:21:55.74,0:21:57.19,Default,,0,0,0,,pinching and gesturing around.
Dialogue: 0,0:21:59.69,0:22:00.93,Default,,0,0,0,,Well, what contributes to this
Dialogue: 0,0:22:00.93,0:22:01.55,Default,,0,0,0,,low frame rate?
Dialogue: 0,0:22:02.26,0:22:03.37,Default,,0,0,0,,Well, let's break it down.
Dialogue: 0,0:22:03.37,0:22:05.58,Default,,0,0,0,,What are we doing on each frame?
Dialogue: 0,0:22:06.98,0:22:08.38,Default,,0,0,0,,This number here, the rendering
Dialogue: 0,0:22:08.38,0:22:10.11,Default,,0,0,0,,number, is the amount of time
Dialogue: 0,0:22:10.11,0:22:11.79,Default,,0,0,0,,we're taking to render one
Dialogue: 0,0:22:11.79,0:22:13.16,Default,,0,0,0,,complete frame.
Dialogue: 0,0:22:13.16,0:22:16.68,Default,,0,0,0,,It looks like we're taking 20.4
Dialogue: 0,0:22:16.68,0:22:17.32,Default,,0,0,0,,milliseconds.
Dialogue: 0,0:22:18.43,0:22:19.65,Default,,0,0,0,,That's pretty slow.
Dialogue: 0,0:22:19.95,0:22:21.45,Default,,0,0,0,,If you do the math, if you want
Dialogue: 0,0:22:21.45,0:22:22.77,Default,,0,0,0,,to hit 60 frames per second, you
Dialogue: 0,0:22:22.77,0:22:23.92,Default,,0,0,0,,have to be under 16
Dialogue: 0,0:22:23.92,0:22:24.52,Default,,0,0,0,,milliseconds.
Dialogue: 0,0:22:25.92,0:22:27.02,Default,,0,0,0,,So what are we doing that's
Dialogue: 0,0:22:27.05,0:22:28.23,Default,,0,0,0,,taking 20 milliseconds?
Dialogue: 0,0:22:29.44,0:22:31.53,Default,,0,0,0,,Well, to aid in that, one thing
Dialogue: 0,0:22:31.53,0:22:32.53,Default,,0,0,0,,we can look at is the number of
Dialogue: 0,0:22:32.53,0:22:33.80,Default,,0,0,0,,draw calls, as you can see
Dialogue: 0,0:22:33.80,0:22:37.10,Default,,0,0,0,,highlighted by this diamond.
Dialogue: 0,0:22:37.10,0:22:38.91,Default,,0,0,0,,Now, what's a draw call?
Dialogue: 0,0:22:39.67,0:22:40.96,Default,,0,0,0,,A quick refresher.
Dialogue: 0,0:22:41.74,0:22:42.91,Default,,0,0,0,,When you want to draw objects in
Dialogue: 0,0:22:42.91,0:22:44.45,Default,,0,0,0,,a scene, the CPU has to tell
Dialogue: 0,0:22:44.45,0:22:46.29,Default,,0,0,0,,GPU, hey, draw this mesh.
Dialogue: 0,0:22:47.23,0:22:48.70,Default,,0,0,0,,The CPU draws this mesh or a
Dialogue: 0,0:22:48.70,0:22:50.74,Default,,0,0,0,,geometry object, and that's one
Dialogue: 0,0:22:50.74,0:22:51.42,Default,,0,0,0,,draw call.
Dialogue: 0,0:22:51.89,0:22:54.14,Default,,0,0,0,,It looks like we have 877 of
Dialogue: 0,0:22:54.14,0:22:54.36,Default,,0,0,0,,them.
Dialogue: 0,0:22:55.38,0:22:56.35,Default,,0,0,0,,That's quite a bit of draw
Dialogue: 0,0:22:56.35,0:22:56.66,Default,,0,0,0,,calls.
Dialogue: 0,0:22:56.89,0:22:58.62,Default,,0,0,0,,So what are some of the things
Dialogue: 0,0:22:58.62,0:22:59.66,Default,,0,0,0,,we could do to actually increase
Dialogue: 0,0:22:59.66,0:23:01.43,Default,,0,0,0,,the performance of our app?
Dialogue: 0,0:23:02.02,0:23:03.57,Default,,0,0,0,,Well, I'm going to share with
Dialogue: 0,0:23:03.57,0:23:04.16,Default,,0,0,0,,you one tip.
Dialogue: 0,0:23:05.53,0:23:06.48,Default,,0,0,0,,The theme throughout the rest of
Dialogue: 0,0:23:06.48,0:23:08.38,Default,,0,0,0,,the talk is how do we reduce our
Dialogue: 0,0:23:08.38,0:23:09.15,Default,,0,0,0,,draw call count.
Dialogue: 0,0:23:09.84,0:23:13.77,Default,,0,0,0,,I'm going to talk to you about
Dialogue: 0,0:23:13.77,0:23:17.86,Default,,0,0,0,,that in three distinct phases;
Dialogue: 0,0:23:18.02,0:23:19.91,Default,,0,0,0,,geometry, which are those meshes
Dialogue: 0,0:23:19.91,0:23:21.01,Default,,0,0,0,,that comprise the scene;
Dialogue: 0,0:23:22.22,0:23:23.95,Default,,0,0,0,,materials, which give our scene
Dialogue: 0,0:23:23.95,0:23:27.13,Default,,0,0,0,,a nice look; and lighting, which
Dialogue: 0,0:23:27.13,0:23:27.84,Default,,0,0,0,,kind of brings our scene to
Dialogue: 0,0:23:27.84,0:23:27.94,Default,,0,0,0,,life.
Dialogue: 0,0:23:31.05,0:23:33.70,Default,,0,0,0,,Let's take a look at an example
Dialogue: 0,0:23:33.70,0:23:34.80,Default,,0,0,0,,level that we showed earlier.
Dialogue: 0,0:23:36.02,0:23:38.80,Default,,0,0,0,,Now, this scene has lots of
Dialogue: 0,0:23:38.80,0:23:39.65,Default,,0,0,0,,individual parts.
Dialogue: 0,0:23:39.65,0:23:42.81,Default,,0,0,0,,I want to focus in on one type,
Dialogue: 0,0:23:43.74,0:23:45.30,Default,,0,0,0,,the grass.
Dialogue: 0,0:23:45.41,0:23:49.15,Default,,0,0,0,,Now, if you look closely, and
Dialogue: 0,0:23:49.15,0:23:50.12,Default,,0,0,0,,you're good at math, you can
Dialogue: 0,0:23:50.12,0:23:51.79,Default,,0,0,0,,count, there are roughly 30
Dialogue: 0,0:23:51.79,0:23:53.14,Default,,0,0,0,,individual tiles in this screen,
Dialogue: 0,0:23:54.23,0:23:57.11,Default,,0,0,0,,each have their own mesh, so the
Dialogue: 0,0:23:57.11,0:23:58.64,Default,,0,0,0,,CPU has to tell the GPU to
Dialogue: 0,0:23:58.64,0:24:01.73,Default,,0,0,0,,render these things one-by-one,
Dialogue: 0,0:24:01.96,0:24:03.40,Default,,0,0,0,,so we get 30 draw calls.
Dialogue: 0,0:24:03.40,0:24:05.29,Default,,0,0,0,,Now, this is a small scene.
Dialogue: 0,0:24:05.29,0:24:06.45,Default,,0,0,0,,Imagine if you wanted to have
Dialogue: 0,0:24:06.45,0:24:08.58,Default,,0,0,0,,like a huge expansive world with
Dialogue: 0,0:24:08.64,0:24:09.65,Default,,0,0,0,,thousands of these tiles.
Dialogue: 0,0:24:09.65,0:24:10.65,Default,,0,0,0,,Now we're going to have
Dialogue: 0,0:24:10.65,0:24:11.65,Default,,0,0,0,,thousands of draw calls.
Dialogue: 0,0:24:11.91,0:24:12.76,Default,,0,0,0,,Imagine what happens to our
Dialogue: 0,0:24:12.76,0:24:15.30,Default,,0,0,0,,frame rate then.
Dialogue: 0,0:24:16.14,0:24:18.50,Default,,0,0,0,,One thing you might notice is
Dialogue: 0,0:24:19.27,0:24:20.36,Default,,0,0,0,,these grass tiles may not
Dialogue: 0,0:24:20.36,0:24:25.01,Default,,0,0,0,,actually move, so if they don't
Dialogue: 0,0:24:25.31,0:24:26.82,Default,,0,0,0,,move, why are we drawing so many
Dialogue: 0,0:24:26.92,0:24:27.38,Default,,0,0,0,,of them?
Dialogue: 0,0:24:27.66,0:24:29.66,Default,,0,0,0,,Could we draw perhaps one big
Dialogue: 0,0:24:29.66,0:24:30.01,Default,,0,0,0,,mesh?
Dialogue: 0,0:24:30.57,0:24:33.17,Default,,0,0,0,,That's possible.
Dialogue: 0,0:24:33.75,0:24:36.71,Default,,0,0,0,,There's one rule I want you to
Dialogue: 0,0:24:36.71,0:24:38.68,Default,,0,0,0,,remember, is when you're talking
Dialogue: 0,0:24:38.68,0:24:41.47,Default,,0,0,0,,to the GPU, there's one draw
Dialogue: 0,0:24:41.47,0:24:42.25,Default,,0,0,0,,call per mesh.
Dialogue: 0,0:24:42.77,0:24:43.88,Default,,0,0,0,,You have a thousand meshes, you
Dialogue: 0,0:24:43.88,0:24:44.89,Default,,0,0,0,,have a thousand draw calls.
Dialogue: 0,0:24:46.07,0:24:47.74,Default,,0,0,0,,So if we look at our grass tile
Dialogue: 0,0:24:47.74,0:24:49.49,Default,,0,0,0,,and we want to actually combine
Dialogue: 0,0:24:49.49,0:24:51.51,Default,,0,0,0,,them somehow, that sounds like a
Dialogue: 0,0:24:51.51,0:24:52.26,Default,,0,0,0,,reasonable technique.
Dialogue: 0,0:24:53.17,0:24:54.52,Default,,0,0,0,,I'm going to show you how we can
Dialogue: 0,0:24:55.01,0:24:56.90,Default,,0,0,0,,do that.
Dialogue: 0,0:24:57.65,0:24:59.55,Default,,0,0,0,,Let's say we have two geometry
Dialogue: 0,0:24:59.55,0:25:00.50,Default,,0,0,0,,objects in our scene.
Dialogue: 0,0:25:00.79,0:25:03.10,Default,,0,0,0,,On our left we have a grass
Dialogue: 0,0:25:03.10,0:25:03.64,Default,,0,0,0,,tile.
Dialogue: 0,0:25:04.25,0:25:05.43,Default,,0,0,0,,On our right we have another
Dialogue: 0,0:25:05.43,0:25:07.63,Default,,0,0,0,,grass tile.
Dialogue: 0,0:25:07.85,0:25:08.93,Default,,0,0,0,,They both reference the same
Dialogue: 0,0:25:08.93,0:25:09.88,Default,,0,0,0,,material, they have the same
Dialogue: 0,0:25:09.88,0:25:11.88,Default,,0,0,0,,look, they're just displaced and
Dialogue: 0,0:25:11.88,0:25:13.24,Default,,0,0,0,,they have different locations in
Dialogue: 0,0:25:13.24,0:25:13.91,Default,,0,0,0,,3D space.
Dialogue: 0,0:25:14.85,0:25:16.42,Default,,0,0,0,,When you send this to the GPU,
Dialogue: 0,0:25:16.47,0:25:17.86,Default,,0,0,0,,you're going to get two draw
Dialogue: 0,0:25:17.86,0:25:17.98,Default,,0,0,0,,calls.
Dialogue: 0,0:25:22.56,0:25:24.43,Default,,0,0,0,,If we merge the two together
Dialogue: 0,0:25:24.43,0:25:25.34,Default,,0,0,0,,through a process called
Dialogue: 0,0:25:25.34,0:25:27.46,Default,,0,0,0,,flattening, what we're doing is
Dialogue: 0,0:25:27.46,0:25:28.97,Default,,0,0,0,,saying let's take all the points
Dialogue: 0,0:25:28.97,0:25:31.23,Default,,0,0,0,,out of mesh A and combine them
Dialogue: 0,0:25:31.23,0:25:32.91,Default,,0,0,0,,with the points in mesh B into
Dialogue: 0,0:25:32.91,0:25:35.15,Default,,0,0,0,,one super-Godzilla mesh.
Dialogue: 0,0:25:37.14,0:25:40.55,Default,,0,0,0,,The beauty of this is now all
Dialogue: 0,0:25:40.55,0:25:41.90,Default,,0,0,0,,these points reference just that
Dialogue: 0,0:25:41.90,0:25:43.87,Default,,0,0,0,,one material and when the CPU
Dialogue: 0,0:25:43.87,0:25:45.22,Default,,0,0,0,,talks to the GPU, all it has to
Dialogue: 0,0:25:45.22,0:25:46.72,Default,,0,0,0,,do is say, hey, draw this one
Dialogue: 0,0:25:46.72,0:25:47.00,Default,,0,0,0,,thing.
Dialogue: 0,0:25:48.43,0:25:50.27,Default,,0,0,0,,Done. Now, this sounds pretty
Dialogue: 0,0:25:50.27,0:25:52.79,Default,,0,0,0,,trivial and it's really easy to
Dialogue: 0,0:25:52.79,0:25:53.19,Default,,0,0,0,,use.
Dialogue: 0,0:25:53.79,0:25:55.42,Default,,0,0,0,,You can use it in your
Dialogue: 0,0:25:55.42,0:25:58.95,Default,,0,0,0,,applications by a method on
Dialogue: 0,0:25:59.08,0:26:01.14,Default,,0,0,0,,SCNNode called flattenedClone,
Dialogue: 0,0:26:01.93,0:26:03.04,Default,,0,0,0,,and what you want to do here is
Dialogue: 0,0:26:03.04,0:26:04.11,Default,,0,0,0,,just make sure that there's a
Dialogue: 0,0:26:04.11,0:26:06.66,Default,,0,0,0,,parent node that contains the
Dialogue: 0,0:26:06.66,0:26:09.42,Default,,0,0,0,,nodes that you want to flatten,
Dialogue: 0,0:26:09.42,0:26:11.34,Default,,0,0,0,,and the return of this is a new
Dialogue: 0,0:26:11.34,0:26:12.66,Default,,0,0,0,,flattened mesh that you can
Dialogue: 0,0:26:12.66,0:26:14.06,Default,,0,0,0,,composite in your scene and
Dialogue: 0,0:26:14.06,0:26:15.09,Default,,0,0,0,,replace the other nodes.
Dialogue: 0,0:26:17.02,0:26:18.64,Default,,0,0,0,,Now, this simple technique was
Dialogue: 0,0:26:18.64,0:26:20.09,Default,,0,0,0,,used throughout Learn to Code.
Dialogue: 0,0:26:20.09,0:26:22.77,Default,,0,0,0,,So if we take our level that I
Dialogue: 0,0:26:22.77,0:26:24.65,Default,,0,0,0,,showed you earlier, I'm going to
Dialogue: 0,0:26:24.65,0:26:26.56,Default,,0,0,0,,break down the sections at which
Dialogue: 0,0:26:26.56,0:26:27.52,Default,,0,0,0,,we were able to run this
Dialogue: 0,0:26:27.52,0:26:28.39,Default,,0,0,0,,flattening logic.
Dialogue: 0,0:26:28.39,0:26:30.52,Default,,0,0,0,,I'm going to highlight in red
Dialogue: 0,0:26:30.52,0:26:32.33,Default,,0,0,0,,the areas that were flattened
Dialogue: 0,0:26:32.33,0:26:32.81,Default,,0,0,0,,together.
Dialogue: 0,0:26:32.97,0:26:34.15,Default,,0,0,0,,So you can see here, our water
Dialogue: 0,0:26:34.15,0:26:36.23,Default,,0,0,0,,now -- the grass tile is much
Dialogue: 0,0:26:36.23,0:26:39.51,Default,,0,0,0,,fewer draw calls.
Dialogue: 0,0:26:39.91,0:26:41.12,Default,,0,0,0,,And each of these red sections
Dialogue: 0,0:26:41.12,0:26:42.46,Default,,0,0,0,,equates to one draw call,
Dialogue: 0,0:26:42.46,0:26:43.75,Default,,0,0,0,,instead of an individual draw
Dialogue: 0,0:26:43.75,0:26:43.98,Default,,0,0,0,,call.
Dialogue: 0,0:26:46.05,0:26:47.12,Default,,0,0,0,,So we were able to greatly
Dialogue: 0,0:26:47.12,0:26:48.62,Default,,0,0,0,,reduce the number of draw calls
Dialogue: 0,0:26:48.62,0:26:49.18,Default,,0,0,0,,in our scene.
Dialogue: 0,0:26:50.56,0:26:53.27,Default,,0,0,0,,We went from over 550 draw calls
Dialogue: 0,0:26:53.80,0:26:54.88,Default,,0,0,0,,to less than 16.
Dialogue: 0,0:26:54.97,0:26:55.92,Default,,0,0,0,,This is huge.
Dialogue: 0,0:26:58.02,0:26:59.06,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:26:59.06,0:26:59.65,Default,,0,0,0,,Thank you.
Dialogue: 0,0:26:59.65,0:27:04.16,Default,,0,0,0,,Now, you have to use a bit of
Dialogue: 0,0:27:04.16,0:27:05.92,Default,,0,0,0,,discretion here because you
Dialogue: 0,0:27:05.92,0:27:06.84,Default,,0,0,0,,don't want to just go all
Dialogue: 0,0:27:06.84,0:27:08.18,Default,,0,0,0,,willy-nilly and, you know,
Dialogue: 0,0:27:08.18,0:27:09.50,Default,,0,0,0,,flatten all the things.
Dialogue: 0,0:27:10.55,0:27:12.62,Default,,0,0,0,,The reason why is, as Michael
Dialogue: 0,0:27:12.62,0:27:14.98,Default,,0,0,0,,showed you earlier, he made the
Dialogue: 0,0:27:14.98,0:27:16.38,Default,,0,0,0,,water look really realistic by
Dialogue: 0,0:27:16.38,0:27:17.79,Default,,0,0,0,,adding that simple shader
Dialogue: 0,0:27:17.79,0:27:18.79,Default,,0,0,0,,modifier that gave us this
Dialogue: 0,0:27:18.94,0:27:19.94,Default,,0,0,0,,really great effect.
Dialogue: 0,0:27:21.18,0:27:24.86,Default,,0,0,0,,So if we were to flatten
Dialogue: 0,0:27:24.86,0:27:26.60,Default,,0,0,0,,everything, the whole world
Dialogue: 0,0:27:26.60,0:27:27.58,Default,,0,0,0,,would kind of drip away.
Dialogue: 0,0:27:27.58,0:27:28.93,Default,,0,0,0,,That's not what we want.
Dialogue: 0,0:27:29.86,0:27:33.13,Default,,0,0,0,,So we were selective in choosing
Dialogue: 0,0:27:33.13,0:27:34.72,Default,,0,0,0,,what things to flatten.
Dialogue: 0,0:27:35.10,0:27:36.31,Default,,0,0,0,,So we flattened the waterfalls
Dialogue: 0,0:27:36.31,0:27:36.85,Default,,0,0,0,,altogether.
Dialogue: 0,0:27:37.68,0:27:39.41,Default,,0,0,0,,In your worlds or games that you
Dialogue: 0,0:27:39.41,0:27:42.04,Default,,0,0,0,,create you may choose to have an
Dialogue: 0,0:27:42.04,0:27:44.26,Default,,0,0,0,,object that disappears or moves
Dialogue: 0,0:27:44.26,0:27:46.10,Default,,0,0,0,,or scales or rotates, or somehow
Dialogue: 0,0:27:46.10,0:27:46.88,Default,,0,0,0,,it gets modified.
Dialogue: 0,0:27:47.55,0:27:50.23,Default,,0,0,0,,So I think the takeaway here is
Dialogue: 0,0:27:51.40,0:27:52.42,Default,,0,0,0,,based on how you want to use
Dialogue: 0,0:27:52.42,0:27:53.37,Default,,0,0,0,,your geometry, if there's
Dialogue: 0,0:27:53.37,0:27:54.94,Default,,0,0,0,,something dynamic about it, you
Dialogue: 0,0:27:54.94,0:27:56.66,Default,,0,0,0,,may want to keep flattening it
Dialogue: 0,0:27:56.66,0:27:58.30,Default,,0,0,0,,with other things that move in
Dialogue: 0,0:27:58.30,0:27:58.98,Default,,0,0,0,,the exact same way.
Dialogue: 0,0:28:04.26,0:28:05.04,Default,,0,0,0,,So I'm going to give you a
Dialogue: 0,0:28:05.04,0:28:07.47,Default,,0,0,0,,couple of tips on working with
Dialogue: 0,0:28:07.47,0:28:08.00,Default,,0,0,0,,flattening.
Dialogue: 0,0:28:08.69,0:28:09.85,Default,,0,0,0,,One is you want to store your
Dialogue: 0,0:28:09.85,0:28:11.39,Default,,0,0,0,,nodes that you want to flatten
Dialogue: 0,0:28:11.44,0:28:13.26,Default,,0,0,0,,in the same group, parent group,
Dialogue: 0,0:28:13.26,0:28:13.83,Default,,0,0,0,,parent node.
Dialogue: 0,0:28:14.14,0:28:14.95,Default,,0,0,0,,And it doesn't have to be the
Dialogue: 0,0:28:14.95,0:28:16.92,Default,,0,0,0,,same type of geometry like we're
Dialogue: 0,0:28:16.92,0:28:18.20,Default,,0,0,0,,using grass tiles here, but
Dialogue: 0,0:28:18.42,0:28:19.93,Default,,0,0,0,,let's say you're modeling a
Dialogue: 0,0:28:19.93,0:28:21.84,Default,,0,0,0,,living room and you have a sofa
Dialogue: 0,0:28:21.84,0:28:23.17,Default,,0,0,0,,and a chair and a table, and
Dialogue: 0,0:28:23.17,0:28:24.34,Default,,0,0,0,,they don't move relative to each
Dialogue: 0,0:28:24.34,0:28:24.58,Default,,0,0,0,,other.
Dialogue: 0,0:28:25.37,0:28:26.51,Default,,0,0,0,,They're all good candidates to
Dialogue: 0,0:28:26.51,0:28:28.74,Default,,0,0,0,,put in one node group and
Dialogue: 0,0:28:28.82,0:28:29.91,Default,,0,0,0,,flatten by itself.
Dialogue: 0,0:28:30.30,0:28:31.05,Default,,0,0,0,,So you want to be really
Dialogue: 0,0:28:31.05,0:28:32.47,Default,,0,0,0,,aggressive here and anything
Dialogue: 0,0:28:32.47,0:28:33.81,Default,,0,0,0,,that doesn't move relative to
Dialogue: 0,0:28:33.81,0:28:37.27,Default,,0,0,0,,something else, flatten it and
Dialogue: 0,0:28:37.55,0:28:38.57,Default,,0,0,0,,you'll reduce your draw call
Dialogue: 0,0:28:38.57,0:28:39.52,Default,,0,0,0,,count significantly.
Dialogue: 0,0:28:40.15,0:28:43.00,Default,,0,0,0,,Now, there is a caveat here.
Dialogue: 0,0:28:44.48,0:28:46.21,Default,,0,0,0,,Learn to Code's world is pretty
Dialogue: 0,0:28:47.60,0:28:49.27,Default,,0,0,0,,static in terms of it's a small
Dialogue: 0,0:28:49.27,0:28:50.71,Default,,0,0,0,,world that's always visible on
Dialogue: 0,0:28:50.71,0:28:52.42,Default,,0,0,0,,the screen, but for your world,
Dialogue: 0,0:28:52.42,0:28:53.36,Default,,0,0,0,,you may do something really
Dialogue: 0,0:28:53.36,0:28:54.38,Default,,0,0,0,,expansive where you have to go
Dialogue: 0,0:28:54.38,0:28:56.95,Default,,0,0,0,,into a building or you're on a
Dialogue: 0,0:28:56.95,0:28:58.48,Default,,0,0,0,,large terrain or you have
Dialogue: 0,0:28:58.48,0:28:58.90,Default,,0,0,0,,levels.
Dialogue: 0,0:28:59.77,0:29:00.93,Default,,0,0,0,,So what you want to do here --
Dialogue: 0,0:29:01.94,0:29:03.08,Default,,0,0,0,,what you don't want to do is
Dialogue: 0,0:29:03.15,0:29:04.63,Default,,0,0,0,,atlas everything all willy-nilly
Dialogue: 0,0:29:04.63,0:29:05.51,Default,,0,0,0,,because what's going to happen
Dialogue: 0,0:29:05.51,0:29:07.45,Default,,0,0,0,,is if you have an atlas of this
Dialogue: 0,0:29:07.45,0:29:09.62,Default,,0,0,0,,entire world, of which only a
Dialogue: 0,0:29:09.62,0:29:11.03,Default,,0,0,0,,portion is visible in the scene
Dialogue: 0,0:29:11.03,0:29:12.64,Default,,0,0,0,,at any one time, you're going to
Dialogue: 0,0:29:12.64,0:29:13.85,Default,,0,0,0,,pay the performance cost of
Dialogue: 0,0:29:13.95,0:29:15.57,Default,,0,0,0,,rendering all these points and
Dialogue: 0,0:29:15.57,0:29:17.49,Default,,0,0,0,,all the meshes, and that's not
Dialogue: 0,0:29:17.49,0:29:17.98,Default,,0,0,0,,what you want.
Dialogue: 0,0:29:19.47,0:29:21.06,Default,,0,0,0,,A simple technique here is to
Dialogue: 0,0:29:21.18,0:29:22.56,Default,,0,0,0,,simply subdivide your world into
Dialogue: 0,0:29:22.56,0:29:25.27,Default,,0,0,0,,discrete chunks and then run
Dialogue: 0,0:29:25.27,0:29:26.79,Default,,0,0,0,,this process on each of those
Dialogue: 0,0:29:26.79,0:29:28.39,Default,,0,0,0,,chunks, and as you move from
Dialogue: 0,0:29:28.39,0:29:29.99,Default,,0,0,0,,chunk-to-chunk, as the camera
Dialogue: 0,0:29:29.99,0:29:31.36,Default,,0,0,0,,moves from chunk-to-chunk,
Dialogue: 0,0:29:31.36,0:29:32.02,Default,,0,0,0,,you're actually getting the
Dialogue: 0,0:29:32.02,0:29:33.57,Default,,0,0,0,,benefits of flattening without
Dialogue: 0,0:29:33.57,0:29:35.98,Default,,0,0,0,,paying the overhead of rendering
Dialogue: 0,0:29:36.07,0:29:38.23,Default,,0,0,0,,everything in your scene at
Dialogue: 0,0:29:38.98,0:29:39.15,Default,,0,0,0,,once.
Dialogue: 0,0:29:39.72,0:29:40.73,Default,,0,0,0,,Next I'd like to talk to you
Dialogue: 0,0:29:40.73,0:29:41.53,Default,,0,0,0,,about materials.
Dialogue: 0,0:29:42.56,0:29:44.28,Default,,0,0,0,,Now, materials have an even
Dialogue: 0,0:29:44.28,0:29:46.07,Default,,0,0,0,,bigger impact on your draw call
Dialogue: 0,0:29:46.07,0:29:49.38,Default,,0,0,0,,count, and I'll get into why.
Dialogue: 0,0:29:50.29,0:29:52.11,Default,,0,0,0,,Here's a still frame from that
Dialogue: 0,0:29:52.23,0:29:54.06,Default,,0,0,0,,movie I showed earlier, where we
Dialogue: 0,0:29:54.06,0:29:56.27,Default,,0,0,0,,show that we flattened this
Dialogue: 0,0:29:56.27,0:29:58.39,Default,,0,0,0,,aspect of the scene, the top of
Dialogue: 0,0:29:58.45,0:30:02.01,Default,,0,0,0,,the world mostly, into one mesh.
Dialogue: 0,0:30:03.01,0:30:04.62,Default,,0,0,0,,So this is one draw call.
Dialogue: 0,0:30:05.24,0:30:07.54,Default,,0,0,0,,But the astute observers of you
Dialogue: 0,0:30:07.54,0:30:09.33,Default,,0,0,0,,out there that may notice, hey,
Dialogue: 0,0:30:10.03,0:30:11.29,Default,,0,0,0,,there are multiple materials
Dialogue: 0,0:30:11.29,0:30:13.00,Default,,0,0,0,,here, like obviously those
Dialogue: 0,0:30:13.56,0:30:15.37,Default,,0,0,0,,stonehenges don't have the same
Dialogue: 0,0:30:15.37,0:30:17.20,Default,,0,0,0,,materials as the staircase, and
Dialogue: 0,0:30:17.20,0:30:18.47,Default,,0,0,0,,surely not the stones
Dialogue: 0,0:30:18.77,0:30:19.33,Default,,0,0,0,,themselves.
Dialogue: 0,0:30:19.33,0:30:21.32,Default,,0,0,0,,So what's going on here?
Dialogue: 0,0:30:22.05,0:30:24.35,Default,,0,0,0,,Let's talk about reducing
Dialogue: 0,0:30:24.35,0:30:26.01,Default,,0,0,0,,materials because that's what we
Dialogue: 0,0:30:26.01,0:30:27.96,Default,,0,0,0,,did to get this down to one draw
Dialogue: 0,0:30:27.96,0:30:28.20,Default,,0,0,0,,call.
Dialogue: 0,0:30:30.02,0:30:31.42,Default,,0,0,0,,So again, we have our two
Dialogue: 0,0:30:31.42,0:30:33.02,Default,,0,0,0,,geometry objects on the screen;
Dialogue: 0,0:30:34.16,0:30:36.02,Default,,0,0,0,,one on the left, one on the
Dialogue: 0,0:30:36.02,0:30:36.28,Default,,0,0,0,,right.
Dialogue: 0,0:30:37.32,0:30:40.51,Default,,0,0,0,,One uses the sand texture, one
Dialogue: 0,0:30:40.51,0:30:42.49,Default,,0,0,0,,uses this more sand/grass
Dialogue: 0,0:30:42.49,0:30:43.18,Default,,0,0,0,,looking texture.
Dialogue: 0,0:30:44.60,0:30:46.03,Default,,0,0,0,,If we run the logic that I
Dialogue: 0,0:30:46.03,0:30:47.21,Default,,0,0,0,,showed you before, flattening,
Dialogue: 0,0:30:48.08,0:30:50.52,Default,,0,0,0,,we actually get that one
Dialogue: 0,0:30:50.52,0:30:53.47,Default,,0,0,0,,combined, Godzilla mesh, but
Dialogue: 0,0:30:53.79,0:30:54.80,Default,,0,0,0,,we're still referencing two
Dialogue: 0,0:30:54.80,0:30:55.21,Default,,0,0,0,,materials.
Dialogue: 0,0:30:55.36,0:30:56.95,Default,,0,0,0,,So when the CPU has to talk to
Dialogue: 0,0:30:56.95,0:30:58.95,Default,,0,0,0,,the GPU, it's going to say, hey,
Dialogue: 0,0:30:59.39,0:31:01.07,Default,,0,0,0,,take this mesh and draw the sand
Dialogue: 0,0:31:01.07,0:31:01.77,Default,,0,0,0,,material with it.
Dialogue: 0,0:31:02.34,0:31:03.36,Default,,0,0,0,,Great. Okay.
Dialogue: 0,0:31:03.36,0:31:04.71,Default,,0,0,0,,Now, take this mesh again and
Dialogue: 0,0:31:04.71,0:31:06.00,Default,,0,0,0,,draw the parts of it that uses
Dialogue: 0,0:31:06.00,0:31:07.00,Default,,0,0,0,,the grass material again.
Dialogue: 0,0:31:07.15,0:31:08.32,Default,,0,0,0,,You still get two draw calls.
Dialogue: 0,0:31:09.46,0:31:11.71,Default,,0,0,0,,There's an opportunity here to
Dialogue: 0,0:31:12.28,0:31:14.01,Default,,0,0,0,,reduce this.
Dialogue: 0,0:31:15.47,0:31:16.75,Default,,0,0,0,,And you may have heard of
Dialogue: 0,0:31:16.75,0:31:19.01,Default,,0,0,0,,texture atlasing, but maybe you
Dialogue: 0,0:31:19.01,0:31:20.15,Default,,0,0,0,,don't understand exactly what
Dialogue: 0,0:31:20.15,0:31:20.46,Default,,0,0,0,,that is.
Dialogue: 0,0:31:20.46,0:31:22.18,Default,,0,0,0,,It's a very simple process.
Dialogue: 0,0:31:23.21,0:31:25.47,Default,,0,0,0,,Your artist, and their 3D tools,
Dialogue: 0,0:31:26.09,0:31:28.06,Default,,0,0,0,,would take your materials and
Dialogue: 0,0:31:28.06,0:31:30.94,Default,,0,0,0,,combine them into one texture
Dialogue: 0,0:31:30.94,0:31:34.57,Default,,0,0,0,,atlas and under the covers
Dialogue: 0,0:31:34.73,0:31:36.13,Default,,0,0,0,,they'll update your geometry so
Dialogue: 0,0:31:36.13,0:31:37.10,Default,,0,0,0,,that it's pointing to the right
Dialogue: 0,0:31:37.10,0:31:39.35,Default,,0,0,0,,bits inside your textures, but
Dialogue: 0,0:31:39.35,0:31:41.38,Default,,0,0,0,,the net result is you have one
Dialogue: 0,0:31:41.38,0:31:41.98,Default,,0,0,0,,draw call.
Dialogue: 0,0:31:44.14,0:31:49.20,Default,,0,0,0,,Now, this works if you have a
Dialogue: 0,0:31:49.20,0:31:50.89,Default,,0,0,0,,few objects or thousands of
Dialogue: 0,0:31:50.89,0:31:51.39,Default,,0,0,0,,objects.
Dialogue: 0,0:31:52.49,0:31:53.39,Default,,0,0,0,,In Learn to Code I'll give you
Dialogue: 0,0:31:53.39,0:31:54.83,Default,,0,0,0,,an example of one of the atlases
Dialogue: 0,0:31:54.83,0:31:56.06,Default,,0,0,0,,for the world that I just showed
Dialogue: 0,0:31:56.06,0:31:56.24,Default,,0,0,0,,you.
Dialogue: 0,0:31:56.35,0:31:57.82,Default,,0,0,0,,This is what our atlas looked
Dialogue: 0,0:31:57.82,0:31:57.98,Default,,0,0,0,,like.
Dialogue: 0,0:32:00.22,0:32:03.30,Default,,0,0,0,,We had over 70 materials that we
Dialogue: 0,0:32:03.30,0:32:04.93,Default,,0,0,0,,were able to condense down into
Dialogue: 0,0:32:04.93,0:32:05.25,Default,,0,0,0,,one.
Dialogue: 0,0:32:05.91,0:32:08.07,Default,,0,0,0,,That's a huge savings.
Dialogue: 0,0:32:09.64,0:32:11.30,Default,,0,0,0,,There's another benefit here
Dialogue: 0,0:32:11.30,0:32:14.18,Default,,0,0,0,,that you may not be aware of.
Dialogue: 0,0:32:14.39,0:32:15.79,Default,,0,0,0,,When you have a material in your
Dialogue: 0,0:32:15.79,0:32:17.18,Default,,0,0,0,,scene, when your scene loads,
Dialogue: 0,0:32:17.83,0:32:20.41,Default,,0,0,0,,there's a shader that has to be
Dialogue: 0,0:32:20.46,0:32:23.79,Default,,0,0,0,,generated behind the scenes and
Dialogue: 0,0:32:24.15,0:32:25.24,Default,,0,0,0,,you can't start your scene until
Dialogue: 0,0:32:25.24,0:32:26.30,Default,,0,0,0,,that shader's actually finished
Dialogue: 0,0:32:26.30,0:32:26.76,Default,,0,0,0,,compiling.
Dialogue: 0,0:32:26.94,0:32:28.38,Default,,0,0,0,,If you have 70 materials, you
Dialogue: 0,0:32:28.38,0:32:29.34,Default,,0,0,0,,have 70 shaders.
Dialogue: 0,0:32:29.73,0:32:30.80,Default,,0,0,0,,You have a really rich level
Dialogue: 0,0:32:30.80,0:32:31.91,Default,,0,0,0,,with hundreds of objects,
Dialogue: 0,0:32:32.32,0:32:34.15,Default,,0,0,0,,hundreds of materials, now all
Dialogue: 0,0:32:34.15,0:32:35.66,Default,,0,0,0,,of a sudden your load time --
Dialogue: 0,0:32:35.69,0:32:36.68,Default,,0,0,0,,you're stuck waiting for the
Dialogue: 0,0:32:36.68,0:32:37.56,Default,,0,0,0,,scene to load.
Dialogue: 0,0:32:38.44,0:32:40.15,Default,,0,0,0,,By combining it into one
Dialogue: 0,0:32:40.62,0:32:42.24,Default,,0,0,0,,material, or fewer materials,
Dialogue: 0,0:32:42.54,0:32:43.66,Default,,0,0,0,,you're reducing the number of
Dialogue: 0,0:32:43.66,0:32:44.45,Default,,0,0,0,,shaders that need to get
Dialogue: 0,0:32:44.45,0:32:46.18,Default,,0,0,0,,compiled, boosting your startup
Dialogue: 0,0:32:46.18,0:32:49.61,Default,,0,0,0,,time, not to mention lesser I/O
Dialogue: 0,0:32:49.61,0:32:50.94,Default,,0,0,0,,in terms of hitting a disk.
Dialogue: 0,0:32:55.54,0:32:56.69,Default,,0,0,0,,So next I want to talk about
Dialogue: 0,0:32:56.69,0:32:57.06,Default,,0,0,0,,lighting.
Dialogue: 0,0:32:57.77,0:32:59.47,Default,,0,0,0,,Now, lighting's very interesting
Dialogue: 0,0:32:59.47,0:33:02.34,Default,,0,0,0,,because lighting is what allows
Dialogue: 0,0:33:02.34,0:33:05.67,Default,,0,0,0,,you to add rich, vivid detail to
Dialogue: 0,0:33:05.67,0:33:06.14,Default,,0,0,0,,your world.
Dialogue: 0,0:33:07.01,0:33:07.87,Default,,0,0,0,,You can take a scene and it
Dialogue: 0,0:33:07.87,0:33:08.94,Default,,0,0,0,,looks kind of static, kind of
Dialogue: 0,0:33:08.94,0:33:09.33,Default,,0,0,0,,boring.
Dialogue: 0,0:33:09.78,0:33:11.71,Default,,0,0,0,,You add lights, now it gets a
Dialogue: 0,0:33:11.71,0:33:12.30,Default,,0,0,0,,little interesting.
Dialogue: 0,0:33:13.22,0:33:17.36,Default,,0,0,0,,So we let our artists put a few
Dialogue: 0,0:33:17.36,0:33:18.35,Default,,0,0,0,,lights in the scene and give us
Dialogue: 0,0:33:18.39,0:33:19.32,Default,,0,0,0,,this visual effect.
Dialogue: 0,0:33:20.00,0:33:22.40,Default,,0,0,0,,We add a spotlight so that when
Dialogue: 0,0:33:22.40,0:33:23.32,Default,,0,0,0,,the characters went around the
Dialogue: 0,0:33:23.32,0:33:24.68,Default,,0,0,0,,world, they're casting shadows
Dialogue: 0,0:33:24.68,0:33:27.33,Default,,0,0,0,,as they move along the water or
Dialogue: 0,0:33:27.67,0:33:28.17,Default,,0,0,0,,the grass.
Dialogue: 0,0:33:28.56,0:33:30.82,Default,,0,0,0,,It's a nice effect.
Dialogue: 0,0:33:30.86,0:33:32.38,Default,,0,0,0,,We added omni-directional lights
Dialogue: 0,0:33:32.63,0:33:33.84,Default,,0,0,0,,scattered throughout the scene
Dialogue: 0,0:33:34.89,0:33:36.42,Default,,0,0,0,,to add a little visual pop.
Dialogue: 0,0:33:36.42,0:33:38.09,Default,,0,0,0,,So you can see the staircases in
Dialogue: 0,0:33:38.09,0:33:39.53,Default,,0,0,0,,the foreground are highlighted a
Dialogue: 0,0:33:39.53,0:33:40.51,Default,,0,0,0,,little bit more than the
Dialogue: 0,0:33:40.56,0:33:41.79,Default,,0,0,0,,staircases in the background.
Dialogue: 0,0:33:44.39,0:33:46.01,Default,,0,0,0,,And lastly, we added an ambient
Dialogue: 0,0:33:46.01,0:33:49.04,Default,,0,0,0,,light, which makes sure that
Dialogue: 0,0:33:49.04,0:33:50.06,Default,,0,0,0,,everything in the scene is
Dialogue: 0,0:33:50.14,0:33:51.22,Default,,0,0,0,,visible; otherwise, you'd have
Dialogue: 0,0:33:51.32,0:33:53.59,Default,,0,0,0,,really super dark areas where
Dialogue: 0,0:33:53.59,0:33:54.87,Default,,0,0,0,,the other lights don't hit.
Dialogue: 0,0:33:54.93,0:33:57.25,Default,,0,0,0,,And you can see this sort of
Dialogue: 0,0:33:57.25,0:33:58.16,Default,,0,0,0,,great effect if you look in the
Dialogue: 0,0:33:58.16,0:34:00.50,Default,,0,0,0,,shadows of where the water is.
Dialogue: 0,0:34:00.50,0:34:01.21,Default,,0,0,0,,It's really neat.
Dialogue: 0,0:34:02.69,0:34:04.51,Default,,0,0,0,,Now, there's a performance cost
Dialogue: 0,0:34:04.51,0:34:04.91,Default,,0,0,0,,to this.
Dialogue: 0,0:34:04.91,0:34:05.97,Default,,0,0,0,,Lights are not free.
Dialogue: 0,0:34:07.28,0:34:08.61,Default,,0,0,0,,Remember I told you that draw
Dialogue: 0,0:34:08.61,0:34:10.12,Default,,0,0,0,,calls, the more you have the
Dialogue: 0,0:34:10.12,0:34:11.73,Default,,0,0,0,,less performant you are, your
Dialogue: 0,0:34:11.73,0:34:12.30,Default,,0,0,0,,application is?
Dialogue: 0,0:34:13.00,0:34:15.12,Default,,0,0,0,,Well, whenever you have a light
Dialogue: 0,0:34:15.12,0:34:19.18,Default,,0,0,0,,that hits a mesh, that's an
Dialogue: 0,0:34:19.37,0:34:20.45,Default,,0,0,0,,extra draw call.
Dialogue: 0,0:34:21.21,0:34:22.29,Default,,0,0,0,,So you have five lights in your
Dialogue: 0,0:34:22.29,0:34:24.37,Default,,0,0,0,,scene, you just increased your
Dialogue: 0,0:34:24.37,0:34:26.27,Default,,0,0,0,,draw call count by five.
Dialogue: 0,0:34:27.52,0:34:29.39,Default,,0,0,0,,There's a way to get around
Dialogue: 0,0:34:29.39,0:34:32.19,Default,,0,0,0,,this, and it's called a light
Dialogue: 0,0:34:32.19,0:34:32.86,Default,,0,0,0,,map.
Dialogue: 0,0:34:34.07,0:34:36.42,Default,,0,0,0,,Now, what this is, is your
Dialogue: 0,0:34:36.42,0:34:38.28,Default,,0,0,0,,artist, and their 3D tool, will
Dialogue: 0,0:34:38.28,0:34:41.17,Default,,0,0,0,,basically run a process that
Dialogue: 0,0:34:41.17,0:34:43.10,Default,,0,0,0,,calculates where the lights are.
Dialogue: 0,0:34:43.10,0:34:44.64,Default,,0,0,0,,They can go to town, put all the
Dialogue: 0,0:34:44.64,0:34:45.88,Default,,0,0,0,,lights they want in there, light
Dialogue: 0,0:34:45.88,0:34:47.56,Default,,0,0,0,,all the things, and it would
Dialogue: 0,0:34:47.56,0:34:49.68,Default,,0,0,0,,actually precompute the
Dialogue: 0,0:34:49.79,0:34:51.23,Default,,0,0,0,,intensity of the light hitting
Dialogue: 0,0:34:51.23,0:34:53.05,Default,,0,0,0,,your scene and it would store it
Dialogue: 0,0:34:53.05,0:34:54.88,Default,,0,0,0,,in a material, not unlike the
Dialogue: 0,0:34:54.88,0:34:56.07,Default,,0,0,0,,textures we showed you earlier.
Dialogue: 0,0:34:57.41,0:35:01.36,Default,,0,0,0,,The beauty of this is that this
Dialogue: 0,0:35:01.70,0:35:03.73,Default,,0,0,0,,process is not CPU or GPU
Dialogue: 0,0:35:03.73,0:35:04.22,Default,,0,0,0,,intensive.
Dialogue: 0,0:35:04.45,0:35:05.67,Default,,0,0,0,,As a matter of fact, it's free.
Dialogue: 0,0:35:05.67,0:35:06.66,Default,,0,0,0,,It's taking me more energy to
Dialogue: 0,0:35:06.66,0:35:08.34,Default,,0,0,0,,talk about it than the CPU would
Dialogue: 0,0:35:08.34,0:35:12.35,Default,,0,0,0,,actually spend applying this.
Dialogue: 0,0:35:12.54,0:35:13.51,Default,,0,0,0,,So we are able to take our light
Dialogue: 0,0:35:13.51,0:35:15.15,Default,,0,0,0,,count down to zero if we wanted.
Dialogue: 0,0:35:16.20,0:35:16.81,Default,,0,0,0,,Now, we didn't.
Dialogue: 0,0:35:17.85,0:35:19.28,Default,,0,0,0,,We left one spotlight in there
Dialogue: 0,0:35:20.03,0:35:21.44,Default,,0,0,0,,because we distinguished between
Dialogue: 0,0:35:21.44,0:35:23.04,Default,,0,0,0,,lights that don't change every
Dialogue: 0,0:35:23.04,0:35:24.16,Default,,0,0,0,,frame, why should we render
Dialogue: 0,0:35:24.16,0:35:25.14,Default,,0,0,0,,these lights again, we did it
Dialogue: 0,0:35:25.14,0:35:26.14,Default,,0,0,0,,the last frame and nothing
Dialogue: 0,0:35:26.14,0:35:29.09,Default,,0,0,0,,changed, but the spotlight does
Dialogue: 0,0:35:29.09,0:35:29.48,Default,,0,0,0,,change.
Dialogue: 0,0:35:29.93,0:35:31.42,Default,,0,0,0,,As you rotate the world the
Dialogue: 0,0:35:31.42,0:35:32.93,Default,,0,0,0,,spotlight's going to hit the
Dialogue: 0,0:35:32.93,0:35:34.04,Default,,0,0,0,,objects in a different way.
Dialogue: 0,0:35:35.02,0:35:36.05,Default,,0,0,0,,When you have your character
Dialogue: 0,0:35:36.05,0:35:37.63,Default,,0,0,0,,walking around the world, its
Dialogue: 0,0:35:37.63,0:35:39.32,Default,,0,0,0,,shadow is going to cast on the
Dialogue: 0,0:35:39.32,0:35:40.73,Default,,0,0,0,,rest of the world in a different
Dialogue: 0,0:35:40.73,0:35:40.89,Default,,0,0,0,,way.
Dialogue: 0,0:35:41.80,0:35:43.79,Default,,0,0,0,,So we kept it, but we made sure
Dialogue: 0,0:35:43.79,0:35:46.22,Default,,0,0,0,,that we were specific as to what
Dialogue: 0,0:35:46.22,0:35:48.80,Default,,0,0,0,,it would apply to, the
Dialogue: 0,0:35:49.39,0:35:51.34,Default,,0,0,0,,characters or certain parts of
Dialogue: 0,0:35:51.34,0:35:51.85,Default,,0,0,0,,the scene.
Dialogue: 0,0:35:53.32,0:35:55.13,Default,,0,0,0,,And the good thing about this is
Dialogue: 0,0:35:55.13,0:35:57.54,Default,,0,0,0,,it works in tandem with all the
Dialogue: 0,0:35:57.54,0:35:58.57,Default,,0,0,0,,flattening that I showed you
Dialogue: 0,0:35:58.57,0:35:59.97,Default,,0,0,0,,earlier, because obviously
Dialogue: 0,0:35:59.97,0:36:01.50,Default,,0,0,0,,lights act like a multiplier in
Dialogue: 0,0:36:01.50,0:36:02.41,Default,,0,0,0,,terms of your draw calls.
Dialogue: 0,0:36:02.82,0:36:03.65,Default,,0,0,0,,Well, guess what.
Dialogue: 0,0:36:04.31,0:36:05.50,Default,,0,0,0,,We reduced the first term.
Dialogue: 0,0:36:05.50,0:36:09.15,Default,,0,0,0,,We reduced the number of meshes
Dialogue: 0,0:36:09.19,0:36:11.70,Default,,0,0,0,,that have to be lit.
Dialogue: 0,0:36:11.81,0:36:12.92,Default,,0,0,0,,So if we actually really wanted
Dialogue: 0,0:36:12.92,0:36:13.63,Default,,0,0,0,,to put another light in there,
Dialogue: 0,0:36:13.63,0:36:15.23,Default,,0,0,0,,the effect wouldn't be as bad as
Dialogue: 0,0:36:15.23,0:36:15.88,Default,,0,0,0,,when we started.
Dialogue: 0,0:36:17.22,0:36:19.27,Default,,0,0,0,,So after making all of these
Dialogue: 0,0:36:19.27,0:36:21.47,Default,,0,0,0,,changes, let's take a look at
Dialogue: 0,0:36:21.47,0:36:22.39,Default,,0,0,0,,our performance and see where we
Dialogue: 0,0:36:22.39,0:36:22.91,Default,,0,0,0,,are now.
Dialogue: 0,0:36:23.55,0:36:25.44,Default,,0,0,0,,Let's zoom in.
Dialogue: 0,0:36:25.44,0:36:27.01,Default,,0,0,0,,Actually, I want to take a
Dialogue: 0,0:36:27.01,0:36:28.91,Default,,0,0,0,,moment to just appreciate how
Dialogue: 0,0:36:28.91,0:36:30.48,Default,,0,0,0,,good the light maps look.
Dialogue: 0,0:36:31.72,0:36:32.75,Default,,0,0,0,,If you take a look behind the
Dialogue: 0,0:36:32.75,0:36:33.77,Default,,0,0,0,,first staircase, you see that
Dialogue: 0,0:36:33.77,0:36:34.89,Default,,0,0,0,,little dark shadow and the
Dialogue: 0,0:36:34.89,0:36:37.04,Default,,0,0,0,,crevices and even behind the
Dialogue: 0,0:36:37.04,0:36:38.11,Default,,0,0,0,,waterfall slightly is a little
Dialogue: 0,0:36:38.11,0:36:40.80,Default,,0,0,0,,darker, around the rocks and the
Dialogue: 0,0:36:40.80,0:36:42.86,Default,,0,0,0,,curved areas in the stonehenge,
Dialogue: 0,0:36:42.86,0:36:43.80,Default,,0,0,0,,it looks really great.
Dialogue: 0,0:36:44.29,0:36:45.27,Default,,0,0,0,,And you know what, you're not
Dialogue: 0,0:36:45.27,0:36:46.26,Default,,0,0,0,,paying anything for it.
Dialogue: 0,0:36:46.26,0:36:48.37,Default,,0,0,0,,It was done all offline using
Dialogue: 0,0:36:48.37,0:36:48.85,Default,,0,0,0,,material.
Dialogue: 0,0:36:48.85,0:36:50.54,Default,,0,0,0,,Our artist went crazy with
Dialogue: 0,0:36:50.54,0:36:51.86,Default,,0,0,0,,lights and their 3D tool.
Dialogue: 0,0:36:51.86,0:36:54.20,Default,,0,0,0,,Now I'll zoom in on the
Dialogue: 0,0:36:54.20,0:36:54.83,Default,,0,0,0,,performance.
Dialogue: 0,0:36:57.18,0:36:58.52,Default,,0,0,0,,Wow, we're hitting 60 fps now.
Dialogue: 0,0:36:58.52,0:36:59.68,Default,,0,0,0,,Our users won't be closing our
Dialogue: 0,0:36:59.68,0:37:00.74,Default,,0,0,0,,app and going to go do something
Dialogue: 0,0:37:00.74,0:37:01.20,Default,,0,0,0,,else.
Dialogue: 0,0:37:01.80,0:37:05.35,Default,,0,0,0,,Let's look at our rendering
Dialogue: 0,0:37:05.35,0:37:05.63,Default,,0,0,0,,time.
Dialogue: 0,0:37:05.71,0:37:08.66,Default,,0,0,0,,We're at 2.3 milliseconds.
Dialogue: 0,0:37:09.42,0:37:10.54,Default,,0,0,0,,Now, that's fantastic, for a
Dialogue: 0,0:37:10.54,0:37:11.35,Default,,0,0,0,,number of reasons.
Dialogue: 0,0:37:12.07,0:37:13.56,Default,,0,0,0,,Number one, remember we said you
Dialogue: 0,0:37:13.56,0:37:14.56,Default,,0,0,0,,have to get under 16
Dialogue: 0,0:37:14.56,0:37:17.32,Default,,0,0,0,,milliseconds to be able to
Dialogue: 0,0:37:17.47,0:37:22.90,Default,,0,0,0,,actually render at 60 fps?
Dialogue: 0,0:37:23.89,0:37:25.14,Default,,0,0,0,,Well, that new iPad that just
Dialogue: 0,0:37:25.14,0:37:27.11,Default,,0,0,0,,came out, if you want to take
Dialogue: 0,0:37:27.11,0:37:28.35,Default,,0,0,0,,advantage of 120 hertz
Dialogue: 0,0:37:28.57,0:37:30.83,Default,,0,0,0,,technology refresh rate, you
Dialogue: 0,0:37:30.83,0:37:31.95,Default,,0,0,0,,want to get that number under 7.
Dialogue: 0,0:37:32.41,0:37:33.42,Default,,0,0,0,,We're under 2, so we're good.
Dialogue: 0,0:37:34.29,0:37:36.91,Default,,0,0,0,,Crank it up.
Dialogue: 0,0:37:37.46,0:37:41.16,Default,,0,0,0,,So let's talk about headroom.
Dialogue: 0,0:37:42.30,0:37:44.75,Default,,0,0,0,,The beauty of this low number is
Dialogue: 0,0:37:44.75,0:37:46.21,Default,,0,0,0,,if you want to add more things
Dialogue: 0,0:37:46.21,0:37:47.16,Default,,0,0,0,,to your scene, maybe you want to
Dialogue: 0,0:37:47.16,0:37:48.18,Default,,0,0,0,,add a little bit more gameplay
Dialogue: 0,0:37:48.18,0:37:50.18,Default,,0,0,0,,logic using GameplayKit, or you
Dialogue: 0,0:37:50.18,0:37:53.22,Default,,0,0,0,,wanted to do some networking or
Dialogue: 0,0:37:53.22,0:37:54.46,Default,,0,0,0,,you wanted to just make your
Dialogue: 0,0:37:54.46,0:37:56.93,Default,,0,0,0,,scene rich, tell your artist,
Dialogue: 0,0:37:56.93,0:37:58.24,Default,,0,0,0,,hey, crank it up, let's make
Dialogue: 0,0:37:58.24,0:37:59.98,Default,,0,0,0,,some more objects in our scene,
Dialogue: 0,0:37:59.98,0:38:02.14,Default,,0,0,0,,make it more detailed, or you
Dialogue: 0,0:38:02.14,0:38:03.49,Default,,0,0,0,,just want to enjoy your better
Dialogue: 0,0:38:03.49,0:38:06.56,Default,,0,0,0,,battery life, you can do that.
Dialogue: 0,0:38:06.66,0:38:07.65,Default,,0,0,0,,Finally, let's look at that draw
Dialogue: 0,0:38:07.65,0:38:08.19,Default,,0,0,0,,call count.
Dialogue: 0,0:38:09.58,0:38:12.12,Default,,0,0,0,,Wow, 73. If you remember, the
Dialogue: 0,0:38:12.12,0:38:13.69,Default,,0,0,0,,earlier number was over 700.
Dialogue: 0,0:38:14.16,0:38:16.59,Default,,0,0,0,,We're using less than a tenth of
Dialogue: 0,0:38:16.59,0:38:19.82,Default,,0,0,0,,the draw call amount than we had
Dialogue: 0,0:38:19.82,0:38:20.28,Default,,0,0,0,,before.
Dialogue: 0,0:38:20.93,0:38:22.56,Default,,0,0,0,,We're sipping power instead of
Dialogue: 0,0:38:22.56,0:38:24.27,Default,,0,0,0,,guzzling it like we were before.
Dialogue: 0,0:38:24.85,0:38:25.40,Default,,0,0,0,,This is great.
Dialogue: 0,0:38:26.19,0:38:27.53,Default,,0,0,0,,Our app is very fluid.
Dialogue: 0,0:38:28.21,0:38:29.92,Default,,0,0,0,,And when I talk about headroom
Dialogue: 0,0:38:29.92,0:38:31.73,Default,,0,0,0,,again, you have to remember
Dialogue: 0,0:38:31.73,0:38:33.03,Default,,0,0,0,,you're going to be doing other
Dialogue: 0,0:38:33.03,0:38:33.92,Default,,0,0,0,,things in your app other than
Dialogue: 0,0:38:33.92,0:38:34.52,Default,,0,0,0,,just rendering.
Dialogue: 0,0:38:34.84,0:38:36.11,Default,,0,0,0,,In our case, we have the Swift
Dialogue: 0,0:38:36.11,0:38:37.64,Default,,0,0,0,,Compiler running on the left,
Dialogue: 0,0:38:38.08,0:38:38.72,Default,,0,0,0,,potentially.
Dialogue: 0,0:38:39.41,0:38:42.66,Default,,0,0,0,,The users were editing code and
Dialogue: 0,0:38:42.66,0:38:44.11,Default,,0,0,0,,clicking on menu items, and
Dialogue: 0,0:38:44.11,0:38:44.76,Default,,0,0,0,,things like that.
Dialogue: 0,0:38:44.76,0:38:47.35,Default,,0,0,0,,And in your application maybe
Dialogue: 0,0:38:47.35,0:38:48.43,Default,,0,0,0,,the user's doing something like
Dialogue: 0,0:38:48.43,0:38:50.42,Default,,0,0,0,,pinching or doing some selection
Dialogue: 0,0:38:50.42,0:38:53.56,Default,,0,0,0,,or, you know, anything that
Dialogue: 0,0:38:53.56,0:38:54.32,Default,,0,0,0,,would actually take more
Dialogue: 0,0:38:54.32,0:38:55.65,Default,,0,0,0,,processing time in terms of
Dialogue: 0,0:38:55.65,0:38:56.72,Default,,0,0,0,,logic in your application.
Dialogue: 0,0:38:58.19,0:39:00.76,Default,,0,0,0,,So that's great.
Dialogue: 0,0:39:00.94,0:39:04.11,Default,,0,0,0,,So to recap, we've talked about
Dialogue: 0,0:39:04.11,0:39:05.55,Default,,0,0,0,,flattening geometry, how this is
Dialogue: 0,0:39:05.55,0:39:07.34,Default,,0,0,0,,the low-hanging fruit of
Dialogue: 0,0:39:07.40,0:39:08.65,Default,,0,0,0,,performance optimizations in
Dialogue: 0,0:39:08.65,0:39:09.81,Default,,0,0,0,,terms of reducing your draw call
Dialogue: 0,0:39:09.81,0:39:10.14,Default,,0,0,0,,count.
Dialogue: 0,0:39:11.73,0:39:13.37,Default,,0,0,0,,We talked about using a texture
Dialogue: 0,0:39:13.37,0:39:14.83,Default,,0,0,0,,atlas, which is something that
Dialogue: 0,0:39:14.83,0:39:15.94,Default,,0,0,0,,you get your artist to do and
Dialogue: 0,0:39:15.94,0:39:17.24,Default,,0,0,0,,you just take advantage of that
Dialogue: 0,0:39:17.24,0:39:18.14,Default,,0,0,0,,will reduce the number of
Dialogue: 0,0:39:18.14,0:39:20.14,Default,,0,0,0,,materials that you use, which
Dialogue: 0,0:39:20.14,0:39:21.88,Default,,0,0,0,,has an impact on loading time,
Dialogue: 0,0:39:21.96,0:39:23.29,Default,,0,0,0,,making your app start up much
Dialogue: 0,0:39:23.29,0:39:26.31,Default,,0,0,0,,faster, and also an impact on
Dialogue: 0,0:39:26.31,0:39:28.80,Default,,0,0,0,,disk I/O, making it less objects
Dialogue: 0,0:39:28.80,0:39:29.18,Default,,0,0,0,,to load.
Dialogue: 0,0:39:30.29,0:39:32.64,Default,,0,0,0,,And lastly, it works in tandem
Dialogue: 0,0:39:32.81,0:39:34.63,Default,,0,0,0,,with the geometry flattening to
Dialogue: 0,0:39:34.63,0:39:35.34,Default,,0,0,0,,make sure that you have the
Dialogue: 0,0:39:35.34,0:39:36.43,Default,,0,0,0,,fewest amount of draw calls
Dialogue: 0,0:39:36.48,0:39:36.90,Default,,0,0,0,,possible.
Dialogue: 0,0:39:38.31,0:39:42.12,Default,,0,0,0,,And lastly, using light maps to
Dialogue: 0,0:39:42.12,0:39:43.88,Default,,0,0,0,,add that rich visual detail to
Dialogue: 0,0:39:43.88,0:39:47.04,Default,,0,0,0,,your scene and not pay any
Dialogue: 0,0:39:47.10,0:39:49.37,Default,,0,0,0,,performance penalty for it on
Dialogue: 0,0:39:49.37,0:39:49.85,Default,,0,0,0,,the GPU.
Dialogue: 0,0:39:50.02,0:39:50.82,Default,,0,0,0,,Let your artist go crazy.
Dialogue: 0,0:39:51.40,0:39:54.59,Default,,0,0,0,,We have a few related sessions
Dialogue: 0,0:39:54.59,0:39:54.96,Default,,0,0,0,,for you.
Dialogue: 0,0:39:55.85,0:39:56.97,Default,,0,0,0,,Thanks, and have a great WWDC.
Dialogue: 0,0:39:57.52,0:40:07.98,Default,,0,0,0,,[ Applause ]
