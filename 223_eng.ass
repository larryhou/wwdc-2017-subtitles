[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.57,0:00:23.63,Default,,0,0,0,,>> Good morning.
Dialogue: 0,0:00:24.01,0:00:25.99,Default,,0,0,0,,Welcome to Drag and Drop with
Dialogue: 0,0:00:25.99,0:00:27.44,Default,,0,0,0,,collection and table view.
Dialogue: 0,0:00:28.10,0:00:29.02,Default,,0,0,0,,I'm Tyler Fox.
Dialogue: 0,0:00:29.02,0:00:30.11,Default,,0,0,0,,I'll later be joined by my
Dialogue: 0,0:00:30.11,0:00:31.54,Default,,0,0,0,,colleague Mohammed Jisrawi.
Dialogue: 0,0:00:32.17,0:00:33.00,Default,,0,0,0,,And unfortunately our
Dialogue: 0,0:00:33.00,0:00:34.51,Default,,0,0,0,,co-presenter Steve Breen had a
Dialogue: 0,0:00:34.51,0:00:36.12,Default,,0,0,0,,last minute medical emergency
Dialogue: 0,0:00:36.45,0:00:38.69,Default,,0,0,0,,earlier this week, so he's been
Dialogue: 0,0:00:38.69,0:00:40.22,Default,,0,0,0,,an amazing trooper and has been
Dialogue: 0,0:00:40.22,0:00:41.79,Default,,0,0,0,,recovering quickly but
Dialogue: 0,0:00:41.79,0:00:42.78,Default,,0,0,0,,unfortunately can't join us on
Dialogue: 0,0:00:42.78,0:00:43.37,Default,,0,0,0,,stage today.
Dialogue: 0,0:00:43.76,0:00:44.58,Default,,0,0,0,,So just a quick round of
Dialogue: 0,0:00:44.58,0:00:45.59,Default,,0,0,0,,applause, because he contributed
Dialogue: 0,0:00:45.59,0:00:46.67,Default,,0,0,0,,a lot to the stuff we're going
Dialogue: 0,0:00:46.67,0:00:48.96,Default,,0,0,0,,to talk about today.
Dialogue: 0,0:00:50.08,0:00:52.88,Default,,0,0,0,,So with that, let's talk about
Dialogue: 0,0:00:52.88,0:00:54.45,Default,,0,0,0,,Drag and Drop in collection and
Dialogue: 0,0:00:54.45,0:00:55.31,Default,,0,0,0,,table views.
Dialogue: 0,0:00:56.16,0:00:58.47,Default,,0,0,0,,We built a nice little app to
Dialogue: 0,0:00:58.47,0:01:00.01,Default,,0,0,0,,showcase some of the ways that
Dialogue: 0,0:01:00.01,0:01:01.51,Default,,0,0,0,,you can use Drag and Drop in
Dialogue: 0,0:01:01.51,0:01:02.58,Default,,0,0,0,,collection and table view.
Dialogue: 0,0:01:03.23,0:01:04.71,Default,,0,0,0,,In this app, it's a nice photo
Dialogue: 0,0:01:04.71,0:01:06.28,Default,,0,0,0,,library where we have albums and
Dialogue: 0,0:01:06.28,0:01:07.55,Default,,0,0,0,,photos in each of those albums,
Dialogue: 0,0:01:07.78,0:01:09.15,Default,,0,0,0,,and you can drag photos around
Dialogue: 0,0:01:09.15,0:01:10.42,Default,,0,0,0,,from one album to another.
Dialogue: 0,0:01:10.85,0:01:12.74,Default,,0,0,0,,You can even actually drop them
Dialogue: 0,0:01:12.74,0:01:14.40,Default,,0,0,0,,directly into that table view of
Dialogue: 0,0:01:14.40,0:01:15.42,Default,,0,0,0,,each of the albums.
Dialogue: 0,0:01:15.83,0:01:17.44,Default,,0,0,0,,And you can reorder photos
Dialogue: 0,0:01:17.51,0:01:19.03,Default,,0,0,0,,within the actual collection
Dialogue: 0,0:01:19.03,0:01:19.40,Default,,0,0,0,,views.
Dialogue: 0,0:01:19.69,0:01:21.07,Default,,0,0,0,,So we're going to show you how
Dialogue: 0,0:01:21.07,0:01:22.55,Default,,0,0,0,,you can actually use our new
Dialogue: 0,0:01:22.55,0:01:24.89,Default,,0,0,0,,APIs and iOS 11 to add Drag and
Dialogue: 0,0:01:24.89,0:01:25.98,Default,,0,0,0,,Drop to collection and table
Dialogue: 0,0:01:25.98,0:01:28.45,Default,,0,0,0,,views in all of your apps.
Dialogue: 0,0:01:28.92,0:01:30.48,Default,,0,0,0,,Now, you've probably been to
Dialogue: 0,0:01:30.48,0:01:31.69,Default,,0,0,0,,some of the sessions earlier
Dialogue: 0,0:01:31.69,0:01:33.88,Default,,0,0,0,,this week about all of this new
Dialogue: 0,0:01:33.88,0:01:35.71,Default,,0,0,0,,great API that we have in UIKit
Dialogue: 0,0:01:35.71,0:01:36.49,Default,,0,0,0,,for Drag and Drop.
Dialogue: 0,0:01:37.31,0:01:38.97,Default,,0,0,0,,So we have this great new drag
Dialogue: 0,0:01:38.97,0:01:40.58,Default,,0,0,0,,interaction and drop interaction
Dialogue: 0,0:01:40.58,0:01:41.51,Default,,0,0,0,,API layer.
Dialogue: 0,0:01:41.86,0:01:43.30,Default,,0,0,0,,We have new enhancements to NS
Dialogue: 0,0:01:43.30,0:01:45.80,Default,,0,0,0,,item provider in iOS 11, but
Dialogue: 0,0:01:45.80,0:01:47.24,Default,,0,0,0,,today, we're going to focus on
Dialogue: 0,0:01:47.24,0:01:48.22,Default,,0,0,0,,UICollectionView and
Dialogue: 0,0:01:48.22,0:01:49.53,Default,,0,0,0,,UITtableView, of course.
Dialogue: 0,0:01:49.88,0:01:51.45,Default,,0,0,0,,And we have new higher level
Dialogue: 0,0:01:51.45,0:01:53.67,Default,,0,0,0,,APIs specific for those classes.
Dialogue: 0,0:01:53.67,0:01:56.23,Default,,0,0,0,,So you might be wondering why do
Dialogue: 0,0:01:56.23,0:01:57.92,Default,,0,0,0,,we need new APIs just for
Dialogue: 0,0:01:57.92,0:01:59.17,Default,,0,0,0,,collection and table view?
Dialogue: 0,0:01:59.55,0:02:00.52,Default,,0,0,0,,It's a great question.
Dialogue: 0,0:02:01.36,0:02:03.45,Default,,0,0,0,,We wanted to build some specific
Dialogue: 0,0:02:03.45,0:02:05.25,Default,,0,0,0,,APIs that are focused around
Dialogue: 0,0:02:05.38,0:02:07.00,Default,,0,0,0,,cells and index paths.
Dialogue: 0,0:02:07.00,0:02:08.22,Default,,0,0,0,,As you know, collection and
Dialogue: 0,0:02:08.22,0:02:10.05,Default,,0,0,0,,table view are composite views
Dialogue: 0,0:02:10.05,0:02:11.83,Default,,0,0,0,,that build up a lot of smaller
Dialogue: 0,0:02:11.83,0:02:13.28,Default,,0,0,0,,cells to display on screen.
Dialogue: 0,0:02:14.23,0:02:15.56,Default,,0,0,0,,And so we realized we can help
Dialogue: 0,0:02:15.56,0:02:16.94,Default,,0,0,0,,you out a lot by speaking in
Dialogue: 0,0:02:16.94,0:02:18.62,Default,,0,0,0,,those native cell and index path
Dialogue: 0,0:02:18.72,0:02:19.96,Default,,0,0,0,,terms that you're familiar with.
Dialogue: 0,0:02:20.96,0:02:22.76,Default,,0,0,0,,We also wanted to make it easy
Dialogue: 0,0:02:22.76,0:02:24.46,Default,,0,0,0,,to build fluid animations and
Dialogue: 0,0:02:24.46,0:02:25.66,Default,,0,0,0,,get consistent behavior with
Dialogue: 0,0:02:25.66,0:02:26.89,Default,,0,0,0,,your collection and table views
Dialogue: 0,0:02:26.89,0:02:27.84,Default,,0,0,0,,across the system.
Dialogue: 0,0:02:29.04,0:02:30.40,Default,,0,0,0,,And we also recognized there are
Dialogue: 0,0:02:30.40,0:02:32.01,Default,,0,0,0,,some specific challenges with
Dialogue: 0,0:02:32.01,0:02:33.46,Default,,0,0,0,,collection and table view to
Dialogue: 0,0:02:33.46,0:02:34.72,Default,,0,0,0,,handle a synchronous data
Dialogue: 0,0:02:34.72,0:02:35.11,Default,,0,0,0,,loading.
Dialogue: 0,0:02:35.11,0:02:36.40,Default,,0,0,0,,We have some really cool new
Dialogue: 0,0:02:36.40,0:02:37.52,Default,,0,0,0,,stuff that we're really excited
Dialogue: 0,0:02:37.52,0:02:38.46,Default,,0,0,0,,to share with you later in the
Dialogue: 0,0:02:38.46,0:02:38.92,Default,,0,0,0,,session.
Dialogue: 0,0:02:39.94,0:02:41.88,Default,,0,0,0,,Finally I'd like to make a note
Dialogue: 0,0:02:41.88,0:02:42.94,Default,,0,0,0,,that throughout this talk we're
Dialogue: 0,0:02:42.94,0:02:44.54,Default,,0,0,0,,going to be showing examples of
Dialogue: 0,0:02:44.54,0:02:45.83,Default,,0,0,0,,collection view and table view
Dialogue: 0,0:02:45.83,0:02:47.98,Default,,0,0,0,,code but you should know that we
Dialogue: 0,0:02:47.98,0:02:49.80,Default,,0,0,0,,have a consistent API for both
Dialogue: 0,0:02:49.80,0:02:51.06,Default,,0,0,0,,of these classes, so sometimes
Dialogue: 0,0:02:51.06,0:02:52.05,Default,,0,0,0,,we're going to show one or the
Dialogue: 0,0:02:52.05,0:02:53.70,Default,,0,0,0,,other and you should know that
Dialogue: 0,0:02:53.70,0:02:54.75,Default,,0,0,0,,[inaudible] some small naming
Dialogue: 0,0:02:54.75,0:02:56.15,Default,,0,0,0,,differences, everything applies
Dialogue: 0,0:02:56.15,0:02:57.01,Default,,0,0,0,,equally to both.
Dialogue: 0,0:02:57.01,0:02:58.31,Default,,0,0,0,,We'll call out the differences
Dialogue: 0,0:02:58.31,0:02:58.99,Default,,0,0,0,,when there are some.
Dialogue: 0,0:02:59.27,0:03:00.72,Default,,0,0,0,,With that, let's go through our
Dialogue: 0,0:03:00.72,0:03:01.44,Default,,0,0,0,,agenda for today.
Dialogue: 0,0:03:01.44,0:03:03.48,Default,,0,0,0,,We're going to start by covering
Dialogue: 0,0:03:03.56,0:03:04.38,Default,,0,0,0,,the basics.
Dialogue: 0,0:03:04.49,0:03:05.85,Default,,0,0,0,,How you can very quickly just
Dialogue: 0,0:03:05.85,0:03:07.12,Default,,0,0,0,,get Drag and Drop up and running
Dialogue: 0,0:03:07.12,0:03:08.41,Default,,0,0,0,,in collection and table views.
Dialogue: 0,0:03:08.88,0:03:10.72,Default,,0,0,0,,And then we're going to focus on
Dialogue: 0,0:03:10.91,0:03:12.11,Default,,0,0,0,,perfecting drops.
Dialogue: 0,0:03:12.47,0:03:13.67,Default,,0,0,0,,With just a little bit more
Dialogue: 0,0:03:13.67,0:03:15.82,Default,,0,0,0,,work, you can make your Drag and
Dialogue: 0,0:03:15.82,0:03:17.30,Default,,0,0,0,,Drop experience in collection
Dialogue: 0,0:03:17.30,0:03:18.36,Default,,0,0,0,,and table view just look
Dialogue: 0,0:03:18.47,0:03:18.97,Default,,0,0,0,,awesome.
Dialogue: 0,0:03:18.97,0:03:19.81,Default,,0,0,0,,And we'll show you some really
Dialogue: 0,0:03:19.81,0:03:21.61,Default,,0,0,0,,cool animations you can add and
Dialogue: 0,0:03:21.61,0:03:22.56,Default,,0,0,0,,a whole bunch of great stuff.
Dialogue: 0,0:03:23.17,0:03:24.39,Default,,0,0,0,,And finally we'll talk about
Dialogue: 0,0:03:24.39,0:03:26.49,Default,,0,0,0,,final touches, some really nice
Dialogue: 0,0:03:26.76,0:03:28.14,Default,,0,0,0,,customizations and additional
Dialogue: 0,0:03:28.14,0:03:28.93,Default,,0,0,0,,things that you can take
Dialogue: 0,0:03:28.93,0:03:30.35,Default,,0,0,0,,advantage of to make that
Dialogue: 0,0:03:30.35,0:03:31.64,Default,,0,0,0,,experience really shine.
Dialogue: 0,0:03:32.43,0:03:33.61,Default,,0,0,0,,To start, I'd like to bring up
Dialogue: 0,0:03:33.61,0:03:35.29,Default,,0,0,0,,Mohammed to tell you all about
Dialogue: 0,0:03:35.29,0:03:36.64,Default,,0,0,0,,the basics of getting Drag and
Dialogue: 0,0:03:36.64,0:03:37.81,Default,,0,0,0,,Drop in your collection and
Dialogue: 0,0:03:37.81,0:03:38.43,Default,,0,0,0,,table views.
Dialogue: 0,0:03:38.47,0:03:38.98,Default,,0,0,0,,Mohammed.
Dialogue: 0,0:03:39.52,0:03:44.64,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:03:45.14,0:03:45.75,Default,,0,0,0,,>> Thanks Tyler.
Dialogue: 0,0:03:47.07,0:03:48.58,Default,,0,0,0,,We wanted to make adopting Drag
Dialogue: 0,0:03:48.58,0:03:50.18,Default,,0,0,0,,and Drop in your apps with
Dialogue: 0,0:03:50.18,0:03:51.21,Default,,0,0,0,,collection and table view as
Dialogue: 0,0:03:51.27,0:03:52.26,Default,,0,0,0,,easy as possible.
Dialogue: 0,0:03:52.46,0:03:54.34,Default,,0,0,0,,So to help you do that we're
Dialogue: 0,0:03:54.34,0:03:56.45,Default,,0,0,0,,introducing two new delegates on
Dialogue: 0,0:03:56.45,0:03:58.17,Default,,0,0,0,,both collection and table view.
Dialogue: 0,0:03:59.04,0:04:00.95,Default,,0,0,0,,The first is the dragDelegate,
Dialogue: 0,0:04:01.42,0:04:04.57,Default,,0,0,0,,which has methods for initiating
Dialogue: 0,0:04:04.57,0:04:05.93,Default,,0,0,0,,and customizing drags.
Dialogue: 0,0:04:06.66,0:04:08.60,Default,,0,0,0,,And second is the dropDelegate,
Dialogue: 0,0:04:08.99,0:04:11.29,Default,,0,0,0,,which has methods for completing
Dialogue: 0,0:04:11.29,0:04:11.60,Default,,0,0,0,,drags.
Dialogue: 0,0:04:11.60,0:04:13.42,Default,,0,0,0,,So basically data transfer,
Dialogue: 0,0:04:13.79,0:04:15.83,Default,,0,0,0,,customizing drop animations,
Dialogue: 0,0:04:15.89,0:04:17.13,Default,,0,0,0,,things like that.
Dialogue: 0,0:04:17.99,0:04:19.97,Default,,0,0,0,,It's important to note that
Dialogue: 0,0:04:19.97,0:04:21.12,Default,,0,0,0,,these two protocols are
Dialogue: 0,0:04:21.12,0:04:22.59,Default,,0,0,0,,completely independent.
Dialogue: 0,0:04:22.99,0:04:25.18,Default,,0,0,0,,You can use one or the other, if
Dialogue: 0,0:04:25.18,0:04:26.28,Default,,0,0,0,,you want one-half of the
Dialogue: 0,0:04:26.28,0:04:29.92,Default,,0,0,0,,experience or you can use both
Dialogue: 0,0:04:30.02,0:04:31.74,Default,,0,0,0,,to have both Drag and Drop.
Dialogue: 0,0:04:32.02,0:04:33.71,Default,,0,0,0,,Using both also unlocks
Dialogue: 0,0:04:33.71,0:04:35.14,Default,,0,0,0,,additional functionality like
Dialogue: 0,0:04:35.14,0:04:36.85,Default,,0,0,0,,reordering within your
Dialogue: 0,0:04:36.85,0:04:38.10,Default,,0,0,0,,collection or table view.
Dialogue: 0,0:04:39.39,0:04:40.91,Default,,0,0,0,,Implementing drags is pretty
Dialogue: 0,0:04:40.91,0:04:41.57,Default,,0,0,0,,straightforward.
Dialogue: 0,0:04:41.85,0:04:45.16,Default,,0,0,0,,You conform to dragDelegate and
Dialogue: 0,0:04:45.16,0:04:49.20,Default,,0,0,0,,implement one required method.
Dialogue: 0,0:04:49.23,0:04:50.96,Default,,0,0,0,,Items for beginning session at
Dialogue: 0,0:04:50.96,0:04:52.87,Default,,0,0,0,,index paths is called when the
Dialogue: 0,0:04:52.87,0:04:54.68,Default,,0,0,0,,user initiates a drag out of
Dialogue: 0,0:04:54.68,0:04:55.52,Default,,0,0,0,,your collection view, so
Dialogue: 0,0:04:55.52,0:04:56.35,Default,,0,0,0,,basically when they start
Dialogue: 0,0:04:56.35,0:04:57.38,Default,,0,0,0,,dragging a cell.
Dialogue: 0,0:04:57.98,0:05:01.12,Default,,0,0,0,,It's the app's responsibility to
Dialogue: 0,0:05:01.27,0:05:03.71,Default,,0,0,0,,use the input session and index
Dialogue: 0,0:05:03.71,0:05:06.72,Default,,0,0,0,,path to figure out how to handle
Dialogue: 0,0:05:06.72,0:05:07.49,Default,,0,0,0,,that drag.
Dialogue: 0,0:05:08.45,0:05:11.24,Default,,0,0,0,,So returning an array of
Dialogue: 0,0:05:11.24,0:05:13.35,Default,,0,0,0,,UIDragItems initiates the drag,
Dialogue: 0,0:05:13.86,0:05:16.05,Default,,0,0,0,,whereas returning an empty array
Dialogue: 0,0:05:16.05,0:05:16.98,Default,,0,0,0,,causes the drag to be ignored.
Dialogue: 0,0:05:20.39,0:05:22.40,Default,,0,0,0,,You might remember that tapping
Dialogue: 0,0:05:22.47,0:05:24.26,Default,,0,0,0,,other items, or other views, in
Dialogue: 0,0:05:24.26,0:05:26.12,Default,,0,0,0,,your app to add them to a drag
Dialogue: 0,0:05:26.12,0:05:27.25,Default,,0,0,0,,that's already in progress is a
Dialogue: 0,0:05:27.25,0:05:28.96,Default,,0,0,0,,key experience of Drag and Drop
Dialogue: 0,0:05:28.96,0:05:29.61,Default,,0,0,0,,on iOS.
Dialogue: 0,0:05:29.73,0:05:32.78,Default,,0,0,0,,Opting into this behavior in
Dialogue: 0,0:05:32.78,0:05:34.15,Default,,0,0,0,,collection and table view is
Dialogue: 0,0:05:34.15,0:05:35.17,Default,,0,0,0,,really easy.
Dialogue: 0,0:05:36.21,0:05:37.79,Default,,0,0,0,,There's an optional method on
Dialogue: 0,0:05:37.79,0:05:39.68,Default,,0,0,0,,dragDelegate that's called
Dialogue: 0,0:05:39.68,0:05:41.85,Default,,0,0,0,,whenever you tap a cell in the
Dialogue: 0,0:05:41.85,0:05:44.23,Default,,0,0,0,,collection view while a drag
Dialogue: 0,0:05:44.23,0:05:45.49,Default,,0,0,0,,session's already in progress.
Dialogue: 0,0:05:46.47,0:05:48.10,Default,,0,0,0,,Items for adding to session at
Dialogue: 0,0:05:48.10,0:05:49.97,Default,,0,0,0,,index path point gives you the
Dialogue: 0,0:05:49.97,0:05:52.66,Default,,0,0,0,,opportunity to return drag items
Dialogue: 0,0:05:52.94,0:05:55.21,Default,,0,0,0,,to add to your in-progress drag.
Dialogue: 0,0:05:56.08,0:05:58.30,Default,,0,0,0,,Returning an empty array from
Dialogue: 0,0:05:58.30,0:05:59.79,Default,,0,0,0,,this method causes the tap to be
Dialogue: 0,0:05:59.79,0:06:00.65,Default,,0,0,0,,handled normally.
Dialogue: 0,0:06:00.65,0:06:02.48,Default,,0,0,0,,So it could be interpreted as a
Dialogue: 0,0:06:02.48,0:06:03.98,Default,,0,0,0,,cell selection, for example.
Dialogue: 0,0:06:08.00,0:06:10.50,Default,,0,0,0,,Accepting a drop is equally
Dialogue: 0,0:06:10.50,0:06:10.82,Default,,0,0,0,,easy.
Dialogue: 0,0:06:10.91,0:06:13.26,Default,,0,0,0,,Similar to the dragDelegate,
Dialogue: 0,0:06:13.26,0:06:14.78,Default,,0,0,0,,there's a single required method
Dialogue: 0,0:06:15.23,0:06:15.98,Default,,0,0,0,,to get you started.
Dialogue: 0,0:06:17.33,0:06:19.21,Default,,0,0,0,,Perform drop with coordinator
Dialogue: 0,0:06:19.25,0:06:21.69,Default,,0,0,0,,gets called when the user lifts
Dialogue: 0,0:06:21.69,0:06:23.06,Default,,0,0,0,,their finger over your
Dialogue: 0,0:06:23.06,0:06:24.39,Default,,0,0,0,,collection view releasing the
Dialogue: 0,0:06:24.39,0:06:25.32,Default,,0,0,0,,dragged items.
Dialogue: 0,0:06:25.57,0:06:28.73,Default,,0,0,0,,This method gives you the
Dialogue: 0,0:06:28.73,0:06:31.21,Default,,0,0,0,,opportunity to handle the drop
Dialogue: 0,0:06:31.21,0:06:33.45,Default,,0,0,0,,using the drop coordinator.
Dialogue: 0,0:06:33.80,0:06:35.39,Default,,0,0,0,,The drop coordinator provides a
Dialogue: 0,0:06:35.39,0:06:36.91,Default,,0,0,0,,lot of convenience methods for
Dialogue: 0,0:06:36.91,0:06:38.49,Default,,0,0,0,,you for doing things like
Dialogue: 0,0:06:39.03,0:06:41.09,Default,,0,0,0,,accessing the dropped items so
Dialogue: 0,0:06:41.09,0:06:42.20,Default,,0,0,0,,you can actually perform the
Dialogue: 0,0:06:42.20,0:06:43.13,Default,,0,0,0,,data transfer.
Dialogue: 0,0:06:44.43,0:06:46.22,Default,,0,0,0,,It gives you some really great
Dialogue: 0,0:06:46.22,0:06:47.92,Default,,0,0,0,,convenience methods for updating
Dialogue: 0,0:06:47.92,0:06:49.62,Default,,0,0,0,,your collection and table view.
Dialogue: 0,0:06:49.97,0:06:54.72,Default,,0,0,0,,And finally it gives you some
Dialogue: 0,0:06:54.81,0:06:57.37,Default,,0,0,0,,ways to specify some default
Dialogue: 0,0:06:57.37,0:06:59.17,Default,,0,0,0,,system animations for your drop.
Dialogue: 0,0:06:59.73,0:07:02.74,Default,,0,0,0,,So now that we've talked about
Dialogue: 0,0:07:02.74,0:07:04.13,Default,,0,0,0,,how easy it is to adopt Drag and
Dialogue: 0,0:07:04.13,0:07:05.39,Default,,0,0,0,,Drop in your collection table
Dialogue: 0,0:07:05.39,0:07:06.63,Default,,0,0,0,,views, let's take a look at it
Dialogue: 0,0:07:06.63,0:07:06.98,Default,,0,0,0,,with a demo.
Dialogue: 0,0:07:17.10,0:07:18.71,Default,,0,0,0,,So I'm going to start out with a
Dialogue: 0,0:07:18.71,0:07:20.59,Default,,0,0,0,,basic gallery application that
Dialogue: 0,0:07:20.59,0:07:21.84,Default,,0,0,0,,uses a collection view to
Dialogue: 0,0:07:21.84,0:07:23.44,Default,,0,0,0,,display a grid of photos.
Dialogue: 0,0:07:23.76,0:07:24.46,Default,,0,0,0,,And we're going to add the
Dialogue: 0,0:07:24.46,0:07:26.19,Default,,0,0,0,,ability to drag images out of
Dialogue: 0,0:07:26.19,0:07:27.49,Default,,0,0,0,,the collection view and to
Dialogue: 0,0:07:27.52,0:07:29.23,Default,,0,0,0,,import images back in by
Dialogue: 0,0:07:29.23,0:07:32.04,Default,,0,0,0,,dropping them from other apps.
Dialogue: 0,0:07:32.04,0:07:33.33,Default,,0,0,0,,So, as you see, I've already
Dialogue: 0,0:07:33.33,0:07:35.11,Default,,0,0,0,,started with kind of a stub
Dialogue: 0,0:07:35.11,0:07:35.97,Default,,0,0,0,,implementation of
Dialogue: 0,0:07:35.97,0:07:37.49,Default,,0,0,0,,itemsForBeginning Session at
Dialogue: 0,0:07:37.49,0:07:38.73,Default,,0,0,0,,IndexPath.
Dialogue: 0,0:07:39.07,0:07:41.94,Default,,0,0,0,,And I'm just going to add some
Dialogue: 0,0:07:41.94,0:07:45.27,Default,,0,0,0,,basic code that goes to our data
Dialogue: 0,0:07:45.27,0:07:48.92,Default,,0,0,0,,source, retrieves a photo model
Dialogue: 0,0:07:48.92,0:07:51.47,Default,,0,0,0,,object, and then pulls out a UI
Dialogue: 0,0:07:51.47,0:07:53.67,Default,,0,0,0,,image from this photo using our
Dialogue: 0,0:07:54.02,0:07:54.80,Default,,0,0,0,,image property.
Dialogue: 0,0:07:55.55,0:07:57.11,Default,,0,0,0,,Since UI image already conforms
Dialogue: 0,0:07:57.11,0:07:59.36,Default,,0,0,0,,to NSItemProvider writing, we
Dialogue: 0,0:07:59.36,0:08:00.91,Default,,0,0,0,,can just use it to create an
Dialogue: 0,0:08:00.91,0:08:01.82,Default,,0,0,0,,NSItemProvider.
Dialogue: 0,0:08:02.52,0:08:04.03,Default,,0,0,0,,For your own model object, if
Dialogue: 0,0:08:04.03,0:08:04.81,Default,,0,0,0,,you're dragging something other
Dialogue: 0,0:08:04.81,0:08:06.81,Default,,0,0,0,,than images, you'll have to make
Dialogue: 0,0:08:06.81,0:08:07.98,Default,,0,0,0,,sure that those objects conform
Dialogue: 0,0:08:07.98,0:08:09.05,Default,,0,0,0,,to NSItemProvider writing.
Dialogue: 0,0:08:09.05,0:08:10.02,Default,,0,0,0,,There's a great session about
Dialogue: 0,0:08:10.02,0:08:11.02,Default,,0,0,0,,that just after this.
Dialogue: 0,0:08:12.36,0:08:13.86,Default,,0,0,0,,Once we have the NSItemProvider,
Dialogue: 0,0:08:13.86,0:08:15.03,Default,,0,0,0,,we can use it to create a
Dialogue: 0,0:08:15.03,0:08:17.04,Default,,0,0,0,,UIDragItem which will return to
Dialogue: 0,0:08:17.04,0:08:18.63,Default,,0,0,0,,the system to start the drag.
Dialogue: 0,0:08:19.32,0:08:20.14,Default,,0,0,0,,So I'm good to go to start
Dialogue: 0,0:08:20.14,0:08:21.58,Default,,0,0,0,,dragging things, but I also want
Dialogue: 0,0:08:21.58,0:08:23.08,Default,,0,0,0,,to add the ability to flock
Dialogue: 0,0:08:23.08,0:08:24.88,Default,,0,0,0,,things to my in progress drag,
Dialogue: 0,0:08:24.88,0:08:26.68,Default,,0,0,0,,so I'm going to add an
Dialogue: 0,0:08:26.68,0:08:28.44,Default,,0,0,0,,implementation of items for
Dialogue: 0,0:08:28.44,0:08:30.51,Default,,0,0,0,,adding to session at IndexPath,
Dialogue: 0,0:08:30.62,0:08:30.98,Default,,0,0,0,,point.
Dialogue: 0,0:08:30.98,0:08:32.11,Default,,0,0,0,,And I'm just going to do the
Dialogue: 0,0:08:32.11,0:08:33.36,Default,,0,0,0,,same thing that I did in my
Dialogue: 0,0:08:33.45,0:08:35.13,Default,,0,0,0,,itemsForBeginning Session method
Dialogue: 0,0:08:35.36,0:08:37.81,Default,,0,0,0,,to just return a bunch of drag
Dialogue: 0,0:08:37.81,0:08:38.25,Default,,0,0,0,,items.
Dialogue: 0,0:08:38.30,0:08:40.27,Default,,0,0,0,,So let's build this real quick
Dialogue: 0,0:08:40.27,0:08:40.98,Default,,0,0,0,,and see what it looks like.
Dialogue: 0,0:08:48.18,0:08:49.62,Default,,0,0,0,,So I'm going to pull up the
Dialogue: 0,0:08:49.62,0:08:52.63,Default,,0,0,0,,photos app and pin it next to my
Dialogue: 0,0:08:52.63,0:08:53.87,Default,,0,0,0,,gallery app.
Dialogue: 0,0:08:54.97,0:08:55.94,Default,,0,0,0,,You'll see that I can now start
Dialogue: 0,0:08:55.94,0:08:57.04,Default,,0,0,0,,dragging things out of my
Dialogue: 0,0:08:57.04,0:08:59.31,Default,,0,0,0,,collection view, and, if I tap
Dialogue: 0,0:08:59.59,0:09:01.09,Default,,0,0,0,,some of these other cells, they
Dialogue: 0,0:09:01.09,0:09:02.69,Default,,0,0,0,,flock over to my in-progress
Dialogue: 0,0:09:02.69,0:09:04.19,Default,,0,0,0,,drag, and I can carry them over
Dialogue: 0,0:09:04.19,0:09:09.49,Default,,0,0,0,,to photos and let go to drop.
Dialogue: 0,0:09:09.66,0:09:11.29,Default,,0,0,0,,So now that we have dragging
Dialogue: 0,0:09:11.29,0:09:12.55,Default,,0,0,0,,items, let's look at adding --
Dialogue: 0,0:09:12.73,0:09:13.75,Default,,0,0,0,,accepting drops.
Dialogue: 0,0:09:13.90,0:09:16.66,Default,,0,0,0,,So, as we discussed earlier,
Dialogue: 0,0:09:16.66,0:09:17.87,Default,,0,0,0,,we'll have to implement the one
Dialogue: 0,0:09:17.87,0:09:19.40,Default,,0,0,0,,required method on collection
Dialogue: 0,0:09:19.40,0:09:20.24,Default,,0,0,0,,view dropDelegate,
Dialogue: 0,0:09:20.71,0:09:22.45,Default,,0,0,0,,performDropWith Coordinator.
Dialogue: 0,0:09:23.89,0:09:24.97,Default,,0,0,0,,Here we're going to take
Dialogue: 0,0:09:24.97,0:09:26.37,Default,,0,0,0,,advantage of the coordinator's
Dialogue: 0,0:09:26.44,0:09:28.16,Default,,0,0,0,,convenience methods to get some
Dialogue: 0,0:09:28.16,0:09:29.72,Default,,0,0,0,,information about the drop and
Dialogue: 0,0:09:29.78,0:09:30.87,Default,,0,0,0,,then actually perform it.
Dialogue: 0,0:09:31.24,0:09:32.91,Default,,0,0,0,,The first thing we'll want to do
Dialogue: 0,0:09:32.91,0:09:34.66,Default,,0,0,0,,is ask the coordinator for the
Dialogue: 0,0:09:34.66,0:09:36.21,Default,,0,0,0,,destination index path.
Dialogue: 0,0:09:36.95,0:09:39.45,Default,,0,0,0,,This IndexPath is derived from
Dialogue: 0,0:09:39.45,0:09:40.63,Default,,0,0,0,,the point at which the user
Dialogue: 0,0:09:40.68,0:09:42.35,Default,,0,0,0,,releases the dragged items.
Dialogue: 0,0:09:42.96,0:09:44.62,Default,,0,0,0,,Since that point could be over a
Dialogue: 0,0:09:44.62,0:09:45.76,Default,,0,0,0,,region of the collection or
Dialogue: 0,0:09:45.76,0:09:47.17,Default,,0,0,0,,table view that's completely
Dialogue: 0,0:09:47.17,0:09:48.69,Default,,0,0,0,,empty, it could be nil.
Dialogue: 0,0:09:48.80,0:09:50.39,Default,,0,0,0,,So we'll just handle that case
Dialogue: 0,0:09:50.39,0:09:53.08,Default,,0,0,0,,here by returning a zero zero
Dialogue: 0,0:09:53.08,0:09:53.87,Default,,0,0,0,,and inserting it at the --
Dialogue: 0,0:09:53.96,0:09:55.36,Default,,0,0,0,,inserting it at the beginning of
Dialogue: 0,0:09:55.36,0:09:56.30,Default,,0,0,0,,our collection view.
Dialogue: 0,0:09:58.90,0:10:01.31,Default,,0,0,0,,Next, we're going to take
Dialogue: 0,0:10:01.31,0:10:02.45,Default,,0,0,0,,advantage of a convenience
Dialogue: 0,0:10:02.45,0:10:04.55,Default,,0,0,0,,method on the drop session to
Dialogue: 0,0:10:04.55,0:10:06.15,Default,,0,0,0,,load all objects of a specific
Dialogue: 0,0:10:06.15,0:10:07.90,Default,,0,0,0,,class in the scenario UI image.
Dialogue: 0,0:10:07.90,0:10:08.82,Default,,0,0,0,,That's what we're interested in.
Dialogue: 0,0:10:08.82,0:10:11.13,Default,,0,0,0,,And then in load objects'
Dialogue: 0,0:10:11.13,0:10:13.97,Default,,0,0,0,,completion closure we'll update
Dialogue: 0,0:10:13.97,0:10:14.98,Default,,0,0,0,,our collection view, like we
Dialogue: 0,0:10:14.98,0:10:16.12,Default,,0,0,0,,normally would, by calling
Dialogue: 0,0:10:16.12,0:10:18.67,Default,,0,0,0,,perform match updates with some
Dialogue: 0,0:10:18.67,0:10:19.93,Default,,0,0,0,,data source updates using a
Dialogue: 0,0:10:19.93,0:10:21.84,Default,,0,0,0,,convenience method that we've
Dialogue: 0,0:10:21.84,0:10:23.14,Default,,0,0,0,,written in the past.
Dialogue: 0,0:10:23.63,0:10:25.10,Default,,0,0,0,,And we'll ask the collection
Dialogue: 0,0:10:25.10,0:10:26.60,Default,,0,0,0,,view to reload the first
Dialogue: 0,0:10:26.60,0:10:27.20,Default,,0,0,0,,section.
Dialogue: 0,0:10:27.63,0:10:28.98,Default,,0,0,0,,So let's give that a quick try.
Dialogue: 0,0:10:38.23,0:10:39.89,Default,,0,0,0,,So now I'm going to pick up a
Dialogue: 0,0:10:40.33,0:10:41.58,Default,,0,0,0,,couple of these photos from the
Dialogue: 0,0:10:41.58,0:10:43.33,Default,,0,0,0,,photo's app and I'm going to
Dialogue: 0,0:10:43.33,0:10:45.36,Default,,0,0,0,,just drop them over my
Dialogue: 0,0:10:45.36,0:10:48.07,Default,,0,0,0,,collection view to accept the
Dialogue: 0,0:10:48.07,0:10:48.41,Default,,0,0,0,,drop.
Dialogue: 0,0:10:49.75,0:10:53.27,Default,,0,0,0,,So I can pick up some items from
Dialogue: 0,0:10:53.27,0:10:54.75,Default,,0,0,0,,photos actually this time.
Dialogue: 0,0:10:55.58,0:10:57.60,Default,,0,0,0,,Go back over to my app and let
Dialogue: 0,0:10:57.60,0:10:58.72,Default,,0,0,0,,go to accept the drop.
Dialogue: 0,0:11:02.02,0:11:03.87,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:11:03.87,0:11:06.35,Default,,0,0,0,,Thank you.
Dialogue: 0,0:11:07.04,0:11:08.38,Default,,0,0,0,,So now that we've actually seen
Dialogue: 0,0:11:08.38,0:11:09.34,Default,,0,0,0,,what it looks like [laughter],
Dialogue: 0,0:11:09.88,0:11:12.08,Default,,0,0,0,,just by adding a couple of
Dialogue: 0,0:11:12.08,0:11:13.31,Default,,0,0,0,,methods, it was easy to get
Dialogue: 0,0:11:13.31,0:11:13.69,Default,,0,0,0,,started.
Dialogue: 0,0:11:13.69,0:11:15.59,Default,,0,0,0,,Now Tyler is going to talk about
Dialogue: 0,0:11:16.01,0:11:17.26,Default,,0,0,0,,how we can build some really
Dialogue: 0,0:11:17.26,0:11:18.60,Default,,0,0,0,,awesome drop animations.
Dialogue: 0,0:11:19.65,0:11:20.68,Default,,0,0,0,,>> Thank you.
Dialogue: 0,0:11:21.52,0:11:24.29,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:11:24.79,0:11:25.49,Default,,0,0,0,,Thanks Mohammed.
Dialogue: 0,0:11:25.99,0:11:26.49,Default,,0,0,0,,All right.
Dialogue: 0,0:11:26.68,0:11:27.93,Default,,0,0,0,,So let's turn our attention to
Dialogue: 0,0:11:27.93,0:11:29.28,Default,,0,0,0,,really focus in now on
Dialogue: 0,0:11:29.46,0:11:31.02,Default,,0,0,0,,perfecting these drops.
Dialogue: 0,0:11:31.58,0:11:33.87,Default,,0,0,0,,And I'll start by talking about
Dialogue: 0,0:11:33.87,0:11:34.60,Default,,0,0,0,,something called a drop
Dialogue: 0,0:11:34.60,0:11:35.07,Default,,0,0,0,,proposal.
Dialogue: 0,0:11:35.39,0:11:36.74,Default,,0,0,0,,So if you've been to some of the
Dialogue: 0,0:11:36.74,0:11:38.33,Default,,0,0,0,,earlier sessions on the other
Dialogue: 0,0:11:38.33,0:11:39.26,Default,,0,0,0,,APIs that are available in
Dialogue: 0,0:11:39.26,0:11:40.42,Default,,0,0,0,,UIKit, this might be familiar.
Dialogue: 0,0:11:40.42,0:11:42.58,Default,,0,0,0,,But a drop proposal is your way
Dialogue: 0,0:11:42.74,0:11:44.38,Default,,0,0,0,,to communicate to the system how
Dialogue: 0,0:11:44.38,0:11:45.62,Default,,0,0,0,,you'd like to handle the drop
Dialogue: 0,0:11:45.62,0:11:47.19,Default,,0,0,0,,session before the user actually
Dialogue: 0,0:11:47.19,0:11:48.79,Default,,0,0,0,,releases their touch to perform
Dialogue: 0,0:11:48.79,0:11:49.42,Default,,0,0,0,,the drop.
Dialogue: 0,0:11:49.73,0:11:51.05,Default,,0,0,0,,The system is going to ask you
Dialogue: 0,0:11:51.05,0:11:52.68,Default,,0,0,0,,to create and return a drop
Dialogue: 0,0:11:52.68,0:11:54.53,Default,,0,0,0,,proposal multiple times while
Dialogue: 0,0:11:54.53,0:11:55.97,Default,,0,0,0,,the user is dragging over the
Dialogue: 0,0:11:55.97,0:11:56.87,Default,,0,0,0,,collection or table view.
Dialogue: 0,0:11:57.65,0:11:59.07,Default,,0,0,0,,Now collection and table view,
Dialogue: 0,0:11:59.12,0:12:00.84,Default,,0,0,0,,each have subclasses of
Dialogue: 0,0:12:00.84,0:12:02.72,Default,,0,0,0,,UIDropProposal, and, as a
Dialogue: 0,0:12:02.72,0:12:03.79,Default,,0,0,0,,result, that means they each
Dialogue: 0,0:12:03.79,0:12:05.18,Default,,0,0,0,,have that same property that
Dialogue: 0,0:12:05.18,0:12:06.73,Default,,0,0,0,,comes from UIDropProposal, which
Dialogue: 0,0:12:06.73,0:12:07.54,Default,,0,0,0,,is an operation.
Dialogue: 0,0:12:08.12,0:12:10.18,Default,,0,0,0,,So this is a value like copy,
Dialogue: 0,0:12:10.42,0:12:12.91,Default,,0,0,0,,move, cancel, or forbidden, and
Dialogue: 0,0:12:12.91,0:12:14.38,Default,,0,0,0,,generally indicates whether or
Dialogue: 0,0:12:14.38,0:12:15.87,Default,,0,0,0,,not you're interested in this
Dialogue: 0,0:12:15.87,0:12:17.91,Default,,0,0,0,,particular drop session and how
Dialogue: 0,0:12:17.91,0:12:19.31,Default,,0,0,0,,you intend to handle the actual
Dialogue: 0,0:12:19.31,0:12:20.88,Default,,0,0,0,,data inside of that drop
Dialogue: 0,0:12:20.88,0:12:21.25,Default,,0,0,0,,session.
Dialogue: 0,0:12:22.27,0:12:23.52,Default,,0,0,0,,But collection and table view
Dialogue: 0,0:12:23.65,0:12:25.15,Default,,0,0,0,,drop proposals don't stop there.
Dialogue: 0,0:12:25.25,0:12:26.58,Default,,0,0,0,,They also have an additional
Dialogue: 0,0:12:26.58,0:12:28.71,Default,,0,0,0,,value, which is a drop intent.
Dialogue: 0,0:12:29.31,0:12:30.03,Default,,0,0,0,,What is this?
Dialogue: 0,0:12:30.90,0:12:31.82,Default,,0,0,0,,This is some additional
Dialogue: 0,0:12:31.82,0:12:33.14,Default,,0,0,0,,information that your app can
Dialogue: 0,0:12:33.14,0:12:34.51,Default,,0,0,0,,provide to the collection or
Dialogue: 0,0:12:34.51,0:12:36.35,Default,,0,0,0,,table view which will let the
Dialogue: 0,0:12:36.35,0:12:37.25,Default,,0,0,0,,collection or table view
Dialogue: 0,0:12:37.25,0:12:38.87,Default,,0,0,0,,actually update their appearance
Dialogue: 0,0:12:38.87,0:12:40.55,Default,,0,0,0,,during the drop session to
Dialogue: 0,0:12:40.55,0:12:43.30,Default,,0,0,0,,reflect what you intend to do.
Dialogue: 0,0:12:43.94,0:12:44.89,Default,,0,0,0,,So let's look at some of the
Dialogue: 0,0:12:44.89,0:12:46.37,Default,,0,0,0,,actual values for this drop
Dialogue: 0,0:12:46.37,0:12:47.93,Default,,0,0,0,,intent to understand it better.
Dialogue: 0,0:12:48.40,0:12:49.89,Default,,0,0,0,,We will start with the default
Dialogue: 0,0:12:49.89,0:12:51.83,Default,,0,0,0,,one, which is the drop intent
Dialogue: 0,0:12:51.83,0:12:52.65,Default,,0,0,0,,unspecified.
Dialogue: 0,0:12:53.34,0:12:55.16,Default,,0,0,0,,With this drop intent,
Dialogue: 0,0:12:55.42,0:12:56.71,Default,,0,0,0,,collection or table view won't
Dialogue: 0,0:12:56.71,0:12:58.25,Default,,0,0,0,,actually change their appearance
Dialogue: 0,0:12:58.25,0:12:59.73,Default,,0,0,0,,at all during the drop session.
Dialogue: 0,0:13:00.08,0:13:01.00,Default,,0,0,0,,As you can see here, when the
Dialogue: 0,0:13:01.00,0:13:02.43,Default,,0,0,0,,user's dragging around over it,
Dialogue: 0,0:13:02.72,0:13:04.27,Default,,0,0,0,,there's just a nice little badge
Dialogue: 0,0:13:04.27,0:13:06.02,Default,,0,0,0,,next to the drag preview and
Dialogue: 0,0:13:06.02,0:13:06.59,Default,,0,0,0,,that's it.
Dialogue: 0,0:13:06.96,0:13:07.98,Default,,0,0,0,,You might choose this drop
Dialogue: 0,0:13:07.98,0:13:09.36,Default,,0,0,0,,intent if you don't yet know,
Dialogue: 0,0:13:09.36,0:13:10.69,Default,,0,0,0,,for example, where the items
Dialogue: 0,0:13:10.69,0:13:11.91,Default,,0,0,0,,will end up when the user
Dialogue: 0,0:13:11.91,0:13:13.06,Default,,0,0,0,,actually realizes their finger
Dialogue: 0,0:13:13.06,0:13:13.89,Default,,0,0,0,,to perform the drop.
Dialogue: 0,0:13:14.39,0:13:15.87,Default,,0,0,0,,Or perhaps the drag session
Dialogue: 0,0:13:15.87,0:13:17.63,Default,,0,0,0,,contains a mix of items, where
Dialogue: 0,0:13:17.63,0:13:18.68,Default,,0,0,0,,they're going to end up in
Dialogue: 0,0:13:18.68,0:13:20.04,Default,,0,0,0,,different locations when the
Dialogue: 0,0:13:20.04,0:13:21.08,Default,,0,0,0,,actual drop occurs.
Dialogue: 0,0:13:21.69,0:13:23.27,Default,,0,0,0,,So that's the first drop intent.
Dialogue: 0,0:13:23.27,0:13:23.99,Default,,0,0,0,,Unspecified.
Dialogue: 0,0:13:24.48,0:13:25.94,Default,,0,0,0,,The second drop intent is
Dialogue: 0,0:13:25.98,0:13:28.03,Default,,0,0,0,,insertAtDestinationIndexPath.
Dialogue: 0,0:13:28.83,0:13:30.41,Default,,0,0,0,,With this drop intent, it means
Dialogue: 0,0:13:30.41,0:13:32.02,Default,,0,0,0,,that you intend to insert a new
Dialogue: 0,0:13:32.02,0:13:33.50,Default,,0,0,0,,item or row into the collection
Dialogue: 0,0:13:33.50,0:13:35.08,Default,,0,0,0,,or table view at the destination
Dialogue: 0,0:13:35.08,0:13:35.96,Default,,0,0,0,,index path.
Dialogue: 0,0:13:36.21,0:13:37.68,Default,,0,0,0,,And, as you can see, collection
Dialogue: 0,0:13:37.68,0:13:38.66,Default,,0,0,0,,and table view will actually
Dialogue: 0,0:13:38.66,0:13:40.78,Default,,0,0,0,,open up a gap at this location
Dialogue: 0,0:13:40.96,0:13:42.14,Default,,0,0,0,,to let the user know that's the
Dialogue: 0,0:13:42.14,0:13:43.34,Default,,0,0,0,,location where their drop will
Dialogue: 0,0:13:43.34,0:13:43.97,Default,,0,0,0,,be accepted.
Dialogue: 0,0:13:44.98,0:13:47.18,Default,,0,0,0,,The third drop intent is
Dialogue: 0,0:13:47.25,0:13:49.39,Default,,0,0,0,,insertIntoDestinationIndexPath.
Dialogue: 0,0:13:50.36,0:13:52.48,Default,,0,0,0,,This is something that you want
Dialogue: 0,0:13:52.48,0:13:54.26,Default,,0,0,0,,to use when the user is dragging
Dialogue: 0,0:13:54.26,0:13:56.43,Default,,0,0,0,,over a cell that represents some
Dialogue: 0,0:13:56.43,0:13:58.18,Default,,0,0,0,,sort of container of items.
Dialogue: 0,0:13:58.18,0:14:00.27,Default,,0,0,0,,For example, here we have photo
Dialogue: 0,0:14:00.27,0:14:02.40,Default,,0,0,0,,albums, containers of photos, or
Dialogue: 0,0:14:02.40,0:14:04.03,Default,,0,0,0,,maybe you have a folder cell or
Dialogue: 0,0:14:04.03,0:14:04.87,Default,,0,0,0,,a list cell.
Dialogue: 0,0:14:05.65,0:14:06.86,Default,,0,0,0,,In this case, you intend to
Dialogue: 0,0:14:06.86,0:14:09.02,Default,,0,0,0,,insert the dropped items inside
Dialogue: 0,0:14:09.02,0:14:09.80,Default,,0,0,0,,of that container.
Dialogue: 0,0:14:10.24,0:14:11.78,Default,,0,0,0,,And so, table view, for example,
Dialogue: 0,0:14:11.78,0:14:13.28,Default,,0,0,0,,is going to highlight the row at
Dialogue: 0,0:14:13.28,0:14:14.55,Default,,0,0,0,,the destination index path so
Dialogue: 0,0:14:14.55,0:14:15.99,Default,,0,0,0,,the user knows that the drop
Dialogue: 0,0:14:15.99,0:14:17.36,Default,,0,0,0,,will be accepted inside that
Dialogue: 0,0:14:17.36,0:14:17.62,Default,,0,0,0,,row.
Dialogue: 0,0:14:18.25,0:14:20.93,Default,,0,0,0,,Now there's one more drop intent
Dialogue: 0,0:14:20.93,0:14:22.43,Default,,0,0,0,,value which is specific to
Dialogue: 0,0:14:22.43,0:14:24.19,Default,,0,0,0,,UITableView and that's the
Dialogue: 0,0:14:24.24,0:14:25.75,Default,,0,0,0,,automatic drop intent.
Dialogue: 0,0:14:26.80,0:14:27.66,Default,,0,0,0,,This is something that you
Dialogue: 0,0:14:27.66,0:14:28.99,Default,,0,0,0,,should use instead of
Dialogue: 0,0:14:29.14,0:14:31.31,Default,,0,0,0,,insertIntoDestinationIndexPath.
Dialogue: 0,0:14:31.63,0:14:33.25,Default,,0,0,0,,And this drop intent means that
Dialogue: 0,0:14:33.25,0:14:35.00,Default,,0,0,0,,you can either drop into an
Dialogue: 0,0:14:35.00,0:14:37.01,Default,,0,0,0,,existing container row at that
Dialogue: 0,0:14:37.01,0:14:39.00,Default,,0,0,0,,index path or you could move the
Dialogue: 0,0:14:39.00,0:14:40.05,Default,,0,0,0,,container row down out of the
Dialogue: 0,0:14:40.05,0:14:41.88,Default,,0,0,0,,way and insert a new row into
Dialogue: 0,0:14:41.88,0:14:43.28,Default,,0,0,0,,the table view at the same index
Dialogue: 0,0:14:43.28,0:14:43.71,Default,,0,0,0,,path.
Dialogue: 0,0:14:44.11,0:14:45.06,Default,,0,0,0,,And table view is going to
Dialogue: 0,0:14:45.06,0:14:46.87,Default,,0,0,0,,automatically tell you, when the
Dialogue: 0,0:14:46.87,0:14:48.54,Default,,0,0,0,,drop occurs, which one it is.
Dialogue: 0,0:14:48.54,0:14:49.39,Default,,0,0,0,,It'll pick between
Dialogue: 0,0:14:49.39,0:14:51.62,Default,,0,0,0,,insertAtDestinationIndexPath and
Dialogue: 0,0:14:51.62,0:14:53.32,Default,,0,0,0,,insertIntoDestinationIndexPath
Dialogue: 0,0:14:53.32,0:14:53.79,Default,,0,0,0,,for you.
Dialogue: 0,0:14:54.59,0:14:56.63,Default,,0,0,0,,So let's look at an example of
Dialogue: 0,0:14:56.63,0:14:57.74,Default,,0,0,0,,how you can provide a drop
Dialogue: 0,0:14:57.74,0:14:58.68,Default,,0,0,0,,proposal in code.
Dialogue: 0,0:14:59.29,0:15:00.76,Default,,0,0,0,,It starts by implementing this
Dialogue: 0,0:15:00.76,0:15:01.54,Default,,0,0,0,,optional method,
Dialogue: 0,0:15:01.84,0:15:02.89,Default,,0,0,0,,dropSessionDidUpdate,
Dialogue: 0,0:15:02.89,0:15:04.29,Default,,0,0,0,,withDestinationIndexPath.
Dialogue: 0,0:15:05.09,0:15:06.43,Default,,0,0,0,,Here this will be called
Dialogue: 0,0:15:06.88,0:15:08.13,Default,,0,0,0,,whenever the table view or
Dialogue: 0,0:15:08.13,0:15:09.41,Default,,0,0,0,,collection view detects that
Dialogue: 0,0:15:09.41,0:15:10.50,Default,,0,0,0,,there's a drop session moving
Dialogue: 0,0:15:10.50,0:15:11.44,Default,,0,0,0,,over it.
Dialogue: 0,0:15:11.80,0:15:12.93,Default,,0,0,0,,Now this method is optional, but
Dialogue: 0,0:15:12.93,0:15:14.20,Default,,0,0,0,,we strongly recommend that you
Dialogue: 0,0:15:14.20,0:15:15.40,Default,,0,0,0,,implement it because this is how
Dialogue: 0,0:15:15.40,0:15:16.79,Default,,0,0,0,,you provide your drop proposal.
Dialogue: 0,0:15:17.75,0:15:19.33,Default,,0,0,0,,Now because this is called all
Dialogue: 0,0:15:19.33,0:15:20.49,Default,,0,0,0,,the time when the collection or
Dialogue: 0,0:15:20.49,0:15:21.88,Default,,0,0,0,,table view sees a drop session
Dialogue: 0,0:15:21.88,0:15:22.99,Default,,0,0,0,,over it and whenever that drop
Dialogue: 0,0:15:22.99,0:15:24.45,Default,,0,0,0,,session moves, it's going to be
Dialogue: 0,0:15:24.45,0:15:25.32,Default,,0,0,0,,called very frequently.
Dialogue: 0,0:15:25.54,0:15:27.04,Default,,0,0,0,,And so your implementation needs
Dialogue: 0,0:15:27.04,0:15:28.32,Default,,0,0,0,,to be very efficient and return
Dialogue: 0,0:15:28.32,0:15:30.28,Default,,0,0,0,,quickly to avoid hanging the
Dialogue: 0,0:15:30.28,0:15:32.04,Default,,0,0,0,,main thread.
Dialogue: 0,0:15:32.38,0:15:33.58,Default,,0,0,0,,Now I'd like to call your
Dialogue: 0,0:15:33.58,0:15:34.31,Default,,0,0,0,,attention to this
Dialogue: 0,0:15:34.31,0:15:35.56,Default,,0,0,0,,destinationIndexPath that's
Dialogue: 0,0:15:35.56,0:15:36.13,Default,,0,0,0,,passed in.
Dialogue: 0,0:15:36.45,0:15:37.91,Default,,0,0,0,,Once again, this is our proposal
Dialogue: 0,0:15:37.91,0:15:39.38,Default,,0,0,0,,of where we think that you would
Dialogue: 0,0:15:39.38,0:15:41.43,Default,,0,0,0,,like to insert any items into
Dialogue: 0,0:15:41.43,0:15:42.35,Default,,0,0,0,,the collection or table view.
Dialogue: 0,0:15:43.20,0:15:45.09,Default,,0,0,0,,Now this destinationIndexPath
Dialogue: 0,0:15:45.14,0:15:46.86,Default,,0,0,0,,will be nil in some cases.
Dialogue: 0,0:15:46.86,0:15:48.54,Default,,0,0,0,,In particular, when the user's
Dialogue: 0,0:15:48.54,0:15:50.10,Default,,0,0,0,,dragging over a region of the
Dialogue: 0,0:15:50.10,0:15:51.07,Default,,0,0,0,,collection or table view where
Dialogue: 0,0:15:51.07,0:15:52.22,Default,,0,0,0,,there are no cells.
Dialogue: 0,0:15:52.68,0:15:54.66,Default,,0,0,0,,And another very important point
Dialogue: 0,0:15:54.66,0:15:56.09,Default,,0,0,0,,about this that might trip you
Dialogue: 0,0:15:56.09,0:15:57.18,Default,,0,0,0,,up, so be careful.
Dialogue: 0,0:15:57.68,0:15:59.31,Default,,0,0,0,,When the user drags over the end
Dialogue: 0,0:15:59.31,0:16:00.93,Default,,0,0,0,,of an existing section in the
Dialogue: 0,0:16:00.93,0:16:01.85,Default,,0,0,0,,collection or table view.
Dialogue: 0,0:16:02.36,0:16:04.03,Default,,0,0,0,,This index path might be equal
Dialogue: 0,0:16:04.03,0:16:05.61,Default,,0,0,0,,to the count of the number of
Dialogue: 0,0:16:05.61,0:16:07.12,Default,,0,0,0,,items in that section, which
Dialogue: 0,0:16:07.12,0:16:08.85,Default,,0,0,0,,means it may not correspond to
Dialogue: 0,0:16:08.85,0:16:10.10,Default,,0,0,0,,an existing item in that
Dialogue: 0,0:16:10.10,0:16:10.58,Default,,0,0,0,,section.
Dialogue: 0,0:16:10.97,0:16:12.15,Default,,0,0,0,,So be careful because that's an
Dialogue: 0,0:16:12.15,0:16:13.41,Default,,0,0,0,,insert at the very end of the
Dialogue: 0,0:16:13.41,0:16:13.82,Default,,0,0,0,,section.
Dialogue: 0,0:16:14.63,0:16:16.33,Default,,0,0,0,,So let's look at a quick example
Dialogue: 0,0:16:16.33,0:16:17.40,Default,,0,0,0,,of how you could implement this.
Dialogue: 0,0:16:17.63,0:16:18.85,Default,,0,0,0,,In this example, we'll look at
Dialogue: 0,0:16:18.88,0:16:20.70,Default,,0,0,0,,the local drag session property
Dialogue: 0,0:16:20.94,0:16:22.44,Default,,0,0,0,,on the drop session to see if
Dialogue: 0,0:16:22.44,0:16:24.15,Default,,0,0,0,,the drag originated from our app
Dialogue: 0,0:16:24.15,0:16:24.58,Default,,0,0,0,,or not.
Dialogue: 0,0:16:24.99,0:16:26.23,Default,,0,0,0,,If it's from our app, we can use
Dialogue: 0,0:16:26.23,0:16:28.07,Default,,0,0,0,,a drop operation of move and
Dialogue: 0,0:16:28.41,0:16:29.44,Default,,0,0,0,,otherwise we'll use a drop
Dialogue: 0,0:16:29.44,0:16:30.47,Default,,0,0,0,,operation of copy.
Dialogue: 0,0:16:30.93,0:16:31.99,Default,,0,0,0,,Both cases here we're going to
Dialogue: 0,0:16:31.99,0:16:33.05,Default,,0,0,0,,insert a new item into the
Dialogue: 0,0:16:33.05,0:16:34.16,Default,,0,0,0,,collection view, so we'll use
Dialogue: 0,0:16:34.16,0:16:36.46,Default,,0,0,0,,insertAtDestinationIndexPath as
Dialogue: 0,0:16:36.88,0:16:38.08,Default,,0,0,0,,our intent.
Dialogue: 0,0:16:38.08,0:16:40.16,Default,,0,0,0,,Okay. So that's drop proposals
Dialogue: 0,0:16:40.16,0:16:41.41,Default,,0,0,0,,which you provide while the
Dialogue: 0,0:16:41.41,0:16:42.82,Default,,0,0,0,,user's still dragging over the
Dialogue: 0,0:16:42.82,0:16:43.68,Default,,0,0,0,,collection or table view.
Dialogue: 0,0:16:44.34,0:16:45.58,Default,,0,0,0,,Let's switch gears now to talk
Dialogue: 0,0:16:45.58,0:16:47.06,Default,,0,0,0,,about dropping when the user
Dialogue: 0,0:16:47.06,0:16:48.47,Default,,0,0,0,,actually releases their touch
Dialogue: 0,0:16:48.64,0:16:49.56,Default,,0,0,0,,and you need to perform the
Dialogue: 0,0:16:49.56,0:16:49.86,Default,,0,0,0,,drop.
Dialogue: 0,0:16:51.23,0:16:52.85,Default,,0,0,0,,To set up some great animations,
Dialogue: 0,0:16:53.08,0:16:54.50,Default,,0,0,0,,you can use the drop coordinator
Dialogue: 0,0:16:54.50,0:16:56.02,Default,,0,0,0,,that we pass in to perform drop
Dialogue: 0,0:16:56.02,0:16:56.69,Default,,0,0,0,,with coordinator.
Dialogue: 0,0:16:57.50,0:16:58.97,Default,,0,0,0,,Collection and table view will
Dialogue: 0,0:16:58.97,0:17:00.49,Default,,0,0,0,,provide some basic animations by
Dialogue: 0,0:17:00.49,0:17:01.47,Default,,0,0,0,,default if you do nothing.
Dialogue: 0,0:17:02.00,0:17:03.68,Default,,0,0,0,,But for the best effects, you
Dialogue: 0,0:17:03.68,0:17:04.92,Default,,0,0,0,,can use the drop coordinator to
Dialogue: 0,0:17:04.92,0:17:06.99,Default,,0,0,0,,set up specific animations for
Dialogue: 0,0:17:06.99,0:17:08.89,Default,,0,0,0,,each item independently in the
Dialogue: 0,0:17:08.89,0:17:09.58,Default,,0,0,0,,drop session.
Dialogue: 0,0:17:10.50,0:17:11.31,Default,,0,0,0,,Let's look at some of the
Dialogue: 0,0:17:11.31,0:17:12.06,Default,,0,0,0,,methods that we've made
Dialogue: 0,0:17:12.06,0:17:13.75,Default,,0,0,0,,available for you to do that.
Dialogue: 0,0:17:14.42,0:17:16.97,Default,,0,0,0,,The first one is dropping to an
Dialogue: 0,0:17:17.03,0:17:17.74,Default,,0,0,0,,item or row.
Dialogue: 0,0:17:18.43,0:17:20.47,Default,,0,0,0,,This is a drop animation that
Dialogue: 0,0:17:20.47,0:17:21.84,Default,,0,0,0,,you'll use with the intent
Dialogue: 0,0:17:21.94,0:17:23.76,Default,,0,0,0,,insertAtDestinationIndexPath.
Dialogue: 0,0:17:24.55,0:17:25.85,Default,,0,0,0,,And you want to use this when
Dialogue: 0,0:17:25.85,0:17:27.26,Default,,0,0,0,,you've already performed an
Dialogue: 0,0:17:27.29,0:17:29.39,Default,,0,0,0,,update to insert a new item or
Dialogue: 0,0:17:29.39,0:17:30.61,Default,,0,0,0,,row into the collection or table
Dialogue: 0,0:17:30.61,0:17:30.83,Default,,0,0,0,,view.
Dialogue: 0,0:17:31.21,0:17:32.68,Default,,0,0,0,,So let's look at an example in
Dialogue: 0,0:17:32.68,0:17:33.79,Default,,0,0,0,,code to see how we can implement
Dialogue: 0,0:17:33.79,0:17:33.98,Default,,0,0,0,,this.
Dialogue: 0,0:17:38.02,0:17:39.21,Default,,0,0,0,,Inside of performDropWith
Dialogue: 0,0:17:39.21,0:17:40.70,Default,,0,0,0,,coordinator, we need to start by
Dialogue: 0,0:17:40.70,0:17:41.79,Default,,0,0,0,,gathering up a few local
Dialogue: 0,0:17:41.79,0:17:42.86,Default,,0,0,0,,variables that we need.
Dialogue: 0,0:17:42.86,0:17:44.03,Default,,0,0,0,,In particular, we'll need our
Dialogue: 0,0:17:44.03,0:17:46.05,Default,,0,0,0,,destinationIndexPath, and we'll
Dialogue: 0,0:17:46.05,0:17:47.74,Default,,0,0,0,,also use the local object
Dialogue: 0,0:17:47.74,0:17:49.48,Default,,0,0,0,,property on the drag item to
Dialogue: 0,0:17:49.48,0:17:51.33,Default,,0,0,0,,actually get at the underlying
Dialogue: 0,0:17:51.33,0:17:52.31,Default,,0,0,0,,data synchronously.
Dialogue: 0,0:17:52.31,0:17:53.17,Default,,0,0,0,,This is something that you can
Dialogue: 0,0:17:53.17,0:17:54.81,Default,,0,0,0,,do when the drag session starts
Dialogue: 0,0:17:54.81,0:17:56.43,Default,,0,0,0,,from your own app.
Dialogue: 0,0:17:57.05,0:17:58.67,Default,,0,0,0,,Next, because we have that data
Dialogue: 0,0:17:58.67,0:17:59.93,Default,,0,0,0,,right away we can perform an
Dialogue: 0,0:17:59.93,0:18:01.33,Default,,0,0,0,,immediate insertion into our
Dialogue: 0,0:18:01.33,0:18:02.44,Default,,0,0,0,,collection view, so we'll call
Dialogue: 0,0:18:02.44,0:18:03.53,Default,,0,0,0,,performBatchUpdates.
Dialogue: 0,0:18:03.76,0:18:04.99,Default,,0,0,0,,And inside, of course, we'll do
Dialogue: 0,0:18:04.99,0:18:06.62,Default,,0,0,0,,the usual update of our data
Dialogue: 0,0:18:06.62,0:18:07.85,Default,,0,0,0,,source incorporating that new
Dialogue: 0,0:18:07.85,0:18:08.32,Default,,0,0,0,,image.
Dialogue: 0,0:18:08.64,0:18:09.81,Default,,0,0,0,,And we'll insert an item in the
Dialogue: 0,0:18:09.81,0:18:10.37,Default,,0,0,0,,collection view.
Dialogue: 0,0:18:10.89,0:18:12.39,Default,,0,0,0,,And now, because we've actually
Dialogue: 0,0:18:12.39,0:18:14.17,Default,,0,0,0,,already inserted that cell, we
Dialogue: 0,0:18:14.17,0:18:15.89,Default,,0,0,0,,can tell the drop coordinator to
Dialogue: 0,0:18:15.89,0:18:18.36,Default,,0,0,0,,drop the item to that specific
Dialogue: 0,0:18:18.43,0:18:19.77,Default,,0,0,0,,cell at that index path.
Dialogue: 0,0:18:20.08,0:18:20.92,Default,,0,0,0,,This is going to set up that
Dialogue: 0,0:18:20.92,0:18:22.25,Default,,0,0,0,,nice animation you saw where the
Dialogue: 0,0:18:22.25,0:18:23.86,Default,,0,0,0,,drag preview morphs right to the
Dialogue: 0,0:18:23.86,0:18:25.09,Default,,0,0,0,,final cell that we inserted.
Dialogue: 0,0:18:25.95,0:18:27.34,Default,,0,0,0,,All right.
Dialogue: 0,0:18:27.67,0:18:29.42,Default,,0,0,0,,The next drop animation is
Dialogue: 0,0:18:29.42,0:18:31.31,Default,,0,0,0,,dropping into an item or row.
Dialogue: 0,0:18:32.12,0:18:33.14,Default,,0,0,0,,As you might imagine, this is
Dialogue: 0,0:18:33.14,0:18:34.54,Default,,0,0,0,,generally used with the intent
Dialogue: 0,0:18:34.54,0:18:36.66,Default,,0,0,0,,insertIntoDestinationIndexPath.
Dialogue: 0,0:18:37.32,0:18:38.54,Default,,0,0,0,,In this case, we're inserting
Dialogue: 0,0:18:38.54,0:18:40.15,Default,,0,0,0,,the item inside of a container
Dialogue: 0,0:18:40.40,0:18:40.85,Default,,0,0,0,,cell.
Dialogue: 0,0:18:41.44,0:18:43.33,Default,,0,0,0,,And so the item is going -- we
Dialogue: 0,0:18:43.33,0:18:44.21,Default,,0,0,0,,want the animation to kind of
Dialogue: 0,0:18:44.21,0:18:46.15,Default,,0,0,0,,scale down with this nice
Dialogue: 0,0:18:46.15,0:18:47.63,Default,,0,0,0,,animation right to some region
Dialogue: 0,0:18:47.63,0:18:48.86,Default,,0,0,0,,inside of that cell to show the
Dialogue: 0,0:18:48.86,0:18:50.19,Default,,0,0,0,,user where this drop was
Dialogue: 0,0:18:50.37,0:18:50.85,Default,,0,0,0,,accepted.
Dialogue: 0,0:18:51.72,0:18:52.63,Default,,0,0,0,,So let's look at an example of
Dialogue: 0,0:18:52.63,0:18:54.01,Default,,0,0,0,,how we could set this one up in
Dialogue: 0,0:18:54.01,0:18:54.52,Default,,0,0,0,,some code.
Dialogue: 0,0:18:55.37,0:18:56.86,Default,,0,0,0,,Once again, we're back in our
Dialogue: 0,0:18:57.23,0:18:59.68,Default,,0,0,0,,performDropWith coordinator and
Dialogue: 0,0:18:59.90,0:19:01.25,Default,,0,0,0,,we have basically the same code
Dialogue: 0,0:19:01.25,0:19:01.99,Default,,0,0,0,,here that you saw from the
Dialogue: 0,0:19:01.99,0:19:02.89,Default,,0,0,0,,previous example.
Dialogue: 0,0:19:03.26,0:19:04.61,Default,,0,0,0,,So just gathering up our
Dialogue: 0,0:19:04.61,0:19:05.91,Default,,0,0,0,,destinationIndexPath and the
Dialogue: 0,0:19:05.91,0:19:07.53,Default,,0,0,0,,image that actually was in the
Dialogue: 0,0:19:07.53,0:19:08.24,Default,,0,0,0,,drag session.
Dialogue: 0,0:19:09.35,0:19:10.50,Default,,0,0,0,,Now there's one additional check
Dialogue: 0,0:19:10.50,0:19:11.76,Default,,0,0,0,,that we do want to do, in this
Dialogue: 0,0:19:11.76,0:19:13.21,Default,,0,0,0,,case, which is to make sure that
Dialogue: 0,0:19:13.21,0:19:14.65,Default,,0,0,0,,that destinationIndexPath
Dialogue: 0,0:19:14.74,0:19:16.61,Default,,0,0,0,,corresponds to an actual row in
Dialogue: 0,0:19:16.61,0:19:17.22,Default,,0,0,0,,our table view.
Dialogue: 0,0:19:17.51,0:19:18.80,Default,,0,0,0,,Otherwise, we can't drop into
Dialogue: 0,0:19:18.80,0:19:20.10,Default,,0,0,0,,anything in that album.
Dialogue: 0,0:19:20.77,0:19:21.95,Default,,0,0,0,,If it does, we can actually
Dialogue: 0,0:19:21.95,0:19:23.73,Default,,0,0,0,,incorporate the data inside the
Dialogue: 0,0:19:23.73,0:19:25.06,Default,,0,0,0,,underlying data structure for
Dialogue: 0,0:19:25.06,0:19:25.85,Default,,0,0,0,,that photo album.
Dialogue: 0,0:19:26.57,0:19:27.82,Default,,0,0,0,,And then we're ready to set up
Dialogue: 0,0:19:27.82,0:19:28.51,Default,,0,0,0,,our animation.
Dialogue: 0,0:19:28.91,0:19:30.44,Default,,0,0,0,,So, in this case, we'll get the
Dialogue: 0,0:19:30.44,0:19:32.76,Default,,0,0,0,,cell for that particular row and
Dialogue: 0,0:19:32.76,0:19:33.56,Default,,0,0,0,,we're going to animate to the
Dialogue: 0,0:19:33.56,0:19:34.41,Default,,0,0,0,,image view in that cell.
Dialogue: 0,0:19:34.41,0:19:35.40,Default,,0,0,0,,So we'll get the image view.
Dialogue: 0,0:19:35.78,0:19:37.42,Default,,0,0,0,,Then we call coordinator drop
Dialogue: 0,0:19:37.42,0:19:40.01,Default,,0,0,0,,item IntoRowAt index path rect.
Dialogue: 0,0:19:40.50,0:19:41.59,Default,,0,0,0,,We're passing a rect that it's
Dialogue: 0,0:19:41.59,0:19:42.82,Default,,0,0,0,,in the coordinate space of the
Dialogue: 0,0:19:42.82,0:19:44.64,Default,,0,0,0,,cell, so we translate that image
Dialogue: 0,0:19:44.64,0:19:46.75,Default,,0,0,0,,view's bounds up to the cell's
Dialogue: 0,0:19:46.75,0:19:48.38,Default,,0,0,0,,coordinate space.
Dialogue: 0,0:19:48.98,0:19:49.86,Default,,0,0,0,,So to recap.
Dialogue: 0,0:19:49.86,0:19:51.09,Default,,0,0,0,,Now, we've talked about two drop
Dialogue: 0,0:19:51.09,0:19:51.55,Default,,0,0,0,,animations.
Dialogue: 0,0:19:51.55,0:19:52.82,Default,,0,0,0,,We have dropping to a newly
Dialogue: 0,0:19:52.82,0:19:53.55,Default,,0,0,0,,inserted cell.
Dialogue: 0,0:19:54.23,0:19:55.87,Default,,0,0,0,,We have dropping to a rect
Dialogue: 0,0:19:55.87,0:19:57.07,Default,,0,0,0,,inside a container cell.
Dialogue: 0,0:19:57.80,0:19:59.08,Default,,0,0,0,,There's a third drop animation
Dialogue: 0,0:19:59.08,0:20:00.66,Default,,0,0,0,,method available which is
Dialogue: 0,0:20:00.66,0:20:01.75,Default,,0,0,0,,dropping to a target.
Dialogue: 0,0:20:02.39,0:20:03.52,Default,,0,0,0,,This is how you can perform
Dialogue: 0,0:20:03.59,0:20:04.98,Default,,0,0,0,,completely custom animations.
Dialogue: 0,0:20:04.98,0:20:06.45,Default,,0,0,0,,For example, animating to a
Dialogue: 0,0:20:06.45,0:20:08.10,Default,,0,0,0,,location anywhere in your app
Dialogue: 0,0:20:08.21,0:20:09.37,Default,,0,0,0,,with an optional transform.
Dialogue: 0,0:20:09.77,0:20:11.12,Default,,0,0,0,,So maybe you want to animate to
Dialogue: 0,0:20:11.12,0:20:12.69,Default,,0,0,0,,a tab bar or bar button item or
Dialogue: 0,0:20:12.69,0:20:13.39,Default,,0,0,0,,something like that.
Dialogue: 0,0:20:14.53,0:20:15.64,Default,,0,0,0,,Those are the three basic drop
Dialogue: 0,0:20:15.64,0:20:16.33,Default,,0,0,0,,animations.
Dialogue: 0,0:20:16.47,0:20:19.01,Default,,0,0,0,,But I'd like to step back to the
Dialogue: 0,0:20:19.01,0:20:20.21,Default,,0,0,0,,first one that we talked about
Dialogue: 0,0:20:20.53,0:20:21.68,Default,,0,0,0,,and revisit that just for a
Dialogue: 0,0:20:21.68,0:20:21.94,Default,,0,0,0,,second.
Dialogue: 0,0:20:21.99,0:20:23.38,Default,,0,0,0,,Dropping to a newly inserted
Dialogue: 0,0:20:23.38,0:20:24.02,Default,,0,0,0,,item or row.
Dialogue: 0,0:20:24.89,0:20:26.31,Default,,0,0,0,,As we've discussed, you actually
Dialogue: 0,0:20:26.31,0:20:27.75,Default,,0,0,0,,need to already have performed
Dialogue: 0,0:20:27.75,0:20:28.83,Default,,0,0,0,,the update on the collection or
Dialogue: 0,0:20:28.83,0:20:30.18,Default,,0,0,0,,table view to insert that new
Dialogue: 0,0:20:30.18,0:20:31.58,Default,,0,0,0,,cell before you can use this
Dialogue: 0,0:20:31.58,0:20:31.94,Default,,0,0,0,,method.
Dialogue: 0,0:20:32.60,0:20:33.58,Default,,0,0,0,,But what if the data hasn't
Dialogue: 0,0:20:33.58,0:20:34.08,Default,,0,0,0,,loaded yet?
Dialogue: 0,0:20:36.46,0:20:37.85,Default,,0,0,0,,If you're dragging between
Dialogue: 0,0:20:37.85,0:20:40.42,Default,,0,0,0,,applications on iOS, we always
Dialogue: 0,0:20:40.42,0:20:42.09,Default,,0,0,0,,have an asynchronous data load.
Dialogue: 0,0:20:42.77,0:20:44.68,Default,,0,0,0,,But these animations need to be
Dialogue: 0,0:20:44.68,0:20:47.02,Default,,0,0,0,,specified immediately before you
Dialogue: 0,0:20:47.02,0:20:48.30,Default,,0,0,0,,return from performDropWith
Dialogue: 0,0:20:48.30,0:20:48.80,Default,,0,0,0,,coordinator.
Dialogue: 0,0:20:49.29,0:20:51.37,Default,,0,0,0,,So to solve for that, that would
Dialogue: 0,0:20:51.37,0:20:52.46,Default,,0,0,0,,mean you'd have to do some
Dialogue: 0,0:20:52.46,0:20:53.62,Default,,0,0,0,,pretty difficult bookkeeping,
Dialogue: 0,0:20:53.84,0:20:54.70,Default,,0,0,0,,because you're going to have to
Dialogue: 0,0:20:54.70,0:20:56.20,Default,,0,0,0,,do temporary insertions in the
Dialogue: 0,0:20:56.20,0:20:57.56,Default,,0,0,0,,collection or table view, just
Dialogue: 0,0:20:57.56,0:20:58.86,Default,,0,0,0,,to set up these animations.
Dialogue: 0,0:20:59.13,0:20:59.92,Default,,0,0,0,,Which, of course, would mean
Dialogue: 0,0:20:59.92,0:21:01.05,Default,,0,0,0,,updating your data source with
Dialogue: 0,0:21:01.05,0:21:02.80,Default,,0,0,0,,temporary model objects, and
Dialogue: 0,0:21:02.80,0:21:03.82,Default,,0,0,0,,that's not going to be easy.
Dialogue: 0,0:21:04.36,0:21:05.53,Default,,0,0,0,,Remember these asynchronous
Dialogue: 0,0:21:05.53,0:21:06.85,Default,,0,0,0,,loads can even come in out of
Dialogue: 0,0:21:06.85,0:21:07.25,Default,,0,0,0,,order.
Dialogue: 0,0:21:08.73,0:21:10.26,Default,,0,0,0,,We know this is a big challenge,
Dialogue: 0,0:21:10.46,0:21:12.37,Default,,0,0,0,,and we are extremely excited to
Dialogue: 0,0:21:12.37,0:21:13.60,Default,,0,0,0,,tell you about brand new
Dialogue: 0,0:21:13.60,0:21:15.57,Default,,0,0,0,,technology in iOS 11 for
Dialogue: 0,0:21:15.57,0:21:16.61,Default,,0,0,0,,collection and table view,
Dialogue: 0,0:21:16.73,0:21:18.00,Default,,0,0,0,,specifically designed for this
Dialogue: 0,0:21:18.00,0:21:18.56,Default,,0,0,0,,problem.
Dialogue: 0,0:21:18.81,0:21:19.64,Default,,0,0,0,,I'd like to introduce
Dialogue: 0,0:21:19.64,0:21:19.98,Default,,0,0,0,,placeholders.
Dialogue: 0,0:21:20.52,0:21:25.09,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:21:25.59,0:21:27.05,Default,,0,0,0,,Okay. What are placeholders?
Dialogue: 0,0:21:27.33,0:21:28.51,Default,,0,0,0,,So, as the name suggests, these
Dialogue: 0,0:21:28.51,0:21:29.95,Default,,0,0,0,,are temporary items or rows that
Dialogue: 0,0:21:29.95,0:21:31.16,Default,,0,0,0,,you insert into your collection
Dialogue: 0,0:21:31.16,0:21:31.78,Default,,0,0,0,,or table view.
Dialogue: 0,0:21:32.34,0:21:33.82,Default,,0,0,0,,And the key thing about them is
Dialogue: 0,0:21:33.82,0:21:35.51,Default,,0,0,0,,that you can defer updating your
Dialogue: 0,0:21:35.51,0:21:36.97,Default,,0,0,0,,data source until the data
Dialogue: 0,0:21:36.97,0:21:38.66,Default,,0,0,0,,finishes loading when you insert
Dialogue: 0,0:21:38.66,0:21:39.38,Default,,0,0,0,,placeholders.
Dialogue: 0,0:21:40.23,0:21:41.87,Default,,0,0,0,,So for placeholders, you can use
Dialogue: 0,0:21:41.87,0:21:42.98,Default,,0,0,0,,any cell that you want.
Dialogue: 0,0:21:43.32,0:21:44.38,Default,,0,0,0,,You can provide it to us.
Dialogue: 0,0:21:44.38,0:21:45.66,Default,,0,0,0,,We'll do all the difficult
Dialogue: 0,0:21:45.66,0:21:47.38,Default,,0,0,0,,bookkeeping on the back end
Dialogue: 0,0:21:47.45,0:21:48.47,Default,,0,0,0,,until your data finishes
Dialogue: 0,0:21:48.47,0:21:48.80,Default,,0,0,0,,loading.
Dialogue: 0,0:21:49.96,0:21:50.81,Default,,0,0,0,,The way this works is that
Dialogue: 0,0:21:50.81,0:21:51.94,Default,,0,0,0,,collection and table view will
Dialogue: 0,0:21:51.94,0:21:53.66,Default,,0,0,0,,never actually call out to ask
Dialogue: 0,0:21:53.66,0:21:54.89,Default,,0,0,0,,your delegate or data source
Dialogue: 0,0:21:54.98,0:21:56.71,Default,,0,0,0,,about placeholders, so your
Dialogue: 0,0:21:56.71,0:21:58.25,Default,,0,0,0,,delegates can remain blissfully
Dialogue: 0,0:21:58.25,0:21:59.73,Default,,0,0,0,,unaware that they even exist.
Dialogue: 0,0:22:00.79,0:22:01.76,Default,,0,0,0,,You can insert as many
Dialogue: 0,0:22:01.76,0:22:02.96,Default,,0,0,0,,placeholders as you want,
Dialogue: 0,0:22:02.96,0:22:03.81,Default,,0,0,0,,anywhere you want in the
Dialogue: 0,0:22:03.81,0:22:05.13,Default,,0,0,0,,collection or table view, and
Dialogue: 0,0:22:05.13,0:22:06.87,Default,,0,0,0,,you can even perform incremental
Dialogue: 0,0:22:06.87,0:22:08.81,Default,,0,0,0,,updates while placeholders exist
Dialogue: 0,0:22:08.81,0:22:10.96,Default,,0,0,0,,to put new rows or items in the
Dialogue: 0,0:22:10.96,0:22:12.01,Default,,0,0,0,,collection view, table view, or
Dialogue: 0,0:22:12.01,0:22:13.08,Default,,0,0,0,,move some existing one.
Dialogue: 0,0:22:13.41,0:22:14.18,Default,,0,0,0,,Anything like that.
Dialogue: 0,0:22:14.68,0:22:15.77,Default,,0,0,0,,So this provides users with a
Dialogue: 0,0:22:15.77,0:22:17.16,Default,,0,0,0,,great experience while their
Dialogue: 0,0:22:17.16,0:22:18.50,Default,,0,0,0,,data is loading across
Dialogue: 0,0:22:18.50,0:22:19.99,Default,,0,0,0,,applications, because you can
Dialogue: 0,0:22:19.99,0:22:21.53,Default,,0,0,0,,keep your user interface live
Dialogue: 0,0:22:21.53,0:22:23.10,Default,,0,0,0,,and responsive during these data
Dialogue: 0,0:22:23.10,0:22:23.62,Default,,0,0,0,,transfers.
Dialogue: 0,0:22:23.62,0:22:25.04,Default,,0,0,0,,So how do you create
Dialogue: 0,0:22:25.04,0:22:25.74,Default,,0,0,0,,placeholders?
Dialogue: 0,0:22:26.34,0:22:27.62,Default,,0,0,0,,Well, you're creating them using
Dialogue: 0,0:22:27.62,0:22:28.94,Default,,0,0,0,,the drop coordinator, of course.
Dialogue: 0,0:22:29.55,0:22:31.06,Default,,0,0,0,,To insert and animate it to a
Dialogue: 0,0:22:31.06,0:22:31.59,Default,,0,0,0,,placeholder.
Dialogue: 0,0:22:31.83,0:22:32.95,Default,,0,0,0,,Let's dive into some code and
Dialogue: 0,0:22:32.95,0:22:33.52,Default,,0,0,0,,see how it's done.
Dialogue: 0,0:22:34.12,0:22:35.50,Default,,0,0,0,,So we're back in our
Dialogue: 0,0:22:35.50,0:22:36.65,Default,,0,0,0,,performDropWith coordinator
Dialogue: 0,0:22:36.65,0:22:37.10,Default,,0,0,0,,method.
Dialogue: 0,0:22:37.62,0:22:38.27,Default,,0,0,0,,Again, we'll need a
Dialogue: 0,0:22:38.27,0:22:39.69,Default,,0,0,0,,destinationIndexPath that we're
Dialogue: 0,0:22:39.69,0:22:40.93,Default,,0,0,0,,actually going to drop to.
Dialogue: 0,0:22:41.57,0:22:42.99,Default,,0,0,0,,And now here we do things a
Dialogue: 0,0:22:42.99,0:22:43.80,Default,,0,0,0,,little bit differently.
Dialogue: 0,0:22:44.35,0:22:45.54,Default,,0,0,0,,Now we're going to iterate over
Dialogue: 0,0:22:45.61,0:22:46.86,Default,,0,0,0,,each of the items in the drop
Dialogue: 0,0:22:46.86,0:22:48.89,Default,,0,0,0,,session independently and for
Dialogue: 0,0:22:48.89,0:22:50.68,Default,,0,0,0,,each item, we're going to insert
Dialogue: 0,0:22:50.68,0:22:51.23,Default,,0,0,0,,a placeholder.
Dialogue: 0,0:22:51.80,0:22:53.74,Default,,0,0,0,,So we call coordinator drop item
Dialogue: 0,0:22:53.74,0:22:55.32,Default,,0,0,0,,toPlaceholderInsertedAt index
Dialogue: 0,0:22:55.32,0:22:56.70,Default,,0,0,0,,path withReuseIdentifier.
Dialogue: 0,0:22:57.85,0:22:58.72,Default,,0,0,0,,This will actually insert a
Dialogue: 0,0:22:58.72,0:22:59.52,Default,,0,0,0,,placeholder at the
Dialogue: 0,0:22:59.52,0:23:01.10,Default,,0,0,0,,destinationIndexPath for this
Dialogue: 0,0:23:01.10,0:23:01.89,Default,,0,0,0,,particular item.
Dialogue: 0,0:23:02.40,0:23:03.58,Default,,0,0,0,,You'll notice we pass over use
Dialogue: 0,0:23:03.58,0:23:04.10,Default,,0,0,0,,identifier.
Dialogue: 0,0:23:04.10,0:23:05.07,Default,,0,0,0,,This is something that you've
Dialogue: 0,0:23:05.07,0:23:06.36,Default,,0,0,0,,already registered with the
Dialogue: 0,0:23:06.36,0:23:07.80,Default,,0,0,0,,collection or table view and
Dialogue: 0,0:23:07.80,0:23:08.79,Default,,0,0,0,,we're going to use that to
Dialogue: 0,0:23:08.79,0:23:10.06,Default,,0,0,0,,dequeue a cell for this
Dialogue: 0,0:23:10.09,0:23:10.59,Default,,0,0,0,,placeholder.
Dialogue: 0,0:23:11.70,0:23:12.99,Default,,0,0,0,,You'll also notice, of course,
Dialogue: 0,0:23:12.99,0:23:13.86,Default,,0,0,0,,that there's a closure at the
Dialogue: 0,0:23:13.86,0:23:15.45,Default,,0,0,0,,end and that there's a comment
Dialogue: 0,0:23:15.45,0:23:16.60,Default,,0,0,0,,configure your placeholder cell
Dialogue: 0,0:23:16.60,0:23:16.83,Default,,0,0,0,,here.
Dialogue: 0,0:23:17.37,0:23:19.30,Default,,0,0,0,,Well, as you recall, collection
Dialogue: 0,0:23:19.30,0:23:20.61,Default,,0,0,0,,and table view, they're not
Dialogue: 0,0:23:20.61,0:23:21.71,Default,,0,0,0,,going to call out to your
Dialogue: 0,0:23:21.71,0:23:22.97,Default,,0,0,0,,delegate or data source about
Dialogue: 0,0:23:22.97,0:23:23.59,Default,,0,0,0,,placeholders.
Dialogue: 0,0:23:23.92,0:23:24.82,Default,,0,0,0,,That mean you're not going to
Dialogue: 0,0:23:24.82,0:23:26.33,Default,,0,0,0,,get a call for cell for row or
Dialogue: 0,0:23:26.33,0:23:28.11,Default,,0,0,0,,cell for item in index path for
Dialogue: 0,0:23:28.11,0:23:29.86,Default,,0,0,0,,placeholders, so this closure
Dialogue: 0,0:23:30.18,0:23:31.94,Default,,0,0,0,,serves as your replacement for
Dialogue: 0,0:23:31.94,0:23:33.03,Default,,0,0,0,,the configuration that you might
Dialogue: 0,0:23:33.03,0:23:34.67,Default,,0,0,0,,normally do in cell for row at
Dialogue: 0,0:23:34.67,0:23:35.87,Default,,0,0,0,,index path or cell for item in
Dialogue: 0,0:23:35.87,0:23:36.54,Default,,0,0,0,,index path.
Dialogue: 0,0:23:37.54,0:23:38.94,Default,,0,0,0,,Okay. There's one more thing.
Dialogue: 0,0:23:39.48,0:23:40.17,Default,,0,0,0,,Once you've inserted the
Dialogue: 0,0:23:40.17,0:23:42.67,Default,,0,0,0,,placeholder, it actually returns
Dialogue: 0,0:23:42.67,0:23:44.09,Default,,0,0,0,,something back to you, and
Dialogue: 0,0:23:44.09,0:23:45.66,Default,,0,0,0,,that's this placeholderContext.
Dialogue: 0,0:23:46.03,0:23:46.65,Default,,0,0,0,,What is this?
Dialogue: 0,0:23:47.32,0:23:48.50,Default,,0,0,0,,The placeholderContext is
Dialogue: 0,0:23:48.50,0:23:49.65,Default,,0,0,0,,returned for each placeholder
Dialogue: 0,0:23:49.65,0:23:50.29,Default,,0,0,0,,independently.
Dialogue: 0,0:23:50.75,0:23:52.43,Default,,0,0,0,,And this is how you're actually
Dialogue: 0,0:23:52.43,0:23:53.79,Default,,0,0,0,,going to commit the insertion of
Dialogue: 0,0:23:53.79,0:23:55.24,Default,,0,0,0,,the placeholder to exchange it
Dialogue: 0,0:23:55.24,0:23:56.43,Default,,0,0,0,,for the final cell once your
Dialogue: 0,0:23:56.43,0:23:57.42,Default,,0,0,0,,data finishes loading.
Dialogue: 0,0:23:58.15,0:24:00.28,Default,,0,0,0,,Or, if the data transfer failed.
Dialogue: 0,0:24:00.53,0:24:01.60,Default,,0,0,0,,Or maybe it was cancelled by the
Dialogue: 0,0:24:01.60,0:24:02.01,Default,,0,0,0,,user.
Dialogue: 0,0:24:02.37,0:24:02.96,Default,,0,0,0,,You can use the
Dialogue: 0,0:24:02.96,0:24:04.43,Default,,0,0,0,,placeholderContex to actually
Dialogue: 0,0:24:04.43,0:24:05.42,Default,,0,0,0,,delete the placeholder because
Dialogue: 0,0:24:05.42,0:24:06.91,Default,,0,0,0,,it'll no longer be needed.
Dialogue: 0,0:24:07.95,0:24:09.47,Default,,0,0,0,,So let's jump back to our code
Dialogue: 0,0:24:09.47,0:24:10.35,Default,,0,0,0,,and see how we use this
Dialogue: 0,0:24:10.35,0:24:11.21,Default,,0,0,0,,placeholderContext.
Dialogue: 0,0:24:11.56,0:24:12.60,Default,,0,0,0,,We're picking up right where we
Dialogue: 0,0:24:12.60,0:24:13.21,Default,,0,0,0,,left off.
Dialogue: 0,0:24:13.21,0:24:14.33,Default,,0,0,0,,We inserted our placeholder.
Dialogue: 0,0:24:14.60,0:24:15.77,Default,,0,0,0,,We got the placeholderContext
Dialogue: 0,0:24:15.77,0:24:16.11,Default,,0,0,0,,back.
Dialogue: 0,0:24:16.59,0:24:18.51,Default,,0,0,0,,Now we can actually go and load
Dialogue: 0,0:24:18.51,0:24:18.81,Default,,0,0,0,,the data.
Dialogue: 0,0:24:19.60,0:24:20.92,Default,,0,0,0,,Again, this is asynchronous, so
Dialogue: 0,0:24:20.92,0:24:22.56,Default,,0,0,0,,we use this load object of class
Dialogue: 0,0:24:22.56,0:24:23.51,Default,,0,0,0,,method to do that.
Dialogue: 0,0:24:24.06,0:24:25.27,Default,,0,0,0,,When the closure completion
Dialogue: 0,0:24:25.27,0:24:27.05,Default,,0,0,0,,handler runs, that'll be called
Dialogue: 0,0:24:27.05,0:24:27.93,Default,,0,0,0,,on a background queue.
Dialogue: 0,0:24:27.93,0:24:29.14,Default,,0,0,0,,So we make sure to transition
Dialogue: 0,0:24:29.14,0:24:30.60,Default,,0,0,0,,back onto the main queue before
Dialogue: 0,0:24:30.60,0:24:31.30,Default,,0,0,0,,we update our UI.
Dialogue: 0,0:24:32.69,0:24:34.04,Default,,0,0,0,,And now we can check did we
Dialogue: 0,0:24:34.04,0:24:35.57,Default,,0,0,0,,actually get any data loaded?
Dialogue: 0,0:24:36.10,0:24:37.44,Default,,0,0,0,,If we did, we'll have an image
Dialogue: 0,0:24:37.44,0:24:38.60,Default,,0,0,0,,in this local variable here.
Dialogue: 0,0:24:38.97,0:24:40.68,Default,,0,0,0,,And now we call commitInsertion
Dialogue: 0,0:24:40.72,0:24:42.04,Default,,0,0,0,,on the placeholder context,
Dialogue: 0,0:24:42.37,0:24:44.06,Default,,0,0,0,,which again, we'll swap out that
Dialogue: 0,0:24:44.06,0:24:45.51,Default,,0,0,0,,placeholder cell and insert the
Dialogue: 0,0:24:45.51,0:24:47.48,Default,,0,0,0,,real cell at this particular
Dialogue: 0,0:24:47.48,0:24:47.96,Default,,0,0,0,,location.
Dialogue: 0,0:24:48.82,0:24:50.04,Default,,0,0,0,,Now you pass a closure to
Dialogue: 0,0:24:50.04,0:24:50.82,Default,,0,0,0,,commitInsertion.
Dialogue: 0,0:24:51.15,0:24:52.30,Default,,0,0,0,,Inside of that closure, it's
Dialogue: 0,0:24:52.30,0:24:53.92,Default,,0,0,0,,your responsibility to update
Dialogue: 0,0:24:53.92,0:24:55.45,Default,,0,0,0,,your data source to incorporate
Dialogue: 0,0:24:55.45,0:24:57.38,Default,,0,0,0,,the new data for the actual row
Dialogue: 0,0:24:57.38,0:24:57.59,Default,,0,0,0,,here.
Dialogue: 0,0:24:58.16,0:25:00.43,Default,,0,0,0,,Or item in the collection view.
Dialogue: 0,0:25:00.79,0:25:02.33,Default,,0,0,0,,Now one other important thing.
Dialogue: 0,0:25:02.55,0:25:04.00,Default,,0,0,0,,Take a look at that index path
Dialogue: 0,0:25:04.00,0:25:05.20,Default,,0,0,0,,that's being passed inside that
Dialogue: 0,0:25:05.20,0:25:06.91,Default,,0,0,0,,closure, the insertionIndexPath.
Dialogue: 0,0:25:07.58,0:25:08.80,Default,,0,0,0,,You need to be very careful to
Dialogue: 0,0:25:08.80,0:25:10.50,Default,,0,0,0,,actually use that one and not
Dialogue: 0,0:25:10.50,0:25:11.10,Default,,0,0,0,,the original
Dialogue: 0,0:25:11.10,0:25:12.95,Default,,0,0,0,,destinationIndexPath that you
Dialogue: 0,0:25:12.95,0:25:13.65,Default,,0,0,0,,originally inserted the
Dialogue: 0,0:25:13.65,0:25:14.38,Default,,0,0,0,,placeholder at.
Dialogue: 0,0:25:14.69,0:25:16.55,Default,,0,0,0,,This is because between the time
Dialogue: 0,0:25:16.55,0:25:17.09,Default,,0,0,0,,when you inserted the
Dialogue: 0,0:25:17.09,0:25:18.23,Default,,0,0,0,,placeholder and when the data
Dialogue: 0,0:25:18.23,0:25:19.74,Default,,0,0,0,,finished loading, if other
Dialogue: 0,0:25:19.74,0:25:20.94,Default,,0,0,0,,updates happen in the collection
Dialogue: 0,0:25:20.94,0:25:22.02,Default,,0,0,0,,or table view, the placeholder
Dialogue: 0,0:25:22.02,0:25:22.87,Default,,0,0,0,,might have moved.
Dialogue: 0,0:25:23.29,0:25:24.89,Default,,0,0,0,,And so you use this index path,
Dialogue: 0,0:25:24.89,0:25:26.50,Default,,0,0,0,,which we provide to you, to tell
Dialogue: 0,0:25:26.50,0:25:28.27,Default,,0,0,0,,you the final location when the
Dialogue: 0,0:25:28.27,0:25:29.37,Default,,0,0,0,,placeholder insertion is
Dialogue: 0,0:25:29.37,0:25:29.95,Default,,0,0,0,,committed.
Dialogue: 0,0:25:30.90,0:25:31.94,Default,,0,0,0,,Okay, one other thing.
Dialogue: 0,0:25:31.94,0:25:33.72,Default,,0,0,0,,Of course, if our data transfer
Dialogue: 0,0:25:33.72,0:25:35.28,Default,,0,0,0,,didn't work for some reason, or
Dialogue: 0,0:25:35.28,0:25:37.00,Default,,0,0,0,,maybe it was cancelled, we can
Dialogue: 0,0:25:37.00,0:25:38.13,Default,,0,0,0,,just delete the placeholder
Dialogue: 0,0:25:38.28,0:25:39.90,Default,,0,0,0,,because we no longer need it.
Dialogue: 0,0:25:40.49,0:25:41.98,Default,,0,0,0,,Now one quick note about working
Dialogue: 0,0:25:41.98,0:25:42.75,Default,,0,0,0,,with placeholders.
Dialogue: 0,0:25:42.99,0:25:43.98,Default,,0,0,0,,It's very important that you
Dialogue: 0,0:25:43.98,0:25:45.61,Default,,0,0,0,,avoid calling reload data on the
Dialogue: 0,0:25:45.61,0:25:46.79,Default,,0,0,0,,collection or table view when
Dialogue: 0,0:25:46.79,0:25:47.62,Default,,0,0,0,,you have placeholders.
Dialogue: 0,0:25:47.91,0:25:49.43,Default,,0,0,0,,Instead, you should use
Dialogue: 0,0:25:49.48,0:25:50.80,Default,,0,0,0,,performBatchUpdates.
Dialogue: 0,0:25:51.42,0:25:52.39,Default,,0,0,0,,This is so you can perform
Dialogue: 0,0:25:52.39,0:25:53.63,Default,,0,0,0,,incremental updates on the
Dialogue: 0,0:25:53.63,0:25:54.68,Default,,0,0,0,,collection or table view.
Dialogue: 0,0:25:55.31,0:25:56.52,Default,,0,0,0,,And the reason why you want to
Dialogue: 0,0:25:56.52,0:25:57.90,Default,,0,0,0,,avoid reload data is because
Dialogue: 0,0:25:57.90,0:25:59.57,Default,,0,0,0,,that just resets everything in
Dialogue: 0,0:25:59.57,0:26:00.55,Default,,0,0,0,,the collection or table view.
Dialogue: 0,0:26:00.55,0:26:01.88,Default,,0,0,0,,And, as a result, it's going to
Dialogue: 0,0:26:01.88,0:26:03.17,Default,,0,0,0,,strip out any existing
Dialogue: 0,0:26:03.17,0:26:04.23,Default,,0,0,0,,placeholders that you still
Dialogue: 0,0:26:04.23,0:26:04.59,Default,,0,0,0,,have.
Dialogue: 0,0:26:05.40,0:26:06.87,Default,,0,0,0,,If you use performBatchUpdates,
Dialogue: 0,0:26:07.07,0:26:08.43,Default,,0,0,0,,you'll be performing incremental
Dialogue: 0,0:26:08.43,0:26:10.31,Default,,0,0,0,,insertions and deletions, and we
Dialogue: 0,0:26:10.31,0:26:11.50,Default,,0,0,0,,can keep those placeholders
Dialogue: 0,0:26:11.50,0:26:13.15,Default,,0,0,0,,alive while you update your
Dialogue: 0,0:26:13.15,0:26:14.33,Default,,0,0,0,,collection view in real time.
Dialogue: 0,0:26:14.61,0:26:17.02,Default,,0,0,0,,You can use the new property
Dialogue: 0,0:26:17.02,0:26:18.49,Default,,0,0,0,,hasUncommittedUpdates on
Dialogue: 0,0:26:18.49,0:26:19.78,Default,,0,0,0,,collection and table view, if
Dialogue: 0,0:26:19.78,0:26:20.69,Default,,0,0,0,,you would like to check if it
Dialogue: 0,0:26:20.69,0:26:22.24,Default,,0,0,0,,has placeholders still around.
Dialogue: 0,0:26:23.04,0:26:23.99,Default,,0,0,0,,With that, I'd like to hand it
Dialogue: 0,0:26:23.99,0:26:25.45,Default,,0,0,0,,back to Mohammed to show you an
Dialogue: 0,0:26:25.45,0:26:26.83,Default,,0,0,0,,amazing demo of all this
Dialogue: 0,0:26:26.83,0:26:28.33,Default,,0,0,0,,placeholder goodness in action.
Dialogue: 0,0:26:28.70,0:26:28.98,Default,,0,0,0,,Mohammed.
Dialogue: 0,0:26:29.52,0:26:31.80,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:26:32.30,0:26:32.78,Default,,0,0,0,,Yeah. I can hold it.
Dialogue: 0,0:26:35.04,0:26:35.65,Default,,0,0,0,,>> Thanks Tyler.
Dialogue: 0,0:26:36.06,0:26:37.64,Default,,0,0,0,,Wow. Placeholders sound amazing,
Dialogue: 0,0:26:37.64,0:26:38.02,Default,,0,0,0,,don't they?
Dialogue: 0,0:26:38.49,0:26:40.27,Default,,0,0,0,,I can't wait to actually build
Dialogue: 0,0:26:40.27,0:26:41.18,Default,,0,0,0,,them in our app and build a
Dialogue: 0,0:26:41.18,0:26:42.62,Default,,0,0,0,,really awesome drop animation.
Dialogue: 0,0:26:43.37,0:26:43.98,Default,,0,0,0,,Let's get started.
Dialogue: 0,0:26:47.60,0:26:49.26,Default,,0,0,0,,So the first thing we'll want to
Dialogue: 0,0:26:49.26,0:26:50.79,Default,,0,0,0,,do is implement another optional
Dialogue: 0,0:26:50.79,0:26:53.26,Default,,0,0,0,,method on the drop delegate to
Dialogue: 0,0:26:53.26,0:26:56.27,Default,,0,0,0,,indicate to the collection view
Dialogue: 0,0:26:56.27,0:26:58.09,Default,,0,0,0,,that we'd like to animate our
Dialogue: 0,0:26:58.09,0:27:00.67,Default,,0,0,0,,dropped items to the drop point.
Dialogue: 0,0:27:00.94,0:27:03.85,Default,,0,0,0,,So let's add an implementation
Dialogue: 0,0:27:03.85,0:27:06.06,Default,,0,0,0,,for dropSessionDidUpdate
Dialogue: 0,0:27:06.06,0:27:07.68,Default,,0,0,0,,withDestinationIndexPath.
Dialogue: 0,0:27:08.44,0:27:10.08,Default,,0,0,0,,And we'll start returning a
Dialogue: 0,0:27:10.08,0:27:11.60,Default,,0,0,0,,collection view drop proposal
Dialogue: 0,0:27:11.60,0:27:14.45,Default,,0,0,0,,with a drop operation of copy
Dialogue: 0,0:27:14.45,0:27:15.63,Default,,0,0,0,,and an intent of
Dialogue: 0,0:27:15.63,0:27:17.83,Default,,0,0,0,,insertAtDestinationIndexPath.
Dialogue: 0,0:27:18.93,0:27:20.75,Default,,0,0,0,,Next, we'll head back to our
Dialogue: 0,0:27:21.86,0:27:23.07,Default,,0,0,0,,performDropWith coordinator
Dialogue: 0,0:27:23.07,0:27:24.47,Default,,0,0,0,,method and we're going to remove
Dialogue: 0,0:27:24.47,0:27:26.01,Default,,0,0,0,,our existing coordinator code
Dialogue: 0,0:27:26.01,0:27:26.95,Default,,0,0,0,,because we're going to do
Dialogue: 0,0:27:26.95,0:27:27.85,Default,,0,0,0,,something a little different.
Dialogue: 0,0:27:28.54,0:27:29.97,Default,,0,0,0,,The first thing we'll want to do
Dialogue: 0,0:27:29.97,0:27:31.59,Default,,0,0,0,,is iterate the coordinator's
Dialogue: 0,0:27:31.59,0:27:33.27,Default,,0,0,0,,drop items or self, and we're
Dialogue: 0,0:27:33.27,0:27:35.97,Default,,0,0,0,,going to check if each drop
Dialogue: 0,0:27:35.97,0:27:38.20,Default,,0,0,0,,item, drag item item provider
Dialogue: 0,0:27:38.20,0:27:40.20,Default,,0,0,0,,can be used to load an object of
Dialogue: 0,0:27:40.20,0:27:40.96,Default,,0,0,0,,class image.
Dialogue: 0,0:27:41.19,0:27:42.74,Default,,0,0,0,,If it can, then we'll do a
Dialogue: 0,0:27:42.74,0:27:43.42,Default,,0,0,0,,couple of things.
Dialogue: 0,0:27:43.86,0:27:47.11,Default,,0,0,0,,First, we'll ask the coordinator
Dialogue: 0,0:27:47.11,0:27:50.19,Default,,0,0,0,,to drop a placeholder at the
Dialogue: 0,0:27:50.19,0:27:51.51,Default,,0,0,0,,destinationIndexPath.
Dialogue: 0,0:27:52.20,0:27:53.60,Default,,0,0,0,,And we'll pass it a reuse
Dialogue: 0,0:27:53.60,0:27:55.31,Default,,0,0,0,,identifier for a placeholder
Dialogue: 0,0:27:55.31,0:27:56.54,Default,,0,0,0,,cell that we've registered with
Dialogue: 0,0:27:56.54,0:27:58.00,Default,,0,0,0,,the collection view previously.
Dialogue: 0,0:27:58.76,0:27:59.68,Default,,0,0,0,,We're going to hang onto the
Dialogue: 0,0:27:59.68,0:28:01.03,Default,,0,0,0,,placeholder context, because
Dialogue: 0,0:28:01.03,0:28:02.11,Default,,0,0,0,,we're going to need it to update
Dialogue: 0,0:28:02.11,0:28:04.26,Default,,0,0,0,,the collection view later on.
Dialogue: 0,0:28:05.72,0:28:08.05,Default,,0,0,0,,Next, we'll actually trigger the
Dialogue: 0,0:28:08.05,0:28:09.78,Default,,0,0,0,,data load by calling load object
Dialogue: 0,0:28:09.78,0:28:11.30,Default,,0,0,0,,on the item provider and
Dialogue: 0,0:28:11.96,0:28:13.28,Default,,0,0,0,,loadObjects is completion
Dialogue: 0,0:28:13.28,0:28:13.70,Default,,0,0,0,,handler.
Dialogue: 0,0:28:13.99,0:28:15.95,Default,,0,0,0,,We'll go ahead and handle the
Dialogue: 0,0:28:15.95,0:28:16.31,Default,,0,0,0,,drop.
Dialogue: 0,0:28:17.26,0:28:18.65,Default,,0,0,0,,Note that I'm dispatching back
Dialogue: 0,0:28:18.65,0:28:20.76,Default,,0,0,0,,to the main queue here, since
Dialogue: 0,0:28:20.76,0:28:22.00,Default,,0,0,0,,loadObjects is completion
Dialogue: 0,0:28:22.00,0:28:23.18,Default,,0,0,0,,handler is called on a
Dialogue: 0,0:28:23.18,0:28:24.29,Default,,0,0,0,,background queue, and we're
Dialogue: 0,0:28:24.29,0:28:25.83,Default,,0,0,0,,going to be updating our UI.
Dialogue: 0,0:28:26.21,0:28:29.07,Default,,0,0,0,,If the data transfer succeeded,
Dialogue: 0,0:28:29.53,0:28:31.75,Default,,0,0,0,,we'll finalize the drop by
Dialogue: 0,0:28:31.75,0:28:33.09,Default,,0,0,0,,calling commitInsertion on the
Dialogue: 0,0:28:33.09,0:28:34.24,Default,,0,0,0,,placeholderContext.
Dialogue: 0,0:28:34.24,0:28:36.83,Default,,0,0,0,,And we'll pass it a set of data
Dialogue: 0,0:28:36.83,0:28:39.46,Default,,0,0,0,,source updates that use the
Dialogue: 0,0:28:39.46,0:28:42.78,Default,,0,0,0,,insertionIndexPath to insert our
Dialogue: 0,0:28:42.78,0:28:44.01,Default,,0,0,0,,new image in our [inaudible].
Dialogue: 0,0:28:44.01,0:28:49.78,Default,,0,0,0,,Then if the data transfer failed
Dialogue: 0,0:28:49.78,0:28:51.34,Default,,0,0,0,,for some reason, we'll make sure
Dialogue: 0,0:28:51.34,0:28:52.61,Default,,0,0,0,,to clean things up by calling
Dialogue: 0,0:28:52.61,0:28:54.33,Default,,0,0,0,,deletePlaceholder on a context.
Dialogue: 0,0:28:55.11,0:28:56.05,Default,,0,0,0,,There's one more thing we should
Dialogue: 0,0:28:56.05,0:28:57.67,Default,,0,0,0,,do here and that's to disable
Dialogue: 0,0:28:57.67,0:29:00.11,Default,,0,0,0,,the default system progress UI
Dialogue: 0,0:29:00.11,0:29:01.54,Default,,0,0,0,,for long-running data transfers,
Dialogue: 0,0:29:01.81,0:29:03.37,Default,,0,0,0,,because we have our own inline
Dialogue: 0,0:29:03.37,0:29:04.07,Default,,0,0,0,,one now.
Dialogue: 0,0:29:04.78,0:29:07.02,Default,,0,0,0,,So we'll go ahead and do that by
Dialogue: 0,0:29:07.45,0:29:09.03,Default,,0,0,0,,setting the drop session's
Dialogue: 0,0:29:09.03,0:29:10.46,Default,,0,0,0,,progress indicator style to
Dialogue: 0,0:29:10.46,0:29:10.89,Default,,0,0,0,,none.
Dialogue: 0,0:29:11.89,0:29:12.52,Default,,0,0,0,,That's it.
Dialogue: 0,0:29:12.52,0:29:14.19,Default,,0,0,0,,Let's see what it looks like on
Dialogue: 0,0:29:14.19,0:29:14.98,Default,,0,0,0,,our device.
Dialogue: 0,0:29:18.16,0:29:20.65,Default,,0,0,0,,So to get the full effect of
Dialogue: 0,0:29:20.65,0:29:21.99,Default,,0,0,0,,what we've just done, I'm going
Dialogue: 0,0:29:22.11,0:29:23.74,Default,,0,0,0,,to -- instead of dragging out a
Dialogue: 0,0:29:23.74,0:29:25.24,Default,,0,0,0,,photo, I'm going to switch over
Dialogue: 0,0:29:25.24,0:29:27.25,Default,,0,0,0,,to a different app, which I've
Dialogue: 0,0:29:27.25,0:29:29.33,Default,,0,0,0,,called Slow Photos, which
Dialogue: 0,0:29:29.33,0:29:31.49,Default,,0,0,0,,intentionally slows down data
Dialogue: 0,0:29:31.49,0:29:32.25,Default,,0,0,0,,transfers.
Dialogue: 0,0:29:33.28,0:29:35.33,Default,,0,0,0,,I'm going to pick up a few of
Dialogue: 0,0:29:35.33,0:29:36.92,Default,,0,0,0,,these images here and I'm going
Dialogue: 0,0:29:36.92,0:29:37.87,Default,,0,0,0,,to head back to my collection
Dialogue: 0,0:29:37.87,0:29:38.20,Default,,0,0,0,,view.
Dialogue: 0,0:29:39.07,0:29:39.84,Default,,0,0,0,,Notice the first thing you'll
Dialogue: 0,0:29:39.84,0:29:41.38,Default,,0,0,0,,notice here is that when I hover
Dialogue: 0,0:29:41.38,0:29:43.02,Default,,0,0,0,,over the collection view, the
Dialogue: 0,0:29:43.02,0:29:44.89,Default,,0,0,0,,cells start moving apart and we
Dialogue: 0,0:29:44.89,0:29:46.09,Default,,0,0,0,,get this cool kind of
Dialogue: 0,0:29:46.77,0:29:48.74,Default,,0,0,0,,springboard-like reordering
Dialogue: 0,0:29:48.98,0:29:49.73,Default,,0,0,0,,look.
Dialogue: 0,0:29:50.56,0:29:52.43,Default,,0,0,0,,This is because we started
Dialogue: 0,0:29:52.43,0:29:53.12,Default,,0,0,0,,returning the
Dialogue: 0,0:29:53.12,0:29:55.19,Default,,0,0,0,,insertAtDestinationIndexPath
Dialogue: 0,0:29:55.79,0:29:56.46,Default,,0,0,0,,intent.
Dialogue: 0,0:29:57.81,0:29:59.70,Default,,0,0,0,,If I let go of the dropped items
Dialogue: 0,0:29:59.94,0:30:01.61,Default,,0,0,0,,-- oh, I love that animation
Dialogue: 0,0:30:01.61,0:30:02.91,Default,,0,0,0,,[laughter].
Dialogue: 0,0:30:02.91,0:30:05.60,Default,,0,0,0,,So note that the first thing we
Dialogue: 0,0:30:05.60,0:30:06.95,Default,,0,0,0,,get are the placeholder cells
Dialogue: 0,0:30:06.95,0:30:08.53,Default,,0,0,0,,with this inline progress UI.
Dialogue: 0,0:30:08.81,0:30:10.17,Default,,0,0,0,,And a few seconds later, when
Dialogue: 0,0:30:10.17,0:30:12.08,Default,,0,0,0,,the data transfer completes, we
Dialogue: 0,0:30:12.08,0:30:14.09,Default,,0,0,0,,actually have the cells, the
Dialogue: 0,0:30:14.09,0:30:15.81,Default,,0,0,0,,real cells with the real images
Dialogue: 0,0:30:15.81,0:30:15.98,Default,,0,0,0,,loaded.
Dialogue: 0,0:30:16.52,0:30:21.78,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:30:22.28,0:30:23.37,Default,,0,0,0,,So now I'm going to hand it back
Dialogue: 0,0:30:23.37,0:30:24.69,Default,,0,0,0,,to Tyler who's going to talk
Dialogue: 0,0:30:24.69,0:30:26.58,Default,,0,0,0,,about some final touches that
Dialogue: 0,0:30:26.58,0:30:27.62,Default,,0,0,0,,can really help you make the
Dialogue: 0,0:30:27.62,0:30:28.98,Default,,0,0,0,,drag and drop experience in our
Dialogue: 0,0:30:28.98,0:30:29.98,Default,,0,0,0,,app uniquely awesome.
Dialogue: 0,0:30:34.31,0:30:35.49,Default,,0,0,0,,>> Okay. Thanks Mohammed.
Dialogue: 0,0:30:36.13,0:30:37.61,Default,,0,0,0,,So let's wrap up by quickly
Dialogue: 0,0:30:37.61,0:30:38.73,Default,,0,0,0,,jumping through some of the
Dialogue: 0,0:30:39.06,0:30:41.18,Default,,0,0,0,,final touches that you can adopt
Dialogue: 0,0:30:41.18,0:30:42.61,Default,,0,0,0,,using our wonderful APIs here.
Dialogue: 0,0:30:43.13,0:30:44.44,Default,,0,0,0,,The first one that might be very
Dialogue: 0,0:30:44.44,0:30:45.84,Default,,0,0,0,,interesting to you is supporting
Dialogue: 0,0:30:45.87,0:30:46.43,Default,,0,0,0,,reordering.
Dialogue: 0,0:30:47.36,0:30:48.21,Default,,0,0,0,,So now that we have Drag and
Dialogue: 0,0:30:48.21,0:30:49.86,Default,,0,0,0,,Drop, it might be obvious that
Dialogue: 0,0:30:49.93,0:30:50.79,Default,,0,0,0,,you might want to use that for
Dialogue: 0,0:30:50.79,0:30:51.32,Default,,0,0,0,,reordering.
Dialogue: 0,0:30:51.53,0:30:52.84,Default,,0,0,0,,Well you can of course do that
Dialogue: 0,0:30:53.13,0:30:54.09,Default,,0,0,0,,and it's really easy.
Dialogue: 0,0:30:54.80,0:30:55.94,Default,,0,0,0,,You start by implementing the
Dialogue: 0,0:30:55.94,0:30:56.89,Default,,0,0,0,,dropDelegate method,
Dialogue: 0,0:30:56.99,0:30:57.95,Default,,0,0,0,,dropSessionDidUpdate
Dialogue: 0,0:30:57.95,0:30:59.42,Default,,0,0,0,,withDestinationIndexPath.
Dialogue: 0,0:30:59.81,0:31:00.78,Default,,0,0,0,,The reason why, of course,
Dialogue: 0,0:31:00.78,0:31:01.97,Default,,0,0,0,,that's how you provide your drop
Dialogue: 0,0:31:01.97,0:31:03.12,Default,,0,0,0,,proposal to the system.
Dialogue: 0,0:31:03.54,0:31:04.97,Default,,0,0,0,,And, in particular, you need a
Dialogue: 0,0:31:04.97,0:31:06.39,Default,,0,0,0,,very specific drop proposal if
Dialogue: 0,0:31:06.39,0:31:08.20,Default,,0,0,0,,you like reorder, which is the
Dialogue: 0,0:31:08.20,0:31:09.64,Default,,0,0,0,,drop proposal with an operation
Dialogue: 0,0:31:09.64,0:31:11.65,Default,,0,0,0,,of move and an intent of
Dialogue: 0,0:31:11.68,0:31:13.43,Default,,0,0,0,,insertAtDestinationIndexPath.
Dialogue: 0,0:31:13.86,0:31:15.25,Default,,0,0,0,,That serves as a signal to the
Dialogue: 0,0:31:15.25,0:31:16.52,Default,,0,0,0,,collection or table view that
Dialogue: 0,0:31:16.52,0:31:17.80,Default,,0,0,0,,you're interested in supporting
Dialogue: 0,0:31:17.80,0:31:19.57,Default,,0,0,0,,reordering, when the item that's
Dialogue: 0,0:31:19.57,0:31:20.62,Default,,0,0,0,,being dragged comes from the
Dialogue: 0,0:31:20.62,0:31:21.63,Default,,0,0,0,,same source view.
Dialogue: 0,0:31:22.94,0:31:23.91,Default,,0,0,0,,Now here's where things get a
Dialogue: 0,0:31:23.91,0:31:24.94,Default,,0,0,0,,little bit different for table
Dialogue: 0,0:31:24.94,0:31:25.68,Default,,0,0,0,,view and collection view.
Dialogue: 0,0:31:25.68,0:31:26.50,Default,,0,0,0,,We'll start with table view.
Dialogue: 0,0:31:27.15,0:31:29.26,Default,,0,0,0,,With table view, table view has
Dialogue: 0,0:31:29.35,0:31:30.60,Default,,0,0,0,,already supported reordering for
Dialogue: 0,0:31:30.60,0:31:31.90,Default,,0,0,0,,a very long time and you're
Dialogue: 0,0:31:31.90,0:31:33.14,Default,,0,0,0,,familiar with this very
Dialogue: 0,0:31:33.67,0:31:36.05,Default,,0,0,0,,longstanding data source method.
Dialogue: 0,0:31:36.46,0:31:38.36,Default,,0,0,0,,Table view moveRowAt IndexPath
Dialogue: 0,0:31:38.36,0:31:39.19,Default,,0,0,0,,to IndexPath.
Dialogue: 0,0:31:39.70,0:31:40.96,Default,,0,0,0,,You can continue to implement
Dialogue: 0,0:31:40.96,0:31:42.18,Default,,0,0,0,,this, if you like, to support
Dialogue: 0,0:31:42.18,0:31:43.49,Default,,0,0,0,,reordering, using Drag and Drop.
Dialogue: 0,0:31:43.85,0:31:44.93,Default,,0,0,0,,Because table view is actually
Dialogue: 0,0:31:44.93,0:31:46.34,Default,,0,0,0,,going to call this instead of
Dialogue: 0,0:31:46.34,0:31:47.49,Default,,0,0,0,,calling through perform drop
Dialogue: 0,0:31:47.49,0:31:48.80,Default,,0,0,0,,with coordinator, if you've
Dialogue: 0,0:31:48.80,0:31:49.86,Default,,0,0,0,,returned that magic drop
Dialogue: 0,0:31:49.86,0:31:51.38,Default,,0,0,0,,proposal and a single row is
Dialogue: 0,0:31:51.38,0:31:52.30,Default,,0,0,0,,actually being reordered.
Dialogue: 0,0:31:52.93,0:31:53.86,Default,,0,0,0,,This makes it really easy,
Dialogue: 0,0:31:53.86,0:31:54.84,Default,,0,0,0,,because you can use the same
Dialogue: 0,0:31:54.84,0:31:56.84,Default,,0,0,0,,code to ship on an iPhone.
Dialogue: 0,0:31:56.84,0:31:57.81,Default,,0,0,0,,For example, maybe where you
Dialogue: 0,0:31:57.81,0:31:59.55,Default,,0,0,0,,don't have Drag and Drop using
Dialogue: 0,0:31:59.55,0:32:00.94,Default,,0,0,0,,the existing style of
Dialogue: 0,0:32:00.94,0:32:01.51,Default,,0,0,0,,reordering.
Dialogue: 0,0:32:01.62,0:32:03.56,Default,,0,0,0,,And, if you are on an iPad, you
Dialogue: 0,0:32:03.56,0:32:04.56,Default,,0,0,0,,can use the new style of
Dialogue: 0,0:32:04.56,0:32:05.19,Default,,0,0,0,,reordering here.
Dialogue: 0,0:32:06.10,0:32:07.49,Default,,0,0,0,,So that's table view.
Dialogue: 0,0:32:07.78,0:32:08.55,Default,,0,0,0,,Pretty straightforward.
Dialogue: 0,0:32:08.82,0:32:10.25,Default,,0,0,0,,Collection view is also equally
Dialogue: 0,0:32:10.25,0:32:10.95,Default,,0,0,0,,easy, though.
Dialogue: 0,0:32:11.22,0:32:11.97,Default,,0,0,0,,Collection view.
Dialogue: 0,0:32:12.01,0:32:12.87,Default,,0,0,0,,You just need to make sure
Dialogue: 0,0:32:12.87,0:32:14.29,Default,,0,0,0,,you're implementing both a drag
Dialogue: 0,0:32:14.29,0:32:15.22,Default,,0,0,0,,and drop delegate.
Dialogue: 0,0:32:15.22,0:32:16.04,Default,,0,0,0,,So both sides.
Dialogue: 0,0:32:17.00,0:32:18.67,Default,,0,0,0,,And inside of perform drop with
Dialogue: 0,0:32:18.67,0:32:22.04,Default,,0,0,0,,coordinator, you'll actually
Dialogue: 0,0:32:22.04,0:32:24.23,Default,,0,0,0,,look at the drop items that we
Dialogue: 0,0:32:24.23,0:32:25.21,Default,,0,0,0,,passed to you in that
Dialogue: 0,0:32:25.21,0:32:25.84,Default,,0,0,0,,coordinator.
Dialogue: 0,0:32:26.13,0:32:27.43,Default,,0,0,0,,We actually are providing a
Dialogue: 0,0:32:27.43,0:32:28.99,Default,,0,0,0,,sourceIndexPath for each of
Dialogue: 0,0:32:28.99,0:32:30.10,Default,,0,0,0,,those items, which will be
Dialogue: 0,0:32:30.10,0:32:32.48,Default,,0,0,0,,non-nil, if the item represents
Dialogue: 0,0:32:32.78,0:32:34.25,Default,,0,0,0,,a particular item in the
Dialogue: 0,0:32:34.25,0:32:35.26,Default,,0,0,0,,collection view that it came
Dialogue: 0,0:32:35.26,0:32:35.56,Default,,0,0,0,,from.
Dialogue: 0,0:32:35.93,0:32:37.93,Default,,0,0,0,,So you can delete the item at
Dialogue: 0,0:32:37.93,0:32:39.89,Default,,0,0,0,,that sourceIndexPath and insert
Dialogue: 0,0:32:40.28,0:32:41.29,Default,,0,0,0,,a new item at the
Dialogue: 0,0:32:41.29,0:32:42.68,Default,,0,0,0,,destinationIndexPath.
Dialogue: 0,0:32:42.68,0:32:44.37,Default,,0,0,0,,And that's going to affect the
Dialogue: 0,0:32:44.37,0:32:45.17,Default,,0,0,0,,actual reorder.
Dialogue: 0,0:32:45.47,0:32:46.88,Default,,0,0,0,,So you'll have that cell move
Dialogue: 0,0:32:46.99,0:32:48.22,Default,,0,0,0,,seamlessly from the start to the
Dialogue: 0,0:32:48.22,0:32:48.79,Default,,0,0,0,,destination.
Dialogue: 0,0:32:49.61,0:32:51.46,Default,,0,0,0,,Now collection view has some
Dialogue: 0,0:32:51.46,0:32:52.66,Default,,0,0,0,,extra functionality for
Dialogue: 0,0:32:52.66,0:32:54.36,Default,,0,0,0,,reordering, though, and that's
Dialogue: 0,0:32:54.36,0:32:56.06,Default,,0,0,0,,this new concept of reordering
Dialogue: 0,0:32:56.06,0:32:56.63,Default,,0,0,0,,cadence.
Dialogue: 0,0:32:58.10,0:32:59.14,Default,,0,0,0,,As you know, collection views
Dialogue: 0,0:32:59.14,0:33:00.73,Default,,0,0,0,,often have these two-dimensional
Dialogue: 0,0:33:00.73,0:33:01.84,Default,,0,0,0,,grid-like layouts.
Dialogue: 0,0:33:01.84,0:33:02.94,Default,,0,0,0,,For example, the flow layout you
Dialogue: 0,0:33:02.94,0:33:03.61,Default,,0,0,0,,see behind me.
Dialogue: 0,0:33:04.26,0:33:05.88,Default,,0,0,0,,And when you're reordering,
Dialogue: 0,0:33:06.01,0:33:08.34,Default,,0,0,0,,sometimes you can get the kind
Dialogue: 0,0:33:08.34,0:33:09.67,Default,,0,0,0,,of behavior where the items are
Dialogue: 0,0:33:09.67,0:33:11.10,Default,,0,0,0,,reflowing out as you're moving
Dialogue: 0,0:33:11.10,0:33:11.62,Default,,0,0,0,,your finger.
Dialogue: 0,0:33:11.62,0:33:12.70,Default,,0,0,0,,And that's great when you're
Dialogue: 0,0:33:12.70,0:33:13.67,Default,,0,0,0,,actually trying to reorder.
Dialogue: 0,0:33:14.00,0:33:15.44,Default,,0,0,0,,But you don't always want that
Dialogue: 0,0:33:15.44,0:33:15.86,Default,,0,0,0,,behavior.
Dialogue: 0,0:33:15.86,0:33:16.83,Default,,0,0,0,,Maybe if you're trying to just
Dialogue: 0,0:33:16.83,0:33:18.10,Default,,0,0,0,,drag to a different location
Dialogue: 0,0:33:18.10,0:33:19.21,Default,,0,0,0,,outside of the collection view
Dialogue: 0,0:33:19.28,0:33:20.34,Default,,0,0,0,,and it happens to support
Dialogue: 0,0:33:20.34,0:33:20.78,Default,,0,0,0,,reordering.
Dialogue: 0,0:33:21.37,0:33:22.50,Default,,0,0,0,,So the reordering cadence has
Dialogue: 0,0:33:22.56,0:33:23.59,Default,,0,0,0,,three different values to help
Dialogue: 0,0:33:23.59,0:33:25.07,Default,,0,0,0,,you tune how responsive the
Dialogue: 0,0:33:25.07,0:33:26.30,Default,,0,0,0,,collection view is going to be
Dialogue: 0,0:33:26.54,0:33:27.99,Default,,0,0,0,,when it shuffles and reflows its
Dialogue: 0,0:33:27.99,0:33:28.39,Default,,0,0,0,,layout.
Dialogue: 0,0:33:28.74,0:33:30.18,Default,,0,0,0,,So the default, of course, is
Dialogue: 0,0:33:30.18,0:33:31.52,Default,,0,0,0,,immediate, which you've seen in
Dialogue: 0,0:33:31.52,0:33:32.38,Default,,0,0,0,,the demos so far.
Dialogue: 0,0:33:32.62,0:33:33.51,Default,,0,0,0,,Where once you start moving
Dialogue: 0,0:33:33.51,0:33:34.86,Default,,0,0,0,,around, it immediately is going
Dialogue: 0,0:33:34.86,0:33:36.00,Default,,0,0,0,,to reflow the collection view
Dialogue: 0,0:33:36.00,0:33:37.56,Default,,0,0,0,,layout as you're -- you know,
Dialogue: 0,0:33:37.56,0:33:38.85,Default,,0,0,0,,almost in real time reordering.
Dialogue: 0,0:33:39.39,0:33:40.61,Default,,0,0,0,,If you'd like to add a little
Dialogue: 0,0:33:40.61,0:33:42.45,Default,,0,0,0,,bit more deliberance here, you
Dialogue: 0,0:33:42.45,0:33:44.83,Default,,0,0,0,,can switch to the fast mode.
Dialogue: 0,0:33:45.48,0:33:47.52,Default,,0,0,0,,Where, if you move very quickly,
Dialogue: 0,0:33:47.56,0:33:48.89,Default,,0,0,0,,it won't actually immediately
Dialogue: 0,0:33:48.89,0:33:50.61,Default,,0,0,0,,reshuffle all the layout around.
Dialogue: 0,0:33:50.61,0:33:51.80,Default,,0,0,0,,And so you can see you have to
Dialogue: 0,0:33:51.80,0:33:53.33,Default,,0,0,0,,pause just a little bit longer.
Dialogue: 0,0:33:53.75,0:33:56.00,Default,,0,0,0,,And then for slow, it
Dialogue: 0,0:33:56.00,0:33:57.25,Default,,0,0,0,,exaggerates that even further.
Dialogue: 0,0:33:57.25,0:33:58.28,Default,,0,0,0,,So the user really has to be
Dialogue: 0,0:33:58.28,0:33:59.79,Default,,0,0,0,,deliberate about wanting to stop
Dialogue: 0,0:33:59.79,0:34:00.78,Default,,0,0,0,,and reorder to a specific
Dialogue: 0,0:34:00.78,0:34:01.29,Default,,0,0,0,,location.
Dialogue: 0,0:34:01.58,0:34:02.46,Default,,0,0,0,,This is how you're going to get
Dialogue: 0,0:34:02.46,0:34:03.82,Default,,0,0,0,,behavior very consistent with
Dialogue: 0,0:34:04.10,0:34:05.58,Default,,0,0,0,,the behavior you see on the iOS
Dialogue: 0,0:34:05.58,0:34:06.89,Default,,0,0,0,,Home screen when reordering app
Dialogue: 0,0:34:06.89,0:34:07.79,Default,,0,0,0,,icons, for example.
Dialogue: 0,0:34:08.36,0:34:09.79,Default,,0,0,0,,So that's reordering.
Dialogue: 0,0:34:09.92,0:34:11.24,Default,,0,0,0,,Let's talk about spring loading.
Dialogue: 0,0:34:11.96,0:34:13.21,Default,,0,0,0,,Spring loading, as you probably
Dialogue: 0,0:34:13.21,0:34:14.80,Default,,0,0,0,,know by now, is a way to
Dialogue: 0,0:34:14.80,0:34:16.27,Default,,0,0,0,,actually navigate and activate
Dialogue: 0,0:34:16.27,0:34:17.54,Default,,0,0,0,,controls throughout the system
Dialogue: 0,0:34:17.54,0:34:18.37,Default,,0,0,0,,while you're in the middle of a
Dialogue: 0,0:34:18.37,0:34:19.06,Default,,0,0,0,,drag session.
Dialogue: 0,0:34:19.33,0:34:20.17,Default,,0,0,0,,You just hover over the
Dialogue: 0,0:34:20.17,0:34:20.76,Default,,0,0,0,,controls.
Dialogue: 0,0:34:20.83,0:34:22.22,Default,,0,0,0,,It starts highlighting and then
Dialogue: 0,0:34:22.22,0:34:23.02,Default,,0,0,0,,it's going to activate.
Dialogue: 0,0:34:23.64,0:34:24.74,Default,,0,0,0,,So, in collection and table
Dialogue: 0,0:34:24.74,0:34:26.35,Default,,0,0,0,,view, it's dropped at easy to
Dialogue: 0,0:34:26.35,0:34:27.82,Default,,0,0,0,,adopt spring loading and that's
Dialogue: 0,0:34:27.82,0:34:29.87,Default,,0,0,0,,because both of them conform to
Dialogue: 0,0:34:29.87,0:34:32.03,Default,,0,0,0,,the protocol UISpringLoaded
Dialogue: 0,0:34:32.03,0:34:32.99,Default,,0,0,0,,InteractionSupporting.
Dialogue: 0,0:34:33.51,0:34:34.65,Default,,0,0,0,,Basically that just means they
Dialogue: 0,0:34:34.65,0:34:35.62,Default,,0,0,0,,each have a property
Dialogue: 0,0:34:35.62,0:34:37.18,Default,,0,0,0,,isSpringLoaded, which you set to
Dialogue: 0,0:34:37.18,0:34:38.95,Default,,0,0,0,,true, and spring loading works.
Dialogue: 0,0:34:39.65,0:34:41.24,Default,,0,0,0,,When users spring load on a
Dialogue: 0,0:34:41.24,0:34:42.36,Default,,0,0,0,,particular cell, we're going to
Dialogue: 0,0:34:42.36,0:34:43.35,Default,,0,0,0,,call -- we're going to select
Dialogue: 0,0:34:43.46,0:34:44.51,Default,,0,0,0,,that item or row in the
Dialogue: 0,0:34:44.51,0:34:45.37,Default,,0,0,0,,collection or table view.
Dialogue: 0,0:34:46.17,0:34:47.27,Default,,0,0,0,,And you can customize spring
Dialogue: 0,0:34:47.27,0:34:48.56,Default,,0,0,0,,loading using a new delegate
Dialogue: 0,0:34:48.56,0:34:50.52,Default,,0,0,0,,method shouldSpringLoadItemAt
Dialogue: 0,0:34:50.52,0:34:51.74,Default,,0,0,0,,IndexPath with context.
Dialogue: 0,0:34:51.87,0:34:53.18,Default,,0,0,0,,This is how you can opt out
Dialogue: 0,0:34:53.18,0:34:54.57,Default,,0,0,0,,specific rows of spring loading.
Dialogue: 0,0:34:54.95,0:34:56.98,Default,,0,0,0,,Or you can even customize spring
Dialogue: 0,0:34:56.98,0:34:58.72,Default,,0,0,0,,loading effects a bit using that
Dialogue: 0,0:34:58.72,0:34:59.13,Default,,0,0,0,,context.
Dialogue: 0,0:34:59.13,0:35:00.48,Default,,0,0,0,,For example, you can change the
Dialogue: 0,0:35:00.48,0:35:01.85,Default,,0,0,0,,view that actually flashes
Dialogue: 0,0:35:01.85,0:35:02.54,Default,,0,0,0,,during the spring load
Dialogue: 0,0:35:02.54,0:35:03.10,Default,,0,0,0,,interaction.
Dialogue: 0,0:35:04.09,0:35:06.79,Default,,0,0,0,,So next, let's talk a little bit
Dialogue: 0,0:35:06.79,0:35:08.42,Default,,0,0,0,,about customizing appearance.
Dialogue: 0,0:35:09.33,0:35:10.78,Default,,0,0,0,,We have some new ways that you
Dialogue: 0,0:35:10.78,0:35:12.10,Default,,0,0,0,,can customize the appearance of
Dialogue: 0,0:35:12.10,0:35:13.78,Default,,0,0,0,,cells that are participating in
Dialogue: 0,0:35:13.84,0:35:14.64,Default,,0,0,0,,drag sessions.
Dialogue: 0,0:35:15.31,0:35:17.10,Default,,0,0,0,,So cells start -- they have a
Dialogue: 0,0:35:17.10,0:35:18.38,Default,,0,0,0,,new notion of a drag state, and
Dialogue: 0,0:35:18.38,0:35:19.69,Default,,0,0,0,,they all start in the none
Dialogue: 0,0:35:19.81,0:35:21.19,Default,,0,0,0,,state, and that's before
Dialogue: 0,0:35:21.19,0:35:21.95,Default,,0,0,0,,anything's happened.
Dialogue: 0,0:35:22.28,0:35:23.27,Default,,0,0,0,,But when the user actually puts
Dialogue: 0,0:35:23.27,0:35:24.31,Default,,0,0,0,,their finger on the glass and
Dialogue: 0,0:35:24.31,0:35:25.30,Default,,0,0,0,,starts lifting one of those
Dialogue: 0,0:35:25.30,0:35:26.75,Default,,0,0,0,,cells, we're going to transition
Dialogue: 0,0:35:26.75,0:35:28.09,Default,,0,0,0,,the cell to the lifting state.
Dialogue: 0,0:35:28.41,0:35:29.70,Default,,0,0,0,,And, as you can see here, in
Dialogue: 0,0:35:29.70,0:35:31.04,Default,,0,0,0,,this example, we have a little
Dialogue: 0,0:35:31.04,0:35:32.23,Default,,0,0,0,,banner showing on each of the
Dialogue: 0,0:35:32.23,0:35:32.67,Default,,0,0,0,,cells.
Dialogue: 0,0:35:32.67,0:35:33.85,Default,,0,0,0,,And we'd rather not actually
Dialogue: 0,0:35:33.85,0:35:35.18,Default,,0,0,0,,show that banner when the user's
Dialogue: 0,0:35:35.18,0:35:36.78,Default,,0,0,0,,dragging the cell all around
Dialogue: 0,0:35:36.78,0:35:37.51,Default,,0,0,0,,across the system.
Dialogue: 0,0:35:37.89,0:35:39.61,Default,,0,0,0,,So we can use this transition of
Dialogue: 0,0:35:39.61,0:35:41.14,Default,,0,0,0,,the state to the lifting state
Dialogue: 0,0:35:41.45,0:35:43.11,Default,,0,0,0,,to actually hide that banner.
Dialogue: 0,0:35:44.39,0:35:45.68,Default,,0,0,0,,When the user actually moves
Dialogue: 0,0:35:45.68,0:35:46.99,Default,,0,0,0,,their finger to actually begin
Dialogue: 0,0:35:46.99,0:35:48.70,Default,,0,0,0,,the drag session, once the cell
Dialogue: 0,0:35:48.70,0:35:50.24,Default,,0,0,0,,finishes the lift, we'll
Dialogue: 0,0:35:50.24,0:35:52.02,Default,,0,0,0,,transition the cell that remains
Dialogue: 0,0:35:52.02,0:35:53.10,Default,,0,0,0,,behind in the collection or
Dialogue: 0,0:35:53.10,0:35:54.40,Default,,0,0,0,,table view to the dragging
Dialogue: 0,0:35:54.40,0:35:54.79,Default,,0,0,0,,state.
Dialogue: 0,0:35:55.19,0:35:56.61,Default,,0,0,0,,And by default, this is going to
Dialogue: 0,0:35:56.61,0:35:58.40,Default,,0,0,0,,result in a faded appearance,
Dialogue: 0,0:35:58.40,0:36:00.07,Default,,0,0,0,,where we'll reduce the alpha of
Dialogue: 0,0:36:00.07,0:36:00.64,Default,,0,0,0,,that cell.
Dialogue: 0,0:36:01.38,0:36:03.57,Default,,0,0,0,,Now you can respond to these
Dialogue: 0,0:36:03.57,0:36:05.16,Default,,0,0,0,,state transitions by overriding
Dialogue: 0,0:36:05.16,0:36:06.92,Default,,0,0,0,,the method on your cell class,
Dialogue: 0,0:36:07.04,0:36:09.48,Default,,0,0,0,,subclass, dragStateDidChange.
Dialogue: 0,0:36:09.83,0:36:10.86,Default,,0,0,0,,Just use the new state that's
Dialogue: 0,0:36:10.86,0:36:11.57,Default,,0,0,0,,being passed in.
Dialogue: 0,0:36:11.57,0:36:13.33,Default,,0,0,0,,You can optionally call super to
Dialogue: 0,0:36:13.33,0:36:14.60,Default,,0,0,0,,get the default appearance and
Dialogue: 0,0:36:14.60,0:36:14.96,Default,,0,0,0,,behavior.
Dialogue: 0,0:36:15.23,0:36:16.33,Default,,0,0,0,,Or you can just choose to
Dialogue: 0,0:36:16.33,0:36:17.76,Default,,0,0,0,,override it and provide your own
Dialogue: 0,0:36:17.76,0:36:18.77,Default,,0,0,0,,behavior and implementation.
Dialogue: 0,0:36:18.77,0:36:20.64,Default,,0,0,0,,We will even make sure to call
Dialogue: 0,0:36:20.64,0:36:22.10,Default,,0,0,0,,these state transitions inside
Dialogue: 0,0:36:22.10,0:36:23.93,Default,,0,0,0,,and alongside animation closure
Dialogue: 0,0:36:24.36,0:36:25.83,Default,,0,0,0,,with the actual lift animations,
Dialogue: 0,0:36:25.83,0:36:26.29,Default,,0,0,0,,for example.
Dialogue: 0,0:36:26.29,0:36:28.06,Default,,0,0,0,,So if you make changes here,
Dialogue: 0,0:36:28.06,0:36:28.90,Default,,0,0,0,,they're going to be animated
Dialogue: 0,0:36:28.90,0:36:30.22,Default,,0,0,0,,running forwards and backwards
Dialogue: 0,0:36:30.22,0:36:30.94,Default,,0,0,0,,with those lifts.
Dialogue: 0,0:36:31.53,0:36:33.12,Default,,0,0,0,,So that's how we customize the
Dialogue: 0,0:36:33.12,0:36:35.39,Default,,0,0,0,,actual cell that is in the
Dialogue: 0,0:36:35.39,0:36:36.46,Default,,0,0,0,,collection or table view, but
Dialogue: 0,0:36:36.72,0:36:37.66,Default,,0,0,0,,what about the actual drag
Dialogue: 0,0:36:37.66,0:36:39.13,Default,,0,0,0,,preview that you drag around?
Dialogue: 0,0:36:39.53,0:36:41.17,Default,,0,0,0,,As you see here, in this
Dialogue: 0,0:36:41.27,0:36:44.01,Default,,0,0,0,,example, we have a cell that is
Dialogue: 0,0:36:44.01,0:36:45.08,Default,,0,0,0,,basically a square shape.
Dialogue: 0,0:36:45.37,0:36:46.42,Default,,0,0,0,,But, if the content that's
Dialogue: 0,0:36:46.42,0:36:48.73,Default,,0,0,0,,visible is a wider aspect ratio,
Dialogue: 0,0:36:49.12,0:36:50.74,Default,,0,0,0,,it's showing a nice image and so
Dialogue: 0,0:36:50.74,0:36:51.95,Default,,0,0,0,,we result in, you know, these
Dialogue: 0,0:36:52.35,0:36:54.32,Default,,0,0,0,,not very pretty white bars at
Dialogue: 0,0:36:54.32,0:36:55.04,Default,,0,0,0,,the top and bottom.
Dialogue: 0,0:36:55.04,0:36:56.25,Default,,0,0,0,,Probably don't really want this
Dialogue: 0,0:36:56.25,0:36:57.11,Default,,0,0,0,,appearance while the user's
Dialogue: 0,0:36:57.11,0:36:58.40,Default,,0,0,0,,dragging this, you know, photo
Dialogue: 0,0:36:58.40,0:36:59.00,Default,,0,0,0,,around the system.
Dialogue: 0,0:36:59.29,0:37:00.22,Default,,0,0,0,,So how can we fix that?
Dialogue: 0,0:37:00.99,0:37:03.36,Default,,0,0,0,,Well, by default, it's happening
Dialogue: 0,0:37:03.36,0:37:04.91,Default,,0,0,0,,because we use the entire cell
Dialogue: 0,0:37:04.91,0:37:05.87,Default,,0,0,0,,as the drag preview.
Dialogue: 0,0:37:06.15,0:37:07.44,Default,,0,0,0,,But, of course, you can change
Dialogue: 0,0:37:07.44,0:37:07.66,Default,,0,0,0,,that.
Dialogue: 0,0:37:08.24,0:37:09.64,Default,,0,0,0,,And so you can provide drag
Dialogue: 0,0:37:09.64,0:37:10.82,Default,,0,0,0,,preview parameters by
Dialogue: 0,0:37:10.82,0:37:12.16,Default,,0,0,0,,implementing an optional method
Dialogue: 0,0:37:12.16,0:37:13.09,Default,,0,0,0,,on the dragDelegate,
Dialogue: 0,0:37:13.49,0:37:14.89,Default,,0,0,0,,dragPreviewParametersForItemAt
Dialogue: 0,0:37:14.89,0:37:15.48,Default,,0,0,0,,IndexPath.
Dialogue: 0,0:37:15.58,0:37:16.92,Default,,0,0,0,,And, if you provide these,
Dialogue: 0,0:37:17.25,0:37:18.12,Default,,0,0,0,,there's, for example, an
Dialogue: 0,0:37:18.12,0:37:19.46,Default,,0,0,0,,opportunity for you to provide a
Dialogue: 0,0:37:19.46,0:37:21.14,Default,,0,0,0,,bezier path, which will clip to
Dialogue: 0,0:37:21.14,0:37:22.36,Default,,0,0,0,,a specific region within the
Dialogue: 0,0:37:22.36,0:37:22.73,Default,,0,0,0,,cell.
Dialogue: 0,0:37:23.05,0:37:24.48,Default,,0,0,0,,So if we look back at our
Dialogue: 0,0:37:24.48,0:37:26.25,Default,,0,0,0,,example, if we return a bezier
Dialogue: 0,0:37:26.25,0:37:27.80,Default,,0,0,0,,path that clips to the actual
Dialogue: 0,0:37:27.80,0:37:29.27,Default,,0,0,0,,rect where there's a visible
Dialogue: 0,0:37:29.27,0:37:30.97,Default,,0,0,0,,photo, we can just lift just
Dialogue: 0,0:37:30.97,0:37:32.47,Default,,0,0,0,,that photo off the screen even
Dialogue: 0,0:37:32.47,0:37:33.80,Default,,0,0,0,,though the cell is still a
Dialogue: 0,0:37:33.80,0:37:34.77,Default,,0,0,0,,square in this example.
Dialogue: 0,0:37:35.52,0:37:38.20,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:37:38.70,0:37:39.38,Default,,0,0,0,,Okay. Wow.
Dialogue: 0,0:37:39.41,0:37:40.72,Default,,0,0,0,,We've covered a lot today.
Dialogue: 0,0:37:41.07,0:37:42.25,Default,,0,0,0,,So what are the next steps for
Dialogue: 0,0:37:42.25,0:37:42.39,Default,,0,0,0,,you?
Dialogue: 0,0:37:43.64,0:37:45.49,Default,,0,0,0,,Well, first of all, we hope when
Dialogue: 0,0:37:45.49,0:37:46.76,Default,,0,0,0,,you leave here you go and add
Dialogue: 0,0:37:46.76,0:37:47.67,Default,,0,0,0,,Drag and Drop to all the
Dialogue: 0,0:37:47.67,0:37:48.78,Default,,0,0,0,,collection and table views in
Dialogue: 0,0:37:48.78,0:37:49.69,Default,,0,0,0,,your applications.
Dialogue: 0,0:37:49.69,0:37:50.88,Default,,0,0,0,,You saw how easy it is just to
Dialogue: 0,0:37:50.88,0:37:52.31,Default,,0,0,0,,get the basics up and running
Dialogue: 0,0:37:52.57,0:37:53.18,Default,,0,0,0,,very quickly.
Dialogue: 0,0:37:53.74,0:37:54.90,Default,,0,0,0,,And users are going to expect
Dialogue: 0,0:37:54.90,0:37:56.13,Default,,0,0,0,,that your apps support Drag and
Dialogue: 0,0:37:56.13,0:37:57.28,Default,,0,0,0,,Drop in iOS 11.
Dialogue: 0,0:37:58.18,0:37:59.20,Default,,0,0,0,,Now you should definitely
Dialogue: 0,0:37:59.20,0:38:00.33,Default,,0,0,0,,consider providing a drop
Dialogue: 0,0:38:00.33,0:38:02.12,Default,,0,0,0,,proposal and setting up those
Dialogue: 0,0:38:02.12,0:38:03.51,Default,,0,0,0,,great animations, because we
Dialogue: 0,0:38:03.51,0:38:04.97,Default,,0,0,0,,made it really easy to do so.
Dialogue: 0,0:38:05.31,0:38:06.88,Default,,0,0,0,,And it will provide the best
Dialogue: 0,0:38:06.88,0:38:08.29,Default,,0,0,0,,look and feel for your users.
Dialogue: 0,0:38:08.68,0:38:10.95,Default,,0,0,0,,And, of course, don't forget
Dialogue: 0,0:38:10.95,0:38:11.75,Default,,0,0,0,,about placeholders.
Dialogue: 0,0:38:12.12,0:38:13.08,Default,,0,0,0,,When your data is loading
Dialogue: 0,0:38:13.08,0:38:14.75,Default,,0,0,0,,asynchronously, use placeholders
Dialogue: 0,0:38:14.75,0:38:16.64,Default,,0,0,0,,to very easily manage that
Dialogue: 0,0:38:16.76,0:38:18.76,Default,,0,0,0,,asynchronous data load and keep
Dialogue: 0,0:38:18.76,0:38:20.50,Default,,0,0,0,,the UI completely responsive and
Dialogue: 0,0:38:20.50,0:38:21.78,Default,,0,0,0,,interactive during any
Dialogue: 0,0:38:21.78,0:38:22.82,Default,,0,0,0,,long-running transfers.
Dialogue: 0,0:38:23.40,0:38:24.97,Default,,0,0,0,,And finally, don't forget to
Dialogue: 0,0:38:24.97,0:38:25.84,Default,,0,0,0,,polish the details.
Dialogue: 0,0:38:26.43,0:38:27.70,Default,,0,0,0,,We can't wait to see what you
Dialogue: 0,0:38:27.70,0:38:29.14,Default,,0,0,0,,will do with all of these really
Dialogue: 0,0:38:29.14,0:38:31.31,Default,,0,0,0,,awesome APIs, and we're going to
Dialogue: 0,0:38:31.50,0:38:32.87,Default,,0,0,0,,be super excited to see the
Dialogue: 0,0:38:32.87,0:38:33.40,Default,,0,0,0,,results.
Dialogue: 0,0:38:33.94,0:38:35.83,Default,,0,0,0,,For more information and to
Dialogue: 0,0:38:35.83,0:38:36.99,Default,,0,0,0,,download the sample app that
Dialogue: 0,0:38:36.99,0:38:38.09,Default,,0,0,0,,we've been showing you today,
Dialogue: 0,0:38:38.09,0:38:39.65,Default,,0,0,0,,which has fleshed-out examples
Dialogue: 0,0:38:39.65,0:38:41.10,Default,,0,0,0,,of all sorts of great Drag and
Dialogue: 0,0:38:41.10,0:38:41.96,Default,,0,0,0,,Drop with collection view and
Dialogue: 0,0:38:41.96,0:38:42.77,Default,,0,0,0,,table view code.
Dialogue: 0,0:38:43.28,0:38:45.17,Default,,0,0,0,,Go to this URL, it's really
Dialogue: 0,0:38:45.17,0:38:45.45,Default,,0,0,0,,great.
Dialogue: 0,0:38:46.31,0:38:47.83,Default,,0,0,0,,There's a session immediately
Dialogue: 0,0:38:47.83,0:38:49.58,Default,,0,0,0,,following this one, in this room
Dialogue: 0,0:38:49.58,0:38:50.70,Default,,0,0,0,,right here, so you can just stay
Dialogue: 0,0:38:50.70,0:38:51.11,Default,,0,0,0,,seated.
Dialogue: 0,0:38:51.37,0:38:52.53,Default,,0,0,0,,Data delivery with Drag and
Dialogue: 0,0:38:52.53,0:38:53.80,Default,,0,0,0,,Drop, which is going to go into
Dialogue: 0,0:38:53.80,0:38:55.38,Default,,0,0,0,,some more details about loading
Dialogue: 0,0:38:55.38,0:38:56.76,Default,,0,0,0,,and transferring the actual data
Dialogue: 0,0:38:56.76,0:38:57.82,Default,,0,0,0,,and item providers.
Dialogue: 0,0:38:58.28,0:38:58.83,Default,,0,0,0,,Really cool.
Dialogue: 0,0:38:59.22,0:38:59.96,Default,,0,0,0,,Stick around for that.
Dialogue: 0,0:39:00.18,0:39:00.95,Default,,0,0,0,,And, of course, we had some
Dialogue: 0,0:39:00.95,0:39:02.22,Default,,0,0,0,,other sessions earlier this week
Dialogue: 0,0:39:02.22,0:39:03.57,Default,,0,0,0,,on Drag and Drop, introducing
Dialogue: 0,0:39:03.57,0:39:04.56,Default,,0,0,0,,Drag and Drop, and mastering
Dialogue: 0,0:39:04.56,0:39:05.08,Default,,0,0,0,,Drag and Drop.
Dialogue: 0,0:39:05.33,0:39:06.92,Default,,0,0,0,,Check those out on video to
Dialogue: 0,0:39:06.92,0:39:07.37,Default,,0,0,0,,learn more.
Dialogue: 0,0:39:08.02,0:39:09.59,Default,,0,0,0,,Finally, we hope you've enjoyed
Dialogue: 0,0:39:09.59,0:39:10.51,Default,,0,0,0,,the presentation and have a
Dialogue: 0,0:39:10.51,0:39:11.76,Default,,0,0,0,,great WWDC.
Dialogue: 0,0:39:12.52,0:39:15.50,Default,,0,0,0,,[ Applause ]
