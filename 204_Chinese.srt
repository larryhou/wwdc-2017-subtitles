1
00:00:23,516 --> 00:00:25,896
[ 鼓掌 ]

2
00:00:26,396 --> 00:00:27,726
>> 大家下午好

3
00:00:28,096 --> 00:00:30,256
欢迎来到 WWDC 2017

4
00:00:30,936 --> 00:00:32,206
我叫 David Duncan

5
00:00:32,206 --> 00:00:34,536
今天  我将和 Raj Ramamurphy

6
00:00:34,536 --> 00:00:35,626
还有 Kyle Sluder 一起

7
00:00:35,693 --> 00:00:37,506
讲一讲

8
00:00:37,806 --> 00:00:39,946
怎么更新你的 app

9
00:00:40,016 --> 00:00:40,476
来适配 iOS 11

10
00:00:42,176 --> 00:00:44,076
首先说一下

11
00:00:44,076 --> 00:00:46,416
我们今天

12
00:00:46,416 --> 00:00:46,906
都要讲些什么

13
00:00:47,816 --> 00:00:48,966
第一个要和你们

14
00:00:48,966 --> 00:00:50,116
讨论的事情是

15
00:00:50,366 --> 00:00:52,486
如何在 UI 设计套件里

16
00:00:52,486 --> 00:00:55,586
启用新功能

17
00:00:55,586 --> 00:00:58,426
包括 UI 导航栏 UI 标签栏

18
00:00:58,426 --> 00:00:59,086
UI 工具栏和 UI 搜索栏

19
00:00:59,086 --> 00:01:00,736
我们会告诉你

20
00:01:00,736 --> 00:01:02,216
这些如何能够使你的 app

21
00:01:02,216 --> 00:01:04,135
变成我们在介绍 iOS 11 时

22
00:01:04,135 --> 00:01:06,056
你所看到的那样

23
00:01:07,266 --> 00:01:09,956
然后 Kyle 会上来

24
00:01:09,956 --> 00:01:11,116
给你们讲一讲

25
00:01:11,116 --> 00:01:13,116
如何调整边缘和嵌入

26
00:01:13,116 --> 00:01:14,656
以及我们对 UI scroll view 和 table view

27
00:01:14,656 --> 00:01:17,816
做出的改变

28
00:01:17,816 --> 00:01:21,286
我们会教你

29
00:01:21,286 --> 00:01:22,186
如何利用这些新功能

30
00:01:22,186 --> 00:01:22,686
让你的 app 变得更棒

31
00:01:23,256 --> 00:01:25,086
首先  我们来看一看

32
00:01:25,086 --> 00:01:26,936
文件夹

33
00:01:27,616 --> 00:01:29,896
如果你安装了

34
00:01:29,896 --> 00:01:31,616
Beta 版

35
00:01:31,616 --> 00:01:33,176
并看了文件夹

36
00:01:33,176 --> 00:01:35,586
你会发现它利用 UI 设计套件

37
00:01:35,586 --> 00:01:37,586
做出的一些改变

38
00:01:38,126 --> 00:01:39,636
你可以看到上面的

39
00:01:39,636 --> 00:01:41,126
这些大标题

40
00:01:41,126 --> 00:01:42,116
显示出浏览功能

41
00:01:42,926 --> 00:01:43,986
它下面

42
00:01:43,986 --> 00:01:45,246
有个搜索栏

43
00:01:45,246 --> 00:01:46,446
这个搜索栏

44
00:01:46,486 --> 00:01:47,596
应该和你之前看到过的

45
00:01:47,596 --> 00:01:48,526
都不太一样

46
00:01:49,206 --> 00:01:51,266
标签栏也有一些变化

47
00:01:51,266 --> 00:01:53,066
但是这里看不出来

48
00:01:53,066 --> 00:01:54,466
所以让我们

49
00:01:54,466 --> 00:01:56,696
变成横屏

50
00:01:57,136 --> 00:01:58,496
标签栏

51
00:01:58,496 --> 00:02:00,416
在横屏和 iPad 里

52
00:02:00,416 --> 00:02:02,876
都采用了新的外观

53
00:02:02,876 --> 00:02:04,556
图标和文字

54
00:02:04,556 --> 00:02:05,316
并排显示

55
00:02:05,316 --> 00:02:08,436
尤其是在 iPhone 里

56
00:02:08,436 --> 00:02:10,106
图标变小了

57
00:02:10,106 --> 00:02:11,366
标签栏也小了一些

58
00:02:11,366 --> 00:02:12,006
使得纵向有更多空间

59
00:02:12,706 --> 00:02:13,836
我们会告诉你

60
00:02:13,836 --> 00:02:15,576
如何个性化

61
00:02:15,636 --> 00:02:19,066
横屏和标签栏的图标

62
00:02:19,066 --> 00:02:20,796
变小之后

63
00:02:20,796 --> 00:02:22,826
有时会对

64
00:02:22,826 --> 00:02:24,156
视力较弱

65
00:02:24,156 --> 00:02:25,176
或者需要借助帮助

66
00:02:25,176 --> 00:02:26,166
才能看清的人

67
00:02:26,166 --> 00:02:26,636
产生一定影响

68
00:02:27,546 --> 00:02:28,856
这个我们也可以解决

69
00:02:28,856 --> 00:02:32,116
如果你选择更大的字体

70
00:02:32,116 --> 00:02:34,156
当你长按这些

71
00:02:34,156 --> 00:02:35,996
无论是标签栏  工具栏

72
00:02:35,996 --> 00:02:38,356
还是导航栏

73
00:02:38,356 --> 00:02:40,606
都会出现这个 HUD

74
00:02:40,606 --> 00:02:43,026
会清晰的显示

75
00:02:43,026 --> 00:02:45,206
文字和图标

76
00:02:45,206 --> 00:02:47,586
接下来我要介绍

77
00:02:47,586 --> 00:02:48,806
如何在你的 app 里

78
00:02:48,806 --> 00:02:50,066
使用这两项功能

79
00:02:50,066 --> 00:02:50,976
非常容易

80
00:02:52,476 --> 00:02:55,126
有一个分类叫 UI Bar Item

81
00:02:55,126 --> 00:02:56,776
你可能没怎么注意过

82
00:02:56,886 --> 00:02:58,216
因为它其实是

83
00:02:58,216 --> 00:03:00,406
UI 设计套件中

84
00:03:00,406 --> 00:03:02,586
两个重要 class 的上级目录

85
00:03:02,586 --> 00:03:05,136
分别是 UI Tab Bar Item

86
00:03:05,136 --> 00:03:05,666
和 UI Bar Button Item

87
00:03:05,756 --> 00:03:09,286
要想个性化

88
00:03:09,286 --> 00:03:11,766
标签栏在横屏的显示

89
00:03:11,766 --> 00:03:12,946
你只需要把这个属性

90
00:03:12,946 --> 00:03:14,836
这个 Landscape Image Phone 的属性

91
00:03:14,836 --> 00:03:17,166
加入你想

92
00:03:17,236 --> 00:03:18,906
放入标签栏的

93
00:03:18,906 --> 00:03:19,656
任何一个标签项中

94
00:03:19,656 --> 00:03:21,446
当然在 storyboard 和其他地方

95
00:03:21,446 --> 00:03:22,456
我们都有相关支持

96
00:03:22,456 --> 00:03:24,116
但这就是

97
00:03:24,116 --> 00:03:25,096
个性化的方法

98
00:03:25,096 --> 00:03:26,126
还有一些

99
00:03:26,126 --> 00:03:27,226
嵌入属性

100
00:03:27,256 --> 00:03:27,536
你可以选择

101
00:03:28,306 --> 00:03:30,876
要显示 HUD

102
00:03:30,876 --> 00:03:33,436
也有一个相关的属性

103
00:03:33,436 --> 00:03:35,736
叫 Large Content Size Image

104
00:03:36,746 --> 00:03:38,856
你可以设置这个

105
00:03:38,856 --> 00:03:40,186
输入大图标

106
00:03:40,186 --> 00:03:42,726
就会显示在 HUD 里  当然如果

107
00:03:42,726 --> 00:03:45,236
你的资源目录里使用的是 PDF 的话

108
00:03:45,406 --> 00:03:46,386
就更简单了

109
00:03:46,966 --> 00:03:49,676
你只需要设定

110
00:03:49,786 --> 00:03:53,156
保存 PDF 数据

111
00:03:53,156 --> 00:03:55,566
我们就能自动提取这个 PDF 数据

112
00:03:55,566 --> 00:03:57,036
调整大小

113
00:03:57,036 --> 00:03:58,406
并在 HUD 中显示

114
00:03:58,406 --> 00:03:59,516
而你完全不需要

115
00:03:59,516 --> 00:03:59,976
做其他任何事情

116
00:04:04,086 --> 00:04:06,426
如果你想了解更多

117
00:04:06,426 --> 00:04:07,636
辅助功能

118
00:04:07,636 --> 00:04:08,976
比如 HUD 以及使用方法

119
00:04:08,976 --> 00:04:10,526
这周三

120
00:04:10,526 --> 00:04:11,796
有专门关于辅助功能

121
00:04:11,796 --> 00:04:12,946
的讲座

122
00:04:12,946 --> 00:04:14,356
建议你们可以去听一听

123
00:04:14,356 --> 00:04:15,386
iOS 11 中

124
00:04:15,386 --> 00:04:17,016
新的辅助功能

125
00:04:17,016 --> 00:04:19,886
接下来我们聊聊

126
00:04:19,886 --> 00:04:20,956
导航栏

127
00:04:21,026 --> 00:04:22,836
我们怎么让这些大标题

128
00:04:22,836 --> 00:04:24,296
显示在文件夹上

129
00:04:24,296 --> 00:04:25,286
和系统里的

130
00:04:25,286 --> 00:04:25,516
其他 app 上

131
00:04:26,156 --> 00:04:28,926
首先  UI 导航栏

132
00:04:28,966 --> 00:04:31,436
有个新的属性

133
00:04:31,436 --> 00:04:32,296
叫 prefers Large Titles

134
00:04:32,856 --> 00:04:34,566
在任何一个导航栏

135
00:04:34,566 --> 00:04:36,686
设定为 true

136
00:04:36,686 --> 00:04:38,486
你就可以在各个系统

137
00:04:38,486 --> 00:04:39,486
和各个 app 里

138
00:04:39,486 --> 00:04:40,136
看到大标题

139
00:04:41,356 --> 00:04:42,796
你可能在想

140
00:04:42,796 --> 00:04:44,326
这一页上的

141
00:04:44,326 --> 00:04:45,556
另外三个词

142
00:04:45,556 --> 00:04:46,476
可能有点看不清

143
00:04:46,476 --> 00:04:48,026
Automatic  Always  Never

144
00:04:48,026 --> 00:04:48,906
这三个词

145
00:04:48,906 --> 00:04:49,296
是干嘛的

146
00:04:49,946 --> 00:04:51,776
当他们出现时

147
00:04:51,776 --> 00:04:52,996
有另一个属性可以控制

148
00:04:52,996 --> 00:04:55,176
叫 large Title Display Mode

149
00:04:55,886 --> 00:04:57,346
它可以让你轻松的

150
00:04:57,346 --> 00:04:58,546
控制

151
00:04:58,546 --> 00:04:59,846
在每个 Navigation Controller

152
00:04:59,886 --> 00:05:01,126
和导航栏 stack

153
00:05:01,126 --> 00:05:03,436
是否让大标题

154
00:05:03,436 --> 00:05:03,976
出现

155
00:05:04,386 --> 00:05:05,516
现在让我来

156
00:05:05,516 --> 00:05:05,866
告诉你们怎么做

157
00:05:07,326 --> 00:05:09,046
我们在这个导航栏中

158
00:05:09,046 --> 00:05:11,286
打开大标题

159
00:05:11,286 --> 00:05:12,116
然后在上面放一个条目

160
00:05:12,456 --> 00:05:14,346
它会默认为 Automatic

161
00:05:14,346 --> 00:05:16,456
意味着

162
00:05:16,456 --> 00:05:18,506
现有状态

163
00:05:18,506 --> 00:05:20,436
无论谁执行了该操作

164
00:05:20,776 --> 00:05:21,496
都会自动保存

165
00:05:22,046 --> 00:05:23,326
现在这个 stack 上没有别的

166
00:05:23,326 --> 00:05:24,646
所以当我们选择大标题

167
00:05:24,646 --> 00:05:26,226
大标题就出现了

168
00:05:26,226 --> 00:05:28,226
但是如果我们选中

169
00:05:28,226 --> 00:05:29,516
一个不希望显示大标题的

170
00:05:29,516 --> 00:05:30,896
Navigation Item

171
00:05:30,896 --> 00:05:32,996
我们只需要把 large Title Display Mode

172
00:05:32,996 --> 00:05:34,326
选为 never

173
00:05:34,326 --> 00:05:36,526
大标题就消失了

174
00:05:38,076 --> 00:05:38,876
现在我们重新选择

175
00:05:38,876 --> 00:05:40,506
Automatic

176
00:05:40,506 --> 00:05:42,126
保存现有设置

177
00:05:42,126 --> 00:05:43,926
就没有大标题了

178
00:05:43,926 --> 00:05:46,286
但如果这时选择 Always

179
00:05:46,286 --> 00:05:47,026
大标题又回来了

180
00:05:47,026 --> 00:05:48,546
这时再选择 Automatic

181
00:05:48,546 --> 00:05:50,796
一切就又保存成这样了

182
00:05:51,236 --> 00:05:54,266
很简单

183
00:05:54,266 --> 00:05:55,736
关于 Navigation Item

184
00:05:55,736 --> 00:05:58,706
还有两件事要说

185
00:05:58,706 --> 00:06:00,226
第一是

186
00:06:00,226 --> 00:06:01,486
如何在导航栏上

187
00:06:01,486 --> 00:06:02,916
结合 Search Controller

188
00:06:02,916 --> 00:06:03,256
和新的搜索栏

189
00:06:04,456 --> 00:06:06,316
有另一个简单的属性

190
00:06:06,556 --> 00:06:07,726
叫 Navigation Item Search Controller

191
00:06:08,716 --> 00:06:09,476
只要把 Search Controller

192
00:06:09,476 --> 00:06:10,526
分配给 Navigation Item

193
00:06:10,526 --> 00:06:13,476
就可以了

194
00:06:13,586 --> 00:06:14,556
搜索栏出现在正确的位置上

195
00:06:14,556 --> 00:06:17,326
看起来和我们其他

196
00:06:17,326 --> 00:06:19,436
很多 app 里的一样

197
00:06:19,616 --> 00:06:20,636
如果你有机会

198
00:06:20,636 --> 00:06:22,486
探索过文件夹

199
00:06:22,486 --> 00:06:23,696
邮件或者其他一些 app

200
00:06:23,696 --> 00:06:24,806
你会发现有时候

201
00:06:24,936 --> 00:06:26,396
搜索栏会保持不动

202
00:06:26,396 --> 00:06:27,436
当你滑动页面时

203
00:06:27,436 --> 00:06:28,186
搜索栏不会跟着滑动

204
00:06:28,266 --> 00:06:29,516
尤其是在文件夹中

205
00:06:29,516 --> 00:06:31,216
搜索栏会固定位置

206
00:06:31,216 --> 00:06:33,346
这是由 hides Search Bar when Scrolling

207
00:06:33,386 --> 00:06:35,266
这个属性控制的

208
00:06:36,126 --> 00:06:37,276
它默认为 true

209
00:06:37,276 --> 00:06:38,686
所以在邮件里它会

210
00:06:38,686 --> 00:06:40,916
随着滑动而移动

211
00:06:40,916 --> 00:06:41,936
但在文件夹里这个属性被关闭了

212
00:06:41,936 --> 00:06:43,346
所以搜索栏就停留在页面上了

213
00:06:43,346 --> 00:06:44,396
你可以随时搜索

214
00:06:44,396 --> 00:06:46,726
这看起来很棒

215
00:06:47,356 --> 00:06:49,796
这是怎么做到的

216
00:06:49,796 --> 00:06:51,106
我来告诉你们

217
00:06:51,106 --> 00:06:52,166
一些小技巧

218
00:06:52,956 --> 00:06:54,156
首先

219
00:06:54,156 --> 00:06:55,676
你要了解

220
00:06:55,676 --> 00:06:56,806
很多类似的交互

221
00:06:56,806 --> 00:06:58,626
是由 UI Navigation Controller

222
00:06:58,626 --> 00:06:59,106
控制的

223
00:06:59,566 --> 00:07:01,226
所以如果你

224
00:07:01,226 --> 00:07:03,066
在导航栏

225
00:07:03,066 --> 00:07:04,346
自己汇编这些指令

226
00:07:04,346 --> 00:07:05,746
并不是很多人会这么做

227
00:07:05,746 --> 00:07:07,476
不过如果你做了

228
00:07:07,936 --> 00:07:08,946
你就无法得到

229
00:07:08,946 --> 00:07:09,626
现在的某些性能

230
00:07:10,006 --> 00:07:11,636
尤其是没办法

231
00:07:11,636 --> 00:07:12,576
做到 Search Controller

232
00:07:12,576 --> 00:07:13,186
的融合

233
00:07:13,216 --> 00:07:15,536
你没办法做到

234
00:07:15,536 --> 00:07:17,636
提升 Refresh control

235
00:07:17,636 --> 00:07:18,586
也无法做到 Rubber bending

236
00:07:18,586 --> 00:07:19,956
Rubber bending 指的是

237
00:07:19,956 --> 00:07:21,456
当你下拉时

238
00:07:21,456 --> 00:07:23,496
大标题变大

239
00:07:23,496 --> 00:07:24,086
并随着滚动条移动

240
00:07:25,666 --> 00:07:27,606
这些就是关于导航栏

241
00:07:27,606 --> 00:07:29,386
Navigation Controller

242
00:07:29,386 --> 00:07:30,816
和大标题的介绍

243
00:07:31,846 --> 00:07:33,716
当我们做出这些调整时

244
00:07:33,716 --> 00:07:34,826
我们想

245
00:07:34,826 --> 00:07:36,016
不如再做些别的变化

246
00:07:36,016 --> 00:07:37,346
能够让你们

247
00:07:37,456 --> 00:07:38,636
使用的更加方便

248
00:07:38,636 --> 00:07:42,756
所以现在在 iOS 11 里

249
00:07:42,756 --> 00:07:45,846
UI 工具栏和导航栏

250
00:07:45,846 --> 00:07:47,596
都有很多功能

251
00:07:47,596 --> 00:07:47,976
来完成自动布局

252
00:07:48,516 --> 00:07:54,106
[ 鼓掌 ]

253
00:07:54,606 --> 00:07:56,266
这意味着

254
00:07:56,266 --> 00:07:57,706
个性化 Bar Button Items

255
00:07:57,706 --> 00:07:59,216
和个性化 title views

256
00:07:59,216 --> 00:08:01,126
可以使用自动布局

257
00:08:01,126 --> 00:08:03,276
来调整大小

258
00:08:03,276 --> 00:08:04,466
从而达到你想要的状态

259
00:08:05,326 --> 00:08:06,726
还有几件事情

260
00:08:06,726 --> 00:08:07,346
希望你们能记住

261
00:08:07,926 --> 00:08:08,966
一个是

262
00:08:08,966 --> 00:08:10,216
把约束项

263
00:08:10,216 --> 00:08:10,776
保持在 view 里面

264
00:08:11,286 --> 00:08:12,546
所以当你设定个性化 view

265
00:08:12,546 --> 00:08:13,496
你要注意

266
00:08:13,496 --> 00:08:15,356
所有的约束项

267
00:08:15,356 --> 00:08:16,946
只指向某一个 title view

268
00:08:16,946 --> 00:08:19,566
和它的 sub-view

269
00:08:19,756 --> 00:08:21,776
另一个有些大

270
00:08:21,776 --> 00:08:23,246
但是也值得一提

271
00:08:23,416 --> 00:08:25,136
当你使用自动布局时

272
00:08:25,136 --> 00:08:26,216
我们是假设

273
00:08:26,216 --> 00:08:28,746
你知道自己在做什么的  [ 笑 ]

274
00:08:28,746 --> 00:08:30,866
之所以要说这个

275
00:08:30,866 --> 00:08:32,866
是因为我不希望

276
00:08:32,866 --> 00:08:34,586
你们会遇到这种情况

277
00:08:34,885 --> 00:08:36,586
Zero-Sized view

278
00:08:37,446 --> 00:08:39,155
怎么才能不出现

279
00:08:39,155 --> 00:08:39,876
Zero-Sized view 呢

280
00:08:40,196 --> 00:08:43,155
UI 导航栏

281
00:08:43,155 --> 00:08:44,316
和 UI 工具栏

282
00:08:44,316 --> 00:08:44,876
提供位置信息

283
00:08:45,796 --> 00:08:47,366
之所以会出现 Zero-Size view

284
00:08:47,366 --> 00:08:48,806
是因为布局中

285
00:08:48,806 --> 00:08:49,606
有不明确的约束项

286
00:08:49,606 --> 00:08:51,246
所以空间被

287
00:08:51,246 --> 00:08:51,886
自动填补了

288
00:08:51,886 --> 00:08:52,946
你的 view 不会

289
00:08:52,946 --> 00:08:54,086
缩小到左上角

290
00:08:54,086 --> 00:08:56,366
但是你依然需要

291
00:08:56,366 --> 00:08:57,866
给我们提供一个尺寸

292
00:08:57,946 --> 00:08:59,406
有三种方法

293
00:08:59,406 --> 00:09:00,256
可以做到

294
00:09:01,136 --> 00:09:03,096
你可以为宽和高

295
00:09:03,096 --> 00:09:04,376
添加约束项

296
00:09:04,376 --> 00:09:05,756
非常合理

297
00:09:05,756 --> 00:09:07,536
你还可以把

298
00:09:07,536 --> 00:09:08,966
其他你想要的条件写入

299
00:09:08,966 --> 00:09:09,686
就完美了

300
00:09:11,076 --> 00:09:12,376
你也可以使用

301
00:09:12,446 --> 00:09:13,816
Intrinsic Content Size

302
00:09:13,816 --> 00:09:15,626
这也为我们

303
00:09:15,626 --> 00:09:16,856
提供了足够的信息

304
00:09:17,376 --> 00:09:18,446
你可以进行

305
00:09:18,446 --> 00:09:19,336
限制内容变大

306
00:09:19,336 --> 00:09:20,586
和变小的设置

307
00:09:20,586 --> 00:09:21,706
这样就行了

308
00:09:22,736 --> 00:09:24,566
最后  当然也是最简单的

309
00:09:24,566 --> 00:09:26,566
对于大多数人来说

310
00:09:26,566 --> 00:09:27,586
你只要确保你的

311
00:09:27,586 --> 00:09:29,286
所有 sub-view

312
00:09:29,286 --> 00:09:30,486
都关联到自动布局

313
00:09:30,486 --> 00:09:32,826
也就是说

314
00:09:32,826 --> 00:09:34,956
比如你有一个想个性化的标题

315
00:09:35,016 --> 00:09:36,276
里面有一个标签和一个按键

316
00:09:36,276 --> 00:09:38,416
如果你想

317
00:09:38,416 --> 00:09:39,726
有一个合适的

318
00:09:39,726 --> 00:09:41,426
水平宽度

319
00:09:41,426 --> 00:09:43,556
你只需要确保

320
00:09:43,556 --> 00:09:45,426
标签和按键之间

321
00:09:45,426 --> 00:09:46,716
有设定好的约束值

322
00:09:46,716 --> 00:09:48,146
这样在这两个 view 中

323
00:09:48,146 --> 00:09:50,156
标题的前沿后沿

324
00:09:50,246 --> 00:09:51,936
以及宽度

325
00:09:51,936 --> 00:09:53,046
就都设定好了

326
00:09:54,276 --> 00:09:56,266
这就是如何

327
00:09:56,326 --> 00:09:59,006
利用自动布局

328
00:09:59,006 --> 00:10:00,706
为你个性化的

329
00:10:00,706 --> 00:10:02,006
标题和条目

330
00:10:02,006 --> 00:10:02,706
调整大小

331
00:10:03,436 --> 00:10:05,446
接下来

332
00:10:05,446 --> 00:10:06,656
为了演示我们刚才说的内容

333
00:10:06,656 --> 00:10:07,596
让我们邀请 Raj Ramamurphy

334
00:10:07,596 --> 00:10:07,966
给你们进行演示

335
00:10:08,516 --> 00:10:16,246
[ 鼓掌 ]

336
00:10:16,746 --> 00:10:17,396
>> 谢谢 David

337
00:10:17,766 --> 00:10:19,986
就像 David 刚才说的

338
00:10:19,986 --> 00:10:21,956
我们在 iOS 11 里

339
00:10:22,056 --> 00:10:23,916
为这些新的导航栏

340
00:10:23,916 --> 00:10:24,696
添加了很多很棒的新 API

341
00:10:25,346 --> 00:10:26,326
我要告诉你们

342
00:10:26,326 --> 00:10:28,226
如何更新 app 来适配 iOS 11

343
00:10:29,246 --> 00:10:30,166
今天

344
00:10:30,166 --> 00:10:31,176
我的例子

345
00:10:31,176 --> 00:10:32,826
是个很简单的 app

346
00:10:32,826 --> 00:10:33,586
叫 Trail Diary

347
00:10:34,036 --> 00:10:35,276
是一个访问轨迹

348
00:10:35,276 --> 00:10:35,776
的日志

349
00:10:36,636 --> 00:10:37,846
这是主 View Controller

350
00:10:37,846 --> 00:10:38,936
我称它为

351
00:10:38,936 --> 00:10:40,016
Memory View Controller

352
00:10:40,656 --> 00:10:42,056
如果我点中一个条目

353
00:10:42,056 --> 00:10:43,666
你会发现

354
00:10:43,666 --> 00:10:44,766
这是 Detail View Controller

355
00:10:45,216 --> 00:10:46,586
包含一张照片

356
00:10:46,586 --> 00:10:47,736
一个描述

357
00:10:47,736 --> 00:10:48,646
和一些信息

358
00:10:49,726 --> 00:10:50,776
还有一种方法

359
00:10:50,776 --> 00:10:52,046
可以添加评论

360
00:10:52,046 --> 00:10:52,986
我们一会儿会讲到

361
00:10:53,486 --> 00:10:55,276
但是现在让我们

362
00:10:55,276 --> 00:10:56,436
先更新这个 app

363
00:10:57,316 --> 00:10:58,616
首先要介绍

364
00:10:58,616 --> 00:11:00,686
在这个 app 里

365
00:11:00,686 --> 00:11:02,096
为这些漂亮的大标题

366
00:11:02,096 --> 00:11:03,396
提供支持

367
00:11:04,076 --> 00:11:05,136
让我们开始吧

368
00:11:06,066 --> 00:11:07,826
我们打开 Navigation

369
00:11:08,076 --> 00:11:08,976
对不起

370
00:11:08,976 --> 00:11:10,876
Memory View Controller

371
00:11:10,876 --> 00:11:11,726
输入

372
00:11:11,726 --> 00:11:11,976
Navigation Controller

373
00:11:17,186 --> 00:11:19,836
然后是 navigation bar

374
00:11:20,056 --> 00:11:22,256
把 prefers Large Titles 属性

375
00:11:22,256 --> 00:11:24,056
设定给导航栏

376
00:11:24,996 --> 00:11:26,516
当你设定了这个属性

377
00:11:26,886 --> 00:11:29,216
所有地方都变成大标题了

378
00:11:29,916 --> 00:11:31,836
如果我重新编译

379
00:11:31,836 --> 00:11:34,716
并重启这个 app

380
00:11:35,296 --> 00:11:37,106
重新打开 Memory View Controller

381
00:11:37,106 --> 00:11:39,316
你可以看到

382
00:11:39,316 --> 00:11:41,356
这个漂亮的大标题

383
00:11:41,516 --> 00:11:42,616
因为我们已经把

384
00:11:42,616 --> 00:11:44,206
Refresh control 设置到

385
00:11:44,206 --> 00:11:45,686
导航栏了

386
00:11:45,686 --> 00:11:46,926
我们就可以看到 Rubber banding

387
00:11:47,126 --> 00:11:48,036
一切看起来都很棒

388
00:11:48,876 --> 00:11:50,386
Prefers Large Titles 会让所有地方

389
00:11:50,386 --> 00:11:52,266
都变成大标题

390
00:11:52,656 --> 00:11:54,506
所以如果我回到

391
00:11:54,506 --> 00:11:55,946
Detail View Controller

392
00:11:55,946 --> 00:11:57,546
可以看到一个很漂亮的过渡

393
00:11:57,546 --> 00:11:58,386
Detail View Controller 里

394
00:11:58,386 --> 00:11:59,716
也显示出

395
00:11:59,716 --> 00:12:00,126
大标题了

396
00:12:01,126 --> 00:12:02,656
这很好  但是有时

397
00:12:02,656 --> 00:12:03,876
你并不希望

398
00:12:03,876 --> 00:12:04,816
大标题出现在所有地方

399
00:12:05,356 --> 00:12:06,966
所以就像 David 说的

400
00:12:06,966 --> 00:12:08,786
我们有一个

401
00:12:08,786 --> 00:12:10,856
Navigation Item 属性

402
00:12:10,856 --> 00:12:11,706
Large title Display Mode

403
00:12:12,956 --> 00:12:15,416
我希望在这个 view 里显示

404
00:12:15,416 --> 00:12:16,596
标准的行内标题

405
00:12:16,916 --> 00:12:18,356
让我们来更新这个 View Controller

406
00:12:18,356 --> 00:12:19,816
来显示行内标题

407
00:12:21,246 --> 00:12:22,936
打开 Detail View Controller

408
00:12:22,936 --> 00:12:24,186
把 Navigation Item 的

409
00:12:24,186 --> 00:12:26,346
Large Title Display Mode

410
00:12:26,346 --> 00:12:28,506
设定为 never

411
00:12:28,506 --> 00:12:29,786
就像 David 之前用 stack 展示的那样

412
00:12:29,786 --> 00:12:33,596
如果我们再编译并重启 app

413
00:12:33,596 --> 00:12:35,446
我们一开始会看到

414
00:12:35,446 --> 00:12:37,996
大标题

415
00:12:37,996 --> 00:12:39,586
但是如果我点中 View Controller

416
00:12:39,586 --> 00:12:41,216
就可以看到

417
00:12:41,216 --> 00:12:42,136
标准的行内标题

418
00:12:42,136 --> 00:12:43,416
而且有很好的过渡

419
00:12:43,416 --> 00:12:44,166
看起来很棒

420
00:12:45,326 --> 00:12:46,066
这就是如何使用

421
00:12:46,066 --> 00:12:48,246
Navigation Item 属性

422
00:12:48,246 --> 00:12:50,536
来显示大标题

423
00:12:50,536 --> 00:12:51,806
但我还希望给这个 app

424
00:12:51,806 --> 00:12:52,426
添加搜索栏

425
00:12:53,256 --> 00:12:54,496
我已经提前

426
00:12:54,496 --> 00:12:55,576
安装了一个 Search Controller 例子

427
00:12:55,576 --> 00:12:57,066
我希望在这个

428
00:12:57,066 --> 00:12:57,986
app 里显示

429
00:12:57,986 --> 00:12:58,566
搜索栏

430
00:12:59,246 --> 00:13:00,486
你可以看到

431
00:13:00,486 --> 00:13:01,696
在 iOS 11 里

432
00:13:01,696 --> 00:13:04,056
导航栏里会显示搜索栏

433
00:13:04,346 --> 00:13:05,476
让我们把它加上

434
00:13:06,556 --> 00:13:08,516
我们再次打开 Memory View Controller

435
00:13:08,516 --> 00:13:10,476
然后设定

436
00:13:10,476 --> 00:13:12,396
Navigation Item 的

437
00:13:12,396 --> 00:13:13,696
Search Controller 属性

438
00:13:13,696 --> 00:13:15,586
在这个例子里

439
00:13:15,586 --> 00:13:16,926
就叫 Search Controller

440
00:13:20,606 --> 00:13:22,646
重新编译

441
00:13:22,646 --> 00:13:22,976
并重启 app

442
00:13:27,116 --> 00:13:28,006
你会发现

443
00:13:28,006 --> 00:13:29,226
app 进入

444
00:13:29,226 --> 00:13:31,386
Memory View Controller 时

445
00:13:31,386 --> 00:13:33,796
还是大标题

446
00:13:33,796 --> 00:13:35,236
而当我们下拉时

447
00:13:35,236 --> 00:13:36,726
就出现了搜索栏

448
00:13:37,546 --> 00:13:38,816
现在这个 app

449
00:13:38,816 --> 00:13:39,166
看起来棒极了

450
00:13:39,766 --> 00:13:42,606
这就是如何

451
00:13:42,606 --> 00:13:44,236
更新你的状态栏

452
00:13:44,236 --> 00:13:45,496
来显示成 iOS 11 的样子

453
00:13:46,096 --> 00:13:47,496
下面请 Kyle Sluder

454
00:13:47,496 --> 00:13:49,016
来聊一聊

455
00:13:49,016 --> 00:13:50,706
边缘 嵌入

456
00:13:50,706 --> 00:13:50,976
和 scroll view

457
00:13:51,516 --> 00:13:56,666
[ 鼓掌 ]

458
00:13:57,166 --> 00:13:58,166
>> 干得漂亮

459
00:13:59,346 --> 00:13:59,976
谢谢  Raj

460
00:14:04,496 --> 00:14:06,156
在 iOS 11 里

461
00:14:06,156 --> 00:14:07,546
我们做出了不少改进

462
00:14:07,546 --> 00:14:09,396
让你们有更多信息

463
00:14:09,396 --> 00:14:10,766
也更容易调整 view

464
00:14:10,766 --> 00:14:11,756
来展示用户界面

465
00:14:12,606 --> 00:14:13,806
让我们首先说说

466
00:14:13,806 --> 00:14:14,756
布局边缘

467
00:14:15,426 --> 00:14:16,756
布局边缘是

468
00:14:16,756 --> 00:14:19,146
UI 设计套件中

469
00:14:19,186 --> 00:14:21,506
为内部 view

470
00:14:21,506 --> 00:14:22,666
提供参考的一部分

471
00:14:22,666 --> 00:14:24,706
来布局内容

472
00:14:24,706 --> 00:14:25,556
给其他的用户界面元素之间

473
00:14:25,556 --> 00:14:26,406
添加一些空间

474
00:14:26,986 --> 00:14:28,116
我们通过两种方法

475
00:14:28,116 --> 00:14:28,906
提供信息

476
00:14:29,356 --> 00:14:30,966
首先是 UI 布局指导对象

477
00:14:30,966 --> 00:14:32,736
你可以和

478
00:14:32,736 --> 00:14:34,546
自动布局一起

479
00:14:34,586 --> 00:14:35,026
摆放内容位置

480
00:14:36,316 --> 00:14:38,116
第二种是

481
00:14:38,116 --> 00:14:38,636
一套边缘内嵌

482
00:14:38,756 --> 00:14:40,086
你可以在 view 里

483
00:14:40,086 --> 00:14:41,886
读取和写入

484
00:14:41,886 --> 00:14:43,206
来个性化布局边缘

485
00:14:44,606 --> 00:14:45,926
在 iOS 11 里我们

486
00:14:45,926 --> 00:14:47,656
添加了一个新属性

487
00:14:47,656 --> 00:14:48,196
Directional Layout Margins

488
00:14:48,786 --> 00:14:49,946
可以让你在 view 里

489
00:14:49,946 --> 00:14:50,996
设定布局边缘

490
00:14:50,996 --> 00:14:52,566
不只是在左右

491
00:14:52,566 --> 00:14:54,126
还有前沿

492
00:14:54,176 --> 00:14:54,556
和后沿

493
00:14:55,556 --> 00:14:57,296
这两个属性

494
00:14:57,296 --> 00:14:58,086
是相互同步的

495
00:14:58,086 --> 00:15:00,676
左属性

496
00:15:00,676 --> 00:15:01,566
和前沿同步

497
00:15:01,566 --> 00:15:03,106
当你写入 LTR

498
00:15:03,106 --> 00:15:04,196
或者从右往左的语言时

499
00:15:04,526 --> 00:15:05,526
右属性

500
00:15:05,526 --> 00:15:06,686
和后沿属性同步

501
00:15:07,356 --> 00:15:09,106
所以我可以给

502
00:15:09,106 --> 00:15:10,436
这个 view 的后沿属性

503
00:15:10,436 --> 00:15:12,456
写入一个数值

504
00:15:12,456 --> 00:15:15,056
使布局调整

505
00:15:15,056 --> 00:15:15,896
当我写入

506
00:15:15,896 --> 00:15:17,806
从右往左的语言

507
00:15:18,096 --> 00:15:19,516
后沿空间会

508
00:15:19,516 --> 00:15:21,576
出现在 view 左边

509
00:15:21,576 --> 00:15:22,946
我的布局代码可以

510
00:15:22,946 --> 00:15:23,706
从布局边缘的

511
00:15:23,706 --> 00:15:23,956
左属性读取

512
00:15:24,516 --> 00:15:30,546
[ 鼓掌 ]

513
00:15:31,046 --> 00:15:32,046
有一个性能

514
00:15:32,046 --> 00:15:33,336
在我们一开始介绍

515
00:15:33,336 --> 00:15:34,596
布局边缘时就提到过

516
00:15:34,596 --> 00:15:36,296
当给 View Controller 添加

517
00:15:36,296 --> 00:15:38,196
一个 view 时 可以给

518
00:15:38,196 --> 00:15:40,086
布局边缘固定一个

519
00:15:40,086 --> 00:15:40,656
UI 设计套件的定义值

520
00:15:42,516 --> 00:15:44,596
从 iOS 11 开始

521
00:15:44,596 --> 00:15:46,236
这些将不再是固定数值

522
00:15:46,556 --> 00:15:47,736
而是最小值

523
00:15:48,326 --> 00:15:49,776
我们通过这个新的属性

524
00:15:49,776 --> 00:15:51,276
System Minimum Layout Margins

525
00:15:51,276 --> 00:15:53,106
来定义

526
00:15:53,106 --> 00:15:54,106
这些数值的大小

527
00:15:54,586 --> 00:15:55,806
你可以把 view 的

528
00:15:55,806 --> 00:15:57,616
布局边缘数值调大

529
00:15:57,616 --> 00:15:58,976
不需要别的改变

530
00:15:59,516 --> 00:16:03,976
[鼓掌]

531
00:16:04,476 --> 00:16:05,976
我们又进了一步

532
00:16:05,976 --> 00:16:07,826
给 View Controller 又添加

533
00:16:07,826 --> 00:16:09,496
了一个新的属性

534
00:16:09,496 --> 00:16:11,096
View Respects System Minimum Layout Margins

535
00:16:11,456 --> 00:16:14,086
如果设定为 false

536
00:16:14,086 --> 00:16:15,156
你可以把布局边缘

537
00:16:15,156 --> 00:16:16,276
改成你想要的任何数值

538
00:16:16,276 --> 00:16:18,276
包括零

539
00:16:18,276 --> 00:16:19,546
这样在任何 view 里

540
00:16:19,546 --> 00:16:21,256
你都可以得到全幅的内容

541
00:16:21,256 --> 00:16:21,926
包括那些被

542
00:16:21,926 --> 00:16:22,346
View Controller 管理的 view

543
00:16:25,256 --> 00:16:27,256
从 iOS 7 开始

544
00:16:27,256 --> 00:16:29,306
我们就在操作系统里

545
00:16:29,306 --> 00:16:30,746
提供这样的半透明的栏

546
00:16:30,746 --> 00:16:31,966
我们鼓励你把

547
00:16:31,966 --> 00:16:33,486
内容拉过这些栏

548
00:16:33,486 --> 00:16:34,396
就像我现在

549
00:16:34,396 --> 00:16:35,036
在照片 app 中做的这样

550
00:16:36,146 --> 00:16:37,206
之所以有这样的效果

551
00:16:37,206 --> 00:16:38,596
是利用 UI View Controller 的

552
00:16:38,596 --> 00:16:40,016
属性

553
00:16:40,016 --> 00:16:40,476
Edges for Extended Layout

554
00:16:41,096 --> 00:16:42,326
它可以让

555
00:16:42,326 --> 00:16:44,096
Container View Controllers

556
00:16:44,096 --> 00:16:46,676
定义这些栏下

557
00:16:46,676 --> 00:16:47,216
View 的大小

558
00:16:48,026 --> 00:16:50,016
默认它适用于

559
00:16:50,016 --> 00:16:53,176
所有的边缘

560
00:16:53,436 --> 00:16:55,186
可以通过两个属性

561
00:16:55,616 --> 00:16:57,176
定义悬浮栏的大小

562
00:16:57,176 --> 00:16:58,556
Top Layout Guide

563
00:16:58,556 --> 00:16:58,806
和 bottom Layout Guide

564
00:16:59,986 --> 00:17:01,176
从 iOS 11 开始

565
00:17:01,176 --> 00:17:02,916
我们舍弃了这些属性

566
00:17:02,916 --> 00:17:03,836
替换成新的

567
00:17:03,836 --> 00:17:05,396
更强大的架构

568
00:17:05,396 --> 00:17:05,816
叫安全区域

569
00:17:10,215 --> 00:17:11,726
安全区域是用来

570
00:17:11,726 --> 00:17:13,226
描述 view 中

571
00:17:13,226 --> 00:17:14,826
没有被内容

572
00:17:14,906 --> 00:17:15,476
占满的部分

573
00:17:16,276 --> 00:17:17,826
你可以通过一套内嵌

574
00:17:17,826 --> 00:17:20,695
或者用 UI 布局指导对象

575
00:17:20,695 --> 00:17:21,306
来实现

576
00:17:22,185 --> 00:17:24,116
在电视上

577
00:17:24,116 --> 00:17:26,866
它嵌入了

578
00:17:26,866 --> 00:17:28,226
一些很有用的信息

579
00:17:28,226 --> 00:17:28,796
叫 over Scan Compensation Insets

580
00:17:29,056 --> 00:17:30,736
屏幕上的所有 view

581
00:17:30,736 --> 00:17:32,606
都可以布局内容

582
00:17:32,606 --> 00:17:33,836
并确保不会

583
00:17:33,836 --> 00:17:35,126
和电视边框

584
00:17:35,126 --> 00:17:35,676
重叠

585
00:17:36,176 --> 00:17:38,156
如果你有

586
00:17:38,156 --> 00:17:39,726
个性化 Container View Controller

587
00:17:39,726 --> 00:17:41,176
就可以自己添加一些栏

588
00:17:41,486 --> 00:17:43,506
你可以调大

589
00:17:43,846 --> 00:17:45,096
对不起

590
00:17:45,096 --> 00:17:46,916
调大安全区域的嵌入

591
00:17:46,916 --> 00:17:49,096
通过这个新的属性

592
00:17:49,096 --> 00:17:51,036
Additional Safe Area Insets

593
00:17:52,246 --> 00:17:53,616
如果你的

594
00:17:53,616 --> 00:17:55,396
Ancestor View Controller

595
00:17:55,396 --> 00:17:57,416
改变了安全区域嵌入的大小

596
00:17:57,416 --> 00:17:58,666
你可以通过两种方法

597
00:17:58,666 --> 00:17:59,056
重新掌控主导权

598
00:17:59,276 --> 00:18:01,066
每个 view 都可以

599
00:18:01,066 --> 00:18:02,566
改变安全区域嵌入

600
00:18:02,566 --> 00:18:03,906
而 View Controllers 也可以

601
00:18:03,906 --> 00:18:05,226
改变 view 安全区域嵌入

602
00:18:06,896 --> 00:18:07,816
[ 鼓掌 ] 谢谢

603
00:18:08,456 --> 00:18:10,456
[ 鼓掌 ]

604
00:18:10,896 --> 00:18:12,576
一个在 UI View Controller 里

605
00:18:12,576 --> 00:18:14,086
经常使用的 view

606
00:18:14,086 --> 00:18:14,746
就是 UI scroll view

607
00:18:15,436 --> 00:18:17,026
在这个例子中

608
00:18:17,026 --> 00:18:18,286
我在 UI scroll view 里

609
00:18:18,286 --> 00:18:19,926
有一些文字

610
00:18:19,926 --> 00:18:21,636
包含在 Navigation Controller 里

611
00:18:22,766 --> 00:18:24,386
以前 Navigation Controller

612
00:18:24,386 --> 00:18:26,706
会给最高级 View Controller

613
00:18:26,706 --> 00:18:28,806
的 scroll view

614
00:18:28,806 --> 00:18:30,296
一个内容内嵌

615
00:18:31,786 --> 00:18:33,156
在 iOS 11 里

616
00:18:33,156 --> 00:18:34,886
我们做出了很大的改变

617
00:18:34,886 --> 00:18:36,566
我们不再

618
00:18:36,566 --> 00:18:37,596
通过 scroll view

619
00:18:37,596 --> 00:18:37,876
填入内容内嵌属性

620
00:18:38,386 --> 00:18:40,356
我们添加了

621
00:18:40,356 --> 00:18:42,176
一个新属性

622
00:18:42,176 --> 00:18:44,536
Adjusted Content Inset

623
00:18:44,536 --> 00:18:46,476
包括内容内嵌的总和

624
00:18:46,476 --> 00:18:48,096
和其他 Container View Controller

625
00:18:48,096 --> 00:18:48,716
的重叠

626
00:18:49,876 --> 00:18:51,376
这意味着你可以用

627
00:18:51,376 --> 00:18:52,856
内容内嵌属性

628
00:18:52,856 --> 00:18:54,196
来对 app 进行

629
00:18:54,196 --> 00:18:54,886
你希望的任何改进

630
00:18:54,886 --> 00:18:56,356
例如这个

631
00:18:56,416 --> 00:18:58,436
文字的附加信息

632
00:18:58,436 --> 00:19:00,976
我们不会

633
00:19:00,976 --> 00:19:01,456
改变它

634
00:19:02,066 --> 00:19:02,886
而且你不需要考虑

635
00:19:02,886 --> 00:19:04,266
保存和恢复

636
00:19:04,266 --> 00:19:05,906
任何 UI 设计套件提供的数值

637
00:19:05,906 --> 00:19:07,236
或者害怕内容覆盖

638
00:19:07,486 --> 00:19:08,816
导航栏

639
00:19:08,816 --> 00:19:08,936
或者状态栏

640
00:19:09,516 --> 00:19:15,046
[ 鼓掌 ]

641
00:19:15,546 --> 00:19:16,986
你可能知道

642
00:19:16,986 --> 00:19:18,466
UI scroll view 里

643
00:19:18,466 --> 00:19:20,436
自动布局的支持

644
00:19:20,436 --> 00:19:21,806
让你可以通过

645
00:19:21,806 --> 00:19:23,286
把 sub-view

646
00:19:23,286 --> 00:19:25,446
约束到 scroll view

647
00:19:25,446 --> 00:19:26,536
来决定可滚动范围的大小

648
00:19:27,176 --> 00:19:28,406
我们添加了

649
00:19:28,406 --> 00:19:30,056
一些 UI 布局指导对象

650
00:19:30,136 --> 00:19:32,026
可以让你的布局

651
00:19:32,026 --> 00:19:33,436
更清楚更强大

652
00:19:33,986 --> 00:19:35,756
第一个是

653
00:19:35,756 --> 00:19:37,056
Frame Layout guide

654
00:19:37,816 --> 00:19:39,216
这个布局指导

655
00:19:39,266 --> 00:19:41,096
负责 scroll view

656
00:19:41,096 --> 00:19:42,486
在屏幕中的大小和位置

657
00:19:42,486 --> 00:19:44,636
也就是说

658
00:19:44,636 --> 00:19:45,976
你可以约束 sub-view

659
00:19:45,976 --> 00:19:47,126
就像这个

660
00:19:47,126 --> 00:19:48,476
页面指示器

661
00:19:48,596 --> 00:19:50,016
当用户滑动页面时

662
00:19:50,016 --> 00:19:50,616
它就会固定在屏幕上

663
00:19:51,966 --> 00:19:53,216
第二个布局指导对象

664
00:19:53,216 --> 00:19:54,676
是这个

665
00:19:54,676 --> 00:19:55,246
Content Layout Guide

666
00:19:55,766 --> 00:19:56,786
你可以约束 sub-view

667
00:19:56,786 --> 00:19:58,146
来控制 scroll view 中

668
00:19:58,146 --> 00:19:59,656
可滚动的区域大小

669
00:19:59,656 --> 00:20:02,296
或者让内容

670
00:20:02,296 --> 00:20:03,456
随着滚动而移动

671
00:20:04,916 --> 00:20:06,806
一个很常见的 UI scroll view

672
00:20:06,806 --> 00:20:08,786
的子类别是 UI table view

673
00:20:09,066 --> 00:20:09,896
我们对它也作出了

674
00:20:09,896 --> 00:20:11,466
一些改变  其中最大的是

675
00:20:11,466 --> 00:20:13,446
table view 会默认

676
00:20:13,446 --> 00:20:16,516
以 iOS 11 自主调节大小

677
00:20:16,516 --> 00:20:17,906
而不是  tvOS

678
00:20:19,116 --> 00:20:20,396
等于说  你的页眉

679
00:20:20,446 --> 00:20:23,556
页脚和单元

680
00:20:23,556 --> 00:20:25,676
使用的是  预估大小

681
00:20:25,986 --> 00:20:27,066
我们把 UI table view

682
00:20:27,066 --> 00:20:29,076
预估大小属性

683
00:20:29,076 --> 00:20:30,886
的默认值

684
00:20:31,246 --> 00:20:32,576
变成这个恒定的

685
00:20:32,576 --> 00:20:33,006
自动尺寸

686
00:20:34,456 --> 00:20:35,916
所以你要

687
00:20:35,916 --> 00:20:37,736
确保单元有

688
00:20:37,736 --> 00:20:39,166
足够的内部约束

689
00:20:39,166 --> 00:20:40,396
来决定 UI table view 的大小

690
00:20:40,396 --> 00:20:42,296
或者你可以

691
00:20:42,296 --> 00:20:43,726
执行委托方法

692
00:20:43,956 --> 00:20:45,356
告诉我们行距

693
00:20:45,356 --> 00:20:45,586
有多大

694
00:20:45,776 --> 00:20:46,846
对于页眉和页脚

695
00:20:46,846 --> 00:20:48,446
也应该执行

696
00:20:48,706 --> 00:20:49,536
这些方法

697
00:20:50,826 --> 00:20:52,286
也许你想把 app

698
00:20:52,286 --> 00:20:53,806
链接到 iOS 11 SDK

699
00:20:53,876 --> 00:20:55,966
但是你不打算

700
00:20:56,186 --> 00:20:57,186
采取这个新性能

701
00:20:57,516 --> 00:20:59,026
你可以取消它

702
00:20:59,026 --> 00:21:00,426
通过把 table view 的预估高度属性

703
00:21:00,426 --> 00:21:02,096
调成零

704
00:21:02,476 --> 00:21:03,926
这样就可以取消

705
00:21:03,926 --> 00:21:06,236
预估大小  同时也使

706
00:21:06,236 --> 00:21:06,906
自动调节大小失效

707
00:21:09,596 --> 00:21:11,096
还有另外一个概念

708
00:21:11,096 --> 00:21:12,226
我们刚才介绍过

709
00:21:14,936 --> 00:21:16,106
它是 view 的一部分

710
00:21:16,106 --> 00:21:17,516
如果把

711
00:21:17,516 --> 00:21:18,806
内容布局在里面

712
00:21:18,806 --> 00:21:20,056
看起来就很舒服

713
00:21:20,056 --> 00:21:21,876
哪怕是在一些较大的设备上

714
00:21:21,876 --> 00:21:22,416
比如横屏的 ipad 上

715
00:21:22,926 --> 00:21:25,906
默认情况下  table view

716
00:21:25,906 --> 00:21:28,106
在可读内容区域

717
00:21:28,106 --> 00:21:30,146
有分隔符内嵌

718
00:21:30,146 --> 00:21:31,446
可以影响

719
00:21:31,446 --> 00:21:33,556
分隔符和

720
00:21:33,556 --> 00:21:34,796
table view 里标签

721
00:21:34,796 --> 00:21:35,266
的位置

722
00:21:36,316 --> 00:21:38,056
如果改变

723
00:21:38,056 --> 00:21:41,766
分隔符内嵌的数值

724
00:21:41,766 --> 00:21:43,586
可以看到分隔符内嵌

725
00:21:43,586 --> 00:21:45,596
随之移动到

726
00:21:45,596 --> 00:21:46,176
可读内容的相应的位置

727
00:21:47,066 --> 00:21:48,346
从 iOS 11 开始

728
00:21:48,346 --> 00:21:51,436
我们做出了调整

729
00:21:51,436 --> 00:21:53,226
分隔符内嵌会一直和

730
00:21:53,276 --> 00:21:54,366
单元自己的边缘相关

731
00:21:54,366 --> 00:21:55,566
也就是 table view

732
00:21:55,566 --> 00:21:56,966
的全屏宽度

733
00:21:58,016 --> 00:21:59,526
你可以把数值设为零

734
00:21:59,526 --> 00:22:01,416
就可以看到

735
00:22:01,776 --> 00:22:03,476
全幅内容

736
00:22:03,596 --> 00:22:04,866
即使针对横屏时的 iPad

737
00:22:05,296 --> 00:22:08,006
这是 iPhone 的 table view

738
00:22:08,006 --> 00:22:10,726
如果我在这调整

739
00:22:10,726 --> 00:22:12,976
分隔符内嵌

740
00:22:12,976 --> 00:22:14,696
你可以看到

741
00:22:14,736 --> 00:22:16,316
单元和 table view 的边缘

742
00:22:16,316 --> 00:22:17,186
也随之改变

743
00:22:18,276 --> 00:22:19,416
我们给 UI table view

744
00:22:19,416 --> 00:22:21,886
添加了一个新属性

745
00:22:21,886 --> 00:22:23,236
Separator Inset Reference

746
00:22:23,236 --> 00:22:24,426
你可以用它

747
00:22:24,426 --> 00:22:26,036
把分隔符内嵌

748
00:22:26,036 --> 00:22:27,826
从默认的自动位置上

749
00:22:27,826 --> 00:22:28,246
加以改变

750
00:22:30,176 --> 00:22:31,266
这个在 iPad 上也适用

751
00:22:31,846 --> 00:22:34,016
有几件事情要注意

752
00:22:34,016 --> 00:22:34,946
关于 table view

753
00:22:34,946 --> 00:22:36,056
是如何与安全区域交互的

754
00:22:36,056 --> 00:22:38,036
这些自动分隔符内嵌

755
00:22:38,036 --> 00:22:39,646
和安全区域内嵌

756
00:22:39,646 --> 00:22:40,396
是相关的

757
00:22:40,726 --> 00:22:42,476
所以我们默认

758
00:22:42,476 --> 00:22:44,026
table view 的全部内容

759
00:22:44,026 --> 00:22:45,346
在安全内边距内

760
00:22:45,376 --> 00:22:46,556
避开它的

761
00:22:47,296 --> 00:22:49,656
UI Table View Cell 和

762
00:22:49,656 --> 00:22:50,966
UI Table View Header Footer View

763
00:22:50,966 --> 00:22:52,076
这可能是设计套件里

764
00:22:52,076 --> 00:22:53,936
最长的名字了

765
00:22:53,936 --> 00:22:55,236
他们都有一个 content view 属性

766
00:22:55,446 --> 00:22:56,256
你应该在这里

767
00:22:56,256 --> 00:22:57,456
添加 sub-view

768
00:22:58,276 --> 00:22:59,636
这两个类可以

769
00:22:59,636 --> 00:23:01,526
确保 content view

770
00:23:01,526 --> 00:23:03,156
也可以避开安全区域嵌入

771
00:23:03,646 --> 00:23:05,206
所以你应该在你的 table view 的

772
00:23:05,206 --> 00:23:07,176
所有的页眉和页脚

773
00:23:07,176 --> 00:23:08,156
使用 UI Table View Header Footer View

774
00:23:08,156 --> 00:23:09,896
表格页眉页脚

775
00:23:09,896 --> 00:23:11,726
还有章节页眉

776
00:23:12,236 --> 00:23:14,196
和页脚

777
00:23:14,346 --> 00:23:15,496
我们还从邮件 app 里

778
00:23:15,496 --> 00:23:17,296
借鉴了很多

779
00:23:17,986 --> 00:23:19,586
滑动操作功能

780
00:23:19,586 --> 00:23:20,776
为你们的 app

781
00:23:20,776 --> 00:23:21,476
服务

782
00:23:24,176 --> 00:23:25,426
会有新的默认的

783
00:23:25,426 --> 00:23:27,596
滑动操作

784
00:23:27,596 --> 00:23:30,256
如果你用了 iOS 11

785
00:23:30,256 --> 00:23:31,636
就可以使用滑动删除

786
00:23:31,636 --> 00:23:32,986
就像以前在

787
00:23:32,986 --> 00:23:33,786
邮件里一样

788
00:23:34,596 --> 00:23:35,306
如果你

789
00:23:35,966 --> 00:23:36,616
[ 鼓掌 ] 我知道有些人

790
00:23:36,616 --> 00:23:37,516
很喜欢这个

791
00:23:38,406 --> 00:23:39,836
[ 鼓掌 ] 如果你

792
00:23:39,836 --> 00:23:41,736
采用一些新的 API

793
00:23:41,736 --> 00:23:43,026
就可以得到一些很棒的功能

794
00:23:43,386 --> 00:23:44,736
像滑动操作的图像

795
00:23:44,736 --> 00:23:46,736
从前沿和后沿

796
00:23:46,736 --> 00:23:47,876
滑动

797
00:23:47,876 --> 00:23:50,646
或者一个完成处理器

798
00:23:50,646 --> 00:23:51,936
让你可以取消

799
00:23:51,936 --> 00:23:52,606
滑动操作

800
00:23:53,066 --> 00:23:55,286
如何在我们的 app

801
00:23:55,286 --> 00:23:55,886
里采用这些功能

802
00:23:55,886 --> 00:23:57,236
Raj会上来

803
00:23:57,236 --> 00:23:57,926
给我们进行

804
00:23:57,926 --> 00:23:58,216
演示

805
00:23:58,406 --> 00:23:58,706
Raj

806
00:23:59,516 --> 00:24:05,906
[ 鼓掌 ]

807
00:24:06,406 --> 00:24:06,936
>> 谢谢  Kyle

808
00:24:07,596 --> 00:24:08,576
让我们重新转到

809
00:24:08,576 --> 00:24:10,506
演示设备上来

810
00:24:10,506 --> 00:24:12,136
你可以看到

811
00:24:12,136 --> 00:24:13,286
这个 app 里的

812
00:24:13,286 --> 00:24:13,936
这些漂亮的栏

813
00:24:14,286 --> 00:24:15,216
看起来很棒

814
00:24:16,436 --> 00:24:17,116
我想要向你们展示

815
00:24:17,116 --> 00:24:18,106
Comments View Controller

816
00:24:18,106 --> 00:24:19,646
如果我点进这个

817
00:24:19,646 --> 00:24:21,216
Comments View Controller

818
00:24:21,216 --> 00:24:22,266
你可以看到这些

819
00:24:22,266 --> 00:24:24,636
有趣的评论

820
00:24:24,636 --> 00:24:26,046
所有的这些评论

821
00:24:26,046 --> 00:24:27,216
都在下面的评论栏里

822
00:24:28,096 --> 00:24:29,586
我们的用户

823
00:24:29,586 --> 00:24:31,466
想要一样东西

824
00:24:31,466 --> 00:24:31,876
就是  时码

825
00:24:32,436 --> 00:24:33,776
所以我告诉了我们的设计师

826
00:24:33,776 --> 00:24:35,366
然后他们提供了

827
00:24:35,366 --> 00:24:37,086
这个超赞的

828
00:24:37,086 --> 00:24:37,736
滚动栏的设计

829
00:24:38,436 --> 00:24:40,376
这个滚动栏不仅

830
00:24:40,856 --> 00:24:42,506
标识出你在

831
00:24:42,506 --> 00:24:44,446
Comment view 里的位置

832
00:24:44,446 --> 00:24:45,776
还有它所在的时码

833
00:24:46,666 --> 00:24:48,146
现在我们来

834
00:24:48,146 --> 00:24:48,346
操作一下

835
00:24:49,456 --> 00:24:50,606
我现在转到

836
00:24:50,606 --> 00:24:52,456
Comments View Controller

837
00:24:52,456 --> 00:24:54,426
然后用我之前写的一个方法

838
00:24:54,426 --> 00:24:55,086
来新建一个滚动栏

839
00:24:55,876 --> 00:24:58,176
当我重新编译并重启

840
00:24:58,176 --> 00:25:02,026
往下滑

841
00:25:03,306 --> 00:25:05,656
点击这些单元中的一个

842
00:25:05,656 --> 00:25:06,346
并进入到 Comments View Controller

843
00:25:06,346 --> 00:25:07,936
你就可以看得它了

844
00:25:08,636 --> 00:25:09,776
看起来很棒吧

845
00:25:09,776 --> 00:25:11,116
它显示出你在

846
00:25:11,116 --> 00:25:12,296
Comments View Controller 中的位置

847
00:25:12,816 --> 00:25:15,436
和它所指向的单元

848
00:25:15,526 --> 00:25:17,456
的时码

849
00:25:18,146 --> 00:25:19,776
但是也许你注意到了

850
00:25:19,776 --> 00:25:20,606
还存在一些问题

851
00:25:21,236 --> 00:25:22,906
首先是

852
00:25:22,906 --> 00:25:24,716
这个指示器会稍微遮挡一点

853
00:25:24,716 --> 00:25:26,306
这个 table view 单元

854
00:25:26,306 --> 00:25:27,466
所以看起来

855
00:25:27,466 --> 00:25:28,346
会有点不清楚

856
00:25:29,286 --> 00:25:30,886
第二就是

857
00:25:30,936 --> 00:25:32,116
这个指示器会遮挡

858
00:25:32,146 --> 00:25:33,496
下边的输入区域

859
00:25:34,376 --> 00:25:36,386
所以让我们用一些 iOS 11 里的

860
00:25:36,466 --> 00:25:37,856
新的 API

861
00:25:37,856 --> 00:25:38,276
来解决这些问题

862
00:25:38,916 --> 00:25:40,596
我们会用到

863
00:25:40,596 --> 00:25:42,146
UI View Controller 的

864
00:25:42,146 --> 00:25:44,586
Additional Safe Area Insets 属性

865
00:25:44,586 --> 00:25:45,706
来解决这个问题

866
00:25:46,406 --> 00:25:47,766
所以我现在

867
00:25:47,766 --> 00:25:49,956
打开这两个 view

868
00:25:49,956 --> 00:25:51,576
把 additional Safe Area Insets

869
00:25:51,576 --> 00:25:52,996
添加给 UI 边缘内嵌

870
00:25:54,366 --> 00:25:56,066
所以  上面

871
00:25:56,066 --> 00:25:57,136
我们不添加任何东西

872
00:25:57,996 --> 00:25:59,376
左边

873
00:25:59,376 --> 00:25:59,796
也是一样

874
00:26:00,346 --> 00:26:01,976
下面  我们要把它

875
00:26:01,976 --> 00:26:04,096
变成评论栏的大小

876
00:26:04,366 --> 00:26:05,456
所以我们输入

877
00:26:05,456 --> 00:26:07,726
评论栏的高度

878
00:26:07,726 --> 00:26:08,636
右边有个属性

879
00:26:08,636 --> 00:26:10,286
是我之前给指示器写好的

880
00:26:10,286 --> 00:26:12,516
让它有

881
00:26:12,516 --> 00:26:13,376
合适的宽度

882
00:26:14,616 --> 00:26:16,106
我们设定好

883
00:26:16,106 --> 00:26:17,406
Additional Safe Area Insets

884
00:26:17,976 --> 00:26:20,676
重新编译并重启

885
00:26:23,846 --> 00:26:25,316
打开 detail view

886
00:26:25,316 --> 00:26:26,806
然后进入 Comments View Controller

887
00:26:26,806 --> 00:26:27,896
你会发现

888
00:26:27,896 --> 00:26:28,756
看起来好多了

889
00:26:29,366 --> 00:26:31,176
我们把内容

890
00:26:31,176 --> 00:26:33,656
从右边缘嵌入

891
00:26:33,656 --> 00:26:35,146
滚动指示器也从下边缘嵌入

892
00:26:35,146 --> 00:26:37,416
你会发现

893
00:26:37,416 --> 00:26:39,356
在下边

894
00:26:39,926 --> 00:26:42,406
这个评论区域

895
00:26:42,606 --> 00:26:43,726
从屏幕右边

896
00:26:43,726 --> 00:26:44,646
嵌入了一点

897
00:26:45,796 --> 00:26:48,526
原因是

898
00:26:48,526 --> 00:26:51,306
评论区域的文字区

899
00:26:51,306 --> 00:26:53,056
被限制到它的

900
00:26:53,106 --> 00:26:54,046
super view 布局边缘中了

901
00:26:54,836 --> 00:26:57,076
在 iOS 11 里

902
00:26:57,076 --> 00:26:59,046
布局边缘是

903
00:26:59,046 --> 00:27:01,286
嵌入安全区域的  因为我们

904
00:27:01,286 --> 00:27:02,686
在 view 的右边

905
00:27:02,686 --> 00:27:04,506
添加了 additional Safe Area Insets

906
00:27:04,986 --> 00:27:06,316
所以布局边缘

907
00:27:06,316 --> 00:27:06,896
也相应嵌入

908
00:27:07,836 --> 00:27:09,206
大部分时候

909
00:27:09,206 --> 00:27:10,376
这就是你想要的效果

910
00:27:10,376 --> 00:27:12,476
但是我们

911
00:27:12,476 --> 00:27:14,736
还有另外一个属性

912
00:27:14,736 --> 00:27:16,746
Insets Layout Margins From Safe Area

913
00:27:16,746 --> 00:27:17,896
让你可以控制这个属性

914
00:27:18,586 --> 00:27:20,236
在这个例子里

915
00:27:20,236 --> 00:27:20,966
让我们把这个属性设定为false

916
00:27:27,046 --> 00:27:27,836
如果我这么做了

917
00:27:28,526 --> 00:27:30,166
重新编译并重启 app

918
00:27:30,166 --> 00:27:33,906
然后进入到

919
00:27:33,906 --> 00:27:35,256
Detail View Controller

920
00:27:35,256 --> 00:27:36,186
然后再进入 Comments View Controller

921
00:27:36,186 --> 00:27:38,056
你会发现

922
00:27:38,056 --> 00:27:38,896
看起来很不错

923
00:27:39,646 --> 00:27:40,916
评论出现在

924
00:27:40,916 --> 00:27:41,726
合适的位置

925
00:27:41,966 --> 00:27:42,836
新的滚动指示器

926
00:27:42,836 --> 00:27:43,626
也在

927
00:27:44,036 --> 00:27:45,896
所有都嵌入了

928
00:27:45,896 --> 00:27:47,296
评论区也有全屏宽

929
00:27:47,746 --> 00:27:50,816
赞  接下来

930
00:27:50,816 --> 00:27:53,006
我要展示  给这个 app

931
00:27:53,006 --> 00:27:54,436
添加滑动操作

932
00:27:55,236 --> 00:27:57,136
如果我想

933
00:27:57,136 --> 00:27:59,216
收藏

934
00:27:59,216 --> 00:28:00,126
或者删除

935
00:28:00,126 --> 00:28:00,386
一些东西

936
00:28:01,656 --> 00:28:03,306
那让我们进入 Memory View Controller

937
00:28:03,306 --> 00:28:06,266
然后在 iOS 11 里

938
00:28:06,346 --> 00:28:08,296
给这个新滑动操作添加支持

939
00:28:08,866 --> 00:28:12,256
看起来好像很复杂

940
00:28:12,256 --> 00:28:12,946
但是我会告诉你怎么做

941
00:28:13,916 --> 00:28:15,366
我执行了两个新方法

942
00:28:15,366 --> 00:28:17,296
前沿滑动操作配置

943
00:28:17,296 --> 00:28:18,736
索引路径

944
00:28:18,736 --> 00:28:20,296
和后沿

945
00:28:20,296 --> 00:28:21,646
滑动操作配置

946
00:28:21,646 --> 00:28:22,196
索引路径

947
00:28:22,956 --> 00:28:23,646
我们先来看看

948
00:28:23,646 --> 00:28:24,186
前沿的这个

949
00:28:24,926 --> 00:28:26,286
创建一个

950
00:28:26,286 --> 00:28:27,786
UI 情景动作

951
00:28:27,786 --> 00:28:29,266
样式选为 normal

952
00:28:29,266 --> 00:28:31,096
标题是  收藏

953
00:28:31,096 --> 00:28:31,516
还有一个分块处理器

954
00:28:32,636 --> 00:28:34,056
把收藏状态更新

955
00:28:34,256 --> 00:28:35,536
用我之前写好的一个代码

956
00:28:35,536 --> 00:28:37,046
把完成处理器

957
00:28:37,046 --> 00:28:39,146
的参数设为

958
00:28:39,916 --> 00:28:40,016
true

959
00:28:40,246 --> 00:28:41,326
为了让一切都看起来没问题

960
00:28:41,326 --> 00:28:42,856
我再把它设定为  取消收藏

961
00:28:42,856 --> 00:28:44,246
取决于这个条目

962
00:28:44,246 --> 00:28:45,476
是否已经被收藏

963
00:28:46,586 --> 00:28:48,586
然后设置

964
00:28:48,586 --> 00:28:49,926
这个我之前做好的

965
00:28:49,996 --> 00:28:52,026
星星图标

966
00:28:52,026 --> 00:28:53,356
背景色选为漂亮的

967
00:28:53,356 --> 00:28:53,776
橙色

968
00:28:54,436 --> 00:28:56,106
接下来只需要

969
00:28:56,106 --> 00:28:57,296
创建一个 UI 滑动操作配置

970
00:28:57,296 --> 00:28:59,216
用 UI 情景动作

971
00:28:59,216 --> 00:29:00,966
然后归还

972
00:29:02,386 --> 00:29:03,496
后沿动作

973
00:29:03,496 --> 00:29:05,046
也差不多

974
00:29:05,046 --> 00:29:06,406
我只是把样式选成 disruptive

975
00:29:07,376 --> 00:29:08,916
重新编译并重启

976
00:29:08,916 --> 00:29:13,716
进入然后滑动

977
00:29:13,716 --> 00:29:15,386
可以注意到

978
00:29:15,446 --> 00:29:17,606
有了选项滑动操作

979
00:29:17,606 --> 00:29:18,706
在前沿可以出现

980
00:29:18,706 --> 00:29:19,976
滑动操作  就像这样

981
00:29:19,976 --> 00:29:21,156
以前完全做不到

982
00:29:22,836 --> 00:29:24,456
还有

983
00:29:24,456 --> 00:29:26,036
可以滑动

984
00:29:26,036 --> 00:29:27,046
把这个条目删除

985
00:29:27,416 --> 00:29:29,166
只要

986
00:29:29,166 --> 00:29:30,596
整体滑过去

987
00:29:30,596 --> 00:29:30,976
就可以了

988
00:29:31,516 --> 00:29:37,666
[ 鼓掌 ]

989
00:29:38,166 --> 00:29:39,436
这就是关于  边缘

990
00:29:39,436 --> 00:29:40,676
嵌入  scroll view

991
00:29:41,036 --> 00:29:42,996
还有栏的新 API

992
00:29:42,996 --> 00:29:43,466
的演示

993
00:29:43,696 --> 00:29:44,726
看起来很棒

994
00:29:44,726 --> 00:29:46,026
而且绝对适合 iOS 11

995
00:29:46,476 --> 00:29:47,736
接下来 Kyle 会再度登台

996
00:29:47,776 --> 00:29:48,726
为大家介绍相关

997
00:29:48,726 --> 00:29:48,976
内容

998
00:29:49,516 --> 00:29:56,866
[ 鼓掌 ]

999
00:29:57,366 --> 00:29:58,236
>> 再次谢谢 Raj

1000
00:29:59,136 --> 00:30:00,456
复习一下今天的内容

1001
00:30:00,456 --> 00:30:02,026
我们学习了

1002
00:30:02,026 --> 00:30:03,716
采用大导航标题

1003
00:30:04,006 --> 00:30:05,076
和新融入的

1004
00:30:05,076 --> 00:30:06,706
搜索栏

1005
00:30:06,806 --> 00:30:07,616
在 iOS 11 里

1006
00:30:09,006 --> 00:30:10,516
我们还学习了

1007
00:30:10,516 --> 00:30:11,936
布局边缘的

1008
00:30:11,936 --> 00:30:13,296
新改进  让我们可以

1009
00:30:13,296 --> 00:30:15,686
完全掌控

1010
00:30:15,686 --> 00:30:17,616
View 和布局

1011
00:30:17,616 --> 00:30:18,826
还有一个叫做

1012
00:30:18,826 --> 00:30:20,206
安全区域的新概念

1013
00:30:20,206 --> 00:30:22,006
是关于内容覆盖的

1014
00:30:22,006 --> 00:30:23,376
比如在 Apple TV 上

1015
00:30:23,376 --> 00:30:24,446
嵌入扫描补偿

1016
00:30:24,996 --> 00:30:27,046
我们学习了

1017
00:30:27,046 --> 00:30:28,476
UI scroll view 的改进功能

1018
00:30:28,896 --> 00:30:30,276
让我们可以

1019
00:30:30,276 --> 00:30:32,456
更好的控制内容嵌入

1020
00:30:32,456 --> 00:30:34,286
还有 UI table view 的新性能

1021
00:30:34,286 --> 00:30:35,526
以及它如何跟安全区域

1022
00:30:35,776 --> 00:30:36,636
之类的内容互动

1023
00:30:37,276 --> 00:30:40,096
如果你还有更多的问题

1024
00:30:40,096 --> 00:30:41,436
请访问这个课程

1025
00:30:41,436 --> 00:30:41,856
的网址

1026
00:30:42,436 --> 00:30:42,976
希望你们享受 WWDC

