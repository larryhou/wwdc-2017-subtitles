[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.52,0:00:27.65,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:00:28.15,0:00:29.18,Default,,0,0,0,,Welcome to what's new in Core
Dialogue: 0,0:00:29.18,0:00:29.69,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:00:30.32,0:00:31.85,Default,,0,0,0,,I'm John Hornkvist, Senior
Dialogue: 0,0:00:31.85,0:00:33.52,Default,,0,0,0,,Manager for Core Spotlight and
Dialogue: 0,0:00:33.52,0:00:34.56,Default,,0,0,0,,joining me today will be my
Dialogue: 0,0:00:34.56,0:00:35.53,Default,,0,0,0,,colleague Lyn Fong.
Dialogue: 0,0:00:36.88,0:00:38.31,Default,,0,0,0,,Today, we'll cover some new
Dialogue: 0,0:00:38.31,0:00:41.19,Default,,0,0,0,,APIs, Core Spotlight on macOS,
Dialogue: 0,0:00:43.18,0:00:45.94,Default,,0,0,0,,Drag-and-Drop, Quick Look
Dialogue: 0,0:00:45.94,0:00:48.38,Default,,0,0,0,,previews, and then we'll give an
Dialogue: 0,0:00:48.38,0:00:50.59,Default,,0,0,0,,update on ranking before
Dialogue: 0,0:00:50.59,0:00:52.00,Default,,0,0,0,,finishing with a review of
Dialogue: 0,0:00:52.00,0:00:53.62,Default,,0,0,0,,indexing and search.
Dialogue: 0,0:00:54.98,0:00:56.99,Default,,0,0,0,,So, let's jump right into macOS.
Dialogue: 0,0:00:57.85,0:00:59.95,Default,,0,0,0,,Core Spotlight on macOS is the
Dialogue: 0,0:00:59.95,0:01:02.61,Default,,0,0,0,,exact same API as in iOS so it's
Dialogue: 0,0:01:02.61,0:01:04.83,Default,,0,0,0,,great for cross-platform apps.
Dialogue: 0,0:01:05.38,0:01:07.09,Default,,0,0,0,,It's already used by Notes and
Dialogue: 0,0:01:07.09,0:01:08.61,Default,,0,0,0,,Safari and because it's
Dialogue: 0,0:01:08.61,0:01:10.37,Default,,0,0,0,,cross-platform CoreData
Dialogue: 0,0:01:10.49,0:01:11.67,Default,,0,0,0,,Spotlight support has been
Dialogue: 0,0:01:11.67,0:01:12.74,Default,,0,0,0,,reimplemented using Core
Dialogue: 0,0:01:12.74,0:01:14.68,Default,,0,0,0,,Spotlight and is now available
Dialogue: 0,0:01:14.68,0:01:16.56,Default,,0,0,0,,for both iOS and macOS.
Dialogue: 0,0:01:17.15,0:01:19.00,Default,,0,0,0,,Core Spotlight is great for
Dialogue: 0,0:01:19.00,0:01:21.05,Default,,0,0,0,,databases and shoeboxes where
Dialogue: 0,0:01:21.05,0:01:22.55,Default,,0,0,0,,your app has full control over
Dialogue: 0,0:01:22.55,0:01:23.28,Default,,0,0,0,,the contents.
Dialogue: 0,0:01:24.07,0:01:26.11,Default,,0,0,0,,It's not for items that the user
Dialogue: 0,0:01:26.11,0:01:28.15,Default,,0,0,0,,monitors in the finder, for that
Dialogue: 0,0:01:28.46,0:01:30.28,Default,,0,0,0,,the classic Spotlight API still
Dialogue: 0,0:01:30.28,0:01:31.78,Default,,0,0,0,,exists and still works great.
Dialogue: 0,0:01:33.42,0:01:34.89,Default,,0,0,0,,Finally, the Core Spotlight API
Dialogue: 0,0:01:35.01,0:01:36.80,Default,,0,0,0,,is per user, so there's no
Dialogue: 0,0:01:36.80,0:01:37.22,Default,,0,0,0,,sharing.
Dialogue: 0,0:01:37.69,0:01:39.31,Default,,0,0,0,,For those of you who are new to
Dialogue: 0,0:01:39.31,0:01:41.74,Default,,0,0,0,,Core Spotlight we'll review the
Dialogue: 0,0:01:41.74,0:01:43.07,Default,,0,0,0,,basic concepts later in the
Dialogue: 0,0:01:43.07,0:01:43.48,Default,,0,0,0,,session.
Dialogue: 0,0:01:43.94,0:01:47.77,Default,,0,0,0,,An important new feature in iOS
Dialogue: 0,0:01:47.77,0:01:49.61,Default,,0,0,0,,11 is Drag-and-Drop and of
Dialogue: 0,0:01:49.61,0:01:51.22,Default,,0,0,0,,course, Drag-and-Drop is very
Dialogue: 0,0:01:51.22,0:01:52.60,Default,,0,0,0,,important to the Mac as well.
Dialogue: 0,0:01:53.91,0:01:54.64,Default,,0,0,0,,Drag-and-Drop with Core
Dialogue: 0,0:01:54.64,0:01:56.63,Default,,0,0,0,,Spotlight is built on the
Dialogue: 0,0:01:56.63,0:01:58.75,Default,,0,0,0,,concept of promises.
Dialogue: 0,0:01:58.79,0:02:00.04,Default,,0,0,0,,You make the promise of indexing
Dialogue: 0,0:02:00.04,0:02:02.29,Default,,0,0,0,,time and then you fulfill it
Dialogue: 0,0:02:02.38,0:02:03.91,Default,,0,0,0,,when the user drops a Core
Dialogue: 0,0:02:03.91,0:02:04.83,Default,,0,0,0,,Spotlight item later.
Dialogue: 0,0:02:05.33,0:02:07.87,Default,,0,0,0,,So, let's see this in action.
Dialogue: 0,0:02:08.92,0:02:10.29,Default,,0,0,0,,We start the drag in Spotlight
Dialogue: 0,0:02:10.94,0:02:15.10,Default,,0,0,0,,and then we hit the Home button
Dialogue: 0,0:02:15.64,0:02:16.94,Default,,0,0,0,,to go to SpringBoard where we
Dialogue: 0,0:02:16.94,0:02:20.32,Default,,0,0,0,,can enter notes and we can drop
Dialogue: 0,0:02:20.32,0:02:20.85,Default,,0,0,0,,the image.
Dialogue: 0,0:02:21.32,0:02:23.01,Default,,0,0,0,,This is an awesome accelerator
Dialogue: 0,0:02:23.13,0:02:24.64,Default,,0,0,0,,letting users get to the content
Dialogue: 0,0:02:25.12,0:02:26.02,Default,,0,0,0,,incredibly quickly.
Dialogue: 0,0:02:26.58,0:02:29.66,Default,,0,0,0,,Now you may wonder what's
Dialogue: 0,0:02:29.66,0:02:30.80,Default,,0,0,0,,actually going on behind the
Dialogue: 0,0:02:30.80,0:02:31.33,Default,,0,0,0,,scenes.
Dialogue: 0,0:02:32.39,0:02:34.12,Default,,0,0,0,,First your app indexes items and
Dialogue: 0,0:02:34.12,0:02:35.45,Default,,0,0,0,,each item carries a promise.
Dialogue: 0,0:02:35.98,0:02:40.43,Default,,0,0,0,,Your app quits and sometime
Dialogue: 0,0:02:40.43,0:02:42.23,Default,,0,0,0,,later the user runs a query in
Dialogue: 0,0:02:42.23,0:02:42.72,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:02:43.42,0:02:45.12,Default,,0,0,0,,The user drags the item in
Dialogue: 0,0:02:45.12,0:02:46.74,Default,,0,0,0,,Spotlight and Spotlight creates
Dialogue: 0,0:02:46.74,0:02:48.67,Default,,0,0,0,,a promise that gets sent to the
Dialogue: 0,0:02:48.67,0:02:49.33,Default,,0,0,0,,drag receiver.
Dialogue: 0,0:02:49.38,0:02:52.97,Default,,0,0,0,,The app picks the type it wants
Dialogue: 0,0:02:52.97,0:02:54.06,Default,,0,0,0,,and the request goes back to
Dialogue: 0,0:02:54.06,0:02:54.59,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:02:56.26,0:02:57.77,Default,,0,0,0,,Spotlight will then call your
Dialogue: 0,0:02:57.77,0:02:59.26,Default,,0,0,0,,application or your app
Dialogue: 0,0:02:59.26,0:03:01.97,Default,,0,0,0,,extension with the type and item
Dialogue: 0,0:03:01.97,0:03:02.94,Default,,0,0,0,,information.
Dialogue: 0,0:03:07.18,0:03:08.81,Default,,0,0,0,,So, then you provide the data
Dialogue: 0,0:03:09.12,0:03:10.56,Default,,0,0,0,,and it gets passed to Spotlight.
Dialogue: 0,0:03:11.08,0:03:13.62,Default,,0,0,0,,Of course, the receiving app it
Dialogue: 0,0:03:13.62,0:03:15.23,Default,,0,0,0,,can take the content.
Dialogue: 0,0:03:15.35,0:03:17.02,Default,,0,0,0,,This might look complicated, but
Dialogue: 0,0:03:17.02,0:03:18.33,Default,,0,0,0,,there's actually not that much
Dialogue: 0,0:03:18.46,0:03:20.30,Default,,0,0,0,,that you have to do.
Dialogue: 0,0:03:20.82,0:03:22.44,Default,,0,0,0,,Your first task is deciding what
Dialogue: 0,0:03:22.44,0:03:23.66,Default,,0,0,0,,drag types to support.
Dialogue: 0,0:03:26.32,0:03:28.23,Default,,0,0,0,,Drag types use uniform type
Dialogue: 0,0:03:28.23,0:03:30.43,Default,,0,0,0,,identifiers or UTI types which
Dialogue: 0,0:03:30.43,0:03:31.38,Default,,0,0,0,,are the [inaudible] of the
Dialogue: 0,0:03:31.38,0:03:31.76,Default,,0,0,0,,system.
Dialogue: 0,0:03:32.26,0:03:35.17,Default,,0,0,0,,These provide a uniform way of
Dialogue: 0,0:03:35.17,0:03:36.55,Default,,0,0,0,,describing types in our
Dialogue: 0,0:03:36.55,0:03:38.38,Default,,0,0,0,,hierarchy going from the most to
Dialogue: 0,0:03:38.38,0:03:39.21,Default,,0,0,0,,the least specific.
Dialogue: 0,0:03:39.81,0:03:42.11,Default,,0,0,0,,You can find great information
Dialogue: 0,0:03:42.11,0:03:43.62,Default,,0,0,0,,about uniform type identifiers
Dialogue: 0,0:03:43.62,0:03:44.97,Default,,0,0,0,,on developer.apple.com.
Dialogue: 0,0:03:45.50,0:03:48.53,Default,,0,0,0,,You can define new types for
Dialogue: 0,0:03:48.53,0:03:50.51,Default,,0,0,0,,your application, but for
Dialogue: 0,0:03:50.51,0:03:52.38,Default,,0,0,0,,Drag-and-Drop we want you to
Dialogue: 0,0:03:52.38,0:03:53.16,Default,,0,0,0,,declare types that are
Dialogue: 0,0:03:53.16,0:03:54.49,Default,,0,0,0,,well-known so that other
Dialogue: 0,0:03:54.49,0:03:56.11,Default,,0,0,0,,applications can receive the
Dialogue: 0,0:03:56.11,0:03:57.08,Default,,0,0,0,,data that you have to offer.
Dialogue: 0,0:03:57.60,0:04:00.58,Default,,0,0,0,,As an example, a note taking app
Dialogue: 0,0:04:00.58,0:04:02.41,Default,,0,0,0,,might have its own UTI type as a
Dialogue: 0,0:04:02.62,0:04:04.74,Default,,0,0,0,,type of its contents, but it
Dialogue: 0,0:04:04.74,0:04:05.80,Default,,0,0,0,,might advertise that it can
Dialogue: 0,0:04:05.80,0:04:08.13,Default,,0,0,0,,provide RTF, HTML and plaintext
Dialogue: 0,0:04:08.25,0:04:09.24,Default,,0,0,0,,when an item is dropped.
Dialogue: 0,0:04:09.44,0:04:11.74,Default,,0,0,0,,So that's types.
Dialogue: 0,0:04:12.29,0:04:13.45,Default,,0,0,0,,Now how do we let Spotlight know
Dialogue: 0,0:04:13.45,0:04:14.93,Default,,0,0,0,,what can be provided?
Dialogue: 0,0:04:15.30,0:04:17.72,Default,,0,0,0,,For that there are three new
Dialogue: 0,0:04:17.72,0:04:18.55,Default,,0,0,0,,attributes in
Dialogue: 0,0:04:18.55,0:04:19.95,Default,,0,0,0,,CSSearchableAttributeSet.
Dialogue: 0,0:04:20.30,0:04:22.05,Default,,0,0,0,,You can promise a data
Dialogue: 0,0:04:22.05,0:04:24.28,Default,,0,0,0,,representation, a file
Dialogue: 0,0:04:24.28,0:04:25.80,Default,,0,0,0,,representation which will get
Dialogue: 0,0:04:25.80,0:04:27.78,Default,,0,0,0,,copied or an in-place file
Dialogue: 0,0:04:27.78,0:04:29.86,Default,,0,0,0,,representation if your data is
Dialogue: 0,0:04:29.86,0:04:31.00,Default,,0,0,0,,saved [inaudible] copying.
Dialogue: 0,0:04:31.48,0:04:33.90,Default,,0,0,0,,As for the designing provider,
Dialogue: 0,0:04:34.07,0:04:35.32,Default,,0,0,0,,you should specify the highest
Dialogue: 0,0:04:35.32,0:04:36.90,Default,,0,0,0,,fidelity representation first.
Dialogue: 0,0:04:37.78,0:04:39.00,Default,,0,0,0,,So how is it used?
Dialogue: 0,0:04:40.41,0:04:40.96,Default,,0,0,0,,You create the
Dialogue: 0,0:04:40.96,0:04:42.93,Default,,0,0,0,,CSSearchableItemAttributeSet as
Dialogue: 0,0:04:42.93,0:04:43.29,Default,,0,0,0,,usual.
Dialogue: 0,0:04:43.78,0:04:45.04,Default,,0,0,0,,In this case, we already have an
Dialogue: 0,0:04:45.04,0:04:46.61,Default,,0,0,0,,image file so we'll provide that
Dialogue: 0,0:04:46.61,0:04:47.85,Default,,0,0,0,,for the file type identifier.
Dialogue: 0,0:04:48.57,0:04:49.91,Default,,0,0,0,,And we can also convert the
Dialogue: 0,0:04:49.91,0:04:51.76,Default,,0,0,0,,image [inaudible] so declared it
Dialogue: 0,0:04:51.76,0:04:54.27,Default,,0,0,0,,can provide plaintext as data.
Dialogue: 0,0:04:54.56,0:04:55.49,Default,,0,0,0,,So that's our promise.
Dialogue: 0,0:04:55.77,0:04:56.93,Default,,0,0,0,,Next, let's look at how to
Dialogue: 0,0:04:56.93,0:04:57.62,Default,,0,0,0,,produce that.
Dialogue: 0,0:04:58.77,0:05:01.21,Default,,0,0,0,,When the user drops items, your
Dialogue: 0,0:05:01.21,0:05:03.06,Default,,0,0,0,,extension will get called and in
Dialogue: 0,0:05:03.06,0:05:04.07,Default,,0,0,0,,the rare case that your app
Dialogue: 0,0:05:04.07,0:05:06.04,Default,,0,0,0,,happens to be running this may
Dialogue: 0,0:05:06.04,0:05:07.10,Default,,0,0,0,,be your app's index delegate
Dialogue: 0,0:05:07.10,0:05:07.46,Default,,0,0,0,,instead.
Dialogue: 0,0:05:08.48,0:05:10.00,Default,,0,0,0,,Depending on what the receiving
Dialogue: 0,0:05:10.00,0:05:12.00,Default,,0,0,0,,app requested one out of two
Dialogue: 0,0:05:12.00,0:05:12.90,Default,,0,0,0,,methods will get called.
Dialogue: 0,0:05:13.22,0:05:15.81,Default,,0,0,0,,If they ask for data or they ask
Dialogue: 0,0:05:15.81,0:05:17.11,Default,,0,0,0,,for a type or you could provide
Dialogue: 0,0:05:17.11,0:05:19.34,Default,,0,0,0,,data, the data method gets
Dialogue: 0,0:05:19.34,0:05:20.38,Default,,0,0,0,,called and takes a searchable
Dialogue: 0,0:05:20.38,0:05:22.46,Default,,0,0,0,,index, an item identifier, and a
Dialogue: 0,0:05:22.46,0:05:23.80,Default,,0,0,0,,type identifier and you're
Dialogue: 0,0:05:23.80,0:05:25.03,Default,,0,0,0,,expected to return the data
Dialogue: 0,0:05:25.03,0:05:25.51,Default,,0,0,0,,object.
Dialogue: 0,0:05:26.78,0:05:28.68,Default,,0,0,0,,The file URL method takes the
Dialogue: 0,0:05:28.68,0:05:30.72,Default,,0,0,0,,same arguments and additionally
Dialogue: 0,0:05:30.72,0:05:32.42,Default,,0,0,0,,Booleans specifying whether an
Dialogue: 0,0:05:32.42,0:05:33.66,Default,,0,0,0,,in-place file should be
Dialogue: 0,0:05:33.66,0:05:34.10,Default,,0,0,0,,provided.
Dialogue: 0,0:05:36.04,0:05:37.56,Default,,0,0,0,,The implementation of the data
Dialogue: 0,0:05:37.56,0:05:38.88,Default,,0,0,0,,method might look as follows.
Dialogue: 0,0:05:38.99,0:05:41.69,Default,,0,0,0,,We look at the model object for
Dialogue: 0,0:05:41.69,0:05:43.75,Default,,0,0,0,,the item identifier, we check
Dialogue: 0,0:05:43.75,0:05:45.10,Default,,0,0,0,,the type that's being requested,
Dialogue: 0,0:05:45.73,0:05:47.17,Default,,0,0,0,,and then we produce data
Dialogue: 0,0:05:47.17,0:05:47.74,Default,,0,0,0,,accordingly.
Dialogue: 0,0:05:48.24,0:05:52.39,Default,,0,0,0,,The implementation of the file
Dialogue: 0,0:05:52.39,0:05:53.87,Default,,0,0,0,,URL method is very similar.
Dialogue: 0,0:05:54.33,0:05:55.66,Default,,0,0,0,,Once again, we look at the model
Dialogue: 0,0:05:55.66,0:05:57.17,Default,,0,0,0,,object for the item identifier,
Dialogue: 0,0:05:57.38,0:05:58.35,Default,,0,0,0,,check the type that's being
Dialogue: 0,0:05:58.35,0:06:01.02,Default,,0,0,0,,requested, but here we produce a
Dialogue: 0,0:06:01.02,0:06:01.38,Default,,0,0,0,,file.
Dialogue: 0,0:06:02.05,0:06:03.66,Default,,0,0,0,,And that's actually all you need
Dialogue: 0,0:06:03.66,0:06:05.27,Default,,0,0,0,,to do for Drag-and-Drop on both
Dialogue: 0,0:06:05.27,0:06:06.42,Default,,0,0,0,,iOS and macOS.
Dialogue: 0,0:06:07.00,0:06:10.16,Default,,0,0,0,,So, to summarize the new API.
Dialogue: 0,0:06:10.93,0:06:12.21,Default,,0,0,0,,You declare and promise drag
Dialogue: 0,0:06:12.21,0:06:13.52,Default,,0,0,0,,types [inaudible] indexing time.
Dialogue: 0,0:06:13.97,0:06:15.35,Default,,0,0,0,,The Core Spotlight extension is
Dialogue: 0,0:06:15.35,0:06:16.77,Default,,0,0,0,,critical, it will get launched
Dialogue: 0,0:06:16.77,0:06:17.91,Default,,0,0,0,,to fulfill your promises.
Dialogue: 0,0:06:18.53,0:06:21.16,Default,,0,0,0,,Make producing the data as fast
Dialogue: 0,0:06:21.16,0:06:22.74,Default,,0,0,0,,as possible, the user will be
Dialogue: 0,0:06:22.74,0:06:24.05,Default,,0,0,0,,waiting for the drag to finish.
Dialogue: 0,0:06:24.41,0:06:26.86,Default,,0,0,0,,And of course, the new API is
Dialogue: 0,0:06:26.86,0:06:28.55,Default,,0,0,0,,for both macOS and iOS.
Dialogue: 0,0:06:29.65,0:06:31.00,Default,,0,0,0,,Next, Lyn is going to come
Dialogue: 0,0:06:31.00,0:06:32.30,Default,,0,0,0,,onstage to tell you all about
Dialogue: 0,0:06:32.30,0:06:33.43,Default,,0,0,0,,Quick Look previews for Core
Dialogue: 0,0:06:33.43,0:06:33.88,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:06:34.52,0:06:40.83,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:06:41.33,0:06:43.49,Default,,0,0,0,,>> Hi [inaudible], let's talk
Dialogue: 0,0:06:43.49,0:06:44.83,Default,,0,0,0,,about Quick Look previews for
Dialogue: 0,0:06:44.83,0:06:46.15,Default,,0,0,0,,your Core Spotlight items.
Dialogue: 0,0:06:47.27,0:06:49.39,Default,,0,0,0,,On iOS Spotlight shows previews
Dialogue: 0,0:06:49.46,0:06:51.27,Default,,0,0,0,,of your content when you 3-D
Dialogue: 0,0:06:51.27,0:06:52.41,Default,,0,0,0,,touch to Peek and Pop.
Dialogue: 0,0:06:53.82,0:06:55.13,Default,,0,0,0,,By default, Spotlight shows a
Dialogue: 0,0:06:55.13,0:06:56.89,Default,,0,0,0,,text only preview based on the
Dialogue: 0,0:06:56.89,0:06:58.01,Default,,0,0,0,,text in your Core Spotlight
Dialogue: 0,0:06:58.01,0:07:00.40,Default,,0,0,0,,item, but now you can customize
Dialogue: 0,0:07:00.40,0:07:02.35,Default,,0,0,0,,your preview by adopting a Quick
Dialogue: 0,0:07:02.35,0:07:03.57,Default,,0,0,0,,Look preview extension.
Dialogue: 0,0:07:04.15,0:07:06.73,Default,,0,0,0,,So, this is an example of a
Dialogue: 0,0:07:06.73,0:07:08.57,Default,,0,0,0,,default Core Spotlight preview.
Dialogue: 0,0:07:09.11,0:07:10.62,Default,,0,0,0,,If you've tried Peek and Popping
Dialogue: 0,0:07:10.62,0:07:13.03,Default,,0,0,0,,on a Core Spotlight item in iOS
Dialogue: 0,0:07:13.03,0:07:14.47,Default,,0,0,0,,10 this may look familiar.
Dialogue: 0,0:07:15.85,0:07:17.61,Default,,0,0,0,,This is an example of what your
Dialogue: 0,0:07:17.61,0:07:19.22,Default,,0,0,0,,preview could look like by
Dialogue: 0,0:07:19.22,0:07:20.42,Default,,0,0,0,,adopting a Quick Look preview
Dialogue: 0,0:07:20.42,0:07:21.09,Default,,0,0,0,,extension.
Dialogue: 0,0:07:21.84,0:07:23.69,Default,,0,0,0,,This area here is where your
Dialogue: 0,0:07:23.69,0:07:25.66,Default,,0,0,0,,preview will be displayed and it
Dialogue: 0,0:07:25.66,0:07:27.43,Default,,0,0,0,,comes from a view controller in
Dialogue: 0,0:07:27.43,0:07:28.15,Default,,0,0,0,,your extension.
Dialogue: 0,0:07:28.99,0:07:30.87,Default,,0,0,0,,So, let's talk about how we go
Dialogue: 0,0:07:30.87,0:07:32.10,Default,,0,0,0,,about implementing one of these
Dialogue: 0,0:07:32.10,0:07:32.78,Default,,0,0,0,,extensions.
Dialogue: 0,0:07:34.35,0:07:35.97,Default,,0,0,0,,The Core Spotlight previews use
Dialogue: 0,0:07:35.97,0:07:37.48,Default,,0,0,0,,a Quick Look preview SDK which
Dialogue: 0,0:07:37.64,0:07:39.75,Default,,0,0,0,,is new to iOS this year and
Dialogue: 0,0:07:39.75,0:07:41.38,Default,,0,0,0,,comes with a shiny new Xcode
Dialogue: 0,0:07:41.38,0:07:41.74,Default,,0,0,0,,template.
Dialogue: 0,0:07:42.72,0:07:44.27,Default,,0,0,0,,When you create your target from
Dialogue: 0,0:07:44.27,0:07:45.95,Default,,0,0,0,,this template you will get an
Dialogue: 0,0:07:45.95,0:07:48.25,Default,,0,0,0,,extension Info.plist and if we
Dialogue: 0,0:07:48.25,0:07:50.31,Default,,0,0,0,,take a look at that plist under
Dialogue: 0,0:07:50.49,0:07:52.67,Default,,0,0,0,,NSExtension attributes you'll
Dialogue: 0,0:07:52.67,0:07:54.25,Default,,0,0,0,,see the QL supports searchable
Dialogue: 0,0:07:54.25,0:07:55.25,Default,,0,0,0,,items attribute.
Dialogue: 0,0:07:55.71,0:07:57.91,Default,,0,0,0,,For Core Spotlight previews you
Dialogue: 0,0:07:57.91,0:07:58.91,Default,,0,0,0,,want that set to yes.
Dialogue: 0,0:07:59.55,0:08:00.81,Default,,0,0,0,,This lets us know that your
Dialogue: 0,0:08:00.81,0:08:02.14,Default,,0,0,0,,Quick Look preview extension
Dialogue: 0,0:08:02.14,0:08:03.70,Default,,0,0,0,,supports Core Spotlight items.
Dialogue: 0,0:08:04.53,0:08:08.90,Default,,0,0,0,,So, let's take a look at the
Dialogue: 0,0:08:09.06,0:08:09.15,Default,,0,0,0,,API.
Dialogue: 0,0:08:09.15,0:08:10.36,Default,,0,0,0,,When you create your target, you
Dialogue: 0,0:08:10.36,0:08:12.04,Default,,0,0,0,,will get a view controller with
Dialogue: 0,0:08:12.04,0:08:13.89,Default,,0,0,0,,this method, preparePreviewOf
Dialogue: 0,0:08:13.89,0:08:14.72,Default,,0,0,0,,SearchableItem.
Dialogue: 0,0:08:15.23,0:08:16.50,Default,,0,0,0,,This is what will get called
Dialogue: 0,0:08:16.69,0:08:18.06,Default,,0,0,0,,when a preview is required.
Dialogue: 0,0:08:18.64,0:08:20.46,Default,,0,0,0,,In this method, you will get an
Dialogue: 0,0:08:21.04,0:08:22.86,Default,,0,0,0,,identifier, this is the Core
Dialogue: 0,0:08:22.86,0:08:24.64,Default,,0,0,0,,Spotlight identifier unique to
Dialogue: 0,0:08:24.64,0:08:25.31,Default,,0,0,0,,your result.
Dialogue: 0,0:08:26.33,0:08:28.04,Default,,0,0,0,,You'll get a query string which
Dialogue: 0,0:08:28.04,0:08:29.71,Default,,0,0,0,,is the string the user searched
Dialogue: 0,0:08:29.71,0:08:31.27,Default,,0,0,0,,for to get to your result.
Dialogue: 0,0:08:31.74,0:08:33.00,Default,,0,0,0,,This is helpful if you want to
Dialogue: 0,0:08:33.00,0:08:34.57,Default,,0,0,0,,highlight content relevant to
Dialogue: 0,0:08:34.57,0:08:36.14,Default,,0,0,0,,the search in your preview.
Dialogue: 0,0:08:36.71,0:08:38.77,Default,,0,0,0,,And finally, you will get a
Dialogue: 0,0:08:38.77,0:08:40.24,Default,,0,0,0,,completion handler that you have
Dialogue: 0,0:08:40.24,0:08:43.32,Default,,0,0,0,,to call once you're done.
Dialogue: 0,0:08:43.52,0:08:45.91,Default,,0,0,0,,So, debugging a Core Spotlight
Dialogue: 0,0:08:45.96,0:08:47.48,Default,,0,0,0,,preview extension is different
Dialogue: 0,0:08:47.48,0:08:48.79,Default,,0,0,0,,from debugging a typical
Dialogue: 0,0:08:48.79,0:08:50.27,Default,,0,0,0,,extension, but don't worry it's
Dialogue: 0,0:08:50.27,0:08:50.93,Default,,0,0,0,,still easy.
Dialogue: 0,0:08:51.53,0:08:53.12,Default,,0,0,0,,Instead of picking a host app
Dialogue: 0,0:08:53.12,0:08:54.07,Default,,0,0,0,,and launching your extension
Dialogue: 0,0:08:54.07,0:08:55.83,Default,,0,0,0,,from that host app you'll be
Dialogue: 0,0:08:55.83,0:08:57.13,Default,,0,0,0,,launching your extension from
Dialogue: 0,0:08:57.13,0:08:58.12,Default,,0,0,0,,Spotlight directly.
Dialogue: 0,0:08:58.98,0:09:00.97,Default,,0,0,0,,So, when Xcode asks you for an
Dialogue: 0,0:09:00.97,0:09:03.89,Default,,0,0,0,,app on launch pick any app, you
Dialogue: 0,0:09:03.89,0:09:05.46,Default,,0,0,0,,won't be using it, instead
Dialogue: 0,0:09:05.46,0:09:07.01,Default,,0,0,0,,you'll go to Spotlight, look for
Dialogue: 0,0:09:07.01,0:09:08.43,Default,,0,0,0,,your Core Spotlight item and
Dialogue: 0,0:09:08.43,0:09:09.18,Default,,0,0,0,,then Peek and Pop.
Dialogue: 0,0:09:09.57,0:09:11.41,Default,,0,0,0,,Xcode will automatically attach
Dialogue: 0,0:09:11.41,0:09:12.86,Default,,0,0,0,,to your extension for you.
Dialogue: 0,0:09:13.20,0:09:14.58,Default,,0,0,0,,So, let's take a look at this
Dialogue: 0,0:09:14.58,0:09:15.59,Default,,0,0,0,,workflow with a demo.
Dialogue: 0,0:09:24.06,0:09:25.24,Default,,0,0,0,,So, before we begin the app that
Dialogue: 0,0:09:25.24,0:09:26.36,Default,,0,0,0,,you will see in this demo is
Dialogue: 0,0:09:26.36,0:09:28.55,Default,,0,0,0,,available as sample code so feel
Dialogue: 0,0:09:28.55,0:09:29.52,Default,,0,0,0,,free to take a look after the
Dialogue: 0,0:09:29.52,0:09:29.96,Default,,0,0,0,,session.
Dialogue: 0,0:09:30.42,0:09:32.67,Default,,0,0,0,,So, let's start by taking a look
Dialogue: 0,0:09:33.23,0:09:33.93,Default,,0,0,0,,at our main app.
Dialogue: 0,0:09:40.05,0:09:41.26,Default,,0,0,0,,So here we have a simple app,
Dialogue: 0,0:09:41.26,0:09:42.51,Default,,0,0,0,,it's just a list of pictures.
Dialogue: 0,0:09:43.25,0:09:44.12,Default,,0,0,0,,If you select one of the
Dialogue: 0,0:09:44.12,0:09:45.70,Default,,0,0,0,,pictures you get a more detailed
Dialogue: 0,0:09:45.70,0:09:48.04,Default,,0,0,0,,view with a title, a rating and
Dialogue: 0,0:09:48.04,0:09:48.77,Default,,0,0,0,,some description.
Dialogue: 0,0:09:49.08,0:09:51.93,Default,,0,0,0,,So, let's see if we try to find
Dialogue: 0,0:09:51.93,0:09:53.33,Default,,0,0,0,,a picture in Spotlight and Peek
Dialogue: 0,0:09:53.33,0:09:53.90,Default,,0,0,0,,and Pop on it.
Dialogue: 0,0:09:58.24,0:09:59.44,Default,,0,0,0,,So, there's item.
Dialogue: 0,0:10:00.04,0:10:04.42,Default,,0,0,0,,Oops, it popped right in.
Dialogue: 0,0:10:04.90,0:10:08.24,Default,,0,0,0,,So, there's a bit of text, it's
Dialogue: 0,0:10:08.24,0:10:08.92,Default,,0,0,0,,not the greatest.
Dialogue: 0,0:10:09.25,0:10:10.21,Default,,0,0,0,,Let's see if we can do better.
Dialogue: 0,0:10:11.65,0:10:14.14,Default,,0,0,0,,So back in Xcode here I'm going
Dialogue: 0,0:10:14.14,0:10:16.74,Default,,0,0,0,,to add a new target from the
Dialogue: 0,0:10:16.74,0:10:18.33,Default,,0,0,0,,Quick Look preview extension
Dialogue: 0,0:10:18.36,0:10:20.85,Default,,0,0,0,,template and we'll call that
Dialogue: 0,0:10:21.74,0:10:25.23,Default,,0,0,0,,pictures preview extension for
Dialogue: 0,0:10:26.78,0:10:26.91,Default,,0,0,0,,iOS.
Dialogue: 0,0:10:28.33,0:10:29.44,Default,,0,0,0,,We'll go ahead and activate
Dialogue: 0,0:10:29.44,0:10:29.69,Default,,0,0,0,,that.
Dialogue: 0,0:10:34.08,0:10:35.60,Default,,0,0,0,,One thing I should mention is
Dialogue: 0,0:10:35.60,0:10:37.13,Default,,0,0,0,,that the view controller that we
Dialogue: 0,0:10:37.13,0:10:39.37,Default,,0,0,0,,saw in the app is in a framework
Dialogue: 0,0:10:39.37,0:10:40.76,Default,,0,0,0,,so that it can share across
Dialogue: 0,0:10:40.88,0:10:41.81,Default,,0,0,0,,multiple targets.
Dialogue: 0,0:10:42.28,0:10:43.98,Default,,0,0,0,,If you have code or resources to
Dialogue: 0,0:10:43.98,0:10:45.56,Default,,0,0,0,,share across targets we suggest
Dialogue: 0,0:10:45.56,0:10:46.73,Default,,0,0,0,,you use the same approach.
Dialogue: 0,0:10:47.01,0:10:49.01,Default,,0,0,0,,So, I'm going to go ahead and
Dialogue: 0,0:10:49.01,0:10:50.57,Default,,0,0,0,,import that framework now.
Dialogue: 0,0:10:51.23,0:10:53.57,Default,,0,0,0,,And then we can jump into the
Dialogue: 0,0:10:53.57,0:10:54.42,Default,,0,0,0,,meat of this file.
Dialogue: 0,0:10:55.27,0:10:55.97,Default,,0,0,0,,PreparePreview
Dialogue: 0,0:10:55.97,0:10:57.32,Default,,0,0,0,,OfSearchableItem, this is the
Dialogue: 0,0:10:57.32,0:10:58.28,Default,,0,0,0,,same method you saw in the
Dialogue: 0,0:10:58.28,0:10:58.87,Default,,0,0,0,,slides.
Dialogue: 0,0:10:59.53,0:11:00.99,Default,,0,0,0,,And here we have the identifier
Dialogue: 0,0:11:01.10,0:11:04.38,Default,,0,0,0,,and what we're going to do is
Dialogue: 0,0:11:04.38,0:11:06.68,Default,,0,0,0,,use that identifier to find a
Dialogue: 0,0:11:06.68,0:11:07.82,Default,,0,0,0,,picture with a matching
Dialogue: 0,0:11:07.86,0:11:08.54,Default,,0,0,0,,identifier.
Dialogue: 0,0:11:09.72,0:11:10.97,Default,,0,0,0,,And once we have that picture we
Dialogue: 0,0:11:10.97,0:11:12.60,Default,,0,0,0,,can just go ahead and set up our
Dialogue: 0,0:11:12.60,0:11:13.79,Default,,0,0,0,,view controller with that
Dialogue: 0,0:11:13.79,0:11:14.21,Default,,0,0,0,,picture.
Dialogue: 0,0:11:14.63,0:11:15.59,Default,,0,0,0,,Again, this is the same view
Dialogue: 0,0:11:15.59,0:11:16.76,Default,,0,0,0,,controller you saw in the main
Dialogue: 0,0:11:17.67,0:11:17.74,Default,,0,0,0,,app.
Dialogue: 0,0:11:17.74,0:11:19.24,Default,,0,0,0,,If you have a lightweight view
Dialogue: 0,0:11:19.24,0:11:21.36,Default,,0,0,0,,controller in your main app you
Dialogue: 0,0:11:21.36,0:11:22.23,Default,,0,0,0,,can certainly use the same
Dialogue: 0,0:11:22.23,0:11:22.70,Default,,0,0,0,,approach.
Dialogue: 0,0:11:23.12,0:11:25.29,Default,,0,0,0,,If your view controller is more
Dialogue: 0,0:11:25.29,0:11:26.70,Default,,0,0,0,,memory or speed intensive you
Dialogue: 0,0:11:26.70,0:11:28.57,Default,,0,0,0,,might want to consider making a
Dialogue: 0,0:11:28.57,0:11:30.22,Default,,0,0,0,,lighter weight version for this
Dialogue: 0,0:11:30.22,0:11:30.86,Default,,0,0,0,,purpose.
Dialogue: 0,0:11:31.30,0:11:32.75,Default,,0,0,0,,So, then we're going to go ahead
Dialogue: 0,0:11:32.75,0:11:33.45,Default,,0,0,0,,and present it.
Dialogue: 0,0:11:34.36,0:11:35.61,Default,,0,0,0,,Here I have a little printout so
Dialogue: 0,0:11:35.61,0:11:36.79,Default,,0,0,0,,I can see when Xcode has
Dialogue: 0,0:11:36.79,0:11:38.64,Default,,0,0,0,,attached and finally, we call
Dialogue: 0,0:11:38.64,0:11:39.67,Default,,0,0,0,,that completion handler.
Dialogue: 0,0:11:40.72,0:11:42.18,Default,,0,0,0,,So, let's go and give this a
Dialogue: 0,0:11:42.18,0:11:42.72,Default,,0,0,0,,spin.
Dialogue: 0,0:11:43.33,0:11:45.86,Default,,0,0,0,,So, as I mentioned, it doesn't
Dialogue: 0,0:11:45.86,0:11:47.09,Default,,0,0,0,,matter what you pick here you're
Dialogue: 0,0:11:47.32,0:11:48.50,Default,,0,0,0,,not going to use it, we're going
Dialogue: 0,0:11:48.50,0:11:49.67,Default,,0,0,0,,to pick pictures because that's
Dialogue: 0,0:11:49.67,0:11:49.98,Default,,0,0,0,,our app.
Dialogue: 0,0:11:58.05,0:11:58.98,Default,,0,0,0,,So, there's pictures and we're
Dialogue: 0,0:11:59.05,0:12:00.75,Default,,0,0,0,,going to head right back into
Dialogue: 0,0:12:01.55,0:12:03.14,Default,,0,0,0,,Spotlight and we're going to try
Dialogue: 0,0:12:03.14,0:12:04.22,Default,,0,0,0,,Peek and Popping again.
Dialogue: 0,0:12:04.82,0:12:08.15,Default,,0,0,0,,And there's our preview.
Dialogue: 0,0:12:09.52,0:12:14.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:12:15.05,0:12:15.55,Default,,0,0,0,,And you can see from the
Dialogue: 0,0:12:15.55,0:12:16.85,Default,,0,0,0,,printout in Xcode that we have
Dialogue: 0,0:12:16.85,0:12:18.46,Default,,0,0,0,,successfully attached and now we
Dialogue: 0,0:12:18.46,0:12:19.48,Default,,0,0,0,,can go ahead and debug.
Dialogue: 0,0:12:26.17,0:12:28.09,Default,,0,0,0,,So, as you saw implementing a
Dialogue: 0,0:12:28.09,0:12:29.42,Default,,0,0,0,,Quick Look preview extension can
Dialogue: 0,0:12:29.42,0:12:30.95,Default,,0,0,0,,be very simple, especially if
Dialogue: 0,0:12:30.95,0:12:31.84,Default,,0,0,0,,you already have a view
Dialogue: 0,0:12:31.84,0:12:32.90,Default,,0,0,0,,controller to display your
Dialogue: 0,0:12:32.90,0:12:33.40,Default,,0,0,0,,content.
Dialogue: 0,0:12:33.99,0:12:35.22,Default,,0,0,0,,Maybe the view controller in
Dialogue: 0,0:12:35.22,0:12:36.40,Default,,0,0,0,,your main app is lightweight
Dialogue: 0,0:12:36.40,0:12:37.66,Default,,0,0,0,,already or maybe you've got a
Dialogue: 0,0:12:37.66,0:12:39.71,Default,,0,0,0,,lightweight version for 3-D
Dialogue: 0,0:12:39.71,0:12:40.74,Default,,0,0,0,,touch in your app.
Dialogue: 0,0:12:40.74,0:12:42.01,Default,,0,0,0,,Either way, you can simply reuse
Dialogue: 0,0:12:42.01,0:12:43.13,Default,,0,0,0,,that view controller here.
Dialogue: 0,0:12:43.47,0:12:45.19,Default,,0,0,0,,Some final tips for your
Dialogue: 0,0:12:45.19,0:12:45.86,Default,,0,0,0,,extension.
Dialogue: 0,0:12:46.06,0:12:48.26,Default,,0,0,0,,A loading spinner will show
Dialogue: 0,0:12:48.26,0:12:49.53,Default,,0,0,0,,until you call that completion
Dialogue: 0,0:12:49.53,0:12:51.14,Default,,0,0,0,,handler so call it as soon as
Dialogue: 0,0:12:51.14,0:12:51.61,Default,,0,0,0,,you can.
Dialogue: 0,0:12:52.32,0:12:53.45,Default,,0,0,0,,You can expect to see that
Dialogue: 0,0:12:53.45,0:12:55.15,Default,,0,0,0,,spinner when Xcode is attaching
Dialogue: 0,0:12:55.15,0:12:57.12,Default,,0,0,0,,to your extension for the first
Dialogue: 0,0:12:57.12,0:12:58.24,Default,,0,0,0,,time like in the demo.
Dialogue: 0,0:12:58.79,0:13:00.41,Default,,0,0,0,,But once it has already attached
Dialogue: 0,0:13:00.74,0:13:01.67,Default,,0,0,0,,or if you're not running in
Dialogue: 0,0:13:01.67,0:13:02.93,Default,,0,0,0,,Xcode you want to see your
Dialogue: 0,0:13:02.93,0:13:04.29,Default,,0,0,0,,preview immediately.
Dialogue: 0,0:13:04.61,0:13:06.97,Default,,0,0,0,,This is an extension so memory
Dialogue: 0,0:13:06.97,0:13:08.41,Default,,0,0,0,,is limited, be efficient.
Dialogue: 0,0:13:09.04,0:13:10.57,Default,,0,0,0,,And finally, once you call that
Dialogue: 0,0:13:10.57,0:13:12.33,Default,,0,0,0,,completion handler your job is
Dialogue: 0,0:13:12.33,0:13:13.54,Default,,0,0,0,,done, don't do any more
Dialogue: 0,0:13:13.54,0:13:15.34,Default,,0,0,0,,background work after the fact.
Dialogue: 0,0:13:15.63,0:13:17.91,Default,,0,0,0,,So that's Core Spotlight
Dialogue: 0,0:13:17.91,0:13:19.31,Default,,0,0,0,,previews on iOS.
Dialogue: 0,0:13:19.49,0:13:21.79,Default,,0,0,0,,The Quick Look preview SDK also
Dialogue: 0,0:13:21.79,0:13:23.96,Default,,0,0,0,,supports file-based previews and
Dialogue: 0,0:13:23.96,0:13:25.56,Default,,0,0,0,,for that see the building great
Dialogue: 0,0:13:25.65,0:13:28.11,Default,,0,0,0,,documents based apps in iOS 11
Dialogue: 0,0:13:28.37,0:13:28.81,Default,,0,0,0,,session.
Dialogue: 0,0:13:29.29,0:13:32.91,Default,,0,0,0,,So, as John mentioned, Core
Dialogue: 0,0:13:32.91,0:13:34.56,Default,,0,0,0,,Spotlight is also coming to
Dialogue: 0,0:13:34.56,0:13:37.01,Default,,0,0,0,,macOS and just like on iOS you
Dialogue: 0,0:13:37.01,0:13:38.61,Default,,0,0,0,,can customize your preview.
Dialogue: 0,0:13:39.56,0:13:41.62,Default,,0,0,0,,On macOS a preview is shown when
Dialogue: 0,0:13:41.62,0:13:43.08,Default,,0,0,0,,you select a search result in
Dialogue: 0,0:13:43.08,0:13:44.07,Default,,0,0,0,,the Spotlight window.
Dialogue: 0,0:13:44.21,0:13:45.65,Default,,0,0,0,,Here you really do want to
Dialogue: 0,0:13:45.65,0:13:47.23,Default,,0,0,0,,implement a Quick Look preview
Dialogue: 0,0:13:47.23,0:13:48.34,Default,,0,0,0,,extension for your Core
Dialogue: 0,0:13:48.34,0:13:50.46,Default,,0,0,0,,Spotlight item because Spotlight
Dialogue: 0,0:13:50.46,0:13:52.96,Default,,0,0,0,,on macOS does not have a default
Dialogue: 0,0:13:52.96,0:13:53.44,Default,,0,0,0,,preview.
Dialogue: 0,0:13:54.03,0:13:55.18,Default,,0,0,0,,So, this is what it's going to
Dialogue: 0,0:13:55.18,0:13:57.15,Default,,0,0,0,,look like without a Quick Look
Dialogue: 0,0:13:57.15,0:13:58.06,Default,,0,0,0,,preview extension.
Dialogue: 0,0:13:58.87,0:14:00.35,Default,,0,0,0,,And this is what it could look
Dialogue: 0,0:14:00.35,0:14:01.20,Default,,0,0,0,,like with one.
Dialogue: 0,0:14:02.25,0:14:03.87,Default,,0,0,0,,This area here is where your
Dialogue: 0,0:14:03.87,0:14:05.96,Default,,0,0,0,,preview will be displayed and
Dialogue: 0,0:14:05.96,0:14:07.62,Default,,0,0,0,,just like on iOS it comes from a
Dialogue: 0,0:14:07.62,0:14:08.90,Default,,0,0,0,,view controller in your
Dialogue: 0,0:14:08.90,0:14:09.54,Default,,0,0,0,,extension.
Dialogue: 0,0:14:09.54,0:14:10.76,Default,,0,0,0,,So, you can do just about
Dialogue: 0,0:14:10.76,0:14:13.29,Default,,0,0,0,,anything a regular view can do.
Dialogue: 0,0:14:14.19,0:14:16.79,Default,,0,0,0,,Debugging a Core Spotlight Quick
Dialogue: 0,0:14:16.79,0:14:18.66,Default,,0,0,0,,Look preview extension on macOS
Dialogue: 0,0:14:18.66,0:14:19.72,Default,,0,0,0,,is again different from
Dialogue: 0,0:14:19.72,0:14:21.38,Default,,0,0,0,,debugging a typical extension
Dialogue: 0,0:14:21.85,0:14:23.21,Default,,0,0,0,,and also different from the iOS
Dialogue: 0,0:14:23.38,0:14:23.82,Default,,0,0,0,,workflow.
Dialogue: 0,0:14:24.42,0:14:26.35,Default,,0,0,0,,Because Spotlight's window
Dialogue: 0,0:14:26.35,0:14:28.00,Default,,0,0,0,,vanishes when another app gets
Dialogue: 0,0:14:28.00,0:14:29.88,Default,,0,0,0,,focused it can be difficult to
Dialogue: 0,0:14:29.88,0:14:31.54,Default,,0,0,0,,work with breakpoints in Xcode.
Dialogue: 0,0:14:31.79,0:14:33.34,Default,,0,0,0,,So instead we've provided the
Dialogue: 0,0:14:33.34,0:14:34.83,Default,,0,0,0,,Quick Look simulator to launch
Dialogue: 0,0:14:34.83,0:14:36.33,Default,,0,0,0,,your extension for you and it
Dialogue: 0,0:14:36.33,0:14:37.36,Default,,0,0,0,,will stick around while you
Dialogue: 0,0:14:37.36,0:14:37.84,Default,,0,0,0,,debug.
Dialogue: 0,0:14:38.58,0:14:39.50,Default,,0,0,0,,So, let's take a look at how
Dialogue: 0,0:14:39.50,0:14:39.98,Default,,0,0,0,,that works.
Dialogue: 0,0:14:48.05,0:14:49.36,Default,,0,0,0,,All right, so let's take a look
Dialogue: 0,0:14:49.36,0:14:51.95,Default,,0,0,0,,at the Mac version of the app.
Dialogue: 0,0:14:58.25,0:14:59.84,Default,,0,0,0,,So here we have the same app
Dialogue: 0,0:14:59.84,0:15:02.21,Default,,0,0,0,,that we saw on iOS.
Dialogue: 0,0:15:02.86,0:15:05.59,Default,,0,0,0,,It's got a list of pictures, if
Dialogue: 0,0:15:05.59,0:15:07.24,Default,,0,0,0,,you select a picture you get a
Dialogue: 0,0:15:07.24,0:15:09.07,Default,,0,0,0,,more detailed view with a title
Dialogue: 0,0:15:09.07,0:15:10.01,Default,,0,0,0,,and a larger picture.
Dialogue: 0,0:15:10.79,0:15:12.48,Default,,0,0,0,,Let's see what happens if we
Dialogue: 0,0:15:12.48,0:15:13.98,Default,,0,0,0,,search for it in Spotlight.
Dialogue: 0,0:15:18.05,0:15:18.97,Default,,0,0,0,,We get a big blank space.
Dialogue: 0,0:15:19.43,0:15:20.71,Default,,0,0,0,,Let's see if we can fix that.
Dialogue: 0,0:15:26.05,0:15:26.82,Default,,0,0,0,,So, I'm going to create another
Dialogue: 0,0:15:26.82,0:15:30.73,Default,,0,0,0,,target this time with the macOS
Dialogue: 0,0:15:31.35,0:15:32.64,Default,,0,0,0,,Quick Look preview extension
Dialogue: 0,0:15:32.64,0:15:35.68,Default,,0,0,0,,template and we'll call that
Dialogue: 0,0:15:35.68,0:15:40.17,Default,,0,0,0,,pictures preview extension for
Dialogue: 0,0:15:40.17,0:15:41.48,Default,,0,0,0,,macOS.
Dialogue: 0,0:15:42.27,0:15:45.87,Default,,0,0,0,,Go ahead and activate it.
Dialogue: 0,0:15:47.88,0:15:49.37,Default,,0,0,0,,And again, I'm going to import
Dialogue: 0,0:15:49.37,0:15:49.98,Default,,0,0,0,,the framework.
Dialogue: 0,0:15:56.45,0:15:58.27,Default,,0,0,0,,That one and jump to prepare
Dialogue: 0,0:15:58.27,0:15:59.96,Default,,0,0,0,,preview of searchable item which
Dialogue: 0,0:15:59.96,0:16:01.37,Default,,0,0,0,,is the same method that you saw
Dialogue: 0,0:16:01.37,0:16:01.96,Default,,0,0,0,,on iOS.
Dialogue: 0,0:16:01.96,0:16:03.90,Default,,0,0,0,,So, we're going to do the same
Dialogue: 0,0:16:03.90,0:16:05.27,Default,,0,0,0,,thing here and use that
Dialogue: 0,0:16:05.27,0:16:07.57,Default,,0,0,0,,identifier to get a picture with
Dialogue: 0,0:16:07.57,0:16:09.81,Default,,0,0,0,,the matching identifier and then
Dialogue: 0,0:16:09.81,0:16:11.13,Default,,0,0,0,,we're going to go ahead and set
Dialogue: 0,0:16:11.13,0:16:12.04,Default,,0,0,0,,up our view.
Dialogue: 0,0:16:12.33,0:16:13.37,Default,,0,0,0,,This is the same view that you
Dialogue: 0,0:16:13.37,0:16:15.26,Default,,0,0,0,,saw in the app, I'm going to add
Dialogue: 0,0:16:15.26,0:16:17.17,Default,,0,0,0,,it to our view hierarchy, do a
Dialogue: 0,0:16:17.17,0:16:18.33,Default,,0,0,0,,little printout so we know when
Dialogue: 0,0:16:18.33,0:16:20.35,Default,,0,0,0,,we've attached and finally, we
Dialogue: 0,0:16:20.35,0:16:21.53,Default,,0,0,0,,call that completion handler.
Dialogue: 0,0:16:22.59,0:16:24.84,Default,,0,0,0,,So, let's give that a go.
Dialogue: 0,0:16:25.08,0:16:26.16,Default,,0,0,0,,When you run your Quick Look
Dialogue: 0,0:16:26.16,0:16:27.76,Default,,0,0,0,,preview extension Xcode will
Dialogue: 0,0:16:27.82,0:16:29.23,Default,,0,0,0,,offer the Quick Look simulator
Dialogue: 0,0:16:29.23,0:16:29.82,Default,,0,0,0,,by default.
Dialogue: 0,0:16:30.31,0:16:32.59,Default,,0,0,0,,So, go ahead and select that.
Dialogue: 0,0:16:40.24,0:16:40.94,Default,,0,0,0,,And there's a Quick Look
Dialogue: 0,0:16:40.94,0:16:41.49,Default,,0,0,0,,simulator.
Dialogue: 0,0:16:42.38,0:16:44.34,Default,,0,0,0,,On the left you will see your
Dialogue: 0,0:16:44.34,0:16:45.52,Default,,0,0,0,,Core Spotlight items.
Dialogue: 0,0:16:46.04,0:16:47.26,Default,,0,0,0,,If you have a lot of index
Dialogue: 0,0:16:47.26,0:16:48.45,Default,,0,0,0,,search results you can use the
Dialogue: 0,0:16:48.45,0:16:49.98,Default,,0,0,0,,search field above to narrow it
Dialogue: 0,0:16:49.98,0:16:50.38,Default,,0,0,0,,down.
Dialogue: 0,0:16:50.94,0:16:52.74,Default,,0,0,0,,When you select one of these
Dialogue: 0,0:16:52.74,0:16:54.37,Default,,0,0,0,,results your preview will appear
Dialogue: 0,0:16:54.37,0:16:56.15,Default,,0,0,0,,on the right and you can see
Dialogue: 0,0:16:56.15,0:16:58.11,Default,,0,0,0,,that Xcode has successfully
Dialogue: 0,0:16:58.11,0:16:59.72,Default,,0,0,0,,attached and you can go ahead
Dialogue: 0,0:16:59.72,0:17:00.67,Default,,0,0,0,,and debug to your heart's
Dialogue: 0,0:17:00.67,0:17:01.05,Default,,0,0,0,,content.
Dialogue: 0,0:17:01.59,0:17:03.82,Default,,0,0,0,,So, let's see what it looks like
Dialogue: 0,0:17:03.82,0:17:04.63,Default,,0,0,0,,in Spotlight now.
Dialogue: 0,0:17:10.06,0:17:11.23,Default,,0,0,0,,So, as you can see Spotlight has
Dialogue: 0,0:17:11.23,0:17:12.58,Default,,0,0,0,,successfully replaced the blank
Dialogue: 0,0:17:12.58,0:17:14.29,Default,,0,0,0,,spot with your extension.
Dialogue: 0,0:17:15.02,0:17:16.00,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:17:22.05,0:17:23.93,Default,,0,0,0,,So, as you saw, the API for Core
Dialogue: 0,0:17:23.93,0:17:25.64,Default,,0,0,0,,Spotlight previews on macOS is
Dialogue: 0,0:17:25.64,0:17:27.33,Default,,0,0,0,,identical to the one on iOS.
Dialogue: 0,0:17:28.71,0:17:32.35,Default,,0,0,0,,Some final tips here.
Dialogue: 0,0:17:32.35,0:17:34.49,Default,,0,0,0,,One caveat to remember is that
Dialogue: 0,0:17:35.14,0:17:36.68,Default,,0,0,0,,you should not make any views in
Dialogue: 0,0:17:36.68,0:17:38.12,Default,,0,0,0,,your extension first responder.
Dialogue: 0,0:17:38.49,0:17:39.99,Default,,0,0,0,,Your preview is not meant to be
Dialogue: 0,0:17:40.12,0:17:41.69,Default,,0,0,0,,interactive, Spotlight is the
Dialogue: 0,0:17:41.69,0:17:43.05,Default,,0,0,0,,interactive element here.
Dialogue: 0,0:17:44.15,0:17:46.92,Default,,0,0,0,,And finally, the Quick Look
Dialogue: 0,0:17:46.92,0:17:49.01,Default,,0,0,0,,preview extension on macOS only
Dialogue: 0,0:17:49.01,0:17:50.81,Default,,0,0,0,,supports Core Spotlight items.
Dialogue: 0,0:17:51.06,0:17:53.13,Default,,0,0,0,,For file-based previews the
Dialogue: 0,0:17:53.13,0:17:54.95,Default,,0,0,0,,classic Quick Look generator API
Dialogue: 0,0:17:55.21,0:17:56.32,Default,,0,0,0,,is still the solution.
Dialogue: 0,0:17:56.62,0:17:58.81,Default,,0,0,0,,So that's it for Core Spotlight
Dialogue: 0,0:17:58.81,0:17:59.32,Default,,0,0,0,,previews.
Dialogue: 0,0:17:59.32,0:17:59.94,Default,,0,0,0,,Back to John.
Dialogue: 0,0:18:00.52,0:18:05.50,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:18:10.08,0:18:13.09,Default,,0,0,0,,>> Thanks Lyn, that was great.
Dialogue: 0,0:18:13.42,0:18:15.29,Default,,0,0,0,,Ranking is very important for
Dialogue: 0,0:18:15.29,0:18:15.85,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:18:16.70,0:18:19.04,Default,,0,0,0,,In iOS 11 and macOS [inaudible]
Dialogue: 0,0:18:19.38,0:18:20.40,Default,,0,0,0,,we've added a new machine
Dialogue: 0,0:18:20.40,0:18:21.54,Default,,0,0,0,,learning based ranker for Core
Dialogue: 0,0:18:21.54,0:18:22.05,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:18:23.40,0:18:24.60,Default,,0,0,0,,This is personalized and
Dialogue: 0,0:18:24.60,0:18:26.88,Default,,0,0,0,,adaptive, it runs on device
Dialogue: 0,0:18:26.96,0:18:29.17,Default,,0,0,0,,using Core ML and we've worked
Dialogue: 0,0:18:29.17,0:18:31.19,Default,,0,0,0,,very hard to keep your data
Dialogue: 0,0:18:31.19,0:18:31.70,Default,,0,0,0,,private.
Dialogue: 0,0:18:32.82,0:18:34.47,Default,,0,0,0,,All the personalization and
Dialogue: 0,0:18:34.47,0:18:35.94,Default,,0,0,0,,adaptation to the user happens
Dialogue: 0,0:18:35.94,0:18:36.60,Default,,0,0,0,,on device.
Dialogue: 0,0:18:36.91,0:18:38.28,Default,,0,0,0,,The ML model is trained in the
Dialogue: 0,0:18:38.28,0:18:40.14,Default,,0,0,0,,cloud using features known
Dialogue: 0,0:18:40.14,0:18:41.57,Default,,0,0,0,,locally from your devices.
Dialogue: 0,0:18:42.04,0:18:44.48,Default,,0,0,0,,Features are private, they do
Dialogue: 0,0:18:44.48,0:18:46.39,Default,,0,0,0,,not include actual results and
Dialogue: 0,0:18:46.39,0:18:47.70,Default,,0,0,0,,they do not include actual
Dialogue: 0,0:18:47.70,0:18:48.12,Default,,0,0,0,,queries.
Dialogue: 0,0:18:48.74,0:18:50.27,Default,,0,0,0,,Data for training is only
Dialogue: 0,0:18:50.27,0:18:52.22,Default,,0,0,0,,submitted if you're opted in to
Dialogue: 0,0:18:52.22,0:18:53.19,Default,,0,0,0,,device analytics.
Dialogue: 0,0:18:53.83,0:18:55.49,Default,,0,0,0,,This is a privacy friendly way
Dialogue: 0,0:18:55.49,0:18:56.41,Default,,0,0,0,,of doing machine learning.
Dialogue: 0,0:19:02.21,0:19:03.14,Default,,0,0,0,,We've also added some new
Dialogue: 0,0:19:03.14,0:19:05.39,Default,,0,0,0,,properties to let you help us
Dialogue: 0,0:19:05.45,0:19:06.37,Default,,0,0,0,,rank your content.
Dialogue: 0,0:19:07.47,0:19:08.92,Default,,0,0,0,,We've added a rankingHint which
Dialogue: 0,0:19:08.92,0:19:10.71,Default,,0,0,0,,is a number from 1 to 100 with
Dialogue: 0,0:19:10.71,0:19:11.91,Default,,0,0,0,,100 being the best.
Dialogue: 0,0:19:12.46,0:19:13.97,Default,,0,0,0,,And when the ranker can't tell
Dialogue: 0,0:19:13.97,0:19:15.46,Default,,0,0,0,,the difference between items
Dialogue: 0,0:19:15.60,0:19:17.92,Default,,0,0,0,,this can be used to elevate the
Dialogue: 0,0:19:17.92,0:19:19.05,Default,,0,0,0,,more important content.
Dialogue: 0,0:19:19.49,0:19:22.87,Default,,0,0,0,,A new Boolean attribute was
Dialogue: 0,0:19:22.87,0:19:23.43,Default,,0,0,0,,created.
Dialogue: 0,0:19:24.05,0:19:26.16,Default,,0,0,0,,This lets us know whether the
Dialogue: 0,0:19:26.16,0:19:27.54,Default,,0,0,0,,user created the item.
Dialogue: 0,0:19:28.91,0:19:30.65,Default,,0,0,0,,UserOwned lets us know whether
Dialogue: 0,0:19:30.65,0:19:31.81,Default,,0,0,0,,the user has purchased this
Dialogue: 0,0:19:31.81,0:19:32.18,Default,,0,0,0,,item.
Dialogue: 0,0:19:32.43,0:19:34.33,Default,,0,0,0,,And userCurated lets us know
Dialogue: 0,0:19:34.33,0:19:35.43,Default,,0,0,0,,whether this is an item that the
Dialogue: 0,0:19:35.43,0:19:37.13,Default,,0,0,0,,user selected, for example a
Dialogue: 0,0:19:37.13,0:19:38.10,Default,,0,0,0,,bookmarked news article.
Dialogue: 0,0:19:38.43,0:19:42.99,Default,,0,0,0,,Now keep in mind that this is
Dialogue: 0,0:19:42.99,0:19:44.32,Default,,0,0,0,,just input to the ranker.
Dialogue: 0,0:19:45.55,0:19:47.58,Default,,0,0,0,,If you try to fool the ranking
Dialogue: 0,0:19:47.58,0:19:49.51,Default,,0,0,0,,system by setting the
Dialogue: 0,0:19:49.51,0:19:51.49,Default,,0,0,0,,rankingHint at everything to 100
Dialogue: 0,0:19:52.01,0:19:53.31,Default,,0,0,0,,it won't really affect anything.
Dialogue: 0,0:19:53.82,0:19:55.72,Default,,0,0,0,,This is only for ranking within
Dialogue: 0,0:19:55.72,0:19:56.59,Default,,0,0,0,,your own items.
Dialogue: 0,0:19:59.46,0:20:01.08,Default,,0,0,0,,Match quality and usage
Dialogue: 0,0:20:01.08,0:20:03.58,Default,,0,0,0,,information is still critical
Dialogue: 0,0:20:03.58,0:20:04.14,Default,,0,0,0,,for ranking.
Dialogue: 0,0:20:04.53,0:20:05.96,Default,,0,0,0,,So, to get the best ranking
Dialogue: 0,0:20:05.96,0:20:08.15,Default,,0,0,0,,behavior use NSUserActivity so
Dialogue: 0,0:20:08.15,0:20:09.24,Default,,0,0,0,,that we know what the user
Dialogue: 0,0:20:09.24,0:20:11.07,Default,,0,0,0,,interacts with in your app.
Dialogue: 0,0:20:12.02,0:20:13.69,Default,,0,0,0,,Provide a rich metadata for the
Dialogue: 0,0:20:13.69,0:20:15.46,Default,,0,0,0,,ranker to work on, so set a
Dialogue: 0,0:20:15.46,0:20:17.96,Default,,0,0,0,,great title, set an informative
Dialogue: 0,0:20:17.96,0:20:20.10,Default,,0,0,0,,description, specify dates, and
Dialogue: 0,0:20:20.10,0:20:21.96,Default,,0,0,0,,judiciously use keywords to make
Dialogue: 0,0:20:21.96,0:20:24.27,Default,,0,0,0,,items easier to find, but don't
Dialogue: 0,0:20:24.27,0:20:27.16,Default,,0,0,0,,misuse keywords because straight
Dialogue: 0,0:20:27.16,0:20:28.74,Default,,0,0,0,,keyword matches means that your
Dialogue: 0,0:20:28.74,0:20:30.56,Default,,0,0,0,,application's results will rank
Dialogue: 0,0:20:30.56,0:20:30.86,Default,,0,0,0,,lower.
Dialogue: 0,0:20:30.86,0:20:35.03,Default,,0,0,0,,Now let's get back to basics.
Dialogue: 0,0:20:35.51,0:20:37.59,Default,,0,0,0,,You need to get content into the
Dialogue: 0,0:20:37.59,0:20:39.55,Default,,0,0,0,,index and the primary way to add
Dialogue: 0,0:20:39.55,0:20:41.63,Default,,0,0,0,,content is directly via the
Dialogue: 0,0:20:41.63,0:20:42.75,Default,,0,0,0,,CSSearchable index API.
Dialogue: 0,0:20:44.52,0:20:46.06,Default,,0,0,0,,Secondarily, you can also index
Dialogue: 0,0:20:46.06,0:20:47.69,Default,,0,0,0,,NSUserActivity which we
Dialogue: 0,0:20:47.69,0:20:48.96,Default,,0,0,0,,recommend doing because it
Dialogue: 0,0:20:48.96,0:20:50.24,Default,,0,0,0,,provides an important ranking
Dialogue: 0,0:20:50.24,0:20:50.57,Default,,0,0,0,,signal.
Dialogue: 0,0:20:52.38,0:20:53.95,Default,,0,0,0,,Sometimes you'll need to delete
Dialogue: 0,0:20:53.95,0:20:55.55,Default,,0,0,0,,items reacting to what the user
Dialogue: 0,0:20:55.55,0:20:57.24,Default,,0,0,0,,does or to external events.
Dialogue: 0,0:20:57.24,0:20:59.24,Default,,0,0,0,,And of course, we have APIs for
Dialogue: 0,0:20:59.24,0:21:02.73,Default,,0,0,0,,that as well.
Dialogue: 0,0:21:02.82,0:21:04.09,Default,,0,0,0,,Adding CSSearchableItems to the
Dialogue: 0,0:21:04.09,0:21:05.79,Default,,0,0,0,,index is quite easy and you're
Dialogue: 0,0:21:05.79,0:21:07.43,Default,,0,0,0,,in complete control of what you
Dialogue: 0,0:21:07.43,0:21:07.67,Default,,0,0,0,,add.
Dialogue: 0,0:21:08.61,0:21:10.07,Default,,0,0,0,,You first create a CSSearchable
Dialogue: 0,0:21:10.07,0:21:11.37,Default,,0,0,0,,item attribute set that will
Dialogue: 0,0:21:11.37,0:21:12.84,Default,,0,0,0,,hold the metadata for the item.
Dialogue: 0,0:21:13.10,0:21:14.78,Default,,0,0,0,,You initialize the attribute set
Dialogue: 0,0:21:15.03,0:21:16.89,Default,,0,0,0,,with the universal type
Dialogue: 0,0:21:16.89,0:21:17.47,Default,,0,0,0,,identifier.
Dialogue: 0,0:21:18.76,0:21:20.77,Default,,0,0,0,,Here we're using kUTTypeImage
Dialogue: 0,0:21:20.77,0:21:22.13,Default,,0,0,0,,with a generic type frame rich
Dialogue: 0,0:21:22.13,0:21:22.63,Default,,0,0,0,,content.
Dialogue: 0,0:21:24.32,0:21:25.51,Default,,0,0,0,,You also want to use something
Dialogue: 0,0:21:25.51,0:21:27.62,Default,,0,0,0,,more specific and there are many
Dialogue: 0,0:21:27.62,0:21:29.74,Default,,0,0,0,,built-in types of the system to
Dialogue: 0,0:21:29.74,0:21:30.41,Default,,0,0,0,,inherit from.
Dialogue: 0,0:21:31.03,0:21:32.35,Default,,0,0,0,,It's important in iOS and
Dialogue: 0,0:21:32.35,0:21:33.97,Default,,0,0,0,,critical in macOS that you use
Dialogue: 0,0:21:33.97,0:21:36.34,Default,,0,0,0,,the right type because it
Dialogue: 0,0:21:36.34,0:21:37.67,Default,,0,0,0,,affects where and how your
Dialogue: 0,0:21:37.67,0:21:38.59,Default,,0,0,0,,content is displayed.
Dialogue: 0,0:21:40.20,0:21:41.79,Default,,0,0,0,,Then you set some attributes and
Dialogue: 0,0:21:41.79,0:21:43.56,Default,,0,0,0,,the attribute set display name
Dialogue: 0,0:21:43.56,0:21:44.37,Default,,0,0,0,,is a bare minimum.
Dialogue: 0,0:21:46.94,0:21:48.32,Default,,0,0,0,,You create a searchable item
Dialogue: 0,0:21:48.53,0:21:50.00,Default,,0,0,0,,with a unique identifier, a
Dialogue: 0,0:21:50.00,0:21:51.49,Default,,0,0,0,,domain identifier and the
Dialogue: 0,0:21:51.49,0:21:52.06,Default,,0,0,0,,attribute set.
Dialogue: 0,0:21:52.21,0:21:53.91,Default,,0,0,0,,And keep in mind that unique
Dialogue: 0,0:21:53.91,0:21:55.09,Default,,0,0,0,,identifier is what you'll get
Dialogue: 0,0:21:55.14,0:21:56.65,Default,,0,0,0,,back when Spotlight wants to
Dialogue: 0,0:21:56.65,0:21:57.91,Default,,0,0,0,,launch into your application.
Dialogue: 0,0:21:58.39,0:22:02.28,Default,,0,0,0,,And you index it and the
Dialogue: 0,0:22:02.28,0:22:03.38,Default,,0,0,0,,completion handler will get
Dialogue: 0,0:22:03.38,0:22:05.23,Default,,0,0,0,,called and the data has been
Dialogue: 0,0:22:05.23,0:22:06.64,Default,,0,0,0,,safely committed to storage.
Dialogue: 0,0:22:08.42,0:22:09.74,Default,,0,0,0,,Just like for Spotlight
Dialogue: 0,0:22:09.89,0:22:11.44,Default,,0,0,0,,NSUserActivity can be used to
Dialogue: 0,0:22:11.44,0:22:12.82,Default,,0,0,0,,index content and navigation
Dialogue: 0,0:22:12.82,0:22:14.94,Default,,0,0,0,,points in your app.
Dialogue: 0,0:22:14.94,0:22:16.69,Default,,0,0,0,,NSUserActivity reflects what the
Dialogue: 0,0:22:16.69,0:22:17.46,Default,,0,0,0,,user has done in the
Dialogue: 0,0:22:17.46,0:22:19.11,Default,,0,0,0,,application, whereas
Dialogue: 0,0:22:19.11,0:22:22.61,Default,,0,0,0,,CSSearchable reflects what your
Dialogue: 0,0:22:22.61,0:22:23.41,Default,,0,0,0,,app has to offer.
Dialogue: 0,0:22:23.98,0:22:28.30,Default,,0,0,0,,So, the difference is that the
Dialogue: 0,0:22:28.30,0:22:29.69,Default,,0,0,0,,Core Spotlight API lets you
Dialogue: 0,0:22:29.69,0:22:31.74,Default,,0,0,0,,index items that the user hasn't
Dialogue: 0,0:22:31.74,0:22:33.18,Default,,0,0,0,,visited and is generally
Dialogue: 0,0:22:33.18,0:22:34.26,Default,,0,0,0,,preferable as it gives you
Dialogue: 0,0:22:34.26,0:22:35.72,Default,,0,0,0,,complete control over what is
Dialogue: 0,0:22:35.72,0:22:36.18,Default,,0,0,0,,indexed.
Dialogue: 0,0:22:37.11,0:22:38.60,Default,,0,0,0,,But on the other hand, because
Dialogue: 0,0:22:38.64,0:22:40.99,Default,,0,0,0,,NSUserActivity is only for items
Dialogue: 0,0:22:40.99,0:22:42.44,Default,,0,0,0,,that the user has visited it
Dialogue: 0,0:22:42.44,0:22:43.97,Default,,0,0,0,,provides that important signal
Dialogue: 0,0:22:43.97,0:22:44.49,Default,,0,0,0,,for ranking.
Dialogue: 0,0:22:45.08,0:22:47.35,Default,,0,0,0,,To use NSUserActivity to inform
Dialogue: 0,0:22:47.35,0:22:49.07,Default,,0,0,0,,ranking you need to relate them
Dialogue: 0,0:22:49.07,0:22:50.35,Default,,0,0,0,,to the CSSearchableItems that
Dialogue: 0,0:22:50.35,0:22:50.91,Default,,0,0,0,,you index.
Dialogue: 0,0:22:55.28,0:22:57.66,Default,,0,0,0,,To do this when you create your
Dialogue: 0,0:22:58.08,0:23:00.21,Default,,0,0,0,,NSUserActivity you also create
Dialogue: 0,0:23:00.25,0:23:01.85,Default,,0,0,0,,an attribute set.
Dialogue: 0,0:23:03.12,0:23:04.50,Default,,0,0,0,,You set properties on the
Dialogue: 0,0:23:04.50,0:23:06.26,Default,,0,0,0,,attribute set and then you set
Dialogue: 0,0:23:06.26,0:23:08.54,Default,,0,0,0,,the related unique identifier or
Dialogue: 0,0:23:08.54,0:23:09.90,Default,,0,0,0,,if you don't want the lifetime
Dialogue: 0,0:23:09.90,0:23:12.93,Default,,0,0,0,,of your NSUserActivity tied to
Dialogue: 0,0:23:12.93,0:23:15.02,Default,,0,0,0,,your Core Spotlight items use
Dialogue: 0,0:23:15.02,0:23:16.08,Default,,0,0,0,,the [inaudible] related unique
Dialogue: 0,0:23:16.94,0:23:18.18,Default,,0,0,0,,identifier instead.
Dialogue: 0,0:23:19.92,0:23:21.40,Default,,0,0,0,,Then you mark your user activity
Dialogue: 0,0:23:21.40,0:23:24.42,Default,,0,0,0,,as eligible for search and you
Dialogue: 0,0:23:24.61,0:23:26.18,Default,,0,0,0,,set the attribute set on the
Dialogue: 0,0:23:26.18,0:23:26.77,Default,,0,0,0,,user activity.
Dialogue: 0,0:23:28.19,0:23:32.31,Default,,0,0,0,,The many reasons to delete items
Dialogue: 0,0:23:32.45,0:23:34.05,Default,,0,0,0,,from reacting to user's actions
Dialogue: 0,0:23:34.44,0:23:35.77,Default,,0,0,0,,to getting rid of stale content.
Dialogue: 0,0:23:36.67,0:23:38.04,Default,,0,0,0,,Using the Core Spotlight API you
Dialogue: 0,0:23:38.04,0:23:40.59,Default,,0,0,0,,can delete specific items by
Dialogue: 0,0:23:40.59,0:23:41.54,Default,,0,0,0,,their identifiers.
Dialogue: 0,0:23:41.92,0:23:43.82,Default,,0,0,0,,For example, if the user deletes
Dialogue: 0,0:23:43.82,0:23:44.34,Default,,0,0,0,,a document.
Dialogue: 0,0:23:44.50,0:23:46.37,Default,,0,0,0,,You can delete groups of items
Dialogue: 0,0:23:46.37,0:23:48.06,Default,,0,0,0,,by their domain identifier which
Dialogue: 0,0:23:48.06,0:23:49.36,Default,,0,0,0,,can be useful if the user signs
Dialogue: 0,0:23:49.36,0:23:50.91,Default,,0,0,0,,out of account or ends a
Dialogue: 0,0:23:50.91,0:23:51.99,Default,,0,0,0,,subscription and you want to
Dialogue: 0,0:23:51.99,0:23:53.59,Default,,0,0,0,,remove all content for it.
Dialogue: 0,0:23:53.59,0:23:55.22,Default,,0,0,0,,You can also use this to delete
Dialogue: 0,0:23:55.22,0:23:56.32,Default,,0,0,0,,NSUserActivities that you've
Dialogue: 0,0:23:56.32,0:23:58.10,Default,,0,0,0,,indexed if you set the domain
Dialogue: 0,0:23:58.10,0:24:00.57,Default,,0,0,0,,identifier on them.
Dialogue: 0,0:24:00.57,0:24:02.65,Default,,0,0,0,,Finally, you can delete all
Dialogue: 0,0:24:02.74,0:24:03.67,Default,,0,0,0,,searchable items for your
Dialogue: 0,0:24:03.67,0:24:05.59,Default,,0,0,0,,applications, which is useful if
Dialogue: 0,0:24:05.59,0:24:06.62,Default,,0,0,0,,you have a version change and
Dialogue: 0,0:24:06.62,0:24:07.86,Default,,0,0,0,,you need to restart indexing.
Dialogue: 0,0:24:08.12,0:24:09.31,Default,,0,0,0,,This is also called on your
Dialogue: 0,0:24:09.31,0:24:11.21,Default,,0,0,0,,behalf when the user deletes an
Dialogue: 0,0:24:11.21,0:24:11.80,Default,,0,0,0,,application.
Dialogue: 0,0:24:11.86,0:24:16.01,Default,,0,0,0,,Now let's get into the details
Dialogue: 0,0:24:16.01,0:24:17.21,Default,,0,0,0,,of indexing Core Spotlight.
Dialogue: 0,0:24:17.21,0:24:19.33,Default,,0,0,0,,Let's start with how to register
Dialogue: 0,0:24:19.33,0:24:21.50,Default,,0,0,0,,as an index delete and then talk
Dialogue: 0,0:24:21.50,0:24:22.98,Default,,0,0,0,,about how to build a Core
Dialogue: 0,0:24:22.98,0:24:24.54,Default,,0,0,0,,Spotlight extension which does
Dialogue: 0,0:24:24.54,0:24:26.87,Default,,0,0,0,,the job of a delegate when your
Dialogue: 0,0:24:26.87,0:24:27.63,Default,,0,0,0,,app isn't running.
Dialogue: 0,0:24:27.63,0:24:29.78,Default,,0,0,0,,We'll talk about how client
Dialogue: 0,0:24:29.78,0:24:31.30,Default,,0,0,0,,state works and how you can use
Dialogue: 0,0:24:31.30,0:24:32.93,Default,,0,0,0,,it to make indexing robust and
Dialogue: 0,0:24:32.93,0:24:33.37,Default,,0,0,0,,efficient.
Dialogue: 0,0:24:34.05,0:24:35.10,Default,,0,0,0,,And we'll discuss some
Dialogue: 0,0:24:35.10,0:24:36.30,Default,,0,0,0,,performance considerations.
Dialogue: 0,0:24:40.50,0:24:42.21,Default,,0,0,0,,Registering as an index delegate
Dialogue: 0,0:24:42.30,0:24:44.17,Default,,0,0,0,,lets Spotlight reach out to your
Dialogue: 0,0:24:44.17,0:24:46.23,Default,,0,0,0,,app when we need you to take
Dialogue: 0,0:24:46.23,0:24:46.70,Default,,0,0,0,,action.
Dialogue: 0,0:24:47.57,0:24:48.62,Default,,0,0,0,,It lets us request that you
Dialogue: 0,0:24:48.62,0:24:50.50,Default,,0,0,0,,index all your content or index
Dialogue: 0,0:24:50.50,0:24:51.40,Default,,0,0,0,,particular items [inaudible]
Dialogue: 0,0:24:51.75,0:24:55.31,Default,,0,0,0,,accurate and up-to-date.
Dialogue: 0,0:24:55.54,0:24:56.57,Default,,0,0,0,,It's also responsible for
Dialogue: 0,0:24:56.67,0:24:58.10,Default,,0,0,0,,responding to index throttling
Dialogue: 0,0:24:58.10,0:24:59.98,Default,,0,0,0,,and for providing Drag-and-Drop
Dialogue: 0,0:25:00.54,0:25:00.66,Default,,0,0,0,,data.
Dialogue: 0,0:25:00.70,0:25:01.69,Default,,0,0,0,,As usual, setting up the
Dialogue: 0,0:25:01.69,0:25:03.20,Default,,0,0,0,,delegate is just a single line
Dialogue: 0,0:25:03.20,0:25:05.99,Default,,0,0,0,,of code, but to be a delegate
Dialogue: 0,0:25:05.99,0:25:06.84,Default,,0,0,0,,you need to implement the
Dialogue: 0,0:25:06.84,0:25:08.12,Default,,0,0,0,,CSSearchableIndex delegate
Dialogue: 0,0:25:08.12,0:25:08.47,Default,,0,0,0,,protocol.
Dialogue: 0,0:25:10.14,0:25:11.80,Default,,0,0,0,,This is a complete protocol.
Dialogue: 0,0:25:12.48,0:25:13.39,Default,,0,0,0,,The first two methods are
Dialogue: 0,0:25:13.39,0:25:15.09,Default,,0,0,0,,required, we look at those in a
Dialogue: 0,0:25:15.09,0:25:16.18,Default,,0,0,0,,bit more detail in a moment.
Dialogue: 0,0:25:16.86,0:25:18.76,Default,,0,0,0,,The second two are optional and
Dialogue: 0,0:25:18.76,0:25:19.82,Default,,0,0,0,,let you know that indexing has
Dialogue: 0,0:25:19.82,0:25:21.12,Default,,0,0,0,,been slowed down to favor
Dialogue: 0,0:25:21.12,0:25:23.32,Default,,0,0,0,,foreground activity giving you
Dialogue: 0,0:25:23.32,0:25:24.59,Default,,0,0,0,,the option of stopping any
Dialogue: 0,0:25:24.59,0:25:25.93,Default,,0,0,0,,noncritical indexing and
Dialogue: 0,0:25:25.93,0:25:27.65,Default,,0,0,0,,focusing on the most important
Dialogue: 0,0:25:27.65,0:25:28.01,Default,,0,0,0,,items.
Dialogue: 0,0:25:28.47,0:25:31.49,Default,,0,0,0,,And finally, there are the two
Dialogue: 0,0:25:31.49,0:25:32.70,Default,,0,0,0,,methods for Drag-and-Drop that
Dialogue: 0,0:25:32.70,0:25:33.53,Default,,0,0,0,,we discussed earlier.
Dialogue: 0,0:25:41.15,0:25:42.23,Default,,0,0,0,,When the index all method is
Dialogue: 0,0:25:42.23,0:25:43.57,Default,,0,0,0,,called you add everything to the
Dialogue: 0,0:25:43.57,0:25:44.03,Default,,0,0,0,,index.
Dialogue: 0,0:25:44.63,0:25:45.83,Default,,0,0,0,,And when you get the call back
Dialogue: 0,0:25:45.83,0:25:47.13,Default,,0,0,0,,for the last item you call the
Dialogue: 0,0:25:47.13,0:25:47.89,Default,,0,0,0,,acknowledgment handler.
Dialogue: 0,0:25:48.32,0:25:49.43,Default,,0,0,0,,If your app quits and is
Dialogue: 0,0:25:49.43,0:25:50.71,Default,,0,0,0,,relaunched before the handler is
Dialogue: 0,0:25:50.71,0:25:52.09,Default,,0,0,0,,called the Spotlight will call
Dialogue: 0,0:25:52.09,0:25:53.39,Default,,0,0,0,,that again with the same
Dialogue: 0,0:25:53.39,0:25:53.83,Default,,0,0,0,,callback.
Dialogue: 0,0:25:54.79,0:25:55.62,Default,,0,0,0,,When reindex items with
Dialogue: 0,0:25:55.62,0:25:57.06,Default,,0,0,0,,identifiers is called you look
Dialogue: 0,0:25:57.06,0:25:58.30,Default,,0,0,0,,up the items the Spotlight is
Dialogue: 0,0:25:58.30,0:25:59.99,Default,,0,0,0,,requesting and re-add or delete
Dialogue: 0,0:25:59.99,0:26:00.75,Default,,0,0,0,,them as appropriate.
Dialogue: 0,0:26:01.21,0:26:02.09,Default,,0,0,0,,And again, you call
Dialogue: 0,0:26:02.09,0:26:03.72,Default,,0,0,0,,acknowledgment handler only when
Dialogue: 0,0:26:03.72,0:26:04.69,Default,,0,0,0,,you've received the last
Dialogue: 0,0:26:04.69,0:26:06.01,Default,,0,0,0,,callback for any outstanding
Dialogue: 0,0:26:06.01,0:26:06.34,Default,,0,0,0,,work.
Dialogue: 0,0:26:06.74,0:26:10.61,Default,,0,0,0,,The Core Spotlight extension
Dialogue: 0,0:26:10.69,0:26:12.31,Default,,0,0,0,,implements a CSSearchableIndex
Dialogue: 0,0:26:12.31,0:26:14.13,Default,,0,0,0,,delegate protocol and allows
Dialogue: 0,0:26:14.13,0:26:15.36,Default,,0,0,0,,callbacks to happen when your
Dialogue: 0,0:26:15.36,0:26:16.13,Default,,0,0,0,,app is not running.
Dialogue: 0,0:26:17.84,0:26:19.10,Default,,0,0,0,,This gets your content back into
Dialogue: 0,0:26:19.10,0:26:20.82,Default,,0,0,0,,Spotlight as quickly as possible
Dialogue: 0,0:26:20.82,0:26:22.22,Default,,0,0,0,,after the user is restored from
Dialogue: 0,0:26:22.22,0:26:24.04,Default,,0,0,0,,backup or when disaster recovery
Dialogue: 0,0:26:24.04,0:26:24.40,Default,,0,0,0,,is needed.
Dialogue: 0,0:26:25.18,0:26:26.48,Default,,0,0,0,,The Core Spotlight extension
Dialogue: 0,0:26:26.48,0:26:27.84,Default,,0,0,0,,will be called before your items
Dialogue: 0,0:26:27.84,0:26:29.42,Default,,0,0,0,,expire allowing you to update
Dialogue: 0,0:26:29.42,0:26:30.75,Default,,0,0,0,,them if necessary, even if the
Dialogue: 0,0:26:30.80,0:26:32.41,Default,,0,0,0,,user happens to not be using
Dialogue: 0,0:26:32.41,0:26:33.15,Default,,0,0,0,,your application.
Dialogue: 0,0:26:34.03,0:26:36.40,Default,,0,0,0,,Since the interface extension is
Dialogue: 0,0:26:36.40,0:26:37.38,Default,,0,0,0,,the same as for the index
Dialogue: 0,0:26:37.38,0:26:38.96,Default,,0,0,0,,delegate it's best to factor
Dialogue: 0,0:26:38.96,0:26:40.14,Default,,0,0,0,,your code so that you can share
Dialogue: 0,0:26:40.14,0:26:40.95,Default,,0,0,0,,the implementation.
Dialogue: 0,0:26:41.18,0:26:42.77,Default,,0,0,0,,And ideally, the shared
Dialogue: 0,0:26:42.77,0:26:44.02,Default,,0,0,0,,implementation will live in the
Dialogue: 0,0:26:44.02,0:26:44.54,Default,,0,0,0,,framework.
Dialogue: 0,0:26:45.60,0:26:46.62,Default,,0,0,0,,Remember also that the Core
Dialogue: 0,0:26:46.62,0:26:48.06,Default,,0,0,0,,Spotlight extension is critical
Dialogue: 0,0:26:48.06,0:26:49.19,Default,,0,0,0,,to support Drag-and-Drop.
Dialogue: 0,0:26:49.78,0:26:51.07,Default,,0,0,0,,If you don't have an extension
Dialogue: 0,0:26:51.07,0:26:52.51,Default,,0,0,0,,there will be nothing to call
Dialogue: 0,0:26:52.75,0:26:55.39,Default,,0,0,0,,when the user drops an item for
Dialogue: 0,0:26:55.39,0:26:56.68,Default,,0,0,0,,your application in another app.
Dialogue: 0,0:26:56.68,0:27:00.92,Default,,0,0,0,,Well you can get the indexing
Dialogue: 0,0:27:00.92,0:27:02.51,Default,,0,0,0,,right without using client
Dialogue: 0,0:27:02.51,0:27:02.94,Default,,0,0,0,,state.
Dialogue: 0,0:27:03.23,0:27:05.08,Default,,0,0,0,,We found that it makes the task
Dialogue: 0,0:27:05.11,0:27:05.85,Default,,0,0,0,,far easier.
Dialogue: 0,0:27:06.41,0:27:07.90,Default,,0,0,0,,Client state allows you to keep
Dialogue: 0,0:27:07.90,0:27:09.33,Default,,0,0,0,,Spotlight and your own database
Dialogue: 0,0:27:09.33,0:27:11.83,Default,,0,0,0,,in sync without redundant work.
Dialogue: 0,0:27:14.82,0:27:16.11,Default,,0,0,0,,Client state is an opaque
Dialogue: 0,0:27:16.11,0:27:16.78,Default,,0,0,0,,Spotlight.
Dialogue: 0,0:27:17.42,0:27:18.89,Default,,0,0,0,,What it is is your choice.
Dialogue: 0,0:27:19.62,0:27:21.12,Default,,0,0,0,,It's often a simple integer
Dialogue: 0,0:27:21.35,0:27:24.03,Default,,0,0,0,,denoting a sequence number which
Dialogue: 0,0:27:24.17,0:27:25.92,Default,,0,0,0,,could be in a marker in a
Dialogue: 0,0:27:25.92,0:27:27.77,Default,,0,0,0,,database journal, but we've seen
Dialogue: 0,0:27:27.77,0:27:29.09,Default,,0,0,0,,more complex cases as well.
Dialogue: 0,0:27:30.31,0:27:31.39,Default,,0,0,0,,Let's look at how this works.
Dialogue: 0,0:27:33.49,0:27:34.76,Default,,0,0,0,,Your app sends batches to Core
Dialogue: 0,0:27:34.76,0:27:36.28,Default,,0,0,0,,Spotlight, each batch is
Dialogue: 0,0:27:36.31,0:27:37.92,Default,,0,0,0,,journaled with the client state.
Dialogue: 0,0:27:38.80,0:27:39.66,Default,,0,0,0,,When the batch has been
Dialogue: 0,0:27:40.15,0:27:41.49,Default,,0,0,0,,committed to the journal your
Dialogue: 0,0:27:41.49,0:27:42.90,Default,,0,0,0,,callback log is called letting
Dialogue: 0,0:27:42.90,0:27:44.03,Default,,0,0,0,,you know that the batch has been
Dialogue: 0,0:27:44.03,0:27:44.49,Default,,0,0,0,,received.
Dialogue: 0,0:27:45.02,0:27:47.32,Default,,0,0,0,,So here the app is just indexing
Dialogue: 0,0:27:47.32,0:27:50.10,Default,,0,0,0,,a new batch, but disaster
Dialogue: 0,0:27:50.10,0:27:51.51,Default,,0,0,0,,strikes and the app crashes.
Dialogue: 0,0:27:52.83,0:27:53.87,Default,,0,0,0,,Now what happened to the data
Dialogue: 0,0:27:53.87,0:27:55.52,Default,,0,0,0,,that was in flight, did it make
Dialogue: 0,0:27:55.52,0:27:56.24,Default,,0,0,0,,it to the index?
Dialogue: 0,0:27:56.75,0:27:59.17,Default,,0,0,0,,With client state, you can find
Dialogue: 0,0:28:00.23,0:28:00.31,Default,,0,0,0,,out.
Dialogue: 0,0:28:00.58,0:28:01.99,Default,,0,0,0,,When your app starts again you
Dialogue: 0,0:28:01.99,0:28:03.70,Default,,0,0,0,,request the client state.
Dialogue: 0,0:28:04.19,0:28:05.59,Default,,0,0,0,,Here you get state two back
Dialogue: 0,0:28:05.66,0:28:07.39,Default,,0,0,0,,since this was last state that
Dialogue: 0,0:28:07.39,0:28:08.47,Default,,0,0,0,,actually made it into the
Dialogue: 0,0:28:08.47,0:28:09.99,Default,,0,0,0,,journal and you can restart
Dialogue: 0,0:28:09.99,0:28:11.35,Default,,0,0,0,,indexing at just the right
Dialogue: 0,0:28:11.35,0:28:11.67,Default,,0,0,0,,point.
Dialogue: 0,0:28:12.31,0:28:15.05,Default,,0,0,0,,If the data had already made it
Dialogue: 0,0:28:15.05,0:28:16.31,Default,,0,0,0,,to the Core Spotlight process
Dialogue: 0,0:28:16.31,0:28:17.45,Default,,0,0,0,,when the crash happened you
Dialogue: 0,0:28:17.45,0:28:18.46,Default,,0,0,0,,could continue it from state
Dialogue: 0,0:28:18.46,0:28:19.84,Default,,0,0,0,,three instead, so you do the
Dialogue: 0,0:28:19.84,0:28:20.89,Default,,0,0,0,,minimal amount of work.
Dialogue: 0,0:28:21.92,0:28:24.16,Default,,0,0,0,,To store client state, you need
Dialogue: 0,0:28:24.16,0:28:25.31,Default,,0,0,0,,to create a named index.
Dialogue: 0,0:28:25.79,0:28:27.12,Default,,0,0,0,,You can't use the default
Dialogue: 0,0:28:27.12,0:28:27.64,Default,,0,0,0,,instance.
Dialogue: 0,0:28:28.55,0:28:30.20,Default,,0,0,0,,The name lets us know which
Dialogue: 0,0:28:30.20,0:28:31.82,Default,,0,0,0,,states to fetch which is
Dialogue: 0,0:28:31.82,0:28:33.45,Default,,0,0,0,,required because some apps need
Dialogue: 0,0:28:33.45,0:28:34.35,Default,,0,0,0,,more than one token.
Dialogue: 0,0:28:34.62,0:28:35.53,Default,,0,0,0,,For example, because they're
Dialogue: 0,0:28:35.53,0:28:36.47,Default,,0,0,0,,multiple databases.
Dialogue: 0,0:28:37.59,0:28:39.54,Default,,0,0,0,,So, in your code first you
Dialogue: 0,0:28:39.54,0:28:40.90,Default,,0,0,0,,create a named index instance,
Dialogue: 0,0:28:41.75,0:28:44.72,Default,,0,0,0,,you'll begin an index batch, you
Dialogue: 0,0:28:44.95,0:28:46.46,Default,,0,0,0,,add searchable items as usual,
Dialogue: 0,0:28:46.97,0:28:49.11,Default,,0,0,0,,and then you compute the state
Dialogue: 0,0:28:49.11,0:28:50.02,Default,,0,0,0,,that you want to save.
Dialogue: 0,0:28:51.31,0:28:53.61,Default,,0,0,0,,Finally, you end the batch with
Dialogue: 0,0:28:53.61,0:28:55.33,Default,,0,0,0,,your opaque state and pay
Dialogue: 0,0:28:55.33,0:28:57.03,Default,,0,0,0,,attention to any errors returned
Dialogue: 0,0:28:57.03,0:28:58.04,Default,,0,0,0,,with the completion handler.
Dialogue: 0,0:28:58.53,0:29:01.56,Default,,0,0,0,,So, at some later point when
Dialogue: 0,0:29:01.56,0:29:03.02,Default,,0,0,0,,you're app or extension starts
Dialogue: 0,0:29:04.07,0:29:05.52,Default,,0,0,0,,use client state to resume
Dialogue: 0,0:29:05.52,0:29:05.98,Default,,0,0,0,,indexing.
Dialogue: 0,0:29:06.49,0:29:09.50,Default,,0,0,0,,You fetch the client state and
Dialogue: 0,0:29:09.50,0:29:11.00,Default,,0,0,0,,you compare it to the current
Dialogue: 0,0:29:11.00,0:29:12.83,Default,,0,0,0,,state doing whatever work is
Dialogue: 0,0:29:12.83,0:29:14.10,Default,,0,0,0,,needed to bring them in sync.
Dialogue: 0,0:29:14.49,0:29:18.41,Default,,0,0,0,,So, in your code you create an
Dialogue: 0,0:29:18.41,0:29:19.54,Default,,0,0,0,,index instance for the same
Dialogue: 0,0:29:19.54,0:29:22.38,Default,,0,0,0,,name, you fetch the client
Dialogue: 0,0:29:22.68,0:29:25.13,Default,,0,0,0,,state, you examine the state
Dialogue: 0,0:29:25.76,0:29:26.85,Default,,0,0,0,,after dealing with any errors,
Dialogue: 0,0:29:27.53,0:29:29.75,Default,,0,0,0,,and then you just pick up where
Dialogue: 0,0:29:29.75,0:29:31.32,Default,,0,0,0,,you left off if required.
Dialogue: 0,0:29:31.56,0:29:34.16,Default,,0,0,0,,And so, you can replay exactly
Dialogue: 0,0:29:34.16,0:29:35.29,Default,,0,0,0,,the operations that are needed
Dialogue: 0,0:29:35.29,0:29:36.80,Default,,0,0,0,,to bring your index and Core
Dialogue: 0,0:29:36.80,0:29:37.74,Default,,0,0,0,,Spotlight in sync.
Dialogue: 0,0:29:41.34,0:29:42.56,Default,,0,0,0,,Let's talk some more about
Dialogue: 0,0:29:42.56,0:29:43.57,Default,,0,0,0,,indexing performance.
Dialogue: 0,0:29:44.24,0:29:46.04,Default,,0,0,0,,Indexing is a background task
Dialogue: 0,0:29:46.04,0:29:47.23,Default,,0,0,0,,and you don't want to slow down
Dialogue: 0,0:29:47.23,0:29:48.85,Default,,0,0,0,,your app or the device with
Dialogue: 0,0:29:48.85,0:29:49.53,Default,,0,0,0,,indexing work.
Dialogue: 0,0:29:50.08,0:29:53.48,Default,,0,0,0,,So, minimize overhead, optimize
Dialogue: 0,0:29:53.48,0:29:55.30,Default,,0,0,0,,any access to the file system or
Dialogue: 0,0:29:55.30,0:29:58.03,Default,,0,0,0,,databases that you have to do in
Dialogue: 0,0:29:58.03,0:29:58.98,Default,,0,0,0,,order to create items.
Dialogue: 0,0:29:59.63,0:30:01.54,Default,,0,0,0,,And remember that each call to
Dialogue: 0,0:30:01.54,0:30:03.17,Default,,0,0,0,,Core Spotlight carries overhead.
Dialogue: 0,0:30:03.86,0:30:06.31,Default,,0,0,0,,So, has batches of items instead
Dialogue: 0,0:30:06.31,0:30:08.24,Default,,0,0,0,,of single items whenever it's
Dialogue: 0,0:30:08.45,0:30:08.85,Default,,0,0,0,,possible.
Dialogue: 0,0:30:09.48,0:30:11.71,Default,,0,0,0,,That said, consider that memory
Dialogue: 0,0:30:11.71,0:30:15.33,Default,,0,0,0,,is limited, so keep your batches
Dialogue: 0,0:30:15.33,0:30:16.42,Default,,0,0,0,,reasonably small.
Dialogue: 0,0:30:16.58,0:30:18.06,Default,,0,0,0,,Even batching just 10 items
Dialogue: 0,0:30:18.06,0:30:19.68,Default,,0,0,0,,decreases the overhead by an
Dialogue: 0,0:30:19.68,0:30:20.43,Default,,0,0,0,,order of magnitude.
Dialogue: 0,0:30:21.13,0:30:23.02,Default,,0,0,0,,And it's often more efficient to
Dialogue: 0,0:30:23.02,0:30:25.29,Default,,0,0,0,,give multiple batches in flight
Dialogue: 0,0:30:25.29,0:30:27.11,Default,,0,0,0,,in the pipeline manner than to
Dialogue: 0,0:30:27.32,0:30:30.30,Default,,0,0,0,,use a single large batch.
Dialogue: 0,0:30:30.30,0:30:31.52,Default,,0,0,0,,This allows indexing to happen
Dialogue: 0,0:30:31.52,0:30:33.76,Default,,0,0,0,,in parallel with your work.
Dialogue: 0,0:30:34.05,0:30:35.34,Default,,0,0,0,,Sine your app will be indexing
Dialogue: 0,0:30:36.02,0:30:38.20,Default,,0,0,0,,while it's in use don't block
Dialogue: 0,0:30:38.20,0:30:38.77,Default,,0,0,0,,the main thread.
Dialogue: 0,0:30:38.87,0:30:40.90,Default,,0,0,0,,And finally, index on a
Dialogue: 0,0:30:40.90,0:30:42.36,Default,,0,0,0,,background queue this will help
Dialogue: 0,0:30:42.36,0:30:43.68,Default,,0,0,0,,with power and responsiveness.
Dialogue: 0,0:30:44.25,0:30:47.58,Default,,0,0,0,,To get a great presentation in
Dialogue: 0,0:30:47.58,0:30:49.14,Default,,0,0,0,,Spotlight you want to set a good
Dialogue: 0,0:30:49.14,0:30:49.60,Default,,0,0,0,,thumbnail.
Dialogue: 0,0:30:51.01,0:30:52.51,Default,,0,0,0,,By default, Spotlight will use
Dialogue: 0,0:30:52.51,0:30:54.07,Default,,0,0,0,,your app icon, which makes it
Dialogue: 0,0:30:54.11,0:30:55.45,Default,,0,0,0,,hard to distinguish results at a
Dialogue: 0,0:30:55.45,0:30:55.95,Default,,0,0,0,,glance.
Dialogue: 0,0:30:56.85,0:30:59.12,Default,,0,0,0,,Just as important the thumbnail
Dialogue: 0,0:30:59.12,0:31:01.31,Default,,0,0,0,,is a title, the title is not
Dialogue: 0,0:31:01.31,0:31:03.06,Default,,0,0,0,,just created visually, it's also
Dialogue: 0,0:31:03.06,0:31:04.18,Default,,0,0,0,,what users most frequently
Dialogue: 0,0:31:04.18,0:31:04.90,Default,,0,0,0,,search on.
Dialogue: 0,0:31:05.37,0:31:07.43,Default,,0,0,0,,After the thumbnail and the
Dialogue: 0,0:31:07.43,0:31:09.06,Default,,0,0,0,,title, you're going to set other
Dialogue: 0,0:31:09.06,0:31:10.29,Default,,0,0,0,,fields that are suitable for
Dialogue: 0,0:31:10.29,0:31:11.33,Default,,0,0,0,,your contact.
Dialogue: 0,0:31:12.64,0:31:14.26,Default,,0,0,0,,Your description creates a much
Dialogue: 0,0:31:14.26,0:31:16.20,Default,,0,0,0,,richer result and providing the
Dialogue: 0,0:31:16.20,0:31:17.87,Default,,0,0,0,,content creation date can be
Dialogue: 0,0:31:17.87,0:31:20.38,Default,,0,0,0,,very helpful as well.
Dialogue: 0,0:31:20.38,0:31:22.22,Default,,0,0,0,,Where appropriate, rating and
Dialogue: 0,0:31:22.22,0:31:23.78,Default,,0,0,0,,rating description can make a
Dialogue: 0,0:31:23.78,0:31:24.45,Default,,0,0,0,,big difference.
Dialogue: 0,0:31:24.87,0:31:26.62,Default,,0,0,0,,And if you know the location for
Dialogue: 0,0:31:26.62,0:31:28.04,Default,,0,0,0,,something, setting the location
Dialogue: 0,0:31:28.04,0:31:29.25,Default,,0,0,0,,name can be a very nice touch.
Dialogue: 0,0:31:29.75,0:31:35.43,Default,,0,0,0,,So, set a title, provide a great
Dialogue: 0,0:31:35.43,0:31:37.39,Default,,0,0,0,,thumbnail, and set the right
Dialogue: 0,0:31:37.42,0:31:39.47,Default,,0,0,0,,content type for your content.
Dialogue: 0,0:31:40.08,0:31:41.14,Default,,0,0,0,,Then fill out the UI with
Dialogue: 0,0:31:41.14,0:31:42.46,Default,,0,0,0,,additional metadata to write a
Dialogue: 0,0:31:42.46,0:31:43.75,Default,,0,0,0,,great visual representation of
Dialogue: 0,0:31:43.75,0:31:44.33,Default,,0,0,0,,your content.
Dialogue: 0,0:31:44.90,0:31:46.68,Default,,0,0,0,,And remember that setting the
Dialogue: 0,0:31:46.68,0:31:48.08,Default,,0,0,0,,right metadata isn't just about
Dialogue: 0,0:31:48.08,0:31:50.42,Default,,0,0,0,,looks it also affects behavior,
Dialogue: 0,0:31:51.00,0:31:53.73,Default,,0,0,0,,so let's take a look at that.
Dialogue: 0,0:31:53.90,0:31:55.24,Default,,0,0,0,,For starters, enabling quick
Dialogue: 0,0:31:55.24,0:31:56.54,Default,,0,0,0,,actions like directions and
Dialogue: 0,0:31:56.54,0:31:57.95,Default,,0,0,0,,calling makes the user interface
Dialogue: 0,0:31:57.95,0:31:59.87,Default,,0,0,0,,richer and provides great value
Dialogue: 0,0:31:59.87,0:32:00.49,Default,,0,0,0,,to the user.
Dialogue: 0,0:32:01.48,0:32:03.18,Default,,0,0,0,,To support navigation, you set
Dialogue: 0,0:32:03.22,0:32:04.57,Default,,0,0,0,,the latitude and longitude
Dialogue: 0,0:32:04.57,0:32:06.23,Default,,0,0,0,,attributes and set supports
Dialogue: 0,0:32:06.23,0:32:07.91,Default,,0,0,0,,navigation to true.
Dialogue: 0,0:32:08.37,0:32:10.14,Default,,0,0,0,,Similarly, to support phone
Dialogue: 0,0:32:10.14,0:32:11.71,Default,,0,0,0,,calls, you need to set the phone
Dialogue: 0,0:32:11.71,0:32:13.52,Default,,0,0,0,,numbers attribute and set
Dialogue: 0,0:32:13.52,0:32:14.81,Default,,0,0,0,,supports navigation to true
Dialogue: 0,0:32:15.51,0:32:17.51,Default,,0,0,0,,sorry, and set phone call to
Dialogue: 0,0:32:17.51,0:32:17.70,Default,,0,0,0,,true.
Dialogue: 0,0:32:18.49,0:32:21.03,Default,,0,0,0,,Setting attributes that the user
Dialogue: 0,0:32:21.03,0:32:22.86,Default,,0,0,0,,can understand makes it easy to
Dialogue: 0,0:32:22.86,0:32:23.36,Default,,0,0,0,,search.
Dialogue: 0,0:32:23.87,0:32:24.92,Default,,0,0,0,,And setting attributes that
Dialogue: 0,0:32:24.92,0:32:26.15,Default,,0,0,0,,aren't naturally associated with
Dialogue: 0,0:32:26.15,0:32:27.56,Default,,0,0,0,,the item makes it hard to search
Dialogue: 0,0:32:27.56,0:32:28.65,Default,,0,0,0,,and leads to poor ranking of
Dialogue: 0,0:32:28.65,0:32:29.34,Default,,0,0,0,,your results.
Dialogue: 0,0:32:29.75,0:32:32.00,Default,,0,0,0,,By setting contact identifiers,
Dialogue: 0,0:32:32.57,0:32:34.02,Default,,0,0,0,,you can enable focus contact
Dialogue: 0,0:32:34.02,0:32:35.67,Default,,0,0,0,,search which is a great way to
Dialogue: 0,0:32:35.88,0:32:38.08,Default,,0,0,0,,get the user to your content.
Dialogue: 0,0:32:39.38,0:32:40.65,Default,,0,0,0,,Supporting features like
Dialogue: 0,0:32:40.65,0:32:42.76,Default,,0,0,0,,Drag-and-Drop and Quick Actions
Dialogue: 0,0:32:43.86,0:32:44.80,Default,,0,0,0,,makes for a first-class
Dialogue: 0,0:32:44.80,0:32:45.41,Default,,0,0,0,,experience.
Dialogue: 0,0:32:46.64,0:32:48.09,Default,,0,0,0,,Another part of experiences is
Dialogue: 0,0:32:48.09,0:32:49.12,Default,,0,0,0,,being able to engage with
Dialogue: 0,0:32:49.12,0:32:49.68,Default,,0,0,0,,[inaudible] in your own
Dialogue: 0,0:32:49.68,0:32:52.29,Default,,0,0,0,,application, so let's look at
Dialogue: 0,0:32:53.10,0:32:53.24,Default,,0,0,0,,that.
Dialogue: 0,0:32:53.42,0:32:54.40,Default,,0,0,0,,Make sure launching from
Dialogue: 0,0:32:54.40,0:32:55.91,Default,,0,0,0,,Spotlight is fast and that it
Dialogue: 0,0:32:55.91,0:32:57.16,Default,,0,0,0,,takes the user directly to the
Dialogue: 0,0:32:57.16,0:32:57.88,Default,,0,0,0,,found items.
Dialogue: 0,0:32:59.21,0:33:00.71,Default,,0,0,0,,Use NSUserActivity to restore
Dialogue: 0,0:33:00.71,0:33:03.02,Default,,0,0,0,,the state, your app delegate
Dialogue: 0,0:33:03.02,0:33:04.30,Default,,0,0,0,,will be called a continuous
Dialogue: 0,0:33:04.30,0:33:06.10,Default,,0,0,0,,activity and your [inaudible]
Dialogue: 0,0:33:06.10,0:33:08.59,Default,,0,0,0,,activity type and the userInfo
Dialogue: 0,0:33:08.59,0:33:09.69,Default,,0,0,0,,dictionary is necessary.
Dialogue: 0,0:33:09.95,0:33:10.96,Default,,0,0,0,,If you're being launched because
Dialogue: 0,0:33:10.96,0:33:11.72,Default,,0,0,0,,the user selected a
Dialogue: 0,0:33:11.72,0:33:13.29,Default,,0,0,0,,CSSearchableItem in Spotlight
Dialogue: 0,0:33:13.29,0:33:15.30,Default,,0,0,0,,the activity type will be the
Dialogue: 0,0:33:15.41,0:33:18.23,Default,,0,0,0,,CSSearchableItem action type and
Dialogue: 0,0:33:18.39,0:33:20.67,Default,,0,0,0,,the unique identifier can be
Dialogue: 0,0:33:20.67,0:33:21.73,Default,,0,0,0,,retrieved from the userInfo
Dialogue: 0,0:33:21.73,0:33:22.70,Default,,0,0,0,,dictionary by using
Dialogue: 0,0:33:22.78,0:33:24.14,Default,,0,0,0,,CSSearchableItem activity
Dialogue: 0,0:33:24.14,0:33:24.86,Default,,0,0,0,,identifier.
Dialogue: 0,0:33:26.06,0:33:27.27,Default,,0,0,0,,Another reason for being
Dialogue: 0,0:33:27.27,0:33:29.95,Default,,0,0,0,,launched is that the user wants
Dialogue: 0,0:33:29.95,0:33:31.48,Default,,0,0,0,,to continue the search in your
Dialogue: 0,0:33:31.48,0:33:32.03,Default,,0,0,0,,application.
Dialogue: 0,0:33:32.60,0:33:33.66,Default,,0,0,0,,In that case, you get the
Dialogue: 0,0:33:33.66,0:33:35.38,Default,,0,0,0,,CSQueryContinuation action type
Dialogue: 0,0:33:35.90,0:33:38.27,Default,,0,0,0,,and you can retrieve the search
Dialogue: 0,0:33:38.27,0:33:39.18,Default,,0,0,0,,query using the
Dialogue: 0,0:33:39.18,0:33:40.74,Default,,0,0,0,,CSSearchQueryString from the
Dialogue: 0,0:33:40.74,0:33:41.70,Default,,0,0,0,,userInfo dictionary.
Dialogue: 0,0:33:42.05,0:33:45.54,Default,,0,0,0,,Of course, the search system
Dialogue: 0,0:33:45.54,0:33:46.79,Default,,0,0,0,,wouldn't be complete without a
Dialogue: 0,0:33:46.79,0:33:47.32,Default,,0,0,0,,search API.
Dialogue: 0,0:33:48.32,0:33:49.64,Default,,0,0,0,,Core Spotlight provides the
Dialogue: 0,0:33:49.64,0:33:51.04,Default,,0,0,0,,ability to search the data that
Dialogue: 0,0:33:51.04,0:33:51.69,Default,,0,0,0,,you have provided.
Dialogue: 0,0:33:52.66,0:33:53.86,Default,,0,0,0,,It's the same search engine
Dialogue: 0,0:33:53.86,0:33:55.59,Default,,0,0,0,,that's used in many places on
Dialogue: 0,0:33:55.59,0:33:56.08,Default,,0,0,0,,the system.
Dialogue: 0,0:33:56.86,0:33:58.62,Default,,0,0,0,,By using it you get consistent
Dialogue: 0,0:33:58.62,0:33:59.91,Default,,0,0,0,,behavior with Spotlight and the
Dialogue: 0,0:33:59.91,0:34:00.93,Default,,0,0,0,,system applications.
Dialogue: 0,0:34:01.53,0:34:02.84,Default,,0,0,0,,It's great for all your content
Dialogue: 0,0:34:02.84,0:34:04.62,Default,,0,0,0,,on the device and of course, it
Dialogue: 0,0:34:04.62,0:34:06.35,Default,,0,0,0,,works in both iOS and macOS.
Dialogue: 0,0:34:06.87,0:34:11.58,Default,,0,0,0,,You can query for equality, for
Dialogue: 0,0:34:11.58,0:34:12.75,Default,,0,0,0,,greater than or less than.
Dialogue: 0,0:34:13.79,0:34:15.31,Default,,0,0,0,,So, if you want to find items
Dialogue: 0,0:34:15.31,0:34:16.51,Default,,0,0,0,,with more than a certain number
Dialogue: 0,0:34:16.51,0:34:18.68,Default,,0,0,0,,of pages the query is very short
Dialogue: 0,0:34:18.68,0:34:19.13,Default,,0,0,0,,and simple.
Dialogue: 0,0:34:19.67,0:34:20.97,Default,,0,0,0,,If you want to find all items
Dialogue: 0,0:34:20.97,0:34:22.05,Default,,0,0,0,,with page count in a certain
Dialogue: 0,0:34:22.05,0:34:23.47,Default,,0,0,0,,range you can use the InRange
Dialogue: 0,0:34:23.47,0:34:23.97,Default,,0,0,0,,operator.
Dialogue: 0,0:34:23.97,0:34:26.15,Default,,0,0,0,,You can use Boolean operators
Dialogue: 0,0:34:26.22,0:34:27.46,Default,,0,0,0,,for example, to select only
Dialogue: 0,0:34:27.46,0:34:29.48,Default,,0,0,0,,items for the given width and
Dialogue: 0,0:34:29.48,0:34:29.70,Default,,0,0,0,,height.
Dialogue: 0,0:34:30.40,0:34:32.40,Default,,0,0,0,,You can use string matching with
Dialogue: 0,0:34:32.40,0:34:33.61,Default,,0,0,0,,flags that makes Spotlight's
Dialogue: 0,0:34:33.61,0:34:35.08,Default,,0,0,0,,matching more or less strict.
Dialogue: 0,0:34:36.02,0:34:37.42,Default,,0,0,0,,From use in case insensitive
Dialogue: 0,0:34:37.52,0:34:38.14,Default,,0,0,0,,word matching [inaudible]
Dialogue: 0,0:34:38.14,0:34:40.14,Default,,0,0,0,,insensitive matching to other
Dialogue: 0,0:34:40.14,0:34:42.05,Default,,0,0,0,,combinations of flags or to
Dialogue: 0,0:34:42.05,0:34:43.56,Default,,0,0,0,,strict matching of full fields.
Dialogue: 0,0:34:45.32,0:34:46.33,Default,,0,0,0,,Or you can make your matching
Dialogue: 0,0:34:46.33,0:34:47.87,Default,,0,0,0,,very laxed and treat each word
Dialogue: 0,0:34:47.87,0:34:48.85,Default,,0,0,0,,as an individual query.
Dialogue: 0,0:34:49.58,0:34:50.93,Default,,0,0,0,,This is what Spotlight itself
Dialogue: 0,0:34:50.93,0:34:52.30,Default,,0,0,0,,does so if you want to be
Dialogue: 0,0:34:52.30,0:34:54.25,Default,,0,0,0,,consistent it's a good place to
Dialogue: 0,0:34:54.25,0:34:54.59,Default,,0,0,0,,start.
Dialogue: 0,0:34:55.20,0:34:57.35,Default,,0,0,0,,And of course, if this doesn't
Dialogue: 0,0:34:57.35,0:34:59.15,Default,,0,0,0,,suit your own application you
Dialogue: 0,0:34:59.15,0:35:00.64,Default,,0,0,0,,can combine and mix-and-match as
Dialogue: 0,0:35:00.64,0:35:01.00,Default,,0,0,0,,you like.
Dialogue: 0,0:35:04.50,0:35:06.16,Default,,0,0,0,,Core Spotlight supports a full
Dialogue: 0,0:35:06.16,0:35:07.72,Default,,0,0,0,,range of operators for
Dialogue: 0,0:35:07.90,0:35:09.46,Default,,0,0,0,,comparison and Boolean logic and
Dialogue: 0,0:35:09.46,0:35:10.29,Default,,0,0,0,,of course, you can nest
Dialogue: 0,0:35:10.29,0:35:11.67,Default,,0,0,0,,expressions using parentheses.
Dialogue: 0,0:35:12.07,0:35:13.31,Default,,0,0,0,,The field wildcard will match
Dialogue: 0,0:35:13.31,0:35:15.43,Default,,0,0,0,,any default search metadata and
Dialogue: 0,0:35:15.43,0:35:16.81,Default,,0,0,0,,the double wildcard will match
Dialogue: 0,0:35:16.81,0:35:18.22,Default,,0,0,0,,that, as well as text content.
Dialogue: 0,0:35:18.64,0:35:21.33,Default,,0,0,0,,We have a number of options for
Dialogue: 0,0:35:21.33,0:35:22.06,Default,,0,0,0,,string matching.
Dialogue: 0,0:35:22.38,0:35:23.89,Default,,0,0,0,,Our index is heavily optimized
Dialogue: 0,0:35:23.89,0:35:25.46,Default,,0,0,0,,for exact and prefix search and
Dialogue: 0,0:35:25.51,0:35:27.40,Default,,0,0,0,,it's incredibly fast if you use
Dialogue: 0,0:35:27.88,0:35:28.05,Default,,0,0,0,,these.
Dialogue: 0,0:35:28.70,0:35:30.38,Default,,0,0,0,,As a general rule, the longer
Dialogue: 0,0:35:30.38,0:35:33.12,Default,,0,0,0,,the prefix the faster the query.
Dialogue: 0,0:35:34.05,0:35:35.62,Default,,0,0,0,,Partial matching is very similar
Dialogue: 0,0:35:35.62,0:35:37.42,Default,,0,0,0,,to prefix matching, depending on
Dialogue: 0,0:35:37.42,0:35:39.40,Default,,0,0,0,,the string whichever has your
Dialogue: 0,0:35:39.40,0:35:42.30,Default,,0,0,0,,results is faster.
Dialogue: 0,0:35:42.39,0:35:43.90,Default,,0,0,0,,Phrase matching which means
Dialogue: 0,0:35:43.90,0:35:45.20,Default,,0,0,0,,matching only on consecutive
Dialogue: 0,0:35:45.20,0:35:46.88,Default,,0,0,0,,words is significantly more
Dialogue: 0,0:35:46.88,0:35:47.40,Default,,0,0,0,,expensive.
Dialogue: 0,0:35:48.77,0:35:50.15,Default,,0,0,0,,And finally, suffix and infix
Dialogue: 0,0:35:50.15,0:35:51.54,Default,,0,0,0,,matching are all slower and
Dialogue: 0,0:35:51.54,0:35:52.81,Default,,0,0,0,,using phrase matching combined
Dialogue: 0,0:35:52.81,0:35:55.09,Default,,0,0,0,,with these multiplies the cost.
Dialogue: 0,0:35:56.70,0:35:58.45,Default,,0,0,0,,The query syntax also offers a
Dialogue: 0,0:35:58.45,0:35:59.86,Default,,0,0,0,,set of flags that you can apply
Dialogue: 0,0:36:00.05,0:36:00.89,Default,,0,0,0,,to make the matching less
Dialogue: 0,0:36:00.89,0:36:01.31,Default,,0,0,0,,strict.
Dialogue: 0,0:36:01.75,0:36:03.70,Default,,0,0,0,,The C is for case insensitive, D
Dialogue: 0,0:36:03.70,0:36:04.98,Default,,0,0,0,,is for diacritics insensitive,
Dialogue: 0,0:36:05.24,0:36:09.17,Default,,0,0,0,,which means that characters like
Dialogue: 0,0:36:09.17,0:36:10.98,Default,,0,0,0,,an over [inaudible] can still be
Dialogue: 0,0:36:10.98,0:36:12.33,Default,,0,0,0,,matched with an old character if
Dialogue: 0,0:36:12.43,0:36:14.05,Default,,0,0,0,,the user is using the English
Dialogue: 0,0:36:14.05,0:36:14.42,Default,,0,0,0,,locale.
Dialogue: 0,0:36:15.78,0:36:17.71,Default,,0,0,0,,Word matching means that we
Dialogue: 0,0:36:17.71,0:36:19.61,Default,,0,0,0,,match words internal to fields
Dialogue: 0,0:36:19.61,0:36:21.25,Default,,0,0,0,,instead of just being anchored
Dialogue: 0,0:36:21.25,0:36:22.17,Default,,0,0,0,,at the beginning of a field.
Dialogue: 0,0:36:22.26,0:36:24.52,Default,,0,0,0,,And T for tokenized breaks out
Dialogue: 0,0:36:24.52,0:36:25.66,Default,,0,0,0,,the individual words of the
Dialogue: 0,0:36:25.66,0:36:26.06,Default,,0,0,0,,query.
Dialogue: 0,0:36:27.50,0:36:28.89,Default,,0,0,0,,So, let's look at an example.
Dialogue: 0,0:36:30.64,0:36:31.79,Default,,0,0,0,,We're implementing a search
Dialogue: 0,0:36:31.79,0:36:33.05,Default,,0,0,0,,function that takes a user query
Dialogue: 0,0:36:33.05,0:36:33.57,Default,,0,0,0,,as input.
Dialogue: 0,0:36:34.79,0:36:36.17,Default,,0,0,0,,First, we make sure to cancel
Dialogue: 0,0:36:36.17,0:36:37.85,Default,,0,0,0,,any currently running query so
Dialogue: 0,0:36:37.85,0:36:38.74,Default,,0,0,0,,that we don't have multiple
Dialogue: 0,0:36:38.74,0:36:40.07,Default,,0,0,0,,concurrent queries as this will
Dialogue: 0,0:36:40.07,0:36:41.07,Default,,0,0,0,,slow down the new query.
Dialogue: 0,0:36:41.61,0:36:42.88,Default,,0,0,0,,Since it's user input we make
Dialogue: 0,0:36:42.88,0:36:44.26,Default,,0,0,0,,sure to state the query string.
Dialogue: 0,0:36:44.78,0:36:47.74,Default,,0,0,0,,We then use the double star
Dialogue: 0,0:36:47.74,0:36:51.50,Default,,0,0,0,,syntax with cdwmt operators to
Dialogue: 0,0:36:51.55,0:36:53.06,Default,,0,0,0,,make a very forgiving query.
Dialogue: 0,0:36:53.52,0:36:57.29,Default,,0,0,0,,We create the query object
Dialogue: 0,0:36:57.86,0:36:59.08,Default,,0,0,0,,specifying that we want to fetch
Dialogue: 0,0:36:59.08,0:36:59.81,Default,,0,0,0,,the display names.
Dialogue: 0,0:37:00.35,0:37:02.74,Default,,0,0,0,,We set the found items handler
Dialogue: 0,0:37:03.25,0:37:05.04,Default,,0,0,0,,and then we set the completion
Dialogue: 0,0:37:05.04,0:37:05.30,Default,,0,0,0,,handler.
Dialogue: 0,0:37:06.58,0:37:09.97,Default,,0,0,0,,The completion handler will get
Dialogue: 0,0:37:09.97,0:37:11.06,Default,,0,0,0,,called only when there are no
Dialogue: 0,0:37:11.06,0:37:12.58,Default,,0,0,0,,more results to receive from the
Dialogue: 0,0:37:12.58,0:37:14.52,Default,,0,0,0,,query while the found items
Dialogue: 0,0:37:14.52,0:37:15.80,Default,,0,0,0,,handler can be called with
Dialogue: 0,0:37:15.80,0:37:17.11,Default,,0,0,0,,multiple batches of results.
Dialogue: 0,0:37:17.79,0:37:19.89,Default,,0,0,0,,After that all they need to do
Dialogue: 0,0:37:19.89,0:37:21.30,Default,,0,0,0,,is start the query, that's how
Dialogue: 0,0:37:21.30,0:37:22.82,Default,,0,0,0,,easy it is to use the Core
Dialogue: 0,0:37:22.82,0:37:23.71,Default,,0,0,0,,Spotlight search API.
Dialogue: 0,0:37:29.07,0:37:30.66,Default,,0,0,0,,So, in summary Core Spotlight is
Dialogue: 0,0:37:30.66,0:37:31.99,Default,,0,0,0,,now available for the Mac, as
Dialogue: 0,0:37:31.99,0:37:34.10,Default,,0,0,0,,well as iOS and it's great for
Dialogue: 0,0:37:34.10,0:37:35.17,Default,,0,0,0,,all your managed content.
Dialogue: 0,0:37:36.10,0:37:37.70,Default,,0,0,0,,Please adopt the new APIs or
Dialogue: 0,0:37:37.70,0:37:40.14,Default,,0,0,0,,previews for Drag-and-Drop on
Dialogue: 0,0:37:40.14,0:37:41.41,Default,,0,0,0,,both iOS and macOS.
Dialogue: 0,0:37:42.16,0:37:43.56,Default,,0,0,0,,Provide a rich metadata for
Dialogue: 0,0:37:43.56,0:37:45.47,Default,,0,0,0,,search, display and ranking.
Dialogue: 0,0:37:45.85,0:37:48.42,Default,,0,0,0,,And use NSUserActivity to
Dialogue: 0,0:37:48.42,0:37:49.65,Default,,0,0,0,,provide usage information.
Dialogue: 0,0:37:50.14,0:37:52.68,Default,,0,0,0,,And as always, keep the index
Dialogue: 0,0:37:52.68,0:37:54.11,Default,,0,0,0,,accurate and up-to-date by
Dialogue: 0,0:37:54.11,0:37:55.81,Default,,0,0,0,,implementing indexing extension
Dialogue: 0,0:37:56.41,0:37:58.65,Default,,0,0,0,,and taking advantage of client
Dialogue: 0,0:37:59.24,0:37:59.37,Default,,0,0,0,,state.
Dialogue: 0,0:38:01.19,0:38:02.80,Default,,0,0,0,,For more information, visit
Dialogue: 0,0:38:02.80,0:38:06.88,Default,,0,0,0,,developer.apple.com and you can
Dialogue: 0,0:38:06.88,0:38:08.24,Default,,0,0,0,,also watch some sessions from
Dialogue: 0,0:38:08.24,0:38:09.82,Default,,0,0,0,,earlier in the week if you're
Dialogue: 0,0:38:09.89,0:38:11.50,Default,,0,0,0,,interested in Drag-and-Drop,
Dialogue: 0,0:38:11.57,0:38:13.04,Default,,0,0,0,,introducing Drag-and-Drop, as
Dialogue: 0,0:38:13.09,0:38:14.51,Default,,0,0,0,,well as mastering Drag-and-Drop
Dialogue: 0,0:38:15.06,0:38:15.80,Default,,0,0,0,,would be recommended.
Dialogue: 0,0:38:15.94,0:38:17.94,Default,,0,0,0,,And if you want to know about
Dialogue: 0,0:38:17.94,0:38:19.25,Default,,0,0,0,,how CoreData and Core Spotlight
Dialogue: 0,0:38:19.25,0:38:21.29,Default,,0,0,0,,interact the session on what's
Dialogue: 0,0:38:21.29,0:38:23.21,Default,,0,0,0,,new in CoreData is great to
Dialogue: 0,0:38:23.21,0:38:23.56,Default,,0,0,0,,watch.
Dialogue: 0,0:38:24.54,0:38:25.84,Default,,0,0,0,,Thank you very much.
