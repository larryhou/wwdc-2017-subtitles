1
00:00:19,500 --> 00:00:22,167
大家好 欢迎来到
“tvOS中的深链接”演讲

2
00:00:22,567 --> 00:00:24,000
今天我们要看一些最佳范例

3
00:00:24,067 --> 00:00:26,167
关于在你的tvOS应用中
支持深链接

4
00:00:28,033 --> 00:00:29,500
那么什么是深链接？

5
00:00:29,833 --> 00:00:32,900
深链接就是一个你的应用
知道如何打开的URL

6
00:00:33,133 --> 00:00:35,633
我们深度调用这些链接
因为它们经常涉及内容

7
00:00:35,700 --> 00:00:37,767
这在你的应用UI中有几个层级

8
00:00:38,233 --> 00:00:40,700
无需手动在多个屏幕之间导航

9
00:00:40,867 --> 00:00:43,000
用户可以立即跳到
他们想要查看的内容

10
00:00:43,067 --> 00:00:44,167
通过深链接

11
00:00:46,200 --> 00:00:50,933
深链接URL可以通过系统的多个部分
或甚至通过其它应用发送给你的应用

12
00:00:51,867 --> 00:00:55,100
其中一个常见的深链接源是
你应用的顶层扩展

13
00:00:55,433 --> 00:00:56,933
如果你有一个顶层扩展

14
00:00:57,000 --> 00:00:59,267
它会通过深链接与你的应用进行通讯

15
00:00:59,633 --> 00:01:01,567
你编写的从顶层处理链接的代码

16
00:01:01,633 --> 00:01:04,266
也可以用于处理来自其它源的链接

17
00:01:06,967 --> 00:01:08,567
如果你不熟悉顶层扩展

18
00:01:08,633 --> 00:01:11,767
这里有一个iTunes电影原声
的顶层扩展的例子

19
00:01:12,300 --> 00:01:14,533
顶层扩展中的每一项
都会打开一个不同的电影

20
00:01:14,600 --> 00:01:15,967
在iTunes电影应用中

21
00:01:18,033 --> 00:01:20,233
因为这些链接对于你的应用来说有意义

22
00:01:20,433 --> 00:01:22,767
我们建议你使用通用链接

23
00:01:23,233 --> 00:01:26,767
通用链接还可在你的iOS应用中使用
如果你有的话

24
00:01:27,267 --> 00:01:29,567
跟旋转你自己的自定义URL机制不同

25
00:01:29,767 --> 00:01:33,100
通用链接可确保链接
总是能进入到你的应用中

26
00:01:33,167 --> 00:01:35,767
且数据也是你的应用所能接受的格式

27
00:01:36,233 --> 00:01:38,300
要获取关于通用链接的更多信息

28
00:01:38,367 --> 00:01:40,367
请看这个网页 这里是URL

29
00:01:44,333 --> 00:01:47,433
那么现在你知道
什么是深链接以及深链接的来源了

30
00:01:47,500 --> 00:01:48,933
让我们看看应该如何做

31
00:01:49,000 --> 00:01:50,833
当你的应用请求打开深链接时

32
00:01:51,333 --> 00:01:52,233
最重要的一点是

33
00:01:52,300 --> 00:01:54,733
将用户立即带到链接内容

34
00:01:54,833 --> 00:01:57,567
而无需任何加载屏幕或动画过渡

35
00:01:58,033 --> 00:01:59,100
你应该避免任何警告

36
00:01:59,167 --> 00:02:01,667
询问用户是否确定他们要打开链接

37
00:02:01,833 --> 00:02:03,833
或是否确定要开始播放视频

38
00:02:04,267 --> 00:02:05,933
还有一点很重要 就是确保

39
00:02:06,000 --> 00:02:07,833
当用户离开链接内容时

40
00:02:07,967 --> 00:02:09,900
他们能在你的应用中定位

41
00:02:10,267 --> 00:02:11,900
即便当直接跳到某个位置时

42
00:02:12,100 --> 00:02:15,067
用户应该总是能了解他们所在的位置
以及如何到达那个位置

43
00:02:17,233 --> 00:02:19,033
你应该如何显示深链接内容呢？

44
00:02:19,267 --> 00:02:20,467
嗯 这取决于链接

45
00:02:20,667 --> 00:02:22,700
让我们再看一下顶层扩展项

46
00:02:24,200 --> 00:02:26,500
每个顶层扩展项都支持两种URL

47
00:02:26,733 --> 00:02:28,800
displayURL和playURL

48
00:02:29,133 --> 00:02:32,267
当用户按下选择按钮时打开displayURL

49
00:02:32,667 --> 00:02:35,533
并且这应该将用户带到一个
顶层扩展项的详情页面

50
00:02:35,967 --> 00:02:38,967
一般来说 这个详情页面包含一种
显示扩展项的方式

51
00:02:39,033 --> 00:02:40,233
如果扩展项是一个视频

52
00:02:40,733 --> 00:02:43,467
当用户按下播放按钮时
打开playURL

53
00:02:43,733 --> 00:02:45,267
这是一个快捷键 可以让用户

54
00:02:45,333 --> 00:02:47,733
立即开始播放视频

55
00:02:49,733 --> 00:02:51,567
请记住 displayURL应该将用户带到

56
00:02:51,633 --> 00:02:53,467
扩展项的详情页面

57
00:02:53,900 --> 00:02:55,533
按下详情页面外的菜单

58
00:02:55,600 --> 00:02:58,133
应该可以将用户带回应用的主屏幕

59
00:02:58,633 --> 00:03:00,767
现在用户可以正常导航了

60
00:03:00,833 --> 00:03:02,000
在多个层级之间

61
00:03:02,067 --> 00:03:04,733
以从主屏幕进入详情页

62
00:03:04,933 --> 00:03:07,933
但他们应该不需要通过多个步骤
就能返回到深链接

63
00:03:08,333 --> 00:03:09,800
相反 只要按一次菜单

64
00:03:09,867 --> 00:03:12,367
就应该将他们带回到应用的顶层

65
00:03:12,833 --> 00:03:14,167
因为是在顶层

66
00:03:14,267 --> 00:03:16,167
按第二次菜单应该退出应用

67
00:03:16,267 --> 00:03:18,333
并返回到tvOS的主屏幕

68
00:03:20,367 --> 00:03:22,433
这里有一个这个过程的图解

69
00:03:22,500 --> 00:03:25,033
在这里 我打开了一个
简单的视频应用中的深链接

70
00:03:25,467 --> 00:03:28,700
应用将我带入的第一个屏幕
是我所选视频的详情页面

71
00:03:29,067 --> 00:03:32,300
按下菜单之后
就将我带回到应用的主屏幕

72
00:03:33,067 --> 00:03:35,267
显示了一个我能观看的
全部视频的网格

73
00:03:35,700 --> 00:03:37,867
再按一次菜单将退出应用

74
00:03:38,300 --> 00:03:40,433
并将我带回tvOS的主屏幕

75
00:03:43,100 --> 00:03:45,133
让我们看看如何处理playURL

76
00:03:45,833 --> 00:03:48,967
请记住 这应该立即开始播放该视频

77
00:03:49,267 --> 00:03:52,600
你的应用应该从黑色屏幕开始
然后淡入视频

78
00:03:53,033 --> 00:03:56,200
请试着避免任何可见的过渡或用户交互

79
00:03:56,600 --> 00:03:57,800
并且这尤其重要

80
00:03:57,867 --> 00:04:01,433
对于恢复播放
用户已开始观看的视频来说

81
00:04:02,233 --> 00:04:03,767
按下菜单 退出播放

82
00:04:03,833 --> 00:04:05,867
应该将用户带到同一个详情页面

83
00:04:05,967 --> 00:04:08,767
如果已发送displayURL
你会显示

84
00:04:09,133 --> 00:04:11,467
那个详情页面的导航跟之前一模一样

85
00:04:12,100 --> 00:04:15,133
按详情页面外的菜单应该可以
进入你应用的主屏幕

86
00:04:15,367 --> 00:04:18,466
再按一次菜单
应该返回tvOS的主屏幕

87
00:04:20,800 --> 00:04:22,933
这里是这个过程的图解

88
00:04:23,167 --> 00:04:25,400
你可以看到第一个屏幕是一个视频播放

89
00:04:25,733 --> 00:04:26,800
然后在背后

90
00:04:26,900 --> 00:04:30,433
是同一个层级
就好像我们打开过displayURL一样

91
00:04:32,767 --> 00:04:36,033
现在让我们快速看一个演示
真正了解一下这些概念

92
00:04:36,733 --> 00:04:40,633
这里是一个简单的应用 可以让我
从WWDC中播放一些我喜欢的视频

93
00:04:40,833 --> 00:04:42,800
我可以从应用内获取视频

94
00:04:44,333 --> 00:04:45,833
但还有一个顶层扩展

95
00:04:45,900 --> 00:04:48,833
可以让我直接从tvOS主屏幕
直接跳到视频那儿

96
00:04:52,100 --> 00:04:53,833
如果我选择并按下一个顶层扩展项

97
00:04:53,900 --> 00:04:57,567
我将被直接带到那个视频的详情页面

98
00:04:59,967 --> 00:05:01,333
如果我返回到顶层扩展…

99
00:05:04,967 --> 00:05:06,933
并按下另一个扩展项的播放按钮

100
00:05:09,833 --> 00:05:11,633
那么应用就会开始播放另一个视频

101
00:05:12,400 --> 00:05:13,867
播放之外的菜单

102
00:05:14,200 --> 00:05:17,133
会把我带到我刚才正在观看的
扩展项的详情页面

103
00:05:17,700 --> 00:05:21,433
你要记住这并不是我最后一次
在应用中看到过的同一个扩展项

104
00:05:21,900 --> 00:05:24,567
这是因为当应用从顶层打开链接时

105
00:05:24,733 --> 00:05:27,633
它重新配置了UI来显示链接内容

106
00:05:28,800 --> 00:05:32,933
然后菜单再次把我带离详情页面
并带入应用的主屏幕

107
00:05:33,600 --> 00:05:35,867
第三次按下菜单退出应用

108
00:05:36,133 --> 00:05:38,300
并将我带回tvOS主屏幕

109
00:05:39,267 --> 00:05:42,267
让我们快速看一下在这个应用中
处理深链接的代码

110
00:05:42,700 --> 00:05:44,333
是在应用委托中进行的

111
00:05:44,500 --> 00:05:48,367
特别是 应用通过多种方法打开URL

112
00:05:49,933 --> 00:05:53,267
首先当我们重新配置UI
来显示深链接时

113
00:05:53,467 --> 00:05:55,233
我们不想直接显示而无需任何动画

114
00:05:55,600 --> 00:05:57,767
意思是内容已经被显示出来了

115
00:05:57,833 --> 00:05:59,733
当系统切换到我们的应用时

116
00:06:01,167 --> 00:06:03,567
然后我们想去除UI

117
00:06:03,633 --> 00:06:06,667
就是用户通过应用在之前的会话中
可能导航到的UI

118
00:06:07,033 --> 00:06:09,200
这个应用是通过导航控制器创建的

119
00:06:09,300 --> 00:06:11,900
所以我们所需要做的就是
返回到根视图控制器

120
00:06:12,067 --> 00:06:13,533
也就是应用的主屏幕

121
00:06:15,267 --> 00:06:17,100
现在我们想推动一个URL详情控制器

122
00:06:17,167 --> 00:06:19,067
使其进入导航堆栈中

123
00:06:19,567 --> 00:06:22,567
即便我们最终要处理playURL
我们仍希望这样做

124
00:06:22,833 --> 00:06:26,133
那样 详情控制器将会被显示出来
若用户按下播放之外的菜单的话

125
00:06:26,667 --> 00:06:29,700
我们将通过实施同样的跳转
来推动详情控制器

126
00:06:29,767 --> 00:06:31,367
它将会被触发如果用户

127
00:06:31,433 --> 00:06:34,333
在应用的主屏幕上选择了其中一个
集合视图单元的话

128
00:06:36,000 --> 00:06:38,333
最后如果我们要处理playURL

129
00:06:38,500 --> 00:06:42,067
我们想要把播放视图控制器
推动到详情视图控制器之上

130
00:06:42,433 --> 00:06:45,633
那么我们的实现方式
是通过同一个跳转 可以被触发

131
00:06:45,700 --> 00:06:48,467
如果用户在详情屏幕选择了播放按钮

132
00:06:50,833 --> 00:06:52,900
总之 深链接提供了一种很棒的方式

133
00:06:52,967 --> 00:06:56,267
可以让用户迅速导航到
你的应用中深层次的内容

134
00:06:56,733 --> 00:06:59,400
打开深链接时
你要提供一种最佳体验

135
00:06:59,467 --> 00:07:02,000
就是将用户立即带入所链接的内容

136
00:07:02,067 --> 00:07:04,300
并提供一个可预见的返回方式

137
00:07:05,933 --> 00:07:08,200
要获取更多信息 请访问这个网站

