[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:31.77,0:00:32.31,Default,,0,0,0,,>> Jeff Tu: Good afternoon,
Dialogue: 0,0:00:32.31,0:00:32.75,Default,,0,0,0,,everyone.
Dialogue: 0,0:00:32.88,0:00:34.12,Default,,0,0,0,,I'd like to welcome to you part
Dialogue: 0,0:00:34.12,0:00:36.00,Default,,0,0,0,,two to Advances in Networking, a
Dialogue: 0,0:00:36.00,0:00:37.36,Default,,0,0,0,,continuation of the session from
Dialogue: 0,0:00:37.36,0:00:38.17,Default,,0,0,0,,the past hour.
Dialogue: 0,0:00:38.96,0:00:40.47,Default,,0,0,0,,My name is Jeff Tu, and I'll be
Dialogue: 0,0:00:40.47,0:00:41.33,Default,,0,0,0,,taking you through the first
Dialogue: 0,0:00:41.33,0:00:41.50,Default,,0,0,0,,topic.
Dialogue: 0,0:00:44.52,0:00:45.94,Default,,0,0,0,,In this session we'll discuss
Dialogue: 0,0:00:45.94,0:00:47.86,Default,,0,0,0,,new URLSession developer API and
Dialogue: 0,0:00:47.86,0:00:49.74,Default,,0,0,0,,enhancements, networking best
Dialogue: 0,0:00:49.74,0:00:51.39,Default,,0,0,0,,practices, and other important
Dialogue: 0,0:00:51.39,0:00:53.00,Default,,0,0,0,,technology areas in networking.
Dialogue: 0,0:00:56.07,0:00:57.52,Default,,0,0,0,,Our first topic is new
Dialogue: 0,0:00:57.52,0:00:58.45,Default,,0,0,0,,URLSession API.
Dialogue: 0,0:00:59.39,0:01:02.56,Default,,0,0,0,,But before that, I'd like to
Dialogue: 0,0:01:02.56,0:01:04.09,Default,,0,0,0,,review the underlying API we'll
Dialogue: 0,0:01:04.09,0:01:05.40,Default,,0,0,0,,be talking about, which is
Dialogue: 0,0:01:05.40,0:01:06.23,Default,,0,0,0,,URLSession.
Dialogue: 0,0:01:07.11,0:01:09.09,Default,,0,0,0,,URLSession is an easy-to-use API
Dialogue: 0,0:01:09.21,0:01:11.18,Default,,0,0,0,,for networking introduced in iOS
Dialogue: 0,0:01:11.18,0:01:12.68,Default,,0,0,0,,7 and OS X Mavericks.
Dialogue: 0,0:01:13.74,0:01:15.24,Default,,0,0,0,,URLSession supports networking
Dialogue: 0,0:01:15.27,0:01:18.82,Default,,0,0,0,,protocols like HTTP/2; HTTP/1.1;
Dialogue: 0,0:01:19.16,0:01:21.65,Default,,0,0,0,,FTP; and custom streams with an
Dialogue: 0,0:01:21.65,0:01:23.76,Default,,0,0,0,,overall emphasis on URL loading.
Dialogue: 0,0:01:24.13,0:01:26.98,Default,,0,0,0,,If you provide it an HTTPS URL,
Dialogue: 0,0:01:27.28,0:01:29.10,Default,,0,0,0,,it also automatically provides
Dialogue: 0,0:01:29.10,0:01:30.91,Default,,0,0,0,,the encryption and decryption of
Dialogue: 0,0:01:30.91,0:01:32.64,Default,,0,0,0,,data between you and the web
Dialogue: 0,0:01:32.64,0:01:32.96,Default,,0,0,0,,server.
Dialogue: 0,0:01:34.29,0:01:35.73,Default,,0,0,0,,Last year we deprecated
Dialogue: 0,0:01:35.87,0:01:36.85,Default,,0,0,0,,NSURLConnection API.
Dialogue: 0,0:01:36.85,0:01:39.48,Default,,0,0,0,,So we encourage any new app
Dialogue: 0,0:01:39.48,0:01:40.60,Default,,0,0,0,,development to occur with
Dialogue: 0,0:01:40.60,0:01:41.42,Default,,0,0,0,,URLSession.
Dialogue: 0,0:01:42.14,0:01:43.49,Default,,0,0,0,,For more information on
Dialogue: 0,0:01:43.49,0:01:44.95,Default,,0,0,0,,URLSession, I encourage you to
Dialogue: 0,0:01:44.95,0:01:47.36,Default,,0,0,0,,review past WWDC sessions and
Dialogue: 0,0:01:47.36,0:01:48.73,Default,,0,0,0,,other online documentation.
Dialogue: 0,0:01:51.94,0:01:53.34,Default,,0,0,0,,Recall that there are different
Dialogue: 0,0:01:53.34,0:01:54.92,Default,,0,0,0,,kinds of URLSession objects that
Dialogue: 0,0:01:54.92,0:01:55.58,Default,,0,0,0,,you can create.
Dialogue: 0,0:01:56.45,0:01:57.90,Default,,0,0,0,,The basic object you can create
Dialogue: 0,0:01:57.97,0:01:59.56,Default,,0,0,0,,is a default configuration
Dialogue: 0,0:01:59.68,0:02:01.13,Default,,0,0,0,,URLSession object.
Dialogue: 0,0:02:02.10,0:02:03.79,Default,,0,0,0,,Default sessions have a behavior
Dialogue: 0,0:02:03.91,0:02:05.62,Default,,0,0,0,,where a task either fetches a
Dialogue: 0,0:02:05.62,0:02:07.90,Default,,0,0,0,,URL immediately; or if the
Dialogue: 0,0:02:07.90,0:02:09.04,Default,,0,0,0,,device can't connect to the web
Dialogue: 0,0:02:09.11,0:02:10.62,Default,,0,0,0,,server, fails immediately.
Dialogue: 0,0:02:11.65,0:02:13.11,Default,,0,0,0,,URL loads can fail because the
Dialogue: 0,0:02:13.11,0:02:14.32,Default,,0,0,0,,device isn't connected to the
Dialogue: 0,0:02:14.32,0:02:15.69,Default,,0,0,0,,Internet or if the server you're
Dialogue: 0,0:02:15.69,0:02:16.83,Default,,0,0,0,,trying to reach happens to be
Dialogue: 0,0:02:16.83,0:02:17.30,Default,,0,0,0,,down.
Dialogue: 0,0:02:18.24,0:02:19.39,Default,,0,0,0,,Those are just a couple of
Dialogue: 0,0:02:19.39,0:02:19.95,Default,,0,0,0,,examples.
Dialogue: 0,0:02:21.15,0:02:22.84,Default,,0,0,0,,Background URLSession objects,
Dialogue: 0,0:02:22.84,0:02:24.51,Default,,0,0,0,,on the other hand, don't have
Dialogue: 0,0:02:24.51,0:02:25.66,Default,,0,0,0,,this immediate fetch or fail
Dialogue: 0,0:02:25.66,0:02:27.26,Default,,0,0,0,,behavior but are scheduled out
Dialogue: 0,0:02:27.26,0:02:28.98,Default,,0,0,0,,of process and continually
Dialogue: 0,0:02:28.98,0:02:30.10,Default,,0,0,0,,monitored for network
Dialogue: 0,0:02:30.35,0:02:31.63,Default,,0,0,0,,connectivity to the server.
Dialogue: 0,0:02:34.44,0:02:36.39,Default,,0,0,0,,There are more examples of a
Dialogue: 0,0:02:36.39,0:02:37.93,Default,,0,0,0,,URLSession task failing because
Dialogue: 0,0:02:37.93,0:02:38.88,Default,,0,0,0,,of bad connectivity.
Dialogue: 0,0:02:39.82,0:02:40.74,Default,,0,0,0,,You might have no Internet
Dialogue: 0,0:02:40.74,0:02:42.56,Default,,0,0,0,,connection, you might be in a
Dialogue: 0,0:02:42.61,0:02:43.67,Default,,0,0,0,,theatre with your device in
Dialogue: 0,0:02:43.67,0:02:45.06,Default,,0,0,0,,Airplane Mode or it should be in
Dialogue: 0,0:02:45.06,0:02:45.63,Default,,0,0,0,,Airplane Mode.
Dialogue: 0,0:02:46.76,0:02:47.78,Default,,0,0,0,,Perhaps you have a session
Dialogue: 0,0:02:47.78,0:02:49.20,Default,,0,0,0,,object where you've disallowed
Dialogue: 0,0:02:49.20,0:02:51.25,Default,,0,0,0,,cell usage but the user only has
Dialogue: 0,0:02:51.25,0:02:52.04,Default,,0,0,0,,cell connectivity.
Dialogue: 0,0:02:52.99,0:02:54.24,Default,,0,0,0,,Or the server might only be
Dialogue: 0,0:02:54.24,0:02:55.73,Default,,0,0,0,,accessible behind a VPN and the
Dialogue: 0,0:02:55.73,0:02:57.41,Default,,0,0,0,,admin recently changed VPN
Dialogue: 0,0:02:57.41,0:02:58.00,Default,,0,0,0,,access.
Dialogue: 0,0:03:01.21,0:03:02.69,Default,,0,0,0,,How do you as an app developer
Dialogue: 0,0:03:02.69,0:03:03.90,Default,,0,0,0,,deal with a network load that
Dialogue: 0,0:03:03.98,0:03:04.48,Default,,0,0,0,,fails?
Dialogue: 0,0:03:05.70,0:03:08.37,Default,,0,0,0,,In the past, we've advised you
Dialogue: 0,0:03:08.37,0:03:10.10,Default,,0,0,0,,to use the SCNetworkReachability
Dialogue: 0,0:03:10.10,0:03:11.58,Default,,0,0,0,,API to monitor when you might
Dialogue: 0,0:03:11.58,0:03:13.12,Default,,0,0,0,,have connectivity again to the
Dialogue: 0,0:03:13.18,0:03:13.57,Default,,0,0,0,,server.
Dialogue: 0,0:03:14.41,0:03:16.01,Default,,0,0,0,,Other approaches are polling
Dialogue: 0,0:03:16.01,0:03:17.86,Default,,0,0,0,,every set period of time or
Dialogue: 0,0:03:17.86,0:03:19.64,Default,,0,0,0,,depending on the user to tap or
Dialogue: 0,0:03:19.64,0:03:21.19,Default,,0,0,0,,drag to refresh the UI.
Dialogue: 0,0:03:22.25,0:03:23.79,Default,,0,0,0,,The problem is that these
Dialogue: 0,0:03:23.79,0:03:25.20,Default,,0,0,0,,approaches add complexity to
Dialogue: 0,0:03:25.20,0:03:26.65,Default,,0,0,0,,your apps and aren't always
Dialogue: 0,0:03:26.65,0:03:27.15,Default,,0,0,0,,effective.
Dialogue: 0,0:03:28.23,0:03:30.26,Default,,0,0,0,,SCNetworkReachability only tells
Dialogue: 0,0:03:30.26,0:03:31.61,Default,,0,0,0,,you that you might be able to
Dialogue: 0,0:03:31.61,0:03:32.94,Default,,0,0,0,,reach the server, not that you
Dialogue: 0,0:03:32.94,0:03:33.28,Default,,0,0,0,,will.
Dialogue: 0,0:03:34.26,0:03:35.62,Default,,0,0,0,,You, our developers, have been
Dialogue: 0,0:03:35.62,0:03:37.00,Default,,0,0,0,,asking for an easier solution.
Dialogue: 0,0:03:39.54,0:03:41.07,Default,,0,0,0,,Wouldn't it be easier to say,
Dialogue: 0,0:03:41.07,0:03:42.96,Default,,0,0,0,,then, "Please fetch me this
Dialogue: 0,0:03:42.96,0:03:44.75,Default,,0,0,0,,resource when the network is
Dialogue: 0,0:03:44.75,0:03:45.37,Default,,0,0,0,,available"?
Dialogue: 0,0:03:48.76,0:03:50.02,Default,,0,0,0,,We're happy to tell you about a
Dialogue: 0,0:03:50.02,0:03:51.13,Default,,0,0,0,,new feature that lets you do
Dialogue: 0,0:03:51.13,0:03:51.44,Default,,0,0,0,,this.
Dialogue: 0,0:03:51.89,0:03:53.40,Default,,0,0,0,,We call this the URLSession
Dialogue: 0,0:03:53.47,0:03:55.04,Default,,0,0,0,,Adaptable Connectivity API.
Dialogue: 0,0:03:56.25,0:03:56.49,Default,,0,0,0,,This --
Dialogue: 0,0:03:57.52,0:04:01.94,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:04:02.44,0:04:04.71,Default,,0,0,0,,This API is available now on all
Dialogue: 0,0:04:04.71,0:04:05.26,Default,,0,0,0,,platforms.
Dialogue: 0,0:04:07.48,0:04:09.63,Default,,0,0,0,,By opting into this API, you
Dialogue: 0,0:04:09.63,0:04:11.32,Default,,0,0,0,,tell URLSession that in the
Dialogue: 0,0:04:11.32,0:04:13.16,Default,,0,0,0,,event that the task would fail
Dialogue: 0,0:04:13.16,0:04:13.94,Default,,0,0,0,,because of a lack of
Dialogue: 0,0:04:13.94,0:04:15.75,Default,,0,0,0,,connectivity that it should wait
Dialogue: 0,0:04:15.75,0:04:17.18,Default,,0,0,0,,for a connection to the server
Dialogue: 0,0:04:17.18,0:04:18.42,Default,,0,0,0,,instead of failing.
Dialogue: 0,0:04:21.55,0:04:22.44,Default,,0,0,0,,How do you opt in?
Dialogue: 0,0:04:22.77,0:04:24.29,Default,,0,0,0,,There's a new boolean property
Dialogue: 0,0:04:24.29,0:04:26.06,Default,,0,0,0,,called waitsForConnectivity.
Dialogue: 0,0:04:26.83,0:04:28.30,Default,,0,0,0,,Set this to true, and then you
Dialogue: 0,0:04:28.30,0:04:29.25,Default,,0,0,0,,get the new behavior.
Dialogue: 0,0:04:30.23,0:04:31.75,Default,,0,0,0,,I'd like to repeat what this
Dialogue: 0,0:04:31.75,0:04:32.50,Default,,0,0,0,,property does.
Dialogue: 0,0:04:33.06,0:04:34.57,Default,,0,0,0,,You go from the default behavior
Dialogue: 0,0:04:34.57,0:04:36.47,Default,,0,0,0,,of load it now or fail now if I
Dialogue: 0,0:04:36.47,0:04:38.98,Default,,0,0,0,,can't connect to load it now,
Dialogue: 0,0:04:39.31,0:04:40.37,Default,,0,0,0,,but if I can't and would have
Dialogue: 0,0:04:40.37,0:04:42.21,Default,,0,0,0,,failed because of a lack of
Dialogue: 0,0:04:42.21,0:04:44.15,Default,,0,0,0,,connectivity, try again when I
Dialogue: 0,0:04:44.15,0:04:45.43,Default,,0,0,0,,get a real chance to talk to the
Dialogue: 0,0:04:45.43,0:04:45.82,Default,,0,0,0,,server.
Dialogue: 0,0:04:46.53,0:04:48.90,Default,,0,0,0,,The API also waits when it
Dialogue: 0,0:04:48.90,0:04:50.56,Default,,0,0,0,,encounters DNS failures as well
Dialogue: 0,0:04:50.69,0:04:52.43,Default,,0,0,0,,since one network's DNS service
Dialogue: 0,0:04:52.43,0:04:53.99,Default,,0,0,0,,might fail to resolve but
Dialogue: 0,0:04:53.99,0:04:55.95,Default,,0,0,0,,another one may not.
Dialogue: 0,0:04:56.58,0:04:59.05,Default,,0,0,0,,Please note that this boolean is
Dialogue: 0,0:04:59.05,0:05:00.78,Default,,0,0,0,,a no op for background sessions,
Dialogue: 0,0:05:00.78,0:05:02.92,Default,,0,0,0,,as background URLSession objects
Dialogue: 0,0:05:02.92,0:05:04.37,Default,,0,0,0,,get this behavior automatically.
Dialogue: 0,0:05:04.99,0:05:05.97,Default,,0,0,0,,We'll tell you later in this
Dialogue: 0,0:05:05.97,0:05:09.00,Default,,0,0,0,,hour more about the differences.
Dialogue: 0,0:05:11.02,0:05:12.53,Default,,0,0,0,,You may be wondering, "Can my
Dialogue: 0,0:05:12.65,0:05:14.15,Default,,0,0,0,,code get a notification if it's
Dialogue: 0,0:05:14.15,0:05:15.28,Default,,0,0,0,,in this waiting state?"
Dialogue: 0,0:05:15.38,0:05:18.56,Default,,0,0,0,,You might want to have the app
Dialogue: 0,0:05:18.56,0:05:19.84,Default,,0,0,0,,present other behavior while
Dialogue: 0,0:05:19.84,0:05:20.69,Default,,0,0,0,,it's waiting to connect.
Dialogue: 0,0:05:20.94,0:05:22.83,Default,,0,0,0,,For example, having an offline
Dialogue: 0,0:05:22.83,0:05:24.38,Default,,0,0,0,,browsing mode or a mode that
Dialogue: 0,0:05:24.38,0:05:25.95,Default,,0,0,0,,operates when the user is only
Dialogue: 0,0:05:25.95,0:05:26.66,Default,,0,0,0,,on cell.
Dialogue: 0,0:05:29.44,0:05:30.79,Default,,0,0,0,,If you would like to know when
Dialogue: 0,0:05:30.79,0:05:32.08,Default,,0,0,0,,your app is in this waiting
Dialogue: 0,0:05:32.08,0:05:33.77,Default,,0,0,0,,state, you can optionally
Dialogue: 0,0:05:33.77,0:05:35.25,Default,,0,0,0,,implement the URLSession
Dialogue: 0,0:05:35.29,0:05:37.18,Default,,0,0,0,,taskIsWaitingForConnectivity
Dialogue: 0,0:05:37.18,0:05:38.09,Default,,0,0,0,,delegate method.
Dialogue: 0,0:05:39.11,0:05:40.45,Default,,0,0,0,,Note that this delegate method
Dialogue: 0,0:05:40.45,0:05:42.78,Default,,0,0,0,,is only called if you've opted
Dialogue: 0,0:05:42.78,0:05:43.87,Default,,0,0,0,,into the waitsForConnectivity
Dialogue: 0,0:05:43.87,0:05:45.10,Default,,0,0,0,,property with a true value.
Dialogue: 0,0:05:45.81,0:05:47.45,Default,,0,0,0,,If you've done this, the
Dialogue: 0,0:05:47.45,0:05:48.64,Default,,0,0,0,,delegate method itself will be
Dialogue: 0,0:05:48.64,0:05:50.39,Default,,0,0,0,,called only one time or not at
Dialogue: 0,0:05:50.39,0:05:52.26,Default,,0,0,0,,all if the task never had to
Dialogue: 0,0:05:53.02,0:05:53.13,Default,,0,0,0,,wait.
Dialogue: 0,0:05:56.90,0:05:58.57,Default,,0,0,0,,We recommend that your apps
Dialogue: 0,0:05:58.71,0:05:59.73,Default,,0,0,0,,always opt into the
Dialogue: 0,0:05:59.73,0:06:01.05,Default,,0,0,0,,waitsForConnectivity property.
Dialogue: 0,0:06:01.82,0:06:03.31,Default,,0,0,0,,This is because even when you
Dialogue: 0,0:06:03.31,0:06:05.39,Default,,0,0,0,,opt in, the task will still try
Dialogue: 0,0:06:05.39,0:06:06.16,Default,,0,0,0,,to run immediately.
Dialogue: 0,0:06:06.70,0:06:08.11,Default,,0,0,0,,The task will only wait if it
Dialogue: 0,0:06:08.11,0:06:09.15,Default,,0,0,0,,can't connect to the server.
Dialogue: 0,0:06:09.99,0:06:11.15,Default,,0,0,0,,There are rare exceptions to
Dialogue: 0,0:06:11.15,0:06:12.13,Default,,0,0,0,,opting into the property,
Dialogue: 0,0:06:12.13,0:06:12.40,Default,,0,0,0,,though.
Dialogue: 0,0:06:13.13,0:06:14.37,Default,,0,0,0,,For example, if you had a
Dialogue: 0,0:06:14.37,0:06:15.80,Default,,0,0,0,,URLSession task whose purpose
Dialogue: 0,0:06:15.80,0:06:16.92,Default,,0,0,0,,was to buy stock at market
Dialogue: 0,0:06:16.92,0:06:18.52,Default,,0,0,0,,price, you'd want that to run
Dialogue: 0,0:06:18.52,0:06:20.48,Default,,0,0,0,,now or fail now and not wait
Dialogue: 0,0:06:20.48,0:06:22.75,Default,,0,0,0,,until you had an Internet
Dialogue: 0,0:06:23.07,0:06:23.58,Default,,0,0,0,,connection.
Dialogue: 0,0:06:24.56,0:06:26.66,Default,,0,0,0,,I'd also like to mention that
Dialogue: 0,0:06:26.66,0:06:27.38,Default,,0,0,0,,when you opt into
Dialogue: 0,0:06:27.38,0:06:29.24,Default,,0,0,0,,waitsForConnectivity, the
Dialogue: 0,0:06:29.24,0:06:30.80,Default,,0,0,0,,timeout interval for request
Dialogue: 0,0:06:31.09,0:06:33.19,Default,,0,0,0,,timer starts only after you've
Dialogue: 0,0:06:33.23,0:06:34.26,Default,,0,0,0,,connected to the server.
Dialogue: 0,0:06:35.07,0:06:36.76,Default,,0,0,0,,Timeout interval for resource,
Dialogue: 0,0:06:36.76,0:06:38.46,Default,,0,0,0,,however, is always respected.
Dialogue: 0,0:06:39.03,0:06:43.75,Default,,0,0,0,,Let's summarize how we would use
Dialogue: 0,0:06:43.75,0:06:45.33,Default,,0,0,0,,the API and then go through a
Dialogue: 0,0:06:45.33,0:06:45.98,Default,,0,0,0,,code example.
Dialogue: 0,0:06:47.33,0:06:48.96,Default,,0,0,0,,The main thing is to opt into
Dialogue: 0,0:06:48.96,0:06:49.86,Default,,0,0,0,,the waitsForConnectivity
Dialogue: 0,0:06:49.86,0:06:50.34,Default,,0,0,0,,property.
Dialogue: 0,0:06:50.96,0:06:52.29,Default,,0,0,0,,You would create and resume the
Dialogue: 0,0:06:52.29,0:06:53.65,Default,,0,0,0,,URLSessionTask as before.
Dialogue: 0,0:06:54.67,0:06:56.22,Default,,0,0,0,,If the device can't connect to
Dialogue: 0,0:06:56.22,0:06:57.95,Default,,0,0,0,,the server, we'd call a delegate
Dialogue: 0,0:06:57.95,0:06:59.66,Default,,0,0,0,,callback if you implemented it
Dialogue: 0,0:06:59.80,0:07:00.64,Default,,0,0,0,,and only once.
Dialogue: 0,0:07:02.12,0:07:03.76,Default,,0,0,0,,All other URLSession methods are
Dialogue: 0,0:07:03.76,0:07:05.44,Default,,0,0,0,,still called same as before.
Dialogue: 0,0:07:06.50,0:07:08.02,Default,,0,0,0,,Remember, though, that this API
Dialogue: 0,0:07:08.02,0:07:09.32,Default,,0,0,0,,only has an effect for
Dialogue: 0,0:07:09.32,0:07:10.66,Default,,0,0,0,,non-background sessions.
Dialogue: 0,0:07:14.64,0:07:15.83,Default,,0,0,0,,Let's go through a sample code.
Dialogue: 0,0:07:17.19,0:07:18.85,Default,,0,0,0,,First create a session
Dialogue: 0,0:07:18.85,0:07:20.76,Default,,0,0,0,,configuration object and make
Dialogue: 0,0:07:20.76,0:07:24.89,Default,,0,0,0,,one for default session type.
Dialogue: 0,0:07:25.09,0:07:25.76,Default,,0,0,0,,Opt into the
Dialogue: 0,0:07:25.76,0:07:27.06,Default,,0,0,0,,waitsForConnectivity property.
Dialogue: 0,0:07:29.54,0:07:31.29,Default,,0,0,0,,Create the session object and
Dialogue: 0,0:07:31.29,0:07:32.74,Default,,0,0,0,,set the URL you want to load.
Dialogue: 0,0:07:33.37,0:07:37.28,Default,,0,0,0,,Use the session object to create
Dialogue: 0,0:07:37.28,0:07:38.05,Default,,0,0,0,,a task object.
Dialogue: 0,0:07:41.98,0:07:43.61,Default,,0,0,0,,And finally, resume the task to
Dialogue: 0,0:07:43.61,0:07:44.00,Default,,0,0,0,,get it started.
Dialogue: 0,0:07:50.16,0:07:51.35,Default,,0,0,0,,Even with adaptable
Dialogue: 0,0:07:51.35,0:07:52.94,Default,,0,0,0,,connectivity, your request may
Dialogue: 0,0:07:52.94,0:07:54.40,Default,,0,0,0,,still fail for other reasons.
Dialogue: 0,0:07:55.13,0:07:56.74,Default,,0,0,0,,For example, you could connect
Dialogue: 0,0:07:56.74,0:07:58.85,Default,,0,0,0,,to the server, but a new data
Dialogue: 0,0:07:58.85,0:08:00.86,Default,,0,0,0,,center employee might unplug a
Dialogue: 0,0:08:00.86,0:08:02.02,Default,,0,0,0,,server, cause the network
Dialogue: 0,0:08:02.02,0:08:03.09,Default,,0,0,0,,connection to drop, and all your
Dialogue: 0,0:08:03.09,0:08:03.95,Default,,0,0,0,,apps on your phone might
Dialogue: 0,0:08:04.09,0:08:04.66,Default,,0,0,0,,disappear.
Dialogue: 0,0:08:06.67,0:08:08.42,Default,,0,0,0,,Or your device connects to the
Dialogue: 0,0:08:08.47,0:08:10.83,Default,,0,0,0,,server and sends an HTTP
Dialogue: 0,0:08:10.83,0:08:12.23,Default,,0,0,0,,request, but there's so much
Dialogue: 0,0:08:12.23,0:08:13.48,Default,,0,0,0,,traffic that the request times
Dialogue: 0,0:08:13.48,0:08:13.71,Default,,0,0,0,,out.
Dialogue: 0,0:08:14.93,0:08:16.45,Default,,0,0,0,,For situations like these, we'd
Dialogue: 0,0:08:16.45,0:08:17.54,Default,,0,0,0,,like you to consult online
Dialogue: 0,0:08:17.54,0:08:19.70,Default,,0,0,0,,resources that go into more
Dialogue: 0,0:08:19.70,0:08:20.78,Default,,0,0,0,,detail on what you can do.
Dialogue: 0,0:08:22.14,0:08:23.34,Default,,0,0,0,,Retrying network loads in a
Dialogue: 0,0:08:23.34,0:08:24.79,Default,,0,0,0,,tight loop, though, is almost
Dialogue: 0,0:08:24.79,0:08:25.75,Default,,0,0,0,,always a bad idea.
Dialogue: 0,0:08:25.88,0:08:30.88,Default,,0,0,0,,You asked for a better way to
Dialogue: 0,0:08:30.88,0:08:32.12,Default,,0,0,0,,load network resources.
Dialogue: 0,0:08:32.53,0:08:33.85,Default,,0,0,0,,Better than polling for network
Dialogue: 0,0:08:33.85,0:08:35.56,Default,,0,0,0,,connectivity to the server and
Dialogue: 0,0:08:35.56,0:08:36.78,Default,,0,0,0,,better than reachability API
Dialogue: 0,0:08:36.91,0:08:37.88,Default,,0,0,0,,that won't guarantee a
Dialogue: 0,0:08:37.88,0:08:38.91,Default,,0,0,0,,connection to the server.
Dialogue: 0,0:08:40.27,0:08:42.60,Default,,0,0,0,,Let URLSession do the work for
Dialogue: 0,0:08:42.60,0:08:42.84,Default,,0,0,0,,you.
Dialogue: 0,0:08:43.63,0:08:44.48,Default,,0,0,0,,Opt into the
Dialogue: 0,0:08:44.48,0:08:46.12,Default,,0,0,0,,waitsForConnectivity Adaptable
Dialogue: 0,0:08:46.12,0:08:47.06,Default,,0,0,0,,Connectivity API.
Dialogue: 0,0:08:47.69,0:08:49.75,Default,,0,0,0,,If you opt in, the request will
Dialogue: 0,0:08:49.75,0:08:51.52,Default,,0,0,0,,still run immediately with no
Dialogue: 0,0:08:51.52,0:08:53.79,Default,,0,0,0,,performance penalty and only
Dialogue: 0,0:08:53.79,0:08:55.06,Default,,0,0,0,,wait if you can't connect to the
Dialogue: 0,0:08:55.06,0:08:55.48,Default,,0,0,0,,server.
Dialogue: 0,0:08:56.37,0:08:57.76,Default,,0,0,0,,Once it can connect, your
Dialogue: 0,0:08:57.76,0:08:59.40,Default,,0,0,0,,URLSession task behaves just
Dialogue: 0,0:08:59.40,0:09:00.11,Default,,0,0,0,,like it did before.
Dialogue: 0,0:09:02.33,0:09:03.57,Default,,0,0,0,,Continuing our theme of what's
Dialogue: 0,0:09:03.57,0:09:05.13,Default,,0,0,0,,new, I'd like to pass the mic to
Dialogue: 0,0:09:05.13,0:09:06.34,Default,,0,0,0,,my colleague, Jeff Jenkins.
Dialogue: 0,0:09:07.52,0:09:13.02,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:09:13.52,0:09:14.17,Default,,0,0,0,,>> Jeff Jenkins: Thanks, Jeff.
Dialogue: 0,0:09:15.59,0:09:16.65,Default,,0,0,0,,Well, good afternoon.
Dialogue: 0,0:09:16.69,0:09:17.84,Default,,0,0,0,,Hope you guys are having a great
Dialogue: 0,0:09:17.84,0:09:18.74,Default,,0,0,0,,WWDC.
Dialogue: 0,0:09:18.74,0:09:20.56,Default,,0,0,0,,And I'm exciting to be here and
Dialogue: 0,0:09:20.56,0:09:21.97,Default,,0,0,0,,thrilled to talk to you a little
Dialogue: 0,0:09:21.97,0:09:24.30,Default,,0,0,0,,bit more about some enhancements
Dialogue: 0,0:09:24.30,0:09:27.95,Default,,0,0,0,,we've made to the URLSessionTask
Dialogue: 0,0:09:28.20,0:09:29.00,Default,,0,0,0,,API.
Dialogue: 0,0:09:32.11,0:09:33.61,Default,,0,0,0,,Now, first I want to spend a
Dialogue: 0,0:09:33.61,0:09:34.96,Default,,0,0,0,,little bit of time talking about
Dialogue: 0,0:09:34.96,0:09:37.06,Default,,0,0,0,,background URLSession.
Dialogue: 0,0:09:37.06,0:09:38.04,Default,,0,0,0,,We haven't talked a whole lot
Dialogue: 0,0:09:38.04,0:09:39.16,Default,,0,0,0,,about it, so let me give you a
Dialogue: 0,0:09:39.16,0:09:40.62,Default,,0,0,0,,little bit of background on
Dialogue: 0,0:09:40.62,0:09:40.85,Default,,0,0,0,,that.
Dialogue: 0,0:09:41.25,0:09:42.52,Default,,0,0,0,,The background session
Dialogue: 0,0:09:42.88,0:09:45.72,Default,,0,0,0,,URLSession API allows your
Dialogue: 0,0:09:45.72,0:09:47.09,Default,,0,0,0,,application to perform
Dialogue: 0,0:09:47.09,0:09:49.27,Default,,0,0,0,,networking even if your process,
Dialogue: 0,0:09:49.27,0:09:50.80,Default,,0,0,0,,your application isn't running.
Dialogue: 0,0:09:51.93,0:09:53.70,Default,,0,0,0,,We monitor the system
Dialogue: 0,0:09:53.94,0:09:57.29,Default,,0,0,0,,conditions, CPU, battery, all
Dialogue: 0,0:09:57.29,0:09:59.14,Default,,0,0,0,,sorts of things to really find
Dialogue: 0,0:09:59.14,0:10:01.15,Default,,0,0,0,,of right time to do your
Dialogue: 0,0:10:01.15,0:10:02.50,Default,,0,0,0,,networking tasks.
Dialogue: 0,0:10:03.19,0:10:05.87,Default,,0,0,0,,Now, of course, if you implement
Dialogue: 0,0:10:05.87,0:10:07.79,Default,,0,0,0,,various delegate methods, we're
Dialogue: 0,0:10:07.79,0:10:09.46,Default,,0,0,0,,going to wake up your app and
Dialogue: 0,0:10:09.46,0:10:10.95,Default,,0,0,0,,call those delegate callbacks so
Dialogue: 0,0:10:10.95,0:10:11.98,Default,,0,0,0,,that you can handle that
Dialogue: 0,0:10:11.98,0:10:12.82,Default,,0,0,0,,information.
Dialogue: 0,0:10:13.29,0:10:14.33,Default,,0,0,0,,And, of course, we're going to
Dialogue: 0,0:10:14.33,0:10:15.94,Default,,0,0,0,,make sure your app is running
Dialogue: 0,0:10:16.38,0:10:17.71,Default,,0,0,0,,when your task completes so that
Dialogue: 0,0:10:17.71,0:10:19.32,Default,,0,0,0,,you can then process that data.
Dialogue: 0,0:10:19.32,0:10:24.55,Default,,0,0,0,,Now, one of the great use cases
Dialogue: 0,0:10:24.70,0:10:26.56,Default,,0,0,0,,for background URLSession is
Dialogue: 0,0:10:26.56,0:10:28.11,Default,,0,0,0,,taking advantage of another
Dialogue: 0,0:10:28.52,0:10:30.19,Default,,0,0,0,,feature on the system, which is
Dialogue: 0,0:10:30.50,0:10:32.38,Default,,0,0,0,,background app refresh.
Dialogue: 0,0:10:33.18,0:10:34.72,Default,,0,0,0,,Now, what this really does is
Dialogue: 0,0:10:34.72,0:10:36.88,Default,,0,0,0,,allows your application to have
Dialogue: 0,0:10:36.88,0:10:38.77,Default,,0,0,0,,the most current, the freshest
Dialogue: 0,0:10:38.77,0:10:39.21,Default,,0,0,0,,data, right?
Dialogue: 0,0:10:39.55,0:10:41.17,Default,,0,0,0,,There's nothing more frustrating
Dialogue: 0,0:10:41.58,0:10:42.94,Default,,0,0,0,,than pulling your device out,
Dialogue: 0,0:10:43.14,0:10:44.46,Default,,0,0,0,,launching an app, and the first
Dialogue: 0,0:10:44.46,0:10:45.43,Default,,0,0,0,,thing you're greeted with is
Dialogue: 0,0:10:45.43,0:10:47.48,Default,,0,0,0,,some sort of spinner, right?
Dialogue: 0,0:10:47.48,0:10:48.33,Default,,0,0,0,,You're waiting for this
Dialogue: 0,0:10:48.33,0:10:50.04,Default,,0,0,0,,application to start pulling
Dialogue: 0,0:10:50.04,0:10:50.59,Default,,0,0,0,,down data.
Dialogue: 0,0:10:51.00,0:10:52.42,Default,,0,0,0,,You want that data right away.
Dialogue: 0,0:10:52.42,0:10:53.46,Default,,0,0,0,,You want to be able to get that
Dialogue: 0,0:10:53.46,0:10:55.12,Default,,0,0,0,,data to your user so your user
Dialogue: 0,0:10:55.47,0:10:57.30,Default,,0,0,0,,is excited and happy to use your
Dialogue: 0,0:10:57.30,0:10:57.57,Default,,0,0,0,,app.
Dialogue: 0,0:10:58.11,0:10:59.49,Default,,0,0,0,,Background app refresh is a way
Dialogue: 0,0:10:59.49,0:10:59.81,Default,,0,0,0,,to do this.
Dialogue: 0,0:10:59.81,0:11:01.32,Default,,0,0,0,,It's a way to tell the system
Dialogue: 0,0:11:01.76,0:11:03.29,Default,,0,0,0,,that, "Hey, in the future I want
Dialogue: 0,0:11:03.29,0:11:04.30,Default,,0,0,0,,to be able to be launched so
Dialogue: 0,0:11:04.30,0:11:05.89,Default,,0,0,0,,that I can refresh my data so I
Dialogue: 0,0:11:05.89,0:11:06.77,Default,,0,0,0,,have the most important
Dialogue: 0,0:11:06.77,0:11:08.05,Default,,0,0,0,,information," maybe stock
Dialogue: 0,0:11:08.05,0:11:09.76,Default,,0,0,0,,information, or weather
Dialogue: 0,0:11:09.84,0:11:11.40,Default,,0,0,0,,forecast, other important things
Dialogue: 0,0:11:11.40,0:11:12.36,Default,,0,0,0,,that your app does.
Dialogue: 0,0:11:13.17,0:11:14.00,Default,,0,0,0,,Now, this applies to
Dialogue: 0,0:11:14.00,0:11:16.57,Default,,0,0,0,,applications, as well as watchOS
Dialogue: 0,0:11:16.67,0:11:18.10,Default,,0,0,0,,complications.
Dialogue: 0,0:11:18.43,0:11:19.17,Default,,0,0,0,,And if you want to learn a
Dialogue: 0,0:11:19.17,0:11:20.26,Default,,0,0,0,,little bit more in depth about
Dialogue: 0,0:11:20.26,0:11:22.71,Default,,0,0,0,,background app refresh, you can
Dialogue: 0,0:11:22.71,0:11:26.26,Default,,0,0,0,,go back to 2013 WWDC, as well as
Dialogue: 0,0:11:26.26,0:11:29.00,Default,,0,0,0,,last year's 2016 WWDC and look
Dialogue: 0,0:11:29.00,0:11:30.14,Default,,0,0,0,,at these sessions for more
Dialogue: 0,0:11:30.14,0:11:30.82,Default,,0,0,0,,details.
Dialogue: 0,0:11:31.30,0:11:35.79,Default,,0,0,0,,So let's look at background app
Dialogue: 0,0:11:35.79,0:11:37.99,Default,,0,0,0,,refresh in action; what is it
Dialogue: 0,0:11:37.99,0:11:38.77,Default,,0,0,0,,really doing?
Dialogue: 0,0:11:39.50,0:11:41.25,Default,,0,0,0,,And to do that, we kind of need
Dialogue: 0,0:11:41.25,0:11:42.90,Default,,0,0,0,,to look at the state of your
Dialogue: 0,0:11:43.18,0:11:44.03,Default,,0,0,0,,application.
Dialogue: 0,0:11:44.37,0:11:45.88,Default,,0,0,0,,We're interested in three states
Dialogue: 0,0:11:45.88,0:11:47.48,Default,,0,0,0,,here: A running state, suspended
Dialogue: 0,0:11:47.48,0:11:49.63,Default,,0,0,0,,state, or a background state.
Dialogue: 0,0:11:50.67,0:11:52.79,Default,,0,0,0,,Now, with your app running,
Dialogue: 0,0:11:52.79,0:11:53.62,Default,,0,0,0,,you're going to opt into
Dialogue: 0,0:11:53.62,0:11:54.94,Default,,0,0,0,,background app refresh.
Dialogue: 0,0:11:54.94,0:11:55.76,Default,,0,0,0,,You're going to say, "In the
Dialogue: 0,0:11:55.76,0:11:57.82,Default,,0,0,0,,future, run my app, make sure my
Dialogue: 0,0:11:57.82,0:11:58.94,Default,,0,0,0,,app runs so that I can get the
Dialogue: 0,0:11:58.94,0:12:00.06,Default,,0,0,0,,latest information."
Dialogue: 0,0:12:00.56,0:12:02.22,Default,,0,0,0,,And then your process could be
Dialogue: 0,0:12:02.22,0:12:02.85,Default,,0,0,0,,suspended.
Dialogue: 0,0:12:02.85,0:12:04.85,Default,,0,0,0,,And in the future your process
Dialogue: 0,0:12:04.85,0:12:07.04,Default,,0,0,0,,is now running, your app is now
Dialogue: 0,0:12:07.61,0:12:09.49,Default,,0,0,0,,going to be able to ask for new
Dialogue: 0,0:12:09.49,0:12:09.80,Default,,0,0,0,,data.
Dialogue: 0,0:12:09.80,0:12:12.40,Default,,0,0,0,,And like good developers, this
Dialogue: 0,0:12:12.40,0:12:14.08,Default,,0,0,0,,app is using URLSession API.
Dialogue: 0,0:12:14.25,0:12:15.87,Default,,0,0,0,,In fact, it uses a background
Dialogue: 0,0:12:15.87,0:12:16.60,Default,,0,0,0,,URLSession.
Dialogue: 0,0:12:16.60,0:12:19.05,Default,,0,0,0,,It creates a URLSession task and
Dialogue: 0,0:12:19.05,0:12:21.45,Default,,0,0,0,,schedules this task to run and
Dialogue: 0,0:12:21.45,0:12:22.46,Default,,0,0,0,,grab the data that your
Dialogue: 0,0:12:22.46,0:12:23.58,Default,,0,0,0,,application needs.
Dialogue: 0,0:12:25.40,0:12:28.63,Default,,0,0,0,,Now, your process could go away
Dialogue: 0,0:12:28.63,0:12:30.23,Default,,0,0,0,,at this point, but then at some
Dialogue: 0,0:12:30.23,0:12:32.13,Default,,0,0,0,,point URLSession is going to run
Dialogue: 0,0:12:32.13,0:12:33.22,Default,,0,0,0,,your task and it's going to run
Dialogue: 0,0:12:33.22,0:12:34.64,Default,,0,0,0,,it to completion hopefully if
Dialogue: 0,0:12:34.64,0:12:35.57,Default,,0,0,0,,everything goes well.
Dialogue: 0,0:12:36.05,0:12:36.73,Default,,0,0,0,,And you're going to get the
Dialogue: 0,0:12:36.73,0:12:37.14,Default,,0,0,0,,data.
Dialogue: 0,0:12:37.14,0:12:38.56,Default,,0,0,0,,So we're going to background
Dialogue: 0,0:12:38.56,0:12:40.41,Default,,0,0,0,,launch your application and
Dialogue: 0,0:12:40.41,0:12:41.70,Default,,0,0,0,,allow you to process that
Dialogue: 0,0:12:41.70,0:12:43.94,Default,,0,0,0,,completed task and process that
Dialogue: 0,0:12:43.94,0:12:45.46,Default,,0,0,0,,data that we've fetched for you.
Dialogue: 0,0:12:45.83,0:12:48.86,Default,,0,0,0,,And then at some point the user
Dialogue: 0,0:12:48.86,0:12:49.89,Default,,0,0,0,,is going to launch your app,
Dialogue: 0,0:12:49.89,0:12:50.83,Default,,0,0,0,,it's going to come foreground,
Dialogue: 0,0:12:50.83,0:12:51.75,Default,,0,0,0,,and boom, they've got the
Dialogue: 0,0:12:51.75,0:12:53.02,Default,,0,0,0,,freshest data there.
Dialogue: 0,0:12:53.44,0:12:54.23,Default,,0,0,0,,So this is great.
Dialogue: 0,0:12:54.61,0:12:56.76,Default,,0,0,0,,But we looked at this flow and
Dialogue: 0,0:12:56.76,0:12:57.94,Default,,0,0,0,,said, "Hmm, maybe there's
Dialogue: 0,0:12:57.94,0:13:00.24,Default,,0,0,0,,something we can do to help our
Dialogue: 0,0:13:00.24,0:13:02.12,Default,,0,0,0,,developers improve their
Dialogue: 0,0:13:02.12,0:13:04.39,Default,,0,0,0,,applications on our platforms."
Dialogue: 0,0:13:05.03,0:13:06.76,Default,,0,0,0,,And we think we can do something
Dialogue: 0,0:13:06.76,0:13:07.24,Default,,0,0,0,,for you.
Dialogue: 0,0:13:08.60,0:13:10.75,Default,,0,0,0,,The first problem that we want
Dialogue: 0,0:13:10.75,0:13:13.01,Default,,0,0,0,,to solve is we noticed there's
Dialogue: 0,0:13:13.01,0:13:14.84,Default,,0,0,0,,an extra background launch that
Dialogue: 0,0:13:14.84,0:13:16.19,Default,,0,0,0,,had to happen just for you to
Dialogue: 0,0:13:16.19,0:13:18.17,Default,,0,0,0,,create the URLSession task.
Dialogue: 0,0:13:19.03,0:13:20.47,Default,,0,0,0,,And as we all know, anytime your
Dialogue: 0,0:13:20.47,0:13:21.67,Default,,0,0,0,,process is launched, what does
Dialogue: 0,0:13:21.67,0:13:21.98,Default,,0,0,0,,that do?
Dialogue: 0,0:13:21.98,0:13:23.70,Default,,0,0,0,,It impacts battery life,
Dialogue: 0,0:13:24.12,0:13:25.46,Default,,0,0,0,,requires CPU burden.
Dialogue: 0,0:13:25.46,0:13:27.31,Default,,0,0,0,,So that's not necessarily great
Dialogue: 0,0:13:27.31,0:13:28.32,Default,,0,0,0,,for the device if we're doing
Dialogue: 0,0:13:28.37,0:13:30.23,Default,,0,0,0,,extraneous work, and we really
Dialogue: 0,0:13:30.23,0:13:31.85,Default,,0,0,0,,don't need to be doing that.
Dialogue: 0,0:13:32.94,0:13:34.37,Default,,0,0,0,,The other problem we'd like to
Dialogue: 0,0:13:34.37,0:13:36.15,Default,,0,0,0,,solve are stale network
Dialogue: 0,0:13:36.15,0:13:37.07,Default,,0,0,0,,requests, right?
Dialogue: 0,0:13:37.07,0:13:39.00,Default,,0,0,0,,You're asking URLSession to do
Dialogue: 0,0:13:39.00,0:13:39.45,Default,,0,0,0,,work.
Dialogue: 0,0:13:39.45,0:13:40.91,Default,,0,0,0,,And at some point in the future,
Dialogue: 0,0:13:41.40,0:13:42.69,Default,,0,0,0,,that work is going to complete.
Dialogue: 0,0:13:43.13,0:13:44.77,Default,,0,0,0,,Well, what happens between when
Dialogue: 0,0:13:44.77,0:13:46.04,Default,,0,0,0,,you ask for the work to be done
Dialogue: 0,0:13:46.04,0:13:47.36,Default,,0,0,0,,and when it actually got done?
Dialogue: 0,0:13:47.36,0:13:48.80,Default,,0,0,0,,Maybe there was some change in
Dialogue: 0,0:13:48.80,0:13:50.80,Default,,0,0,0,,context and that original
Dialogue: 0,0:13:50.80,0:13:52.05,Default,,0,0,0,,request doesn't make sense
Dialogue: 0,0:13:52.05,0:13:52.58,Default,,0,0,0,,anymore.
Dialogue: 0,0:13:53.22,0:13:53.96,Default,,0,0,0,,So we need to give you an
Dialogue: 0,0:13:53.96,0:13:55.98,Default,,0,0,0,,opportunity to really, if
Dialogue: 0,0:13:56.03,0:13:57.44,Default,,0,0,0,,there's a context change, let us
Dialogue: 0,0:13:57.44,0:13:59.43,Default,,0,0,0,,know about that and get rid of
Dialogue: 0,0:13:59.43,0:14:01.23,Default,,0,0,0,,these stale network requests.
Dialogue: 0,0:14:01.23,0:14:02.15,Default,,0,0,0,,Because there's nothing worse
Dialogue: 0,0:14:02.15,0:14:03.41,Default,,0,0,0,,than getting data and going, "I
Dialogue: 0,0:14:03.41,0:14:04.38,Default,,0,0,0,,can't do anything with it," and
Dialogue: 0,0:14:04.38,0:14:04.94,Default,,0,0,0,,throw it away.
Dialogue: 0,0:14:05.63,0:14:08.36,Default,,0,0,0,,And the last problem we think we
Dialogue: 0,0:14:08.36,0:14:10.89,Default,,0,0,0,,could help you with is helping
Dialogue: 0,0:14:10.89,0:14:13.56,Default,,0,0,0,,us know how to best schedule
Dialogue: 0,0:14:13.84,0:14:15.60,Default,,0,0,0,,your URLSession tasks.
Dialogue: 0,0:14:16.13,0:14:17.91,Default,,0,0,0,,When is the most optimal, best
Dialogue: 0,0:14:17.91,0:14:19.24,Default,,0,0,0,,time in the system to be able to
Dialogue: 0,0:14:19.24,0:14:20.61,Default,,0,0,0,,run your task so that we can get
Dialogue: 0,0:14:20.61,0:14:21.69,Default,,0,0,0,,your data in the most efficient
Dialogue: 0,0:14:21.69,0:14:23.99,Default,,0,0,0,,way for you to display that so
Dialogue: 0,0:14:23.99,0:14:25.38,Default,,0,0,0,,that your users are excited and
Dialogue: 0,0:14:25.38,0:14:26.35,Default,,0,0,0,,delighted by that data?
Dialogue: 0,0:14:26.35,0:14:29.04,Default,,0,0,0,,Let's look at what we did.
Dialogue: 0,0:14:30.54,0:14:32.21,Default,,0,0,0,,We're introducing the
Dialogue: 0,0:14:32.21,0:14:34.34,Default,,0,0,0,,URLSessionTask scheduling API.
Dialogue: 0,0:14:35.41,0:14:37.22,Default,,0,0,0,,Now, this is available across
Dialogue: 0,0:14:37.22,0:14:38.16,Default,,0,0,0,,all of our platforms.
Dialogue: 0,0:14:38.16,0:14:39.96,Default,,0,0,0,,It's available in the beta
Dialogue: 0,0:14:39.96,0:14:41.30,Default,,0,0,0,,builds that you have received
Dialogue: 0,0:14:41.30,0:14:41.92,Default,,0,0,0,,here at WWDC.
Dialogue: 0,0:14:41.92,0:14:44.57,Default,,0,0,0,,And we encourage you to take a
Dialogue: 0,0:14:44.57,0:14:45.66,Default,,0,0,0,,deep look at this.
Dialogue: 0,0:14:46.52,0:14:49.72,Default,,0,0,0,,Now, what we've done first is we
Dialogue: 0,0:14:49.72,0:14:51.35,Default,,0,0,0,,provided a new property.
Dialogue: 0,0:14:51.56,0:14:52.88,Default,,0,0,0,,This is a property on
Dialogue: 0,0:14:52.88,0:14:54.51,Default,,0,0,0,,URLSessionTask object.
Dialogue: 0,0:14:55.07,0:14:57.46,Default,,0,0,0,,It is called earliestBeginDate.
Dialogue: 0,0:14:58.37,0:14:59.41,Default,,0,0,0,,And what you're going to do here
Dialogue: 0,0:14:59.41,0:15:01.12,Default,,0,0,0,,is provide a date to us in the
Dialogue: 0,0:15:01.12,0:15:03.34,Default,,0,0,0,,future when you want your task
Dialogue: 0,0:15:03.41,0:15:05.59,Default,,0,0,0,,to be eligible for running.
Dialogue: 0,0:15:05.90,0:15:08.27,Default,,0,0,0,,I use that word eligible because
Dialogue: 0,0:15:08.27,0:15:09.02,Default,,0,0,0,,it's important.
Dialogue: 0,0:15:09.02,0:15:10.18,Default,,0,0,0,,It doesn't mean that this is the
Dialogue: 0,0:15:10.18,0:15:11.58,Default,,0,0,0,,point in time when your task
Dialogue: 0,0:15:11.69,0:15:13.49,Default,,0,0,0,,will run, it will do networking;
Dialogue: 0,0:15:13.86,0:15:15.59,Default,,0,0,0,,it's just telling the system, "I
Dialogue: 0,0:15:15.59,0:15:16.71,Default,,0,0,0,,would like my task to be
Dialogue: 0,0:15:16.77,0:15:18.49,Default,,0,0,0,,eligible so that it can run."
Dialogue: 0,0:15:18.80,0:15:20.65,Default,,0,0,0,,And we're still bound by system
Dialogue: 0,0:15:20.65,0:15:23.05,Default,,0,0,0,,policies as to when we can make
Dialogue: 0,0:15:23.05,0:15:25.26,Default,,0,0,0,,the networking happen for this
Dialogue: 0,0:15:25.26,0:15:25.82,Default,,0,0,0,,task.
Dialogue: 0,0:15:26.90,0:15:28.55,Default,,0,0,0,,It's only applicable to
Dialogue: 0,0:15:28.69,0:15:31.33,Default,,0,0,0,,background URLSessions and tasks
Dialogue: 0,0:15:31.33,0:15:33.17,Default,,0,0,0,,built off of background
Dialogue: 0,0:15:33.17,0:15:33.88,Default,,0,0,0,,URLSession.
Dialogue: 0,0:15:34.41,0:15:37.90,Default,,0,0,0,,Let's take a look at how this
Dialogue: 0,0:15:37.95,0:15:39.63,Default,,0,0,0,,property in conjunction with
Dialogue: 0,0:15:39.67,0:15:41.59,Default,,0,0,0,,other existing properties really
Dialogue: 0,0:15:41.59,0:15:43.45,Default,,0,0,0,,allows you to do some fine-grain
Dialogue: 0,0:15:43.45,0:15:44.05,Default,,0,0,0,,scheduling.
Dialogue: 0,0:15:44.61,0:15:46.36,Default,,0,0,0,,So you'll create a
Dialogue: 0,0:15:46.36,0:15:47.78,Default,,0,0,0,,URLSessionTask and, of course,
Dialogue: 0,0:15:47.78,0:15:49.34,Default,,0,0,0,,you'll call resume on it so that
Dialogue: 0,0:15:49.34,0:15:50.80,Default,,0,0,0,,we know that this task can now
Dialogue: 0,0:15:50.80,0:15:53.46,Default,,0,0,0,,be put into the queue so that
Dialogue: 0,0:15:53.46,0:15:54.57,Default,,0,0,0,,work can happen.
Dialogue: 0,0:15:55.21,0:15:57.40,Default,,0,0,0,,You'll -- and at this point the
Dialogue: 0,0:15:57.81,0:16:00.76,Default,,0,0,0,,task will be in a waiting state.
Dialogue: 0,0:16:00.76,0:16:01.49,Default,,0,0,0,,We're waiting for the
Dialogue: 0,0:16:01.57,0:16:03.53,Default,,0,0,0,,earliestBeginDate to happen.
Dialogue: 0,0:16:04.14,0:16:06.51,Default,,0,0,0,,And as soon as that is hit, that
Dialogue: 0,0:16:06.51,0:16:07.84,Default,,0,0,0,,task becomes eligible for
Dialogue: 0,0:16:07.84,0:16:08.12,Default,,0,0,0,,running.
Dialogue: 0,0:16:09.16,0:16:10.52,Default,,0,0,0,,Now, you can use the existing
Dialogue: 0,0:16:10.71,0:16:13.39,Default,,0,0,0,,timeoutIntervalForResource to
Dialogue: 0,0:16:13.39,0:16:15.55,Default,,0,0,0,,really control how long your app
Dialogue: 0,0:16:15.55,0:16:17.33,Default,,0,0,0,,is willing to wait for at that
Dialogue: 0,0:16:17.33,0:16:19.51,Default,,0,0,0,,resource to get loaded, right?
Dialogue: 0,0:16:19.51,0:16:21.60,Default,,0,0,0,,You might set some amount of
Dialogue: 0,0:16:21.60,0:16:23.37,Default,,0,0,0,,time to say, "After this point
Dialogue: 0,0:16:23.53,0:16:25.47,Default,,0,0,0,,in time, this resource isn't
Dialogue: 0,0:16:25.47,0:16:26.71,Default,,0,0,0,,interesting to me anymore."
Dialogue: 0,0:16:27.14,0:16:28.93,Default,,0,0,0,,And that interval of time covers
Dialogue: 0,0:16:29.16,0:16:32.43,Default,,0,0,0,,from resume to when that timeout
Dialogue: 0,0:16:32.43,0:16:34.25,Default,,0,0,0,,happens based on the value you
Dialogue: 0,0:16:34.25,0:16:34.86,Default,,0,0,0,,place in
Dialogue: 0,0:16:34.86,0:16:36.40,Default,,0,0,0,,timeoutIntervalForResource.
Dialogue: 0,0:16:36.72,0:16:41.53,Default,,0,0,0,,Now, I want to go back to the
Dialogue: 0,0:16:41.53,0:16:43.74,Default,,0,0,0,,original background app refresh
Dialogue: 0,0:16:43.74,0:16:45.28,Default,,0,0,0,,workflow that we looked at
Dialogue: 0,0:16:45.28,0:16:45.75,Default,,0,0,0,,earlier.
Dialogue: 0,0:16:46.55,0:16:47.32,Default,,0,0,0,,Right? We noticed there was a
Dialogue: 0,0:16:47.32,0:16:49.68,Default,,0,0,0,,couple of background launches
Dialogue: 0,0:16:49.68,0:16:50.37,Default,,0,0,0,,that occurred.
Dialogue: 0,0:16:50.74,0:16:54.07,Default,,0,0,0,,But with this new API we're able
Dialogue: 0,0:16:54.07,0:16:55.43,Default,,0,0,0,,to get rid of one of those.
Dialogue: 0,0:16:55.43,0:16:56.34,Default,,0,0,0,,So the way that your app will
Dialogue: 0,0:16:56.34,0:16:58.40,Default,,0,0,0,,work is while your running,
Dialogue: 0,0:16:58.47,0:16:59.15,Default,,0,0,0,,you're going to create a
Dialogue: 0,0:16:59.15,0:17:01.62,Default,,0,0,0,,URLSessionTask; you'll opt into
Dialogue: 0,0:17:01.91,0:17:03.61,Default,,0,0,0,,our new scheduling API by
Dialogue: 0,0:17:03.61,0:17:05.38,Default,,0,0,0,,setting an earliestBeginDate;
Dialogue: 0,0:17:05.94,0:17:07.02,Default,,0,0,0,,then your process can go to
Dialogue: 0,0:17:07.02,0:17:07.42,Default,,0,0,0,,sleep.
Dialogue: 0,0:17:07.72,0:17:08.78,Default,,0,0,0,,We're going to complete the work
Dialogue: 0,0:17:08.78,0:17:09.37,Default,,0,0,0,,for you.
Dialogue: 0,0:17:09.96,0:17:11.41,Default,,0,0,0,,And when that work is available,
Dialogue: 0,0:17:11.41,0:17:12.73,Default,,0,0,0,,we're going to background launch
Dialogue: 0,0:17:12.73,0:17:14.20,Default,,0,0,0,,you that one time and allow you
Dialogue: 0,0:17:14.20,0:17:16.14,Default,,0,0,0,,to process the resulting data.
Dialogue: 0,0:17:16.14,0:17:18.49,Default,,0,0,0,,And then when the user brings
Dialogue: 0,0:17:18.49,0:17:19.56,Default,,0,0,0,,your app to the foreground,
Dialogue: 0,0:17:19.56,0:17:21.22,Default,,0,0,0,,boom, it's got the freshest,
Dialogue: 0,0:17:21.42,0:17:22.42,Default,,0,0,0,,most current data.
Dialogue: 0,0:17:23.10,0:17:24.63,Default,,0,0,0,,And we've been able to solve
Dialogue: 0,0:17:24.63,0:17:26.11,Default,,0,0,0,,that one problem of that
Dialogue: 0,0:17:26.11,0:17:27.80,Default,,0,0,0,,additional background app
Dialogue: 0,0:17:27.80,0:17:28.26,Default,,0,0,0,,launch.
Dialogue: 0,0:17:28.26,0:17:29.72,Default,,0,0,0,,And so it's better performing on
Dialogue: 0,0:17:29.72,0:17:30.92,Default,,0,0,0,,the system, and we think that's
Dialogue: 0,0:17:30.92,0:17:31.35,Default,,0,0,0,,great.
Dialogue: 0,0:17:31.85,0:17:35.02,Default,,0,0,0,,So that's problem number one
Dialogue: 0,0:17:35.31,0:17:35.77,Default,,0,0,0,,solved.
Dialogue: 0,0:17:35.77,0:17:36.74,Default,,0,0,0,,Let's look at problem number
Dialogue: 0,0:17:36.74,0:17:40.66,Default,,0,0,0,,two, the stale network fetches.
Dialogue: 0,0:17:42.30,0:17:43.30,Default,,0,0,0,,We want to give you an
Dialogue: 0,0:17:43.30,0:17:45.32,Default,,0,0,0,,opportunity to alter future
Dialogue: 0,0:17:45.32,0:17:45.94,Default,,0,0,0,,requests.
Dialogue: 0,0:17:45.94,0:17:47.05,Default,,0,0,0,,So you might have given us a
Dialogue: 0,0:17:47.05,0:17:49.32,Default,,0,0,0,,request, but the context might
Dialogue: 0,0:17:49.32,0:17:49.92,Default,,0,0,0,,change.
Dialogue: 0,0:17:50.96,0:17:53.86,Default,,0,0,0,,We've introduced a new delegate
Dialogue: 0,0:17:53.86,0:17:55.33,Default,,0,0,0,,callback on a
Dialogue: 0,0:17:55.33,0:17:57.36,Default,,0,0,0,,URLSessionTaskDelegate titled
Dialogue: 0,0:17:57.80,0:18:00.14,Default,,0,0,0,,willBeginDelayedRequest.
Dialogue: 0,0:18:01.41,0:18:03.60,Default,,0,0,0,,With this delegate, you'll be
Dialogue: 0,0:18:03.60,0:18:05.51,Default,,0,0,0,,able to be called at the moment
Dialogue: 0,0:18:05.51,0:18:07.14,Default,,0,0,0,,when your task is about to start
Dialogue: 0,0:18:07.14,0:18:07.74,Default,,0,0,0,,networking.
Dialogue: 0,0:18:08.23,0:18:10.42,Default,,0,0,0,,So it is you've told this that
Dialogue: 0,0:18:10.42,0:18:12.35,Default,,0,0,0,,the task is eligible and the
Dialogue: 0,0:18:12.35,0:18:14.07,Default,,0,0,0,,system now has decided yes, this
Dialogue: 0,0:18:14.07,0:18:15.03,Default,,0,0,0,,is the right time to do the
Dialogue: 0,0:18:15.03,0:18:15.69,Default,,0,0,0,,networking.
Dialogue: 0,0:18:16.12,0:18:17.10,Default,,0,0,0,,We're going to call this
Dialogue: 0,0:18:17.10,0:18:18.22,Default,,0,0,0,,delegate method, if you
Dialogue: 0,0:18:18.22,0:18:20.08,Default,,0,0,0,,implement it, and allow you to
Dialogue: 0,0:18:20.08,0:18:22.44,Default,,0,0,0,,make some decisions about this
Dialogue: 0,0:18:22.44,0:18:23.04,Default,,0,0,0,,task.
Dialogue: 0,0:18:24.99,0:18:26.26,Default,,0,0,0,,Now, this will only be called
Dialogue: 0,0:18:26.26,0:18:27.97,Default,,0,0,0,,one, if you implement it; also,
Dialogue: 0,0:18:27.97,0:18:29.55,Default,,0,0,0,,if you opt into the scheduling
Dialogue: 0,0:18:29.55,0:18:30.74,Default,,0,0,0,,API by setting an
Dialogue: 0,0:18:30.74,0:18:32.05,Default,,0,0,0,,earliestBeginDate.
Dialogue: 0,0:18:32.37,0:18:33.71,Default,,0,0,0,,And, again, this is only
Dialogue: 0,0:18:33.71,0:18:35.12,Default,,0,0,0,,available on background
Dialogue: 0,0:18:35.12,0:18:36.03,Default,,0,0,0,,URLSessions.
Dialogue: 0,0:18:36.57,0:18:39.53,Default,,0,0,0,,And as I mentioned, this is an
Dialogue: 0,0:18:39.53,0:18:40.56,Default,,0,0,0,,optional delegate.
Dialogue: 0,0:18:41.00,0:18:42.81,Default,,0,0,0,,And I want to take a second here
Dialogue: 0,0:18:42.81,0:18:44.02,Default,,0,0,0,,to have you really think about
Dialogue: 0,0:18:44.05,0:18:45.34,Default,,0,0,0,,this because it's important,
Dialogue: 0,0:18:46.04,0:18:47.14,Default,,0,0,0,,this delegate method.
Dialogue: 0,0:18:47.14,0:18:48.66,Default,,0,0,0,,As with all delegate methods,
Dialogue: 0,0:18:48.66,0:18:49.79,Default,,0,0,0,,they're all opt into.
Dialogue: 0,0:18:50.25,0:18:52.78,Default,,0,0,0,,But this one will cause some
Dialogue: 0,0:18:52.85,0:18:53.93,Default,,0,0,0,,interesting side effect that
Dialogue: 0,0:18:53.93,0:18:54.99,Default,,0,0,0,,I'll show you in a minute.
Dialogue: 0,0:18:55.61,0:18:56.59,Default,,0,0,0,,You really need to think about,
Dialogue: 0,0:18:56.68,0:18:58.36,Default,,0,0,0,,"Can my application determine
Dialogue: 0,0:18:58.36,0:19:00.46,Default,,0,0,0,,context, the viability of a
Dialogue: 0,0:19:00.46,0:19:02.40,Default,,0,0,0,,request in the future?"
Dialogue: 0,0:19:02.91,0:19:06.99,Default,,0,0,0,,Now, there's a completion
Dialogue: 0,0:19:06.99,0:19:08.73,Default,,0,0,0,,handler that's passed to this
Dialogue: 0,0:19:08.73,0:19:09.55,Default,,0,0,0,,delegate method.
Dialogue: 0,0:19:10.26,0:19:10.99,Default,,0,0,0,,And you need to give a
Dialogue: 0,0:19:10.99,0:19:12.52,Default,,0,0,0,,disposition to URLSession.
Dialogue: 0,0:19:12.52,0:19:14.46,Default,,0,0,0,,You need to tell us does the
Dialogue: 0,0:19:14.46,0:19:16.28,Default,,0,0,0,,original request, does it still
Dialogue: 0,0:19:16.28,0:19:17.57,Default,,0,0,0,,make sense?
Dialogue: 0,0:19:17.83,0:19:18.76,Default,,0,0,0,,Go ahead and proceed.
Dialogue: 0,0:19:19.23,0:19:21.34,Default,,0,0,0,,Or maybe the context has changed
Dialogue: 0,0:19:21.34,0:19:22.83,Default,,0,0,0,,enough and you need to make some
Dialogue: 0,0:19:22.83,0:19:24.40,Default,,0,0,0,,modifications, maybe a different
Dialogue: 0,0:19:24.40,0:19:26.60,Default,,0,0,0,,URL or maybe a header value's
Dialogue: 0,0:19:26.60,0:19:27.91,Default,,0,0,0,,different and you want to go
Dialogue: 0,0:19:27.91,0:19:29.33,Default,,0,0,0,,ahead and modify that request at
Dialogue: 0,0:19:29.33,0:19:30.74,Default,,0,0,0,,this point in time right before
Dialogue: 0,0:19:30.74,0:19:31.80,Default,,0,0,0,,the networking happens.
Dialogue: 0,0:19:32.23,0:19:33.57,Default,,0,0,0,,Or you might make the decision
Dialogue: 0,0:19:34.09,0:19:35.76,Default,,0,0,0,,this request is just useless at
Dialogue: 0,0:19:35.79,0:19:37.08,Default,,0,0,0,,this point, cancel.
Dialogue: 0,0:19:37.40,0:19:42.60,Default,,0,0,0,,We don't want to do stale
Dialogue: 0,0:19:42.60,0:19:42.84,Default,,0,0,0,,requests.
Dialogue: 0,0:19:42.96,0:19:44.74,Default,,0,0,0,,So now if we go back to this
Dialogue: 0,0:19:44.74,0:19:46.93,Default,,0,0,0,,workflow and we go back to my
Dialogue: 0,0:19:46.93,0:19:48.27,Default,,0,0,0,,comment about really thinking
Dialogue: 0,0:19:48.27,0:19:50.03,Default,,0,0,0,,about this delegate method, you
Dialogue: 0,0:19:50.03,0:19:51.93,Default,,0,0,0,,will see that we're kind of back
Dialogue: 0,0:19:51.93,0:19:53.60,Default,,0,0,0,,to that original workflow where
Dialogue: 0,0:19:54.05,0:19:55.78,Default,,0,0,0,,there's two background launches
Dialogue: 0,0:19:55.78,0:19:59.40,Default,,0,0,0,,in order to satisfy this URL
Dialogue: 0,0:19:59.40,0:19:59.98,Default,,0,0,0,,task.
Dialogue: 0,0:20:00.86,0:20:02.36,Default,,0,0,0,,Right? But we have to stop and
Dialogue: 0,0:20:02.36,0:20:03.20,Default,,0,0,0,,think about that.
Dialogue: 0,0:20:03.48,0:20:04.70,Default,,0,0,0,,What is more expensive,
Dialogue: 0,0:20:05.06,0:20:07.05,Default,,0,0,0,,performing a stale network load
Dialogue: 0,0:20:07.05,0:20:09.76,Default,,0,0,0,,or a mere application background
Dialogue: 0,0:20:09.76,0:20:10.19,Default,,0,0,0,,launch?
Dialogue: 0,0:20:10.61,0:20:12.90,Default,,0,0,0,,It is way more expensive to the
Dialogue: 0,0:20:12.90,0:20:14.52,Default,,0,0,0,,system to do stale loads, get
Dialogue: 0,0:20:14.52,0:20:16.02,Default,,0,0,0,,all this data, and then decide I
Dialogue: 0,0:20:16.02,0:20:17.53,Default,,0,0,0,,don't need it and pitch it.
Dialogue: 0,0:20:18.29,0:20:19.97,Default,,0,0,0,,Okay? So we want you to really
Dialogue: 0,0:20:20.02,0:20:21.54,Default,,0,0,0,,think about this new delegate
Dialogue: 0,0:20:21.54,0:20:22.63,Default,,0,0,0,,method and whether your
Dialogue: 0,0:20:22.63,0:20:25.00,Default,,0,0,0,,application has the ability to
Dialogue: 0,0:20:25.00,0:20:27.07,Default,,0,0,0,,really understand the viability
Dialogue: 0,0:20:27.07,0:20:28.84,Default,,0,0,0,,of your requests in the future.
Dialogue: 0,0:20:29.32,0:20:30.44,Default,,0,0,0,,Hopefully that make sense to
Dialogue: 0,0:20:30.44,0:20:30.59,Default,,0,0,0,,you.
Dialogue: 0,0:20:31.15,0:20:35.99,Default,,0,0,0,,Now, the third problem we want
Dialogue: 0,0:20:35.99,0:20:38.70,Default,,0,0,0,,to solve is how do we schedule
Dialogue: 0,0:20:39.15,0:20:41.81,Default,,0,0,0,,your request in a most optimal,
Dialogue: 0,0:20:41.81,0:20:43.12,Default,,0,0,0,,most intelligent way in our
Dialogue: 0,0:20:43.12,0:20:43.62,Default,,0,0,0,,system?
Dialogue: 0,0:20:43.96,0:20:45.23,Default,,0,0,0,,There's some information that in
Dialogue: 0,0:20:45.23,0:20:46.43,Default,,0,0,0,,URLSession we just don't know
Dialogue: 0,0:20:46.43,0:20:46.78,Default,,0,0,0,,about.
Dialogue: 0,0:20:47.26,0:20:48.50,Default,,0,0,0,,So we're providing a little bit
Dialogue: 0,0:20:48.50,0:20:50.27,Default,,0,0,0,,of change to our API to allow
Dialogue: 0,0:20:50.27,0:20:51.67,Default,,0,0,0,,you to explain to us some
Dialogue: 0,0:20:51.67,0:20:53.68,Default,,0,0,0,,information about your requests
Dialogue: 0,0:20:54.06,0:20:56.08,Default,,0,0,0,,and also about your responses.
Dialogue: 0,0:20:56.60,0:20:58.02,Default,,0,0,0,,We're giving you two properties,
Dialogue: 0,0:20:58.12,0:20:59.95,Default,,0,0,0,,the first one is countOfBytes
Dialogue: 0,0:21:00.02,0:21:02.61,Default,,0,0,0,,ClientExpectsToSend, and the
Dialogue: 0,0:21:02.61,0:21:03.85,Default,,0,0,0,,second one is countOfBytes
Dialogue: 0,0:21:03.85,0:21:05.50,Default,,0,0,0,,ClientExpectsToReceive.
Dialogue: 0,0:21:06.18,0:21:07.69,Default,,0,0,0,,We think you know more about
Dialogue: 0,0:21:07.69,0:21:08.56,Default,,0,0,0,,your requests.
Dialogue: 0,0:21:08.56,0:21:10.70,Default,,0,0,0,,Maybe you have a stream body
Dialogue: 0,0:21:10.70,0:21:11.70,Default,,0,0,0,,that you want to attach to a
Dialogue: 0,0:21:11.70,0:21:12.95,Default,,0,0,0,,request, we don't know about
Dialogue: 0,0:21:12.95,0:21:13.21,Default,,0,0,0,,that.
Dialogue: 0,0:21:13.21,0:21:14.46,Default,,0,0,0,,You probably know the size of
Dialogue: 0,0:21:14.46,0:21:14.75,Default,,0,0,0,,that.
Dialogue: 0,0:21:15.39,0:21:16.93,Default,,0,0,0,,We don't know about your servers
Dialogue: 0,0:21:17.18,0:21:18.46,Default,,0,0,0,,and the size of data your
Dialogue: 0,0:21:18.46,0:21:19.55,Default,,0,0,0,,servers' shipping back.
Dialogue: 0,0:21:19.93,0:21:21.49,Default,,0,0,0,,We believe you have some insight
Dialogue: 0,0:21:21.49,0:21:21.88,Default,,0,0,0,,to that.
Dialogue: 0,0:21:21.88,0:21:23.76,Default,,0,0,0,,And that will give us hints as
Dialogue: 0,0:21:23.76,0:21:25.88,Default,,0,0,0,,how we can in a most optimal,
Dialogue: 0,0:21:25.88,0:21:27.63,Default,,0,0,0,,intelligent way schedule your
Dialogue: 0,0:21:27.66,0:21:28.35,Default,,0,0,0,,tasks.
Dialogue: 0,0:21:28.83,0:21:30.63,Default,,0,0,0,,If you don't know, well, then
Dialogue: 0,0:21:30.63,0:21:31.75,Default,,0,0,0,,you can always specify
Dialogue: 0,0:21:31.75,0:21:34.07,Default,,0,0,0,,NSURLSessionTransferSizeUnknown.
Dialogue: 0,0:21:36.29,0:21:37.40,Default,,0,0,0,,So that solves the third
Dialogue: 0,0:21:37.40,0:21:37.70,Default,,0,0,0,,problem.
Dialogue: 0,0:21:37.70,0:21:38.84,Default,,0,0,0,,Let's take a look at how this
Dialogue: 0,0:21:38.84,0:21:40.01,Default,,0,0,0,,new API works in code.
Dialogue: 0,0:21:40.01,0:21:41.51,Default,,0,0,0,,It's very easy to use.
Dialogue: 0,0:21:42.22,0:21:43.45,Default,,0,0,0,,First thing we're going to do is
Dialogue: 0,0:21:43.45,0:21:46.09,Default,,0,0,0,,create a URLSession background
Dialogue: 0,0:21:46.09,0:21:46.94,Default,,0,0,0,,configuration.
Dialogue: 0,0:21:46.94,0:21:48.63,Default,,0,0,0,,We're then going to create a
Dialogue: 0,0:21:48.63,0:21:50.37,Default,,0,0,0,,session based on that
Dialogue: 0,0:21:50.83,0:21:51.77,Default,,0,0,0,,configuration.
Dialogue: 0,0:21:52.23,0:21:54.93,Default,,0,0,0,,Once we have that, we're going
Dialogue: 0,0:21:54.93,0:21:57.26,Default,,0,0,0,,to now generate a URLRequest,
Dialogue: 0,0:21:57.64,0:21:59.50,Default,,0,0,0,,specify the URL we want to go
Dialogue: 0,0:21:59.50,0:22:02.30,Default,,0,0,0,,to, maybe set a header value,
Dialogue: 0,0:22:02.61,0:22:03.75,Default,,0,0,0,,something that makes sense for
Dialogue: 0,0:22:03.75,0:22:04.35,Default,,0,0,0,,your task.
Dialogue: 0,0:22:04.35,0:22:06.00,Default,,0,0,0,,Again, this is just an example.
Dialogue: 0,0:22:07.59,0:22:08.48,Default,,0,0,0,,And now we're going to create a
Dialogue: 0,0:22:08.48,0:22:09.87,Default,,0,0,0,,task that encapsulates that
Dialogue: 0,0:22:09.87,0:22:11.92,Default,,0,0,0,,request on that session.
Dialogue: 0,0:22:12.57,0:22:13.99,Default,,0,0,0,,And we're going to opt into the
Dialogue: 0,0:22:13.99,0:22:16.32,Default,,0,0,0,,new scheduling API by setting
Dialogue: 0,0:22:16.32,0:22:17.99,Default,,0,0,0,,the earliestBeginDate property
Dialogue: 0,0:22:18.27,0:22:19.12,Default,,0,0,0,,and give us a date.
Dialogue: 0,0:22:19.12,0:22:20.98,Default,,0,0,0,,In this example we say two hours
Dialogue: 0,0:22:20.98,0:22:22.89,Default,,0,0,0,,from now I want this task to be
Dialogue: 0,0:22:22.94,0:22:24.34,Default,,0,0,0,,eligible to be run.
Dialogue: 0,0:22:25.94,0:22:26.92,Default,,0,0,0,,And I'm also going to give some
Dialogue: 0,0:22:26.92,0:22:28.29,Default,,0,0,0,,hints to URLSession and say,
Dialogue: 0,0:22:28.59,0:22:30.13,Default,,0,0,0,,"This is a small request,
Dialogue: 0,0:22:30.13,0:22:31.65,Default,,0,0,0,,there's no body, I've just set
Dialogue: 0,0:22:31.65,0:22:33.90,Default,,0,0,0,,one header, maybe 80 bytes."
Dialogue: 0,0:22:34.22,0:22:36.22,Default,,0,0,0,,And then my server probably is
Dialogue: 0,0:22:36.22,0:22:38.02,Default,,0,0,0,,going to send about a 2K
Dialogue: 0,0:22:38.02,0:22:39.21,Default,,0,0,0,,response to this.
Dialogue: 0,0:22:40.41,0:22:42.03,Default,,0,0,0,,And with all URLSession tasks,
Dialogue: 0,0:22:42.22,0:22:43.38,Default,,0,0,0,,make sure you call resume.
Dialogue: 0,0:22:44.00,0:22:46.41,Default,,0,0,0,,Now, how does the new delegate
Dialogue: 0,0:22:46.41,0:22:46.84,Default,,0,0,0,,work?
Dialogue: 0,0:22:47.15,0:22:50.10,Default,,0,0,0,,Well, we decided I know context.
Dialogue: 0,0:22:50.19,0:22:51.64,Default,,0,0,0,,I can make some intelligent
Dialogue: 0,0:22:51.64,0:22:53.85,Default,,0,0,0,,decisions about my networking
Dialogue: 0,0:22:53.85,0:22:56.01,Default,,0,0,0,,tasks in the future.
Dialogue: 0,0:22:56.55,0:22:57.46,Default,,0,0,0,,So I've implemented
Dialogue: 0,0:22:57.46,0:22:58.90,Default,,0,0,0,,willBeginDelayedRequest.
Dialogue: 0,0:22:59.05,0:23:01.95,Default,,0,0,0,,So in our example here what I've
Dialogue: 0,0:23:01.95,0:23:03.92,Default,,0,0,0,,decided to do is to modify the
Dialogue: 0,0:23:03.92,0:23:04.51,Default,,0,0,0,,request.
Dialogue: 0,0:23:04.51,0:23:05.68,Default,,0,0,0,,I'm going to take the original
Dialogue: 0,0:23:05.68,0:23:06.93,Default,,0,0,0,,request, create a new
Dialogue: 0,0:23:06.93,0:23:08.03,Default,,0,0,0,,updatedRequest.
Dialogue: 0,0:23:08.03,0:23:09.53,Default,,0,0,0,,I'm going to maybe change a
Dialogue: 0,0:23:09.53,0:23:10.90,Default,,0,0,0,,value in the header that makes
Dialogue: 0,0:23:10.90,0:23:13.44,Default,,0,0,0,,more sense now that this task is
Dialogue: 0,0:23:13.44,0:23:14.57,Default,,0,0,0,,actually going to do some
Dialogue: 0,0:23:14.57,0:23:15.27,Default,,0,0,0,,networking.
Dialogue: 0,0:23:15.56,0:23:17.51,Default,,0,0,0,,Time has passed, I have new
Dialogue: 0,0:23:17.51,0:23:18.21,Default,,0,0,0,,information.
Dialogue: 0,0:23:18.53,0:23:20.04,Default,,0,0,0,,I put that information on that
Dialogue: 0,0:23:20.04,0:23:20.43,Default,,0,0,0,,task.
Dialogue: 0,0:23:20.83,0:23:21.96,Default,,0,0,0,,And then I'm going to call the
Dialogue: 0,0:23:21.96,0:23:24.63,Default,,0,0,0,,completionHandler and use a
Dialogue: 0,0:23:24.63,0:23:26.90,Default,,0,0,0,,disposition of useNewRequest and
Dialogue: 0,0:23:26.90,0:23:28.25,Default,,0,0,0,,passed it that new request.
Dialogue: 0,0:23:28.25,0:23:29.08,Default,,0,0,0,,If you take a look at our header
Dialogue: 0,0:23:29.08,0:23:30.27,Default,,0,0,0,,file, you can see other
Dialogue: 0,0:23:30.27,0:23:33.17,Default,,0,0,0,,dispositions available to you in
Dialogue: 0,0:23:33.17,0:23:36.67,Default,,0,0,0,,this completionHandler call.
Dialogue: 0,0:23:36.82,0:23:39.14,Default,,0,0,0,,So let me recap the scheduling
Dialogue: 0,0:23:39.26,0:23:40.76,Default,,0,0,0,,API that we're introducing here.
Dialogue: 0,0:23:41.21,0:23:42.70,Default,,0,0,0,,Background URLSession is an
Dialogue: 0,0:23:42.82,0:23:45.15,Default,,0,0,0,,awesome API for doing networking
Dialogue: 0,0:23:45.15,0:23:46.28,Default,,0,0,0,,that allows your application to
Dialogue: 0,0:23:46.28,0:23:47.50,Default,,0,0,0,,not even be running and have
Dialogue: 0,0:23:47.50,0:23:49.03,Default,,0,0,0,,this networking happen for you.
Dialogue: 0,0:23:50.09,0:23:51.67,Default,,0,0,0,,Our new scheduling API will
Dialogue: 0,0:23:51.72,0:23:54.16,Default,,0,0,0,,allow you to delay your requests
Dialogue: 0,0:23:54.41,0:23:57.23,Default,,0,0,0,,so that they can, you know,
Dialogue: 0,0:23:57.23,0:23:59.36,Default,,0,0,0,,obtain and pull down the
Dialogue: 0,0:23:59.36,0:24:00.79,Default,,0,0,0,,freshest information for your
Dialogue: 0,0:24:00.79,0:24:01.57,Default,,0,0,0,,application.
Dialogue: 0,0:24:02.19,0:24:03.43,Default,,0,0,0,,And it's really we give you an
Dialogue: 0,0:24:03.43,0:24:04.77,Default,,0,0,0,,opportunity to alter those
Dialogue: 0,0:24:04.77,0:24:06.46,Default,,0,0,0,,things based on the context and
Dialogue: 0,0:24:06.46,0:24:08.00,Default,,0,0,0,,the time at when the networking
Dialogue: 0,0:24:08.00,0:24:10.38,Default,,0,0,0,,is actually going to happen.
Dialogue: 0,0:24:10.38,0:24:11.86,Default,,0,0,0,,The other part of this API
Dialogue: 0,0:24:12.04,0:24:13.62,Default,,0,0,0,,change is to allow you to give
Dialogue: 0,0:24:13.62,0:24:14.92,Default,,0,0,0,,hints to us so that we can be
Dialogue: 0,0:24:14.92,0:24:16.84,Default,,0,0,0,,super intelligent and make these
Dialogue: 0,0:24:16.84,0:24:18.45,Default,,0,0,0,,tasks run at the most optimal
Dialogue: 0,0:24:18.45,0:24:20.71,Default,,0,0,0,,time on these devices.
Dialogue: 0,0:24:21.29,0:24:24.94,Default,,0,0,0,,Now, I'd like to turn the time
Dialogue: 0,0:24:24.94,0:24:26.56,Default,,0,0,0,,over to Stuart Cheshire, an
Dialogue: 0,0:24:26.56,0:24:28.09,Default,,0,0,0,,Apple distinguished engineer.
Dialogue: 0,0:24:28.09,0:24:29.47,Default,,0,0,0,,And thank you for your time.
Dialogue: 0,0:24:30.52,0:24:33.83,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:24:34.33,0:24:36.72,Default,,0,0,0,,>> Stuart Cheshire: Thank you,
Dialogue: 0,0:24:38.58,0:24:38.70,Default,,0,0,0,,Jeff.
Dialogue: 0,0:24:38.90,0:24:40.64,Default,,0,0,0,,Now we're going to talk about
Dialogue: 0,0:24:41.07,0:24:43.01,Default,,0,0,0,,enhancements in URLSession.
Dialogue: 0,0:24:43.46,0:24:45.16,Default,,0,0,0,,We have four things to cover,
Dialogue: 0,0:24:45.47,0:24:46.28,Default,,0,0,0,,let's move through them.
Dialogue: 0,0:24:48.87,0:24:49.88,Default,,0,0,0,,Often you want to show a
Dialogue: 0,0:24:49.88,0:24:51.76,Default,,0,0,0,,progress bar to indicate to the
Dialogue: 0,0:24:51.76,0:24:53.77,Default,,0,0,0,,users how progress is being
Dialogue: 0,0:24:53.77,0:24:54.03,Default,,0,0,0,,made.
Dialogue: 0,0:24:54.68,0:24:56.68,Default,,0,0,0,,And right now this is a little
Dialogue: 0,0:24:56.68,0:24:57.46,Default,,0,0,0,,bit cumbersome.
Dialogue: 0,0:24:57.94,0:24:59.75,Default,,0,0,0,,There are four variables that
Dialogue: 0,0:24:59.75,0:25:01.00,Default,,0,0,0,,you need to monitor with
Dialogue: 0,0:25:01.00,0:25:02.24,Default,,0,0,0,,Key-value Observing.
Dialogue: 0,0:25:02.78,0:25:04.58,Default,,0,0,0,,And sometimes the
Dialogue: 0,0:25:04.58,0:25:07.43,Default,,0,0,0,,countOfBytesExpectedToReceive or
Dialogue: 0,0:25:07.43,0:25:09.00,Default,,0,0,0,,Send is not always available.
Dialogue: 0,0:25:12.27,0:25:15.94,Default,,0,0,0,,The good news now in iOS 11 is
Dialogue: 0,0:25:16.20,0:25:18.39,Default,,0,0,0,,URLSessionTask has adopted the
Dialogue: 0,0:25:18.46,0:25:20.12,Default,,0,0,0,,ProgressReporting protocol.
Dialogue: 0,0:25:21.23,0:25:23.47,Default,,0,0,0,,You can get a progress object
Dialogue: 0,0:25:23.90,0:25:28.07,Default,,0,0,0,,from the URLSessionTask, and
Dialogue: 0,0:25:28.61,0:25:30.88,Default,,0,0,0,,that gives you a variable
Dialogue: 0,0:25:30.88,0:25:32.97,Default,,0,0,0,,fractionCompleted, which is a
Dialogue: 0,0:25:32.97,0:25:35.21,Default,,0,0,0,,number in the range zero to one.
Dialogue: 0,0:25:35.66,0:25:37.68,Default,,0,0,0,,You can also provide strings to
Dialogue: 0,0:25:37.68,0:25:40.06,Default,,0,0,0,,give more detail about what the
Dialogue: 0,0:25:40.06,0:25:40.78,Default,,0,0,0,,operation is.
Dialogue: 0,0:25:41.40,0:25:42.82,Default,,0,0,0,,You can attach that progress
Dialogue: 0,0:25:42.82,0:25:46.19,Default,,0,0,0,,object to a UIProgressView or an
Dialogue: 0,0:25:46.22,0:25:48.54,Default,,0,0,0,,NSProgressIndicator to get an
Dialogue: 0,0:25:48.54,0:25:50.00,Default,,0,0,0,,automatic progress bar.
Dialogue: 0,0:25:50.42,0:25:52.89,Default,,0,0,0,,You can also combine multiple
Dialogue: 0,0:25:52.89,0:25:55.02,Default,,0,0,0,,progress objects into a parent
Dialogue: 0,0:25:55.02,0:25:56.83,Default,,0,0,0,,progress object when you're
Dialogue: 0,0:25:56.83,0:25:58.73,Default,,0,0,0,,performing multiple tasks, such
Dialogue: 0,0:25:58.73,0:26:00.31,Default,,0,0,0,,as downloading a file,
Dialogue: 0,0:26:00.60,0:26:02.54,Default,,0,0,0,,decompressing a file, and then
Dialogue: 0,0:26:02.54,0:26:03.49,Default,,0,0,0,,handling the data.
Dialogue: 0,0:26:04.56,0:26:07.25,Default,,0,0,0,,So that makes your progress
Dialogue: 0,0:26:07.25,0:26:09.13,Default,,0,0,0,,reporting much simpler.
Dialogue: 0,0:26:10.68,0:26:13.17,Default,,0,0,0,,The binding between a
Dialogue: 0,0:26:13.17,0:26:15.62,Default,,0,0,0,,URLSessionTask and the progress
Dialogue: 0,0:26:15.62,0:26:17.04,Default,,0,0,0,,object is bidirectional.
Dialogue: 0,0:26:17.66,0:26:19.87,Default,,0,0,0,,So if you suspend a
Dialogue: 0,0:26:19.87,0:26:21.67,Default,,0,0,0,,URLSessionTask, that is the same
Dialogue: 0,0:26:21.67,0:26:23.94,Default,,0,0,0,,as pausing the progress object.
Dialogue: 0,0:26:23.94,0:26:25.10,Default,,0,0,0,,If you pause the progress
Dialogue: 0,0:26:25.10,0:26:26.62,Default,,0,0,0,,object, that is the same as
Dialogue: 0,0:26:26.62,0:26:28.73,Default,,0,0,0,,suspending the URLSessionTask.
Dialogue: 0,0:26:29.34,0:26:34.66,Default,,0,0,0,,We now have support for the
Dialogue: 0,0:26:34.66,0:26:36.76,Default,,0,0,0,,Brotli compression algorithm.
Dialogue: 0,0:26:37.70,0:26:40.58,Default,,0,0,0,,In tests this compresses about
Dialogue: 0,0:26:40.58,0:26:43.00,Default,,0,0,0,,15% better than gzip, which
Dialogue: 0,0:26:43.00,0:26:45.70,Default,,0,0,0,,results in faster network
Dialogue: 0,0:26:45.70,0:26:46.31,Default,,0,0,0,,access.
Dialogue: 0,0:26:48.01,0:26:49.38,Default,,0,0,0,,Like other new compression
Dialogue: 0,0:26:49.38,0:26:51.71,Default,,0,0,0,,schemes, this is only used over
Dialogue: 0,0:26:51.71,0:26:53.62,Default,,0,0,0,,encrypted connections to avoid
Dialogue: 0,0:26:53.62,0:26:55.50,Default,,0,0,0,,confusing middle boxes that
Dialogue: 0,0:26:55.50,0:26:56.62,Default,,0,0,0,,might not recognize this
Dialogue: 0,0:26:56.62,0:26:57.17,Default,,0,0,0,,compression.
Dialogue: 0,0:26:59.90,0:27:03.47,Default,,0,0,0,,Because Safari uses URLSession,
Dialogue: 0,0:27:03.47,0:27:05.10,Default,,0,0,0,,that's also means Safari gets
Dialogue: 0,0:27:05.10,0:27:07.03,Default,,0,0,0,,the benefit of this new Brotli
Dialogue: 0,0:27:07.03,0:27:08.11,Default,,0,0,0,,compression algorithm.
Dialogue: 0,0:27:08.53,0:27:10.90,Default,,0,0,0,,And many major websites have
Dialogue: 0,0:27:10.90,0:27:12.57,Default,,0,0,0,,already announced support for
Dialogue: 0,0:27:12.57,0:27:14.01,Default,,0,0,0,,Brotli in their web service.
Dialogue: 0,0:27:14.01,0:27:17.78,Default,,0,0,0,,Our next topic is the Public
Dialogue: 0,0:27:17.78,0:27:18.59,Default,,0,0,0,,Suffix List.
Dialogue: 0,0:27:19.22,0:27:20.62,Default,,0,0,0,,The Public Suffix List is
Dialogue: 0,0:27:20.62,0:27:22.85,Default,,0,0,0,,sometimes called the effective
Dialogue: 0,0:27:22.85,0:27:24.08,Default,,0,0,0,,top-level domain list.
Dialogue: 0,0:27:24.84,0:27:27.95,Default,,0,0,0,,And this is important for
Dialogue: 0,0:27:27.95,0:27:29.78,Default,,0,0,0,,determining where administrative
Dialogue: 0,0:27:29.78,0:27:31.57,Default,,0,0,0,,boundaries occur in the
Dialogue: 0,0:27:31.57,0:27:32.76,Default,,0,0,0,,namespace of the Internet.
Dialogue: 0,0:27:34.04,0:27:35.57,Default,,0,0,0,,One thing we don't want to allow
Dialogue: 0,0:27:36.03,0:27:40.13,Default,,0,0,0,,is for a website to set a cookie
Dialogue: 0,0:27:40.13,0:27:42.10,Default,,0,0,0,,on the com domain, which is then
Dialogue: 0,0:27:42.10,0:27:44.01,Default,,0,0,0,,accessible to any other dot com
Dialogue: 0,0:27:44.01,0:27:44.49,Default,,0,0,0,,company.
Dialogue: 0,0:27:45.07,0:27:47.92,Default,,0,0,0,,So you might be tempted to make
Dialogue: 0,0:27:47.92,0:27:50.49,Default,,0,0,0,,a rule that you can't set
Dialogue: 0,0:27:50.66,0:27:52.58,Default,,0,0,0,,cookies on top level domains,
Dialogue: 0,0:27:52.64,0:27:54.55,Default,,0,0,0,,only on second level and lower.
Dialogue: 0,0:27:55.15,0:27:56.93,Default,,0,0,0,,But domains are named
Dialogue: 0,0:27:56.93,0:27:58.42,Default,,0,0,0,,differently in different parts
Dialogue: 0,0:27:58.42,0:27:59.01,Default,,0,0,0,,of the world.
Dialogue: 0,0:28:00.09,0:28:03.28,Default,,0,0,0,,In America, Apple.com and
Dialogue: 0,0:28:03.28,0:28:04.89,Default,,0,0,0,,FileMaker.com are different
Dialogue: 0,0:28:04.89,0:28:05.40,Default,,0,0,0,,companies.
Dialogue: 0,0:28:06.14,0:28:08.24,Default,,0,0,0,,But in Australia many, many
Dialogue: 0,0:28:08.24,0:28:10.53,Default,,0,0,0,,companies are under com.au, and
Dialogue: 0,0:28:10.75,0:28:11.81,Default,,0,0,0,,that doesn't make them all the
Dialogue: 0,0:28:11.81,0:28:12.49,Default,,0,0,0,,same company.
Dialogue: 0,0:28:12.79,0:28:15.20,Default,,0,0,0,,So the Public Suffix List is a
Dialogue: 0,0:28:15.20,0:28:17.71,Default,,0,0,0,,file of rules and patterns that
Dialogue: 0,0:28:17.71,0:28:20.73,Default,,0,0,0,,tells software how to judge
Dialogue: 0,0:28:20.82,0:28:22.40,Default,,0,0,0,,where administrative boundaries
Dialogue: 0,0:28:22.44,0:28:23.23,Default,,0,0,0,,occur.
Dialogue: 0,0:28:24.08,0:28:28.40,Default,,0,0,0,,This is used for partitioning
Dialogue: 0,0:28:28.40,0:28:32.88,Default,,0,0,0,,cookies, and it's used by the
Dialogue: 0,0:28:32.88,0:28:34.30,Default,,0,0,0,,URLSession APIs.
Dialogue: 0,0:28:34.38,0:28:36.05,Default,,0,0,0,,And if you use the
Dialogue: 0,0:28:36.05,0:28:37.88,Default,,0,0,0,,HTTPCookieStorage APIs directly,
Dialogue: 0,0:28:38.04,0:28:39.21,Default,,0,0,0,,it's supported there, too.
Dialogue: 0,0:28:40.35,0:28:41.51,Default,,0,0,0,,We used to update this in
Dialogue: 0,0:28:41.51,0:28:43.58,Default,,0,0,0,,software updates, but now with
Dialogue: 0,0:28:43.62,0:28:46.11,Default,,0,0,0,,the more rapid progress in
Dialogue: 0,0:28:46.11,0:28:47.63,Default,,0,0,0,,creating top level domains,
Dialogue: 0,0:28:48.07,0:28:49.80,Default,,0,0,0,,we've changed to doing this over
Dialogue: 0,0:28:49.80,0:28:50.35,Default,,0,0,0,,the air.
Dialogue: 0,0:28:50.61,0:28:52.05,Default,,0,0,0,,We could push a new list every
Dialogue: 0,0:28:52.05,0:28:56.48,Default,,0,0,0,,two weeks if we wanted to.
Dialogue: 0,0:28:57.42,0:29:01.64,Default,,0,0,0,,URLSessionStreamTask is the API
Dialogue: 0,0:29:01.73,0:29:03.51,Default,,0,0,0,,you would use if you just want a
Dialogue: 0,0:29:03.51,0:29:04.15,Default,,0,0,0,,byte stream.
Dialogue: 0,0:29:04.44,0:29:06.90,Default,,0,0,0,,If you're not doing HTTP Style
Dialogue: 0,0:29:06.90,0:29:08.54,Default,,0,0,0,,Gets but say you want to write a
Dialogue: 0,0:29:08.54,0:29:09.20,Default,,0,0,0,,mail client,
Dialogue: 0,0:29:09.60,0:29:12.68,Default,,0,0,0,,URLSessionStreamTask gives you a
Dialogue: 0,0:29:12.68,0:29:13.63,Default,,0,0,0,,simple byte stream.
Dialogue: 0,0:29:14.77,0:29:16.65,Default,,0,0,0,,It supports upgrading to TLS
Dialogue: 0,0:29:16.65,0:29:18.03,Default,,0,0,0,,with the STARTTLS option.
Dialogue: 0,0:29:18.28,0:29:21.29,Default,,0,0,0,,If you have existing code that
Dialogue: 0,0:29:21.42,0:29:22.87,Default,,0,0,0,,is written using the old
Dialogue: 0,0:29:22.87,0:29:25.53,Default,,0,0,0,,NSInputStream and NSOutputStream
Dialogue: 0,0:29:25.53,0:29:27.80,Default,,0,0,0,,APIs, you can extract those
Dialogue: 0,0:29:27.80,0:29:29.16,Default,,0,0,0,,objects from a
Dialogue: 0,0:29:29.24,0:29:32.02,Default,,0,0,0,,URLSessionStreamTask to use your
Dialogue: 0,0:29:32.02,0:29:32.57,Default,,0,0,0,,old code.
Dialogue: 0,0:29:32.89,0:29:34.02,Default,,0,0,0,,But for any new code you're
Dialogue: 0,0:29:34.02,0:29:36.01,Default,,0,0,0,,writing, we strongly recommend
Dialogue: 0,0:29:36.07,0:29:38.25,Default,,0,0,0,,that you use the new native
Dialogue: 0,0:29:38.53,0:29:40.68,Default,,0,0,0,,URLSessionStreamTask APIs.
Dialogue: 0,0:29:41.49,0:29:42.84,Default,,0,0,0,,We announced this a couple of
Dialogue: 0,0:29:42.84,0:29:46.12,Default,,0,0,0,,years ago at WWDC 2015.
Dialogue: 0,0:29:46.60,0:29:49.34,Default,,0,0,0,,What we have new for you now is
Dialogue: 0,0:29:49.40,0:29:50.84,Default,,0,0,0,,automatic navigation of
Dialogue: 0,0:29:50.84,0:29:52.45,Default,,0,0,0,,authenticating proxies.
Dialogue: 0,0:29:52.67,0:29:53.78,Default,,0,0,0,,If the proxy requires
Dialogue: 0,0:29:53.78,0:29:56.34,Default,,0,0,0,,credentials, then we will
Dialogue: 0,0:29:56.34,0:29:57.89,Default,,0,0,0,,automatically extract those from
Dialogue: 0,0:29:57.89,0:29:59.11,Default,,0,0,0,,the key chain or promptly the
Dialogue: 0,0:29:59.11,0:30:01.33,Default,,0,0,0,,user on your behalf.
Dialogue: 0,0:30:03.14,0:30:05.28,Default,,0,0,0,,So we've covered the
Dialogue: 0,0:30:05.28,0:30:07.35,Default,,0,0,0,,enhancements for URLSession,
Dialogue: 0,0:30:07.82,0:30:08.50,Default,,0,0,0,,let's move on.
Dialogue: 0,0:30:09.52,0:30:15.64,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:30:16.14,0:30:16.48,Default,,0,0,0,,Thank you.
Dialogue: 0,0:30:18.35,0:30:21.08,Default,,0,0,0,,Tips and hints that we've
Dialogue: 0,0:30:21.08,0:30:23.85,Default,,0,0,0,,learned from our years helping
Dialogue: 0,0:30:23.85,0:30:24.48,Default,,0,0,0,,developers.
Dialogue: 0,0:30:26.82,0:30:29.12,Default,,0,0,0,,Number one rule: Don't use BSD
Dialogue: 0,0:30:29.12,0:30:29.73,Default,,0,0,0,,Sockets.
Dialogue: 0,0:30:33.25,0:30:34.54,Default,,0,0,0,,And by the same token, we
Dialogue: 0,0:30:34.54,0:30:36.44,Default,,0,0,0,,encourage you not to embed
Dialogue: 0,0:30:36.75,0:30:39.16,Default,,0,0,0,,libraries that are based on BSD
Dialogue: 0,0:30:39.16,0:30:39.80,Default,,0,0,0,,Sockets.
Dialogue: 0,0:30:41.36,0:30:44.39,Default,,0,0,0,,Because we do lots of work, as
Dialogue: 0,0:30:44.39,0:30:46.12,Default,,0,0,0,,you've been hearing today, to
Dialogue: 0,0:30:46.12,0:30:48.29,Default,,0,0,0,,provide benefits to your
Dialogue: 0,0:30:48.29,0:30:49.15,Default,,0,0,0,,applications.
Dialogue: 0,0:30:49.56,0:30:51.68,Default,,0,0,0,,We provide Wi-Fi Assist so that
Dialogue: 0,0:30:51.68,0:30:53.25,Default,,0,0,0,,your application succeeds
Dialogue: 0,0:30:53.36,0:30:54.86,Default,,0,0,0,,instead of failing when Wi-Fi
Dialogue: 0,0:30:54.86,0:30:55.60,Default,,0,0,0,,isn't working.
Dialogue: 0,0:30:56.15,0:30:58.39,Default,,0,0,0,,We provide techniques to
Dialogue: 0,0:30:58.80,0:31:01.16,Default,,0,0,0,,minimize CPU use and minimize
Dialogue: 0,0:31:01.20,0:31:02.95,Default,,0,0,0,,battery use to give users longer
Dialogue: 0,0:31:02.95,0:31:03.68,Default,,0,0,0,,battery life.
Dialogue: 0,0:31:04.38,0:31:06.46,Default,,0,0,0,,We have the ability to do tasks
Dialogue: 0,0:31:06.46,0:31:08.12,Default,,0,0,0,,in the background when your
Dialogue: 0,0:31:08.12,0:31:09.54,Default,,0,0,0,,application isn't even running.
Dialogue: 0,0:31:09.80,0:31:11.10,Default,,0,0,0,,And the third-party libraries
Dialogue: 0,0:31:11.10,0:31:12.20,Default,,0,0,0,,just can't do anything when
Dialogue: 0,0:31:12.20,0:31:13.21,Default,,0,0,0,,they're not in memory running.
Dialogue: 0,0:31:14.56,0:31:18.12,Default,,0,0,0,,And final bit of advice: Always
Dialogue: 0,0:31:18.12,0:31:20.40,Default,,0,0,0,,try to use connect-by-name APIs
Dialogue: 0,0:31:20.74,0:31:22.75,Default,,0,0,0,,as opposed to APIs where you
Dialogue: 0,0:31:22.75,0:31:24.92,Default,,0,0,0,,resolve a name to an IP address
Dialogue: 0,0:31:24.98,0:31:26.26,Default,,0,0,0,,and then connect to the address.
Dialogue: 0,0:31:27.04,0:31:28.55,Default,,0,0,0,,We talked earlier about the
Dialogue: 0,0:31:28.55,0:31:30.47,Default,,0,0,0,,requirement for IPv6 support.
Dialogue: 0,0:31:31.00,0:31:33.02,Default,,0,0,0,,And the reason that almost all
Dialogue: 0,0:31:33.28,0:31:36.37,Default,,0,0,0,,of your apps worked perfectly is
Dialogue: 0,0:31:36.42,0:31:37.83,Default,,0,0,0,,because when you use
Dialogue: 0,0:31:37.83,0:31:40.37,Default,,0,0,0,,connect-by-name APIs, you don't
Dialogue: 0,0:31:40.37,0:31:41.51,Default,,0,0,0,,get involved with the IP
Dialogue: 0,0:31:41.51,0:31:41.96,Default,,0,0,0,,addresses.
Dialogue: 0,0:31:42.05,0:31:43.14,Default,,0,0,0,,And if you're not involved with
Dialogue: 0,0:31:43.14,0:31:45.50,Default,,0,0,0,,the IP address, you don't need
Dialogue: 0,0:31:45.50,0:31:47.73,Default,,0,0,0,,to care whether it's v4 or v6,
Dialogue: 0,0:31:48.20,0:31:50.85,Default,,0,0,0,,it just works.
Dialogue: 0,0:31:50.89,0:31:53.37,Default,,0,0,0,,Another question we often get is
Dialogue: 0,0:31:53.37,0:31:54.71,Default,,0,0,0,,about the timeout values.
Dialogue: 0,0:31:55.10,0:31:56.32,Default,,0,0,0,,So I want to recap that.
Dialogue: 0,0:31:57.47,0:31:59.48,Default,,0,0,0,,The timeoutIntervalForResource
Dialogue: 0,0:32:00.46,0:32:02.50,Default,,0,0,0,,is the time limit for fetching
Dialogue: 0,0:32:02.50,0:32:03.57,Default,,0,0,0,,the entire resource.
Dialogue: 0,0:32:03.65,0:32:06.44,Default,,0,0,0,,By default, this is seven days.
Dialogue: 0,0:32:07.35,0:32:09.00,Default,,0,0,0,,If the entire resource has not
Dialogue: 0,0:32:09.00,0:32:10.21,Default,,0,0,0,,been fetched by that time, it
Dialogue: 0,0:32:10.21,0:32:10.67,Default,,0,0,0,,will fail.
Dialogue: 0,0:32:11.72,0:32:14.73,Default,,0,0,0,,timeoutIntervalForRequest is a
Dialogue: 0,0:32:14.73,0:32:17.04,Default,,0,0,0,,timer that only starts once the
Dialogue: 0,0:32:17.04,0:32:18.17,Default,,0,0,0,,transfer starts.
Dialogue: 0,0:32:18.65,0:32:21.39,Default,,0,0,0,,Once it starts, if your transfer
Dialogue: 0,0:32:21.39,0:32:23.80,Default,,0,0,0,,stalls and ceases making
Dialogue: 0,0:32:23.80,0:32:24.99,Default,,0,0,0,,progress for that time-out
Dialogue: 0,0:32:24.99,0:32:26.81,Default,,0,0,0,,value, that when that timer will
Dialogue: 0,0:32:26.81,0:32:27.83,Default,,0,0,0,,fire.
Dialogue: 0,0:32:29.88,0:32:33.36,Default,,0,0,0,,We have seen developers that
Dialogue: 0,0:32:33.36,0:32:35.77,Default,,0,0,0,,take their old NSURLConnection
Dialogue: 0,0:32:35.77,0:32:38.72,Default,,0,0,0,,code and convert it to the new
Dialogue: 0,0:32:38.72,0:32:41.07,Default,,0,0,0,,URLSession code by mechanically
Dialogue: 0,0:32:41.26,0:32:43.95,Default,,0,0,0,,making a URLSession for every
Dialogue: 0,0:32:43.95,0:32:46.19,Default,,0,0,0,,old NSURLConnection they used to
Dialogue: 0,0:32:46.19,0:32:46.41,Default,,0,0,0,,have.
Dialogue: 0,0:32:47.08,0:32:48.57,Default,,0,0,0,,This is very inefficient and
Dialogue: 0,0:32:48.57,0:32:49.01,Default,,0,0,0,,wasteful.
Dialogue: 0,0:32:49.19,0:32:51.49,Default,,0,0,0,,For almost all of your apps what
Dialogue: 0,0:32:51.49,0:32:53.44,Default,,0,0,0,,you want to have is just one
Dialogue: 0,0:32:53.44,0:32:55.45,Default,,0,0,0,,URLSession, which can then have
Dialogue: 0,0:32:55.45,0:32:56.79,Default,,0,0,0,,as many tasks as you want.
Dialogue: 0,0:32:57.70,0:32:59.24,Default,,0,0,0,,The only time you would want
Dialogue: 0,0:32:59.24,0:33:01.45,Default,,0,0,0,,more than one URLSession is when
Dialogue: 0,0:33:01.45,0:33:02.95,Default,,0,0,0,,you have groups of different
Dialogue: 0,0:33:02.95,0:33:04.94,Default,,0,0,0,,operations that have radically
Dialogue: 0,0:33:04.94,0:33:05.93,Default,,0,0,0,,different requirements.
Dialogue: 0,0:33:06.09,0:33:07.79,Default,,0,0,0,,And in that case you might
Dialogue: 0,0:33:07.82,0:33:08.84,Default,,0,0,0,,create two different
Dialogue: 0,0:33:08.84,0:33:11.07,Default,,0,0,0,,configuration objects and create
Dialogue: 0,0:33:11.07,0:33:13.44,Default,,0,0,0,,two different URLSessions using
Dialogue: 0,0:33:13.44,0:33:15.10,Default,,0,0,0,,those two configuration objects.
Dialogue: 0,0:33:15.55,0:33:17.67,Default,,0,0,0,,One example is private browsing
Dialogue: 0,0:33:17.67,0:33:19.69,Default,,0,0,0,,in Safari where each private
Dialogue: 0,0:33:19.69,0:33:21.12,Default,,0,0,0,,browsing window is its own
Dialogue: 0,0:33:21.12,0:33:23.32,Default,,0,0,0,,separate URLSession so that it
Dialogue: 0,0:33:23.32,0:33:24.64,Default,,0,0,0,,doesn't share cookies and other
Dialogue: 0,0:33:24.64,0:33:25.94,Default,,0,0,0,,states with the other sessions.
Dialogue: 0,0:33:27.90,0:33:30.50,Default,,0,0,0,,Most apps can just have one
Dialogue: 0,0:33:30.50,0:33:32.33,Default,,0,0,0,,statically-allocated URLSession,
Dialogue: 0,0:33:32.33,0:33:33.02,Default,,0,0,0,,and that's fine.
Dialogue: 0,0:33:33.38,0:33:34.78,Default,,0,0,0,,But if you do allocate
Dialogue: 0,0:33:34.78,0:33:36.27,Default,,0,0,0,,URLSessions dynamically,
Dialogue: 0,0:33:36.61,0:33:38.27,Default,,0,0,0,,remember to clean up afterwards.
Dialogue: 0,0:33:38.70,0:33:40.10,Default,,0,0,0,,Either finish tasks and
Dialogue: 0,0:33:40.10,0:33:42.53,Default,,0,0,0,,invalidate or invalidate and
Dialogue: 0,0:33:42.53,0:33:42.94,Default,,0,0,0,,cancel.
Dialogue: 0,0:33:43.35,0:33:44.29,Default,,0,0,0,,But if you don't clean up,
Dialogue: 0,0:33:44.50,0:33:45.30,Default,,0,0,0,,you'll leak memory.
Dialogue: 0,0:33:45.86,0:33:50.96,Default,,0,0,0,,We get developers asking us
Dialogue: 0,0:33:51.02,0:33:52.78,Default,,0,0,0,,about convenience methods and
Dialogue: 0,0:33:52.78,0:33:53.84,Default,,0,0,0,,delegate callbacks.
Dialogue: 0,0:33:55.34,0:33:57.43,Default,,0,0,0,,Delegate callbacks give you
Dialogue: 0,0:33:57.43,0:33:59.38,Default,,0,0,0,,detailed step-by-step progress
Dialogue: 0,0:33:59.38,0:34:01.55,Default,,0,0,0,,information on the state of your
Dialogue: 0,0:34:01.55,0:34:01.93,Default,,0,0,0,,task.
Dialogue: 0,0:34:02.51,0:34:04.24,Default,,0,0,0,,The convenience methods, like
Dialogue: 0,0:34:04.24,0:34:06.52,Default,,0,0,0,,the name suggests, are a quick
Dialogue: 0,0:34:06.52,0:34:09.25,Default,,0,0,0,,and easy way of using the API.
Dialogue: 0,0:34:10.80,0:34:13.11,Default,,0,0,0,,With convenience methods you
Dialogue: 0,0:34:13.11,0:34:14.57,Default,,0,0,0,,don't get all the intermediate
Dialogue: 0,0:34:14.57,0:34:16.47,Default,,0,0,0,,delegate callbacks, you just get
Dialogue: 0,0:34:16.47,0:34:18.35,Default,,0,0,0,,the final result reported to the
Dialogue: 0,0:34:18.35,0:34:19.25,Default,,0,0,0,,completionHandler.
Dialogue: 0,0:34:21.01,0:34:22.63,Default,,0,0,0,,Don't mix and match both on the
Dialogue: 0,0:34:22.63,0:34:24.64,Default,,0,0,0,,same URLSession, pick one style
Dialogue: 0,0:34:24.64,0:34:25.46,Default,,0,0,0,,and be consistent.
Dialogue: 0,0:34:26.54,0:34:27.36,Default,,0,0,0,,If you're using the
Dialogue: 0,0:34:27.40,0:34:28.99,Default,,0,0,0,,completionHandler, you will not
Dialogue: 0,0:34:28.99,0:34:30.88,Default,,0,0,0,,get the delegate callbacks with
Dialogue: 0,0:34:30.92,0:34:31.85,Default,,0,0,0,,two exceptions.
Dialogue: 0,0:34:33.30,0:34:35.71,Default,,0,0,0,,If networking is not currently
Dialogue: 0,0:34:35.71,0:34:37.80,Default,,0,0,0,,available and the task is
Dialogue: 0,0:34:37.80,0:34:39.82,Default,,0,0,0,,waiting for connectivity, you'll
Dialogue: 0,0:34:39.82,0:34:41.57,Default,,0,0,0,,be notified of that in case you
Dialogue: 0,0:34:41.57,0:34:42.94,Default,,0,0,0,,want to show some indication in
Dialogue: 0,0:34:42.98,0:34:44.40,Default,,0,0,0,,your UI.
Dialogue: 0,0:34:44.40,0:34:45.79,Default,,0,0,0,,The other delegate method you
Dialogue: 0,0:34:45.79,0:34:47.64,Default,,0,0,0,,may get notified is the
Dialogue: 0,0:34:47.64,0:34:48.38,Default,,0,0,0,,didReceive
Dialogue: 0,0:34:48.38,0:34:49.57,Default,,0,0,0,,AuthenticationChallenge.
Dialogue: 0,0:34:50.27,0:34:54.66,Default,,0,0,0,,So here's a summary of the
Dialogue: 0,0:34:54.71,0:34:58.64,Default,,0,0,0,,options available to you.
Dialogue: 0,0:34:58.64,0:35:00.42,Default,,0,0,0,,Doing URLSessionTasks in your
Dialogue: 0,0:35:00.42,0:35:03.52,Default,,0,0,0,,process with waits for
Dialogue: 0,0:35:03.52,0:35:05.21,Default,,0,0,0,,connectivity as we recommend,
Dialogue: 0,0:35:06.21,0:35:07.49,Default,,0,0,0,,the task will start immediately
Dialogue: 0,0:35:07.49,0:35:10.27,Default,,0,0,0,,if it can; or if it can't, it
Dialogue: 0,0:35:10.27,0:35:11.78,Default,,0,0,0,,will start at the first possible
Dialogue: 0,0:35:11.78,0:35:12.35,Default,,0,0,0,,opportunity.
Dialogue: 0,0:35:13.23,0:35:14.67,Default,,0,0,0,,You also have the option of
Dialogue: 0,0:35:14.67,0:35:16.18,Default,,0,0,0,,doing tasks in the background.
Dialogue: 0,0:35:17.35,0:35:18.52,Default,,0,0,0,,And you can do background
Dialogue: 0,0:35:18.52,0:35:20.35,Default,,0,0,0,,discretionary tasks, which will
Dialogue: 0,0:35:20.35,0:35:22.41,Default,,0,0,0,,wait until the best time in
Dialogue: 0,0:35:22.41,0:35:25.78,Default,,0,0,0,,terms of battery power and Wi-Fi
Dialogue: 0,0:35:25.78,0:35:26.33,Default,,0,0,0,,networking.
Dialogue: 0,0:35:30.36,0:35:31.82,Default,,0,0,0,,Now I have a couple of ongoing
Dialogue: 0,0:35:31.82,0:35:33.61,Default,,0,0,0,,developments to talk about.
Dialogue: 0,0:35:35.39,0:35:36.62,Default,,0,0,0,,I'm sure many people in this
Dialogue: 0,0:35:36.62,0:35:38.69,Default,,0,0,0,,room have heard about TLS 1.3.
Dialogue: 0,0:35:39.60,0:35:41.72,Default,,0,0,0,,TLS, Transport Layer Security is
Dialogue: 0,0:35:41.72,0:35:43.57,Default,,0,0,0,,the protocol that encrypts your
Dialogue: 0,0:35:43.57,0:35:45.52,Default,,0,0,0,,data on the network to prevent
Dialogue: 0,0:35:45.52,0:35:47.97,Default,,0,0,0,,eavesdroppers from seeing it and
Dialogue: 0,0:35:48.28,0:35:50.64,Default,,0,0,0,,perhaps as importantly to make
Dialogue: 0,0:35:50.64,0:35:51.82,Default,,0,0,0,,sure that you have connected to
Dialogue: 0,0:35:51.89,0:35:53.07,Default,,0,0,0,,the server you intended to
Dialogue: 0,0:35:53.07,0:35:53.60,Default,,0,0,0,,connect to.
Dialogue: 0,0:35:54.51,0:35:57.65,Default,,0,0,0,,TLS 1.2 is very old at this
Dialogue: 0,0:35:57.65,0:35:58.12,Default,,0,0,0,,stage.
Dialogue: 0,0:35:58.12,0:35:59.52,Default,,0,0,0,,It has a number of problems that
Dialogue: 0,0:35:59.52,0:36:00.43,Default,,0,0,0,,have been discovered.
Dialogue: 0,0:36:01.00,0:36:04.70,Default,,0,0,0,,And TLS 1.3 is almost finished.
Dialogue: 0,0:36:05.43,0:36:06.71,Default,,0,0,0,,That standard is not quite
Dialogue: 0,0:36:06.71,0:36:07.41,Default,,0,0,0,,finalized.
Dialogue: 0,0:36:07.97,0:36:10.00,Default,,0,0,0,,Apple is participating in that
Dialogue: 0,0:36:10.00,0:36:13.69,Default,,0,0,0,,IETF working group, and we
Dialogue: 0,0:36:13.69,0:36:14.76,Default,,0,0,0,,expect that to be finished by
Dialogue: 0,0:36:14.76,0:36:15.53,Default,,0,0,0,,the end of this year.
Dialogue: 0,0:36:16.26,0:36:17.46,Default,,0,0,0,,In the meantime, we do have a
Dialogue: 0,0:36:17.46,0:36:19.67,Default,,0,0,0,,draft implementation if you want
Dialogue: 0,0:36:19.67,0:36:21.14,Default,,0,0,0,,to experiment with it right now.
Dialogue: 0,0:36:21.82,0:36:23.73,Default,,0,0,0,,And if you check out the
Dialogue: 0,0:36:23.73,0:36:26.15,Default,,0,0,0,,security session from this Apple
Dialogue: 0,0:36:26.15,0:36:27.33,Default,,0,0,0,,Developer Conference, you can
Dialogue: 0,0:36:27.33,0:36:29.57,Default,,0,0,0,,learn how to experiment with
Dialogue: 0,0:36:30.12,0:36:30.23,Default,,0,0,0,,that.
Dialogue: 0,0:36:30.45,0:36:32.04,Default,,0,0,0,,Another thing you may have heard
Dialogue: 0,0:36:32.04,0:36:32.74,Default,,0,0,0,,of is QUIC.
Dialogue: 0,0:36:33.71,0:36:35.79,Default,,0,0,0,,QUIC is a new transport protocol
Dialogue: 0,0:36:36.24,0:36:39.24,Default,,0,0,0,,designed to experiment with new
Dialogue: 0,0:36:39.24,0:36:41.67,Default,,0,0,0,,ideas that are hard to do with
Dialogue: 0,0:36:42.22,0:36:42.50,Default,,0,0,0,,TCP.
Dialogue: 0,0:36:42.72,0:36:43.89,Default,,0,0,0,,QUIC started out as an
Dialogue: 0,0:36:43.89,0:36:45.16,Default,,0,0,0,,experiment by some Google
Dialogue: 0,0:36:45.16,0:36:47.55,Default,,0,0,0,,engineers, and it was a very
Dialogue: 0,0:36:47.90,0:36:49.19,Default,,0,0,0,,successful experiment.
Dialogue: 0,0:36:49.24,0:36:50.10,Default,,0,0,0,,They learned a lot.
Dialogue: 0,0:36:50.26,0:36:52.06,Default,,0,0,0,,Some ideas were good, some
Dialogue: 0,0:36:52.06,0:36:53.45,Default,,0,0,0,,turned out not to work as well
Dialogue: 0,0:36:53.45,0:36:55.12,Default,,0,0,0,,as they hoped.
Dialogue: 0,0:36:55.77,0:36:58.35,Default,,0,0,0,,Those engineers have taken those
Dialogue: 0,0:36:58.35,0:36:59.92,Default,,0,0,0,,lessons they learned to the
Dialogue: 0,0:36:59.92,0:37:00.65,Default,,0,0,0,,IETF.
Dialogue: 0,0:37:00.65,0:37:02.31,Default,,0,0,0,,We have formed a new working
Dialogue: 0,0:37:02.31,0:37:03.92,Default,,0,0,0,,group to develop the IETF
Dialogue: 0,0:37:03.92,0:37:05.35,Default,,0,0,0,,standard QUIC protocol.
Dialogue: 0,0:37:06.32,0:37:07.86,Default,,0,0,0,,Apple is also participating in
Dialogue: 0,0:37:07.86,0:37:08.80,Default,,0,0,0,,that working group.
Dialogue: 0,0:37:08.95,0:37:10.63,Default,,0,0,0,,That is not nearly as far long
Dialogue: 0,0:37:10.80,0:37:12.67,Default,,0,0,0,,as TLS is, but that is also
Dialogue: 0,0:37:12.67,0:37:13.75,Default,,0,0,0,,making good progress.
Dialogue: 0,0:37:17.42,0:37:19.52,Default,,0,0,0,,Before we finish, one other
Dialogue: 0,0:37:19.52,0:37:20.68,Default,,0,0,0,,thing we should talk about,
Dialogue: 0,0:37:21.50,0:37:22.21,Default,,0,0,0,,Bonjour.
Dialogue: 0,0:37:25.04,0:37:27.87,Default,,0,0,0,,Fifteen year ago at this very
Dialogue: 0,0:37:27.87,0:37:29.95,Default,,0,0,0,,convention center in San Jose,
Dialogue: 0,0:37:30.62,0:37:32.51,Default,,0,0,0,,Steve Jobs announced Bonjour to
Dialogue: 0,0:37:32.51,0:37:32.91,Default,,0,0,0,,the world.
Dialogue: 0,0:37:33.25,0:37:35.33,Default,,0,0,0,,And I got the opportunity to
Dialogue: 0,0:37:35.33,0:37:37.06,Default,,0,0,0,,tell you all how it worked.
Dialogue: 0,0:37:37.46,0:37:39.20,Default,,0,0,0,,A lot has happened since then.
Dialogue: 0,0:37:40.36,0:37:44.69,Default,,0,0,0,,Since we launched it in 2004, we
Dialogue: 0,0:37:44.69,0:37:46.79,Default,,0,0,0,,brought out Bonjour for Windows,
Dialogue: 0,0:37:46.79,0:37:47.53,Default,,0,0,0,,for Linux.
Dialogue: 0,0:37:47.61,0:37:49.05,Default,,0,0,0,,We had Java APIs.
Dialogue: 0,0:37:50.36,0:37:52.48,Default,,0,0,0,,The next year Mac OS X 10.4
Dialogue: 0,0:37:52.48,0:37:54.31,Default,,0,0,0,,introduced wide-area Bonjour to
Dialogue: 0,0:37:54.46,0:37:55.60,Default,,0,0,0,,complement the local
Dialogue: 0,0:37:55.60,0:37:57.40,Default,,0,0,0,,multicast-based Bonjour that was
Dialogue: 0,0:37:57.40,0:37:59.89,Default,,0,0,0,,in the original Mac OS 10.2
Dialogue: 0,0:38:00.40,0:38:00.72,Default,,0,0,0,,launch.
Dialogue: 0,0:38:01.73,0:38:03.53,Default,,0,0,0,,The same year the Linux
Dialogue: 0,0:38:03.53,0:38:04.99,Default,,0,0,0,,community came out with a
Dialogue: 0,0:38:04.99,0:38:06.56,Default,,0,0,0,,completely independent
Dialogue: 0,0:38:06.56,0:38:08.46,Default,,0,0,0,,GPL-licensed implementation of
Dialogue: 0,0:38:08.46,0:38:09.78,Default,,0,0,0,,Bonjour called Avahi.
Dialogue: 0,0:38:11.13,0:38:12.57,Default,,0,0,0,,A couple of years after that,
Dialogue: 0,0:38:13.26,0:38:15.23,Default,,0,0,0,,Apple shipped Back to My Mac,
Dialogue: 0,0:38:15.74,0:38:17.96,Default,,0,0,0,,which is built on the wide-area
Dialogue: 0,0:38:17.96,0:38:19.67,Default,,0,0,0,,Bonjour capabilities introduced
Dialogue: 0,0:38:19.67,0:38:20.66,Default,,0,0,0,,in 10.4.
Dialogue: 0,0:38:21.48,0:38:23.80,Default,,0,0,0,,And in 2009 we brought out the
Dialogue: 0,0:38:23.80,0:38:26.03,Default,,0,0,0,,Bonjour Sleep Proxy, which let
Dialogue: 0,0:38:26.03,0:38:27.20,Default,,0,0,0,,you get Back to Your Mac at
Dialogue: 0,0:38:27.20,0:38:28.69,Default,,0,0,0,,Home, even when it was asleep to
Dialogue: 0,0:38:28.69,0:38:29.67,Default,,0,0,0,,save power.
Dialogue: 0,0:38:30.31,0:38:33.22,Default,,0,0,0,,In the years since then, Android
Dialogue: 0,0:38:33.27,0:38:35.57,Default,,0,0,0,,adopted with Bonjour with their
Dialogue: 0,0:38:35.57,0:38:38.39,Default,,0,0,0,,own native APIs in 2012.
Dialogue: 0,0:38:38.39,0:38:40.56,Default,,0,0,0,,That was in API Level 16 for
Dialogue: 0,0:38:40.56,0:38:41.61,Default,,0,0,0,,those of you paying attention.
Dialogue: 0,0:38:42.41,0:38:43.94,Default,,0,0,0,,And a couple of years ago,
Dialogue: 0,0:38:44.08,0:38:45.63,Default,,0,0,0,,Windows 10 added their own
Dialogue: 0,0:38:45.71,0:38:47.21,Default,,0,0,0,,native Bonjour support.
Dialogue: 0,0:38:47.76,0:38:48.94,Default,,0,0,0,,Now, I know a lot of people in
Dialogue: 0,0:38:48.94,0:38:50.38,Default,,0,0,0,,this room are well aware of the
Dialogue: 0,0:38:50.48,0:38:50.93,Default,,0,0,0,,history.
Dialogue: 0,0:38:51.24,0:38:52.85,Default,,0,0,0,,We know about the major OS
Dialogue: 0,0:38:52.85,0:38:54.60,Default,,0,0,0,,vendors adopting Bonjour.
Dialogue: 0,0:38:55.73,0:38:57.12,Default,,0,0,0,,But something else happened that
Dialogue: 0,0:38:57.12,0:38:59.37,Default,,0,0,0,,surprised even me: Bonjour
Dialogue: 0,0:38:59.37,0:39:01.62,Default,,0,0,0,,started showing up in a lot of
Dialogue: 0,0:39:01.62,0:39:02.42,Default,,0,0,0,,other places.
Dialogue: 0,0:39:02.67,0:39:04.07,Default,,0,0,0,,And I want to illustrate this
Dialogue: 0,0:39:04.33,0:39:05.46,Default,,0,0,0,,with just a little personal
Dialogue: 0,0:39:05.46,0:39:06.02,Default,,0,0,0,,anecdote.
Dialogue: 0,0:39:06.07,0:39:07.59,Default,,0,0,0,,I recently bought a new house.
Dialogue: 0,0:39:08.32,0:39:09.72,Default,,0,0,0,,And as part of the process of
Dialogue: 0,0:39:09.72,0:39:11.13,Default,,0,0,0,,buying a new house, you often
Dialogue: 0,0:39:11.13,0:39:12.12,Default,,0,0,0,,end up buying a bunch of new
Dialogue: 0,0:39:12.12,0:39:12.56,Default,,0,0,0,,stuff.
Dialogue: 0,0:39:13.14,0:39:14.82,Default,,0,0,0,,And I started adding things to
Dialogue: 0,0:39:14.82,0:39:16.71,Default,,0,0,0,,my home and connecting things to
Dialogue: 0,0:39:16.71,0:39:17.35,Default,,0,0,0,,the network.
Dialogue: 0,0:39:17.97,0:39:19.43,Default,,0,0,0,,And I started finding a bunch of
Dialogue: 0,0:39:19.43,0:39:20.90,Default,,0,0,0,,stuff showing up in Bonjour.
Dialogue: 0,0:39:20.90,0:39:22.25,Default,,0,0,0,,Now, I bought a new printer; it
Dialogue: 0,0:39:22.25,0:39:23.03,Default,,0,0,0,,had Bonjour.
Dialogue: 0,0:39:23.24,0:39:25.27,Default,,0,0,0,,I bought some Access Network
Dialogue: 0,0:39:25.27,0:39:26.79,Default,,0,0,0,,security cameras, they had
Dialogue: 0,0:39:26.83,0:39:27.32,Default,,0,0,0,,Bonjour.
Dialogue: 0,0:39:27.32,0:39:28.92,Default,,0,0,0,,That didn't surprise me because
Dialogue: 0,0:39:28.92,0:39:30.69,Default,,0,0,0,,we know printers and network
Dialogue: 0,0:39:30.69,0:39:31.96,Default,,0,0,0,,cameras were among the first
Dialogue: 0,0:39:31.96,0:39:33.39,Default,,0,0,0,,devices to adopt Bonjour.
Dialogue: 0,0:39:35.06,0:39:37.33,Default,,0,0,0,,But then I got a surround sound
Dialogue: 0,0:39:37.33,0:39:41.22,Default,,0,0,0,,amplifier and it had Wi-Fi, and
Dialogue: 0,0:39:41.22,0:39:43.28,Default,,0,0,0,,it had an embedded web server
Dialogue: 0,0:39:43.55,0:39:44.54,Default,,0,0,0,,with Bonjour.
Dialogue: 0,0:39:45.07,0:39:46.35,Default,,0,0,0,,Now, you can set up the
Dialogue: 0,0:39:46.35,0:39:47.95,Default,,0,0,0,,amplifier with the TV and the
Dialogue: 0,0:39:47.95,0:39:50.14,Default,,0,0,0,,remote control, but naming the
Dialogue: 0,0:39:50.14,0:39:51.96,Default,,0,0,0,,inputs with up, down, left,
Dialogue: 0,0:39:51.96,0:39:53.29,Default,,0,0,0,,right on the remote control one
Dialogue: 0,0:39:53.29,0:39:54.59,Default,,0,0,0,,character at a time is really
Dialogue: 0,0:39:54.59,0:39:55.06,Default,,0,0,0,,tedious.
Dialogue: 0,0:39:55.40,0:39:56.54,Default,,0,0,0,,Being able to do this on my
Dialogue: 0,0:39:56.54,0:39:58.97,Default,,0,0,0,,laptop or on my 27-inch iMac
Dialogue: 0,0:39:59.13,0:40:00.96,Default,,0,0,0,,with a keyboard and a mouse is
Dialogue: 0,0:40:00.96,0:40:03.21,Default,,0,0,0,,such a nicer way to set up a new
Dialogue: 0,0:40:03.21,0:40:04.05,Default,,0,0,0,,piece of equipment.
Dialogue: 0,0:40:04.17,0:40:06.22,Default,,0,0,0,,I bought another amplifier from
Dialogue: 0,0:40:06.22,0:40:07.54,Default,,0,0,0,,different company, it also had
Dialogue: 0,0:40:07.54,0:40:08.12,Default,,0,0,0,,Bonjour.
Dialogue: 0,0:40:08.83,0:40:10.28,Default,,0,0,0,,I got solar panels on the roof
Dialogue: 0,0:40:10.28,0:40:11.56,Default,,0,0,0,,of the house to save on the
Dialogue: 0,0:40:11.56,0:40:13.52,Default,,0,0,0,,electricity bill, the inverter
Dialogue: 0,0:40:13.84,0:40:16.36,Default,,0,0,0,,has Wi-Fi with an embedded web
Dialogue: 0,0:40:16.36,0:40:18.70,Default,,0,0,0,,server advertised with Bonjour.
Dialogue: 0,0:40:19.02,0:40:21.17,Default,,0,0,0,,So now with one click, I can see
Dialogue: 0,0:40:21.17,0:40:22.97,Default,,0,0,0,,a graph of how much power I've
Dialogue: 0,0:40:23.01,0:40:25.06,Default,,0,0,0,,produced in the day.
Dialogue: 0,0:40:25.06,0:40:27.31,Default,,0,0,0,,My most recent purchase was an
Dialogue: 0,0:40:27.31,0:40:29.85,Default,,0,0,0,,irrigation controller to control
Dialogue: 0,0:40:29.85,0:40:31.00,Default,,0,0,0,,the sprinklers that water my
Dialogue: 0,0:40:31.00,0:40:31.61,Default,,0,0,0,,lawn.
Dialogue: 0,0:40:32.26,0:40:34.14,Default,,0,0,0,,It has Wi-Fi with an embedded
Dialogue: 0,0:40:34.14,0:40:35.90,Default,,0,0,0,,web server advertised with
Dialogue: 0,0:40:35.90,0:40:36.59,Default,,0,0,0,,Bonjour.
Dialogue: 0,0:40:37.17,0:40:38.66,Default,,0,0,0,,Compared to trying to program
Dialogue: 0,0:40:38.66,0:40:40.33,Default,,0,0,0,,your garden sprinkles with a
Dialogue: 0,0:40:40.33,0:40:42.20,Default,,0,0,0,,two-digital LCD display and the
Dialogue: 0,0:40:42.25,0:40:44.19,Default,,0,0,0,,plus minus buttons, this is such
Dialogue: 0,0:40:44.19,0:40:45.92,Default,,0,0,0,,a glorious experience to see it
Dialogue: 0,0:40:45.92,0:40:47.58,Default,,0,0,0,,all on my big iMac screen at the
Dialogue: 0,0:40:47.58,0:40:47.98,Default,,0,0,0,,same time.
Dialogue: 0,0:40:48.52,0:40:54.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:40:55.05,0:40:56.63,Default,,0,0,0,,So thank you to all you device
Dialogue: 0,0:40:56.63,0:40:57.70,Default,,0,0,0,,makers who are making these
Dialogue: 0,0:40:57.70,0:40:58.58,Default,,0,0,0,,wonderful products.
Dialogue: 0,0:40:58.90,0:41:00.65,Default,,0,0,0,,For the app developers in the
Dialogue: 0,0:41:00.65,0:41:03.45,Default,,0,0,0,,room, how does this affect you?
Dialogue: 0,0:41:04.05,0:41:05.91,Default,,0,0,0,,The IETF DNS Service Discovery
Dialogue: 0,0:41:05.91,0:41:07.70,Default,,0,0,0,,Working Group continues to make
Dialogue: 0,0:41:07.73,0:41:08.31,Default,,0,0,0,,progress.
Dialogue: 0,0:41:09.69,0:41:11.57,Default,,0,0,0,,We have new enhancements to do
Dialogue: 0,0:41:11.57,0:41:13.47,Default,,0,0,0,,serve discovery on enterprise
Dialogue: 0,0:41:13.47,0:41:15.27,Default,,0,0,0,,networks where multicast is not
Dialogue: 0,0:41:15.27,0:41:16.93,Default,,0,0,0,,efficient and on new mesh
Dialogue: 0,0:41:16.93,0:41:18.17,Default,,0,0,0,,network technologies that like
Dialogue: 0,0:41:18.27,0:41:19.69,Default,,0,0,0,,Thread that don't support
Dialogue: 0,0:41:19.69,0:41:20.52,Default,,0,0,0,,multicast well.
Dialogue: 0,0:41:21.18,0:41:22.76,Default,,0,0,0,,The good news for app developers
Dialogue: 0,0:41:22.82,0:41:23.83,Default,,0,0,0,,is this is all completely
Dialogue: 0,0:41:23.83,0:41:25.15,Default,,0,0,0,,transparent to your apps.
Dialogue: 0,0:41:25.15,0:41:26.80,Default,,0,0,0,,The APIs haven't changed because
Dialogue: 0,0:41:26.80,0:41:28.72,Default,,0,0,0,,we anticipated these things even
Dialogue: 0,0:41:28.72,0:41:29.67,Default,,0,0,0,,15 years ago.
Dialogue: 0,0:41:30.28,0:41:32.15,Default,,0,0,0,,The only thing to remember is
Dialogue: 0,0:41:32.15,0:41:33.88,Default,,0,0,0,,when you do a browse call and
Dialogue: 0,0:41:33.88,0:41:35.29,Default,,0,0,0,,you get back a name, type, and
Dialogue: 0,0:41:35.29,0:41:37.23,Default,,0,0,0,,domain, pay attention to all
Dialogue: 0,0:41:37.23,0:41:37.64,Default,,0,0,0,,three.
Dialogue: 0,0:41:38.02,0:41:41.26,Default,,0,0,0,,You may be used to see the
Dialogue: 0,0:41:41.26,0:41:43.14,Default,,0,0,0,,domain always being local, but
Dialogue: 0,0:41:43.14,0:41:44.27,Default,,0,0,0,,now it may not be local.
Dialogue: 0,0:41:44.61,0:41:46.82,Default,,0,0,0,,So when you call resolve, make
Dialogue: 0,0:41:46.82,0:41:48.48,Default,,0,0,0,,sure to pass the name, type, and
Dialogue: 0,0:41:48.48,0:41:49.62,Default,,0,0,0,,domain you got from the browse
Dialogue: 0,0:41:49.62,0:41:49.87,Default,,0,0,0,,call.
Dialogue: 0,0:41:50.07,0:41:51.80,Default,,0,0,0,,And for the device makers out
Dialogue: 0,0:41:51.80,0:41:54.01,Default,,0,0,0,,there, don't forget to support
Dialogue: 0,0:41:54.18,0:41:55.23,Default,,0,0,0,,link-local addressing.
Dialogue: 0,0:41:55.33,0:41:56.51,Default,,0,0,0,,Link-local addressing is the
Dialogue: 0,0:41:56.51,0:41:58.16,Default,,0,0,0,,most reliable way to get to a
Dialogue: 0,0:41:58.16,0:41:59.49,Default,,0,0,0,,device on the local network
Dialogue: 0,0:42:00.32,0:42:02.19,Default,,0,0,0,,because if you can't configure
Dialogue: 0,0:42:02.19,0:42:03.73,Default,,0,0,0,,it, you can't misconfigure it.
Dialogue: 0,0:42:04.52,0:42:07.09,Default,,0,0,0,,[ Laughter ]
Dialogue: 0,0:42:07.59,0:42:10.07,Default,,0,0,0,,So to wrap up, in part one we
Dialogue: 0,0:42:10.10,0:42:12.39,Default,,0,0,0,,talked about ongoing progress in
Dialogue: 0,0:42:12.49,0:42:12.83,Default,,0,0,0,,ECN.
Dialogue: 0,0:42:13.20,0:42:14.64,Default,,0,0,0,,It's now supported in clients
Dialogue: 0,0:42:14.64,0:42:16.39,Default,,0,0,0,,and servers, the stage is set.
Dialogue: 0,0:42:16.79,0:42:18.64,Default,,0,0,0,,Any ISP can now see an immediate
Dialogue: 0,0:42:18.64,0:42:20.28,Default,,0,0,0,,benefit for their customers by
Dialogue: 0,0:42:20.28,0:42:22.00,Default,,0,0,0,,turning on ECN at the key
Dialogue: 0,0:42:22.00,0:42:22.90,Default,,0,0,0,,bottleneck links.
Dialogue: 0,0:42:23.78,0:42:25.20,Default,,0,0,0,,Continue testing your apps on
Dialogue: 0,0:42:25.20,0:42:25.63,Default,,0,0,0,,NAT64.
Dialogue: 0,0:42:25.68,0:42:29.03,Default,,0,0,0,,Mostly known use there, we're
Dialogue: 0,0:42:29.03,0:42:30.27,Default,,0,0,0,,very happy everything is going
Dialogue: 0,0:42:30.27,0:42:30.74,Default,,0,0,0,,smoothly.
Dialogue: 0,0:42:32.77,0:42:34.24,Default,,0,0,0,,We have a move to user space
Dialogue: 0,0:42:34.24,0:42:36.22,Default,,0,0,0,,networking, which also doesn't
Dialogue: 0,0:42:36.22,0:42:36.98,Default,,0,0,0,,change the APIs.
Dialogue: 0,0:42:37.04,0:42:39.13,Default,,0,0,0,,But you may notice when you're
Dialogue: 0,0:42:39.17,0:42:40.59,Default,,0,0,0,,debugging and looking at stack
Dialogue: 0,0:42:40.59,0:42:42.20,Default,,0,0,0,,traces, you may see symbols in
Dialogue: 0,0:42:42.20,0:42:43.37,Default,,0,0,0,,the stack trace you're not used
Dialogue: 0,0:42:43.37,0:42:43.50,Default,,0,0,0,,to.
Dialogue: 0,0:42:43.50,0:42:44.89,Default,,0,0,0,,You may see differences in CPU
Dialogue: 0,0:42:44.89,0:42:45.63,Default,,0,0,0,,usage.
Dialogue: 0,0:42:45.99,0:42:46.97,Default,,0,0,0,,We wanted to you to be aware of
Dialogue: 0,0:42:46.97,0:42:48.25,Default,,0,0,0,,that so it didn't surprise you.
Dialogue: 0,0:42:49.20,0:42:51.43,Default,,0,0,0,,We have new capabilities in the
Dialogue: 0,0:42:51.43,0:42:52.84,Default,,0,0,0,,network extension framework.
Dialogue: 0,0:42:53.44,0:42:55.12,Default,,0,0,0,,And the big news, we have
Dialogue: 0,0:42:55.20,0:42:58.35,Default,,0,0,0,,multipath TCP as used by Siri
Dialogue: 0,0:42:58.50,0:42:59.84,Default,,0,0,0,,now available for your apps to
Dialogue: 0,0:42:59.84,0:43:00.74,Default,,0,0,0,,use as well.
Dialogue: 0,0:43:02.00,0:43:02.71,Default,,0,0,0,,Thank you.
Dialogue: 0,0:43:03.52,0:43:07.96,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:43:08.46,0:43:10.53,Default,,0,0,0,,In part two, we covered some
Dialogue: 0,0:43:10.53,0:43:12.08,Default,,0,0,0,,enhancements in URLSession,
Dialogue: 0,0:43:12.08,0:43:12.74,Default,,0,0,0,,especially the
Dialogue: 0,0:43:12.74,0:43:14.66,Default,,0,0,0,,waitsForConnectivity, which is
Dialogue: 0,0:43:14.66,0:43:16.71,Default,,0,0,0,,really networking APIs done the
Dialogue: 0,0:43:16.71,0:43:18.33,Default,,0,0,0,,way they always should have
Dialogue: 0,0:43:18.33,0:43:18.58,Default,,0,0,0,,done.
Dialogue: 0,0:43:18.86,0:43:20.74,Default,,0,0,0,,When you ask us to do something,
Dialogue: 0,0:43:21.11,0:43:22.48,Default,,0,0,0,,we should just do it, not bother
Dialogue: 0,0:43:22.48,0:43:24.41,Default,,0,0,0,,you with silly error messages
Dialogue: 0,0:43:24.41,0:43:25.64,Default,,0,0,0,,that it can't be done right now.
Dialogue: 0,0:43:25.78,0:43:27.20,Default,,0,0,0,,You ask us, we will do it when
Dialogue: 0,0:43:27.20,0:43:27.57,Default,,0,0,0,,we can.
Dialogue: 0,0:43:28.51,0:43:29.74,Default,,0,0,0,,I gave some tips about best
Dialogue: 0,0:43:29.79,0:43:33.30,Default,,0,0,0,,practices and news about ongoing
Dialogue: 0,0:43:33.30,0:43:33.99,Default,,0,0,0,,developments.
Dialogue: 0,0:43:34.83,0:43:35.95,Default,,0,0,0,,You can get more information
Dialogue: 0,0:43:36.48,0:43:37.71,Default,,0,0,0,,about this session on the web.
Dialogue: 0,0:43:39.19,0:43:41.20,Default,,0,0,0,,We have some other sessions we
Dialogue: 0,0:43:41.20,0:43:42.59,Default,,0,0,0,,recommend you hear that you'll
Dialogue: 0,0:43:42.59,0:43:44.22,Default,,0,0,0,,probably find interesting.
Dialogue: 0,0:43:44.87,0:43:45.22,Default,,0,0,0,,Thank you.
Dialogue: 0,0:43:46.52,0:43:51.50,Default,,0,0,0,,[ Applause ]
