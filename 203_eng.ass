[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.52,0:00:26.13,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:00:26.63,0:00:27.12,Default,,0,0,0,,>> Good morning.
Dialogue: 0,0:00:31.04,0:00:32.38,Default,,0,0,0,,My name is Bruce Nilo.
Dialogue: 0,0:00:32.38,0:00:33.33,Default,,0,0,0,,I'm one of the engineering
Dialogue: 0,0:00:33.33,0:00:34.68,Default,,0,0,0,,managers for UIKit.
Dialogue: 0,0:00:35.94,0:00:36.91,Default,,0,0,0,,And today we're going to be
Dialogue: 0,0:00:36.91,0:00:38.29,Default,,0,0,0,,discussing a new feature.
Dialogue: 0,0:00:38.57,0:00:39.70,Default,,0,0,0,,You might have heard that we're
Dialogue: 0,0:00:39.70,0:00:41.23,Default,,0,0,0,,introducing iOS 11.
Dialogue: 0,0:00:42.26,0:00:43.89,Default,,0,0,0,,This is going to be the first of
Dialogue: 0,0:00:44.01,0:00:45.81,Default,,0,0,0,,four dedicated sessions where
Dialogue: 0,0:00:45.81,0:00:47.41,Default,,0,0,0,,we're going to explore the
Dialogue: 0,0:00:47.41,0:00:49.52,Default,,0,0,0,,breadth and depth of the new
Dialogue: 0,0:00:49.52,0:00:51.24,Default,,0,0,0,,drag and drop APIs.
Dialogue: 0,0:00:51.79,0:00:53.30,Default,,0,0,0,,We're going to show you just how
Dialogue: 0,0:00:53.30,0:00:56.59,Default,,0,0,0,,easy it is using these APIs to
Dialogue: 0,0:00:56.59,0:00:58.93,Default,,0,0,0,,add drag and drop to your app in
Dialogue: 0,0:00:58.93,0:01:01.93,Default,,0,0,0,,ways that your users are going
Dialogue: 0,0:01:01.93,0:01:02.42,Default,,0,0,0,,to love.
Dialogue: 0,0:01:04.23,0:01:05.88,Default,,0,0,0,,We're going to start by talking
Dialogue: 0,0:01:06.07,0:01:08.67,Default,,0,0,0,,about the goals and concepts
Dialogue: 0,0:01:09.00,0:01:10.18,Default,,0,0,0,,behind drag and drop.
Dialogue: 0,0:01:11.05,0:01:13.37,Default,,0,0,0,,We're going to go deep into some
Dialogue: 0,0:01:13.37,0:01:15.04,Default,,0,0,0,,of the core APIs that you're
Dialogue: 0,0:01:15.04,0:01:18.06,Default,,0,0,0,,going to need to add drag and
Dialogue: 0,0:01:18.06,0:01:19.25,Default,,0,0,0,,drop to your apps.
Dialogue: 0,0:01:19.36,0:01:20.56,Default,,0,0,0,,And then we're going to follow
Dialogue: 0,0:01:20.56,0:01:21.91,Default,,0,0,0,,that up with a demonstration
Dialogue: 0,0:01:21.91,0:01:23.37,Default,,0,0,0,,showing just how easy they are
Dialogue: 0,0:01:23.37,0:01:23.91,Default,,0,0,0,,to use.
Dialogue: 0,0:01:24.57,0:01:25.95,Default,,0,0,0,,Finally, we're going to wrap up
Dialogue: 0,0:01:25.95,0:01:28.03,Default,,0,0,0,,with some suggestions about what
Dialogue: 0,0:01:28.03,0:01:30.01,Default,,0,0,0,,you can do to quickly adopt this
Dialogue: 0,0:01:30.01,0:01:30.98,Default,,0,0,0,,great new feature.
Dialogue: 0,0:01:34.20,0:01:35.81,Default,,0,0,0,,So what is drag and drop?
Dialogue: 0,0:01:37.02,0:01:38.37,Default,,0,0,0,,I think we all know that it's a
Dialogue: 0,0:01:38.37,0:01:40.03,Default,,0,0,0,,way to graphically move data
Dialogue: 0,0:01:40.36,0:01:43.55,Default,,0,0,0,,from one application to another
Dialogue: 0,0:01:43.55,0:01:45.15,Default,,0,0,0,,or even within the same
Dialogue: 0,0:01:45.15,0:01:45.89,Default,,0,0,0,,application.
Dialogue: 0,0:01:49.52,0:01:51.43,Default,,0,0,0,,When we set about designing drag
Dialogue: 0,0:01:51.43,0:01:53.16,Default,,0,0,0,,and drop and bringing it to iOS
Dialogue: 0,0:01:53.16,0:01:54.35,Default,,0,0,0,,we had some goals in mind.
Dialogue: 0,0:01:55.23,0:01:57.43,Default,,0,0,0,,We wanted it to be fast and
Dialogue: 0,0:01:57.43,0:01:58.24,Default,,0,0,0,,responsive.
Dialogue: 0,0:01:59.09,0:02:00.27,Default,,0,0,0,,In particular, we didn't want to
Dialogue: 0,0:02:00.27,0:02:01.88,Default,,0,0,0,,move or copy data that we didn't
Dialogue: 0,0:02:01.88,0:02:02.43,Default,,0,0,0,,need to.
Dialogue: 0,0:02:02.43,0:02:04.15,Default,,0,0,0,,Therefore we leveraged the
Dialogue: 0,0:02:04.15,0:02:05.63,Default,,0,0,0,,capabilities of the new file
Dialogue: 0,0:02:05.63,0:02:08.33,Default,,0,0,0,,system on iOS 11 and we made our
Dialogue: 0,0:02:08.33,0:02:10.43,Default,,0,0,0,,APIs -- we structured our APIs
Dialogue: 0,0:02:10.43,0:02:12.08,Default,,0,0,0,,in a way such that we never move
Dialogue: 0,0:02:12.08,0:02:13.76,Default,,0,0,0,,data unless it's requested.
Dialogue: 0,0:02:13.76,0:02:16.43,Default,,0,0,0,,And moreover, they're designed
Dialogue: 0,0:02:16.43,0:02:17.89,Default,,0,0,0,,to deliver the data to your
Dialogue: 0,0:02:17.89,0:02:19.68,Default,,0,0,0,,applications asynchronously.
Dialogue: 0,0:02:19.68,0:02:21.50,Default,,0,0,0,,So your apps never block the run
Dialogue: 0,0:02:21.50,0:02:23.16,Default,,0,0,0,,loop and prevent your users from
Dialogue: 0,0:02:23.16,0:02:25.02,Default,,0,0,0,,doing what they want to do.
Dialogue: 0,0:02:25.62,0:02:27.14,Default,,0,0,0,,We also wanted drag and drop to
Dialogue: 0,0:02:27.14,0:02:28.86,Default,,0,0,0,,be secure in a way that the
Dialogue: 0,0:02:28.86,0:02:30.12,Default,,0,0,0,,pasteboard isn't.
Dialogue: 0,0:02:30.69,0:02:32.46,Default,,0,0,0,,In particular data is only
Dialogue: 0,0:02:32.46,0:02:34.49,Default,,0,0,0,,visible to the destination app
Dialogue: 0,0:02:34.49,0:02:36.82,Default,,0,0,0,,location that your user
Dialogue: 0,0:02:36.82,0:02:38.76,Default,,0,0,0,,indicates they want to drop over
Dialogue: 0,0:02:39.39,0:02:40.74,Default,,0,0,0,,but that's not all.
Dialogue: 0,0:02:40.98,0:02:41.94,Default,,0,0,0,,We wanted our source
Dialogue: 0,0:02:41.94,0:02:44.14,Default,,0,0,0,,applications to have the ability
Dialogue: 0,0:02:44.14,0:02:46.33,Default,,0,0,0,,to restrict access to their data
Dialogue: 0,0:02:46.66,0:02:50.51,Default,,0,0,0,,to just their app, to other apps
Dialogue: 0,0:02:50.51,0:02:52.05,Default,,0,0,0,,developed by the same team, and
Dialogue: 0,0:02:52.71,0:02:54.89,Default,,0,0,0,,then of course, to all apps on
Dialogue: 0,0:02:54.89,0:02:55.46,Default,,0,0,0,,the system.
Dialogue: 0,0:02:56.09,0:02:58.94,Default,,0,0,0,,And when we GM, we will also be
Dialogue: 0,0:02:58.94,0:03:01.04,Default,,0,0,0,,supporting managed configuration
Dialogue: 0,0:03:01.10,0:03:02.97,Default,,0,0,0,,for our enterprise customers.
Dialogue: 0,0:03:05.20,0:03:08.47,Default,,0,0,0,,So finally, the most important
Dialogue: 0,0:03:08.47,0:03:10.17,Default,,0,0,0,,thing was that it be a great
Dialogue: 0,0:03:10.17,0:03:11.66,Default,,0,0,0,,multi-touch experience.
Dialogue: 0,0:03:12.44,0:03:13.79,Default,,0,0,0,,And to do this, it was clear we
Dialogue: 0,0:03:13.79,0:03:14.91,Default,,0,0,0,,were going to have reimagine
Dialogue: 0,0:03:14.91,0:03:16.74,Default,,0,0,0,,drag and drop in many important
Dialogue: 0,0:03:16.74,0:03:17.29,Default,,0,0,0,,ways.
Dialogue: 0,0:03:18.04,0:03:20.20,Default,,0,0,0,,So let's take a look at some
Dialogue: 0,0:03:20.20,0:03:22.13,Default,,0,0,0,,aspect of that experience we had
Dialogue: 0,0:03:22.13,0:03:22.62,Default,,0,0,0,,in mind.
Dialogue: 0,0:03:23.75,0:03:25.22,Default,,0,0,0,,And before I start this video,
Dialogue: 0,0:03:25.22,0:03:26.64,Default,,0,0,0,,let me give you some context.
Dialogue: 0,0:03:26.71,0:03:28.46,Default,,0,0,0,,I recently took some pictures of
Dialogue: 0,0:03:28.46,0:03:29.80,Default,,0,0,0,,the Empire State Building in New
Dialogue: 0,0:03:29.80,0:03:30.24,Default,,0,0,0,,York.
Dialogue: 0,0:03:30.51,0:03:31.70,Default,,0,0,0,,And in this video, you're going
Dialogue: 0,0:03:31.70,0:03:32.99,Default,,0,0,0,,to see me use a bunch of
Dialogue: 0,0:03:32.99,0:03:35.11,Default,,0,0,0,,different fingers to compose an
Dialogue: 0,0:03:35.11,0:03:36.23,Default,,0,0,0,,email to some friends.
Dialogue: 0,0:03:37.36,0:03:39.19,Default,,0,0,0,,We're going to start off in
Dialogue: 0,0:03:39.19,0:03:40.76,Default,,0,0,0,,Spotlight where we're going to
Dialogue: 0,0:03:40.76,0:03:41.57,Default,,0,0,0,,drag a link.
Dialogue: 0,0:03:42.00,0:03:43.15,Default,,0,0,0,,Swipe up the doc.
Dialogue: 0,0:03:43.92,0:03:45.79,Default,,0,0,0,,Hover over the Safari icon to
Dialogue: 0,0:03:45.79,0:03:47.53,Default,,0,0,0,,launch it and drop that link
Dialogue: 0,0:03:47.53,0:03:49.33,Default,,0,0,0,,onto the plus button to open up
Dialogue: 0,0:03:49.33,0:03:50.52,Default,,0,0,0,,a tab in Safari.
Dialogue: 0,0:03:51.27,0:03:52.78,Default,,0,0,0,,We're then going to select some
Dialogue: 0,0:03:52.78,0:03:55.72,Default,,0,0,0,,text long press and begin to
Dialogue: 0,0:03:55.72,0:03:57.21,Default,,0,0,0,,move and realize that wasn't
Dialogue: 0,0:03:57.21,0:03:59.11,Default,,0,0,0,,really the text I wanted at all.
Dialogue: 0,0:03:59.69,0:04:01.49,Default,,0,0,0,,I can easily cancel the drag.
Dialogue: 0,0:04:01.49,0:04:03.15,Default,,0,0,0,,Select the text that I care
Dialogue: 0,0:04:03.15,0:04:05.29,Default,,0,0,0,,about and again, the gesture is
Dialogue: 0,0:04:05.29,0:04:07.16,Default,,0,0,0,,a long press where the text
Dialogue: 0,0:04:07.16,0:04:08.89,Default,,0,0,0,,lifts up followed by a move.
Dialogue: 0,0:04:09.71,0:04:10.86,Default,,0,0,0,,At which point I can interact
Dialogue: 0,0:04:10.86,0:04:11.86,Default,,0,0,0,,with the rest of the system.
Dialogue: 0,0:04:11.95,0:04:13.94,Default,,0,0,0,,I can open the split so that I
Dialogue: 0,0:04:13.94,0:04:15.46,Default,,0,0,0,,can better see the photos that I
Dialogue: 0,0:04:15.46,0:04:16.18,Default,,0,0,0,,care about.
Dialogue: 0,0:04:16.84,0:04:18.81,Default,,0,0,0,,And now I can select a number of
Dialogue: 0,0:04:18.81,0:04:19.97,Default,,0,0,0,,the Empire State Building
Dialogue: 0,0:04:19.97,0:04:20.49,Default,,0,0,0,,photos.
Dialogue: 0,0:04:20.74,0:04:21.94,Default,,0,0,0,,You'll notice that I'm still
Dialogue: 0,0:04:21.94,0:04:23.56,Default,,0,0,0,,dragging the text with my other
Dialogue: 0,0:04:23.56,0:04:26.29,Default,,0,0,0,,hand and I'm adding photos to my
Dialogue: 0,0:04:26.29,0:04:26.56,Default,,0,0,0,,right.
Dialogue: 0,0:04:26.56,0:04:28.18,Default,,0,0,0,,I'm going to hand that
Dialogue: 0,0:04:28.18,0:04:29.80,Default,,0,0,0,,collection of photos to my left
Dialogue: 0,0:04:29.80,0:04:31.60,Default,,0,0,0,,hand so I can better swipe mail
Dialogue: 0,0:04:32.15,0:04:34.66,Default,,0,0,0,,into the right split.
Dialogue: 0,0:04:34.66,0:04:36.30,Default,,0,0,0,,I'm going to pass it over to my
Dialogue: 0,0:04:36.30,0:04:37.77,Default,,0,0,0,,right hand again so that I can
Dialogue: 0,0:04:37.77,0:04:39.33,Default,,0,0,0,,drop them into the mail compose
Dialogue: 0,0:04:39.33,0:04:39.59,Default,,0,0,0,,sheet.
Dialogue: 0,0:04:40.52,0:04:46.25,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:04:46.75,0:04:47.84,Default,,0,0,0,,So that's what we mean by a
Dialogue: 0,0:04:47.84,0:04:49.53,Default,,0,0,0,,great multi-touch experience.
Dialogue: 0,0:04:49.53,0:04:50.62,Default,,0,0,0,,What did we see?
Dialogue: 0,0:04:50.62,0:04:52.45,Default,,0,0,0,,The interface is alive.
Dialogue: 0,0:04:52.87,0:04:54.97,Default,,0,0,0,,It's deeply integrated with all
Dialogue: 0,0:04:54.97,0:04:55.36,Default,,0,0,0,,of iOS.
Dialogue: 0,0:04:55.58,0:04:57.21,Default,,0,0,0,,You can drag out of Spotlight.
Dialogue: 0,0:04:57.47,0:04:58.82,Default,,0,0,0,,You can bring up the doc.
Dialogue: 0,0:04:58.99,0:05:00.42,Default,,0,0,0,,Indeed the system UI is
Dialogue: 0,0:05:00.42,0:05:02.20,Default,,0,0,0,,implemented on top of drag and
Dialogue: 0,0:05:02.20,0:05:02.76,Default,,0,0,0,,drop.
Dialogue: 0,0:05:03.22,0:05:05.11,Default,,0,0,0,,There's great visual feedback.
Dialogue: 0,0:05:05.11,0:05:06.71,Default,,0,0,0,,Fantastic animations.
Dialogue: 0,0:05:06.71,0:05:08.51,Default,,0,0,0,,You can hover over controls to
Dialogue: 0,0:05:08.51,0:05:09.29,Default,,0,0,0,,navigate.
Dialogue: 0,0:05:09.53,0:05:11.47,Default,,0,0,0,,You can add items to an existing
Dialogue: 0,0:05:11.47,0:05:12.34,Default,,0,0,0,,drag session.
Dialogue: 0,0:05:12.62,0:05:14.90,Default,,0,0,0,,You can transfer drags between
Dialogue: 0,0:05:14.90,0:05:16.14,Default,,0,0,0,,your fingers, between your
Dialogue: 0,0:05:16.14,0:05:17.89,Default,,0,0,0,,hands, and you can even start
Dialogue: 0,0:05:17.89,0:05:20.51,Default,,0,0,0,,multiple drag sessions at once.
Dialogue: 0,0:05:21.66,0:05:24.39,Default,,0,0,0,,So before we get into some of
Dialogue: 0,0:05:24.39,0:05:26.84,Default,,0,0,0,,the concepts, let me talk about
Dialogue: 0,0:05:26.84,0:05:28.55,Default,,0,0,0,,drag and drop on the iPhone.
Dialogue: 0,0:05:29.36,0:05:31.05,Default,,0,0,0,,We initially envisioned drag and
Dialogue: 0,0:05:31.05,0:05:32.90,Default,,0,0,0,,drop as an iPad productivity
Dialogue: 0,0:05:32.94,0:05:33.30,Default,,0,0,0,,feature.
Dialogue: 0,0:05:33.91,0:05:36.06,Default,,0,0,0,,However, all the APIs are in
Dialogue: 0,0:05:36.12,0:05:37.80,Default,,0,0,0,,fact available on the phone.
Dialogue: 0,0:05:37.98,0:05:39.79,Default,,0,0,0,,There is one restriction and
Dialogue: 0,0:05:39.79,0:05:41.43,Default,,0,0,0,,that is on the phone we only
Dialogue: 0,0:05:41.43,0:05:45.79,Default,,0,0,0,,allow drags to execute within
Dialogue: 0,0:05:45.79,0:05:46.85,Default,,0,0,0,,the same application.
Dialogue: 0,0:05:48.44,0:05:51.44,Default,,0,0,0,,So let's turn our attention to
Dialogue: 0,0:05:51.44,0:05:52.89,Default,,0,0,0,,some of the key concepts.
Dialogue: 0,0:05:53.12,0:05:54.17,Default,,0,0,0,,These are going to provide a
Dialogue: 0,0:05:54.17,0:05:56.61,Default,,0,0,0,,great basis for understanding
Dialogue: 0,0:05:56.61,0:05:57.59,Default,,0,0,0,,the APIs that follow.
Dialogue: 0,0:06:04.17,0:06:05.63,Default,,0,0,0,,So we're going to talk about the
Dialogue: 0,0:06:05.63,0:06:07.30,Default,,0,0,0,,phases of a drag session.
Dialogue: 0,0:06:07.94,0:06:09.73,Default,,0,0,0,,We break a drag session into
Dialogue: 0,0:06:09.73,0:06:12.02,Default,,0,0,0,,four of them in which both the
Dialogue: 0,0:06:12.02,0:06:13.33,Default,,0,0,0,,source application and the
Dialogue: 0,0:06:13.33,0:06:15.02,Default,,0,0,0,,destination application have a
Dialogue: 0,0:06:15.02,0:06:15.82,Default,,0,0,0,,part to play.
Dialogue: 0,0:06:16.35,0:06:17.88,Default,,0,0,0,,And it all begins with a lift.
Dialogue: 0,0:06:18.32,0:06:19.80,Default,,0,0,0,,In the lift that's when you long
Dialogue: 0,0:06:19.80,0:06:21.49,Default,,0,0,0,,press and the view lifts out of
Dialogue: 0,0:06:21.49,0:06:23.53,Default,,0,0,0,,the screen and then when the
Dialogue: 0,0:06:23.53,0:06:25.69,Default,,0,0,0,,user begins to drag, you enter
Dialogue: 0,0:06:25.69,0:06:26.91,Default,,0,0,0,,the drag phase.
Dialogue: 0,0:06:27.33,0:06:29.19,Default,,0,0,0,,In the drag phase you can update
Dialogue: 0,0:06:29.24,0:06:30.80,Default,,0,0,0,,the previews of what the things
Dialogue: 0,0:06:30.80,0:06:32.26,Default,,0,0,0,,look like as you're dragging.
Dialogue: 0,0:06:32.26,0:06:33.77,Default,,0,0,0,,You can tap to add.
Dialogue: 0,0:06:33.77,0:06:35.19,Default,,0,0,0,,You can hover to navigate.
Dialogue: 0,0:06:36.29,0:06:37.29,Default,,0,0,0,,When the user lifts their
Dialogue: 0,0:06:37.29,0:06:39.15,Default,,0,0,0,,finger, one of two things can
Dialogue: 0,0:06:39.47,0:06:39.82,Default,,0,0,0,,happen.
Dialogue: 0,0:06:39.82,0:06:42.86,Default,,0,0,0,,Either the drag is cancelled or
Dialogue: 0,0:06:42.86,0:06:44.56,Default,,0,0,0,,you actually want those items
Dialogue: 0,0:06:44.56,0:06:46.64,Default,,0,0,0,,dropped where the user lifted
Dialogue: 0,0:06:46.64,0:06:47.23,Default,,0,0,0,,their finger.
Dialogue: 0,0:06:47.34,0:06:49.56,Default,,0,0,0,,We provide great targeting APIs
Dialogue: 0,0:06:49.56,0:06:50.69,Default,,0,0,0,,to make those set down
Dialogue: 0,0:06:50.69,0:06:52.36,Default,,0,0,0,,animations look fantastic.
Dialogue: 0,0:06:53.63,0:06:55.03,Default,,0,0,0,,And finally we enter the data
Dialogue: 0,0:06:55.03,0:06:56.68,Default,,0,0,0,,transfer phase and that's the
Dialogue: 0,0:06:56.68,0:06:57.90,Default,,0,0,0,,phase where the destination
Dialogue: 0,0:06:57.90,0:06:59.65,Default,,0,0,0,,application requests the data
Dialogue: 0,0:06:59.65,0:07:00.53,Default,,0,0,0,,from the source.
Dialogue: 0,0:07:01.07,0:07:05.23,Default,,0,0,0,,So before we go into the
Dialogue: 0,0:07:05.23,0:07:06.94,Default,,0,0,0,,building blocks of the drag
Dialogue: 0,0:07:06.94,0:07:08.91,Default,,0,0,0,,APIs, let me take a moment to
Dialogue: 0,0:07:08.91,0:07:10.57,Default,,0,0,0,,say that it's all built around a
Dialogue: 0,0:07:10.57,0:07:12.28,Default,,0,0,0,,concept called an interaction.
Dialogue: 0,0:07:12.33,0:07:14.31,Default,,0,0,0,,An interaction is a really
Dialogue: 0,0:07:14.31,0:07:15.29,Default,,0,0,0,,simple concept.
Dialogue: 0,0:07:15.58,0:07:17.68,Default,,0,0,0,,It's basically takes an input
Dialogue: 0,0:07:17.68,0:07:19.56,Default,,0,0,0,,and generates an effect of some
Dialogue: 0,0:07:19.61,0:07:19.98,Default,,0,0,0,,sort.
Dialogue: 0,0:07:20.94,0:07:22.73,Default,,0,0,0,,The drag and drop APIs are built
Dialogue: 0,0:07:22.73,0:07:24.40,Default,,0,0,0,,around this for a couple of
Dialogue: 0,0:07:24.40,0:07:25.03,Default,,0,0,0,,reasons.
Dialogue: 0,0:07:25.21,0:07:27.08,Default,,0,0,0,,One is is it lets us to provide
Dialogue: 0,0:07:27.08,0:07:28.86,Default,,0,0,0,,a consistent look and feel for
Dialogue: 0,0:07:28.86,0:07:30.64,Default,,0,0,0,,drag and drop across the system
Dialogue: 0,0:07:31.28,0:07:33.03,Default,,0,0,0,,but most importantly, it makes
Dialogue: 0,0:07:33.03,0:07:35.61,Default,,0,0,0,,it really easy for you to add
Dialogue: 0,0:07:36.41,0:07:37.95,Default,,0,0,0,,drag and drop to your app
Dialogue: 0,0:07:37.95,0:07:39.82,Default,,0,0,0,,without having to rearrange your
Dialogue: 0,0:07:39.82,0:07:41.46,Default,,0,0,0,,code or your view hierarchies.
Dialogue: 0,0:07:41.93,0:07:43.19,Default,,0,0,0,,So let me introduce the drag
Dialogue: 0,0:07:43.19,0:07:43.87,Default,,0,0,0,,interaction.
Dialogue: 0,0:07:44.49,0:07:45.80,Default,,0,0,0,,It's attached to a view.
Dialogue: 0,0:07:45.80,0:07:47.43,Default,,0,0,0,,And as you heard, perhaps, in
Dialogue: 0,0:07:47.43,0:07:49.25,Default,,0,0,0,,the previous talk it's very
Dialogue: 0,0:07:49.25,0:07:51.09,Default,,0,0,0,,similar to a gesture recognizer.
Dialogue: 0,0:07:51.09,0:07:52.63,Default,,0,0,0,,If you've ever used then the
Dialogue: 0,0:07:52.63,0:07:54.14,Default,,0,0,0,,pattern is the same.
Dialogue: 0,0:07:54.53,0:07:55.89,Default,,0,0,0,,You create an object with a
Dialogue: 0,0:07:55.89,0:07:57.69,Default,,0,0,0,,delegate and it is via the
Dialogue: 0,0:07:57.69,0:07:59.77,Default,,0,0,0,,delegate that you interact with
Dialogue: 0,0:07:59.77,0:08:00.30,Default,,0,0,0,,the system.
Dialogue: 0,0:08:00.96,0:08:03.10,Default,,0,0,0,,So for example, the delegate is
Dialogue: 0,0:08:03.10,0:08:05.36,Default,,0,0,0,,asked to return the drag items
Dialogue: 0,0:08:05.47,0:08:07.20,Default,,0,0,0,,just before the lift animation
Dialogue: 0,0:08:07.26,0:08:07.83,Default,,0,0,0,,happens.
Dialogue: 0,0:08:08.33,0:08:11.26,Default,,0,0,0,,This is the one required method
Dialogue: 0,0:08:11.50,0:08:13.40,Default,,0,0,0,,for a drag interaction delegate.
Dialogue: 0,0:08:14.45,0:08:16.54,Default,,0,0,0,,The delegate is free to return
Dialogue: 0,0:08:16.54,0:08:18.45,Default,,0,0,0,,no items whatsoever in which
Dialogue: 0,0:08:18.45,0:08:20.22,Default,,0,0,0,,case the gesture will fail and
Dialogue: 0,0:08:20.22,0:08:21.98,Default,,0,0,0,,the touch will be processed as
Dialogue: 0,0:08:21.98,0:08:22.35,Default,,0,0,0,,normal.
Dialogue: 0,0:08:22.92,0:08:25.37,Default,,0,0,0,,Okay. So what's a drag item?
Dialogue: 0,0:08:25.92,0:08:28.22,Default,,0,0,0,,Well the drag item is really the
Dialogue: 0,0:08:28.22,0:08:29.27,Default,,0,0,0,,whole point of it all.
Dialogue: 0,0:08:29.49,0:08:31.36,Default,,0,0,0,,It's the model object that's
Dialogue: 0,0:08:31.36,0:08:33.32,Default,,0,0,0,,associated with the view that
Dialogue: 0,0:08:33.32,0:08:35.67,Default,,0,0,0,,the interaction is attached to.
Dialogue: 0,0:08:40.56,0:08:43.14,Default,,0,0,0,,Drag item for drag and drop
Dialogue: 0,0:08:43.14,0:08:45.50,Default,,0,0,0,,embodies both what the items
Dialogue: 0,0:08:45.50,0:08:46.79,Default,,0,0,0,,look like as they're moved
Dialogue: 0,0:08:46.79,0:08:48.95,Default,,0,0,0,,around the screen, the preview,
Dialogue: 0,0:08:49.20,0:08:50.69,Default,,0,0,0,,as well as a promise by the
Dialogue: 0,0:08:50.69,0:08:52.87,Default,,0,0,0,,source application to deliver
Dialogue: 0,0:08:52.87,0:08:54.95,Default,,0,0,0,,the data to the destination when
Dialogue: 0,0:08:54.95,0:08:55.89,Default,,0,0,0,,it requests.
Dialogue: 0,0:08:57.52,0:08:59.48,Default,,0,0,0,,We call these promises item
Dialogue: 0,0:08:59.48,0:09:00.47,Default,,0,0,0,,providers and they're
Dialogue: 0,0:09:00.47,0:09:02.77,Default,,0,0,0,,implemented in iOS 11 by some
Dialogue: 0,0:09:02.77,0:09:04.45,Default,,0,0,0,,new additions to NS item
Dialogue: 0,0:09:04.45,0:09:04.99,Default,,0,0,0,,provider.
Dialogue: 0,0:09:05.57,0:09:09.29,Default,,0,0,0,,So how do you enable a drop?
Dialogue: 0,0:09:10.75,0:09:11.45,Default,,0,0,0,,It's easy.
Dialogue: 0,0:09:12.78,0:09:14.18,Default,,0,0,0,,The first way to do it is to
Dialogue: 0,0:09:14.18,0:09:17.15,Default,,0,0,0,,take advantage of a new property
Dialogue: 0,0:09:17.15,0:09:19.09,Default,,0,0,0,,that we added to UIResponder
Dialogue: 0,0:09:19.09,0:09:20.56,Default,,0,0,0,,called paste configuration.
Dialogue: 0,0:09:21.46,0:09:23.06,Default,,0,0,0,,What is a paste configuration?
Dialogue: 0,0:09:23.64,0:09:25.49,Default,,0,0,0,,Basically it's a declarative way
Dialogue: 0,0:09:25.81,0:09:27.74,Default,,0,0,0,,of specifying the types that
Dialogue: 0,0:09:27.74,0:09:29.54,Default,,0,0,0,,your responder can either accept
Dialogue: 0,0:09:29.54,0:09:31.47,Default,,0,0,0,,as a paste or as a drop.
Dialogue: 0,0:09:32.36,0:09:33.50,Default,,0,0,0,,To take advantage of paste
Dialogue: 0,0:09:33.50,0:09:34.71,Default,,0,0,0,,configurations, you need to
Dialogue: 0,0:09:34.71,0:09:35.99,Default,,0,0,0,,implement a new method called
Dialogue: 0,0:09:35.99,0:09:37.40,Default,,0,0,0,,pasteitemProviders.
Dialogue: 0,0:09:37.51,0:09:39.30,Default,,0,0,0,,And if you do, you will be able
Dialogue: 0,0:09:39.30,0:09:41.28,Default,,0,0,0,,to support paste and drag and
Dialogue: 0,0:09:41.28,0:09:43.45,Default,,0,0,0,,drop -- and drop out of the box.
Dialogue: 0,0:09:43.91,0:09:47.60,Default,,0,0,0,,However for more sophisticated
Dialogue: 0,0:09:47.60,0:09:48.94,Default,,0,0,0,,drop interactions, you're going
Dialogue: 0,0:09:48.94,0:09:49.87,Default,,0,0,0,,to want to add a drop
Dialogue: 0,0:09:49.87,0:09:51.12,Default,,0,0,0,,interaction to your view.
Dialogue: 0,0:09:51.79,0:09:53.44,Default,,0,0,0,,And you do so in a very similar
Dialogue: 0,0:09:53.44,0:09:54.55,Default,,0,0,0,,way that you add a drag
Dialogue: 0,0:09:54.55,0:09:55.26,Default,,0,0,0,,interaction.
Dialogue: 0,0:09:56.02,0:09:57.69,Default,,0,0,0,,And when you do, when you are
Dialogue: 0,0:09:57.69,0:09:59.52,Default,,0,0,0,,dragging over a view that has
Dialogue: 0,0:09:59.52,0:10:00.89,Default,,0,0,0,,such as interaction, we're going
Dialogue: 0,0:10:00.89,0:10:02.80,Default,,0,0,0,,to query that delegate to tell
Dialogue: 0,0:10:02.80,0:10:03.92,Default,,0,0,0,,us whether or not it's
Dialogue: 0,0:10:03.92,0:10:05.23,Default,,0,0,0,,interested in the items that are
Dialogue: 0,0:10:05.23,0:10:06.62,Default,,0,0,0,,actually being dragged over it
Dialogue: 0,0:10:06.62,0:10:09.06,Default,,0,0,0,,and it will reply with an
Dialogue: 0,0:10:09.06,0:10:11.61,Default,,0,0,0,,intention or a proposal as we
Dialogue: 0,0:10:11.61,0:10:12.06,Default,,0,0,0,,call it.
Dialogue: 0,0:10:13.41,0:10:15.95,Default,,0,0,0,,Now on touch up, the delegate
Dialogue: 0,0:10:15.95,0:10:17.37,Default,,0,0,0,,might have said not interested
Dialogue: 0,0:10:17.37,0:10:18.92,Default,,0,0,0,,in which case the drag will be
Dialogue: 0,0:10:18.92,0:10:19.61,Default,,0,0,0,,cancelled.
Dialogue: 0,0:10:19.61,0:10:21.24,Default,,0,0,0,,And all those previews are going
Dialogue: 0,0:10:21.24,0:10:22.57,Default,,0,0,0,,to animate back to whence they
Dialogue: 0,0:10:22.57,0:10:24.25,Default,,0,0,0,,came or off the screen to
Dialogue: 0,0:10:24.25,0:10:25.73,Default,,0,0,0,,indicate that it was cancelled.
Dialogue: 0,0:10:26.46,0:10:27.97,Default,,0,0,0,,However the more interesting bit
Dialogue: 0,0:10:27.97,0:10:30.39,Default,,0,0,0,,is when the delegate says yeah,
Dialogue: 0,0:10:30.39,0:10:32.22,Default,,0,0,0,,I'm interested in those items.
Dialogue: 0,0:10:32.47,0:10:33.67,Default,,0,0,0,,In which case, the system is
Dialogue: 0,0:10:33.67,0:10:35.98,Default,,0,0,0,,going to say perform the drop.
Dialogue: 0,0:10:37.02,0:10:38.67,Default,,0,0,0,,And it is within the scope of
Dialogue: 0,0:10:38.67,0:10:40.76,Default,,0,0,0,,this call back and it is only
Dialogue: 0,0:10:40.76,0:10:42.14,Default,,0,0,0,,within the scope of this call
Dialogue: 0,0:10:42.14,0:10:44.16,Default,,0,0,0,,back, that the delegate can
Dialogue: 0,0:10:44.16,0:10:46.94,Default,,0,0,0,,request the items that's
Dialogue: 0,0:10:47.01,0:10:50.78,Default,,0,0,0,,interested in or more precisely
Dialogue: 0,0:10:50.78,0:10:52.30,Default,,0,0,0,,the representations of the
Dialogue: 0,0:10:52.30,0:10:52.83,Default,,0,0,0,,items.
Dialogue: 0,0:10:53.89,0:10:55.41,Default,,0,0,0,,And once -- and when it does so,
Dialogue: 0,0:10:55.41,0:10:56.52,Default,,0,0,0,,at that point, the source
Dialogue: 0,0:10:56.52,0:10:58.05,Default,,0,0,0,,application will fulfill its
Dialogue: 0,0:10:58.05,0:10:59.84,Default,,0,0,0,,promise and the system will
Dialogue: 0,0:10:59.84,0:11:01.63,Default,,0,0,0,,deliver that data back to the
Dialogue: 0,0:11:01.63,0:11:03.70,Default,,0,0,0,,destination app asynchronously.
Dialogue: 0,0:11:06.05,0:11:08.70,Default,,0,0,0,,Okay. There's a lot more to
Dialogue: 0,0:11:08.70,0:11:09.42,Default,,0,0,0,,discuss.
Dialogue: 0,0:11:09.53,0:11:11.03,Default,,0,0,0,,For example, what's the life
Dialogue: 0,0:11:11.03,0:11:13.08,Default,,0,0,0,,cycle of a drag session from the
Dialogue: 0,0:11:13.08,0:11:15.12,Default,,0,0,0,,perspective of the destination
Dialogue: 0,0:11:15.12,0:11:15.96,Default,,0,0,0,,or the source?
Dialogue: 0,0:11:16.85,0:11:17.99,Default,,0,0,0,,How do you make your set down
Dialogue: 0,0:11:17.99,0:11:19.41,Default,,0,0,0,,transitions look great?
Dialogue: 0,0:11:20.40,0:11:21.46,Default,,0,0,0,,What do you do if the data
Dialogue: 0,0:11:21.46,0:11:23.04,Default,,0,0,0,,transfer takes a long time to
Dialogue: 0,0:11:23.04,0:11:23.72,Default,,0,0,0,,complete?
Dialogue: 0,0:11:24.80,0:11:26.07,Default,,0,0,0,,Before we answer some of these
Dialogue: 0,0:11:26.07,0:11:27.23,Default,,0,0,0,,questions, it's going to help to
Dialogue: 0,0:11:27.23,0:11:28.60,Default,,0,0,0,,look at this picture because
Dialogue: 0,0:11:28.60,0:11:29.70,Default,,0,0,0,,it's going to give you a good
Dialogue: 0,0:11:29.70,0:11:31.57,Default,,0,0,0,,bird's eye view of how our API
Dialogue: 0,0:11:31.69,0:11:32.47,Default,,0,0,0,,is structured.
Dialogue: 0,0:11:32.83,0:11:34.05,Default,,0,0,0,,On the left in blue, you're
Dialogue: 0,0:11:34.05,0:11:35.75,Default,,0,0,0,,going to see those objects and
Dialogue: 0,0:11:35.75,0:11:37.44,Default,,0,0,0,,classes that the source
Dialogue: 0,0:11:37.44,0:11:39.55,Default,,0,0,0,,application is going to use to
Dialogue: 0,0:11:39.55,0:11:40.71,Default,,0,0,0,,realize a drag.
Dialogue: 0,0:11:41.17,0:11:42.46,Default,,0,0,0,,And on the right, what the
Dialogue: 0,0:11:42.46,0:11:44.78,Default,,0,0,0,,destination application uses to
Dialogue: 0,0:11:44.78,0:11:47.42,Default,,0,0,0,,realize a drop and in the middle
Dialogue: 0,0:11:47.42,0:11:49.46,Default,,0,0,0,,are those objects and classes
Dialogue: 0,0:11:49.76,0:11:51.20,Default,,0,0,0,,that both the source and the
Dialogue: 0,0:11:51.20,0:11:54.82,Default,,0,0,0,,destination use to fulfill the
Dialogue: 0,0:11:54.82,0:11:56.73,Default,,0,0,0,,contract of drag and drop.
Dialogue: 0,0:11:57.34,0:11:59.41,Default,,0,0,0,,Now to discuss these
Dialogue: 0,0:11:59.41,0:12:01.04,Default,,0,0,0,,foundational classes in more
Dialogue: 0,0:12:01.04,0:12:03.08,Default,,0,0,0,,detail, I'm going to bring Kurt
Dialogue: 0,0:12:03.08,0:12:04.74,Default,,0,0,0,,Revis, my colleague, up on the
Dialogue: 0,0:12:04.74,0:12:05.23,Default,,0,0,0,,stage.
Dialogue: 0,0:12:06.52,0:12:11.81,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:12:12.31,0:12:13.01,Default,,0,0,0,,>> Thank you, Bruce.
Dialogue: 0,0:12:13.97,0:12:15.16,Default,,0,0,0,,So Bruce gave you the big
Dialogue: 0,0:12:15.16,0:12:16.65,Default,,0,0,0,,picture of drag and drop.
Dialogue: 0,0:12:16.65,0:12:18.18,Default,,0,0,0,,Now I'm going to tell you more
Dialogue: 0,0:12:18.18,0:12:19.79,Default,,0,0,0,,about using the drag and drop
Dialogue: 0,0:12:19.79,0:12:20.12,Default,,0,0,0,,API.
Dialogue: 0,0:12:21.37,0:12:22.54,Default,,0,0,0,,So I'll talk about three things.
Dialogue: 0,0:12:22.54,0:12:24.27,Default,,0,0,0,,I'll give you a timeline about
Dialogue: 0,0:12:24.27,0:12:25.52,Default,,0,0,0,,what happens during drag and
Dialogue: 0,0:12:25.52,0:12:26.16,Default,,0,0,0,,drop.
Dialogue: 0,0:12:26.55,0:12:27.56,Default,,0,0,0,,I'll introduce you to these
Dialogue: 0,0:12:27.56,0:12:29.53,Default,,0,0,0,,essential API methods that you
Dialogue: 0,0:12:29.53,0:12:30.87,Default,,0,0,0,,need to implement to get drag
Dialogue: 0,0:12:30.87,0:12:32.25,Default,,0,0,0,,and drop working in your app.
Dialogue: 0,0:12:32.55,0:12:34.00,Default,,0,0,0,,And then finally, I'll introduce
Dialogue: 0,0:12:34.00,0:12:34.87,Default,,0,0,0,,you to the full API.
Dialogue: 0,0:12:35.81,0:12:38.09,Default,,0,0,0,,So drag and drop looks pretty
Dialogue: 0,0:12:38.09,0:12:38.72,Default,,0,0,0,,simple, right?
Dialogue: 0,0:12:38.72,0:12:39.98,Default,,0,0,0,,There's an object on the screen.
Dialogue: 0,0:12:40.30,0:12:41.87,Default,,0,0,0,,The user touches it, it lifts
Dialogue: 0,0:12:41.87,0:12:45.00,Default,,0,0,0,,up, then they move around inside
Dialogue: 0,0:12:45.00,0:12:46.25,Default,,0,0,0,,that app maybe over to a
Dialogue: 0,0:12:46.25,0:12:46.63,Default,,0,0,0,,different app.
Dialogue: 0,0:12:47.46,0:12:48.52,Default,,0,0,0,,Finally, they release their
Dialogue: 0,0:12:48.52,0:12:48.99,Default,,0,0,0,,touch.
Dialogue: 0,0:12:49.15,0:12:49.80,Default,,0,0,0,,The touch ends.
Dialogue: 0,0:12:50.31,0:12:51.57,Default,,0,0,0,,The object drops down into its
Dialogue: 0,0:12:51.57,0:12:52.19,Default,,0,0,0,,new position.
Dialogue: 0,0:12:52.89,0:12:53.92,Default,,0,0,0,,Of course, there's a lot more
Dialogue: 0,0:12:53.92,0:12:54.82,Default,,0,0,0,,going on underneath.
Dialogue: 0,0:12:55.18,0:12:56.73,Default,,0,0,0,,So let's talk about what happens
Dialogue: 0,0:12:56.79,0:12:56.94,Default,,0,0,0,,when.
Dialogue: 0,0:12:58.53,0:13:00.16,Default,,0,0,0,,It all starts when a touch comes
Dialogue: 0,0:13:00.16,0:13:02.29,Default,,0,0,0,,down on a view that has a drag
Dialogue: 0,0:13:02.29,0:13:02.95,Default,,0,0,0,,interaction.
Dialogue: 0,0:13:03.92,0:13:05.27,Default,,0,0,0,,UIKit sets up this lift
Dialogue: 0,0:13:05.27,0:13:07.29,Default,,0,0,0,,animation and then as that touch
Dialogue: 0,0:13:07.29,0:13:08.95,Default,,0,0,0,,stays down, we run that lift
Dialogue: 0,0:13:08.95,0:13:10.16,Default,,0,0,0,,animation all the way to its
Dialogue: 0,0:13:10.16,0:13:10.64,Default,,0,0,0,,completion.
Dialogue: 0,0:13:11.80,0:13:13.57,Default,,0,0,0,,Then when the user moves their
Dialogue: 0,0:13:13.57,0:13:15.16,Default,,0,0,0,,finger far enough, we start the
Dialogue: 0,0:13:15.16,0:13:15.97,Default,,0,0,0,,drag in earnest.
Dialogue: 0,0:13:16.61,0:13:17.81,Default,,0,0,0,,The object lifts up over
Dialogue: 0,0:13:17.81,0:13:19.21,Default,,0,0,0,,everything else in the view and
Dialogue: 0,0:13:19.21,0:13:21.17,Default,,0,0,0,,over all apps.
Dialogue: 0,0:13:21.17,0:13:23.05,Default,,0,0,0,,And the user can drag it around
Dialogue: 0,0:13:23.05,0:13:23.58,Default,,0,0,0,,on the screen.
Dialogue: 0,0:13:24.68,0:13:25.83,Default,,0,0,0,,Finally, at some point, the user
Dialogue: 0,0:13:25.83,0:13:26.94,Default,,0,0,0,,is going to release their touch.
Dialogue: 0,0:13:27.20,0:13:28.54,Default,,0,0,0,,And what we do depends on where
Dialogue: 0,0:13:28.54,0:13:29.08,Default,,0,0,0,,that was.
Dialogue: 0,0:13:30.11,0:13:32.14,Default,,0,0,0,,The first possibility is that
Dialogue: 0,0:13:32.14,0:13:33.47,Default,,0,0,0,,the view underneath is not
Dialogue: 0,0:13:33.47,0:13:34.40,Default,,0,0,0,,interested in accepting the
Dialogue: 0,0:13:34.40,0:13:34.70,Default,,0,0,0,,drop.
Dialogue: 0,0:13:35.12,0:13:36.21,Default,,0,0,0,,In that case, we run a short
Dialogue: 0,0:13:36.24,0:13:37.36,Default,,0,0,0,,cancellation animation.
Dialogue: 0,0:13:38.61,0:13:40.11,Default,,0,0,0,,Stepping back, maybe the
Dialogue: 0,0:13:40.11,0:13:42.22,Default,,0,0,0,,location was on a view that
Dialogue: 0,0:13:42.22,0:13:43.28,Default,,0,0,0,,wanted to accept the drop.
Dialogue: 0,0:13:43.91,0:13:44.94,Default,,0,0,0,,In that case, there's more to
Dialogue: 0,0:13:44.94,0:13:45.23,Default,,0,0,0,,do.
Dialogue: 0,0:13:45.94,0:13:48.14,Default,,0,0,0,,We ask the delegate of the drop
Dialogue: 0,0:13:48.14,0:13:49.74,Default,,0,0,0,,interaction to perform the drop,
Dialogue: 0,0:13:49.74,0:13:50.61,Default,,0,0,0,,to request the data.
Dialogue: 0,0:13:51.22,0:13:52.37,Default,,0,0,0,,And then two things happen in
Dialogue: 0,0:13:52.37,0:13:52.85,Default,,0,0,0,,parallel.
Dialogue: 0,0:13:53.81,0:13:55.39,Default,,0,0,0,,We run the drop animations to
Dialogue: 0,0:13:55.46,0:13:56.58,Default,,0,0,0,,animate those things into their
Dialogue: 0,0:13:56.58,0:13:57.38,Default,,0,0,0,,final positions.
Dialogue: 0,0:13:58.47,0:13:59.90,Default,,0,0,0,,And we do the data transfer.
Dialogue: 0,0:13:59.90,0:14:02.76,Default,,0,0,0,,So those two boxes are the same
Dialogue: 0,0:14:02.76,0:14:04.25,Default,,0,0,0,,size but really that data
Dialogue: 0,0:14:04.25,0:14:05.59,Default,,0,0,0,,transfer is asynchronous and
Dialogue: 0,0:14:05.68,0:14:07.07,Default,,0,0,0,,nobody knows how long it's going
Dialogue: 0,0:14:07.07,0:14:08.13,Default,,0,0,0,,to take ahead of time.
Dialogue: 0,0:14:08.96,0:14:09.81,Default,,0,0,0,,It might be very quick.
Dialogue: 0,0:14:10.15,0:14:11.47,Default,,0,0,0,,It might -- excuse me it might
Dialogue: 0,0:14:11.47,0:14:12.04,Default,,0,0,0,,be very quick.
Dialogue: 0,0:14:12.24,0:14:13.86,Default,,0,0,0,,In fact it might be faster than
Dialogue: 0,0:14:13.86,0:14:14.66,Default,,0,0,0,,drop animations.
Dialogue: 0,0:14:15.63,0:14:17.01,Default,,0,0,0,,Or it could take substantially
Dialogue: 0,0:14:17.01,0:14:18.30,Default,,0,0,0,,longer, for instance, if the
Dialogue: 0,0:14:18.30,0:14:21.92,Default,,0,0,0,,data needs to be downloaded.
Dialogue: 0,0:14:21.99,0:14:23.66,Default,,0,0,0,,Now you see this whole timeline.
Dialogue: 0,0:14:23.66,0:14:24.44,Default,,0,0,0,,That's everything that can
Dialogue: 0,0:14:24.44,0:14:24.87,Default,,0,0,0,,happen.
Dialogue: 0,0:14:25.25,0:14:26.66,Default,,0,0,0,,UIKit's responsible for running
Dialogue: 0,0:14:26.66,0:14:29.05,Default,,0,0,0,,this timeline but we need your
Dialogue: 0,0:14:29.10,0:14:30.42,Default,,0,0,0,,help at your three specific
Dialogue: 0,0:14:30.47,0:14:31.03,Default,,0,0,0,,places.
Dialogue: 0,0:14:31.78,0:14:33.04,Default,,0,0,0,,The first one is when the drag
Dialogue: 0,0:14:33.04,0:14:33.62,Default,,0,0,0,,starts.
Dialogue: 0,0:14:33.69,0:14:35.05,Default,,0,0,0,,We need to find the items to be
Dialogue: 0,0:14:35.05,0:14:35.53,Default,,0,0,0,,dragged.
Dialogue: 0,0:14:36.15,0:14:37.45,Default,,0,0,0,,We do that by calling this
Dialogue: 0,0:14:37.45,0:14:39.55,Default,,0,0,0,,required method on the drag
Dialogue: 0,0:14:39.55,0:14:40.54,Default,,0,0,0,,interaction delegate.
Dialogue: 0,0:14:41.56,0:14:42.41,Default,,0,0,0,,Drag interaction
Dialogue: 0,0:14:42.46,0:14:44.02,Default,,0,0,0,,itemsForBeginning session.
Dialogue: 0,0:14:44.27,0:14:45.90,Default,,0,0,0,,You return us an array of drag
Dialogue: 0,0:14:45.90,0:14:46.21,Default,,0,0,0,,items.
Dialogue: 0,0:14:47.12,0:14:48.16,Default,,0,0,0,,I'll give an example here.
Dialogue: 0,0:14:48.61,0:14:49.47,Default,,0,0,0,,We're going to drag just a
Dialogue: 0,0:14:49.47,0:14:50.28,Default,,0,0,0,,single string.
Dialogue: 0,0:14:50.85,0:14:52.06,Default,,0,0,0,,So my object will be the string
Dialogue: 0,0:14:52.11,0:14:52.89,Default,,0,0,0,,hello world.
Dialogue: 0,0:14:53.58,0:14:55.08,Default,,0,0,0,,I put this inside of an
Dialogue: 0,0:14:55.08,0:14:55.95,Default,,0,0,0,,NSitemProvider.
Dialogue: 0,0:14:56.01,0:14:57.93,Default,,0,0,0,,This is the data representation,
Dialogue: 0,0:14:57.97,0:14:59.30,Default,,0,0,0,,data transfer level of things.
Dialogue: 0,0:15:00.16,0:15:01.26,Default,,0,0,0,,Now note that I'm casting this
Dialogue: 0,0:15:01.26,0:15:02.12,Default,,0,0,0,,to an NS string.
Dialogue: 0,0:15:02.12,0:15:03.57,Default,,0,0,0,,This is because NS item provider
Dialogue: 0,0:15:03.57,0:15:04.93,Default,,0,0,0,,only deals with objects.
Dialogue: 0,0:15:05.07,0:15:06.36,Default,,0,0,0,,It doesn't deal with swift
Dialogue: 0,0:15:06.45,0:15:06.96,Default,,0,0,0,,struts.
Dialogue: 0,0:15:08.34,0:15:09.86,Default,,0,0,0,,Next, I make a drag item.
Dialogue: 0,0:15:09.97,0:15:11.24,Default,,0,0,0,,I go up to the drag and drop
Dialogue: 0,0:15:11.24,0:15:11.52,Default,,0,0,0,,level.
Dialogue: 0,0:15:12.24,0:15:13.54,Default,,0,0,0,,So I make a UI drag item with
Dialogue: 0,0:15:13.54,0:15:15.21,Default,,0,0,0,,that item provider and finally I
Dialogue: 0,0:15:15.21,0:15:17.15,Default,,0,0,0,,just return that single item.
Dialogue: 0,0:15:18.24,0:15:20.00,Default,,0,0,0,,The next API essential is on the
Dialogue: 0,0:15:20.00,0:15:20.69,Default,,0,0,0,,drop side.
Dialogue: 0,0:15:21.16,0:15:22.90,Default,,0,0,0,,Now while you're dragging that
Dialogue: 0,0:15:22.90,0:15:24.20,Default,,0,0,0,,object around on the screen,
Dialogue: 0,0:15:24.58,0:15:26.35,Default,,0,0,0,,UIKit wants to know at every
Dialogue: 0,0:15:26.35,0:15:27.81,Default,,0,0,0,,point what would happen if the
Dialogue: 0,0:15:27.81,0:15:29.14,Default,,0,0,0,,user lifted their finger right
Dialogue: 0,0:15:29.18,0:15:29.56,Default,,0,0,0,,here and now.
Dialogue: 0,0:15:30.62,0:15:32.17,Default,,0,0,0,,You tell us that by implementing
Dialogue: 0,0:15:32.17,0:15:33.75,Default,,0,0,0,,this method on the drop
Dialogue: 0,0:15:33.75,0:15:34.67,Default,,0,0,0,,interaction delegate.
Dialogue: 0,0:15:35.24,0:15:36.12,Default,,0,0,0,,Drop interaction
Dialogue: 0,0:15:36.59,0:15:38.78,Default,,0,0,0,,sessionDidUpdate and you return
Dialogue: 0,0:15:38.78,0:15:39.73,Default,,0,0,0,,a drop proposal.
Dialogue: 0,0:15:40.29,0:15:41.47,Default,,0,0,0,,So this is called when we enter
Dialogue: 0,0:15:41.47,0:15:42.73,Default,,0,0,0,,your view and then also when it
Dialogue: 0,0:15:42.73,0:15:43.91,Default,,0,0,0,,moves around inside of your
Dialogue: 0,0:15:43.95,0:15:44.23,Default,,0,0,0,,view.
Dialogue: 0,0:15:44.69,0:15:46.00,Default,,0,0,0,,Every time you can return a new
Dialogue: 0,0:15:46.00,0:15:46.59,Default,,0,0,0,,proposal.
Dialogue: 0,0:15:47.72,0:15:49.39,Default,,0,0,0,,You make a UIDropProposal and
Dialogue: 0,0:15:49.39,0:15:51.50,Default,,0,0,0,,use a drop operation to do that.
Dialogue: 0,0:15:52.83,0:15:54.41,Default,,0,0,0,,Now a drop operation is enum.
Dialogue: 0,0:15:54.41,0:15:55.82,Default,,0,0,0,,There's four possible values.
Dialogue: 0,0:15:55.86,0:15:56.99,Default,,0,0,0,,I'll talk about these in order
Dialogue: 0,0:15:56.99,0:15:58.82,Default,,0,0,0,,from most likely to least
Dialogue: 0,0:15:58.82,0:15:59.16,Default,,0,0,0,,likely.
Dialogue: 0,0:15:59.92,0:16:00.88,Default,,0,0,0,,The first one's cancel.
Dialogue: 0,0:16:01.65,0:16:02.54,Default,,0,0,0,,This is saying that when the
Dialogue: 0,0:16:02.54,0:16:03.85,Default,,0,0,0,,user lifts their finger, I don't
Dialogue: 0,0:16:03.85,0:16:04.76,Default,,0,0,0,,want to accept the drag.
Dialogue: 0,0:16:04.81,0:16:05.85,Default,,0,0,0,,Just cancel the drag.
Dialogue: 0,0:16:07.26,0:16:08.18,Default,,0,0,0,,Second is copy.
Dialogue: 0,0:16:08.57,0:16:09.47,Default,,0,0,0,,This is the opposite.
Dialogue: 0,0:16:09.47,0:16:10.70,Default,,0,0,0,,You're saying I do want that
Dialogue: 0,0:16:10.70,0:16:10.89,Default,,0,0,0,,data.
Dialogue: 0,0:16:11.04,0:16:12.74,Default,,0,0,0,,I will accept that data and copy
Dialogue: 0,0:16:12.74,0:16:14.03,Default,,0,0,0,,it into the view that the user
Dialogue: 0,0:16:14.03,0:16:14.74,Default,,0,0,0,,is dropping on.
Dialogue: 0,0:16:15.43,0:16:17.03,Default,,0,0,0,,Most of the time this is what
Dialogue: 0,0:16:17.03,0:16:17.81,Default,,0,0,0,,you should propose.
Dialogue: 0,0:16:18.40,0:16:20.46,Default,,0,0,0,,In general on iOS drag and drop
Dialogue: 0,0:16:20.46,0:16:21.62,Default,,0,0,0,,copies from one place to
Dialogue: 0,0:16:21.62,0:16:21.89,Default,,0,0,0,,another.
Dialogue: 0,0:16:23.40,0:16:24.30,Default,,0,0,0,,The next one is move.
Dialogue: 0,0:16:24.60,0:16:26.50,Default,,0,0,0,,This is a lot like copy but
Dialogue: 0,0:16:26.50,0:16:27.75,Default,,0,0,0,,you're indicating that you want
Dialogue: 0,0:16:27.75,0:16:29.26,Default,,0,0,0,,the data to be moved from the
Dialogue: 0,0:16:29.26,0:16:30.56,Default,,0,0,0,,source to the destination.
Dialogue: 0,0:16:31.50,0:16:32.75,Default,,0,0,0,,This is a bit more complicated
Dialogue: 0,0:16:32.75,0:16:34.22,Default,,0,0,0,,and you should know that UIKit
Dialogue: 0,0:16:34.43,0:16:36.10,Default,,0,0,0,,can't make it look like a move
Dialogue: 0,0:16:36.20,0:16:36.63,Default,,0,0,0,,for you.
Dialogue: 0,0:16:36.76,0:16:37.75,Default,,0,0,0,,We just give you the data the
Dialogue: 0,0:16:37.75,0:16:39.21,Default,,0,0,0,,exact same way as with a copy.
Dialogue: 0,0:16:39.95,0:16:41.68,Default,,0,0,0,,Your delegates need to cooperate
Dialogue: 0,0:16:42.05,0:16:43.09,Default,,0,0,0,,in order to make it look like a
Dialogue: 0,0:16:43.09,0:16:43.37,Default,,0,0,0,,move.
Dialogue: 0,0:16:44.45,0:16:46.25,Default,,0,0,0,,So this is only allowed within a
Dialogue: 0,0:16:46.25,0:16:47.17,Default,,0,0,0,,single app.
Dialogue: 0,0:16:47.84,0:16:49.41,Default,,0,0,0,,Your drag interaction delegate
Dialogue: 0,0:16:49.41,0:16:50.16,Default,,0,0,0,,must allow it.
Dialogue: 0,0:16:50.58,0:16:51.56,Default,,0,0,0,,There's a delegate method where
Dialogue: 0,0:16:51.56,0:16:52.87,Default,,0,0,0,,we'll ask if it does allow it.
Dialogue: 0,0:16:54.17,0:16:55.70,Default,,0,0,0,,And the drop interaction should
Dialogue: 0,0:16:55.70,0:16:57.25,Default,,0,0,0,,check this property on the drop
Dialogue: 0,0:16:57.25,0:16:59.01,Default,,0,0,0,,session allowsMoveOperation.
Dialogue: 0,0:16:59.34,0:17:00.62,Default,,0,0,0,,If that's true, then you can
Dialogue: 0,0:17:00.72,0:17:02.10,Default,,0,0,0,,propose the move operation.
Dialogue: 0,0:17:02.55,0:17:05.64,Default,,0,0,0,,Next the forbidden operation.
Dialogue: 0,0:17:05.93,0:17:07.24,Default,,0,0,0,,This is just like cancel except
Dialogue: 0,0:17:07.24,0:17:08.42,Default,,0,0,0,,that we show this additional
Dialogue: 0,0:17:08.42,0:17:10.39,Default,,0,0,0,,badge on the drag item.
Dialogue: 0,0:17:11.10,0:17:12.64,Default,,0,0,0,,This is telling the user that
Dialogue: 0,0:17:12.86,0:17:14.19,Default,,0,0,0,,although normally you could drop
Dialogue: 0,0:17:14.19,0:17:14.45,Default,,0,0,0,,here.
Dialogue: 0,0:17:14.45,0:17:15.75,Default,,0,0,0,,In this specific case, you
Dialogue: 0,0:17:15.75,0:17:15.99,Default,,0,0,0,,can't.
Dialogue: 0,0:17:16.94,0:17:18.08,Default,,0,0,0,,For instance, if I was dragging
Dialogue: 0,0:17:18.08,0:17:19.36,Default,,0,0,0,,an image over a folder.
Dialogue: 0,0:17:19.36,0:17:20.51,Default,,0,0,0,,Normally that would be allowed
Dialogue: 0,0:17:20.89,0:17:22.04,Default,,0,0,0,,but if that folder was read
Dialogue: 0,0:17:22.04,0:17:23.66,Default,,0,0,0,,only, then I would use the
Dialogue: 0,0:17:23.66,0:17:25.08,Default,,0,0,0,,forbidden badge to tell the user
Dialogue: 0,0:17:25.08,0:17:26.27,Default,,0,0,0,,that it can't happen right now.
Dialogue: 0,0:17:26.96,0:17:28.18,Default,,0,0,0,,So this is a bit forbidding.
Dialogue: 0,0:17:28.18,0:17:29.56,Default,,0,0,0,,So don't use it all the time.
Dialogue: 0,0:17:29.81,0:17:32.93,Default,,0,0,0,,Use it sparingly.
Dialogue: 0,0:17:32.93,0:17:35.22,Default,,0,0,0,,The next API essential, the
Dialogue: 0,0:17:35.22,0:17:36.71,Default,,0,0,0,,third one, you proposed an
Dialogue: 0,0:17:36.71,0:17:37.54,Default,,0,0,0,,operation earlier.
Dialogue: 0,0:17:37.54,0:17:39.04,Default,,0,0,0,,Now if it's a copy or move you
Dialogue: 0,0:17:39.04,0:17:40.50,Default,,0,0,0,,need to perform that operation.
Dialogue: 0,0:17:41.43,0:17:43.04,Default,,0,0,0,,So on the drop delegate, drop
Dialogue: 0,0:17:43.04,0:17:44.29,Default,,0,0,0,,interaction delegate you
Dialogue: 0,0:17:44.29,0:17:46.42,Default,,0,0,0,,implement drop interaction
Dialogue: 0,0:17:47.05,0:17:47.80,Default,,0,0,0,,perform drop.
Dialogue: 0,0:17:48.37,0:17:49.68,Default,,0,0,0,,And here's your chance to load
Dialogue: 0,0:17:49.68,0:17:50.68,Default,,0,0,0,,data from the session.
Dialogue: 0,0:17:50.80,0:17:52.01,Default,,0,0,0,,In fact, this is the only place
Dialogue: 0,0:17:52.01,0:17:52.49,Default,,0,0,0,,you can do that.
Dialogue: 0,0:17:53.14,0:17:54.95,Default,,0,0,0,,So I'll show two examples of
Dialogue: 0,0:17:54.95,0:17:56.14,Default,,0,0,0,,loading data from the items in
Dialogue: 0,0:17:56.14,0:17:56.53,Default,,0,0,0,,the session.
Dialogue: 0,0:17:57.48,0:17:58.77,Default,,0,0,0,,The first one is a simple one.
Dialogue: 0,0:17:58.77,0:17:59.95,Default,,0,0,0,,We'll use a convenience method
Dialogue: 0,0:17:59.95,0:18:02.08,Default,,0,0,0,,on the session called session
Dialogue: 0,0:18:02.08,0:18:03.20,Default,,0,0,0,,load objects of class.
Dialogue: 0,0:18:03.30,0:18:04.61,Default,,0,0,0,,Here I'm using UIImage.
Dialogue: 0,0:18:05.49,0:18:07.14,Default,,0,0,0,,I called this and I provide a
Dialogue: 0,0:18:07.14,0:18:09.18,Default,,0,0,0,,closure to be called back later
Dialogue: 0,0:18:09.18,0:18:11.03,Default,,0,0,0,,on when those objects are
Dialogue: 0,0:18:11.03,0:18:11.51,Default,,0,0,0,,available.
Dialogue: 0,0:18:12.53,0:18:14.31,Default,,0,0,0,,When they come in, I can iterate
Dialogue: 0,0:18:14.31,0:18:15.00,Default,,0,0,0,,through that list.
Dialogue: 0,0:18:15.17,0:18:17.44,Default,,0,0,0,,I know they will be UIImages, so
Dialogue: 0,0:18:17.44,0:18:19.03,Default,,0,0,0,,it's okay to do this force cast
Dialogue: 0,0:18:19.03,0:18:19.32,Default,,0,0,0,,here.
Dialogue: 0,0:18:19.32,0:18:21.33,Default,,0,0,0,,And then I can update my UI
Dialogue: 0,0:18:21.33,0:18:21.84,Default,,0,0,0,,directly.
Dialogue: 0,0:18:22.15,0:18:23.56,Default,,0,0,0,,So here I'm changing the image
Dialogue: 0,0:18:23.56,0:18:24.61,Default,,0,0,0,,inside of an image view.
Dialogue: 0,0:18:25.55,0:18:26.93,Default,,0,0,0,,So this convenience method calls
Dialogue: 0,0:18:26.93,0:18:28.71,Default,,0,0,0,,me back on the main queue.
Dialogue: 0,0:18:28.71,0:18:30.25,Default,,0,0,0,,I can update my UI right there
Dialogue: 0,0:18:30.25,0:18:30.46,Default,,0,0,0,,and then.
Dialogue: 0,0:18:31.93,0:18:33.21,Default,,0,0,0,,Here's a more complex example.
Dialogue: 0,0:18:33.95,0:18:35.07,Default,,0,0,0,,I'm going to iterate through the
Dialogue: 0,0:18:35.07,0:18:36.81,Default,,0,0,0,,items -- the UI drag items --
Dialogue: 0,0:18:36.81,0:18:37.74,Default,,0,0,0,,inside of my session.
Dialogue: 0,0:18:37.74,0:18:38.83,Default,,0,0,0,,I could do different things for
Dialogue: 0,0:18:38.83,0:18:39.95,Default,,0,0,0,,different ones if I wanted to.
Dialogue: 0,0:18:41.27,0:18:43.61,Default,,0,0,0,,I -- now I'll take for an item.
Dialogue: 0,0:18:43.72,0:18:45.48,Default,,0,0,0,,I will use the NS item provider.
Dialogue: 0,0:18:45.58,0:18:47.41,Default,,0,0,0,,Lower level API for loading
Dialogue: 0,0:18:47.41,0:18:47.89,Default,,0,0,0,,objects.
Dialogue: 0,0:18:48.04,0:18:49.07,Default,,0,0,0,,So I'll load an object of a
Dialogue: 0,0:18:49.07,0:18:50.49,Default,,0,0,0,,class, again UIImage.
Dialogue: 0,0:18:51.13,0:18:52.36,Default,,0,0,0,,You see that my closure gets two
Dialogue: 0,0:18:52.36,0:18:52.93,Default,,0,0,0,,things now.
Dialogue: 0,0:18:53.04,0:18:55.77,Default,,0,0,0,,It's get an object and it also
Dialogue: 0,0:18:55.77,0:18:57.31,Default,,0,0,0,,gets this error object.
Dialogue: 0,0:18:58.11,0:18:59.10,Default,,0,0,0,,The other thing about this is
Dialogue: 0,0:18:59.10,0:19:00.19,Default,,0,0,0,,that it's lower level -- this
Dialogue: 0,0:19:00.19,0:19:01.61,Default,,0,0,0,,calls me back on a background
Dialogue: 0,0:19:01.75,0:19:01.98,Default,,0,0,0,,queue.
Dialogue: 0,0:19:02.26,0:19:03.60,Default,,0,0,0,,So if I had more processing to
Dialogue: 0,0:19:03.60,0:19:04.78,Default,,0,0,0,,do of the data I could do it
Dialogue: 0,0:19:04.78,0:19:06.78,Default,,0,0,0,,right there and then but also
Dialogue: 0,0:19:06.78,0:19:08.22,Default,,0,0,0,,it's my responsibility to
Dialogue: 0,0:19:08.22,0:19:09.69,Default,,0,0,0,,dispatch back to the main queue
Dialogue: 0,0:19:09.69,0:19:11.24,Default,,0,0,0,,when it's time to update my UI.
Dialogue: 0,0:19:12.36,0:19:13.44,Default,,0,0,0,,So of course, dispatch back to
Dialogue: 0,0:19:13.44,0:19:14.20,Default,,0,0,0,,the main queue.
Dialogue: 0,0:19:14.46,0:19:15.18,Default,,0,0,0,,Handle that error.
Dialogue: 0,0:19:15.83,0:19:18.24,Default,,0,0,0,,So that was the three API
Dialogue: 0,0:19:18.24,0:19:18.78,Default,,0,0,0,,essentials.
Dialogue: 0,0:19:19.96,0:19:21.10,Default,,0,0,0,,Getting the objects to drag,
Dialogue: 0,0:19:21.84,0:19:23.24,Default,,0,0,0,,getting a drag proposal and then
Dialogue: 0,0:19:23.24,0:19:27.15,Default,,0,0,0,,actually performing the drag.
Dialogue: 0,0:19:27.34,0:19:29.22,Default,,0,0,0,,Now we'll cycle back all the way
Dialogue: 0,0:19:29.22,0:19:30.05,Default,,0,0,0,,to the beginning of this
Dialogue: 0,0:19:30.05,0:19:31.26,Default,,0,0,0,,timeline again and talk about
Dialogue: 0,0:19:31.26,0:19:32.16,Default,,0,0,0,,all of the other delegate
Dialogue: 0,0:19:32.16,0:19:33.37,Default,,0,0,0,,methods because there's a lot
Dialogue: 0,0:19:33.37,0:19:33.63,Default,,0,0,0,,more.
Dialogue: 0,0:19:34.53,0:19:35.59,Default,,0,0,0,,First I'm going to talk about it
Dialogue: 0,0:19:35.59,0:19:36.53,Default,,0,0,0,,from the point of view of the
Dialogue: 0,0:19:36.53,0:19:38.47,Default,,0,0,0,,drag interaction delegate.
Dialogue: 0,0:19:39.00,0:19:41.39,Default,,0,0,0,,So immediately after you
Dialogue: 0,0:19:41.39,0:19:42.80,Default,,0,0,0,,provided those images, those
Dialogue: 0,0:19:42.80,0:19:45.29,Default,,0,0,0,,items to drag, if you don't
Dialogue: 0,0:19:45.29,0:19:46.86,Default,,0,0,0,,implement anything else we will
Dialogue: 0,0:19:46.86,0:19:48.41,Default,,0,0,0,,just lift up your entire view.
Dialogue: 0,0:19:48.71,0:19:50.61,Default,,0,0,0,,So the drag image, the preview
Dialogue: 0,0:19:50.61,0:19:52.11,Default,,0,0,0,,will be a snapshot of your
Dialogue: 0,0:19:52.11,0:19:52.80,Default,,0,0,0,,entire view.
Dialogue: 0,0:19:53.19,0:19:54.64,Default,,0,0,0,,If that is not what you want,
Dialogue: 0,0:19:55.42,0:19:56.77,Default,,0,0,0,,you can customize that preview.
Dialogue: 0,0:19:57.27,0:19:59.03,Default,,0,0,0,,So implement drag interaction
Dialogue: 0,0:19:59.03,0:20:01.18,Default,,0,0,0,,preview for lifting item and
Dialogue: 0,0:20:01.18,0:20:03.34,Default,,0,0,0,,return a targeted drag preview.
Dialogue: 0,0:20:04.00,0:20:05.07,Default,,0,0,0,,I'll explain what this means
Dialogue: 0,0:20:05.12,0:20:05.82,Default,,0,0,0,,with an example.
Dialogue: 0,0:20:07.12,0:20:08.68,Default,,0,0,0,,Targeted drag preview has really
Dialogue: 0,0:20:08.68,0:20:09.39,Default,,0,0,0,,two parts to it.
Dialogue: 0,0:20:09.67,0:20:11.16,Default,,0,0,0,,There's the drag preview part
Dialogue: 0,0:20:11.16,0:20:12.49,Default,,0,0,0,,and the target part.
Dialogue: 0,0:20:13.13,0:20:14.78,Default,,0,0,0,,The drag preview part is just
Dialogue: 0,0:20:14.78,0:20:16.18,Default,,0,0,0,,saying what does the item look
Dialogue: 0,0:20:16.18,0:20:17.44,Default,,0,0,0,,like while it's being dragged.
Dialogue: 0,0:20:17.52,0:20:18.65,Default,,0,0,0,,And you tell us that by
Dialogue: 0,0:20:18.65,0:20:19.71,Default,,0,0,0,,providing us view.
Dialogue: 0,0:20:20.41,0:20:21.79,Default,,0,0,0,,So in this case, I'm making an
Dialogue: 0,0:20:21.79,0:20:23.18,Default,,0,0,0,,image view containing an image
Dialogue: 0,0:20:23.18,0:20:24.33,Default,,0,0,0,,from my asset catalog.
Dialogue: 0,0:20:24.88,0:20:26.19,Default,,0,0,0,,That automatically gets sized
Dialogue: 0,0:20:26.19,0:20:26.97,Default,,0,0,0,,based on that image.
Dialogue: 0,0:20:27.02,0:20:27.90,Default,,0,0,0,,That's what my thing will look
Dialogue: 0,0:20:27.90,0:20:28.13,Default,,0,0,0,,like.
Dialogue: 0,0:20:29.26,0:20:30.95,Default,,0,0,0,,The second part is the target
Dialogue: 0,0:20:31.02,0:20:31.21,Default,,0,0,0,,part.
Dialogue: 0,0:20:31.54,0:20:32.45,Default,,0,0,0,,Now you'll note that that's a
Dialogue: 0,0:20:32.45,0:20:33.50,Default,,0,0,0,,freestanding view.
Dialogue: 0,0:20:33.50,0:20:34.83,Default,,0,0,0,,It's not in the view hierarchy
Dialogue: 0,0:20:34.83,0:20:35.21,Default,,0,0,0,,anywhere.
Dialogue: 0,0:20:35.73,0:20:37.17,Default,,0,0,0,,So UIKit doesn't know where to
Dialogue: 0,0:20:37.17,0:20:37.56,Default,,0,0,0,,show it.
Dialogue: 0,0:20:37.80,0:20:39.02,Default,,0,0,0,,You need to tell us with a
Dialogue: 0,0:20:39.02,0:20:39.37,Default,,0,0,0,,target.
Dialogue: 0,0:20:40.26,0:20:41.30,Default,,0,0,0,,A target is two things.
Dialogue: 0,0:20:41.90,0:20:43.86,Default,,0,0,0,,It's a containing view and it's
Dialogue: 0,0:20:43.86,0:20:45.26,Default,,0,0,0,,a location within that view.
Dialogue: 0,0:20:46.09,0:20:47.37,Default,,0,0,0,,So here for my containing view,
Dialogue: 0,0:20:47.37,0:20:48.13,Default,,0,0,0,,I'm going to use the
Dialogue: 0,0:20:48.13,0:20:49.14,Default,,0,0,0,,interactions view.
Dialogue: 0,0:20:49.14,0:20:50.20,Default,,0,0,0,,This is where the drag is
Dialogue: 0,0:20:50.20,0:20:50.54,Default,,0,0,0,,starting.
Dialogue: 0,0:20:51.32,0:20:52.79,Default,,0,0,0,,And for the location, I'll use
Dialogue: 0,0:20:52.85,0:20:54.89,Default,,0,0,0,,these sessions location in the
Dialogue: 0,0:20:54.89,0:20:55.19,Default,,0,0,0,,view.
Dialogue: 0,0:20:55.44,0:20:56.64,Default,,0,0,0,,This is where the user's finger
Dialogue: 0,0:20:56.64,0:20:56.93,Default,,0,0,0,,is.
Dialogue: 0,0:20:58.14,0:20:59.12,Default,,0,0,0,,I take those two things.
Dialogue: 0,0:20:59.12,0:21:01.66,Default,,0,0,0,,I put them together into a drag
Dialogue: 0,0:21:01.89,0:21:04.72,Default,,0,0,0,,preview target and then finally
Dialogue: 0,0:21:04.72,0:21:06.20,Default,,0,0,0,,I make a UI targeted drag
Dialogue: 0,0:21:06.23,0:21:08.23,Default,,0,0,0,,preview with that view with a
Dialogue: 0,0:21:08.23,0:21:09.65,Default,,0,0,0,,default set of parameters and
Dialogue: 0,0:21:09.65,0:21:10.37,Default,,0,0,0,,with that target.
Dialogue: 0,0:21:11.12,0:21:11.73,Default,,0,0,0,,That's the lift.
Dialogue: 0,0:21:12.80,0:21:13.60,Default,,0,0,0,,The other thing you can do
Dialogue: 0,0:21:13.60,0:21:15.73,Default,,0,0,0,,during the lift phase is animate
Dialogue: 0,0:21:15.73,0:21:17.47,Default,,0,0,0,,your own UI alongside the lift.
Dialogue: 0,0:21:17.84,0:21:18.75,Default,,0,0,0,,So maybe you've got other UI
Dialogue: 0,0:21:18.75,0:21:20.38,Default,,0,0,0,,inside of your view that needs
Dialogue: 0,0:21:20.38,0:21:21.86,Default,,0,0,0,,to be dimmed out during a drag.
Dialogue: 0,0:21:21.86,0:21:22.49,Default,,0,0,0,,Something like that.
Dialogue: 0,0:21:23.27,0:21:24.43,Default,,0,0,0,,You can implement this method.
Dialogue: 0,0:21:24.48,0:21:26.31,Default,,0,0,0,,Drug interaction will animate
Dialogue: 0,0:21:26.31,0:21:27.39,Default,,0,0,0,,lift with an animator.
Dialogue: 0,0:21:27.93,0:21:29.38,Default,,0,0,0,,And use that animator to add
Dialogue: 0,0:21:29.38,0:21:30.63,Default,,0,0,0,,animations alongside.
Dialogue: 0,0:21:31.07,0:21:31.95,Default,,0,0,0,,Here I'm just changing the
Dialogue: 0,0:21:31.95,0:21:33.12,Default,,0,0,0,,background color of a view.
Dialogue: 0,0:21:34.38,0:21:35.72,Default,,0,0,0,,You can also get the completion
Dialogue: 0,0:21:35.95,0:21:36.98,Default,,0,0,0,,of that lift animation.
Dialogue: 0,0:21:37.66,0:21:38.88,Default,,0,0,0,,Now note that with the lift
Dialogue: 0,0:21:38.88,0:21:40.22,Default,,0,0,0,,there's two ways that it can
Dialogue: 0,0:21:40.26,0:21:40.35,Default,,0,0,0,,end.
Dialogue: 0,0:21:40.66,0:21:41.89,Default,,0,0,0,,The user holds down their finger
Dialogue: 0,0:21:41.89,0:21:43.13,Default,,0,0,0,,long enough through the whole
Dialogue: 0,0:21:43.13,0:21:45.11,Default,,0,0,0,,lift will go all the way to the
Dialogue: 0,0:21:45.24,0:21:45.33,Default,,0,0,0,,end.
Dialogue: 0,0:21:45.50,0:21:46.31,Default,,0,0,0,,The position will be end.
Dialogue: 0,0:21:46.38,0:21:48.96,Default,,0,0,0,,If the user lifts their finger
Dialogue: 0,0:21:48.96,0:21:50.27,Default,,0,0,0,,partway through the lift, we'll
Dialogue: 0,0:21:50.27,0:21:51.65,Default,,0,0,0,,run it in reverse all the way
Dialogue: 0,0:21:51.65,0:21:53.02,Default,,0,0,0,,back to the beginning then we'll
Dialogue: 0,0:21:53.02,0:21:54.41,Default,,0,0,0,,tell you the position is start.
Dialogue: 0,0:21:54.90,0:21:58.67,Default,,0,0,0,,As that session begins after the
Dialogue: 0,0:21:58.67,0:22:00.40,Default,,0,0,0,,user moves their finger, we'll
Dialogue: 0,0:22:00.40,0:22:01.71,Default,,0,0,0,,tell you the session will begin.
Dialogue: 0,0:22:02.68,0:22:04.25,Default,,0,0,0,,We will then ask you some
Dialogue: 0,0:22:04.25,0:22:04.84,Default,,0,0,0,,questions.
Dialogue: 0,0:22:04.84,0:22:06.25,Default,,0,0,0,,For instance, we'll ask you does
Dialogue: 0,0:22:06.29,0:22:07.44,Default,,0,0,0,,this session allow the move
Dialogue: 0,0:22:07.44,0:22:08.07,Default,,0,0,0,,operation?
Dialogue: 0,0:22:09.18,0:22:10.92,Default,,0,0,0,,And then as that session moves
Dialogue: 0,0:22:10.92,0:22:12.65,Default,,0,0,0,,around, we'll tell you every
Dialogue: 0,0:22:12.65,0:22:13.29,Default,,0,0,0,,time it moves.
Dialogue: 0,0:22:13.29,0:22:14.26,Default,,0,0,0,,So you can find out the new
Dialogue: 0,0:22:14.26,0:22:16.96,Default,,0,0,0,,location there.
Dialogue: 0,0:22:17.18,0:22:19.05,Default,,0,0,0,,Also during this drag phase you
Dialogue: 0,0:22:19.05,0:22:21.01,Default,,0,0,0,,can add items to the drag and
Dialogue: 0,0:22:21.01,0:22:21.60,Default,,0,0,0,,drop session.
Dialogue: 0,0:22:22.09,0:22:23.02,Default,,0,0,0,,So I've got one touch that's
Dialogue: 0,0:22:23.02,0:22:23.99,Default,,0,0,0,,moving that drag around.
Dialogue: 0,0:22:24.04,0:22:25.82,Default,,0,0,0,,Another touch can come down and
Dialogue: 0,0:22:25.82,0:22:28.62,Default,,0,0,0,,tap on any view that has a drag
Dialogue: 0,0:22:28.62,0:22:29.20,Default,,0,0,0,,interaction.
Dialogue: 0,0:22:29.81,0:22:31.14,Default,,0,0,0,,It doesn't have to be the
Dialogue: 0,0:22:31.14,0:22:31.71,Default,,0,0,0,,original view.
Dialogue: 0,0:22:31.71,0:22:32.52,Default,,0,0,0,,It could be a completely
Dialogue: 0,0:22:32.52,0:22:33.07,Default,,0,0,0,,different view.
Dialogue: 0,0:22:33.90,0:22:35.61,Default,,0,0,0,,When we detect this tap, we will
Dialogue: 0,0:22:35.75,0:22:37.60,Default,,0,0,0,,ask the delegate for items to
Dialogue: 0,0:22:37.60,0:22:38.52,Default,,0,0,0,,add to the session.
Dialogue: 0,0:22:39.71,0:22:41.65,Default,,0,0,0,,You do that by implementing drag
Dialogue: 0,0:22:41.65,0:22:43.55,Default,,0,0,0,,interaction items for adding to
Dialogue: 0,0:22:43.55,0:22:45.14,Default,,0,0,0,,session with a touch and at a
Dialogue: 0,0:22:45.14,0:22:45.31,Default,,0,0,0,,point.
Dialogue: 0,0:22:45.36,0:22:47.48,Default,,0,0,0,,So you can hit test using that
Dialogue: 0,0:22:47.48,0:22:47.71,Default,,0,0,0,,point.
Dialogue: 0,0:22:48.34,0:22:49.94,Default,,0,0,0,,Find out what items, if any,
Dialogue: 0,0:22:50.12,0:22:51.10,Default,,0,0,0,,that you want to add to the
Dialogue: 0,0:22:51.10,0:22:51.48,Default,,0,0,0,,session.
Dialogue: 0,0:22:52.07,0:22:53.05,Default,,0,0,0,,If you've got some, return them.
Dialogue: 0,0:22:53.10,0:22:54.02,Default,,0,0,0,,If you don't have anything to
Dialogue: 0,0:22:54.02,0:22:55.62,Default,,0,0,0,,add just return an empty array
Dialogue: 0,0:22:56.23,0:22:58.51,Default,,0,0,0,,and then we will pass that touch
Dialogue: 0,0:22:58.57,0:22:59.89,Default,,0,0,0,,along just like we normally
Dialogue: 0,0:22:59.89,0:23:00.33,Default,,0,0,0,,would have.
Dialogue: 0,0:23:01.31,0:23:03.86,Default,,0,0,0,,And of course, you can customize
Dialogue: 0,0:23:03.86,0:23:05.35,Default,,0,0,0,,what the preview of those items
Dialogue: 0,0:23:05.35,0:23:06.41,Default,,0,0,0,,looks like.
Dialogue: 0,0:23:08.42,0:23:09.95,Default,,0,0,0,,Finally when the session ends,
Dialogue: 0,0:23:10.02,0:23:11.20,Default,,0,0,0,,these are releases their finger,
Dialogue: 0,0:23:11.71,0:23:13.18,Default,,0,0,0,,we'll tell you the session will
Dialogue: 0,0:23:13.18,0:23:14.58,Default,,0,0,0,,end with the operation that was
Dialogue: 0,0:23:14.58,0:23:14.98,Default,,0,0,0,,chosen.
Dialogue: 0,0:23:16.58,0:23:18.29,Default,,0,0,0,,And if it's ending in a cancel,
Dialogue: 0,0:23:18.29,0:23:19.18,Default,,0,0,0,,there's a cancellation
Dialogue: 0,0:23:19.18,0:23:20.20,Default,,0,0,0,,animation, which you can
Dialogue: 0,0:23:20.20,0:23:20.72,Default,,0,0,0,,customize.
Dialogue: 0,0:23:21.58,0:23:23.03,Default,,0,0,0,,So implementing drag interaction
Dialogue: 0,0:23:23.17,0:23:25.82,Default,,0,0,0,,preview for canceling item with
Dialogue: 0,0:23:25.82,0:23:26.29,Default,,0,0,0,,a default.
Dialogue: 0,0:23:26.29,0:23:27.46,Default,,0,0,0,,And return a targeted drag
Dialogue: 0,0:23:27.46,0:23:27.83,Default,,0,0,0,,preview.
Dialogue: 0,0:23:28.55,0:23:29.87,Default,,0,0,0,,You can return nil here and the
Dialogue: 0,0:23:29.87,0:23:30.96,Default,,0,0,0,,item will just disappear in
Dialogue: 0,0:23:30.96,0:23:31.34,Default,,0,0,0,,place.
Dialogue: 0,0:23:31.94,0:23:33.50,Default,,0,0,0,,You can use our default one and
Dialogue: 0,0:23:33.50,0:23:34.39,Default,,0,0,0,,change its target.
Dialogue: 0,0:23:34.75,0:23:35.81,Default,,0,0,0,,So if you know where that thing
Dialogue: 0,0:23:35.81,0:23:37.56,Default,,0,0,0,,should fly back to, all you have
Dialogue: 0,0:23:37.60,0:23:38.67,Default,,0,0,0,,to do is give it a new target,
Dialogue: 0,0:23:38.67,0:23:39.80,Default,,0,0,0,,it'll fly right back there.
Dialogue: 0,0:23:40.95,0:23:42.22,Default,,0,0,0,,You can animate alongside the
Dialogue: 0,0:23:42.22,0:23:43.63,Default,,0,0,0,,cancellation animation the same
Dialogue: 0,0:23:43.63,0:23:44.32,Default,,0,0,0,,way as before.
Dialogue: 0,0:23:44.99,0:23:46.31,Default,,0,0,0,,Finally, when we're done, we'll
Dialogue: 0,0:23:46.31,0:23:47.40,Default,,0,0,0,,tell you that the session did
Dialogue: 0,0:23:47.40,0:23:47.64,Default,,0,0,0,,end.
Dialogue: 0,0:23:48.62,0:23:50.78,Default,,0,0,0,,If it was a copy or a move,
Dialogue: 0,0:23:50.90,0:23:51.78,Default,,0,0,0,,there's no cancellation
Dialogue: 0,0:23:51.78,0:23:52.31,Default,,0,0,0,,animation.
Dialogue: 0,0:23:52.35,0:23:53.33,Default,,0,0,0,,So we just tell you the session
Dialogue: 0,0:23:53.33,0:23:55.41,Default,,0,0,0,,did end and we also tell you
Dialogue: 0,0:23:55.41,0:23:57.09,Default,,0,0,0,,when the data transfer is
Dialogue: 0,0:23:57.09,0:23:57.43,Default,,0,0,0,,finished.
Dialogue: 0,0:23:57.43,0:24:01.25,Default,,0,0,0,,So that was the drag interaction
Dialogue: 0,0:24:01.25,0:24:01.50,Default,,0,0,0,,side.
Dialogue: 0,0:24:01.50,0:24:02.64,Default,,0,0,0,,Now let's talk about the drop
Dialogue: 0,0:24:02.64,0:24:03.52,Default,,0,0,0,,interaction side.
Dialogue: 0,0:24:04.05,0:24:04.87,Default,,0,0,0,,This is a little more
Dialogue: 0,0:24:04.87,0:24:05.30,Default,,0,0,0,,interesting.
Dialogue: 0,0:24:05.30,0:24:06.51,Default,,0,0,0,,There's only one drag
Dialogue: 0,0:24:06.51,0:24:07.77,Default,,0,0,0,,interaction that's involved in
Dialogue: 0,0:24:07.77,0:24:09.59,Default,,0,0,0,,starting that drag but it can go
Dialogue: 0,0:24:09.59,0:24:10.77,Default,,0,0,0,,over lots of different views.
Dialogue: 0,0:24:10.92,0:24:12.34,Default,,0,0,0,,And they can all have their own
Dialogue: 0,0:24:12.42,0:24:14.54,Default,,0,0,0,,drop interaction with the same
Dialogue: 0,0:24:14.54,0:24:16.06,Default,,0,0,0,,delegate or multiple delegates
Dialogue: 0,0:24:16.69,0:24:18.07,Default,,0,0,0,,but in the end, only one of them
Dialogue: 0,0:24:18.07,0:24:19.66,Default,,0,0,0,,gets to choose what happens when
Dialogue: 0,0:24:19.66,0:24:24.52,Default,,0,0,0,,the user lifts their finger.
Dialogue: 0,0:24:24.68,0:24:26.53,Default,,0,0,0,,So when that drag and drop
Dialogue: 0,0:24:26.58,0:24:28.13,Default,,0,0,0,,session enters your view, you've
Dialogue: 0,0:24:28.13,0:24:29.14,Default,,0,0,0,,got a drop interaction.
Dialogue: 0,0:24:29.14,0:24:30.15,Default,,0,0,0,,The first thing we'll do is ask
Dialogue: 0,0:24:30.15,0:24:31.65,Default,,0,0,0,,you can you handle that session?
Dialogue: 0,0:24:32.45,0:24:33.34,Default,,0,0,0,,So we implement -- you can
Dialogue: 0,0:24:33.34,0:24:34.61,Default,,0,0,0,,implement this method drop
Dialogue: 0,0:24:34.61,0:24:36.06,Default,,0,0,0,,interaction can handle session.
Dialogue: 0,0:24:36.87,0:24:39.03,Default,,0,0,0,,And you can't check what data is
Dialogue: 0,0:24:39.03,0:24:39.96,Default,,0,0,0,,actually being dragged.
Dialogue: 0,0:24:39.96,0:24:41.03,Default,,0,0,0,,We don't give you access to that
Dialogue: 0,0:24:41.03,0:24:43.01,Default,,0,0,0,,yet but you can find the types
Dialogue: 0,0:24:43.01,0:24:44.07,Default,,0,0,0,,of data that are being dragged.
Dialogue: 0,0:24:44.47,0:24:45.29,Default,,0,0,0,,So let's say you're only
Dialogue: 0,0:24:45.29,0:24:46.27,Default,,0,0,0,,interested in images.
Dialogue: 0,0:24:46.69,0:24:48.81,Default,,0,0,0,,You can check session, can load
Dialogue: 0,0:24:48.81,0:24:50.49,Default,,0,0,0,,objects of class UIImage.
Dialogue: 0,0:24:51.69,0:24:52.70,Default,,0,0,0,,Or you can do something more
Dialogue: 0,0:24:52.70,0:24:53.94,Default,,0,0,0,,specific if you're interested in
Dialogue: 0,0:24:53.94,0:24:55.25,Default,,0,0,0,,specific uniform type
Dialogue: 0,0:24:55.25,0:24:57.31,Default,,0,0,0,,identifiers, you can check if
Dialogue: 0,0:24:57.51,0:24:58.82,Default,,0,0,0,,any items in that session
Dialogue: 0,0:24:59.06,0:25:01.42,Default,,0,0,0,,conform to that specific uniform
Dialogue: 0,0:25:01.42,0:25:02.20,Default,,0,0,0,,type identifier.
Dialogue: 0,0:25:02.51,0:25:03.82,Default,,0,0,0,,So here I'm using image PNG.
Dialogue: 0,0:25:03.87,0:25:05.47,Default,,0,0,0,,If I was only interested in PNG
Dialogue: 0,0:25:05.47,0:25:06.02,Default,,0,0,0,,images.
Dialogue: 0,0:25:08.58,0:25:09.98,Default,,0,0,0,,Next after you've said that you
Dialogue: 0,0:25:09.98,0:25:11.87,Default,,0,0,0,,can handle the drag session,
Dialogue: 0,0:25:12.74,0:25:14.09,Default,,0,0,0,,we'll tell you when that session
Dialogue: 0,0:25:14.14,0:25:15.03,Default,,0,0,0,,enters your view.
Dialogue: 0,0:25:15.03,0:25:16.18,Default,,0,0,0,,We'll tell you when it moves
Dialogue: 0,0:25:16.18,0:25:17.35,Default,,0,0,0,,around inside of your view.
Dialogue: 0,0:25:17.35,0:25:18.52,Default,,0,0,0,,Of course, you return a proposal
Dialogue: 0,0:25:18.52,0:25:20.70,Default,,0,0,0,,there and we'll tell you when it
Dialogue: 0,0:25:20.70,0:25:20.95,Default,,0,0,0,,exits.
Dialogue: 0,0:25:20.95,0:25:22.41,Default,,0,0,0,,And these can, of course, happen
Dialogue: 0,0:25:22.41,0:25:23.20,Default,,0,0,0,,multiple times.
Dialogue: 0,0:25:23.20,0:25:24.17,Default,,0,0,0,,Enter. Exit.
Dialogue: 0,0:25:25.09,0:25:26.86,Default,,0,0,0,,Enter. Exit.
Dialogue: 0,0:25:27.04,0:25:28.04,Default,,0,0,0,,Also while this session is
Dialogue: 0,0:25:28.04,0:25:29.14,Default,,0,0,0,,happening, spring loading might
Dialogue: 0,0:25:29.14,0:25:29.48,Default,,0,0,0,,happen.
Dialogue: 0,0:25:30.12,0:25:31.50,Default,,0,0,0,,So we have built-in support in
Dialogue: 0,0:25:31.50,0:25:33.44,Default,,0,0,0,,UIKit for spring loading several
Dialogue: 0,0:25:33.44,0:25:34.93,Default,,0,0,0,,different classes such as
Dialogue: 0,0:25:34.93,0:25:35.41,Default,,0,0,0,,UIButton.
Dialogue: 0,0:25:35.57,0:25:36.96,Default,,0,0,0,,All you have to do is say spring
Dialogue: 0,0:25:36.96,0:25:37.82,Default,,0,0,0,,loaded equals true.
Dialogue: 0,0:25:38.27,0:25:39.23,Default,,0,0,0,,When that drag and drop session
Dialogue: 0,0:25:39.23,0:25:41.53,Default,,0,0,0,,hovers over that button, the
Dialogue: 0,0:25:41.60,0:25:42.53,Default,,0,0,0,,button's action will
Dialogue: 0,0:25:42.53,0:25:43.94,Default,,0,0,0,,automatically run.
Dialogue: 0,0:25:45.04,0:25:46.24,Default,,0,0,0,,Or you can set up your own
Dialogue: 0,0:25:46.24,0:25:47.74,Default,,0,0,0,,spring-loaded interaction with
Dialogue: 0,0:25:47.74,0:25:49.17,Default,,0,0,0,,its own handler to be called
Dialogue: 0,0:25:49.17,0:25:50.66,Default,,0,0,0,,when it's time to activate and
Dialogue: 0,0:25:50.83,0:25:53.67,Default,,0,0,0,,add that to any view you like.
Dialogue: 0,0:25:54.68,0:25:56.76,Default,,0,0,0,,Finally when the session ends on
Dialogue: 0,0:25:56.76,0:25:57.87,Default,,0,0,0,,the drop interaction delegate,
Dialogue: 0,0:25:58.39,0:25:59.48,Default,,0,0,0,,we'll tell you the session did
Dialogue: 0,0:25:59.48,0:25:59.73,Default,,0,0,0,,end.
Dialogue: 0,0:25:59.73,0:26:02.15,Default,,0,0,0,,So every interaction, every drop
Dialogue: 0,0:26:02.15,0:26:03.63,Default,,0,0,0,,interaction that has ever seen
Dialogue: 0,0:26:03.63,0:26:04.99,Default,,0,0,0,,this session will be told that
Dialogue: 0,0:26:04.99,0:26:05.82,Default,,0,0,0,,it's ending.
Dialogue: 0,0:26:06.18,0:26:07.16,Default,,0,0,0,,If you were keeping track of it,
Dialogue: 0,0:26:07.16,0:26:08.63,Default,,0,0,0,,now you can stop keeping track
Dialogue: 0,0:26:09.38,0:26:10.75,Default,,0,0,0,,of it.
Dialogue: 0,0:26:11.02,0:26:12.88,Default,,0,0,0,,If there's a drop to perform, of
Dialogue: 0,0:26:12.88,0:26:13.85,Default,,0,0,0,,course there's more to do.
Dialogue: 0,0:26:13.85,0:26:14.93,Default,,0,0,0,,We talked about the perform
Dialogue: 0,0:26:14.93,0:26:15.39,Default,,0,0,0,,phase.
Dialogue: 0,0:26:15.60,0:26:16.21,Default,,0,0,0,,Now let's talk about the
Dialogue: 0,0:26:16.21,0:26:17.45,Default,,0,0,0,,animations and the data
Dialogue: 0,0:26:17.45,0:26:17.84,Default,,0,0,0,,transfer.
Dialogue: 0,0:26:18.38,0:26:21.00,Default,,0,0,0,,The animations are exactly the
Dialogue: 0,0:26:21.00,0:26:22.62,Default,,0,0,0,,same for drop animations as they
Dialogue: 0,0:26:22.62,0:26:23.53,Default,,0,0,0,,were for cancellation
Dialogue: 0,0:26:23.57,0:26:24.02,Default,,0,0,0,,animations.
Dialogue: 0,0:26:24.18,0:26:25.32,Default,,0,0,0,,Just the API names are
Dialogue: 0,0:26:25.32,0:26:25.71,Default,,0,0,0,,different.
Dialogue: 0,0:26:25.86,0:26:26.73,Default,,0,0,0,,So now it's on the drop
Dialogue: 0,0:26:26.73,0:26:28.55,Default,,0,0,0,,interaction delegate preview for
Dialogue: 0,0:26:28.55,0:26:29.84,Default,,0,0,0,,dropping item but you can do
Dialogue: 0,0:26:29.84,0:26:30.89,Default,,0,0,0,,exactly the same things.
Dialogue: 0,0:26:31.73,0:26:32.90,Default,,0,0,0,,You can animate alongside the
Dialogue: 0,0:26:32.90,0:26:33.53,Default,,0,0,0,,same way.
Dialogue: 0,0:26:34.16,0:26:35.44,Default,,0,0,0,,And finally when all those drop
Dialogue: 0,0:26:35.44,0:26:36.69,Default,,0,0,0,,animations of all the items are
Dialogue: 0,0:26:36.69,0:26:38.01,Default,,0,0,0,,done we'll tell you conclude
Dialogue: 0,0:26:38.01,0:26:38.36,Default,,0,0,0,,drop.
Dialogue: 0,0:26:38.85,0:26:41.82,Default,,0,0,0,,For the data transfer, of course
Dialogue: 0,0:26:41.89,0:26:43.06,Default,,0,0,0,,this closure gets called when
Dialogue: 0,0:26:43.06,0:26:43.95,Default,,0,0,0,,that data's available.
Dialogue: 0,0:26:44.47,0:26:45.37,Default,,0,0,0,,But something I didn't mention
Dialogue: 0,0:26:45.42,0:26:47.59,Default,,0,0,0,,earlier when you start the load
Dialogue: 0,0:26:48.18,0:26:49.47,Default,,0,0,0,,of the data you could get a
Dialogue: 0,0:26:49.52,0:26:50.42,Default,,0,0,0,,progress object.
Dialogue: 0,0:26:50.42,0:26:52.84,Default,,0,0,0,,And this progress object can
Dialogue: 0,0:26:52.84,0:26:54.06,Default,,0,0,0,,tell you how much of the data
Dialogue: 0,0:26:54.06,0:26:54.86,Default,,0,0,0,,transfer is done.
Dialogue: 0,0:26:55.28,0:26:56.86,Default,,0,0,0,,Is it finished yet and you can
Dialogue: 0,0:26:56.86,0:26:58.77,Default,,0,0,0,,even cancel the data transfer
Dialogue: 0,0:26:59.37,0:27:00.15,Default,,0,0,0,,from there?
Dialogue: 0,0:27:00.35,0:27:02.02,Default,,0,0,0,,Also you can get those progress
Dialogue: 0,0:27:02.02,0:27:04.28,Default,,0,0,0,,objects per item or there's a
Dialogue: 0,0:27:04.28,0:27:05.52,Default,,0,0,0,,progress object on the entire
Dialogue: 0,0:27:05.52,0:27:07.13,Default,,0,0,0,,session that wraps of all of the
Dialogue: 0,0:27:07.13,0:27:08.66,Default,,0,0,0,,progress of all the item
Dialogue: 0,0:27:08.66,0:27:08.88,Default,,0,0,0,,loading.
Dialogue: 0,0:27:09.44,0:27:11.07,Default,,0,0,0,,And there you have it.
Dialogue: 0,0:27:11.30,0:27:12.66,Default,,0,0,0,,That's the full timeline of drag
Dialogue: 0,0:27:12.66,0:27:13.01,Default,,0,0,0,,and drop.
Dialogue: 0,0:27:13.09,0:27:13.95,Default,,0,0,0,,That's everything that can
Dialogue: 0,0:27:13.95,0:27:14.31,Default,,0,0,0,,happen.
Dialogue: 0,0:27:15.21,0:27:16.20,Default,,0,0,0,,You know about these three
Dialogue: 0,0:27:16.20,0:27:17.77,Default,,0,0,0,,essential API functions that you
Dialogue: 0,0:27:17.77,0:27:19.12,Default,,0,0,0,,should implement to get drag and
Dialogue: 0,0:27:19.12,0:27:19.73,Default,,0,0,0,,drop working.
Dialogue: 0,0:27:19.73,0:27:21.29,Default,,0,0,0,,And I hope you got the real
Dialogue: 0,0:27:21.29,0:27:22.11,Default,,0,0,0,,message here, which is
Dialogue: 0,0:27:22.51,0:27:24.03,Default,,0,0,0,,customizing drag and drop is
Dialogue: 0,0:27:24.03,0:27:25.47,Default,,0,0,0,,done through these interaction
Dialogue: 0,0:27:25.47,0:27:25.89,Default,,0,0,0,,delegates.
Dialogue: 0,0:27:25.96,0:27:28.16,Default,,0,0,0,,That's how UIKit and your app
Dialogue: 0,0:27:28.16,0:27:28.98,Default,,0,0,0,,work together to make a
Dialogue: 0,0:27:28.98,0:27:30.24,Default,,0,0,0,,fantastic drag and drop
Dialogue: 0,0:27:30.24,0:27:30.77,Default,,0,0,0,,experience.
Dialogue: 0,0:27:32.32,0:27:33.55,Default,,0,0,0,,I'll hand you over to Emanuel
Dialogue: 0,0:27:33.55,0:27:34.84,Default,,0,0,0,,who will show you how to add
Dialogue: 0,0:27:34.84,0:27:35.66,Default,,0,0,0,,drag and drop to an app.
Dialogue: 0,0:27:36.52,0:27:43.24,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:27:43.74,0:27:44.82,Default,,0,0,0,,>> Using drag and drop
Dialogue: 0,0:27:44.82,0:27:46.60,Default,,0,0,0,,interactions, we created these
Dialogue: 0,0:27:46.60,0:27:47.72,Default,,0,0,0,,[inaudible] morphic pin board
Dialogue: 0,0:27:47.76,0:27:48.50,Default,,0,0,0,,for images.
Dialogue: 0,0:27:48.97,0:27:51.65,Default,,0,0,0,,So we can start a drag from
Dialogue: 0,0:27:51.65,0:27:52.84,Default,,0,0,0,,photos, for example.
Dialogue: 0,0:27:53.31,0:27:54.54,Default,,0,0,0,,We can bring it over the pin
Dialogue: 0,0:27:54.54,0:27:56.77,Default,,0,0,0,,board and when we drop it, we'll
Dialogue: 0,0:27:56.77,0:27:58.36,Default,,0,0,0,,copy the image and show it in
Dialogue: 0,0:27:58.36,0:27:58.88,Default,,0,0,0,,the pin board.
Dialogue: 0,0:27:59.29,0:28:03.64,Default,,0,0,0,,Notice the drop animation scales
Dialogue: 0,0:28:03.64,0:28:05.07,Default,,0,0,0,,down the image and when we
Dialogue: 0,0:28:05.07,0:28:06.12,Default,,0,0,0,,receive the data in the pin
Dialogue: 0,0:28:06.12,0:28:07.63,Default,,0,0,0,,board, we'll show the full
Dialogue: 0,0:28:07.69,0:28:08.17,Default,,0,0,0,,image.
Dialogue: 0,0:28:08.70,0:28:12.34,Default,,0,0,0,,We can also drag it on the pin
Dialogue: 0,0:28:12.34,0:28:13.60,Default,,0,0,0,,board and see that we're going
Dialogue: 0,0:28:13.71,0:28:15.24,Default,,0,0,0,,to dim the original image.
Dialogue: 0,0:28:15.63,0:28:17.36,Default,,0,0,0,,And we can also drag that back
Dialogue: 0,0:28:17.36,0:28:22.26,Default,,0,0,0,,into photos to add it hopefully,
Dialogue: 0,0:28:22.36,0:28:22.50,Default,,0,0,0,,yeah.
Dialogue: 0,0:28:23.79,0:28:26.79,Default,,0,0,0,,That's -- this used to work.
Dialogue: 0,0:28:27.26,0:28:29.82,Default,,0,0,0,,[Laughter] We can also drag it
Dialogue: 0,0:28:30.51,0:28:32.72,Default,,0,0,0,,in the same pin board and then
Dialogue: 0,0:28:32.81,0:28:34.83,Default,,0,0,0,,when we drop it, we will just
Dialogue: 0,0:28:34.83,0:28:35.47,Default,,0,0,0,,rearrange it.
Dialogue: 0,0:28:35.58,0:28:37.15,Default,,0,0,0,,And see? Look again at the
Dialogue: 0,0:28:37.15,0:28:37.79,Default,,0,0,0,,animation.
Dialogue: 0,0:28:38.07,0:28:39.86,Default,,0,0,0,,We dimmed the original image and
Dialogue: 0,0:28:39.86,0:28:41.70,Default,,0,0,0,,when we drop it, we hide the
Dialogue: 0,0:28:41.70,0:28:43.38,Default,,0,0,0,,original image and then we show
Dialogue: 0,0:28:43.38,0:28:44.30,Default,,0,0,0,,it in the new spot.
Dialogue: 0,0:28:44.68,0:28:46.48,Default,,0,0,0,,So let's switch back to the code
Dialogue: 0,0:28:46.48,0:28:47.90,Default,,0,0,0,,and see how this is implemented.
Dialogue: 0,0:28:49.66,0:28:52.00,Default,,0,0,0,,So we start in our main view
Dialogue: 0,0:28:52.00,0:28:54.36,Default,,0,0,0,,controller by adding a drop
Dialogue: 0,0:28:54.36,0:28:56.58,Default,,0,0,0,,interaction and a drag
Dialogue: 0,0:28:56.58,0:28:58.28,Default,,0,0,0,,interaction to our view.
Dialogue: 0,0:28:58.84,0:28:59.93,Default,,0,0,0,,And then we're going to set the
Dialogue: 0,0:28:59.93,0:29:02.08,Default,,0,0,0,,view controller as the delegate
Dialogue: 0,0:29:02.08,0:29:03.07,Default,,0,0,0,,of those interactions.
Dialogue: 0,0:29:04.35,0:29:06.09,Default,,0,0,0,,Then we're going to implement a
Dialogue: 0,0:29:06.09,0:29:09.32,Default,,0,0,0,,few drop interaction delegate
Dialogue: 0,0:29:09.32,0:29:09.83,Default,,0,0,0,,methods.
Dialogue: 0,0:29:10.14,0:29:11.63,Default,,0,0,0,,The first one is drop
Dialogue: 0,0:29:11.63,0:29:13.45,Default,,0,0,0,,interaction can handle session
Dialogue: 0,0:29:13.76,0:29:15.99,Default,,0,0,0,,and this will return true if the
Dialogue: 0,0:29:15.99,0:29:17.37,Default,,0,0,0,,session can load images.
Dialogue: 0,0:29:17.56,0:29:18.38,Default,,0,0,0,,It's very simple.
Dialogue: 0,0:29:19.14,0:29:20.98,Default,,0,0,0,,The second one is drop
Dialogue: 0,0:29:20.98,0:29:23.02,Default,,0,0,0,,interaction session did update.
Dialogue: 0,0:29:23.36,0:29:24.97,Default,,0,0,0,,And here we return a proposal
Dialogue: 0,0:29:25.00,0:29:27.30,Default,,0,0,0,,where we specify what kind of
Dialogue: 0,0:29:27.30,0:29:28.65,Default,,0,0,0,,operation we want to perform.
Dialogue: 0,0:29:29.07,0:29:31.19,Default,,0,0,0,,So we have two cases.
Dialogue: 0,0:29:31.63,0:29:35.02,Default,,0,0,0,,The first one is if the drag
Dialogue: 0,0:29:35.18,0:29:36.82,Default,,0,0,0,,started in another application,
Dialogue: 0,0:29:37.09,0:29:38.47,Default,,0,0,0,,we want to perform a copy
Dialogue: 0,0:29:38.47,0:29:39.06,Default,,0,0,0,,operation.
Dialogue: 0,0:29:39.28,0:29:41.66,Default,,0,0,0,,And we can check that by looking
Dialogue: 0,0:29:41.66,0:29:43.34,Default,,0,0,0,,at the session local drag
Dialogue: 0,0:29:43.34,0:29:44.19,Default,,0,0,0,,session property.
Dialogue: 0,0:29:44.56,0:29:47.43,Default,,0,0,0,,So if it's new it means that the
Dialogue: 0,0:29:47.43,0:29:49.11,Default,,0,0,0,,operation -- that the drag was
Dialogue: 0,0:29:49.11,0:29:50.54,Default,,0,0,0,,started in another application
Dialogue: 0,0:29:50.54,0:29:51.64,Default,,0,0,0,,and we're going to do a copy.
Dialogue: 0,0:29:52.06,0:29:53.16,Default,,0,0,0,,Otherwise, we are just
Dialogue: 0,0:29:53.16,0:29:54.66,Default,,0,0,0,,rearranging the item and we're
Dialogue: 0,0:29:54.66,0:29:55.95,Default,,0,0,0,,going to do a move operation.
Dialogue: 0,0:29:58.68,0:30:00.28,Default,,0,0,0,,Third, we're going to implement
Dialogue: 0,0:30:00.66,0:30:02.91,Default,,0,0,0,,drop interaction perform drop
Dialogue: 0,0:30:02.91,0:30:03.41,Default,,0,0,0,,session.
Dialogue: 0,0:30:04.10,0:30:06.08,Default,,0,0,0,,Again we only want to copy the
Dialogue: 0,0:30:06.08,0:30:08.15,Default,,0,0,0,,data if the drag's starting in
Dialogue: 0,0:30:08.15,0:30:09.07,Default,,0,0,0,,another application.
Dialogue: 0,0:30:09.07,0:30:11.10,Default,,0,0,0,,So again we do this check if the
Dialogue: 0,0:30:11.10,0:30:12.41,Default,,0,0,0,,local drag session is new.
Dialogue: 0,0:30:13.39,0:30:14.71,Default,,0,0,0,,And then we're going to perform
Dialogue: 0,0:30:14.71,0:30:17.05,Default,,0,0,0,,the drop, first by getting the
Dialogue: 0,0:30:17.45,0:30:19.68,Default,,0,0,0,,drop point of where the user
Dialogue: 0,0:30:19.68,0:30:21.83,Default,,0,0,0,,lifted the finger by calling
Dialogue: 0,0:30:21.83,0:30:24.12,Default,,0,0,0,,session location in view and
Dialogue: 0,0:30:24.12,0:30:26.23,Default,,0,0,0,,then we are going to go over
Dialogue: 0,0:30:26.33,0:30:28.00,Default,,0,0,0,,each drag item in the session
Dialogue: 0,0:30:28.37,0:30:31.55,Default,,0,0,0,,and call a helper function that
Dialogue: 0,0:30:31.55,0:30:33.28,Default,,0,0,0,,will load the image from the
Dialogue: 0,0:30:33.28,0:30:34.98,Default,,0,0,0,,item provider, put it in a new
Dialogue: 0,0:30:34.98,0:30:37.55,Default,,0,0,0,,image view, and then display it
Dialogue: 0,0:30:37.55,0:30:38.86,Default,,0,0,0,,in the pin board using that
Dialogue: 0,0:30:38.86,0:30:40.61,Default,,0,0,0,,center point that we got.
Dialogue: 0,0:30:44.18,0:30:47.71,Default,,0,0,0,,We also want to perform a drop
Dialogue: 0,0:30:47.92,0:30:49.99,Default,,0,0,0,,animation when we release the
Dialogue: 0,0:30:49.99,0:30:50.47,Default,,0,0,0,,finger.
Dialogue: 0,0:30:50.88,0:30:53.92,Default,,0,0,0,,So again we have two cases.
Dialogue: 0,0:30:54.27,0:30:56.19,Default,,0,0,0,,In drop interaction preview for
Dialogue: 0,0:30:56.19,0:30:58.36,Default,,0,0,0,,dropping item, we want to return
Dialogue: 0,0:30:59.00,0:31:02.14,Default,,0,0,0,,a preview that scales down when
Dialogue: 0,0:31:02.14,0:31:03.42,Default,,0,0,0,,the drag comes from another
Dialogue: 0,0:31:03.42,0:31:04.25,Default,,0,0,0,,application.
Dialogue: 0,0:31:04.62,0:31:06.90,Default,,0,0,0,,And otherwise, if we're moving
Dialogue: 0,0:31:06.90,0:31:09.26,Default,,0,0,0,,the image from the pin board we
Dialogue: 0,0:31:09.26,0:31:10.67,Default,,0,0,0,,are not going to apply any
Dialogue: 0,0:31:10.67,0:31:11.16,Default,,0,0,0,,effects.
Dialogue: 0,0:31:11.16,0:31:12.15,Default,,0,0,0,,We're just going to drop it in
Dialogue: 0,0:31:12.15,0:31:12.56,Default,,0,0,0,,place.
Dialogue: 0,0:31:16.05,0:31:19.42,Default,,0,0,0,,So we can check if the item is
Dialogue: 0,0:31:19.42,0:31:22.55,Default,,0,0,0,,coming from a local drag or from
Dialogue: 0,0:31:22.55,0:31:25.05,Default,,0,0,0,,an external drag by checking
Dialogue: 0,0:31:25.05,0:31:27.02,Default,,0,0,0,,this property on drag item,
Dialogue: 0,0:31:27.21,0:31:28.43,Default,,0,0,0,,which is called local object.
Dialogue: 0,0:31:29.42,0:31:32.04,Default,,0,0,0,,And if the item is coming from
Dialogue: 0,0:31:32.04,0:31:33.94,Default,,0,0,0,,another application, then we
Dialogue: 0,0:31:33.94,0:31:36.48,Default,,0,0,0,,return nil and this will have
Dialogue: 0,0:31:37.11,0:31:39.21,Default,,0,0,0,,the effect that we saw before.
Dialogue: 0,0:31:39.46,0:31:41.35,Default,,0,0,0,,Just we'll scale down the
Dialogue: 0,0:31:41.35,0:31:44.56,Default,,0,0,0,,preview and then it will stay in
Dialogue: 0,0:31:44.56,0:31:44.92,Default,,0,0,0,,place.
Dialogue: 0,0:31:45.27,0:31:47.83,Default,,0,0,0,,The default preview instead will
Dialogue: 0,0:31:47.83,0:31:49.06,Default,,0,0,0,,scale down and move to the
Dialogue: 0,0:31:49.06,0:31:50.37,Default,,0,0,0,,center of the pin board but
Dialogue: 0,0:31:50.37,0:31:51.43,Default,,0,0,0,,that's not what we want.
Dialogue: 0,0:31:51.98,0:31:54.61,Default,,0,0,0,,In the case we're moving an
Dialogue: 0,0:31:54.61,0:31:57.01,Default,,0,0,0,,image from the pin board.
Dialogue: 0,0:31:57.07,0:31:58.70,Default,,0,0,0,,So we're just rearranging it,
Dialogue: 0,0:31:59.40,0:32:01.56,Default,,0,0,0,,we're going to animate it in
Dialogue: 0,0:32:01.62,0:32:02.03,Default,,0,0,0,,place.
Dialogue: 0,0:32:02.76,0:32:04.83,Default,,0,0,0,,So to get that, we need to
Dialogue: 0,0:32:04.83,0:32:06.55,Default,,0,0,0,,retarget the default preview.
Dialogue: 0,0:32:06.93,0:32:09.48,Default,,0,0,0,,And as Kurt explained, we need a
Dialogue: 0,0:32:09.48,0:32:10.96,Default,,0,0,0,,container, which is the pin
Dialogue: 0,0:32:10.96,0:32:13.45,Default,,0,0,0,,board itself, and the center in
Dialogue: 0,0:32:13.45,0:32:16.94,Default,,0,0,0,,that view which is the center of
Dialogue: 0,0:32:17.01,0:32:17.56,Default,,0,0,0,,the preview.
Dialogue: 0,0:32:18.44,0:32:19.47,Default,,0,0,0,,And then we're just going to
Dialogue: 0,0:32:19.47,0:32:22.24,Default,,0,0,0,,retarget the default preview and
Dialogue: 0,0:32:22.32,0:32:23.65,Default,,0,0,0,,return that.
Dialogue: 0,0:32:25.74,0:32:27.20,Default,,0,0,0,,Next we're going to implement
Dialogue: 0,0:32:27.31,0:32:28.95,Default,,0,0,0,,drop interaction will animate
Dialogue: 0,0:32:28.95,0:32:30.13,Default,,0,0,0,,drop with animator.
Dialogue: 0,0:32:31.04,0:32:34.43,Default,,0,0,0,,Here we want to animate a local
Dialogue: 0,0:32:34.43,0:32:37.17,Default,,0,0,0,,move because as you've seen
Dialogue: 0,0:32:37.17,0:32:39.59,Default,,0,0,0,,before, we had dimmed out the
Dialogue: 0,0:32:39.59,0:32:41.12,Default,,0,0,0,,original image view and when we
Dialogue: 0,0:32:41.12,0:32:42.83,Default,,0,0,0,,drop it into a new place we're
Dialogue: 0,0:32:42.83,0:32:44.49,Default,,0,0,0,,going to hide the previous --
Dialogue: 0,0:32:44.86,0:32:45.95,Default,,0,0,0,,the image in the previous
Dialogue: 0,0:32:45.95,0:32:47.47,Default,,0,0,0,,location and then show it again
Dialogue: 0,0:32:47.77,0:32:49.90,Default,,0,0,0,,at the end of the animation into
Dialogue: 0,0:32:49.90,0:32:50.56,Default,,0,0,0,,the new spot.
Dialogue: 0,0:32:50.98,0:32:52.30,Default,,0,0,0,,So we're going to add an
Dialogue: 0,0:32:52.30,0:32:54.53,Default,,0,0,0,,alongside animation and we're
Dialogue: 0,0:32:54.53,0:32:57.19,Default,,0,0,0,,going to fade the drag item to
Dialogue: 0,0:32:57.52,0:32:59.20,Default,,0,0,0,,alpha equals 0.
Dialogue: 0,0:33:00.32,0:33:02.06,Default,,0,0,0,,And then at the end of the
Dialogue: 0,0:33:02.06,0:33:04.07,Default,,0,0,0,,animation, so by adding a
Dialogue: 0,0:33:04.07,0:33:07.36,Default,,0,0,0,,completion block, we're going to
Dialogue: 0,0:33:07.36,0:33:09.30,Default,,0,0,0,,set the new center of that image
Dialogue: 0,0:33:09.30,0:33:10.95,Default,,0,0,0,,view and then we're going to
Dialogue: 0,0:33:10.95,0:33:12.37,Default,,0,0,0,,show it back by setting its
Dialogue: 0,0:33:12.37,0:33:13.08,Default,,0,0,0,,alpha to 1.
Dialogue: 0,0:33:13.41,0:33:15.46,Default,,0,0,0,,And here you can see that we
Dialogue: 0,0:33:15.46,0:33:17.15,Default,,0,0,0,,are, again, checking a local
Dialogue: 0,0:33:17.15,0:33:17.58,Default,,0,0,0,,object.
Dialogue: 0,0:33:17.82,0:33:19.09,Default,,0,0,0,,In this case, I'm passing an
Dialogue: 0,0:33:19.09,0:33:22.03,Default,,0,0,0,,index so that I know where in my
Dialogue: 0,0:33:22.09,0:33:24.20,Default,,0,0,0,,model object the image is.
Dialogue: 0,0:33:24.67,0:33:26.25,Default,,0,0,0,,And we're going to see in a
Dialogue: 0,0:33:26.25,0:33:27.85,Default,,0,0,0,,moment in the drag interaction
Dialogue: 0,0:33:27.92,0:33:30.35,Default,,0,0,0,,how to set that up.
Dialogue: 0,0:33:30.65,0:33:32.69,Default,,0,0,0,,So I'm going into drag
Dialogue: 0,0:33:32.69,0:33:34.66,Default,,0,0,0,,interaction delegate.
Dialogue: 0,0:33:35.57,0:33:37.04,Default,,0,0,0,,I have to implement, first of
Dialogue: 0,0:33:37.04,0:33:39.51,Default,,0,0,0,,all, what kind of data I want to
Dialogue: 0,0:33:39.51,0:33:41.26,Default,,0,0,0,,pass in the drag.
Dialogue: 0,0:33:41.91,0:33:44.64,Default,,0,0,0,,And I install the interaction on
Dialogue: 0,0:33:44.64,0:33:45.55,Default,,0,0,0,,the whole pin board.
Dialogue: 0,0:33:45.96,0:33:48.77,Default,,0,0,0,,So what I want to do is give the
Dialogue: 0,0:33:48.77,0:33:51.22,Default,,0,0,0,,image that is under my finger.
Dialogue: 0,0:33:52.61,0:33:54.62,Default,,0,0,0,,So to do that, I first need to
Dialogue: 0,0:33:54.62,0:33:57.11,Default,,0,0,0,,get the touch of the drag by
Dialogue: 0,0:33:57.11,0:33:58.67,Default,,0,0,0,,calling again session location
Dialogue: 0,0:33:58.67,0:33:59.07,Default,,0,0,0,,in view.
Dialogue: 0,0:33:59.86,0:34:01.60,Default,,0,0,0,,And then if there is an image
Dialogue: 0,0:34:01.68,0:34:03.46,Default,,0,0,0,,under my finger, I want to get
Dialogue: 0,0:34:03.56,0:34:07.13,Default,,0,0,0,,the image, the data for that
Dialogue: 0,0:34:07.13,0:34:07.57,Default,,0,0,0,,image.
Dialogue: 0,0:34:08.26,0:34:09.86,Default,,0,0,0,,Wrap it into an item provider.
Dialogue: 0,0:34:10.45,0:34:12.11,Default,,0,0,0,,Wrap the item provider in a drag
Dialogue: 0,0:34:12.11,0:34:14.93,Default,,0,0,0,,item and then attach that
Dialogue: 0,0:34:14.93,0:34:16.31,Default,,0,0,0,,additional information that will
Dialogue: 0,0:34:16.31,0:34:18.45,Default,,0,0,0,,allow me in the drop side to
Dialogue: 0,0:34:18.45,0:34:20.61,Default,,0,0,0,,recognize that local drag item.
Dialogue: 0,0:34:25.44,0:34:26.65,Default,,0,0,0,,Next we need to provide a
Dialogue: 0,0:34:26.70,0:34:28.56,Default,,0,0,0,,preview for that item.
Dialogue: 0,0:34:28.98,0:34:31.49,Default,,0,0,0,,So we said before if we don't
Dialogue: 0,0:34:31.49,0:34:33.81,Default,,0,0,0,,provide a preview the drag
Dialogue: 0,0:34:33.81,0:34:35.80,Default,,0,0,0,,interaction by default will take
Dialogue: 0,0:34:35.80,0:34:37.33,Default,,0,0,0,,a snapshot of the whole view.
Dialogue: 0,0:34:37.86,0:34:39.70,Default,,0,0,0,,And we clearly don't want to do
Dialogue: 0,0:34:39.70,0:34:39.98,Default,,0,0,0,,that.
Dialogue: 0,0:34:39.98,0:34:41.59,Default,,0,0,0,,We just want to provide a
Dialogue: 0,0:34:41.59,0:34:43.23,Default,,0,0,0,,preview for the single image
Dialogue: 0,0:34:43.23,0:34:43.98,Default,,0,0,0,,that we're dragging.
Dialogue: 0,0:34:48.10,0:34:50.29,Default,,0,0,0,,So we do that by getting the
Dialogue: 0,0:34:50.29,0:34:53.28,Default,,0,0,0,,index of the drag item, we get
Dialogue: 0,0:34:53.38,0:34:55.70,Default,,0,0,0,,its associated image view and
Dialogue: 0,0:34:55.70,0:34:57.54,Default,,0,0,0,,then we pass that as a targeted
Dialogue: 0,0:34:57.60,0:34:57.97,Default,,0,0,0,,preview.
Dialogue: 0,0:35:01.16,0:35:04.16,Default,,0,0,0,,Finally, we want to dim out the
Dialogue: 0,0:35:04.16,0:35:05.71,Default,,0,0,0,,original image view once we
Dialogue: 0,0:35:05.71,0:35:07.05,Default,,0,0,0,,start a drag.
Dialogue: 0,0:35:07.48,0:35:09.73,Default,,0,0,0,,So we're going to add a
Dialogue: 0,0:35:09.95,0:35:12.45,Default,,0,0,0,,completion block to these drag
Dialogue: 0,0:35:12.45,0:35:15.98,Default,,0,0,0,,interaction animator pass in a
Dialogue: 0,0:35:16.06,0:35:19.15,Default,,0,0,0,,will animate lift delegate and
Dialogue: 0,0:35:19.21,0:35:20.84,Default,,0,0,0,,so we're going to add the
Dialogue: 0,0:35:20.84,0:35:23.09,Default,,0,0,0,,completion block and the lift
Dialogue: 0,0:35:23.13,0:35:23.49,Default,,0,0,0,,indent.
Dialogue: 0,0:35:23.55,0:35:26.12,Default,,0,0,0,,So if the position is end then
Dialogue: 0,0:35:26.23,0:35:28.32,Default,,0,0,0,,we're going to fade the original
Dialogue: 0,0:35:28.35,0:35:30.89,Default,,0,0,0,,item to alpha .5.
Dialogue: 0,0:35:31.42,0:35:34.15,Default,,0,0,0,,And that's really it.
Dialogue: 0,0:35:34.51,0:35:38.03,Default,,0,0,0,,So you seen how simple it is to
Dialogue: 0,0:35:38.39,0:35:40.49,Default,,0,0,0,,add drag and drop interactions.
Dialogue: 0,0:35:41.05,0:35:42.89,Default,,0,0,0,,These example also contains --
Dialogue: 0,0:35:43.31,0:35:46.43,Default,,0,0,0,,also shows how to implement a
Dialogue: 0,0:35:46.43,0:35:48.17,Default,,0,0,0,,paste configuration that you can
Dialogue: 0,0:35:48.17,0:35:49.81,Default,,0,0,0,,use together with a drop
Dialogue: 0,0:35:49.81,0:35:52.10,Default,,0,0,0,,interaction and the sample code
Dialogue: 0,0:35:52.10,0:35:53.54,Default,,0,0,0,,will be available online.
Dialogue: 0,0:35:53.54,0:35:54.93,Default,,0,0,0,,So make sure to check it out.
Dialogue: 0,0:35:55.63,0:35:55.96,Default,,0,0,0,,Back to Bruce.
Dialogue: 0,0:35:56.52,0:35:58.59,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:35:59.09,0:36:03.55,Default,,0,0,0,,>> Thanks, Eman.
Dialogue: 0,0:36:03.94,0:36:05.63,Default,,0,0,0,,Okay. So by now you guys are
Dialogue: 0,0:36:05.63,0:36:07.19,Default,,0,0,0,,just going to run back to your
Dialogue: 0,0:36:07.19,0:36:07.61,Default,,0,0,0,,laptops.
Dialogue: 0,0:36:07.61,0:36:08.83,Default,,0,0,0,,I see you already have them and
Dialogue: 0,0:36:08.83,0:36:10.27,Default,,0,0,0,,add drag and drop to your apps.
Dialogue: 0,0:36:10.76,0:36:12.55,Default,,0,0,0,,And so I'm just going to share a
Dialogue: 0,0:36:12.55,0:36:14.73,Default,,0,0,0,,couple of words of advice about
Dialogue: 0,0:36:14.73,0:36:16.56,Default,,0,0,0,,how to expedite that process.
Dialogue: 0,0:36:16.72,0:36:19.42,Default,,0,0,0,,First of all, don't do that
Dialogue: 0,0:36:19.42,0:36:20.00,Default,,0,0,0,,right away.
Dialogue: 0,0:36:20.28,0:36:21.67,Default,,0,0,0,,Explore the system.
Dialogue: 0,0:36:21.67,0:36:23.06,Default,,0,0,0,,See what we've done.
Dialogue: 0,0:36:23.06,0:36:24.39,Default,,0,0,0,,See the types of set down
Dialogue: 0,0:36:24.39,0:36:25.90,Default,,0,0,0,,animations that we have
Dialogue: 0,0:36:25.90,0:36:27.65,Default,,0,0,0,,implemented and the types of
Dialogue: 0,0:36:27.65,0:36:29.53,Default,,0,0,0,,data that we actually transfer.
Dialogue: 0,0:36:29.53,0:36:30.92,Default,,0,0,0,,I think you'll be surprised.
Dialogue: 0,0:36:31.50,0:36:32.45,Default,,0,0,0,,And then go simple.
Dialogue: 0,0:36:32.45,0:36:33.94,Default,,0,0,0,,Try to add a drop target.
Dialogue: 0,0:36:33.98,0:36:34.93,Default,,0,0,0,,Maybe using a paste
Dialogue: 0,0:36:34.93,0:36:36.37,Default,,0,0,0,,configuration and just kind of
Dialogue: 0,0:36:36.37,0:36:37.96,Default,,0,0,0,,get a feel for how it works.
Dialogue: 0,0:36:39.17,0:36:40.82,Default,,0,0,0,,Experiment with a drag source.
Dialogue: 0,0:36:41.36,0:36:44.00,Default,,0,0,0,,And even try to spring load a
Dialogue: 0,0:36:44.00,0:36:44.83,Default,,0,0,0,,control or two.
Dialogue: 0,0:36:44.83,0:36:46.93,Default,,0,0,0,,And then you're going to look at
Dialogue: 0,0:36:46.93,0:36:49.80,Default,,0,0,0,,it and say it just doesn't look
Dialogue: 0,0:36:49.80,0:36:50.11,Default,,0,0,0,,right.
Dialogue: 0,0:36:50.22,0:36:51.28,Default,,0,0,0,,What are we missing?
Dialogue: 0,0:36:51.79,0:36:52.57,Default,,0,0,0,,And that's when you're going to
Dialogue: 0,0:36:52.57,0:36:54.18,Default,,0,0,0,,have to dive a little bit deeper
Dialogue: 0,0:36:54.18,0:36:55.43,Default,,0,0,0,,into these drag and drop APIs
Dialogue: 0,0:36:55.43,0:36:57.16,Default,,0,0,0,,because there's a lot of them.
Dialogue: 0,0:36:57.52,0:36:58.98,Default,,0,0,0,,And we've made this easy for
Dialogue: 0,0:36:58.98,0:36:59.20,Default,,0,0,0,,you.
Dialogue: 0,0:36:59.82,0:37:01.16,Default,,0,0,0,,And so I'm going to refer back
Dialogue: 0,0:37:01.16,0:37:02.39,Default,,0,0,0,,to this picture again and I'm
Dialogue: 0,0:37:02.39,0:37:03.79,Default,,0,0,0,,just going to start out there is
Dialogue: 0,0:37:03.79,0:37:06.04,Default,,0,0,0,,a talk on mastering the drag and
Dialogue: 0,0:37:06.04,0:37:08.10,Default,,0,0,0,,drop APIs which is going to even
Dialogue: 0,0:37:08.10,0:37:10.31,Default,,0,0,0,,deeper into them than what Kurt
Dialogue: 0,0:37:10.94,0:37:12.11,Default,,0,0,0,,gave you an overview of.
Dialogue: 0,0:37:12.86,0:37:14.59,Default,,0,0,0,,There's going to be a session on
Dialogue: 0,0:37:14.81,0:37:16.10,Default,,0,0,0,,what we've done with NS item
Dialogue: 0,0:37:16.10,0:37:16.65,Default,,0,0,0,,provider.
Dialogue: 0,0:37:17.21,0:37:18.15,Default,,0,0,0,,And you're going to find it
Dialogue: 0,0:37:18.15,0:37:18.84,Default,,0,0,0,,fascinating.
Dialogue: 0,0:37:18.84,0:37:21.09,Default,,0,0,0,,We can drag and drop files, for
Dialogue: 0,0:37:21.09,0:37:22.52,Default,,0,0,0,,example, that you can open in
Dialogue: 0,0:37:22.52,0:37:23.07,Default,,0,0,0,,place.
Dialogue: 0,0:37:23.25,0:37:25.37,Default,,0,0,0,,And you can actually provision
Dialogue: 0,0:37:25.37,0:37:27.62,Default,,0,0,0,,the data from your source using
Dialogue: 0,0:37:27.62,0:37:28.69,Default,,0,0,0,,a file provider.
Dialogue: 0,0:37:28.69,0:37:29.86,Default,,0,0,0,,And we're going to go into that
Dialogue: 0,0:37:29.86,0:37:31.22,Default,,0,0,0,,in detail in that talk.
Dialogue: 0,0:37:33.09,0:37:33.89,Default,,0,0,0,,There's a bit more.
Dialogue: 0,0:37:33.89,0:37:38.27,Default,,0,0,0,,For example, text view has a
Dialogue: 0,0:37:38.27,0:37:38.81,Default,,0,0,0,,delegate.
Dialogue: 0,0:37:39.26,0:37:40.45,Default,,0,0,0,,A higher level delegate for
Dialogue: 0,0:37:40.45,0:37:41.58,Default,,0,0,0,,supporting drag and drop.
Dialogue: 0,0:37:41.58,0:37:42.50,Default,,0,0,0,,So if you have custom
Dialogue: 0,0:37:42.50,0:37:44.29,Default,,0,0,0,,attachments or want some kind of
Dialogue: 0,0:37:44.29,0:37:46.79,Default,,0,0,0,,custom text processing you
Dialogue: 0,0:37:46.79,0:37:49.10,Default,,0,0,0,,should explore the APIs on those
Dialogue: 0,0:37:49.10,0:37:49.77,Default,,0,0,0,,delegates.
Dialogue: 0,0:37:50.69,0:37:52.03,Default,,0,0,0,,And I know many of you have
Dialogue: 0,0:37:52.07,0:37:53.68,Default,,0,0,0,,table views and collection views
Dialogue: 0,0:37:53.68,0:37:55.41,Default,,0,0,0,,in your apps, and if you want
Dialogue: 0,0:37:55.41,0:37:56.86,Default,,0,0,0,,them to support drag and drop
Dialogue: 0,0:37:56.86,0:37:58.75,Default,,0,0,0,,we've created some great higher
Dialogue: 0,0:37:58.75,0:37:59.43,Default,,0,0,0,,level APIs.
Dialogue: 0,0:37:59.43,0:38:00.95,Default,,0,0,0,,And there's an entire talk
Dialogue: 0,0:38:00.95,0:38:03.54,Default,,0,0,0,,dedicated to that topic which
Dialogue: 0,0:38:03.54,0:38:04.75,Default,,0,0,0,,you should really go see.
Dialogue: 0,0:38:06.12,0:38:07.71,Default,,0,0,0,,As usual there's a lot more
Dialogue: 0,0:38:07.71,0:38:09.66,Default,,0,0,0,,information about this talk in
Dialogue: 0,0:38:09.66,0:38:11.26,Default,,0,0,0,,particular along with the sample
Dialogue: 0,0:38:11.26,0:38:12.07,Default,,0,0,0,,app at this link.
Dialogue: 0,0:38:13.02,0:38:14.34,Default,,0,0,0,,Here are some of the related
Dialogue: 0,0:38:14.34,0:38:15.02,Default,,0,0,0,,sessions.
Dialogue: 0,0:38:15.25,0:38:17.19,Default,,0,0,0,,I added one about the file
Dialogue: 0,0:38:17.19,0:38:18.79,Default,,0,0,0,,provider enhancements as well as
Dialogue: 0,0:38:18.79,0:38:20.68,Default,,0,0,0,,how you can -- one on Spotlight
Dialogue: 0,0:38:20.96,0:38:21.97,Default,,0,0,0,,which we'll talk about how you
Dialogue: 0,0:38:21.97,0:38:23.82,Default,,0,0,0,,can actually drag and drop items
Dialogue: 0,0:38:23.82,0:38:25.71,Default,,0,0,0,,that your -- that Spotlight
Dialogue: 0,0:38:25.71,0:38:26.85,Default,,0,0,0,,finds for your app.
Dialogue: 0,0:38:26.85,0:38:28.20,Default,,0,0,0,,If you have any questions,
Dialogue: 0,0:38:28.53,0:38:30.93,Default,,0,0,0,,please drop by and I hope you
Dialogue: 0,0:38:30.93,0:38:32.98,Default,,0,0,0,,guys have a great WWDC.
Dialogue: 0,0:38:33.52,0:38:36.50,Default,,0,0,0,,[ Clapping ]
