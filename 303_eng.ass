[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.52,0:00:26.64,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:00:27.14,0:00:28.10,Default,,0,0,0,,Welcome to What's New in
Dialogue: 0,0:00:28.10,0:00:28.66,Default,,0,0,0,,StoreKit.
Dialogue: 0,0:00:29.12,0:00:30.26,Default,,0,0,0,,My name is Pete Hare, and I'm an
Dialogue: 0,0:00:30.26,0:00:31.74,Default,,0,0,0,,engineer on the App Store Team
Dialogue: 0,0:00:31.74,0:00:33.59,Default,,0,0,0,,here, at Apple.
Dialogue: 0,0:00:33.80,0:00:35.29,Default,,0,0,0,,In-app purchases represent a
Dialogue: 0,0:00:35.29,0:00:37.00,Default,,0,0,0,,huge percentage of revenue,
Dialogue: 0,0:00:37.09,0:00:38.29,Default,,0,0,0,,generated by apps on the App
Dialogue: 0,0:00:38.29,0:00:38.64,Default,,0,0,0,,Store.
Dialogue: 0,0:00:38.64,0:00:40.12,Default,,0,0,0,,So, to be able to implement them
Dialogue: 0,0:00:40.12,0:00:41.55,Default,,0,0,0,,and to sell content to your
Dialogue: 0,0:00:41.55,0:00:42.04,Default,,0,0,0,,users.
Dialogue: 0,0:00:42.09,0:00:42.96,Default,,0,0,0,,And to provide a great
Dialogue: 0,0:00:42.96,0:00:43.84,Default,,0,0,0,,experience throughout this
Dialogue: 0,0:00:43.84,0:00:44.84,Default,,0,0,0,,process, is becoming
Dialogue: 0,0:00:45.07,0:00:46.58,Default,,0,0,0,,increasingly important for you
Dialogue: 0,0:00:46.58,0:00:47.39,Default,,0,0,0,,and your business.
Dialogue: 0,0:00:48.37,0:00:49.33,Default,,0,0,0,,Now, we're working on ways for
Dialogue: 0,0:00:49.33,0:00:50.42,Default,,0,0,0,,you to do all of these things,
Dialogue: 0,0:00:50.42,0:00:51.48,Default,,0,0,0,,even more effectively.
Dialogue: 0,0:00:51.48,0:00:52.93,Default,,0,0,0,,And we're here, today, to talk
Dialogue: 0,0:00:52.93,0:00:54.06,Default,,0,0,0,,to you about some enhancements
Dialogue: 0,0:00:54.06,0:00:55.02,Default,,0,0,0,,to the StoreKit framework.
Dialogue: 0,0:00:55.75,0:00:57.31,Default,,0,0,0,,StoreKit is the framework that
Dialogue: 0,0:00:57.31,0:00:58.54,Default,,0,0,0,,powers in-app purchases, amongst
Dialogue: 0,0:00:58.59,0:00:59.54,Default,,0,0,0,,some other store related
Dialogue: 0,0:00:59.79,0:01:00.40,Default,,0,0,0,,abilities.
Dialogue: 0,0:01:00.71,0:01:01.38,Default,,0,0,0,,But we've got some new
Dialogue: 0,0:01:01.38,0:01:02.89,Default,,0,0,0,,advancements in iOS 11.
Dialogue: 0,0:01:03.56,0:01:04.64,Default,,0,0,0,,Firstly, you're going to have
Dialogue: 0,0:01:04.64,0:01:05.83,Default,,0,0,0,,the ability now, to promote your
Dialogue: 0,0:01:05.83,0:01:07.50,Default,,0,0,0,,in-app purchases directly in the
Dialogue: 0,0:01:07.50,0:01:08.08,Default,,0,0,0,,App Store app.
Dialogue: 0,0:01:08.61,0:01:09.91,Default,,0,0,0,,So, a user can buy an in-app
Dialogue: 0,0:01:09.91,0:01:11.48,Default,,0,0,0,,purchase and complete that in
Dialogue: 0,0:01:11.48,0:01:12.37,Default,,0,0,0,,your own application.
Dialogue: 0,0:01:13.12,0:01:14.94,Default,,0,0,0,,Secondly, we're introducing some
Dialogue: 0,0:01:14.94,0:01:15.88,Default,,0,0,0,,enhancements to the
Dialogue: 0,0:01:15.88,0:01:17.24,Default,,0,0,0,,subscription, auto-renewable
Dialogue: 0,0:01:17.24,0:01:18.10,Default,,0,0,0,,subscription flows.
Dialogue: 0,0:01:18.31,0:01:19.37,Default,,0,0,0,,We've got new server to server
Dialogue: 0,0:01:19.37,0:01:20.81,Default,,0,0,0,,subscription notifications.
Dialogue: 0,0:01:20.81,0:01:21.97,Default,,0,0,0,,This is really going to make
Dialogue: 0,0:01:21.97,0:01:22.88,Default,,0,0,0,,your lives easier if you're
Dialogue: 0,0:01:22.88,0:01:23.82,Default,,0,0,0,,dealing with auto-renewable
Dialogue: 0,0:01:23.82,0:01:24.52,Default,,0,0,0,,subscriptions.
Dialogue: 0,0:01:24.62,0:01:24.79,Default,,0,0,0,,Yeah.
Dialogue: 0,0:01:25.52,0:01:28.56,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:01:29.06,0:01:30.38,Default,,0,0,0,,We've also got some new detailed
Dialogue: 0,0:01:30.38,0:01:32.08,Default,,0,0,0,,subscription status information
Dialogue: 0,0:01:32.24,0:01:33.25,Default,,0,0,0,,when you're dealing with service
Dialogue: 0,0:01:33.25,0:01:33.88,Default,,0,0,0,,side management.
Dialogue: 0,0:01:33.88,0:01:34.60,Default,,0,0,0,,This is going to give you much
Dialogue: 0,0:01:34.64,0:01:36.04,Default,,0,0,0,,greater insight into some of
Dialogue: 0,0:01:36.04,0:01:37.19,Default,,0,0,0,,those business questions about
Dialogue: 0,0:01:37.19,0:01:38.51,Default,,0,0,0,,individual users and their
Dialogue: 0,0:01:38.51,0:01:39.43,Default,,0,0,0,,subscription states.
Dialogue: 0,0:01:39.77,0:01:41.98,Default,,0,0,0,,We also, introduced earlier this
Dialogue: 0,0:01:41.98,0:01:43.24,Default,,0,0,0,,year, the ability for you to
Dialogue: 0,0:01:43.24,0:01:44.51,Default,,0,0,0,,respond to user's reviews on the
Dialogue: 0,0:01:44.51,0:01:44.96,Default,,0,0,0,,App Store.
Dialogue: 0,0:01:45.29,0:01:46.43,Default,,0,0,0,,And along with that, we have
Dialogue: 0,0:01:46.43,0:01:47.67,Default,,0,0,0,,some new enhancements in the
Dialogue: 0,0:01:47.67,0:01:49.09,Default,,0,0,0,,ways you can ask for ratings and
Dialogue: 0,0:01:49.09,0:01:49.67,Default,,0,0,0,,reviews.
Dialogue: 0,0:01:50.36,0:01:52.00,Default,,0,0,0,,Now, before we go into some of
Dialogue: 0,0:01:52.00,0:01:53.46,Default,,0,0,0,,these new features, I'd like to
Dialogue: 0,0:01:53.46,0:01:54.97,Default,,0,0,0,,start with an overview of the
Dialogue: 0,0:01:54.97,0:01:56.25,Default,,0,0,0,,in-app purchase process.
Dialogue: 0,0:01:56.29,0:01:57.50,Default,,0,0,0,,So, let's look at implementing
Dialogue: 0,0:01:57.50,0:01:58.46,Default,,0,0,0,,in-app purchases in your
Dialogue: 0,0:01:58.46,0:01:59.05,Default,,0,0,0,,application.
Dialogue: 0,0:02:00.24,0:02:02.39,Default,,0,0,0,,Now, in app purchases haven't
Dialogue: 0,0:02:02.39,0:02:03.16,Default,,0,0,0,,really changed much.
Dialogue: 0,0:02:03.16,0:02:04.55,Default,,0,0,0,,They were introduced in iOS 3.
Dialogue: 0,0:02:04.89,0:02:07.01,Default,,0,0,0,,An in-app purchase is really the
Dialogue: 0,0:02:07.01,0:02:08.18,Default,,0,0,0,,ability for you to sell digital
Dialogue: 0,0:02:08.18,0:02:09.71,Default,,0,0,0,,content or a service inside your
Dialogue: 0,0:02:09.71,0:02:09.82,Default,,0,0,0,,app.
Dialogue: 0,0:02:10.71,0:02:11.72,Default,,0,0,0,,So, when it comes to physical
Dialogue: 0,0:02:11.72,0:02:13.21,Default,,0,0,0,,goods or services, it's not
Dialogue: 0,0:02:13.21,0:02:14.24,Default,,0,0,0,,really appropriate for in-app
Dialogue: 0,0:02:14.24,0:02:14.68,Default,,0,0,0,,purchases.
Dialogue: 0,0:02:14.68,0:02:15.71,Default,,0,0,0,,We provide things like Apple
Dialogue: 0,0:02:15.71,0:02:17.33,Default,,0,0,0,,Pay, and you can implement your
Dialogue: 0,0:02:17.33,0:02:18.26,Default,,0,0,0,,own payment systems to
Dialogue: 0,0:02:18.26,0:02:19.52,Default,,0,0,0,,accomplish selling physical
Dialogue: 0,0:02:19.52,0:02:19.86,Default,,0,0,0,,goods.
Dialogue: 0,0:02:20.02,0:02:20.84,Default,,0,0,0,,But when it comes to digital
Dialogue: 0,0:02:20.84,0:02:22.33,Default,,0,0,0,,services, that's what in-app
Dialogue: 0,0:02:22.33,0:02:24.71,Default,,0,0,0,,purchases are good for.
Dialogue: 0,0:02:24.90,0:02:26.07,Default,,0,0,0,,We have four different types of
Dialogue: 0,0:02:26.07,0:02:27.09,Default,,0,0,0,,in-app purchases that you can
Dialogue: 0,0:02:27.09,0:02:27.47,Default,,0,0,0,,use.
Dialogue: 0,0:02:28.28,0:02:29.71,Default,,0,0,0,,Firstly, we have consumable
Dialogue: 0,0:02:29.71,0:02:30.25,Default,,0,0,0,,products.
Dialogue: 0,0:02:30.49,0:02:31.50,Default,,0,0,0,,Now, this type of in-app
Dialogue: 0,0:02:31.50,0:02:32.67,Default,,0,0,0,,purchase is the kind of in-app
Dialogue: 0,0:02:32.67,0:02:34.18,Default,,0,0,0,,purchase that can be consumed,
Dialogue: 0,0:02:34.18,0:02:35.65,Default,,0,0,0,,as the name suggests, and used
Dialogue: 0,0:02:35.65,0:02:36.31,Default,,0,0,0,,up by a user.
Dialogue: 0,0:02:36.45,0:02:38.23,Default,,0,0,0,,So, this might be gold coins in
Dialogue: 0,0:02:38.23,0:02:39.92,Default,,0,0,0,,a game that a user buys and
Dialogue: 0,0:02:39.92,0:02:40.57,Default,,0,0,0,,maybe spends.
Dialogue: 0,0:02:40.87,0:02:42.07,Default,,0,0,0,,And it doesn't persist around
Dialogue: 0,0:02:42.07,0:02:43.49,Default,,0,0,0,,subsequent restores or new
Dialogue: 0,0:02:43.49,0:02:44.09,Default,,0,0,0,,devices.
Dialogue: 0,0:02:45.18,0:02:46.85,Default,,0,0,0,,The second kind is a
Dialogue: 0,0:02:46.85,0:02:47.99,Default,,0,0,0,,non-consumable product.
Dialogue: 0,0:02:48.46,0:02:50.30,Default,,0,0,0,,It's a little different than the
Dialogue: 0,0:02:50.30,0:02:51.28,Default,,0,0,0,,consumable product in that it
Dialogue: 0,0:02:51.28,0:02:52.03,Default,,0,0,0,,does persist.
Dialogue: 0,0:02:52.03,0:02:52.99,Default,,0,0,0,,So, this might be more
Dialogue: 0,0:02:52.99,0:02:53.96,Default,,0,0,0,,appropriate for things like
Dialogue: 0,0:02:54.45,0:02:55.79,Default,,0,0,0,,unlocking a pro feature in your
Dialogue: 0,0:02:55.79,0:02:56.71,Default,,0,0,0,,application, or maybe,
Dialogue: 0,0:02:56.87,0:02:57.83,Default,,0,0,0,,downloading a level pack for a
Dialogue: 0,0:02:57.83,0:02:57.94,Default,,0,0,0,,game.
Dialogue: 0,0:03:00.35,0:03:01.57,Default,,0,0,0,,We also offer two different
Dialogue: 0,0:03:01.57,0:03:02.87,Default,,0,0,0,,types of subscription products.
Dialogue: 0,0:03:02.87,0:03:04.47,Default,,0,0,0,,We have the nonrenewing
Dialogue: 0,0:03:04.47,0:03:05.21,Default,,0,0,0,,subscriptions.
Dialogue: 0,0:03:05.21,0:03:07.12,Default,,0,0,0,,Now, as the name suggests, this
Dialogue: 0,0:03:07.12,0:03:08.06,Default,,0,0,0,,is the type of subscription
Dialogue: 0,0:03:08.06,0:03:08.63,Default,,0,0,0,,product that doesn't
Dialogue: 0,0:03:08.63,0:03:10.24,Default,,0,0,0,,automatically charge the user at
Dialogue: 0,0:03:10.24,0:03:11.51,Default,,0,0,0,,the end of the billing period.
Dialogue: 0,0:03:11.51,0:03:12.56,Default,,0,0,0,,You can kind of think of this
Dialogue: 0,0:03:12.56,0:03:14.34,Default,,0,0,0,,one like a consumable product
Dialogue: 0,0:03:14.34,0:03:16.32,Default,,0,0,0,,with an expiry date on it.
Dialogue: 0,0:03:16.55,0:03:17.62,Default,,0,0,0,,And of course, the last type is
Dialogue: 0,0:03:17.62,0:03:18.41,Default,,0,0,0,,the auto-renewable
Dialogue: 0,0:03:18.41,0:03:19.26,Default,,0,0,0,,subscriptions.
Dialogue: 0,0:03:20.12,0:03:21.67,Default,,0,0,0,,So, we open the categories of
Dialogue: 0,0:03:21.67,0:03:23.40,Default,,0,0,0,,auto-renewable subscriptions to
Dialogue: 0,0:03:23.62,0:03:24.74,Default,,0,0,0,,a much wider array of
Dialogue: 0,0:03:24.74,0:03:25.58,Default,,0,0,0,,categories, last year.
Dialogue: 0,0:03:25.58,0:03:26.52,Default,,0,0,0,,And have seen some great uptake
Dialogue: 0,0:03:26.52,0:03:26.89,Default,,0,0,0,,of that.
Dialogue: 0,0:03:27.66,0:03:28.77,Default,,0,0,0,,In this particular talk, we're
Dialogue: 0,0:03:28.77,0:03:29.64,Default,,0,0,0,,just going to focus on these
Dialogue: 0,0:03:29.71,0:03:30.91,Default,,0,0,0,,first two types, though.
Dialogue: 0,0:03:30.91,0:03:31.91,Default,,0,0,0,,Mostly, consumable and
Dialogue: 0,0:03:31.91,0:03:32.59,Default,,0,0,0,,non-consumable.
Dialogue: 0,0:03:32.59,0:03:33.69,Default,,0,0,0,,We're going to be going into
Dialogue: 0,0:03:33.69,0:03:35.08,Default,,0,0,0,,subscriptions in much greater
Dialogue: 0,0:03:35.08,0:03:36.46,Default,,0,0,0,,detail, in the Advanced talk,
Dialogue: 0,0:03:36.46,0:03:37.12,Default,,0,0,0,,this afternoon.
Dialogue: 0,0:03:37.34,0:03:39.15,Default,,0,0,0,,It's at 1:50 p.m. in the Grand
Dialogue: 0,0:03:39.15,0:03:39.75,Default,,0,0,0,,Ballroom A.
Dialogue: 0,0:03:39.75,0:03:40.48,Default,,0,0,0,,So, if you're dealing with
Dialogue: 0,0:03:40.70,0:03:42.09,Default,,0,0,0,,subscriptions in a particularly
Dialogue: 0,0:03:42.09,0:03:43.07,Default,,0,0,0,,service side environment, I
Dialogue: 0,0:03:43.07,0:03:44.09,Default,,0,0,0,,definitely encourage you to come
Dialogue: 0,0:03:44.09,0:03:44.75,Default,,0,0,0,,along to that session.
Dialogue: 0,0:03:44.75,0:03:45.53,Default,,0,0,0,,We've got some great new
Dialogue: 0,0:03:45.86,0:03:46.57,Default,,0,0,0,,enhancements, there.
Dialogue: 0,0:03:47.81,0:03:48.84,Default,,0,0,0,,So, let's look at how to
Dialogue: 0,0:03:48.84,0:03:50.27,Default,,0,0,0,,implement in-app purchases in
Dialogue: 0,0:03:50.27,0:03:50.96,Default,,0,0,0,,your application.
Dialogue: 0,0:03:51.90,0:03:53.94,Default,,0,0,0,,It starts with loading up your
Dialogue: 0,0:03:53.94,0:03:55.22,Default,,0,0,0,,in-app identifiers in your
Dialogue: 0,0:03:55.22,0:03:55.72,Default,,0,0,0,,application.
Dialogue: 0,0:03:55.88,0:03:57.17,Default,,0,0,0,,We're going to dive into each of
Dialogue: 0,0:03:57.17,0:03:57.92,Default,,0,0,0,,these steps in a little more
Dialogue: 0,0:03:57.92,0:03:58.34,Default,,0,0,0,,detail.
Dialogue: 0,0:03:58.34,0:03:59.02,Default,,0,0,0,,But I'll just give you an
Dialogue: 0,0:03:59.02,0:03:59.44,Default,,0,0,0,,overview, now.
Dialogue: 0,0:03:59.93,0:04:02.29,Default,,0,0,0,,Using those in-app identifiers,
Dialogue: 0,0:04:02.29,0:04:03.71,Default,,0,0,0,,you can fetch localized product
Dialogue: 0,0:04:03.71,0:04:04.93,Default,,0,0,0,,information from the App Store.
Dialogue: 0,0:04:05.49,0:04:06.88,Default,,0,0,0,,And once you have that localized
Dialogue: 0,0:04:06.88,0:04:08.34,Default,,0,0,0,,information for the products,
Dialogue: 0,0:04:08.89,0:04:10.77,Default,,0,0,0,,you can display in-app UI to the
Dialogue: 0,0:04:10.77,0:04:11.05,Default,,0,0,0,,user.
Dialogue: 0,0:04:11.89,0:04:12.71,Default,,0,0,0,,This gives the user an
Dialogue: 0,0:04:12.71,0:04:14.21,Default,,0,0,0,,opportunity to tap that Buy
Dialogue: 0,0:04:14.21,0:04:15.85,Default,,0,0,0,,button and agree to purchase it,
Dialogue: 0,0:04:16.13,0:04:17.19,Default,,0,0,0,,at which point it's up to you to
Dialogue: 0,0:04:17.19,0:04:19.35,Default,,0,0,0,,go ahead and request a payment.
Dialogue: 0,0:04:20.24,0:04:22.47,Default,,0,0,0,,The user then, elects to buy
Dialogue: 0,0:04:22.47,0:04:23.19,Default,,0,0,0,,your in-app purchase and
Dialogue: 0,0:04:23.19,0:04:24.15,Default,,0,0,0,,authenticate the payment.
Dialogue: 0,0:04:24.75,0:04:25.71,Default,,0,0,0,,And it's up to you, to then
Dialogue: 0,0:04:25.71,0:04:27.04,Default,,0,0,0,,process the transaction that
Dialogue: 0,0:04:27.04,0:04:28.07,Default,,0,0,0,,comes back from StoreKit.
Dialogue: 0,0:04:28.43,0:04:30.84,Default,,0,0,0,,Once the transaction's been
Dialogue: 0,0:04:30.84,0:04:32.44,Default,,0,0,0,,processed, it's up to you to
Dialogue: 0,0:04:32.44,0:04:33.24,Default,,0,0,0,,unlock the content.
Dialogue: 0,0:04:33.24,0:04:34.24,Default,,0,0,0,,Make that in-app purchase
Dialogue: 0,0:04:34.24,0:04:35.11,Default,,0,0,0,,available to the user.
Dialogue: 0,0:04:36.28,0:04:37.89,Default,,0,0,0,,And finally, the last step is to
Dialogue: 0,0:04:37.89,0:04:39.02,Default,,0,0,0,,finish the transaction.
Dialogue: 0,0:04:39.84,0:04:41.41,Default,,0,0,0,,So, let's dive into the first
Dialogue: 0,0:04:41.41,0:04:42.61,Default,,0,0,0,,step, loading the in-app
Dialogue: 0,0:04:42.61,0:04:42.98,Default,,0,0,0,,identifiers.
Dialogue: 0,0:04:45.68,0:04:47.00,Default,,0,0,0,,The in-app identifiers are
Dialogue: 0,0:04:47.00,0:04:48.35,Default,,0,0,0,,really just kind of product
Dialogue: 0,0:04:48.35,0:04:49.80,Default,,0,0,0,,skews that you set up in iTunes
Dialogue: 0,0:04:49.80,0:04:50.15,Default,,0,0,0,,Connect.
Dialogue: 0,0:04:50.50,0:04:51.52,Default,,0,0,0,,Each product that you sell has
Dialogue: 0,0:04:51.52,0:04:52.34,Default,,0,0,0,,its own identifier.
Dialogue: 0,0:04:52.34,0:04:54.01,Default,,0,0,0,,And when it comes to loading
Dialogue: 0,0:04:54.01,0:04:54.97,Default,,0,0,0,,these in your applications, you
Dialogue: 0,0:04:54.97,0:04:56.26,Default,,0,0,0,,can do it a couple of ways.
Dialogue: 0,0:04:56.26,0:04:57.77,Default,,0,0,0,,Firstly, you can just bake them
Dialogue: 0,0:04:57.77,0:04:59.03,Default,,0,0,0,,directly into your application.
Dialogue: 0,0:04:59.38,0:05:00.24,Default,,0,0,0,,So, in this case, I've just got
Dialogue: 0,0:05:00.24,0:05:01.14,Default,,0,0,0,,an array of strings.
Dialogue: 0,0:05:02.07,0:05:03.23,Default,,0,0,0,,Or the other way, of course, is
Dialogue: 0,0:05:03.23,0:05:05.12,Default,,0,0,0,,to maybe fetch them from your
Dialogue: 0,0:05:05.78,0:05:07.26,Default,,0,0,0,,own server.
Dialogue: 0,0:05:07.43,0:05:08.51,Default,,0,0,0,,Either one of these techniques
Dialogue: 0,0:05:08.51,0:05:09.39,Default,,0,0,0,,will work, but the important
Dialogue: 0,0:05:09.39,0:05:10.46,Default,,0,0,0,,thing is that you just have this
Dialogue: 0,0:05:10.46,0:05:11.92,Default,,0,0,0,,set of strings, these in-app
Dialogue: 0,0:05:11.92,0:05:13.54,Default,,0,0,0,,identifiers that you can use to
Dialogue: 0,0:05:13.54,0:05:14.70,Default,,0,0,0,,go ahead and fetch product
Dialogue: 0,0:05:14.70,0:05:15.48,Default,,0,0,0,,information for.
Dialogue: 0,0:05:16.27,0:05:17.77,Default,,0,0,0,,Which is the next step.
Dialogue: 0,0:05:18.72,0:05:21.27,Default,,0,0,0,,So, if you have these, it's just
Dialogue: 0,0:05:21.27,0:05:22.57,Default,,0,0,0,,a simple step to go ahead and
Dialogue: 0,0:05:22.57,0:05:23.77,Default,,0,0,0,,load up the product information.
Dialogue: 0,0:05:23.77,0:05:25.39,Default,,0,0,0,,Let's look at the code for it.
Dialogue: 0,0:05:26.28,0:05:28.55,Default,,0,0,0,,You take that set of identifiers
Dialogue: 0,0:05:28.68,0:05:29.93,Default,,0,0,0,,and you pass it through to an
Dialogue: 0,0:05:29.93,0:05:31.50,Default,,0,0,0,,SKProductsRequest initializer.
Dialogue: 0,0:05:32.73,0:05:34.74,Default,,0,0,0,,Set a delegate on that request.
Dialogue: 0,0:05:34.86,0:05:36.03,Default,,0,0,0,,And then, just kick it off using
Dialogue: 0,0:05:36.52,0:05:38.30,Default,,0,0,0,,the start method.
Dialogue: 0,0:05:38.36,0:05:40.01,Default,,0,0,0,,Now, you've set a delegate
Dialogue: 0,0:05:40.01,0:05:41.16,Default,,0,0,0,,method on this so you'll get a
Dialogue: 0,0:05:41.16,0:05:42.51,Default,,0,0,0,,response in the didReceive
Dialogue: 0,0:05:42.51,0:05:43.50,Default,,0,0,0,,response callback.
Dialogue: 0,0:05:43.50,0:05:46.77,Default,,0,0,0,,So, inside this callback you'll
Dialogue: 0,0:05:46.77,0:05:48.18,Default,,0,0,0,,receive an array of products
Dialogue: 0,0:05:48.22,0:05:49.10,Default,,0,0,0,,that match those in-app
Dialogue: 0,0:05:49.10,0:05:50.93,Default,,0,0,0,,identifiers that you've sent up
Dialogue: 0,0:05:50.93,0:05:51.78,Default,,0,0,0,,in the request.
Dialogue: 0,0:05:52.50,0:05:53.20,Default,,0,0,0,,Now, you can loop through these
Dialogue: 0,0:05:53.24,0:05:53.64,Default,,0,0,0,,products.
Dialogue: 0,0:05:53.64,0:05:54.73,Default,,0,0,0,,And we'll just highlight some of
Dialogue: 0,0:05:54.73,0:05:56.33,Default,,0,0,0,,the fields that are included on
Dialogue: 0,0:05:56.33,0:05:57.77,Default,,0,0,0,,these product objects.
Dialogue: 0,0:05:57.77,0:05:58.98,Default,,0,0,0,,There's a localized title and a
Dialogue: 0,0:05:58.98,0:06:00.72,Default,,0,0,0,,localized description for that
Dialogue: 0,0:06:00.72,0:06:01.10,Default,,0,0,0,,product.
Dialogue: 0,0:06:02.23,0:06:03.49,Default,,0,0,0,,There's also localized price
Dialogue: 0,0:06:03.49,0:06:05.04,Default,,0,0,0,,information about that product
Dialogue: 0,0:06:05.24,0:06:06.39,Default,,0,0,0,,in the store that, that user's
Dialogue: 0,0:06:06.39,0:06:06.95,Default,,0,0,0,,logged into.
Dialogue: 0,0:06:07.53,0:06:09.92,Default,,0,0,0,,And we also have the information
Dialogue: 0,0:06:09.92,0:06:10.99,Default,,0,0,0,,here, about any downloadable
Dialogue: 0,0:06:10.99,0:06:12.57,Default,,0,0,0,,content that might be associated
Dialogue: 0,0:06:12.57,0:06:14.99,Default,,0,0,0,,with this product.
Dialogue: 0,0:06:15.25,0:06:16.74,Default,,0,0,0,,So, one more important point,
Dialogue: 0,0:06:16.74,0:06:17.50,Default,,0,0,0,,here, just to highlight, is that
Dialogue: 0,0:06:17.50,0:06:18.42,Default,,0,0,0,,you shouldn't cache the
Dialogue: 0,0:06:18.42,0:06:19.72,Default,,0,0,0,,SKProduct that comes back in
Dialogue: 0,0:06:19.72,0:06:20.20,Default,,0,0,0,,this point.
Dialogue: 0,0:06:20.74,0:06:22.46,Default,,0,0,0,,It's really important that you
Dialogue: 0,0:06:22.46,0:06:23.34,Default,,0,0,0,,get up to date product
Dialogue: 0,0:06:23.34,0:06:24.75,Default,,0,0,0,,information, by performing these
Dialogue: 0,0:06:24.75,0:06:25.65,Default,,0,0,0,,requests regularly.
Dialogue: 0,0:06:25.98,0:06:27.13,Default,,0,0,0,,Because things like currency can
Dialogue: 0,0:06:27.13,0:06:27.72,Default,,0,0,0,,fluctuate.
Dialogue: 0,0:06:27.93,0:06:29.24,Default,,0,0,0,,You know, a user might log out,
Dialogue: 0,0:06:29.24,0:06:30.26,Default,,0,0,0,,log into a different store
Dialogue: 0,0:06:30.26,0:06:30.52,Default,,0,0,0,,front.
Dialogue: 0,0:06:30.52,0:06:31.66,Default,,0,0,0,,So, the locale might change.
Dialogue: 0,0:06:31.84,0:06:32.98,Default,,0,0,0,,Make sure that as often as you
Dialogue: 0,0:06:32.98,0:06:34.58,Default,,0,0,0,,need to, you're requesting new
Dialogue: 0,0:06:34.58,0:06:35.77,Default,,0,0,0,,product information from the App
Dialogue: 0,0:06:35.77,0:06:36.94,Default,,0,0,0,,Store, and not holding onto an
Dialogue: 0,0:06:36.94,0:06:38.37,Default,,0,0,0,,instance of these SKProducts.
Dialogue: 0,0:06:39.35,0:06:41.05,Default,,0,0,0,,But now, you have your SKProduct
Dialogue: 0,0:06:41.05,0:06:41.97,Default,,0,0,0,,object and you're ready to go
Dialogue: 0,0:06:41.97,0:06:43.64,Default,,0,0,0,,ahead and show an actual in-app
Dialogue: 0,0:06:43.64,0:06:44.48,Default,,0,0,0,,UI to the user.
Dialogue: 0,0:06:45.28,0:06:46.44,Default,,0,0,0,,So, when it comes to showing the
Dialogue: 0,0:06:46.44,0:06:47.71,Default,,0,0,0,,UI, of course, this is really up
Dialogue: 0,0:06:47.71,0:06:48.46,Default,,0,0,0,,to your application.
Dialogue: 0,0:06:48.46,0:06:49.57,Default,,0,0,0,,And every application's a little
Dialogue: 0,0:06:49.57,0:06:50.82,Default,,0,0,0,,different in how you're going to
Dialogue: 0,0:06:50.82,0:06:51.57,Default,,0,0,0,,present the products to the
Dialogue: 0,0:06:51.57,0:06:52.05,Default,,0,0,0,,users.
Dialogue: 0,0:06:52.60,0:06:55.58,Default,,0,0,0,,It can have a large effect on
Dialogue: 0,0:06:55.58,0:06:56.01,Default,,0,0,0,,sales.
Dialogue: 0,0:06:56.01,0:06:56.95,Default,,0,0,0,,So, I'd encourage you to really
Dialogue: 0,0:06:56.95,0:06:57.90,Default,,0,0,0,,be careful about how you
Dialogue: 0,0:06:57.90,0:06:58.58,Default,,0,0,0,,structure this UI.
Dialogue: 0,0:06:58.70,0:07:00.42,Default,,0,0,0,,And if you want to learn a bit
Dialogue: 0,0:07:00.42,0:07:01.23,Default,,0,0,0,,more about that, we've got some
Dialogue: 0,0:07:01.23,0:07:02.40,Default,,0,0,0,,information online on our
Dialogue: 0,0:07:02.40,0:07:03.93,Default,,0,0,0,,developer website, here, to
Dialogue: 0,0:07:03.93,0:07:04.29,Default,,0,0,0,,check out.
Dialogue: 0,0:07:04.29,0:07:05.51,Default,,0,0,0,,This has useful tips about how
Dialogue: 0,0:07:05.51,0:07:06.88,Default,,0,0,0,,to format this particular page
Dialogue: 0,0:07:07.16,0:07:09.11,Default,,0,0,0,,in a way that can, you know,
Dialogue: 0,0:07:09.39,0:07:10.28,Default,,0,0,0,,improve your sales.
Dialogue: 0,0:07:10.79,0:07:13.37,Default,,0,0,0,,One tip, though, just on
Dialogue: 0,0:07:13.44,0:07:14.58,Default,,0,0,0,,formatting the product price.
Dialogue: 0,0:07:14.58,0:07:15.79,Default,,0,0,0,,So, when it comes to the product
Dialogue: 0,0:07:15.79,0:07:17.41,Default,,0,0,0,,price, this is the technique you
Dialogue: 0,0:07:17.41,0:07:18.58,Default,,0,0,0,,can use to actually display that
Dialogue: 0,0:07:18.58,0:07:19.48,Default,,0,0,0,,in your UI.
Dialogue: 0,0:07:19.54,0:07:20.58,Default,,0,0,0,,Create a number formatter
Dialogue: 0,0:07:20.58,0:07:20.96,Default,,0,0,0,,object.
Dialogue: 0,0:07:21.82,0:07:22.97,Default,,0,0,0,,Set the number style to be the
Dialogue: 0,0:07:23.00,0:07:23.91,Default,,0,0,0,,currency style.
Dialogue: 0,0:07:24.62,0:07:26.82,Default,,0,0,0,,And then, set the locale to be
Dialogue: 0,0:07:26.82,0:07:28.15,Default,,0,0,0,,the product price locale.
Dialogue: 0,0:07:28.15,0:07:29.22,Default,,0,0,0,,Now, this is a really important
Dialogue: 0,0:07:29.22,0:07:29.63,Default,,0,0,0,,step.
Dialogue: 0,0:07:29.84,0:07:30.86,Default,,0,0,0,,Because if you don't do this,
Dialogue: 0,0:07:30.86,0:07:31.73,Default,,0,0,0,,it's going to default to the
Dialogue: 0,0:07:31.73,0:07:33.23,Default,,0,0,0,,system device locale.
Dialogue: 0,0:07:33.36,0:07:34.42,Default,,0,0,0,,Which may not actually match the
Dialogue: 0,0:07:34.42,0:07:35.39,Default,,0,0,0,,store that the user's logged
Dialogue: 0,0:07:35.39,0:07:35.71,Default,,0,0,0,,into.
Dialogue: 0,0:07:35.98,0:07:36.81,Default,,0,0,0,,So, the user might be logged
Dialogue: 0,0:07:36.81,0:07:37.68,Default,,0,0,0,,into say, the Chinese
Dialogue: 0,0:07:37.68,0:07:39.44,Default,,0,0,0,,storefront, but have the device
Dialogue: 0,0:07:39.44,0:07:40.42,Default,,0,0,0,,set to U.S. English.
Dialogue: 0,0:07:40.70,0:07:41.49,Default,,0,0,0,,That's important that all the
Dialogue: 0,0:07:41.49,0:07:42.72,Default,,0,0,0,,pricing and currency stuff
Dialogue: 0,0:07:42.88,0:07:44.22,Default,,0,0,0,,matches what they're seeing in
Dialogue: 0,0:07:44.22,0:07:44.76,Default,,0,0,0,,the App Store.
Dialogue: 0,0:07:45.03,0:07:45.94,Default,,0,0,0,,So, make sure you set the
Dialogue: 0,0:07:45.97,0:07:47.61,Default,,0,0,0,,product's price locale under the
Dialogue: 0,0:07:47.61,0:07:48.35,Default,,0,0,0,,number formatting, here.
Dialogue: 0,0:07:49.08,0:07:50.36,Default,,0,0,0,,But once you've done that, you
Dialogue: 0,0:07:50.36,0:07:51.59,Default,,0,0,0,,can just take a string from the
Dialogue: 0,0:07:51.59,0:07:52.95,Default,,0,0,0,,number formatter, and you've got
Dialogue: 0,0:07:52.95,0:07:54.46,Default,,0,0,0,,yourself a formatted string that
Dialogue: 0,0:07:54.46,0:07:56.48,Default,,0,0,0,,you can display in your UI.
Dialogue: 0,0:07:58.40,0:08:00.35,Default,,0,0,0,,Another point, here, don't
Dialogue: 0,0:08:00.55,0:08:01.91,Default,,0,0,0,,perform any currency conversion
Dialogue: 0,0:08:01.91,0:08:02.31,Default,,0,0,0,,yourself.
Dialogue: 0,0:08:02.31,0:08:03.27,Default,,0,0,0,,There's no need to actually
Dialogue: 0,0:08:03.53,0:08:04.40,Default,,0,0,0,,convert currency.
Dialogue: 0,0:08:04.40,0:08:05.93,Default,,0,0,0,,You can let StoreKit handle all
Dialogue: 0,0:08:05.93,0:08:06.44,Default,,0,0,0,,this for you.
Dialogue: 0,0:08:06.72,0:08:07.96,Default,,0,0,0,,So, just take that number and
Dialogue: 0,0:08:08.02,0:08:09.10,Default,,0,0,0,,price locale that you get and
Dialogue: 0,0:08:09.10,0:08:10.07,Default,,0,0,0,,let the number formatter do the
Dialogue: 0,0:08:10.07,0:08:10.56,Default,,0,0,0,,job for you.
Dialogue: 0,0:08:12.46,0:08:13.39,Default,,0,0,0,,The next step, though, once
Dialogue: 0,0:08:13.39,0:08:14.87,Default,,0,0,0,,you've displayed your UI, is to
Dialogue: 0,0:08:14.87,0:08:15.61,Default,,0,0,0,,request a payment.
Dialogue: 0,0:08:15.61,0:08:16.72,Default,,0,0,0,,So, at this point, hopefully the
Dialogue: 0,0:08:16.72,0:08:18.01,Default,,0,0,0,,user's elected to buy your
Dialogue: 0,0:08:18.01,0:08:18.59,Default,,0,0,0,,in-app purchase.
Dialogue: 0,0:08:18.59,0:08:19.61,Default,,0,0,0,,They've hit that Buy button.
Dialogue: 0,0:08:19.86,0:08:21.05,Default,,0,0,0,,So, at this point it's up to you
Dialogue: 0,0:08:21.05,0:08:21.98,Default,,0,0,0,,to go ahead and request a
Dialogue: 0,0:08:21.98,0:08:22.86,Default,,0,0,0,,payment of the user.
Dialogue: 0,0:08:23.73,0:08:24.86,Default,,0,0,0,,Again, this is a really simple
Dialogue: 0,0:08:24.86,0:08:25.08,Default,,0,0,0,,step.
Dialogue: 0,0:08:25.08,0:08:26.07,Default,,0,0,0,,It's just a couple of lines.
Dialogue: 0,0:08:26.64,0:08:28.04,Default,,0,0,0,,You take that SKProduct that the
Dialogue: 0,0:08:28.04,0:08:29.77,Default,,0,0,0,,user's agreed to buy, pass it
Dialogue: 0,0:08:29.77,0:08:32.48,Default,,0,0,0,,into an SKPayment initializer to
Dialogue: 0,0:08:32.48,0:08:33.50,Default,,0,0,0,,create a payment object.
Dialogue: 0,0:08:34.14,0:08:35.50,Default,,0,0,0,,Then, you add that payment to
Dialogue: 0,0:08:35.50,0:08:37.34,Default,,0,0,0,,the SKPaymentQueue's default
Dialogue: 0,0:08:37.34,0:08:37.63,Default,,0,0,0,,queue.
Dialogue: 0,0:08:39.39,0:08:40.31,Default,,0,0,0,,Now, as soon as you add the
Dialogue: 0,0:08:40.31,0:08:41.40,Default,,0,0,0,,payment to the default queue,
Dialogue: 0,0:08:42.16,0:08:44.01,Default,,0,0,0,,the user sees this great new
Dialogue: 0,0:08:44.01,0:08:45.68,Default,,0,0,0,,looking in-app purchase payment
Dialogue: 0,0:08:45.68,0:08:46.01,Default,,0,0,0,,sheet.
Dialogue: 0,0:08:46.01,0:08:47.17,Default,,0,0,0,,So, this is new in iOS 11.
Dialogue: 0,0:08:48.52,0:08:52.81,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:08:53.31,0:08:54.24,Default,,0,0,0,,And the user, of course, can
Dialogue: 0,0:08:54.24,0:08:55.57,Default,,0,0,0,,just authenticate the purchase
Dialogue: 0,0:08:55.57,0:08:57.34,Default,,0,0,0,,using Touch ID, and then,
Dialogue: 0,0:08:57.34,0:08:58.79,Default,,0,0,0,,continue using your app.
Dialogue: 0,0:08:59.04,0:09:00.03,Default,,0,0,0,,So, we think this is a much
Dialogue: 0,0:09:00.03,0:09:00.93,Default,,0,0,0,,improved design that's going to
Dialogue: 0,0:09:00.93,0:09:02.27,Default,,0,0,0,,make that experience a lot nicer
Dialogue: 0,0:09:02.27,0:09:02.86,Default,,0,0,0,,for users.
Dialogue: 0,0:09:04.13,0:09:04.82,Default,,0,0,0,,Now, at this point, I'll just
Dialogue: 0,0:09:04.82,0:09:05.97,Default,,0,0,0,,take a quick sidestep to talk a
Dialogue: 0,0:09:05.97,0:09:07.40,Default,,0,0,0,,bit about detecting irregular
Dialogue: 0,0:09:07.40,0:09:07.93,Default,,0,0,0,,activity.
Dialogue: 0,0:09:08.48,0:09:09.94,Default,,0,0,0,,So, the ability to detect
Dialogue: 0,0:09:09.94,0:09:11.47,Default,,0,0,0,,irregular activity gives us
Dialogue: 0,0:09:11.47,0:09:12.64,Default,,0,0,0,,warning signs if potentially
Dialogue: 0,0:09:12.64,0:09:13.74,Default,,0,0,0,,something fishy might be going
Dialogue: 0,0:09:13.74,0:09:15.30,Default,,0,0,0,,on in this particular process.
Dialogue: 0,0:09:15.83,0:09:16.99,Default,,0,0,0,,Now, Apple has an advanced
Dialogue: 0,0:09:16.99,0:09:18.45,Default,,0,0,0,,engine to detect and block
Dialogue: 0,0:09:18.45,0:09:19.65,Default,,0,0,0,,irregular activity before it
Dialogue: 0,0:09:19.65,0:09:20.95,Default,,0,0,0,,happens, in the best cases.
Dialogue: 0,0:09:21.45,0:09:22.56,Default,,0,0,0,,But there are some cases where
Dialogue: 0,0:09:22.56,0:09:24.65,Default,,0,0,0,,this happens after a payment's
Dialogue: 0,0:09:24.65,0:09:25.02,Default,,0,0,0,,gone through.
Dialogue: 0,0:09:25.02,0:09:26.27,Default,,0,0,0,,And it can only detect it after
Dialogue: 0,0:09:26.52,0:09:27.02,Default,,0,0,0,,the fact.
Dialogue: 0,0:09:27.92,0:09:29.64,Default,,0,0,0,,Now, in those cases, we refund
Dialogue: 0,0:09:29.84,0:09:30.92,Default,,0,0,0,,developers or users as
Dialogue: 0,0:09:30.92,0:09:31.76,Default,,0,0,0,,appropriate, but that's not a
Dialogue: 0,0:09:31.76,0:09:32.48,Default,,0,0,0,,great experience.
Dialogue: 0,0:09:32.48,0:09:34.12,Default,,0,0,0,,So, we try to ask for a little
Dialogue: 0,0:09:34.12,0:09:35.46,Default,,0,0,0,,collaboration from you, at this
Dialogue: 0,0:09:35.50,0:09:36.96,Default,,0,0,0,,point, to help us detect these
Dialogue: 0,0:09:36.96,0:09:37.68,Default,,0,0,0,,things a little earlier.
Dialogue: 0,0:09:38.46,0:09:39.41,Default,,0,0,0,,Now, I'll just go through an
Dialogue: 0,0:09:39.41,0:09:40.43,Default,,0,0,0,,illustration that'll probably
Dialogue: 0,0:09:41.10,0:09:42.11,Default,,0,0,0,,demonstrate what I'm talking
Dialogue: 0,0:09:42.11,0:09:42.62,Default,,0,0,0,,about a bit better.
Dialogue: 0,0:09:42.62,0:09:45.51,Default,,0,0,0,,Let's say I have three devices,
Dialogue: 0,0:09:45.51,0:09:45.72,Default,,0,0,0,,here.
Dialogue: 0,0:09:46.25,0:09:47.20,Default,,0,0,0,,Three different users that are
Dialogue: 0,0:09:47.20,0:09:48.58,Default,,0,0,0,,logged into different Apple IDs.
Dialogue: 0,0:09:49.49,0:09:50.89,Default,,0,0,0,,These three users are purchasing
Dialogue: 0,0:09:50.89,0:09:52.67,Default,,0,0,0,,the same gold coin product from
Dialogue: 0,0:09:52.67,0:09:53.84,Default,,0,0,0,,the App Store from your
Dialogue: 0,0:09:53.84,0:09:54.40,Default,,0,0,0,,application.
Dialogue: 0,0:09:55.29,0:09:56.36,Default,,0,0,0,,Now, this is a really normal
Dialogue: 0,0:09:56.36,0:09:56.77,Default,,0,0,0,,scenario.
Dialogue: 0,0:09:56.77,0:09:57.94,Default,,0,0,0,,This happens millions of times
Dialogue: 0,0:09:57.94,0:09:58.97,Default,,0,0,0,,from millions of users around
Dialogue: 0,0:09:58.97,0:09:59.68,Default,,0,0,0,,the world, every day.
Dialogue: 0,0:10:00.93,0:10:02.21,Default,,0,0,0,,But let's add in another piece
Dialogue: 0,0:10:02.21,0:10:03.31,Default,,0,0,0,,of information to this puzzle
Dialogue: 0,0:10:03.31,0:10:04.43,Default,,0,0,0,,that changes the picture, quite
Dialogue: 0,0:10:04.43,0:10:04.79,Default,,0,0,0,,a lot.
Dialogue: 0,0:10:05.10,0:10:06.45,Default,,0,0,0,,Let's say that these three users
Dialogue: 0,0:10:06.45,0:10:07.60,Default,,0,0,0,,buy gold coins in your
Dialogue: 0,0:10:07.60,0:10:09.19,Default,,0,0,0,,application, but all these
Dialogue: 0,0:10:09.19,0:10:10.96,Default,,0,0,0,,separate IDs are actually
Dialogue: 0,0:10:10.96,0:10:12.47,Default,,0,0,0,,cashing these gold coins into
Dialogue: 0,0:10:12.47,0:10:14.25,Default,,0,0,0,,the same game account on your
Dialogue: 0,0:10:14.25,0:10:14.51,Default,,0,0,0,,server.
Dialogue: 0,0:10:15.44,0:10:16.42,Default,,0,0,0,,Suddenly, this picture looks
Dialogue: 0,0:10:16.42,0:10:17.37,Default,,0,0,0,,highly suspicious.
Dialogue: 0,0:10:18.79,0:10:19.88,Default,,0,0,0,,So, how do we detect these sort
Dialogue: 0,0:10:19.88,0:10:21.21,Default,,0,0,0,,of scenarios earlier on in the
Dialogue: 0,0:10:21.21,0:10:21.80,Default,,0,0,0,,process?
Dialogue: 0,0:10:22.08,0:10:23.76,Default,,0,0,0,,We ask you to provide an account
Dialogue: 0,0:10:23.76,0:10:25.23,Default,,0,0,0,,identifier with this payment
Dialogue: 0,0:10:25.23,0:10:25.51,Default,,0,0,0,,step.
Dialogue: 0,0:10:26.34,0:10:26.93,Default,,0,0,0,,Now, this is really for
Dialogue: 0,0:10:26.93,0:10:27.99,Default,,0,0,0,,applications that have their own
Dialogue: 0,0:10:27.99,0:10:28.87,Default,,0,0,0,,account management.
Dialogue: 0,0:10:29.26,0:10:30.68,Default,,0,0,0,,So, if you've got, say, a server
Dialogue: 0,0:10:30.68,0:10:31.81,Default,,0,0,0,,account and a user is logged in
Dialogue: 0,0:10:31.81,0:10:32.55,Default,,0,0,0,,as a particular user.
Dialogue: 0,0:10:33.30,0:10:34.58,Default,,0,0,0,,And we ask for an opaque
Dialogue: 0,0:10:34.58,0:10:35.73,Default,,0,0,0,,identifier at this step.
Dialogue: 0,0:10:36.67,0:10:37.65,Default,,0,0,0,,Now, what is an opaque
Dialogue: 0,0:10:37.65,0:10:38.22,Default,,0,0,0,,identifier?
Dialogue: 0,0:10:38.34,0:10:40.18,Default,,0,0,0,,Well, we don't really want you
Dialogue: 0,0:10:40.18,0:10:41.50,Default,,0,0,0,,to give us actual information
Dialogue: 0,0:10:41.50,0:10:42.00,Default,,0,0,0,,about the user.
Dialogue: 0,0:10:42.00,0:10:43.28,Default,,0,0,0,,We already know the user's Apple
Dialogue: 0,0:10:43.37,0:10:44.46,Default,,0,0,0,,ID, so don't give us that.
Dialogue: 0,0:10:44.75,0:10:46.00,Default,,0,0,0,,We don't want to know what the
Dialogue: 0,0:10:46.00,0:10:48.00,Default,,0,0,0,,actual username is for the user
Dialogue: 0,0:10:48.00,0:10:48.76,Default,,0,0,0,,or the password.
Dialogue: 0,0:10:48.76,0:10:49.58,Default,,0,0,0,,We don't want to know any of
Dialogue: 0,0:10:49.58,0:10:49.99,Default,,0,0,0,,these details.
Dialogue: 0,0:10:49.99,0:10:51.23,Default,,0,0,0,,What we suggest here, is that
Dialogue: 0,0:10:51.23,0:10:53.44,Default,,0,0,0,,you create a hash of the account
Dialogue: 0,0:10:53.57,0:10:54.43,Default,,0,0,0,,name, or something like this,
Dialogue: 0,0:10:54.43,0:10:54.60,Default,,0,0,0,,right.
Dialogue: 0,0:10:54.60,0:10:55.69,Default,,0,0,0,,This just gives us a unique
Dialogue: 0,0:10:55.69,0:10:57.13,Default,,0,0,0,,identifier to be able to match
Dialogue: 0,0:10:57.13,0:10:58.66,Default,,0,0,0,,these payments across different
Dialogue: 0,0:10:58.66,0:11:00.29,Default,,0,0,0,,Apple IDs and associate them
Dialogue: 0,0:11:00.29,0:11:00.57,Default,,0,0,0,,together.
Dialogue: 0,0:11:01.46,0:11:03.34,Default,,0,0,0,,It's a really simple step to be
Dialogue: 0,0:11:03.34,0:11:03.72,Default,,0,0,0,,able to do this.
Dialogue: 0,0:11:03.72,0:11:04.75,Default,,0,0,0,,When you create the SKPayment
Dialogue: 0,0:11:04.75,0:11:06.01,Default,,0,0,0,,that we just saw a moment ago,
Dialogue: 0,0:11:06.01,0:11:07.31,Default,,0,0,0,,there's just an extra step you
Dialogue: 0,0:11:07.31,0:11:07.61,Default,,0,0,0,,can do.
Dialogue: 0,0:11:07.61,0:11:08.82,Default,,0,0,0,,Which is to set the application
Dialogue: 0,0:11:08.82,0:11:09.28,Default,,0,0,0,,username.
Dialogue: 0,0:11:09.28,0:11:11.35,Default,,0,0,0,,And here, you can just set that
Dialogue: 0,0:11:11.35,0:11:12.45,Default,,0,0,0,,hash of the account name, and
Dialogue: 0,0:11:12.45,0:11:13.73,Default,,0,0,0,,that'll just help us detect the
Dialogue: 0,0:11:13.73,0:11:14.94,Default,,0,0,0,,irregular activity earlier on,
Dialogue: 0,0:11:14.94,0:11:15.71,Default,,0,0,0,,in the process.
Dialogue: 0,0:11:16.27,0:11:18.52,Default,,0,0,0,,So, that's a really simple step
Dialogue: 0,0:11:18.52,0:11:20.12,Default,,0,0,0,,you can do to make your payments
Dialogue: 0,0:11:20.12,0:11:21.10,Default,,0,0,0,,a little more secure in your
Dialogue: 0,0:11:22.17,0:11:22.24,Default,,0,0,0,,app.
Dialogue: 0,0:11:23.64,0:11:24.73,Default,,0,0,0,,Once the user's authenticated
Dialogue: 0,0:11:24.73,0:11:25.86,Default,,0,0,0,,they payment, though, the credit
Dialogue: 0,0:11:25.86,0:11:26.54,Default,,0,0,0,,card's charged.
Dialogue: 0,0:11:26.85,0:11:27.66,Default,,0,0,0,,And it's up to you to go ahead
Dialogue: 0,0:11:27.66,0:11:29.02,Default,,0,0,0,,and process the transaction that
Dialogue: 0,0:11:29.02,0:11:30.47,Default,,0,0,0,,comes down from StoreKit.
Dialogue: 0,0:11:31.24,0:11:32.22,Default,,0,0,0,,So, let's see what that looks
Dialogue: 0,0:11:32.22,0:11:32.46,Default,,0,0,0,,like.
Dialogue: 0,0:11:33.02,0:11:33.98,Default,,0,0,0,,Right at the beginning of your
Dialogue: 0,0:11:33.98,0:11:35.06,Default,,0,0,0,,application lifecycle.
Dialogue: 0,0:11:35.18,0:11:36.81,Default,,0,0,0,,And here, I'm doing it at the
Dialogue: 0,0:11:36.81,0:11:38.58,Default,,0,0,0,,didFinishLaunchingWithOptions
Dialogue: 0,0:11:38.86,0:11:39.83,Default,,0,0,0,,app delegate method.
Dialogue: 0,0:11:40.15,0:11:41.35,Default,,0,0,0,,It's important to set a
Dialogue: 0,0:11:41.35,0:11:43.12,Default,,0,0,0,,transaction observer onto the
Dialogue: 0,0:11:43.12,0:11:44.04,Default,,0,0,0,,SKPayment queue.
Dialogue: 0,0:11:44.85,0:11:46.30,Default,,0,0,0,,Now, here I'm adding the actual
Dialogue: 0,0:11:46.30,0:11:47.74,Default,,0,0,0,,AppDelegate, itself, as my
Dialogue: 0,0:11:47.74,0:11:49.43,Default,,0,0,0,,SKPayment transaction observer.
Dialogue: 0,0:11:49.43,0:11:50.83,Default,,0,0,0,,But you could use another object
Dialogue: 0,0:11:50.83,0:11:51.83,Default,,0,0,0,,if you want to actually monitor
Dialogue: 0,0:11:51.83,0:11:52.64,Default,,0,0,0,,these transactions.
Dialogue: 0,0:11:52.91,0:11:53.98,Default,,0,0,0,,The really important thing here,
Dialogue: 0,0:11:53.98,0:11:55.04,Default,,0,0,0,,is that it's happening as early
Dialogue: 0,0:11:55.04,0:11:56.48,Default,,0,0,0,,on in the application lifecycle,
Dialogue: 0,0:11:56.48,0:11:56.94,Default,,0,0,0,,as possible.
Dialogue: 0,0:11:57.58,0:11:59.02,Default,,0,0,0,,See, transactions can come into
Dialogue: 0,0:11:59.26,0:12:00.91,Default,,0,0,0,,this transaction observer any
Dialogue: 0,0:12:00.91,0:12:02.33,Default,,0,0,0,,point during your application
Dialogue: 0,0:12:02.33,0:12:02.70,Default,,0,0,0,,lifecycle.
Dialogue: 0,0:12:02.70,0:12:03.58,Default,,0,0,0,,So, make sure that you're
Dialogue: 0,0:12:03.58,0:12:04.39,Default,,0,0,0,,registering it right at the
Dialogue: 0,0:12:04.39,0:12:04.76,Default,,0,0,0,,start.
Dialogue: 0,0:12:05.83,0:12:07.01,Default,,0,0,0,,But once that's registered,
Dialogue: 0,0:12:07.23,0:12:08.30,Default,,0,0,0,,you're ready to start receiving
Dialogue: 0,0:12:08.30,0:12:09.77,Default,,0,0,0,,transactions in the callbacks.
Dialogue: 0,0:12:10.62,0:12:11.64,Default,,0,0,0,,There's this one callback
Dialogue: 0,0:12:11.64,0:12:13.04,Default,,0,0,0,,updated transactions, which is
Dialogue: 0,0:12:13.26,0:12:14.53,Default,,0,0,0,,kind of the center of where this
Dialogue: 0,0:12:14.53,0:12:15.18,Default,,0,0,0,,all happens.
Dialogue: 0,0:12:16.08,0:12:16.84,Default,,0,0,0,,You receive an array of
Dialogue: 0,0:12:16.84,0:12:18.08,Default,,0,0,0,,transactions that come in, and
Dialogue: 0,0:12:18.08,0:12:19.50,Default,,0,0,0,,you can check the transaction
Dialogue: 0,0:12:19.50,0:12:20.31,Default,,0,0,0,,state on each of these
Dialogue: 0,0:12:20.31,0:12:21.00,Default,,0,0,0,,transactions.
Dialogue: 0,0:12:21.84,0:12:22.69,Default,,0,0,0,,And you'll look for a
Dialogue: 0,0:12:22.69,0:12:23.96,Default,,0,0,0,,transaction in the purchased
Dialogue: 0,0:12:24.05,0:12:24.42,Default,,0,0,0,,state.
Dialogue: 0,0:12:25.03,0:12:26.01,Default,,0,0,0,,This is a transaction that's
Dialogue: 0,0:12:26.01,0:12:27.39,Default,,0,0,0,,StoreKit deems appropriate for
Dialogue: 0,0:12:27.39,0:12:29.04,Default,,0,0,0,,you to go ahead and check for
Dialogue: 0,0:12:29.04,0:12:31.11,Default,,0,0,0,,validity and unlock content for,
Dialogue: 0,0:12:31.11,0:12:31.62,Default,,0,0,0,,accordingly.
Dialogue: 0,0:12:32.70,0:12:33.99,Default,,0,0,0,,There are some other states
Dialogue: 0,0:12:33.99,0:12:35.21,Default,,0,0,0,,here, that we won't go into in
Dialogue: 0,0:12:35.21,0:12:35.62,Default,,0,0,0,,this talk.
Dialogue: 0,0:12:35.62,0:12:36.88,Default,,0,0,0,,But one of the ones that I will
Dialogue: 0,0:12:36.88,0:12:38.26,Default,,0,0,0,,call out, is the deferred state.
Dialogue: 0,0:12:38.81,0:12:41.22,Default,,0,0,0,,A transaction can come through
Dialogue: 0,0:12:41.22,0:12:42.26,Default,,0,0,0,,in a deferred state if the user
Dialogue: 0,0:12:42.26,0:12:43.77,Default,,0,0,0,,has asked to buy turned on.
Dialogue: 0,0:12:44.73,0:12:46.57,Default,,0,0,0,,So, a child might ask to buy an
Dialogue: 0,0:12:46.57,0:12:48.05,Default,,0,0,0,,in-app purchase and a request
Dialogue: 0,0:12:48.05,0:12:49.11,Default,,0,0,0,,goes to their parent for
Dialogue: 0,0:12:49.11,0:12:50.26,Default,,0,0,0,,approval to actually approve the
Dialogue: 0,0:12:50.26,0:12:50.83,Default,,0,0,0,,purchase.
Dialogue: 0,0:12:51.21,0:12:52.10,Default,,0,0,0,,And that could take anywhere
Dialogue: 0,0:12:52.10,0:12:54.20,Default,,0,0,0,,between seconds, minutes, weeks,
Dialogue: 0,0:12:54.47,0:12:55.14,Default,,0,0,0,,who knows how long.
Dialogue: 0,0:12:55.14,0:12:56.50,Default,,0,0,0,,So, it's important if something
Dialogue: 0,0:12:56.50,0:12:57.55,Default,,0,0,0,,comes through in this deferred
Dialogue: 0,0:12:57.55,0:12:58.60,Default,,0,0,0,,state, while they're waiting for
Dialogue: 0,0:12:58.60,0:12:59.75,Default,,0,0,0,,an approval, that you allow
Dialogue: 0,0:12:59.98,0:13:00.98,Default,,0,0,0,,access to the application.
Dialogue: 0,0:13:00.98,0:13:02.10,Default,,0,0,0,,Allow them to keep using your
Dialogue: 0,0:13:02.10,0:13:03.20,Default,,0,0,0,,app, and don't let them get
Dialogue: 0,0:13:03.20,0:13:04.61,Default,,0,0,0,,stuck on any kind of modal
Dialogue: 0,0:13:04.61,0:13:05.99,Default,,0,0,0,,loading spinners or things like
Dialogue: 0,0:13:06.02,0:13:06.26,Default,,0,0,0,,that.
Dialogue: 0,0:13:06.89,0:13:07.95,Default,,0,0,0,,The transaction will eventually
Dialogue: 0,0:13:07.95,0:13:09.03,Default,,0,0,0,,come through as a purchased one,
Dialogue: 0,0:13:09.03,0:13:09.95,Default,,0,0,0,,once it does get approved.
Dialogue: 0,0:13:09.95,0:13:11.16,Default,,0,0,0,,And you can just handle it like
Dialogue: 0,0:13:11.16,0:13:12.17,Default,,0,0,0,,any purchase transaction.
Dialogue: 0,0:13:13.48,0:13:15.56,Default,,0,0,0,,In order to test out deferred
Dialogue: 0,0:13:15.56,0:13:16.69,Default,,0,0,0,,transactions, we provide a way
Dialogue: 0,0:13:16.69,0:13:17.37,Default,,0,0,0,,for you to do this.
Dialogue: 0,0:13:17.57,0:13:18.89,Default,,0,0,0,,You can create a mutable payment
Dialogue: 0,0:13:18.89,0:13:19.33,Default,,0,0,0,,object.
Dialogue: 0,0:13:20.09,0:13:20.71,Default,,0,0,0,,And you can set the
Dialogue: 0,0:13:20.71,0:13:22.67,Default,,0,0,0,,simulatesAskToBuy flag on this
Dialogue: 0,0:13:22.67,0:13:23.06,Default,,0,0,0,,object.
Dialogue: 0,0:13:23.34,0:13:24.29,Default,,0,0,0,,Now, this is effective when
Dialogue: 0,0:13:24.29,0:13:25.18,Default,,0,0,0,,you're using the Sandbox
Dialogue: 0,0:13:25.18,0:13:25.76,Default,,0,0,0,,environment.
Dialogue: 0,0:13:25.99,0:13:26.71,Default,,0,0,0,,We're not going to go into the
Dialogue: 0,0:13:26.71,0:13:27.80,Default,,0,0,0,,Sandbox as much, this talk.
Dialogue: 0,0:13:27.80,0:13:29.20,Default,,0,0,0,,But this is what it looks like,
Dialogue: 0,0:13:29.20,0:13:29.58,Default,,0,0,0,,in code.
Dialogue: 0,0:13:29.58,0:13:31.73,Default,,0,0,0,,You just set that
Dialogue: 0,0:13:31.93,0:13:33.68,Default,,0,0,0,,simulatesAskToBuyInSandbox flag
Dialogue: 0,0:13:33.68,0:13:34.10,Default,,0,0,0,,to true.
Dialogue: 0,0:13:34.10,0:13:35.12,Default,,0,0,0,,And this just means that when
Dialogue: 0,0:13:35.27,0:13:36.70,Default,,0,0,0,,you're testing out developing
Dialogue: 0,0:13:36.70,0:13:37.70,Default,,0,0,0,,in-app purchases, this
Dialogue: 0,0:13:37.70,0:13:38.83,Default,,0,0,0,,particular transaction's going
Dialogue: 0,0:13:38.83,0:13:40.24,Default,,0,0,0,,to come through in the updated
Dialogue: 0,0:13:40.24,0:13:41.93,Default,,0,0,0,,transactions call a deferred
Dialogue: 0,0:13:41.93,0:13:42.46,Default,,0,0,0,,transaction.
Dialogue: 0,0:13:42.46,0:13:43.74,Default,,0,0,0,,So, you can just test out how
Dialogue: 0,0:13:43.74,0:13:44.78,Default,,0,0,0,,you handle those particular
Dialogue: 0,0:13:44.78,0:13:45.28,Default,,0,0,0,,cases.
Dialogue: 0,0:13:45.28,0:13:48.33,Default,,0,0,0,,When it comes to handling
Dialogue: 0,0:13:48.33,0:13:49.83,Default,,0,0,0,,errors, couple of points to
Dialogue: 0,0:13:49.83,0:13:50.11,Default,,0,0,0,,remember.
Dialogue: 0,0:13:50.11,0:13:51.33,Default,,0,0,0,,Now, not all errors that come
Dialogue: 0,0:13:51.33,0:13:52.63,Default,,0,0,0,,through this process are equal.
Dialogue: 0,0:13:53.22,0:13:54.26,Default,,0,0,0,,And that means you really need
Dialogue: 0,0:13:54.26,0:13:55.18,Default,,0,0,0,,to pay attention to the error
Dialogue: 0,0:13:55.18,0:13:56.54,Default,,0,0,0,,code that comes through with a
Dialogue: 0,0:13:56.54,0:13:57.20,Default,,0,0,0,,transaction.
Dialogue: 0,0:13:57.71,0:13:59.30,Default,,0,0,0,,So, maybe don't show an alert
Dialogue: 0,0:13:59.30,0:14:00.77,Default,,0,0,0,,unless it's absolutely necessary
Dialogue: 0,0:14:00.77,0:14:01.84,Default,,0,0,0,,to inform your user of a
Dialogue: 0,0:14:01.84,0:14:02.40,Default,,0,0,0,,particular error.
Dialogue: 0,0:14:03.07,0:14:04.02,Default,,0,0,0,,You know, we see things like
Dialogue: 0,0:14:04.28,0:14:05.76,Default,,0,0,0,,maybe a user cancels a payment,
Dialogue: 0,0:14:05.97,0:14:07.69,Default,,0,0,0,,which has a specific error code.
Dialogue: 0,0:14:08.28,0:14:09.13,Default,,0,0,0,,And you don't need to show an
Dialogue: 0,0:14:09.13,0:14:10.49,Default,,0,0,0,,alert that says user cancelled
Dialogue: 0,0:14:10.54,0:14:11.03,Default,,0,0,0,,to the user.
Dialogue: 0,0:14:11.11,0:14:12.30,Default,,0,0,0,,You know, they hit the Cancel
Dialogue: 0,0:14:12.30,0:14:12.96,Default,,0,0,0,,button, they know they
Dialogue: 0,0:14:12.96,0:14:13.43,Default,,0,0,0,,cancelled.
Dialogue: 0,0:14:13.88,0:14:14.62,Default,,0,0,0,,You don't need to let them know,
Dialogue: 0,0:14:14.62,0:14:14.84,Default,,0,0,0,,again.
Dialogue: 0,0:14:15.39,0:14:17.33,Default,,0,0,0,,It's also important to let
Dialogue: 0,0:14:17.33,0:14:18.71,Default,,0,0,0,,StoreKit handle the transaction
Dialogue: 0,0:14:18.71,0:14:19.79,Default,,0,0,0,,flow as much as possible.
Dialogue: 0,0:14:20.28,0:14:21.30,Default,,0,0,0,,And this means that you don't
Dialogue: 0,0:14:21.30,0:14:22.65,Default,,0,0,0,,need to ask for confirmation for
Dialogue: 0,0:14:22.65,0:14:23.68,Default,,0,0,0,,things like in-app purchases,
Dialogue: 0,0:14:23.68,0:14:25.39,Default,,0,0,0,,once they elect to buy it.
Dialogue: 0,0:14:25.39,0:14:26.45,Default,,0,0,0,,We have that nice new payment
Dialogue: 0,0:14:26.45,0:14:27.38,Default,,0,0,0,,sheet to do that for you.
Dialogue: 0,0:14:27.55,0:14:28.72,Default,,0,0,0,,And you can let StoreKit handle
Dialogue: 0,0:14:29.35,0:14:29.49,Default,,0,0,0,,that.
Dialogue: 0,0:14:30.28,0:14:32.06,Default,,0,0,0,,Now, once a transaction comes
Dialogue: 0,0:14:32.11,0:14:33.42,Default,,0,0,0,,through in the purchase state, I
Dialogue: 0,0:14:33.42,0:14:34.44,Default,,0,0,0,,mentioned that it's important
Dialogue: 0,0:14:34.44,0:14:35.62,Default,,0,0,0,,for you to verify that
Dialogue: 0,0:14:35.62,0:14:36.19,Default,,0,0,0,,transaction.
Dialogue: 0,0:14:36.46,0:14:37.22,Default,,0,0,0,,How do we do that?
Dialogue: 0,0:14:37.22,0:14:38.70,Default,,0,0,0,,How are we sure that money has
Dialogue: 0,0:14:38.70,0:14:39.79,Default,,0,0,0,,actually changed hands?
Dialogue: 0,0:14:39.79,0:14:41.57,Default,,0,0,0,,Well, we use the application
Dialogue: 0,0:14:41.57,0:14:43.78,Default,,0,0,0,,receipt to do this.
Dialogue: 0,0:14:44.14,0:14:45.22,Default,,0,0,0,,This application receipt is
Dialogue: 0,0:14:45.22,0:14:46.39,Default,,0,0,0,,really just like any receipt you
Dialogue: 0,0:14:46.39,0:14:47.49,Default,,0,0,0,,get in the department store.
Dialogue: 0,0:14:47.79,0:14:49.94,Default,,0,0,0,,It's a proof of purchase that is
Dialogue: 0,0:14:49.94,0:14:51.29,Default,,0,0,0,,evidence that the user has
Dialogue: 0,0:14:51.29,0:14:52.28,Default,,0,0,0,,bought something they say
Dialogue: 0,0:14:52.28,0:14:52.82,Default,,0,0,0,,they've bought.
Dialogue: 0,0:14:52.94,0:14:55.32,Default,,0,0,0,,So, in this particular case,
Dialogue: 0,0:14:55.32,0:14:56.98,Default,,0,0,0,,it's a trusted record of the app
Dialogue: 0,0:14:56.98,0:14:58.09,Default,,0,0,0,,and any in-app purchases that
Dialogue: 0,0:14:58.09,0:14:59.10,Default,,0,0,0,,have occurred for a particular
Dialogue: 0,0:14:59.10,0:14:59.62,Default,,0,0,0,,application.
Dialogue: 0,0:15:00.42,0:15:01.56,Default,,0,0,0,,Every app actually has an app
Dialogue: 0,0:15:01.56,0:15:02.60,Default,,0,0,0,,receipt, because it includes
Dialogue: 0,0:15:02.60,0:15:03.91,Default,,0,0,0,,information about initial app
Dialogue: 0,0:15:03.91,0:15:06.12,Default,,0,0,0,,purchases and even information
Dialogue: 0,0:15:06.18,0:15:07.37,Default,,0,0,0,,about the original free app
Dialogue: 0,0:15:07.42,0:15:08.16,Default,,0,0,0,,downloads, as well.
Dialogue: 0,0:15:08.95,0:15:10.56,Default,,0,0,0,,This document's stored on the
Dialogue: 0,0:15:10.56,0:15:12.25,Default,,0,0,0,,user's device, and it's issued
Dialogue: 0,0:15:12.25,0:15:13.38,Default,,0,0,0,,and put there by the App Store.
Dialogue: 0,0:15:14.24,0:15:15.47,Default,,0,0,0,,And it's also a signed and
Dialogue: 0,0:15:15.47,0:15:16.48,Default,,0,0,0,,verifiable document.
Dialogue: 0,0:15:16.48,0:15:17.70,Default,,0,0,0,,So, you can be sure that this is
Dialogue: 0,0:15:17.70,0:15:19.03,Default,,0,0,0,,a document issued by Apple.
Dialogue: 0,0:15:19.21,0:15:20.77,Default,,0,0,0,,And you can use certificates to
Dialogue: 0,0:15:20.77,0:15:22.01,Default,,0,0,0,,actually check that that's the
Dialogue: 0,0:15:22.01,0:15:22.41,Default,,0,0,0,,case.
Dialogue: 0,0:15:23.63,0:15:25.37,Default,,0,0,0,,Finally, it's for your app, on
Dialogue: 0,0:15:25.37,0:15:26.31,Default,,0,0,0,,that device only.
Dialogue: 0,0:15:26.31,0:15:27.76,Default,,0,0,0,,So, this receipt document can't
Dialogue: 0,0:15:27.76,0:15:29.01,Default,,0,0,0,,be shared across devices.
Dialogue: 0,0:15:29.01,0:15:30.40,Default,,0,0,0,,And it can't be shared amongst
Dialogue: 0,0:15:30.40,0:15:31.98,Default,,0,0,0,,applications on the same device.
Dialogue: 0,0:15:33.39,0:15:34.51,Default,,0,0,0,,Now, to be sure that the
Dialogue: 0,0:15:34.51,0:15:35.61,Default,,0,0,0,,document that you're using to
Dialogue: 0,0:15:35.61,0:15:36.80,Default,,0,0,0,,check these transactions is
Dialogue: 0,0:15:36.95,0:15:38.06,Default,,0,0,0,,indeed a valid one, you do what
Dialogue: 0,0:15:38.06,0:15:39.31,Default,,0,0,0,,we call receipt validation.
Dialogue: 0,0:15:40.03,0:15:41.19,Default,,0,0,0,,Receipt validation can be done a
Dialogue: 0,0:15:41.19,0:15:41.95,Default,,0,0,0,,couple of ways.
Dialogue: 0,0:15:42.43,0:15:43.70,Default,,0,0,0,,You can do it directly on the
Dialogue: 0,0:15:43.70,0:15:45.24,Default,,0,0,0,,user's device using on device
Dialogue: 0,0:15:45.24,0:15:45.97,Default,,0,0,0,,validation.
Dialogue: 0,0:15:45.97,0:15:46.91,Default,,0,0,0,,And you can unlock features,
Dialogue: 0,0:15:46.91,0:15:47.42,Default,,0,0,0,,accordingly.
Dialogue: 0,0:15:48.31,0:15:49.75,Default,,0,0,0,,Well, the other way is to use
Dialogue: 0,0:15:49.75,0:15:50.97,Default,,0,0,0,,server to server validation.
Dialogue: 0,0:15:51.05,0:15:52.39,Default,,0,0,0,,So, you can take that encrypted
Dialogue: 0,0:15:52.39,0:15:53.96,Default,,0,0,0,,receipt data, and you can send
Dialogue: 0,0:15:53.96,0:15:54.84,Default,,0,0,0,,it up to your server.
Dialogue: 0,0:15:55.27,0:15:56.53,Default,,0,0,0,,And from there you can send it
Dialogue: 0,0:15:56.53,0:15:57.66,Default,,0,0,0,,over to the App Store server, in
Dialogue: 0,0:15:57.66,0:15:59.07,Default,,0,0,0,,order to perform some of those
Dialogue: 0,0:15:59.07,0:15:59.67,Default,,0,0,0,,checks for you.
Dialogue: 0,0:15:59.67,0:16:02.08,Default,,0,0,0,,We're not going to go into the
Dialogue: 0,0:16:02.08,0:16:03.01,Default,,0,0,0,,details about receipt
Dialogue: 0,0:16:03.01,0:16:03.48,Default,,0,0,0,,validation.
Dialogue: 0,0:16:03.48,0:16:04.62,Default,,0,0,0,,And this talk that's going to be
Dialogue: 0,0:16:04.62,0:16:05.43,Default,,0,0,0,,talked about, again, in the
Dialogue: 0,0:16:05.43,0:16:06.18,Default,,0,0,0,,Advanced Session, this
Dialogue: 0,0:16:06.18,0:16:06.68,Default,,0,0,0,,afternoon.
Dialogue: 0,0:16:06.68,0:16:07.87,Default,,0,0,0,,I'm going to talk about you
Dialogue: 0,0:16:07.87,0:16:08.78,Default,,0,0,0,,know, how to read in this
Dialogue: 0,0:16:08.78,0:16:10.25,Default,,0,0,0,,receipt data from the device.
Dialogue: 0,0:16:10.25,0:16:11.28,Default,,0,0,0,,And also, how to do the server
Dialogue: 0,0:16:11.28,0:16:13.24,Default,,0,0,0,,to server exchanges for that,
Dialogue: 0,0:16:13.24,0:16:13.44,Default,,0,0,0,,too.
Dialogue: 0,0:16:14.42,0:16:16.16,Default,,0,0,0,,But once you've confirmed that
Dialogue: 0,0:16:16.16,0:16:17.24,Default,,0,0,0,,this receipt is an authentic
Dialogue: 0,0:16:17.24,0:16:18.80,Default,,0,0,0,,document, you can go ahead and
Dialogue: 0,0:16:18.80,0:16:20.59,Default,,0,0,0,,read in transactions and ensure
Dialogue: 0,0:16:20.59,0:16:21.70,Default,,0,0,0,,that this transaction that's
Dialogue: 0,0:16:21.70,0:16:22.85,Default,,0,0,0,,come through in this process is
Dialogue: 0,0:16:22.85,0:16:23.79,Default,,0,0,0,,present in the receipt.
Dialogue: 0,0:16:23.79,0:16:24.82,Default,,0,0,0,,And that means that you've got a
Dialogue: 0,0:16:24.82,0:16:26.78,Default,,0,0,0,,valid purchase ready to go ahead
Dialogue: 0,0:16:26.78,0:16:28.98,Default,,0,0,0,,with for the next step.
Dialogue: 0,0:16:29.10,0:16:30.49,Default,,0,0,0,,Which is to unlock the content
Dialogue: 0,0:16:30.49,0:16:31.46,Default,,0,0,0,,for your in-app purchase.
Dialogue: 0,0:16:31.90,0:16:32.71,Default,,0,0,0,,This is, obviously, a pretty
Dialogue: 0,0:16:32.71,0:16:33.28,Default,,0,0,0,,important step.
Dialogue: 0,0:16:34.01,0:16:35.12,Default,,0,0,0,,To make the functionality that
Dialogue: 0,0:16:35.12,0:16:36.40,Default,,0,0,0,,the user's bought, available to
Dialogue: 0,0:16:36.40,0:16:36.75,Default,,0,0,0,,the user.
Dialogue: 0,0:16:37.20,0:16:38.35,Default,,0,0,0,,This is the step where you might
Dialogue: 0,0:16:38.35,0:16:39.78,Default,,0,0,0,,download any additional content
Dialogue: 0,0:16:39.78,0:16:40.69,Default,,0,0,0,,and make it available to the
Dialogue: 0,0:16:40.69,0:16:41.00,Default,,0,0,0,,user.
Dialogue: 0,0:16:41.82,0:16:43.26,Default,,0,0,0,,If you are downloading content
Dialogue: 0,0:16:43.26,0:16:44.18,Default,,0,0,0,,for in-app purchases, there's a
Dialogue: 0,0:16:44.18,0:16:46.98,Default,,0,0,0,,couple of ways you can do this.
Dialogue: 0,0:16:47.18,0:16:48.68,Default,,0,0,0,,Apple actually offers two
Dialogue: 0,0:16:48.68,0:16:50.11,Default,,0,0,0,,techniques for you to use, as
Dialogue: 0,0:16:50.11,0:16:50.46,Default,,0,0,0,,well.
Dialogue: 0,0:16:50.53,0:16:52.31,Default,,0,0,0,,We have on-demand resources,
Dialogue: 0,0:16:52.31,0:16:53.21,Default,,0,0,0,,which is an API that we
Dialogue: 0,0:16:53.21,0:16:54.17,Default,,0,0,0,,introduced a couple of years,
Dialogue: 0,0:16:54.17,0:16:54.42,Default,,0,0,0,,ago.
Dialogue: 0,0:16:54.78,0:16:55.92,Default,,0,0,0,,And we also have what I
Dialogue: 0,0:16:55.92,0:16:56.47,Default,,0,0,0,,mentioned earlier.
Dialogue: 0,0:16:56.47,0:16:57.86,Default,,0,0,0,,The hosted in-app purchase
Dialogue: 0,0:16:58.07,0:16:59.02,Default,,0,0,0,,downloadable content.
Dialogue: 0,0:16:59.02,0:17:00.10,Default,,0,0,0,,So, you can associate
Dialogue: 0,0:17:00.10,0:17:01.64,Default,,0,0,0,,downloadable content through
Dialogue: 0,0:17:01.69,0:17:03.73,Default,,0,0,0,,iTunes Connect that's accessed
Dialogue: 0,0:17:03.79,0:17:05.41,Default,,0,0,0,,through the SKProduct object,
Dialogue: 0,0:17:05.41,0:17:05.85,Default,,0,0,0,,directly.
Dialogue: 0,0:17:06.57,0:17:08.00,Default,,0,0,0,,Of course, the other way is just
Dialogue: 0,0:17:08.33,0:17:09.39,Default,,0,0,0,,to host the content, yourself,
Dialogue: 0,0:17:09.39,0:17:10.03,Default,,0,0,0,,on your own server.
Dialogue: 0,0:17:10.45,0:17:11.34,Default,,0,0,0,,Which is perfectly okay.
Dialogue: 0,0:17:11.34,0:17:12.56,Default,,0,0,0,,But if you do that, I just
Dialogue: 0,0:17:12.56,0:17:13.51,Default,,0,0,0,,encourage you to remember to use
Dialogue: 0,0:17:13.51,0:17:14.51,Default,,0,0,0,,the appropriate background
Dialogue: 0,0:17:14.71,0:17:15.68,Default,,0,0,0,,downloading APIs.
Dialogue: 0,0:17:15.68,0:17:17.43,Default,,0,0,0,,Use NSURL session to make sure
Dialogue: 0,0:17:17.43,0:17:18.61,Default,,0,0,0,,that these downloads aren't
Dialogue: 0,0:17:18.61,0:17:19.42,Default,,0,0,0,,interrupted, you know, when a
Dialogue: 0,0:17:19.42,0:17:20.95,Default,,0,0,0,,user exits your application.
Dialogue: 0,0:17:22.20,0:17:23.77,Default,,0,0,0,,Once you've unlocked your
Dialogue: 0,0:17:23.77,0:17:25.11,Default,,0,0,0,,content, maybe you've made that
Dialogue: 0,0:17:25.17,0:17:26.58,Default,,0,0,0,,pro version of your application
Dialogue: 0,0:17:26.58,0:17:27.41,Default,,0,0,0,,available to the user.
Dialogue: 0,0:17:28.23,0:17:29.41,Default,,0,0,0,,You can go ahead and finish the
Dialogue: 0,0:17:29.41,0:17:29.96,Default,,0,0,0,,transaction.
Dialogue: 0,0:17:29.96,0:17:30.82,Default,,0,0,0,,This is the last step in
Dialogue: 0,0:17:30.82,0:17:32.06,Default,,0,0,0,,implementing in-app purchases.
Dialogue: 0,0:17:32.61,0:17:34.43,Default,,0,0,0,,So, it's important to finish all
Dialogue: 0,0:17:34.43,0:17:35.66,Default,,0,0,0,,transactions that come through
Dialogue: 0,0:17:35.66,0:17:36.20,Default,,0,0,0,,this process.
Dialogue: 0,0:17:36.20,0:17:37.30,Default,,0,0,0,,Even if they're in like an error
Dialogue: 0,0:17:37.30,0:17:38.61,Default,,0,0,0,,state, you got to finish all
Dialogue: 0,0:17:38.61,0:17:39.73,Default,,0,0,0,,transactions that come through
Dialogue: 0,0:17:39.73,0:17:40.24,Default,,0,0,0,,in this flow.
Dialogue: 0,0:17:40.64,0:17:41.55,Default,,0,0,0,,And that includes when you're
Dialogue: 0,0:17:41.55,0:17:42.55,Default,,0,0,0,,dealing with auto-renewable
Dialogue: 0,0:17:42.55,0:17:43.13,Default,,0,0,0,,subscriptions.
Dialogue: 0,0:17:43.13,0:17:45.41,Default,,0,0,0,,Any renewal transactions that
Dialogue: 0,0:17:45.41,0:17:46.57,Default,,0,0,0,,come in this flow, as well.
Dialogue: 0,0:17:46.57,0:17:48.52,Default,,0,0,0,,So, any of those, billing period
Dialogue: 0,0:17:48.52,0:17:49.91,Default,,0,0,0,,renewals that come through, you
Dialogue: 0,0:17:49.91,0:17:50.89,Default,,0,0,0,,have to make sure you take all
Dialogue: 0,0:17:50.89,0:17:52.22,Default,,0,0,0,,of these through this process to
Dialogue: 0,0:17:52.27,0:17:52.72,Default,,0,0,0,,finish them.
Dialogue: 0,0:17:53.78,0:17:55.57,Default,,0,0,0,,If you don't finish the
Dialogue: 0,0:17:55.57,0:17:56.47,Default,,0,0,0,,transaction, they actually
Dialogue: 0,0:17:56.47,0:17:57.50,Default,,0,0,0,,remain on the payment queue.
Dialogue: 0,0:17:57.50,0:17:58.20,Default,,0,0,0,,And they're going to keep on
Dialogue: 0,0:17:58.26,0:17:59.44,Default,,0,0,0,,popping up in that updated
Dialogue: 0,0:17:59.44,0:18:01.01,Default,,0,0,0,,transactions callback on every
Dialogue: 0,0:18:01.01,0:18:01.62,Default,,0,0,0,,app launch.
Dialogue: 0,0:18:01.83,0:18:02.63,Default,,0,0,0,,So, make sure that you are
Dialogue: 0,0:18:02.63,0:18:03.78,Default,,0,0,0,,finishing them properly and
Dialogue: 0,0:18:03.78,0:18:04.80,Default,,0,0,0,,getting them out of that payment
Dialogue: 0,0:18:04.80,0:18:05.03,Default,,0,0,0,,queue.
Dialogue: 0,0:18:05.73,0:18:06.52,Default,,0,0,0,,In fact, when it comes to
Dialogue: 0,0:18:06.52,0:18:07.63,Default,,0,0,0,,auto-renewable subscriptions,
Dialogue: 0,0:18:07.63,0:18:09.65,Default,,0,0,0,,we've got some details around
Dialogue: 0,0:18:09.65,0:18:11.76,Default,,0,0,0,,billing retry that relies on up
Dialogue: 0,0:18:11.76,0:18:13.03,Default,,0,0,0,,to date knowledge around the
Dialogue: 0,0:18:13.03,0:18:14.13,Default,,0,0,0,,state of all these renewal
Dialogue: 0,0:18:14.13,0:18:14.82,Default,,0,0,0,,transactions.
Dialogue: 0,0:18:15.04,0:18:16.07,Default,,0,0,0,,So, It's really important that
Dialogue: 0,0:18:16.07,0:18:18.66,Default,,0,0,0,,you do keep these finished and
Dialogue: 0,0:18:18.66,0:18:19.27,Default,,0,0,0,,up to date.
Dialogue: 0,0:18:20.32,0:18:21.95,Default,,0,0,0,,When it comes to finishing them,
Dialogue: 0,0:18:21.95,0:18:22.85,Default,,0,0,0,,it's actually just one line of
Dialogue: 0,0:18:22.85,0:18:23.10,Default,,0,0,0,,code.
Dialogue: 0,0:18:23.10,0:18:24.43,Default,,0,0,0,,So, there's no excuses.
Dialogue: 0,0:18:24.78,0:18:25.88,Default,,0,0,0,,You just pass the transaction
Dialogue: 0,0:18:25.88,0:18:26.44,Default,,0,0,0,,through to the finished
Dialogue: 0,0:18:26.44,0:18:27.35,Default,,0,0,0,,transaction callback.
Dialogue: 0,0:18:27.67,0:18:29.00,Default,,0,0,0,,This is a API on the
Dialogue: 0,0:18:29.00,0:18:30.33,Default,,0,0,0,,SKPaymentQueue's default queue.
Dialogue: 0,0:18:30.89,0:18:33.41,Default,,0,0,0,,But once you do that, you've
Dialogue: 0,0:18:33.41,0:18:34.92,Default,,0,0,0,,finished the transaction, that's
Dialogue: 0,0:18:34.92,0:18:35.91,Default,,0,0,0,,the last step in actually
Dialogue: 0,0:18:35.91,0:18:36.99,Default,,0,0,0,,implementing the in-app purchase
Dialogue: 0,0:18:36.99,0:18:37.74,Default,,0,0,0,,flow on a device.
Dialogue: 0,0:18:37.74,0:18:39.69,Default,,0,0,0,,So, the user's now got access to
Dialogue: 0,0:18:39.69,0:18:40.55,Default,,0,0,0,,that in-app purchase that
Dialogue: 0,0:18:40.55,0:18:41.16,Default,,0,0,0,,they've paid for.
Dialogue: 0,0:18:42.32,0:18:43.48,Default,,0,0,0,,A couple of tips just while
Dialogue: 0,0:18:43.48,0:18:44.14,Default,,0,0,0,,we're on the subject.
Dialogue: 0,0:18:44.41,0:18:46.06,Default,,0,0,0,,When you're in app review, you
Dialogue: 0,0:18:46.06,0:18:47.58,Default,,0,0,0,,must have a Restore button if
Dialogue: 0,0:18:47.58,0:18:50.38,Default,,0,0,0,,you've got non-consumable or
Dialogue: 0,0:18:50.38,0:18:51.64,Default,,0,0,0,,auto-renewable subscription
Dialogue: 0,0:18:51.64,0:18:52.71,Default,,0,0,0,,products in your application.
Dialogue: 0,0:18:52.71,0:18:54.24,Default,,0,0,0,,And this Restore button has to
Dialogue: 0,0:18:54.24,0:18:55.84,Default,,0,0,0,,be a separate button from the
Dialogue: 0,0:18:55.84,0:18:56.88,Default,,0,0,0,,actual purchase button.
Dialogue: 0,0:18:57.19,0:18:58.10,Default,,0,0,0,,So, it can be somewhere in your
Dialogue: 0,0:18:58.10,0:18:58.81,Default,,0,0,0,,app, maybe buried in your
Dialogue: 0,0:18:58.81,0:18:59.48,Default,,0,0,0,,settings, somewhere.
Dialogue: 0,0:18:59.48,0:19:01.66,Default,,0,0,0,,But it's just a tool to allow
Dialogue: 0,0:19:01.66,0:19:02.77,Default,,0,0,0,,users to restore completed
Dialogue: 0,0:19:02.77,0:19:03.37,Default,,0,0,0,,transactions.
Dialogue: 0,0:19:03.37,0:19:04.95,Default,,0,0,0,,And it's not just a backup tool.
Dialogue: 0,0:19:05.16,0:19:06.41,Default,,0,0,0,,You know. People use this all
Dialogue: 0,0:19:06.41,0:19:07.20,Default,,0,0,0,,the time when they're dealing
Dialogue: 0,0:19:07.20,0:19:08.21,Default,,0,0,0,,with maybe a new device.
Dialogue: 0,0:19:08.21,0:19:09.21,Default,,0,0,0,,If they go and buy a new iPad,
Dialogue: 0,0:19:09.21,0:19:10.73,Default,,0,0,0,,and they want to unlock the
Dialogue: 0,0:19:10.73,0:19:12.25,Default,,0,0,0,,content that they've paid for on
Dialogue: 0,0:19:12.25,0:19:12.76,Default,,0,0,0,,their phone.
Dialogue: 0,0:19:13.10,0:19:13.84,Default,,0,0,0,,They use that Restore
Dialogue: 0,0:19:13.84,0:19:15.02,Default,,0,0,0,,Transactions feature to be able
Dialogue: 0,0:19:15.02,0:19:15.47,Default,,0,0,0,,to do that.
Dialogue: 0,0:19:15.47,0:19:16.42,Default,,0,0,0,,So, it's important you have a
Dialogue: 0,0:19:16.42,0:19:17.70,Default,,0,0,0,,Restore Transactions button,
Dialogue: 0,0:19:17.70,0:19:19.22,Default,,0,0,0,,somewhere in your application.
Dialogue: 0,0:19:20.06,0:19:21.17,Default,,0,0,0,,As I mentioned, though, it does
Dialogue: 0,0:19:21.17,0:19:22.44,Default,,0,0,0,,only restore transactions for
Dialogue: 0,0:19:22.44,0:19:23.37,Default,,0,0,0,,non-consumable and
Dialogue: 0,0:19:23.37,0:19:24.82,Default,,0,0,0,,auto-renewable subscription
Dialogue: 0,0:19:24.82,0:19:25.28,Default,,0,0,0,,products.
Dialogue: 0,0:19:25.90,0:19:27.11,Default,,0,0,0,,So, if you're selling consumable
Dialogue: 0,0:19:27.11,0:19:28.21,Default,,0,0,0,,products or non-renewing
Dialogue: 0,0:19:28.21,0:19:29.34,Default,,0,0,0,,subscriptions, you've got to
Dialogue: 0,0:19:29.34,0:19:30.35,Default,,0,0,0,,persist the state of those
Dialogue: 0,0:19:30.35,0:19:31.14,Default,,0,0,0,,things, yourself.
Dialogue: 0,0:19:31.39,0:19:32.25,Default,,0,0,0,,So, maybe you've got a game
Dialogue: 0,0:19:32.25,0:19:33.62,Default,,0,0,0,,account, you might associate it
Dialogue: 0,0:19:33.62,0:19:34.64,Default,,0,0,0,,with that account information
Dialogue: 0,0:19:34.64,0:19:35.68,Default,,0,0,0,,somewhere on your own server.
Dialogue: 0,0:19:35.82,0:19:38.69,Default,,0,0,0,,In order to actually restore
Dialogue: 0,0:19:38.69,0:19:40.07,Default,,0,0,0,,them, this is the API for it.
Dialogue: 0,0:19:41.00,0:19:41.10,Default,,0,0,0,,It's
Dialogue: 0,0:19:41.10,0:19:42.70,Default,,0,0,0,,restoreCompletedTransactions as
Dialogue: 0,0:19:42.70,0:19:43.45,Default,,0,0,0,,the method, and it's on the
Dialogue: 0,0:19:43.45,0:19:44.35,Default,,0,0,0,,default payment queue.
Dialogue: 0,0:19:44.90,0:19:46.41,Default,,0,0,0,,If you call that, that's going
Dialogue: 0,0:19:46.41,0:19:47.69,Default,,0,0,0,,to cause all the completed
Dialogue: 0,0:19:47.69,0:19:49.01,Default,,0,0,0,,transactions in those categories
Dialogue: 0,0:19:49.20,0:19:50.69,Default,,0,0,0,,to reappear on the updated
Dialogue: 0,0:19:50.69,0:19:51.66,Default,,0,0,0,,transactions callback.
Dialogue: 0,0:19:52.00,0:19:52.96,Default,,0,0,0,,So, you can just do the same
Dialogue: 0,0:19:52.96,0:19:54.89,Default,,0,0,0,,process that we just saw, check
Dialogue: 0,0:19:54.89,0:19:55.88,Default,,0,0,0,,for them being in the purchase
Dialogue: 0,0:19:55.88,0:19:57.28,Default,,0,0,0,,state, do receipt validation,
Dialogue: 0,0:19:57.28,0:19:58.30,Default,,0,0,0,,unlock all the features
Dialogue: 0,0:19:58.30,0:19:58.82,Default,,0,0,0,,accordingly.
Dialogue: 0,0:20:00.12,0:20:01.35,Default,,0,0,0,,There's a couple more APIs
Dialogue: 0,0:20:01.35,0:20:02.46,Default,,0,0,0,,around the restoring completed
Dialogue: 0,0:20:02.46,0:20:02.98,Default,,0,0,0,,transactions.
Dialogue: 0,0:20:03.10,0:20:04.36,Default,,0,0,0,,You can understand if it's
Dialogue: 0,0:20:04.36,0:20:05.52,Default,,0,0,0,,finished or if there was an
Dialogue: 0,0:20:05.52,0:20:06.72,Default,,0,0,0,,error with a particular process.
Dialogue: 0,0:20:06.77,0:20:08.47,Default,,0,0,0,,But the real thing to do, here,
Dialogue: 0,0:20:08.47,0:20:09.36,Default,,0,0,0,,is just if you have a
Dialogue: 0,0:20:09.36,0:20:10.70,Default,,0,0,0,,transaction observer registered
Dialogue: 0,0:20:10.70,0:20:11.84,Default,,0,0,0,,early on in your application.
Dialogue: 0,0:20:11.84,0:20:13.06,Default,,0,0,0,,You can just handle all of these
Dialogue: 0,0:20:13.06,0:20:14.11,Default,,0,0,0,,transactions as they come
Dialogue: 0,0:20:14.11,0:20:15.37,Default,,0,0,0,,through that updated
Dialogue: 0,0:20:15.37,0:20:16.37,Default,,0,0,0,,transactions callback.
Dialogue: 0,0:20:18.28,0:20:20.32,Default,,0,0,0,,So, just to summarize this
Dialogue: 0,0:20:20.32,0:20:21.32,Default,,0,0,0,,process that we just talked
Dialogue: 0,0:20:21.32,0:20:21.66,Default,,0,0,0,,about.
Dialogue: 0,0:20:21.66,0:20:22.88,Default,,0,0,0,,Always observe the payment queue
Dialogue: 0,0:20:22.88,0:20:23.79,Default,,0,0,0,,and make sure you're doing it as
Dialogue: 0,0:20:23.79,0:20:25.18,Default,,0,0,0,,early on in your application
Dialogue: 0,0:20:25.18,0:20:27.48,Default,,0,0,0,,lifecycle, as possible.
Dialogue: 0,0:20:27.48,0:20:28.76,Default,,0,0,0,,Use an SKProducts request to
Dialogue: 0,0:20:28.76,0:20:30.55,Default,,0,0,0,,request localized information
Dialogue: 0,0:20:30.78,0:20:31.88,Default,,0,0,0,,about the products from the App
Dialogue: 0,0:20:31.88,0:20:32.27,Default,,0,0,0,,Store.
Dialogue: 0,0:20:32.52,0:20:33.39,Default,,0,0,0,,And use that to display
Dialogue: 0,0:20:33.39,0:20:34.95,Default,,0,0,0,,localized pricing information.
Dialogue: 0,0:20:35.27,0:20:36.25,Default,,0,0,0,,Use that technique we just saw
Dialogue: 0,0:20:36.25,0:20:37.16,Default,,0,0,0,,with the number formatter, to
Dialogue: 0,0:20:37.16,0:20:38.82,Default,,0,0,0,,make sure that your price is
Dialogue: 0,0:20:38.82,0:20:40.20,Default,,0,0,0,,being displayed in the user's
Dialogue: 0,0:20:40.91,0:20:42.06,Default,,0,0,0,,store locale.
Dialogue: 0,0:20:42.21,0:20:45.00,Default,,0,0,0,,Use the receipt to actually
Dialogue: 0,0:20:45.00,0:20:46.28,Default,,0,0,0,,validate that the purchase has
Dialogue: 0,0:20:46.28,0:20:47.11,Default,,0,0,0,,taken place.
Dialogue: 0,0:20:47.70,0:20:49.26,Default,,0,0,0,,This is an important security
Dialogue: 0,0:20:49.26,0:20:50.51,Default,,0,0,0,,step and we'll talk a bit more
Dialogue: 0,0:20:50.51,0:20:51.48,Default,,0,0,0,,about that, this afternoon.
Dialogue: 0,0:20:51.58,0:20:53.18,Default,,0,0,0,,You got to remember to make the
Dialogue: 0,0:20:53.18,0:20:54.53,Default,,0,0,0,,content available to the user.
Dialogue: 0,0:20:54.53,0:20:55.57,Default,,0,0,0,,So, make sure they get what
Dialogue: 0,0:20:55.57,0:20:56.19,Default,,0,0,0,,they've paid for.
Dialogue: 0,0:20:57.33,0:20:59.19,Default,,0,0,0,,And then, finish the transaction
Dialogue: 0,0:20:59.19,0:21:00.31,Default,,0,0,0,,at the end of this process.
Dialogue: 0,0:21:00.42,0:21:01.10,Default,,0,0,0,,Make sure that you call
Dialogue: 0,0:21:01.10,0:21:02.38,Default,,0,0,0,,finishTransaction and pass in
Dialogue: 0,0:21:02.38,0:21:03.37,Default,,0,0,0,,that transaction object.
Dialogue: 0,0:21:03.71,0:21:04.62,Default,,0,0,0,,And then, somewhere in your app,
Dialogue: 0,0:21:04.85,0:21:06.38,Default,,0,0,0,,have a Restore button to allow
Dialogue: 0,0:21:06.38,0:21:08.03,Default,,0,0,0,,users to restore completed
Dialogue: 0,0:21:08.03,0:21:09.68,Default,,0,0,0,,transactions onto that device.
Dialogue: 0,0:21:10.60,0:21:11.62,Default,,0,0,0,,So, that's a bit about
Dialogue: 0,0:21:11.96,0:21:13.24,Default,,0,0,0,,implementing in-app purchases
Dialogue: 0,0:21:13.41,0:21:14.24,Default,,0,0,0,,and that process.
Dialogue: 0,0:21:14.90,0:21:16.49,Default,,0,0,0,,Next, we're going to discuss the
Dialogue: 0,0:21:16.49,0:21:17.84,Default,,0,0,0,,new ability to promote in-app
Dialogue: 0,0:21:18.11,0:21:19.35,Default,,0,0,0,,purchases, directly in the App
Dialogue: 0,0:21:19.35,0:21:19.89,Default,,0,0,0,,Store app.
Dialogue: 0,0:21:20.15,0:21:21.13,Default,,0,0,0,,And to talk a bit more about
Dialogue: 0,0:21:21.13,0:21:22.25,Default,,0,0,0,,that, I'd like to invite Ross
Dialogue: 0,0:21:22.25,0:21:23.35,Default,,0,0,0,,LeBeau up onto the stage.
Dialogue: 0,0:21:24.52,0:21:32.95,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:21:33.45,0:21:34.39,Default,,0,0,0,,>> Hi. I'm Ross.
Dialogue: 0,0:21:34.39,0:21:36.05,Default,,0,0,0,,I'm an engineer on the App Store
Dialogue: 0,0:21:36.05,0:21:36.31,Default,,0,0,0,,team.
Dialogue: 0,0:21:37.16,0:21:38.65,Default,,0,0,0,,And today, I'm excited to tell
Dialogue: 0,0:21:38.65,0:21:39.69,Default,,0,0,0,,you about our latest addition to
Dialogue: 0,0:21:39.69,0:21:40.21,Default,,0,0,0,,the App Store.
Dialogue: 0,0:21:41.38,0:21:42.34,Default,,0,0,0,,It's called Promoting In-App
Dialogue: 0,0:21:42.34,0:21:42.91,Default,,0,0,0,,Purchases.
Dialogue: 0,0:21:43.45,0:21:44.55,Default,,0,0,0,,And it's a great way to reach an
Dialogue: 0,0:21:44.55,0:21:45.43,Default,,0,0,0,,even wider audience with
Dialogue: 0,0:21:45.43,0:21:46.23,Default,,0,0,0,,everything your app has to
Dialogue: 0,0:21:46.23,0:21:46.55,Default,,0,0,0,,offer.
Dialogue: 0,0:21:49.17,0:21:50.72,Default,,0,0,0,,So, before today, if a user
Dialogue: 0,0:21:50.72,0:21:51.93,Default,,0,0,0,,wasn't actively using your app,
Dialogue: 0,0:21:52.44,0:21:53.26,Default,,0,0,0,,your in-app purchases were
Dialogue: 0,0:21:53.26,0:21:54.07,Default,,0,0,0,,pretty hard to find.
Dialogue: 0,0:21:55.50,0:21:57.50,Default,,0,0,0,,But starting in iOS 11, your
Dialogue: 0,0:21:57.50,0:21:58.28,Default,,0,0,0,,in-app purchases will be
Dialogue: 0,0:21:58.28,0:21:59.45,Default,,0,0,0,,discoverable, right in the App
Dialogue: 0,0:21:59.45,0:21:59.72,Default,,0,0,0,,Store.
Dialogue: 0,0:22:00.81,0:22:01.72,Default,,0,0,0,,They'll be visible on your app
Dialogue: 0,0:22:01.72,0:22:02.04,Default,,0,0,0,,page.
Dialogue: 0,0:22:03.21,0:22:03.92,Default,,0,0,0,,They'll be eligible for
Dialogue: 0,0:22:03.96,0:22:04.74,Default,,0,0,0,,editorial feature.
Dialogue: 0,0:22:05.73,0:22:06.57,Default,,0,0,0,,And they can even show up in
Dialogue: 0,0:22:06.57,0:22:07.26,Default,,0,0,0,,search results.
Dialogue: 0,0:22:08.69,0:22:10.49,Default,,0,0,0,,Not only that, but users will be
Dialogue: 0,0:22:10.49,0:22:11.90,Default,,0,0,0,,able to begin a purchase right
Dialogue: 0,0:22:11.90,0:22:12.87,Default,,0,0,0,,from the App Store itself.
Dialogue: 0,0:22:14.47,0:22:15.38,Default,,0,0,0,,We think this will be a huge
Dialogue: 0,0:22:15.38,0:22:16.60,Default,,0,0,0,,improvement to how users view
Dialogue: 0,0:22:16.60,0:22:17.44,Default,,0,0,0,,your in-app purchases.
Dialogue: 0,0:22:19.67,0:22:20.50,Default,,0,0,0,,So, how does it all work?
Dialogue: 0,0:22:21.69,0:22:22.92,Default,,0,0,0,,Well, promoting your in-app
Dialogue: 0,0:22:22.92,0:22:23.90,Default,,0,0,0,,purchases is easy.
Dialogue: 0,0:22:24.39,0:22:25.75,Default,,0,0,0,,You'll need to do to things.
Dialogue: 0,0:22:26.95,0:22:28.89,Default,,0,0,0,,First, choose up to 20 in-app
Dialogue: 0,0:22:28.89,0:22:30.66,Default,,0,0,0,,purchases to promote per app,
Dialogue: 0,0:22:31.02,0:22:32.05,Default,,0,0,0,,and set them up in iTunes
Dialogue: 0,0:22:32.05,0:22:33.06,Default,,0,0,0,,Connect with an accompanying
Dialogue: 0,0:22:33.06,0:22:33.43,Default,,0,0,0,,image.
Dialogue: 0,0:22:34.47,0:22:35.74,Default,,0,0,0,,Then, implement a single
Dialogue: 0,0:22:35.74,0:22:37.11,Default,,0,0,0,,delegate method in your app to
Dialogue: 0,0:22:37.11,0:22:38.31,Default,,0,0,0,,handle the purchase info sent to
Dialogue: 0,0:22:38.31,0:22:39.10,Default,,0,0,0,,you from the App Store.
Dialogue: 0,0:22:39.78,0:22:41.24,Default,,0,0,0,,In most cases, this
Dialogue: 0,0:22:41.24,0:22:42.36,Default,,0,0,0,,implementation can be just a
Dialogue: 0,0:22:42.36,0:22:43.40,Default,,0,0,0,,single line of code, and
Dialogue: 0,0:22:43.40,0:22:44.39,Default,,0,0,0,,StoreKit will handle the rest of
Dialogue: 0,0:22:44.39,0:22:45.32,Default,,0,0,0,,the transaction for you.
Dialogue: 0,0:22:47.14,0:22:51.91,Default,,0,0,0,,Also, if you want, you can
Dialogue: 0,0:22:52.15,0:22:53.05,Default,,0,0,0,,override the order and
Dialogue: 0,0:22:53.05,0:22:54.31,Default,,0,0,0,,visibility that they show up in,
Dialogue: 0,0:22:54.55,0:22:55.01,Default,,0,0,0,,locally.
Dialogue: 0,0:22:56.06,0:22:57.32,Default,,0,0,0,,Now, this isn't required, but it
Dialogue: 0,0:22:57.32,0:22:58.27,Default,,0,0,0,,can be useful in a variety of
Dialogue: 0,0:22:58.27,0:22:59.01,Default,,0,0,0,,situations.
Dialogue: 0,0:22:59.57,0:23:02.20,Default,,0,0,0,,So, we've already gone into
Dialogue: 0,0:23:02.20,0:23:03.46,Default,,0,0,0,,detail on how to do the iTunes
Dialogue: 0,0:23:03.46,0:23:04.71,Default,,0,0,0,,Connect setup in the What's New
Dialogue: 0,0:23:04.71,0:23:05.80,Default,,0,0,0,,in iTunes Connect session.
Dialogue: 0,0:23:06.12,0:23:06.83,Default,,0,0,0,,That was yesterday.
Dialogue: 0,0:23:07.19,0:23:07.99,Default,,0,0,0,,If you missed it, you can just
Dialogue: 0,0:23:07.99,0:23:08.66,Default,,0,0,0,,catch it online.
Dialogue: 0,0:23:09.33,0:23:11.16,Default,,0,0,0,,But for now, let's dive in and
Dialogue: 0,0:23:11.16,0:23:12.02,Default,,0,0,0,,take a look at handling your
Dialogue: 0,0:23:12.02,0:23:13.16,Default,,0,0,0,,transaction info when it's sent
Dialogue: 0,0:23:13.16,0:23:13.90,Default,,0,0,0,,to you from the App Store.
Dialogue: 0,0:23:17.32,0:23:18.70,Default,,0,0,0,,So, a user has clicked to
Dialogue: 0,0:23:18.70,0:23:19.61,Default,,0,0,0,,purchase one of your in-app
Dialogue: 0,0:23:19.61,0:23:20.59,Default,,0,0,0,,purchases in the App Store.
Dialogue: 0,0:23:22.07,0:23:23.46,Default,,0,0,0,,StoreKit will automatically open
Dialogue: 0,0:23:23.46,0:23:25.15,Default,,0,0,0,,your app and send information
Dialogue: 0,0:23:25.15,0:23:26.95,Default,,0,0,0,,about the transaction to you via
Dialogue: 0,0:23:26.95,0:23:28.29,Default,,0,0,0,,a new delegate method on the
Dialogue: 0,0:23:28.29,0:23:29.76,Default,,0,0,0,,SKPaymentTransaction observer
Dialogue: 0,0:23:29.76,0:23:30.20,Default,,0,0,0,,protocol.
Dialogue: 0,0:23:30.20,0:23:31.97,Default,,0,0,0,,Now, you already have an object
Dialogue: 0,0:23:32.03,0:23:33.11,Default,,0,0,0,,implementing this protocol,
Dialogue: 0,0:23:33.24,0:23:34.35,Default,,0,0,0,,doing things like observing a
Dialogue: 0,0:23:34.35,0:23:35.63,Default,,0,0,0,,transaction state, as Pete was
Dialogue: 0,0:23:35.63,0:23:36.34,Default,,0,0,0,,talking about earlier.
Dialogue: 0,0:23:37.16,0:23:38.51,Default,,0,0,0,,So, you can put your new code
Dialogue: 0,0:23:38.51,0:23:39.68,Default,,0,0,0,,for promoting in-app purchases
Dialogue: 0,0:23:39.83,0:23:40.64,Default,,0,0,0,,right next to your already
Dialogue: 0,0:23:40.64,0:23:41.23,Default,,0,0,0,,existing code.
Dialogue: 0,0:23:43.12,0:23:44.39,Default,,0,0,0,,It's good to know that if your
Dialogue: 0,0:23:44.39,0:23:45.69,Default,,0,0,0,,app isn't already installed, the
Dialogue: 0,0:23:46.19,0:23:48.20,Default,,0,0,0,,App Store will download or
Dialogue: 0,0:23:48.20,0:23:49.42,Default,,0,0,0,,prompt the user to buy it.
Dialogue: 0,0:23:49.88,0:23:50.94,Default,,0,0,0,,In this case, it can't be opened
Dialogue: 0,0:23:50.94,0:23:52.28,Default,,0,0,0,,automatically, so instead, the
Dialogue: 0,0:23:52.43,0:23:53.27,Default,,0,0,0,,user will receive a
Dialogue: 0,0:23:53.27,0:23:53.96,Default,,0,0,0,,notification.
Dialogue: 0,0:23:54.38,0:23:55.84,Default,,0,0,0,,And when they tap on that, then
Dialogue: 0,0:23:55.84,0:23:57.01,Default,,0,0,0,,your app will open and be sent
Dialogue: 0,0:23:57.01,0:23:57.93,Default,,0,0,0,,the transaction info.
Dialogue: 0,0:24:01.22,0:24:03.15,Default,,0,0,0,,So, what's the code look like?
Dialogue: 0,0:24:04.24,0:24:06.30,Default,,0,0,0,,Well, this is all the new code
Dialogue: 0,0:24:06.30,0:24:07.08,Default,,0,0,0,,you need to get started
Dialogue: 0,0:24:07.08,0:24:08.22,Default,,0,0,0,,promoting in-app purchases.
Dialogue: 0,0:24:09.59,0:24:10.47,Default,,0,0,0,,StoreKit will send you the
Dialogue: 0,0:24:10.47,0:24:12.37,Default,,0,0,0,,SKPayment queue, the SKPayment,
Dialogue: 0,0:24:12.46,0:24:13.30,Default,,0,0,0,,and the SKProduct.
Dialogue: 0,0:24:13.51,0:24:14.33,Default,,0,0,0,,Which is everything you need to
Dialogue: 0,0:24:14.33,0:24:15.16,Default,,0,0,0,,handle the transaction.
Dialogue: 0,0:24:15.71,0:24:16.77,Default,,0,0,0,,And the SKPayment will already
Dialogue: 0,0:24:16.77,0:24:18.06,Default,,0,0,0,,be set up with the SKProduct on
Dialogue: 0,0:24:18.06,0:24:18.13,Default,,0,0,0,,it.
Dialogue: 0,0:24:19.83,0:24:21.96,Default,,0,0,0,,When you return true, the user
Dialogue: 0,0:24:21.96,0:24:23.20,Default,,0,0,0,,will be shown that nice new
Dialogue: 0,0:24:23.20,0:24:24.19,Default,,0,0,0,,in-app purchase payment sheet,
Dialogue: 0,0:24:24.70,0:24:25.37,Default,,0,0,0,,so they can complete the
Dialogue: 0,0:24:25.37,0:24:25.97,Default,,0,0,0,,transaction.
Dialogue: 0,0:24:26.25,0:24:26.81,Default,,0,0,0,,And that's it.
Dialogue: 0,0:24:26.98,0:24:27.34,Default,,0,0,0,,We're done.
Dialogue: 0,0:24:27.94,0:24:28.43,Default,,0,0,0,,Time to ship it.
Dialogue: 0,0:24:30.61,0:24:31.06,Default,,0,0,0,,Oh, all right.
Dialogue: 0,0:24:31.06,0:24:32.27,Default,,0,0,0,,Well, what if the user is in the
Dialogue: 0,0:24:32.27,0:24:33.05,Default,,0,0,0,,middle of onboarding?
Dialogue: 0,0:24:33.05,0:24:34.45,Default,,0,0,0,,Or if they're creating an
Dialogue: 0,0:24:34.45,0:24:34.78,Default,,0,0,0,,account?
Dialogue: 0,0:24:34.78,0:24:36.25,Default,,0,0,0,,Or if they've already unlocked
Dialogue: 0,0:24:36.25,0:24:38.98,Default,,0,0,0,,the item they're trying to buy?
Dialogue: 0,0:24:39.93,0:24:41.50,Default,,0,0,0,,Well, in this case, you can hold
Dialogue: 0,0:24:41.50,0:24:42.64,Default,,0,0,0,,onto the payment and return
Dialogue: 0,0:24:42.64,0:24:43.12,Default,,0,0,0,,false.
Dialogue: 0,0:24:44.36,0:24:45.38,Default,,0,0,0,,Then, when the user is done
Dialogue: 0,0:24:45.38,0:24:46.33,Default,,0,0,0,,onboarding or whatever they
Dialogue: 0,0:24:46.33,0:24:48.37,Default,,0,0,0,,needed to do, simply add the
Dialogue: 0,0:24:48.37,0:24:49.50,Default,,0,0,0,,payment to the payment queue as
Dialogue: 0,0:24:49.50,0:24:50.51,Default,,0,0,0,,you would with a normal in-app
Dialogue: 0,0:24:50.51,0:24:50.93,Default,,0,0,0,,purchase.
Dialogue: 0,0:24:52.22,0:24:53.52,Default,,0,0,0,,It's important that you add the
Dialogue: 0,0:24:53.52,0:24:54.56,Default,,0,0,0,,SKPayment that was sent to you
Dialogue: 0,0:24:54.56,0:24:55.80,Default,,0,0,0,,in this delegate method and not
Dialogue: 0,0:24:55.80,0:24:56.79,Default,,0,0,0,,create a new one with the same
Dialogue: 0,0:24:56.79,0:24:57.21,Default,,0,0,0,,product.
Dialogue: 0,0:24:58.69,0:24:59.69,Default,,0,0,0,,If for some reason you need to
Dialogue: 0,0:24:59.69,0:25:01.04,Default,,0,0,0,,cancel the transaction entirely,
Dialogue: 0,0:25:01.77,0:25:03.06,Default,,0,0,0,,just return false and no other
Dialogue: 0,0:25:03.06,0:25:03.88,Default,,0,0,0,,action is required.
Dialogue: 0,0:25:04.60,0:25:07.66,Default,,0,0,0,,If you're going to cancel or
Dialogue: 0,0:25:07.66,0:25:09.23,Default,,0,0,0,,defer a payment, you should
Dialogue: 0,0:25:09.23,0:25:10.31,Default,,0,0,0,,definitely consider letting the
Dialogue: 0,0:25:10.31,0:25:11.22,Default,,0,0,0,,user know, in some way.
Dialogue: 0,0:25:12.09,0:25:13.17,Default,,0,0,0,,What you don't want, is for the
Dialogue: 0,0:25:13.17,0:25:14.63,Default,,0,0,0,,user to tap on the in-app
Dialogue: 0,0:25:14.66,0:25:16.27,Default,,0,0,0,,purchase in the App Store, be
Dialogue: 0,0:25:16.27,0:25:17.31,Default,,0,0,0,,brought to your app, and then,
Dialogue: 0,0:25:17.31,0:25:17.95,Default,,0,0,0,,nothing happens.
Dialogue: 0,0:25:18.76,0:25:19.60,Default,,0,0,0,,They're going to think there's a
Dialogue: 0,0:25:19.60,0:25:22.98,Default,,0,0,0,,bug, and that's not good.
Dialogue: 0,0:25:24.03,0:25:25.32,Default,,0,0,0,,Okay. So, now you've got this
Dialogue: 0,0:25:25.32,0:25:25.76,Default,,0,0,0,,all set up.
Dialogue: 0,0:25:25.89,0:25:26.88,Default,,0,0,0,,You want to test it.
Dialogue: 0,0:25:26.88,0:25:29.02,Default,,0,0,0,,Right. Well, your in-app
Dialogue: 0,0:25:29.02,0:25:30.45,Default,,0,0,0,,purchases won't actually show up
Dialogue: 0,0:25:30.45,0:25:31.76,Default,,0,0,0,,in the App Store, until you've
Dialogue: 0,0:25:31.76,0:25:34.08,Default,,0,0,0,,submitted a binary that has this
Dialogue: 0,0:25:34.08,0:25:34.88,Default,,0,0,0,,delegate method.
Dialogue: 0,0:25:34.93,0:25:36.04,Default,,0,0,0,,So, we know you can handle the
Dialogue: 0,0:25:36.24,0:25:36.96,Default,,0,0,0,,transactions.
Dialogue: 0,0:25:38.59,0:25:39.95,Default,,0,0,0,,So, instead, we've created a
Dialogue: 0,0:25:39.95,0:25:41.21,Default,,0,0,0,,system URL for you to use.
Dialogue: 0,0:25:42.47,0:25:44.11,Default,,0,0,0,,This URL has the ITMS services
Dialogue: 0,0:25:44.14,0:25:45.73,Default,,0,0,0,,protocol and three parameters.
Dialogue: 0,0:25:46.47,0:25:47.79,Default,,0,0,0,,The first parameter is action,
Dialogue: 0,0:25:47.79,0:25:48.81,Default,,0,0,0,,and that's always purchase
Dialogue: 0,0:25:48.81,0:25:49.12,Default,,0,0,0,,intent.
Dialogue: 0,0:25:50.32,0:25:51.53,Default,,0,0,0,,The next parameter is bundleID,
Dialogue: 0,0:25:51.53,0:25:52.65,Default,,0,0,0,,which is of course, the bundle
Dialogue: 0,0:25:52.65,0:25:53.25,Default,,0,0,0,,ID for your app.
Dialogue: 0,0:25:53.25,0:25:55.10,Default,,0,0,0,,And the last one is
Dialogue: 0,0:25:55.15,0:25:56.16,Default,,0,0,0,,productIdentifier, which you
Dialogue: 0,0:25:56.16,0:25:57.03,Default,,0,0,0,,fill in with the product
Dialogue: 0,0:25:57.03,0:25:58.32,Default,,0,0,0,,identifier of the in-app
Dialogue: 0,0:25:58.32,0:25:59.24,Default,,0,0,0,,purchase you want to test.
Dialogue: 0,0:26:01.39,0:26:02.48,Default,,0,0,0,,And once you've constructed this
Dialogue: 0,0:26:02.48,0:26:04.49,Default,,0,0,0,,URL like so, you can simple send
Dialogue: 0,0:26:04.49,0:26:06.55,Default,,0,0,0,,it to yourself in an iMessage or
Dialogue: 0,0:26:06.55,0:26:08.20,Default,,0,0,0,,an email, and tap it on your
Dialogue: 0,0:26:08.20,0:26:08.67,Default,,0,0,0,,device.
Dialogue: 0,0:26:09.86,0:26:10.93,Default,,0,0,0,,You'll now it's working, because
Dialogue: 0,0:26:10.93,0:26:11.69,Default,,0,0,0,,your app will be opened
Dialogue: 0,0:26:11.69,0:26:12.25,Default,,0,0,0,,automatically.
Dialogue: 0,0:26:13.10,0:26:14.24,Default,,0,0,0,,And you can test its behavior
Dialogue: 0,0:26:14.24,0:26:14.56,Default,,0,0,0,,from there.
Dialogue: 0,0:26:17.93,0:26:19.27,Default,,0,0,0,,All right.
Dialogue: 0,0:26:19.27,0:26:20.75,Default,,0,0,0,,Now, we've gone over how to
Dialogue: 0,0:26:20.75,0:26:21.93,Default,,0,0,0,,handle the payment info when
Dialogue: 0,0:26:21.93,0:26:22.60,Default,,0,0,0,,it's sent to you from the App
Dialogue: 0,0:26:22.60,0:26:22.86,Default,,0,0,0,,Store.
Dialogue: 0,0:26:23.86,0:26:25.13,Default,,0,0,0,,Let's take a look at the more
Dialogue: 0,0:26:25.13,0:26:25.76,Default,,0,0,0,,advanced setup.
Dialogue: 0,0:26:28.39,0:26:29.67,Default,,0,0,0,,When you set up your promoted
Dialogue: 0,0:26:29.67,0:26:30.66,Default,,0,0,0,,in-app purchases in iTunes
Dialogue: 0,0:26:30.69,0:26:32.24,Default,,0,0,0,,Connect, you'll be able to
Dialogue: 0,0:26:32.24,0:26:34.24,Default,,0,0,0,,choose a default order that they
Dialogue: 0,0:26:34.24,0:26:35.44,Default,,0,0,0,,appear in on your app page.
Dialogue: 0,0:26:36.13,0:26:37.22,Default,,0,0,0,,You'll also be able to choose to
Dialogue: 0,0:26:37.22,0:26:38.48,Default,,0,0,0,,set some to hidden, so that they
Dialogue: 0,0:26:38.48,0:26:39.11,Default,,0,0,0,,don't appear, at all.
Dialogue: 0,0:26:40.39,0:26:41.51,Default,,0,0,0,,Then, when your app is running
Dialogue: 0,0:26:41.51,0:26:43.70,Default,,0,0,0,,on the device, you can set
Dialogue: 0,0:26:43.70,0:26:45.32,Default,,0,0,0,,overrides for these, locally, to
Dialogue: 0,0:26:45.32,0:26:46.55,Default,,0,0,0,,change the order of visibility.
Dialogue: 0,0:26:47.89,0:26:49.34,Default,,0,0,0,,So, for example, if you're
Dialogue: 0,0:26:49.34,0:26:51.27,Default,,0,0,0,,making a racing game you may
Dialogue: 0,0:26:51.27,0:26:52.49,Default,,0,0,0,,want to hide in-app purchases
Dialogue: 0,0:26:52.49,0:26:53.78,Default,,0,0,0,,for a car until the user has
Dialogue: 0,0:26:53.78,0:26:54.82,Default,,0,0,0,,actually unlocked that car.
Dialogue: 0,0:26:55.79,0:26:59.34,Default,,0,0,0,,Then, when they do, you can move
Dialogue: 0,0:26:59.34,0:27:00.72,Default,,0,0,0,,that in-app purchase to the top
Dialogue: 0,0:27:00.72,0:27:02.02,Default,,0,0,0,,of the list and unhide it.
Dialogue: 0,0:27:02.77,0:27:03.54,Default,,0,0,0,,So, they've just unlocked the
Dialogue: 0,0:27:03.54,0:27:04.96,Default,,0,0,0,,car, and now they'll see the
Dialogue: 0,0:27:04.96,0:27:06.22,Default,,0,0,0,,most relevant in-app purchase
Dialogue: 0,0:27:06.22,0:27:07.26,Default,,0,0,0,,right at the front of the list.
Dialogue: 0,0:27:08.91,0:27:09.94,Default,,0,0,0,,it's important to know that
Dialogue: 0,0:27:09.94,0:27:11.33,Default,,0,0,0,,these are not synched across the
Dialogue: 0,0:27:11.33,0:27:11.70,Default,,0,0,0,,bases.
Dialogue: 0,0:27:11.73,0:27:13.93,Default,,0,0,0,,They're stored locally on each
Dialogue: 0,0:27:14.60,0:27:14.82,Default,,0,0,0,,device.
Dialogue: 0,0:27:15.84,0:27:17.00,Default,,0,0,0,,So, if you need to replicate the
Dialogue: 0,0:27:17.00,0:27:18.43,Default,,0,0,0,,same behavior, you should make
Dialogue: 0,0:27:18.43,0:27:20.13,Default,,0,0,0,,sure that your app locally can
Dialogue: 0,0:27:20.31,0:27:21.24,Default,,0,0,0,,reproduce the results.
Dialogue: 0,0:27:21.27,0:27:24.73,Default,,0,0,0,,All right.
Dialogue: 0,0:27:24.73,0:27:25.87,Default,,0,0,0,,Let's take a look at some
Dialogue: 0,0:27:25.87,0:27:26.92,Default,,0,0,0,,specific examples.
Dialogue: 0,0:27:27.84,0:27:30.71,Default,,0,0,0,,Here, we have an app called
Dialogue: 0,0:27:30.71,0:27:31.62,Default,,0,0,0,,Forest Explorer.
Dialogue: 0,0:27:31.79,0:27:33.55,Default,,0,0,0,,This is an app we made up that
Dialogue: 0,0:27:33.55,0:27:35.42,Default,,0,0,0,,helps people discover and travel
Dialogue: 0,0:27:35.42,0:27:37.75,Default,,0,0,0,,to destinations.
Dialogue: 0,0:27:37.75,0:27:41.21,Default,,0,0,0,,This app doesn't exist in the
Dialogue: 0,0:27:41.21,0:27:41.61,Default,,0,0,0,,App Store.
Dialogue: 0,0:27:41.78,0:27:42.79,Default,,0,0,0,,It's only this presentation.
Dialogue: 0,0:27:43.88,0:27:45.11,Default,,0,0,0,,So, here we're promoting three
Dialogue: 0,0:27:45.11,0:27:45.79,Default,,0,0,0,,app purchases.
Dialogue: 0,0:27:45.79,0:27:46.95,Default,,0,0,0,,We have the Pro Subscription,
Dialogue: 0,0:27:47.28,0:27:48.25,Default,,0,0,0,,which upgrades the level of
Dialogue: 0,0:27:48.25,0:27:49.71,Default,,0,0,0,,detail the user sees and maps
Dialogue: 0,0:27:49.71,0:27:50.26,Default,,0,0,0,,and directions.
Dialogue: 0,0:27:51.15,0:27:52.86,Default,,0,0,0,,We have the Fishing Hotspots and
Dialogue: 0,0:27:52.86,0:27:53.88,Default,,0,0,0,,the Hidden Beaches packs.
Dialogue: 0,0:27:54.22,0:27:55.22,Default,,0,0,0,,Which simply unlock more
Dialogue: 0,0:27:55.22,0:27:56.60,Default,,0,0,0,,destinations that follow those
Dialogue: 0,0:27:56.60,0:27:57.01,Default,,0,0,0,,themes.
Dialogue: 0,0:27:58.76,0:28:00.76,Default,,0,0,0,,So, one thing you may want to do
Dialogue: 0,0:28:00.76,0:28:02.58,Default,,0,0,0,,is, say a user has purchased the
Dialogue: 0,0:28:02.62,0:28:03.58,Default,,0,0,0,,Pro Subscription in-app
Dialogue: 0,0:28:03.64,0:28:06.17,Default,,0,0,0,,purchase, is hide this from your
Dialogue: 0,0:28:06.17,0:28:06.70,Default,,0,0,0,,app page.
Dialogue: 0,0:28:06.94,0:28:08.38,Default,,0,0,0,,So, this is not something that
Dialogue: 0,0:28:08.38,0:28:09.36,Default,,0,0,0,,StoreKit or the App Store does,
Dialogue: 0,0:28:09.36,0:28:09.99,Default,,0,0,0,,automatically.
Dialogue: 0,0:28:10.74,0:28:12.32,Default,,0,0,0,,If they buy this and then, go to
Dialogue: 0,0:28:12.32,0:28:13.56,Default,,0,0,0,,the App Store, they'll still see
Dialogue: 0,0:28:13.56,0:28:14.37,Default,,0,0,0,,it there on your list.
Dialogue: 0,0:28:15.25,0:28:16.28,Default,,0,0,0,,Which might not make sense,
Dialogue: 0,0:28:16.32,0:28:17.05,Default,,0,0,0,,because they can't buy it,
Dialogue: 0,0:28:17.05,0:28:17.37,Default,,0,0,0,,again.
Dialogue: 0,0:28:18.60,0:28:19.81,Default,,0,0,0,,So, instead, what you can do is
Dialogue: 0,0:28:19.88,0:28:21.12,Default,,0,0,0,,use the local visibility
Dialogue: 0,0:28:21.12,0:28:23.72,Default,,0,0,0,,override to hide the app
Dialogue: 0,0:28:23.72,0:28:24.14,Default,,0,0,0,,purchase.
Dialogue: 0,0:28:24.29,0:28:25.45,Default,,0,0,0,,And then, they'll only see items
Dialogue: 0,0:28:25.45,0:28:26.34,Default,,0,0,0,,that are relevant to them on
Dialogue: 0,0:28:26.34,0:28:26.97,Default,,0,0,0,,your app page.
Dialogue: 0,0:28:29.88,0:28:30.73,Default,,0,0,0,,So, what's the code look like
Dialogue: 0,0:28:30.73,0:28:30.98,Default,,0,0,0,,for this?
Dialogue: 0,0:28:34.76,0:28:35.26,Default,,0,0,0,,Here it is.
Dialogue: 0,0:28:35.41,0:28:37.26,Default,,0,0,0,,First, you want to start by
Dialogue: 0,0:28:37.34,0:28:38.84,Default,,0,0,0,,fetching the SKProduct so you
Dialogue: 0,0:28:38.84,0:28:39.61,Default,,0,0,0,,have the most up to date
Dialogue: 0,0:28:39.61,0:28:40.63,Default,,0,0,0,,information from the server.
Dialogue: 0,0:28:41.24,0:28:42.41,Default,,0,0,0,,Here, we'll fetch the info for
Dialogue: 0,0:28:42.41,0:28:43.41,Default,,0,0,0,,the Pro Subscription in-app
Dialogue: 0,0:28:43.41,0:28:43.83,Default,,0,0,0,,purchase.
Dialogue: 0,0:28:45.63,0:28:47.77,Default,,0,0,0,,Then, we have a new class for
Dialogue: 0,0:28:47.77,0:28:48.76,Default,,0,0,0,,dealing with these local
Dialogue: 0,0:28:48.76,0:28:49.75,Default,,0,0,0,,overrides called
Dialogue: 0,0:28:49.92,0:28:51.31,Default,,0,0,0,,SKProductStorePromotion
Dialogue: 0,0:28:51.31,0:28:51.81,Default,,0,0,0,,Controller.
Dialogue: 0,0:28:52.91,0:28:53.88,Default,,0,0,0,,You'll want to get the default
Dialogue: 0,0:28:53.88,0:28:54.34,Default,,0,0,0,,controller.
Dialogue: 0,0:28:56.06,0:28:57.47,Default,,0,0,0,,And then, passing your SKProduct
Dialogue: 0,0:28:57.59,0:28:58.33,Default,,0,0,0,,to the update
Dialogue: 0,0:28:58.33,0:28:59.58,Default,,0,0,0,,StorePromotionVisibility
Dialogue: 0,0:28:59.64,0:29:00.38,Default,,0,0,0,,forProduct method.
Dialogue: 0,0:29:00.91,0:29:02.00,Default,,0,0,0,,Along with the new visibility
Dialogue: 0,0:29:02.00,0:29:02.70,Default,,0,0,0,,you want to set it to.
Dialogue: 0,0:29:03.51,0:29:04.61,Default,,0,0,0,,So, here we want to hide the Pro
Dialogue: 0,0:29:04.61,0:29:05.71,Default,,0,0,0,,Subscription, since the user
Dialogue: 0,0:29:05.71,0:29:06.42,Default,,0,0,0,,just purchased it.
Dialogue: 0,0:29:08.47,0:29:09.35,Default,,0,0,0,,That's all there is to it.
Dialogue: 0,0:29:09.42,0:29:09.86,Default,,0,0,0,,Pretty simple.
Dialogue: 0,0:29:11.46,0:29:12.37,Default,,0,0,0,,Now, if you want to check to see
Dialogue: 0,0:29:12.37,0:29:13.46,Default,,0,0,0,,what overrides you've already
Dialogue: 0,0:29:15.76,0:29:17.56,Default,,0,0,0,,set, start again by fetching the
Dialogue: 0,0:29:17.65,0:29:18.18,Default,,0,0,0,,SKProduct.
Dialogue: 0,0:29:18.53,0:29:19.42,Default,,0,0,0,,Here, we'll look at the Hidden
Dialogue: 0,0:29:19.42,0:29:19.88,Default,,0,0,0,,Beaches pack.
Dialogue: 0,0:29:21.43,0:29:22.61,Default,,0,0,0,,So, pass this into the fetch
Dialogue: 0,0:29:22.61,0:29:24.01,Default,,0,0,0,,StorePromotionVisibilityFor
Dialogue: 0,0:29:24.01,0:29:24.66,Default,,0,0,0,,Product method.
Dialogue: 0,0:29:24.96,0:29:27.26,Default,,0,0,0,,And what we can see here, is the
Dialogue: 0,0:29:27.26,0:29:28.73,Default,,0,0,0,,visibility is done, default.
Dialogue: 0,0:29:29.12,0:29:30.08,Default,,0,0,0,,Now, this is because we haven't
Dialogue: 0,0:29:30.08,0:29:31.05,Default,,0,0,0,,set any overrides, yet.
Dialogue: 0,0:29:31.05,0:29:32.73,Default,,0,0,0,,And it means that it will be
Dialogue: 0,0:29:32.73,0:29:34.06,Default,,0,0,0,,hidden or shown based on what
Dialogue: 0,0:29:34.06,0:29:35.19,Default,,0,0,0,,you've set as a default in
Dialogue: 0,0:29:35.22,0:29:35.86,Default,,0,0,0,,iTunes Connect.
Dialogue: 0,0:29:39.77,0:29:41.02,Default,,0,0,0,,Okay. So, we've talked about
Dialogue: 0,0:29:41.12,0:29:42.13,Default,,0,0,0,,overriding the visibility.
Dialogue: 0,0:29:42.61,0:29:43.78,Default,,0,0,0,,How about changing the order
Dialogue: 0,0:29:43.78,0:29:44.67,Default,,0,0,0,,that your in-app purchases
Dialogue: 0,0:29:44.67,0:29:45.71,Default,,0,0,0,,appear in on your app page?
Dialogue: 0,0:29:47.81,0:29:48.66,Default,,0,0,0,,Let's go back to Forest
Dialogue: 0,0:29:48.66,0:29:49.16,Default,,0,0,0,,Explorer.
Dialogue: 0,0:29:51.22,0:29:52.83,Default,,0,0,0,,Now, maybe you've been looking
Dialogue: 0,0:29:52.83,0:29:54.14,Default,,0,0,0,,at your metrics, and you notice
Dialogue: 0,0:29:54.18,0:29:55.64,Default,,0,0,0,,that this user is going to a lot
Dialogue: 0,0:29:55.64,0:29:56.15,Default,,0,0,0,,of beaches.
Dialogue: 0,0:29:57.43,0:29:58.62,Default,,0,0,0,,Could make sense to move the
Dialogue: 0,0:29:58.62,0:29:59.92,Default,,0,0,0,,Hidden Beaches back to the front
Dialogue: 0,0:29:59.92,0:30:01.78,Default,,0,0,0,,of the list so that they're more
Dialogue: 0,0:30:01.78,0:30:02.45,Default,,0,0,0,,likely to see it.
Dialogue: 0,0:30:03.00,0:30:04.06,Default,,0,0,0,,And since it's something that's
Dialogue: 0,0:30:04.06,0:30:05.22,Default,,0,0,0,,interesting to them, they might
Dialogue: 0,0:30:05.22,0:30:05.98,Default,,0,0,0,,be more likely to buy it.
Dialogue: 0,0:30:10.43,0:30:11.34,Default,,0,0,0,,Now, the code for this looks
Dialogue: 0,0:30:11.34,0:30:12.94,Default,,0,0,0,,very similar to updating
Dialogue: 0,0:30:13.17,0:30:14.04,Default,,0,0,0,,visibility overrides.
Dialogue: 0,0:30:15.00,0:30:16.17,Default,,0,0,0,,You'll want to fetch the
Dialogue: 0,0:30:16.17,0:30:18.00,Default,,0,0,0,,SKProducts for every in-app
Dialogue: 0,0:30:18.00,0:30:18.97,Default,,0,0,0,,purchase you want to override
Dialogue: 0,0:30:18.97,0:30:20.14,Default,,0,0,0,,the order of, so here we'll do
Dialogue: 0,0:30:20.14,0:30:20.56,Default,,0,0,0,,all three.
Dialogue: 0,0:30:20.56,0:30:21.68,Default,,0,0,0,,We'll do the Pro Subscription,
Dialogue: 0,0:30:21.86,0:30:23.33,Default,,0,0,0,,Fishing Hotspots, and the Hidden
Dialogue: 0,0:30:23.33,0:30:23.71,Default,,0,0,0,,Beaches.
Dialogue: 0,0:30:24.87,0:30:26.98,Default,,0,0,0,,Then, create an array that has
Dialogue: 0,0:30:26.98,0:30:28.31,Default,,0,0,0,,these in-app purchases in the
Dialogue: 0,0:30:28.31,0:30:29.41,Default,,0,0,0,,order that you want to override
Dialogue: 0,0:30:29.41,0:30:30.02,Default,,0,0,0,,them to be.
Dialogue: 0,0:30:30.63,0:30:31.62,Default,,0,0,0,,So, move the Hidden Beaches to
Dialogue: 0,0:30:31.62,0:30:31.98,Default,,0,0,0,,the front.
Dialogue: 0,0:30:33.80,0:30:35.57,Default,,0,0,0,,Finally, pass this array into
Dialogue: 0,0:30:35.57,0:30:36.96,Default,,0,0,0,,the updateStorePromotionOrder
Dialogue: 0,0:30:36.96,0:30:37.26,Default,,0,0,0,,method.
Dialogue: 0,0:30:37.89,0:30:39.38,Default,,0,0,0,,And there you go.
Dialogue: 0,0:30:39.38,0:30:39.99,Default,,0,0,0,,It's been updated.
Dialogue: 0,0:30:39.99,0:30:43.74,Default,,0,0,0,,Now, if we want to view the
Dialogue: 0,0:30:43.74,0:30:44.64,Default,,0,0,0,,overrides we may have set,
Dialogue: 0,0:30:44.64,0:30:44.99,Default,,0,0,0,,already.
Dialogue: 0,0:30:45.94,0:30:47.33,Default,,0,0,0,,Once again, it's very similar.
Dialogue: 0,0:30:48.45,0:30:49.12,Default,,0,0,0,,Grab the default
Dialogue: 0,0:30:49.12,0:30:50.74,Default,,0,0,0,,storePromotionController and
Dialogue: 0,0:30:50.74,0:30:51.26,Default,,0,0,0,,simply use the
Dialogue: 0,0:30:51.33,0:30:52.33,Default,,0,0,0,,fetchStorePromotionalOrder
Dialogue: 0,0:30:52.33,0:30:52.70,Default,,0,0,0,,method.
Dialogue: 0,0:30:54.40,0:30:56.70,Default,,0,0,0,,Here, we can see that we get an
Dialogue: 0,0:30:56.70,0:30:57.86,Default,,0,0,0,,array back and Hidden Beaches is
Dialogue: 0,0:30:57.86,0:30:59.10,Default,,0,0,0,,in front, since we've just set
Dialogue: 0,0:30:59.10,0:30:59.71,Default,,0,0,0,,that override.
Dialogue: 0,0:31:01.79,0:31:03.93,Default,,0,0,0,,Now, you don't need to use every
Dialogue: 0,0:31:03.93,0:31:04.98,Default,,0,0,0,,in-app purchase in your array
Dialogue: 0,0:31:04.98,0:31:05.89,Default,,0,0,0,,when you set the overrides.
Dialogue: 0,0:31:06.01,0:31:07.44,Default,,0,0,0,,You can actually use any subset
Dialogue: 0,0:31:07.44,0:31:08.27,Default,,0,0,0,,of them that you want.
Dialogue: 0,0:31:09.00,0:31:10.22,Default,,0,0,0,,If you do, what'll happen is
Dialogue: 0,0:31:10.30,0:31:11.83,Default,,0,0,0,,that subset will be shown at the
Dialogue: 0,0:31:11.83,0:31:14.13,Default,,0,0,0,,front of the list in the order
Dialogue: 0,0:31:14.13,0:31:15.23,Default,,0,0,0,,you've specified the override
Dialogue: 0,0:31:15.23,0:31:15.54,Default,,0,0,0,,for.
Dialogue: 0,0:31:16.18,0:31:16.93,Default,,0,0,0,,The rest of your in-app
Dialogue: 0,0:31:16.93,0:31:18.75,Default,,0,0,0,,purchases will be shown after
Dialogue: 0,0:31:18.75,0:31:20.06,Default,,0,0,0,,those, in the same relative
Dialogue: 0,0:31:20.06,0:31:21.10,Default,,0,0,0,,order as you've set in iTunes
Dialogue: 0,0:31:21.10,0:31:21.33,Default,,0,0,0,,Connect.
Dialogue: 0,0:31:23.12,0:31:24.48,Default,,0,0,0,,Also, you can receive an empty
Dialogue: 0,0:31:24.48,0:31:25.27,Default,,0,0,0,,array from this method.
Dialogue: 0,0:31:25.71,0:31:26.69,Default,,0,0,0,,This would mean that you haven't
Dialogue: 0,0:31:26.69,0:31:28.14,Default,,0,0,0,,set any order overrides, at all.
Dialogue: 0,0:31:29.02,0:31:30.37,Default,,0,0,0,,And similarly, you could pass in
Dialogue: 0,0:31:30.37,0:31:32.24,Default,,0,0,0,,an empty array to the update
Dialogue: 0,0:31:32.24,0:31:32.60,Default,,0,0,0,,method.
Dialogue: 0,0:31:32.81,0:31:34.07,Default,,0,0,0,,And that would be the same as
Dialogue: 0,0:31:34.56,0:31:35.79,Default,,0,0,0,,cancelling all the overrides.
Dialogue: 0,0:31:36.35,0:31:38.12,Default,,0,0,0,,You can think of this as using
Dialogue: 0,0:31:38.12,0:31:39.31,Default,,0,0,0,,the empty set of overrides.
Dialogue: 0,0:31:40.03,0:31:43.72,Default,,0,0,0,,So, this is all the code there
Dialogue: 0,0:31:43.72,0:31:44.57,Default,,0,0,0,,is for promoting in-app
Dialogue: 0,0:31:44.57,0:31:45.10,Default,,0,0,0,,purchases.
Dialogue: 0,0:31:46.15,0:31:48.26,Default,,0,0,0,,The new delegate method and the
Dialogue: 0,0:31:48.26,0:31:49.54,Default,,0,0,0,,test URL are available, right
Dialogue: 0,0:31:49.54,0:31:50.61,Default,,0,0,0,,now, in the Seed we sent out,
Dialogue: 0,0:31:50.61,0:31:51.27,Default,,0,0,0,,earlier this week.
Dialogue: 0,0:31:52.13,0:31:53.89,Default,,0,0,0,,And this order and visibility
Dialogue: 0,0:31:53.89,0:31:55.30,Default,,0,0,0,,override will be available in a
Dialogue: 0,0:31:55.30,0:31:56.65,Default,,0,0,0,,later Seed.
Dialogue: 0,0:31:57.64,0:32:00.12,Default,,0,0,0,,To recap on promoting in-app
Dialogue: 0,0:32:00.12,0:32:02.79,Default,,0,0,0,,purchases, it's a great way to
Dialogue: 0,0:32:02.79,0:32:03.84,Default,,0,0,0,,make them more discoverable, by
Dialogue: 0,0:32:03.84,0:32:04.86,Default,,0,0,0,,promoting them in the App Store.
Dialogue: 0,0:32:06.28,0:32:07.43,Default,,0,0,0,,You'll choose up to 20 to
Dialogue: 0,0:32:07.43,0:32:09.03,Default,,0,0,0,,promote per app and set them up
Dialogue: 0,0:32:09.03,0:32:09.80,Default,,0,0,0,,in iTunes Connect.
Dialogue: 0,0:32:11.26,0:32:12.87,Default,,0,0,0,,Then, a user can tap in the App
Dialogue: 0,0:32:12.87,0:32:14.45,Default,,0,0,0,,Store to begin the purchase.
Dialogue: 0,0:32:16.63,0:32:18.01,Default,,0,0,0,,The transaction info will be
Dialogue: 0,0:32:18.01,0:32:19.23,Default,,0,0,0,,sent to your app as it's opened
Dialogue: 0,0:32:19.23,0:32:21.04,Default,,0,0,0,,automatically via a new delegate
Dialogue: 0,0:32:21.04,0:32:22.34,Default,,0,0,0,,method on the SKPayment
Dialogue: 0,0:32:22.34,0:32:23.66,Default,,0,0,0,,transaction observer protocol.
Dialogue: 0,0:32:25.65,0:32:28.45,Default,,0,0,0,,Finally, if you want, you can
Dialogue: 0,0:32:28.45,0:32:29.37,Default,,0,0,0,,override the order and
Dialogue: 0,0:32:29.37,0:32:30.45,Default,,0,0,0,,visibility of they appear on
Dialogue: 0,0:32:30.45,0:32:31.74,Default,,0,0,0,,your app page, locally at
Dialogue: 0,0:32:31.74,0:32:32.12,Default,,0,0,0,,runtime.
Dialogue: 0,0:32:33.44,0:32:34.37,Default,,0,0,0,,Now, I'm really excited to see
Dialogue: 0,0:32:34.37,0:32:35.47,Default,,0,0,0,,how you all will use promoting
Dialogue: 0,0:32:35.53,0:32:36.55,Default,,0,0,0,,app purchases in your apps.
Dialogue: 0,0:32:36.97,0:32:38.43,Default,,0,0,0,,But for now, I hand the stage
Dialogue: 0,0:32:38.43,0:32:39.52,Default,,0,0,0,,back over to Pete, so he can
Dialogue: 0,0:32:39.52,0:32:40.39,Default,,0,0,0,,tell you what's new in working
Dialogue: 0,0:32:40.39,0:32:41.25,Default,,0,0,0,,with customer reviews.
Dialogue: 0,0:32:42.52,0:32:47.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:32:48.05,0:32:48.60,Default,,0,0,0,,>> Thanks, Ross.
Dialogue: 0,0:32:49.72,0:32:51.17,Default,,0,0,0,,I can't wait to try out Forest
Dialogue: 0,0:32:51.17,0:32:51.60,Default,,0,0,0,,Explorer.
Dialogue: 0,0:32:51.79,0:32:53.10,Default,,0,0,0,,Looks like a great app.
Dialogue: 0,0:32:53.67,0:32:55.05,Default,,0,0,0,,Well, now we've learned a bit
Dialogue: 0,0:32:55.05,0:32:55.93,Default,,0,0,0,,about implementing in-app
Dialogue: 0,0:32:55.93,0:32:57.13,Default,,0,0,0,,purchases and how to promote
Dialogue: 0,0:32:57.13,0:32:57.97,Default,,0,0,0,,them in the App Store.
Dialogue: 0,0:32:58.29,0:32:59.33,Default,,0,0,0,,Let's look at some ways you can
Dialogue: 0,0:32:59.33,0:33:00.55,Default,,0,0,0,,now interact with your
Dialogue: 0,0:33:00.55,0:33:01.19,Default,,0,0,0,,customers.
Dialogue: 0,0:33:01.93,0:33:03.87,Default,,0,0,0,,So, in iOS 11 we've got this
Dialogue: 0,0:33:03.87,0:33:05.03,Default,,0,0,0,,great new looking App Store
Dialogue: 0,0:33:05.03,0:33:05.40,Default,,0,0,0,,design.
Dialogue: 0,0:33:05.85,0:33:07.23,Default,,0,0,0,,And this is a product page.
Dialogue: 0,0:33:07.23,0:33:08.45,Default,,0,0,0,,If you scroll down the product
Dialogue: 0,0:33:08.45,0:33:10.45,Default,,0,0,0,,page, this is the new ratings
Dialogue: 0,0:33:10.45,0:33:11.95,Default,,0,0,0,,and reviews section, with a new
Dialogue: 0,0:33:11.95,0:33:13.21,Default,,0,0,0,,unified rating there.
Dialogue: 0,0:33:13.34,0:33:15.00,Default,,0,0,0,,And the user can just swipe
Dialogue: 0,0:33:15.08,0:33:16.85,Default,,0,0,0,,through different reviews in
Dialogue: 0,0:33:16.85,0:33:18.46,Default,,0,0,0,,order to read information about
Dialogue: 0,0:33:18.91,0:33:19.96,Default,,0,0,0,,user's experience with your
Dialogue: 0,0:33:19.96,0:33:20.32,Default,,0,0,0,,apps.
Dialogue: 0,0:33:20.67,0:33:21.96,Default,,0,0,0,,So, what's new in this regard?
Dialogue: 0,0:33:21.96,0:33:23.48,Default,,0,0,0,,Well, we've got a few new
Dialogue: 0,0:33:23.48,0:33:23.98,Default,,0,0,0,,features, here.
Dialogue: 0,0:33:23.98,0:33:25.12,Default,,0,0,0,,The first one, you can now
Dialogue: 0,0:33:25.12,0:33:26.59,Default,,0,0,0,,choose when you want your rating
Dialogue: 0,0:33:26.59,0:33:27.24,Default,,0,0,0,,to reset.
Dialogue: 0,0:33:27.54,0:33:28.23,Default,,0,0,0,,When you release your
Dialogue: 0,0:33:28.23,0:33:29.68,Default,,0,0,0,,application, you can decide if
Dialogue: 0,0:33:29.68,0:33:30.41,Default,,0,0,0,,this is something you want to
Dialogue: 0,0:33:30.41,0:33:30.93,Default,,0,0,0,,happen or not.
Dialogue: 0,0:33:30.93,0:33:32.64,Default,,0,0,0,,Previously, this would reset
Dialogue: 0,0:33:32.64,0:33:34.00,Default,,0,0,0,,your rating every single time.
Dialogue: 0,0:33:34.00,0:33:35.39,Default,,0,0,0,,So, now it's kind of up to you.
Dialogue: 0,0:33:35.53,0:33:35.64,Default,,0,0,0,,Yeah.
Dialogue: 0,0:33:36.52,0:33:40.05,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:33:40.55,0:33:41.93,Default,,0,0,0,,We've also, recently added the
Dialogue: 0,0:33:41.93,0:33:43.09,Default,,0,0,0,,ability for you to respond to
Dialogue: 0,0:33:43.09,0:33:44.22,Default,,0,0,0,,reviews on the App Store.
Dialogue: 0,0:33:44.22,0:33:45.47,Default,,0,0,0,,So, you can have that dialog
Dialogue: 0,0:33:45.61,0:33:46.56,Default,,0,0,0,,with consumers, now.
Dialogue: 0,0:33:47.13,0:33:48.67,Default,,0,0,0,,There's also some new ways for
Dialogue: 0,0:33:48.67,0:33:49.62,Default,,0,0,0,,you to ask for ratings and
Dialogue: 0,0:33:49.62,0:33:50.36,Default,,0,0,0,,reviews by the
Dialogue: 0,0:33:50.43,0:33:51.91,Default,,0,0,0,,SKStoreReviewController.
Dialogue: 0,0:33:52.77,0:33:54.55,Default,,0,0,0,,And finally, we added a new deep
Dialogue: 0,0:33:54.55,0:33:56.89,Default,,0,0,0,,link in iOS 10.3, that can link
Dialogue: 0,0:33:56.89,0:33:58.17,Default,,0,0,0,,directly to be able to write a
Dialogue: 0,0:33:58.17,0:33:59.14,Default,,0,0,0,,review in the App Store.
Dialogue: 0,0:34:00.09,0:34:02.22,Default,,0,0,0,,We also have added Helpfulness
Dialogue: 0,0:34:02.22,0:34:03.60,Default,,0,0,0,,and Report a Concern to iOS.
Dialogue: 0,0:34:03.70,0:34:05.56,Default,,0,0,0,,So, what does that look like?
Dialogue: 0,0:34:06.01,0:34:08.18,Default,,0,0,0,,Well, a user can now 3D Touch on
Dialogue: 0,0:34:08.23,0:34:09.38,Default,,0,0,0,,a review itself, and they get
Dialogue: 0,0:34:09.41,0:34:10.91,Default,,0,0,0,,presented with this Helpful or
Dialogue: 0,0:34:10.91,0:34:12.12,Default,,0,0,0,,Not Helpful menu.
Dialogue: 0,0:34:12.12,0:34:13.45,Default,,0,0,0,,They can mark them as helpful or
Dialogue: 0,0:34:13.45,0:34:13.98,Default,,0,0,0,,not helpful.
Dialogue: 0,0:34:13.98,0:34:15.43,Default,,0,0,0,,They can even report a concern
Dialogue: 0,0:34:15.43,0:34:17.75,Default,,0,0,0,,directly in the iOS app.
Dialogue: 0,0:34:18.56,0:34:20.50,Default,,0,0,0,,And when it comes to responding
Dialogue: 0,0:34:20.50,0:34:21.81,Default,,0,0,0,,to reviews, we introduced this
Dialogue: 0,0:34:21.81,0:34:23.01,Default,,0,0,0,,in iOS 10.3.
Dialogue: 0,0:34:23.15,0:34:24.16,Default,,0,0,0,,And the response has been really
Dialogue: 0,0:34:24.16,0:34:24.72,Default,,0,0,0,,fantastic.
Dialogue: 0,0:34:25.26,0:34:26.43,Default,,0,0,0,,We think users have loved this
Dialogue: 0,0:34:26.43,0:34:27.11,Default,,0,0,0,,feature and we've seen
Dialogue: 0,0:34:27.11,0:34:28.79,Default,,0,0,0,,developers really utilizing this
Dialogue: 0,0:34:28.79,0:34:29.39,Default,,0,0,0,,in a great way.
Dialogue: 0,0:34:29.62,0:34:31.16,Default,,0,0,0,,And when you respond to a user's
Dialogue: 0,0:34:31.16,0:34:32.15,Default,,0,0,0,,review, the user gets a
Dialogue: 0,0:34:32.15,0:34:33.57,Default,,0,0,0,,notification on their device,
Dialogue: 0,0:34:33.57,0:34:35.54,Default,,0,0,0,,informing them of your response.
Dialogue: 0,0:34:36.13,0:34:37.49,Default,,0,0,0,,They also get an email, as well,
Dialogue: 0,0:34:38.02,0:34:40.12,Default,,0,0,0,,detailing that response to their
Dialogue: 0,0:34:40.12,0:34:40.47,Default,,0,0,0,,review.
Dialogue: 0,0:34:40.47,0:34:41.87,Default,,0,0,0,,Now, down at the bottom of this
Dialogue: 0,0:34:41.87,0:34:43.31,Default,,0,0,0,,email, we actually have a link
Dialogue: 0,0:34:43.31,0:34:44.50,Default,,0,0,0,,for them to be able to update
Dialogue: 0,0:34:44.50,0:34:44.90,Default,,0,0,0,,their review.
Dialogue: 0,0:34:44.90,0:34:45.45,Default,,0,0,0,,So, we give them that
Dialogue: 0,0:34:45.45,0:34:47.17,Default,,0,0,0,,opportunity to tap that link.
Dialogue: 0,0:34:47.45,0:34:48.36,Default,,0,0,0,,And they get a chance to
Dialogue: 0,0:34:48.36,0:34:49.76,Default,,0,0,0,,actually edit their rating and
Dialogue: 0,0:34:49.76,0:34:51.05,Default,,0,0,0,,perhaps change their review, as
Dialogue: 0,0:34:51.05,0:34:51.45,Default,,0,0,0,,well.
Dialogue: 0,0:34:52.02,0:34:53.42,Default,,0,0,0,,And we've found that as users
Dialogue: 0,0:34:53.42,0:34:54.19,Default,,0,0,0,,are doing this, when they're
Dialogue: 0,0:34:54.19,0:34:55.46,Default,,0,0,0,,updating their reviews after
Dialogue: 0,0:34:55.46,0:34:57.11,Default,,0,0,0,,receiving a response, across the
Dialogue: 0,0:34:57.11,0:34:58.04,Default,,0,0,0,,board we've seen an average
Dialogue: 0,0:34:58.04,0:34:59.88,Default,,0,0,0,,increase of 1.5 stars per
Dialogue: 0,0:34:59.88,0:35:00.29,Default,,0,0,0,,review.
Dialogue: 0,0:35:00.69,0:35:02.02,Default,,0,0,0,,So, as you can see, it's a
Dialogue: 0,0:35:02.02,0:35:03.44,Default,,0,0,0,,really great opportunity to see
Dialogue: 0,0:35:03.55,0:35:04.27,Default,,0,0,0,,a better rating.
Dialogue: 0,0:35:04.27,0:35:05.32,Default,,0,0,0,,A better experience for the
Dialogue: 0,0:35:05.32,0:35:07.06,Default,,0,0,0,,user, and also, a better rating
Dialogue: 0,0:35:07.06,0:35:08.22,Default,,0,0,0,,for your app on the App Store,
Dialogue: 0,0:35:08.22,0:35:08.71,Default,,0,0,0,,entirely.
Dialogue: 0,0:35:09.77,0:35:11.01,Default,,0,0,0,,So, for more information about
Dialogue: 0,0:35:11.01,0:35:12.43,Default,,0,0,0,,this, we have a guide online
Dialogue: 0,0:35:12.43,0:35:13.78,Default,,0,0,0,,about some techniques and the
Dialogue: 0,0:35:13.78,0:35:15.15,Default,,0,0,0,,best ways to respond to reviews
Dialogue: 0,0:35:15.15,0:35:16.00,Default,,0,0,0,,and to interact with your
Dialogue: 0,0:35:16.00,0:35:16.54,Default,,0,0,0,,customers.
Dialogue: 0,0:35:16.91,0:35:18.13,Default,,0,0,0,,And we also chatted about this
Dialogue: 0,0:35:18.13,0:35:19.10,Default,,0,0,0,,in the What's New in iTunes
Dialogue: 0,0:35:19.10,0:35:20.07,Default,,0,0,0,,Connect session, yesterday.
Dialogue: 0,0:35:20.07,0:35:21.47,Default,,0,0,0,,So, if you weren't able to make
Dialogue: 0,0:35:21.47,0:35:22.74,Default,,0,0,0,,that, I'd encourage you to check
Dialogue: 0,0:35:22.74,0:35:25.26,Default,,0,0,0,,out the video for that, too.
Dialogue: 0,0:35:25.81,0:35:26.62,Default,,0,0,0,,When it comes to receiving
Dialogue: 0,0:35:26.62,0:35:27.94,Default,,0,0,0,,reviews, there's a couple of
Dialogue: 0,0:35:27.94,0:35:29.21,Default,,0,0,0,,ways you can do this, now.
Dialogue: 0,0:35:29.21,0:35:30.85,Default,,0,0,0,,You can prompt the user for
Dialogue: 0,0:35:30.85,0:35:31.60,Default,,0,0,0,,reviews in the
Dialogue: 0,0:35:31.60,0:35:33.72,Default,,0,0,0,,SKStoreReviewController class.
Dialogue: 0,0:35:34.03,0:35:35.20,Default,,0,0,0,,And we also provide this deep
Dialogue: 0,0:35:35.20,0:35:36.06,Default,,0,0,0,,link to be able to write a
Dialogue: 0,0:35:36.06,0:35:37.34,Default,,0,0,0,,review in the App Store,
Dialogue: 0,0:35:37.34,0:35:37.76,Default,,0,0,0,,directly.
Dialogue: 0,0:35:38.65,0:35:40.03,Default,,0,0,0,,So first, let's look at the
Dialogue: 0,0:35:40.03,0:35:41.41,Default,,0,0,0,,SKStoreReviewController.
Dialogue: 0,0:35:41.41,0:35:42.56,Default,,0,0,0,,This was a class that we
Dialogue: 0,0:35:42.76,0:35:44.94,Default,,0,0,0,,introduced in iOS 10.3 And it
Dialogue: 0,0:35:44.94,0:35:46.61,Default,,0,0,0,,provides a really nice clean
Dialogue: 0,0:35:46.61,0:35:47.57,Default,,0,0,0,,interface for the user to be
Dialogue: 0,0:35:47.57,0:35:48.89,Default,,0,0,0,,able to rate your application
Dialogue: 0,0:35:49.09,0:35:49.93,Default,,0,0,0,,without leaving it.
Dialogue: 0,0:35:50.07,0:35:51.25,Default,,0,0,0,,So, they can now, just tap a
Dialogue: 0,0:35:51.25,0:35:53.23,Default,,0,0,0,,star, hit submit, and rate your
Dialogue: 0,0:35:53.23,0:35:54.41,Default,,0,0,0,,application in a really seamless
Dialogue: 0,0:35:54.41,0:35:55.02,Default,,0,0,0,,experience.
Dialogue: 0,0:35:55.02,0:35:56.09,Default,,0,0,0,,They can ever write a review
Dialogue: 0,0:35:56.32,0:35:56.93,Default,,0,0,0,,without leaving your
Dialogue: 0,0:35:56.93,0:35:58.59,Default,,0,0,0,,application, now.
Dialogue: 0,0:35:58.84,0:35:59.86,Default,,0,0,0,,Now, if you're asking for
Dialogue: 0,0:35:59.86,0:36:01.52,Default,,0,0,0,,reviews using another kind of
Dialogue: 0,0:36:01.52,0:36:03.18,Default,,0,0,0,,alert or modal prompt, I just
Dialogue: 0,0:36:03.18,0:36:04.35,Default,,0,0,0,,highly encourage you to start
Dialogue: 0,0:36:04.35,0:36:05.69,Default,,0,0,0,,adopting this API, because at
Dialogue: 0,0:36:05.69,0:36:06.75,Default,,0,0,0,,some point in the future, we are
Dialogue: 0,0:36:06.75,0:36:07.74,Default,,0,0,0,,going to start requiring that
Dialogue: 0,0:36:07.74,0:36:09.38,Default,,0,0,0,,any modal presentation, any
Dialogue: 0,0:36:09.38,0:36:11.89,Default,,0,0,0,,modal prompts for reviews do use
Dialogue: 0,0:36:11.89,0:36:12.97,Default,,0,0,0,,this API, instead.
Dialogue: 0,0:36:12.97,0:36:14.37,Default,,0,0,0,,And there are some restrictions
Dialogue: 0,0:36:14.37,0:36:15.72,Default,,0,0,0,,in place for how this API can be
Dialogue: 0,0:36:15.72,0:36:16.12,Default,,0,0,0,,used.
Dialogue: 0,0:36:17.03,0:36:18.50,Default,,0,0,0,,There's a limited number of
Dialogue: 0,0:36:18.50,0:36:19.74,Default,,0,0,0,,requests per device.
Dialogue: 0,0:36:19.82,0:36:21.88,Default,,0,0,0,,So, we limit the amount of times
Dialogue: 0,0:36:21.88,0:36:23.24,Default,,0,0,0,,a user gets bombarded with these
Dialogue: 0,0:36:23.24,0:36:23.78,Default,,0,0,0,,alerts.
Dialogue: 0,0:36:23.78,0:36:24.79,Default,,0,0,0,,And the user can actually now,
Dialogue: 0,0:36:24.79,0:36:26.31,Default,,0,0,0,,in iOS 11, switch it off in the
Dialogue: 0,0:36:26.31,0:36:26.86,Default,,0,0,0,,Setting app.
Dialogue: 0,0:36:26.86,0:36:27.69,Default,,0,0,0,,So, they can go into the App
Dialogue: 0,0:36:27.69,0:36:29.28,Default,,0,0,0,,Store Settings, hit a toggle to
Dialogue: 0,0:36:29.28,0:36:30.74,Default,,0,0,0,,actually turn off these prompts
Dialogue: 0,0:36:30.74,0:36:31.37,Default,,0,0,0,,for ratings.
Dialogue: 0,0:36:31.84,0:36:32.96,Default,,0,0,0,,So, we think this is going to be
Dialogue: 0,0:36:32.96,0:36:34.02,Default,,0,0,0,,a better experience for users
Dialogue: 0,0:36:34.02,0:36:35.09,Default,,0,0,0,,and for developers, alike.
Dialogue: 0,0:36:36.36,0:36:37.71,Default,,0,0,0,,A couple of tips for
Dialogue: 0,0:36:38.11,0:36:40.59,Default,,0,0,0,,implementing this.
Dialogue: 0,0:36:40.59,0:36:41.66,Default,,0,0,0,,The SKStoreReviewController is a
Dialogue: 0,0:36:41.66,0:36:42.54,Default,,0,0,0,,prompt, so it's kind of
Dialogue: 0,0:36:42.54,0:36:43.56,Default,,0,0,0,,interruptive by nature.
Dialogue: 0,0:36:43.69,0:36:45.37,Default,,0,0,0,,So, think about doing this thing
Dialogue: 0,0:36:45.37,0:36:46.69,Default,,0,0,0,,at the end of maybe, some kind
Dialogue: 0,0:36:46.69,0:36:47.49,Default,,0,0,0,,of user interaction.
Dialogue: 0,0:36:47.68,0:36:49.14,Default,,0,0,0,,Maybe after a user has completed
Dialogue: 0,0:36:49.14,0:36:49.70,Default,,0,0,0,,a task.
Dialogue: 0,0:36:50.00,0:36:51.44,Default,,0,0,0,,Maybe, then use that opportunity
Dialogue: 0,0:36:51.44,0:36:52.47,Default,,0,0,0,,to ask them for a rating or
Dialogue: 0,0:36:52.47,0:36:52.77,Default,,0,0,0,,review.
Dialogue: 0,0:36:52.77,0:36:53.95,Default,,0,0,0,,Don't interrupt them when
Dialogue: 0,0:36:53.95,0:36:54.48,Default,,0,0,0,,they're in the middle of
Dialogue: 0,0:36:54.48,0:36:54.85,Default,,0,0,0,,something.
Dialogue: 0,0:36:55.95,0:36:57.25,Default,,0,0,0,,It's also, not appropriate to
Dialogue: 0,0:36:57.25,0:36:58.62,Default,,0,0,0,,use this API from a button.
Dialogue: 0,0:36:58.72,0:36:59.61,Default,,0,0,0,,Because you're not kind of
Dialogue: 0,0:36:59.61,0:37:01.06,Default,,0,0,0,,guaranteed to have UI presented
Dialogue: 0,0:37:01.06,0:37:02.36,Default,,0,0,0,,to the user, based on those
Dialogue: 0,0:37:02.36,0:37:03.35,Default,,0,0,0,,restrictions we just saw.
Dialogue: 0,0:37:03.88,0:37:05.92,Default,,0,0,0,,So, it's not appropriate to use
Dialogue: 0,0:37:05.92,0:37:07.09,Default,,0,0,0,,from some kind of embedded link
Dialogue: 0,0:37:07.09,0:37:07.85,Default,,0,0,0,,in your application.
Dialogue: 0,0:37:08.61,0:37:09.80,Default,,0,0,0,,But when you do want to do it,
Dialogue: 0,0:37:09.80,0:37:10.66,Default,,0,0,0,,this is what is looks like in
Dialogue: 0,0:37:10.66,0:37:10.99,Default,,0,0,0,,code.
Dialogue: 0,0:37:11.19,0:37:12.20,Default,,0,0,0,,It's just one line of code.
Dialogue: 0,0:37:12.70,0:37:13.83,Default,,0,0,0,,But you can wrap it in your own
Dialogue: 0,0:37:13.83,0:37:14.51,Default,,0,0,0,,business logic.
Dialogue: 0,0:37:14.51,0:37:15.85,Default,,0,0,0,,So, in this example here, we're
Dialogue: 0,0:37:15.85,0:37:16.68,Default,,0,0,0,,checking to see if this
Dialogue: 0,0:37:16.73,0:37:18.39,Default,,0,0,0,,particular user is the kind of
Dialogue: 0,0:37:18.39,0:37:19.49,Default,,0,0,0,,user that we want to ask a
Dialogue: 0,0:37:19.49,0:37:19.95,Default,,0,0,0,,review of.
Dialogue: 0,0:37:21.02,0:37:22.23,Default,,0,0,0,,And if we determine that they
Dialogue: 0,0:37:22.23,0:37:24.07,Default,,0,0,0,,are, we can call the request
Dialogue: 0,0:37:24.07,0:37:25.85,Default,,0,0,0,,review method on the
Dialogue: 0,0:37:25.85,0:37:26.98,Default,,0,0,0,,SKStoreReviewController.
Dialogue: 0,0:37:27.06,0:37:28.03,Default,,0,0,0,,And that's the only thing you
Dialogue: 0,0:37:28.03,0:37:28.79,Default,,0,0,0,,need to call.
Dialogue: 0,0:37:28.79,0:37:30.00,Default,,0,0,0,,And that'll present that rating
Dialogue: 0,0:37:30.00,0:37:31.20,Default,,0,0,0,,prompt to a user while they're
Dialogue: 0,0:37:31.20,0:37:32.13,Default,,0,0,0,,using your application.
Dialogue: 0,0:37:32.72,0:37:35.73,Default,,0,0,0,,The other way, of course, is
Dialogue: 0,0:37:35.73,0:37:36.84,Default,,0,0,0,,this new deep link to write a
Dialogue: 0,0:37:36.84,0:37:37.66,Default,,0,0,0,,review that I mentioned.
Dialogue: 0,0:37:39.06,0:37:40.22,Default,,0,0,0,,So, this was also actually
Dialogue: 0,0:37:40.22,0:37:41.73,Default,,0,0,0,,introduced in iOS 10.3, but
Dialogue: 0,0:37:41.73,0:37:42.59,Default,,0,0,0,,we're talking a bit about it,
Dialogue: 0,0:37:42.59,0:37:42.88,Default,,0,0,0,,now.
Dialogue: 0,0:37:43.17,0:37:44.73,Default,,0,0,0,,This provides you a link to open
Dialogue: 0,0:37:44.73,0:37:46.02,Default,,0,0,0,,your app page in the App Store.
Dialogue: 0,0:37:46.28,0:37:47.50,Default,,0,0,0,,But straightaway actually
Dialogue: 0,0:37:47.50,0:37:48.76,Default,,0,0,0,,presents the write review sheet,
Dialogue: 0,0:37:48.76,0:37:49.92,Default,,0,0,0,,or the edit review in the case
Dialogue: 0,0:37:49.92,0:37:50.84,Default,,0,0,0,,of they've already written one.
Dialogue: 0,0:37:51.41,0:37:52.75,Default,,0,0,0,,And this is more appropriate for
Dialogue: 0,0:37:52.75,0:37:53.87,Default,,0,0,0,,thing like user initiated
Dialogue: 0,0:37:53.87,0:37:54.25,Default,,0,0,0,,actions.
Dialogue: 0,0:37:54.25,0:37:55.26,Default,,0,0,0,,So, in the case that maybe you
Dialogue: 0,0:37:55.26,0:37:56.74,Default,,0,0,0,,do want a persistent link in
Dialogue: 0,0:37:56.74,0:37:57.84,Default,,0,0,0,,your app, maybe a button in your
Dialogue: 0,0:37:57.84,0:37:58.94,Default,,0,0,0,,Settings to write a review for
Dialogue: 0,0:37:58.94,0:37:59.90,Default,,0,0,0,,your app in the App Store.
Dialogue: 0,0:38:00.31,0:38:01.72,Default,,0,0,0,,And it's a little different to
Dialogue: 0,0:38:01.72,0:38:02.95,Default,,0,0,0,,the SKStoreReviewController, in
Dialogue: 0,0:38:02.95,0:38:03.36,Default,,0,0,0,,that sense.
Dialogue: 0,0:38:03.36,0:38:04.30,Default,,0,0,0,,You can kind of think about it
Dialogue: 0,0:38:04.30,0:38:05.27,Default,,0,0,0,,as being the opposite.
Dialogue: 0,0:38:05.60,0:38:06.86,Default,,0,0,0,,So, it's more appropriate from a
Dialogue: 0,0:38:06.86,0:38:08.73,Default,,0,0,0,,button in your Settings, or some
Dialogue: 0,0:38:08.85,0:38:09.96,Default,,0,0,0,,embedded content in your
Dialogue: 0,0:38:09.96,0:38:10.39,Default,,0,0,0,,application.
Dialogue: 0,0:38:10.39,0:38:11.34,Default,,0,0,0,,Because it provides that
Dialogue: 0,0:38:11.56,0:38:12.92,Default,,0,0,0,,consistent experience, a
Dialogue: 0,0:38:12.92,0:38:14.44,Default,,0,0,0,,guaranteed action that's going
Dialogue: 0,0:38:14.93,0:38:15.55,Default,,0,0,0,,to happen.
Dialogue: 0,0:38:15.55,0:38:16.67,Default,,0,0,0,,However, it's not appropriate to
Dialogue: 0,0:38:16.67,0:38:17.48,Default,,0,0,0,,use from an alert.
Dialogue: 0,0:38:17.61,0:38:18.88,Default,,0,0,0,,I mentioned if you're going to
Dialogue: 0,0:38:18.88,0:38:20.33,Default,,0,0,0,,use alerts to prompt users for
Dialogue: 0,0:38:20.33,0:38:21.14,Default,,0,0,0,,reviews, make sure that you
Dialogue: 0,0:38:21.14,0:38:21.98,Default,,0,0,0,,start to adopt
Dialogue: 0,0:38:21.98,0:38:23.19,Default,,0,0,0,,SKStoreReviewController,
Dialogue: 0,0:38:23.19,0:38:23.56,Default,,0,0,0,,instead.
Dialogue: 0,0:38:24.15,0:38:27.86,Default,,0,0,0,,This is how you actually form
Dialogue: 0,0:38:27.86,0:38:28.32,Default,,0,0,0,,the deep link.
Dialogue: 0,0:38:28.63,0:38:31.84,Default,,0,0,0,,You take you app page URL, which
Dialogue: 0,0:38:31.84,0:38:32.97,Default,,0,0,0,,you can get online from the Link
Dialogue: 0,0:38:32.97,0:38:34.01,Default,,0,0,0,,Maker website, if you don't know
Dialogue: 0,0:38:34.01,0:38:34.70,Default,,0,0,0,,what that is, already.
Dialogue: 0,0:38:35.03,0:38:36.26,Default,,0,0,0,,And you just append the query
Dialogue: 0,0:38:36.26,0:38:37.62,Default,,0,0,0,,parameter action equals write
Dialogue: 0,0:38:37.73,0:38:38.87,Default,,0,0,0,,review onto the end of it.
Dialogue: 0,0:38:38.87,0:38:40.06,Default,,0,0,0,,And that just means when the
Dialogue: 0,0:38:40.06,0:38:41.31,Default,,0,0,0,,user arrives at your app page,
Dialogue: 0,0:38:41.48,0:38:42.44,Default,,0,0,0,,they get presented with that
Dialogue: 0,0:38:42.44,0:38:43.15,Default,,0,0,0,,Write Review sheet.
Dialogue: 0,0:38:44.23,0:38:47.29,Default,,0,0,0,,So, for more information about
Dialogue: 0,0:38:47.51,0:38:48.60,Default,,0,0,0,,ratings and reviews and some of
Dialogue: 0,0:38:48.60,0:38:49.49,Default,,0,0,0,,the changes we introduced
Dialogue: 0,0:38:49.49,0:38:50.15,Default,,0,0,0,,earlier, this year, I'd
Dialogue: 0,0:38:50.15,0:38:51.36,Default,,0,0,0,,encourage you to check out the
Dialogue: 0,0:38:51.36,0:38:52.29,Default,,0,0,0,,developer website, here.
Dialogue: 0,0:38:52.76,0:38:53.70,Default,,0,0,0,,We've got some more information,
Dialogue: 0,0:38:53.70,0:38:53.85,Default,,0,0,0,,there.
Dialogue: 0,0:38:54.57,0:38:56.80,Default,,0,0,0,,So, we've covered a few of the
Dialogue: 0,0:38:56.80,0:38:58.46,Default,,0,0,0,,new features, today, for what's
Dialogue: 0,0:38:58.46,0:38:59.18,Default,,0,0,0,,new in StoreKit.
Dialogue: 0,0:38:59.48,0:39:00.14,Default,,0,0,0,,Just to recap.
Dialogue: 0,0:39:00.58,0:39:01.84,Default,,0,0,0,,We talked about the way to
Dialogue: 0,0:39:01.84,0:39:02.97,Default,,0,0,0,,implement in-app purchases in
Dialogue: 0,0:39:03.12,0:39:04.27,Default,,0,0,0,,your application, that seven
Dialogue: 0,0:39:04.27,0:39:05.39,Default,,0,0,0,,step flow for implementing
Dialogue: 0,0:39:05.39,0:39:06.13,Default,,0,0,0,,in-app purchases.
Dialogue: 0,0:39:06.58,0:39:07.80,Default,,0,0,0,,Ross, got up here and discussed
Dialogue: 0,0:39:07.80,0:39:08.85,Default,,0,0,0,,some of the newer ways that you
Dialogue: 0,0:39:08.85,0:39:09.73,Default,,0,0,0,,can promote your in-app
Dialogue: 0,0:39:09.73,0:39:10.97,Default,,0,0,0,,purchases, directly in the App
Dialogue: 0,0:39:10.97,0:39:11.28,Default,,0,0,0,,Store.
Dialogue: 0,0:39:11.28,0:39:12.48,Default,,0,0,0,,So, you can now sell content to
Dialogue: 0,0:39:12.48,0:39:13.18,Default,,0,0,0,,your users while they're
Dialogue: 0,0:39:13.18,0:39:14.19,Default,,0,0,0,,browsing the App Store app.
Dialogue: 0,0:39:15.00,0:39:16.29,Default,,0,0,0,,We've got that new App Store
Dialogue: 0,0:39:16.29,0:39:17.71,Default,,0,0,0,,design, featuring the new
Dialogue: 0,0:39:17.90,0:39:19.14,Default,,0,0,0,,Ratings and Reviews section,
Dialogue: 0,0:39:19.40,0:39:20.77,Default,,0,0,0,,including developer responses.
Dialogue: 0,0:39:20.98,0:39:22.20,Default,,0,0,0,,And we've seen that using
Dialogue: 0,0:39:22.20,0:39:23.21,Default,,0,0,0,,developer responses, we've got
Dialogue: 0,0:39:23.21,0:39:24.55,Default,,0,0,0,,some great new opportunities to
Dialogue: 0,0:39:24.55,0:39:25.99,Default,,0,0,0,,actually see improvements in
Dialogue: 0,0:39:25.99,0:39:27.11,Default,,0,0,0,,your ratings and reviews.
Dialogue: 0,0:39:27.36,0:39:28.62,Default,,0,0,0,,Better customer experiences, in
Dialogue: 0,0:39:28.62,0:39:29.40,Default,,0,0,0,,that regard as well.
Dialogue: 0,0:39:30.15,0:39:32.46,Default,,0,0,0,,For more information about this
Dialogue: 0,0:39:32.46,0:39:34.58,Default,,0,0,0,,session, we've got some links on
Dialogue: 0,0:39:34.58,0:39:35.11,Default,,0,0,0,,the website, here.
Dialogue: 0,0:39:35.11,0:39:36.48,Default,,0,0,0,,And this is Session 303.
Dialogue: 0,0:39:37.67,0:39:39.00,Default,,0,0,0,,There's also, some related
Dialogue: 0,0:39:39.00,0:39:39.88,Default,,0,0,0,,sessions, particularly this
Dialogue: 0,0:39:39.88,0:39:41.00,Default,,0,0,0,,afternoon, with the Advanced
Dialogue: 0,0:39:41.00,0:39:41.91,Default,,0,0,0,,StoreKit session.
Dialogue: 0,0:39:42.16,0:39:43.50,Default,,0,0,0,,And I can see you there,
Dialogue: 0,0:39:43.50,0:39:44.54,Default,,0,0,0,,hopefully, if you come along.
Dialogue: 0,0:39:44.66,0:39:46.33,Default,,0,0,0,,We've got some more details
Dialogue: 0,0:39:46.33,0:39:47.66,Default,,0,0,0,,about receipt validation.
Dialogue: 0,0:39:47.66,0:39:48.49,Default,,0,0,0,,We're going to go really
Dialogue: 0,0:39:48.49,0:39:49.53,Default,,0,0,0,,in-depth into subscription
Dialogue: 0,0:39:49.53,0:39:50.93,Default,,0,0,0,,management, persisting state
Dialogue: 0,0:39:50.93,0:39:52.02,Default,,0,0,0,,across the server environment,
Dialogue: 0,0:39:52.02,0:39:52.63,Default,,0,0,0,,and that kind of thing.
Dialogue: 0,0:39:52.63,0:39:54.97,Default,,0,0,0,,So, please come along and we've
Dialogue: 0,0:39:54.97,0:39:55.93,Default,,0,0,0,,got some more content for you,
Dialogue: 0,0:39:55.93,0:39:56.10,Default,,0,0,0,,there.
Dialogue: 0,0:39:56.54,0:39:57.84,Default,,0,0,0,,But that's it for today.
Dialogue: 0,0:39:57.84,0:39:58.82,Default,,0,0,0,,Thank you, for coming along this
Dialogue: 0,0:39:58.82,0:39:59.21,Default,,0,0,0,,session.
Dialogue: 0,0:39:59.21,0:39:59.86,Default,,0,0,0,,And I hope you have a great
Dialogue: 0,0:39:59.86,0:39:59.98,Default,,0,0,0,,lunch.
Dialogue: 0,0:40:00.52,0:40:03.50,Default,,0,0,0,,[ Applause ]
