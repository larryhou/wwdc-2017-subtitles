[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:21.11,0:00:23.33,Default,,0,0,0,,welcome to Friday of WWDC.
Dialogue: 0,0:00:24.02,0:00:24.54,Default,,0,0,0,,[applause] Thank you.
Dialogue: 0,0:00:26.35,0:00:27.82,Default,,0,0,0,,My name is Erik Turnquist and
Dialogue: 0,0:00:27.82,0:00:28.94,Default,,0,0,0,,today Brad and I are going to
Dialogue: 0,0:00:28.94,0:00:30.57,Default,,0,0,0,,talk about working with HEIF and
Dialogue: 0,0:00:30.57,0:00:31.15,Default,,0,0,0,,HEVC.
Dialogue: 0,0:00:32.52,0:00:34.62,Default,,0,0,0,,So, first off, what is HEVC?
Dialogue: 0,0:00:35.11,0:00:37.14,Default,,0,0,0,,HEVC stands for High Efficiency
Dialogue: 0,0:00:37.14,0:00:38.60,Default,,0,0,0,,Video Coding and it is the
Dialogue: 0,0:00:38.60,0:00:40.04,Default,,0,0,0,,industry standard next
Dialogue: 0,0:00:40.04,0:00:41.22,Default,,0,0,0,,generation video encoding
Dialogue: 0,0:00:41.33,0:00:42.04,Default,,0,0,0,,technology.
Dialogue: 0,0:00:42.48,0:00:44.42,Default,,0,0,0,,It's the successor to H.264.
Dialogue: 0,0:00:45.06,0:00:47.22,Default,,0,0,0,,Now for the more important
Dialogue: 0,0:00:47.22,0:00:48.79,Default,,0,0,0,,question, is why?
Dialogue: 0,0:00:49.37,0:00:50.64,Default,,0,0,0,,Why is Apple going through all
Dialogue: 0,0:00:50.64,0:00:51.70,Default,,0,0,0,,of the effort to deliver a new
Dialogue: 0,0:00:51.70,0:00:52.13,Default,,0,0,0,,codec?
Dialogue: 0,0:00:52.13,0:00:54.57,Default,,0,0,0,,H.264 has been really good to us
Dialogue: 0,0:00:54.57,0:00:55.64,Default,,0,0,0,,for over ten years.
Dialogue: 0,0:00:56.49,0:00:57.61,Default,,0,0,0,,Now we thought about this a lot,
Dialogue: 0,0:00:57.73,0:00:58.78,Default,,0,0,0,,and we really want to enable new
Dialogue: 0,0:00:58.78,0:00:59.89,Default,,0,0,0,,features and unfortunately,
Dialogue: 0,0:00:59.89,0:01:01.83,Default,,0,0,0,,H.264 has reached the limits of
Dialogue: 0,0:01:01.83,0:01:02.70,Default,,0,0,0,,its capabilities.
Dialogue: 0,0:01:03.06,0:01:04.80,Default,,0,0,0,,We want to enable new features
Dialogue: 0,0:01:04.80,0:01:06.92,Default,,0,0,0,,like 4K and larger frame sizes,
Dialogue: 0,0:01:07.25,0:01:09.26,Default,,0,0,0,,high bit depths like 10-bit and
Dialogue: 0,0:01:09.26,0:01:10.42,Default,,0,0,0,,wider color spaces like Rec.
Dialogue: 0,0:01:10.42,0:01:12.69,Default,,0,0,0,,2020. Now, we want to do all of
Dialogue: 0,0:01:12.69,0:01:13.87,Default,,0,0,0,,this while lowering the bit
Dialogue: 0,0:01:13.87,0:01:15.16,Default,,0,0,0,,rate, not raising that.
Dialogue: 0,0:01:15.57,0:01:16.38,Default,,0,0,0,,So, how do we do that?
Dialogue: 0,0:01:17.62,0:01:19.11,Default,,0,0,0,,Well, we do that with HEVC.
Dialogue: 0,0:01:19.68,0:01:21.07,Default,,0,0,0,,So, now how much lower are the
Dialogue: 0,0:01:21.07,0:01:22.12,Default,,0,0,0,,bit rates we're actually seeing?
Dialogue: 0,0:01:22.74,0:01:24.52,Default,,0,0,0,,Well, for generally encoded
Dialogue: 0,0:01:24.52,0:01:25.91,Default,,0,0,0,,content we're seeing up to a 40
Dialogue: 0,0:01:25.91,0:01:27.24,Default,,0,0,0,,percent bit rate reduction for
Dialogue: 0,0:01:27.24,0:01:28.41,Default,,0,0,0,,H.264.
Dialogue: 0,0:01:28.41,0:01:29.50,Default,,0,0,0,,So, this is a really big deal.
Dialogue: 0,0:01:30.24,0:01:31.54,Default,,0,0,0,,And for camera capture, we're
Dialogue: 0,0:01:31.54,0:01:33.08,Default,,0,0,0,,seeing up to a 2 times better
Dialogue: 0,0:01:33.08,0:01:35.82,Default,,0,0,0,,compression compared to H.264
Dialogue: 0,0:01:35.90,0:01:36.56,Default,,0,0,0,,and JPEG.
Dialogue: 0,0:01:37.16,0:01:38.55,Default,,0,0,0,,So, another really big deal
Dialogue: 0,0:01:38.55,0:01:38.82,Default,,0,0,0,,here.
Dialogue: 0,0:01:39.76,0:01:40.87,Default,,0,0,0,,And we're making all of these
Dialogue: 0,0:01:40.87,0:01:42.08,Default,,0,0,0,,changes today.
Dialogue: 0,0:01:42.62,0:01:43.89,Default,,0,0,0,,So, if you've installed the iOS,
Dialogue: 0,0:01:43.89,0:01:46.46,Default,,0,0,0,,iOS 11 seeds, we've enabled HEVC
Dialogue: 0,0:01:46.46,0:01:48.29,Default,,0,0,0,,Movie and HEIF Image Capture by
Dialogue: 0,0:01:48.29,0:01:48.68,Default,,0,0,0,,default.
Dialogue: 0,0:01:48.68,0:01:50.33,Default,,0,0,0,,So, that means, many of you have
Dialogue: 0,0:01:50.33,0:01:51.86,Default,,0,0,0,,already captured HEIF images or
Dialogue: 0,0:01:51.86,0:01:53.59,Default,,0,0,0,,HEVC movies without even knowing
Dialogue: 0,0:01:53.59,0:01:53.66,Default,,0,0,0,,it.
Dialogue: 0,0:01:53.65,0:01:54.86,Default,,0,0,0,,And it just works on our
Dialogue: 0,0:01:54.87,0:01:55.48,Default,,0,0,0,,platforms.
Dialogue: 0,0:01:56.02,0:01:57.70,Default,,0,0,0,,Let's go over what we're going
Dialogue: 0,0:01:57.70,0:01:58.59,Default,,0,0,0,,to talk about today.
Dialogue: 0,0:01:58.83,0:01:59.98,Default,,0,0,0,,I'm going to cover the HEVC
Dialogue: 0,0:01:59.98,0:02:01.47,Default,,0,0,0,,Movie side of things, and Brad's
Dialogue: 0,0:02:01.47,0:02:02.55,Default,,0,0,0,,going to cover the HEIF Image
Dialogue: 0,0:02:02.55,0:02:03.24,Default,,0,0,0,,side of things.
Dialogue: 0,0:02:03.50,0:02:04.74,Default,,0,0,0,,We're going to cover accessing
Dialogue: 0,0:02:04.74,0:02:06.61,Default,,0,0,0,,this content, playing it back
Dialogue: 0,0:02:06.61,0:02:09.03,Default,,0,0,0,,and displaying it, capturing and
Dialogue: 0,0:02:09.03,0:02:10.82,Default,,0,0,0,,creating HEIF and HEVC Movies,
Dialogue: 0,0:02:10.92,0:02:12.30,Default,,0,0,0,,and then export and transcode.
Dialogue: 0,0:02:13.28,0:02:14.79,Default,,0,0,0,,So, first let's cover access.
Dialogue: 0,0:02:16.48,0:02:17.79,Default,,0,0,0,,So, many of you are using
Dialogue: 0,0:02:17.79,0:02:19.15,Default,,0,0,0,,PhotoKit and PhotoKit will
Dialogue: 0,0:02:19.15,0:02:20.50,Default,,0,0,0,,deliver HEVC assets for
Dialogue: 0,0:02:20.50,0:02:21.02,Default,,0,0,0,,playback.
Dialogue: 0,0:02:21.47,0:02:22.50,Default,,0,0,0,,So, if you're using
Dialogue: 0,0:02:22.50,0:02:23.99,Default,,0,0,0,,requestPlayerItem or
Dialogue: 0,0:02:23.99,0:02:25.59,Default,,0,0,0,,requestLivePhoto they will
Dialogue: 0,0:02:25.59,0:02:26.77,Default,,0,0,0,,deliver, or they will give you
Dialogue: 0,0:02:26.77,0:02:28.58,Default,,0,0,0,,automatic playback with adopting
Dialogue: 0,0:02:28.58,0:02:30.58,Default,,0,0,0,,new, any new APIs, so this
Dialogue: 0,0:02:30.58,0:02:31.14,Default,,0,0,0,,should just work.
Dialogue: 0,0:02:33.52,0:02:35.63,Default,,0,0,0,,PhotoKit can also deliver you
Dialogue: 0,0:02:35.63,0:02:36.62,Default,,0,0,0,,HEVC assets.
Dialogue: 0,0:02:36.62,0:02:37.51,Default,,0,0,0,,So, if you're calling it
Dialogue: 0,0:02:37.51,0:02:39.11,Default,,0,0,0,,requestExportSession, it will
Dialogue: 0,0:02:39.11,0:02:41.17,Default,,0,0,0,,transcode to the existing preset
Dialogue: 0,0:02:41.17,0:02:42.18,Default,,0,0,0,,you're already using.
Dialogue: 0,0:02:42.70,0:02:43.54,Default,,0,0,0,,So, if you're using one of the
Dialogue: 0,0:02:43.54,0:02:44.82,Default,,0,0,0,,dimension presets that used to
Dialogue: 0,0:02:44.82,0:02:47.17,Default,,0,0,0,,give you H.264, it will still do
Dialogue: 0,0:02:47.17,0:02:47.42,Default,,0,0,0,,that.
Dialogue: 0,0:02:47.60,0:02:48.85,Default,,0,0,0,,But we'll cover new presets
Dialogue: 0,0:02:48.85,0:02:49.86,Default,,0,0,0,,we've added for HEVC.
Dialogue: 0,0:02:49.90,0:02:51.11,Default,,0,0,0,,If you're calling
Dialogue: 0,0:02:51.11,0:02:52.56,Default,,0,0,0,,requestAVAsset, it will give you
Dialogue: 0,0:02:52.56,0:02:54.66,Default,,0,0,0,,access to the HEVC media file
Dialogue: 0,0:02:54.66,0:02:56.25,Default,,0,0,0,,and this will have an HEVC video
Dialogue: 0,0:02:56.25,0:02:57.98,Default,,0,0,0,,track inside of it.
Dialogue: 0,0:02:58.98,0:02:59.91,Default,,0,0,0,,Now, if you're to backup the
Dialogue: 0,0:02:59.91,0:03:01.35,Default,,0,0,0,,application, you want access to
Dialogue: 0,0:03:01.35,0:03:02.99,Default,,0,0,0,,the raw bits, so you're probably
Dialogue: 0,0:03:02.99,0:03:04.55,Default,,0,0,0,,calling it requestData, so I
Dialogue: 0,0:03:04.55,0:03:05.71,Default,,0,0,0,,want to make note that this will
Dialogue: 0,0:03:05.71,0:03:07.61,Default,,0,0,0,,actually contain the HEVC video
Dialogue: 0,0:03:07.61,0:03:08.97,Default,,0,0,0,,track inside the movie file that
Dialogue: 0,0:03:08.97,0:03:10.00,Default,,0,0,0,,you've receive, so you need to
Dialogue: 0,0:03:10.00,0:03:10.89,Default,,0,0,0,,be able to handle this.
Dialogue: 0,0:03:12.23,0:03:14.20,Default,,0,0,0,,Now that you have this content,
Dialogue: 0,0:03:14.20,0:03:15.23,Default,,0,0,0,,let's call about playback and
Dialogue: 0,0:03:15.23,0:03:15.57,Default,,0,0,0,,display.
Dialogue: 0,0:03:17.55,0:03:19.33,Default,,0,0,0,,HEVC playback is supported in
Dialogue: 0,0:03:19.33,0:03:21.22,Default,,0,0,0,,our modern media frameworks like
Dialogue: 0,0:03:21.22,0:03:22.71,Default,,0,0,0,,AVKit, AVFoundation, and
Dialogue: 0,0:03:22.71,0:03:23.59,Default,,0,0,0,,VideoToolbox.
Dialogue: 0,0:03:23.94,0:03:25.80,Default,,0,0,0,,We support HTTP live streaming,
Dialogue: 0,0:03:26.19,0:03:27.68,Default,,0,0,0,,play-while-download, and local
Dialogue: 0,0:03:27.68,0:03:29.38,Default,,0,0,0,,file back or local file
Dialogue: 0,0:03:29.38,0:03:29.81,Default,,0,0,0,,playback.
Dialogue: 0,0:03:30.51,0:03:31.90,Default,,0,0,0,,And we support MPEG-4 and
Dialogue: 0,0:03:31.90,0:03:33.11,Default,,0,0,0,,QuickTime file formats as the
Dialogue: 0,0:03:33.11,0:03:34.73,Default,,0,0,0,,source, and here there's no API
Dialogue: 0,0:03:34.73,0:03:35.59,Default,,0,0,0,,opt-in required.
Dialogue: 0,0:03:35.86,0:03:36.63,Default,,0,0,0,,Things should just work.
Dialogue: 0,0:03:38.38,0:03:40.52,Default,,0,0,0,,We support Decode on macOS and
Dialogue: 0,0:03:40.63,0:03:42.21,Default,,0,0,0,,iOS and now let's go over where
Dialogue: 0,0:03:42.21,0:03:43.47,Default,,0,0,0,,we have Hardware Decode support.
Dialogue: 0,0:03:44.21,0:03:45.66,Default,,0,0,0,,So, we have 8- and 10-bit
Dialogue: 0,0:03:45.66,0:03:47.38,Default,,0,0,0,,decoders on our A9 chip, so
Dialogue: 0,0:03:47.38,0:03:49.65,Default,,0,0,0,,that's the iPhone 6s and we have
Dialogue: 0,0:03:49.65,0:03:51.24,Default,,0,0,0,,8-bit Hardware Decode on our 6th
Dialogue: 0,0:03:51.24,0:03:52.92,Default,,0,0,0,,generation Intel Cores, that's
Dialogue: 0,0:03:52.92,0:03:54.20,Default,,0,0,0,,Skylake and that's the MacBook
Dialogue: 0,0:03:54.23,0:03:55.18,Default,,0,0,0,,Pro with Touch Bar.
Dialogue: 0,0:03:55.64,0:03:57.38,Default,,0,0,0,,We also have 10-bit Decode on
Dialogue: 0,0:03:57.38,0:03:58.69,Default,,0,0,0,,the 7th Generation Intel Core
Dialogue: 0,0:03:58.69,0:04:00.42,Default,,0,0,0,,processors and that's Kaby Lake
Dialogue: 0,0:04:00.42,0:04:01.54,Default,,0,0,0,,and that's the brand-new MacBook
Dialogue: 0,0:04:01.58,0:04:02.27,Default,,0,0,0,,Pro with Touch Bar.
Dialogue: 0,0:04:02.90,0:04:04.24,Default,,0,0,0,,We also have 8- and 10-bit
Dialogue: 0,0:04:04.66,0:04:06.34,Default,,0,0,0,,Software Decode fallbacks on
Dialogue: 0,0:04:06.34,0:04:08.11,Default,,0,0,0,,macOS and iOS.
Dialogue: 0,0:04:08.45,0:04:09.50,Default,,0,0,0,,So, now let's go over some code
Dialogue: 0,0:04:09.50,0:04:10.74,Default,,0,0,0,,you might have and let's convert
Dialogue: 0,0:04:10.74,0:04:11.81,Default,,0,0,0,,it to HEVC playback.
Dialogue: 0,0:04:12.42,0:04:13.37,Default,,0,0,0,,So, here we're playing "My
Dialogue: 0,0:04:13.37,0:04:15.42,Default,,0,0,0,,Awesome Movie" making a URL,
Dialogue: 0,0:04:15.59,0:04:17.09,Default,,0,0,0,,then a player and playing it.
Dialogue: 0,0:04:17.09,0:04:19.16,Default,,0,0,0,,So, this is the H.264 version.
Dialogue: 0,0:04:19.89,0:04:21.44,Default,,0,0,0,,And now here's the HEVC version.
Dialogue: 0,0:04:21.80,0:04:23.15,Default,,0,0,0,,There's no changes.
Dialogue: 0,0:04:23.43,0:04:25.31,Default,,0,0,0,,So, to play an HEVC movie file,
Dialogue: 0,0:04:25.49,0:04:26.47,Default,,0,0,0,,you don't need to change any of
Dialogue: 0,0:04:26.47,0:04:26.94,Default,,0,0,0,,your code.
Dialogue: 0,0:04:27.27,0:04:28.72,Default,,0,0,0,,We want to have you think about
Dialogue: 0,0:04:28.72,0:04:29.38,Default,,0,0,0,,a couple things.
Dialogue: 0,0:04:30.67,0:04:32.03,Default,,0,0,0,,So, the first is about Decode
Dialogue: 0,0:04:32.03,0:04:32.75,Default,,0,0,0,,capability.
Dialogue: 0,0:04:33.06,0:04:33.70,Default,,0,0,0,,And if you're asking the
Dialogue: 0,0:04:33.70,0:04:35.36,Default,,0,0,0,,question is there a decoder on
Dialogue: 0,0:04:35.36,0:04:36.54,Default,,0,0,0,,the system that can handle this
Dialogue: 0,0:04:36.54,0:04:38.57,Default,,0,0,0,,content, this API is for you.
Dialogue: 0,0:04:39.11,0:04:40.63,Default,,0,0,0,,This is useful for non-realtime
Dialogue: 0,0:04:40.63,0:04:42.09,Default,,0,0,0,,operations, like sharing or
Dialogue: 0,0:04:42.09,0:04:42.88,Default,,0,0,0,,image generation.
Dialogue: 0,0:04:42.88,0:04:44.17,Default,,0,0,0,,And it can be limited by
Dialogue: 0,0:04:44.17,0:04:44.97,Default,,0,0,0,,hardware support.
Dialogue: 0,0:04:45.25,0:04:46.21,Default,,0,0,0,,So, not all of our hardware
Dialogue: 0,0:04:46.21,0:04:47.53,Default,,0,0,0,,decoders support every frame
Dialogue: 0,0:04:47.53,0:04:48.01,Default,,0,0,0,,size.
Dialogue: 0,0:04:49.66,0:04:51.09,Default,,0,0,0,,Now, for the more important
Dialogue: 0,0:04:51.09,0:04:52.24,Default,,0,0,0,,question is about playback
Dialogue: 0,0:04:52.24,0:04:52.87,Default,,0,0,0,,capability.
Dialogue: 0,0:04:53.10,0:04:54.29,Default,,0,0,0,,If you're asking, how do I have
Dialogue: 0,0:04:54.29,0:04:55.58,Default,,0,0,0,,the best playback experience for
Dialogue: 0,0:04:55.58,0:04:57.43,Default,,0,0,0,,my customer, this API is for
Dialogue: 0,0:04:57.43,0:04:57.70,Default,,0,0,0,,you.
Dialogue: 0,0:04:57.83,0:04:59.20,Default,,0,0,0,,And many of you are already
Dialogue: 0,0:04:59.20,0:04:59.99,Default,,0,0,0,,using this API.
Dialogue: 0,0:05:01.02,0:05:02.36,Default,,0,0,0,,So, not all content can be
Dialogue: 0,0:05:02.36,0:05:04.03,Default,,0,0,0,,played back in realtime and we
Dialogue: 0,0:05:04.03,0:05:05.29,Default,,0,0,0,,have differing capabilities on
Dialogue: 0,0:05:05.29,0:05:05.98,Default,,0,0,0,,different devices.
Dialogue: 0,0:05:05.98,0:05:07.56,Default,,0,0,0,,So, if you want to have a one
Dialogue: 0,0:05:07.56,0:05:09.20,Default,,0,0,0,,stop shop for the best user
Dialogue: 0,0:05:09.20,0:05:10.57,Default,,0,0,0,,experience for playback, whether
Dialogue: 0,0:05:10.57,0:05:12.64,Default,,0,0,0,,that's 1x or 2x playback,
Dialogue: 0,0:05:12.64,0:05:13.82,Default,,0,0,0,,rewind, scrubbing, or fast
Dialogue: 0,0:05:13.82,0:05:15.50,Default,,0,0,0,,forward, this is the API for
Dialogue: 0,0:05:15.50,0:05:15.70,Default,,0,0,0,,you.
Dialogue: 0,0:05:15.70,0:05:19.06,Default,,0,0,0,,Now, let's go on to Hardware
Dialogue: 0,0:05:19.06,0:05:20.29,Default,,0,0,0,,Decode availability.
Dialogue: 0,0:05:20.46,0:05:21.62,Default,,0,0,0,,If you want to get the best
Dialogue: 0,0:05:21.62,0:05:22.98,Default,,0,0,0,,battery life during playback,
Dialogue: 0,0:05:23.27,0:05:24.67,Default,,0,0,0,,you want to playback on systems
Dialogue: 0,0:05:24.67,0:05:25.73,Default,,0,0,0,,that have Hardware Decode
Dialogue: 0,0:05:25.73,0:05:26.14,Default,,0,0,0,,support.
Dialogue: 0,0:05:26.67,0:05:28.41,Default,,0,0,0,,This will also get you the best
Dialogue: 0,0:05:28.41,0:05:29.26,Default,,0,0,0,,Decode performance.
Dialogue: 0,0:05:29.26,0:05:31.29,Default,,0,0,0,,So, we have new VideoToolbox API
Dialogue: 0,0:05:31.29,0:05:33.26,Default,,0,0,0,,that you can query, is there a
Dialogue: 0,0:05:33.26,0:05:34.73,Default,,0,0,0,,Hardware Decoder Supported for
Dialogue: 0,0:05:34.73,0:05:35.30,Default,,0,0,0,,this codec?
Dialogue: 0,0:05:35.50,0:05:36.69,Default,,0,0,0,,Here I'm showing you HEVC, but
Dialogue: 0,0:05:36.69,0:05:37.98,Default,,0,0,0,,you can also use it for any
Dialogue: 0,0:05:37.98,0:05:40.67,Default,,0,0,0,,other codec.
Dialogue: 0,0:05:40.75,0:05:42.01,Default,,0,0,0,,Now, for the final question for
Dialogue: 0,0:05:42.01,0:05:43.90,Default,,0,0,0,,playback, which codec do I use
Dialogue: 0,0:05:43.90,0:05:44.53,Default,,0,0,0,,for playback?
Dialogue: 0,0:05:45.12,0:05:48.86,Default,,0,0,0,,Do I choose H.264 or HEVC?
Dialogue: 0,0:05:49.61,0:05:51.11,Default,,0,0,0,,Well, if you're concerned about
Dialogue: 0,0:05:51.19,0:05:52.39,Default,,0,0,0,,delivering the most compatible
Dialogue: 0,0:05:52.39,0:05:54.18,Default,,0,0,0,,content or want to deliver one
Dialogue: 0,0:05:54.18,0:05:55.26,Default,,0,0,0,,asset that just works
Dialogue: 0,0:05:55.26,0:05:58.14,Default,,0,0,0,,everywhere, choose H.264.
Dialogue: 0,0:05:58.55,0:05:59.94,Default,,0,0,0,,Our platforms have supported
Dialogue: 0,0:05:59.94,0:06:01.28,Default,,0,0,0,,this format for over 10 years
Dialogue: 0,0:06:01.28,0:06:03.21,Default,,0,0,0,,and there's broad adoption in
Dialogue: 0,0:06:03.21,0:06:04.90,Default,,0,0,0,,the third-party ecosystem.
Dialogue: 0,0:06:05.66,0:06:06.43,Default,,0,0,0,,However, if you want the
Dialogue: 0,0:06:06.43,0:06:08.83,Default,,0,0,0,,smallest file size and latest
Dialogue: 0,0:06:08.83,0:06:09.55,Default,,0,0,0,,and greatest encoding
Dialogue: 0,0:06:09.55,0:06:11.49,Default,,0,0,0,,technology, like 10-bit choose
Dialogue: 0,0:06:11.49,0:06:12.02,Default,,0,0,0,,HEVC.
Dialogue: 0,0:06:12.46,0:06:14.19,Default,,0,0,0,,You'll have to decide what works
Dialogue: 0,0:06:14.19,0:06:15.01,Default,,0,0,0,,in your application.
Dialogue: 0,0:06:15.33,0:06:17.91,Default,,0,0,0,,And with that, let's move on to
Dialogue: 0,0:06:19.30,0:06:19.55,Default,,0,0,0,,capture.
Dialogue: 0,0:06:19.83,0:06:22.17,Default,,0,0,0,,So, capturing HEVC is supported
Dialogue: 0,0:06:22.28,0:06:24.01,Default,,0,0,0,,with AVFoundation and we support
Dialogue: 0,0:06:24.01,0:06:25.36,Default,,0,0,0,,MPEG-4 and QuickTime file
Dialogue: 0,0:06:25.36,0:06:26.76,Default,,0,0,0,,formats as the destination.
Dialogue: 0,0:06:27.34,0:06:31.68,Default,,0,0,0,,We support HEVC capture on our
Dialogue: 0,0:06:31.84,0:06:33.57,Default,,0,0,0,,A10 chip, so that's iPhone 7,
Dialogue: 0,0:06:33.98,0:06:35.31,Default,,0,0,0,,and now let's go over the A, the
Dialogue: 0,0:06:35.31,0:06:37.10,Default,,0,0,0,,capture graph that many of you
Dialogue: 0,0:06:37.10,0:06:41.19,Default,,0,0,0,,are already familiar with.
Dialogue: 0,0:06:41.62,0:06:42.29,Default,,0,0,0,,This starts with an
Dialogue: 0,0:06:42.29,0:06:44.21,Default,,0,0,0,,AVCaptureSession, this needs to
Dialogue: 0,0:06:44.21,0:06:45.29,Default,,0,0,0,,get data from somewhere.
Dialogue: 0,0:06:47.12,0:06:49.56,Default,,0,0,0,,You create an AVCaptureDevice,
Dialogue: 0,0:06:49.64,0:06:51.94,Default,,0,0,0,,you add it as the input, then
Dialogue: 0,0:06:51.94,0:06:53.15,Default,,0,0,0,,data needs to go somewhere.
Dialogue: 0,0:06:53.15,0:06:54.14,Default,,0,0,0,,In this case you're using movie
Dialogue: 0,0:06:54.14,0:06:55.27,Default,,0,0,0,,file to compress and write the
Dialogue: 0,0:06:55.27,0:06:55.83,Default,,0,0,0,,output file.
Dialogue: 0,0:06:57.54,0:06:58.58,Default,,0,0,0,,These are all connected with an
Dialogue: 0,0:06:58.58,0:07:01.05,Default,,0,0,0,,AVCaptureConnection and this
Dialogue: 0,0:07:01.05,0:07:01.92,Default,,0,0,0,,creates your movie file.
Dialogue: 0,0:07:02.43,0:07:03.40,Default,,0,0,0,,So, let's convert this into
Dialogue: 0,0:07:03.40,0:07:03.82,Default,,0,0,0,,code.
Dialogue: 0,0:07:03.82,0:07:06.09,Default,,0,0,0,,And many of you probably have
Dialogue: 0,0:07:06.09,0:07:06.63,Default,,0,0,0,,this in your app.
Dialogue: 0,0:07:06.97,0:07:07.70,Default,,0,0,0,,First, create an
Dialogue: 0,0:07:07.70,0:07:08.69,Default,,0,0,0,,AVCaptureConnect -- or
Dialogue: 0,0:07:08.69,0:07:09.82,Default,,0,0,0,,AVCaptureSession.
Dialogue: 0,0:07:09.82,0:07:11.67,Default,,0,0,0,,Here we're making a 4k capture
Dialogue: 0,0:07:11.67,0:07:12.40,Default,,0,0,0,,session.
Dialogue: 0,0:07:13.89,0:07:14.45,Default,,0,0,0,,Then you create the
Dialogue: 0,0:07:14.45,0:07:16.20,Default,,0,0,0,,AVCaptureDevice, add it as the
Dialogue: 0,0:07:16.20,0:07:16.59,Default,,0,0,0,,input.
Dialogue: 0,0:07:18.47,0:07:20.27,Default,,0,0,0,,Create your MovieFileOutput and
Dialogue: 0,0:07:20.27,0:07:21.49,Default,,0,0,0,,this does the compression file
Dialogue: 0,0:07:21.49,0:07:22.78,Default,,0,0,0,,writing, add it as the output.
Dialogue: 0,0:07:22.78,0:07:25.02,Default,,0,0,0,,And then startRunning and
Dialogue: 0,0:07:25.02,0:07:25.66,Default,,0,0,0,,startRecording.
Dialogue: 0,0:07:25.72,0:07:27.11,Default,,0,0,0,,And then we're capturing.
Dialogue: 0,0:07:27.45,0:07:29.59,Default,,0,0,0,,So, how do we opt in to HEVC?
Dialogue: 0,0:07:30.24,0:07:32.04,Default,,0,0,0,,Well, with iOS 10 we added an
Dialogue: 0,0:07:32.04,0:07:33.81,Default,,0,0,0,,API to check for the available
Dialogue: 0,0:07:33.81,0:07:35.38,Default,,0,0,0,,video codecs during capture.
Dialogue: 0,0:07:35.65,0:07:37.26,Default,,0,0,0,,And new with iOS 11 is you can
Dialogue: 0,0:07:37.26,0:07:38.94,Default,,0,0,0,,check, does it contain HEVC.
Dialogue: 0,0:07:39.61,0:07:41.05,Default,,0,0,0,,On supported devices, it will
Dialogue: 0,0:07:41.05,0:07:42.96,Default,,0,0,0,,return true and you can go ahead
Dialogue: 0,0:07:43.28,0:07:45.90,Default,,0,0,0,,and use that in your output
Dialogue: 0,0:07:45.90,0:07:46.33,Default,,0,0,0,,settings.
Dialogue: 0,0:07:46.58,0:07:48.60,Default,,0,0,0,,And if it doesn't support it you
Dialogue: 0,0:07:48.60,0:07:49.66,Default,,0,0,0,,can go ahead and fall back to
Dialogue: 0,0:07:49.66,0:07:51.88,Default,,0,0,0,,another codec like H.264.
Dialogue: 0,0:07:51.88,0:07:53.39,Default,,0,0,0,,Now I want to make an important
Dialogue: 0,0:07:53.39,0:07:54.25,Default,,0,0,0,,point here, is that order
Dialogue: 0,0:07:54.25,0:07:54.88,Default,,0,0,0,,matters with the
Dialogue: 0,0:07:54.88,0:07:56.32,Default,,0,0,0,,availableVideoCodecTypes and for
Dialogue: 0,0:07:56.32,0:07:58.06,Default,,0,0,0,,this seed we made HEVC the first
Dialogue: 0,0:07:58.06,0:07:58.49,Default,,0,0,0,,option.
Dialogue: 0,0:07:58.93,0:07:59.92,Default,,0,0,0,,So, that means, if you do
Dialogue: 0,0:07:59.92,0:08:01.24,Default,,0,0,0,,nothing else, you'll be
Dialogue: 0,0:08:01.24,0:08:02.74,Default,,0,0,0,,capturing HEVC content.
Dialogue: 0,0:08:03.20,0:08:04.43,Default,,0,0,0,,We really want to get you used
Dialogue: 0,0:08:04.43,0:08:05.48,Default,,0,0,0,,to handling this content.
Dialogue: 0,0:08:06.78,0:08:07.63,Default,,0,0,0,,Now, let's move on to Live
Dialogue: 0,0:08:07.63,0:08:08.14,Default,,0,0,0,,Photos.
Dialogue: 0,0:08:09.65,0:08:10.72,Default,,0,0,0,,So, we have the same capture
Dialogue: 0,0:08:10.72,0:08:12.55,Default,,0,0,0,,graph here, but we use our
Dialogue: 0,0:08:12.55,0:08:14.09,Default,,0,0,0,,AVCapturePhotoOutput, and that
Dialogue: 0,0:08:14.09,0:08:15.30,Default,,0,0,0,,makes all the Live Photos we
Dialogue: 0,0:08:15.30,0:08:15.87,Default,,0,0,0,,love and enjoy.
Dialogue: 0,0:08:16.60,0:08:17.91,Default,,0,0,0,,So, first let's go over couple
Dialogue: 0,0:08:18.21,0:08:19.42,Default,,0,0,0,,new Live Photo enhancements
Dialogue: 0,0:08:19.42,0:08:20.32,Default,,0,0,0,,we've done in the past year.
Dialogue: 0,0:08:21.70,0:08:22.54,Default,,0,0,0,,We now support video
Dialogue: 0,0:08:22.54,0:08:24.25,Default,,0,0,0,,stabilization, so no more shaky
Dialogue: 0,0:08:24.25,0:08:25.65,Default,,0,0,0,,playback during Live Photos.
Dialogue: 0,0:08:25.95,0:08:27.56,Default,,0,0,0,,We also no longer pause music
Dialogue: 0,0:08:27.56,0:08:28.74,Default,,0,0,0,,playback during Live Photo
Dialogue: 0,0:08:28.74,0:08:30.35,Default,,0,0,0,,capture, and we support much
Dialogue: 0,0:08:30.35,0:08:32.42,Default,,0,0,0,,smoother Live Photos up to 30
Dialogue: 0,0:08:32.42,0:08:33.05,Default,,0,0,0,,frames per second.
Dialogue: 0,0:08:33.47,0:08:36.24,Default,,0,0,0,,So, let's go over capturing HEVC
Dialogue: 0,0:08:36.24,0:08:37.01,Default,,0,0,0,,with Live Photos.
Dialogue: 0,0:08:38.23,0:08:40.11,Default,,0,0,0,,So, we have new API in iOS 11
Dialogue: 0,0:08:40.11,0:08:40.77,Default,,0,0,0,,where you can create
Dialogue: 0,0:08:40.77,0:08:42.11,Default,,0,0,0,,availableLivePhotoVideo
Dialogue: 0,0:08:42.11,0:08:44.79,Default,,0,0,0,,CodecTypes, see if it contains
Dialogue: 0,0:08:44.79,0:08:47.10,Default,,0,0,0,,HEVC, and it will return true on
Dialogue: 0,0:08:47.10,0:08:48.15,Default,,0,0,0,,supported devices.
Dialogue: 0,0:08:49.75,0:08:50.92,Default,,0,0,0,,Then if it does go ahead and use
Dialogue: 0,0:08:50.92,0:08:51.88,Default,,0,0,0,,it, if it does not you can fall
Dialogue: 0,0:08:51.88,0:08:52.92,Default,,0,0,0,,back to another existing codec
Dialogue: 0,0:08:52.92,0:08:54.56,Default,,0,0,0,,like H.264.
Dialogue: 0,0:08:54.82,0:08:56.58,Default,,0,0,0,,I also want to make note that
Dialogue: 0,0:08:56.58,0:08:57.74,Default,,0,0,0,,there's the same considerations
Dialogue: 0,0:08:57.74,0:08:59.21,Default,,0,0,0,,here, is that order matters with
Dialogue: 0,0:08:59.21,0:09:00.60,Default,,0,0,0,,the availableVideoCodecTypes and
Dialogue: 0,0:09:00.60,0:09:02.05,Default,,0,0,0,,for this seed we made HEVC the
Dialogue: 0,0:09:02.05,0:09:02.75,Default,,0,0,0,,first option.
Dialogue: 0,0:09:03.68,0:09:05.07,Default,,0,0,0,,So, again, if you do nothing
Dialogue: 0,0:09:05.07,0:09:06.86,Default,,0,0,0,,else, you will capture HEVC Live
Dialogue: 0,0:09:06.86,0:09:07.48,Default,,0,0,0,,Photos.
Dialogue: 0,0:09:08.32,0:09:09.43,Default,,0,0,0,,You might be sensing a pattern
Dialogue: 0,0:09:09.43,0:09:09.72,Default,,0,0,0,,here.
Dialogue: 0,0:09:09.86,0:09:11.18,Default,,0,0,0,,We really want to get you used
Dialogue: 0,0:09:11.18,0:09:11.94,Default,,0,0,0,,to handling this kind of
Dialogue: 0,0:09:11.94,0:09:12.35,Default,,0,0,0,,content.
Dialogue: 0,0:09:12.48,0:09:15.95,Default,,0,0,0,,Now, let's go over the most
Dialogue: 0,0:09:15.95,0:09:18.00,Default,,0,0,0,,customizable capture graph, and
Dialogue: 0,0:09:18.00,0:09:18.51,Default,,0,0,0,,that's with
Dialogue: 0,0:09:18.51,0:09:20.62,Default,,0,0,0,,AVCaptureVideoDataOutput, and
Dialogue: 0,0:09:20.62,0:09:21.43,Default,,0,0,0,,AVAssetWriter.
Dialogue: 0,0:09:22.00,0:09:23.15,Default,,0,0,0,,So, you use this if you want to
Dialogue: 0,0:09:23.15,0:09:24.48,Default,,0,0,0,,modify the sample buffers in
Dialogue: 0,0:09:24.48,0:09:24.89,Default,,0,0,0,,some way.
Dialogue: 0,0:09:24.89,0:09:26.15,Default,,0,0,0,,So, you might be performing some
Dialogue: 0,0:09:26.15,0:09:27.24,Default,,0,0,0,,cool filtering operation.
Dialogue: 0,0:09:27.88,0:09:30.55,Default,,0,0,0,,With configuring AssetWriter for
Dialogue: 0,0:09:30.55,0:09:32.41,Default,,0,0,0,,HEVC, you have two options.
Dialogue: 0,0:09:32.72,0:09:34.26,Default,,0,0,0,,So, you can either configure
Dialogue: 0,0:09:34.26,0:09:35.67,Default,,0,0,0,,custom output settings where you
Dialogue: 0,0:09:35.83,0:09:38.07,Default,,0,0,0,,explicitly specify HEVC, or the
Dialogue: 0,0:09:38.07,0:09:39.19,Default,,0,0,0,,video data output can actually
Dialogue: 0,0:09:39.19,0:09:40.26,Default,,0,0,0,,recommend those settings for
Dialogue: 0,0:09:40.26,0:09:40.52,Default,,0,0,0,,you.
Dialogue: 0,0:09:40.52,0:09:41.93,Default,,0,0,0,,And we recommend this API.
Dialogue: 0,0:09:42.74,0:09:44.12,Default,,0,0,0,,In iOS 7 we added
Dialogue: 0,0:09:44.12,0:09:45.08,Default,,0,0,0,,recommendedVideoSettings
Dialogue: 0,0:09:45.08,0:09:45.86,Default,,0,0,0,,ForAssetWriter.
Dialogue: 0,0:09:46.22,0:09:47.27,Default,,0,0,0,,Now this always recommends
Dialogue: 0,0:09:47.27,0:09:48.26,Default,,0,0,0,,H.264.
Dialogue: 0,0:09:48.34,0:09:49.39,Default,,0,0,0,,So, if you want to stick with
Dialogue: 0,0:09:49.39,0:09:50.35,Default,,0,0,0,,that, that's fine.
Dialogue: 0,0:09:50.86,0:09:52.14,Default,,0,0,0,,However, in iOS 11 we've added
Dialogue: 0,0:09:52.14,0:09:53.59,Default,,0,0,0,,new API where you can actually
Dialogue: 0,0:09:54.07,0:09:55.63,Default,,0,0,0,,pass in the codec type and we
Dialogue: 0,0:09:55.63,0:09:56.61,Default,,0,0,0,,will give you recommended
Dialogue: 0,0:09:56.61,0:09:58.20,Default,,0,0,0,,settings for that codec type on
Dialogue: 0,0:09:58.20,0:09:59.11,Default,,0,0,0,,supported devices.
Dialogue: 0,0:10:00.21,0:10:01.31,Default,,0,0,0,,And with that let's move onto
Dialogue: 0,0:10:01.31,0:10:02.63,Default,,0,0,0,,the Export and transcode side of
Dialogue: 0,0:10:02.63,0:10:02.98,Default,,0,0,0,,things.
Dialogue: 0,0:10:07.29,0:10:09.38,Default,,0,0,0,,So you can transcode to HEVC
Dialogue: 0,0:10:09.38,0:10:10.72,Default,,0,0,0,,with AVFoundation and
Dialogue: 0,0:10:10.72,0:10:11.61,Default,,0,0,0,,VideoToolbox.
Dialogue: 0,0:10:11.73,0:10:13.39,Default,,0,0,0,,And we support MPEG-4 and
Dialogue: 0,0:10:13.39,0:10:14.72,Default,,0,0,0,,QuickTime file formats as the
Dialogue: 0,0:10:14.72,0:10:15.31,Default,,0,0,0,,destination.
Dialogue: 0,0:10:15.76,0:10:17.59,Default,,0,0,0,,And here API opt-in is required.
Dialogue: 0,0:10:20.02,0:10:22.49,Default,,0,0,0,,We support HEVC Encode on macOS
Dialogue: 0,0:10:22.49,0:10:23.93,Default,,0,0,0,,and iOS and now let's go over
Dialogue: 0,0:10:23.93,0:10:25.47,Default,,0,0,0,,where we support HEVC Hardware
Dialogue: 0,0:10:25.47,0:10:25.79,Default,,0,0,0,,Encode.
Dialogue: 0,0:10:27.11,0:10:28.39,Default,,0,0,0,,So, we have an 8-bit Hardware
Dialogue: 0,0:10:28.39,0:10:30.18,Default,,0,0,0,,Encoder on our A10 Fusion chip,
Dialogue: 0,0:10:30.40,0:10:32.67,Default,,0,0,0,,that's iPhone 7, and we support
Dialogue: 0,0:10:32.67,0:10:33.90,Default,,0,0,0,,8-bit Hardware Encode on our
Dialogue: 0,0:10:33.90,0:10:35.24,Default,,0,0,0,,macOS on our 6th generation
Dialogue: 0,0:10:35.24,0:10:37.09,Default,,0,0,0,,Intel Core processors, that's
Dialogue: 0,0:10:37.09,0:10:38.56,Default,,0,0,0,,the Skylake family, and that's
Dialogue: 0,0:10:38.56,0:10:39.94,Default,,0,0,0,,the MacBook Pro with Touch Bar.
Dialogue: 0,0:10:40.56,0:10:42.95,Default,,0,0,0,,And on macOS we have a special
Dialogue: 0,0:10:42.95,0:10:44.44,Default,,0,0,0,,10-bit non-realtime, high
Dialogue: 0,0:10:44.44,0:10:45.69,Default,,0,0,0,,quality software encoder that
Dialogue: 0,0:10:45.69,0:10:47.01,Default,,0,0,0,,you can use and we'll talk about
Dialogue: 0,0:10:47.01,0:10:48.84,Default,,0,0,0,,that in a little bit.
Dialogue: 0,0:10:49.08,0:10:49.91,Default,,0,0,0,,Now, let's start with the
Dialogue: 0,0:10:49.91,0:10:51.94,Default,,0,0,0,,highest-level export APIs, and
Dialogue: 0,0:10:52.80,0:10:54.00,Default,,0,0,0,,that's transcoding with
Dialogue: 0,0:10:54.00,0:10:54.99,Default,,0,0,0,,AVAssetExportSession.
Dialogue: 0,0:10:56.33,0:10:57.42,Default,,0,0,0,,So, with this, you give us an
Dialogue: 0,0:10:57.42,0:10:58.98,Default,,0,0,0,,asset, then you pick a preset
Dialogue: 0,0:10:58.98,0:11:00.91,Default,,0,0,0,,and we do all the operations for
Dialogue: 0,0:11:00.91,0:11:02.23,Default,,0,0,0,,you including compression and we
Dialogue: 0,0:11:02.23,0:11:03.26,Default,,0,0,0,,produce an output movie.
Dialogue: 0,0:11:05.02,0:11:06.40,Default,,0,0,0,,So, there's no change in
Dialogue: 0,0:11:06.40,0:11:08.07,Default,,0,0,0,,behavior for existing presets.
Dialogue: 0,0:11:08.07,0:11:08.95,Default,,0,0,0,,If you're using one of the
Dialogue: 0,0:11:08.95,0:11:10.22,Default,,0,0,0,,existing dimension-based
Dialogue: 0,0:11:10.22,0:11:11.51,Default,,0,0,0,,presets, and it used to give you
Dialogue: 0,0:11:11.51,0:11:13.94,Default,,0,0,0,,H.264, it will still do that.
Dialogue: 0,0:11:14.47,0:11:16.00,Default,,0,0,0,,We've added new presets here.
Dialogue: 0,0:11:16.50,0:11:17.63,Default,,0,0,0,,And those will convert from
Dialogue: 0,0:11:17.63,0:11:19.94,Default,,0,0,0,,H.264 or any other codec to
Dialogue: 0,0:11:19.94,0:11:21.97,Default,,0,0,0,,HEVC, and these will produce
Dialogue: 0,0:11:21.97,0:11:23.91,Default,,0,0,0,,smaller AVAssets, up to 40
Dialogue: 0,0:11:23.91,0:11:25.51,Default,,0,0,0,,percent in some cases, with the
Dialogue: 0,0:11:25.51,0:11:26.18,Default,,0,0,0,,same quality.
Dialogue: 0,0:11:27.51,0:11:29.14,Default,,0,0,0,,Now, let's move one level down
Dialogue: 0,0:11:29.14,0:11:30.94,Default,,0,0,0,,the stack, to compressing with
Dialogue: 0,0:11:30.94,0:11:31.60,Default,,0,0,0,,AVAssetWriter.
Dialogue: 0,0:11:32.15,0:11:35.51,Default,,0,0,0,,So, AVAssetWriter, you're either
Dialogue: 0,0:11:35.72,0:11:36.81,Default,,0,0,0,,generating the sample buffers
Dialogue: 0,0:11:36.81,0:11:38.14,Default,,0,0,0,,yourself, or getting them from
Dialogue: 0,0:11:38.14,0:11:39.81,Default,,0,0,0,,another one of our APIs like
Dialogue: 0,0:11:39.81,0:11:40.92,Default,,0,0,0,,VideoDataOutput or
Dialogue: 0,0:11:40.92,0:11:41.66,Default,,0,0,0,,AVAssetWriter.
Dialogue: 0,0:11:41.74,0:11:43.22,Default,,0,0,0,,And AVAssetWriter's responsible
Dialogue: 0,0:11:43.22,0:11:44.41,Default,,0,0,0,,for compression and file
Dialogue: 0,0:11:44.41,0:11:44.65,Default,,0,0,0,,writing.
Dialogue: 0,0:11:46.06,0:11:47.18,Default,,0,0,0,,Again, like I discussed
Dialogue: 0,0:11:47.18,0:11:48.41,Default,,0,0,0,,previously, there's two options
Dialogue: 0,0:11:48.41,0:11:49.27,Default,,0,0,0,,for AVAssetWriter.
Dialogue: 0,0:11:49.57,0:11:51.08,Default,,0,0,0,,You can either explicitly set
Dialogue: 0,0:11:51.08,0:11:52.56,Default,,0,0,0,,custom output settings, in this
Dialogue: 0,0:11:52.56,0:11:54.98,Default,,0,0,0,,case we're specifying use HEVC.
Dialogue: 0,0:11:55.04,0:11:56.51,Default,,0,0,0,,You can also specify your bit
Dialogue: 0,0:11:56.51,0:11:58.29,Default,,0,0,0,,rate and dimensions, or you can
Dialogue: 0,0:11:58.29,0:11:59.46,Default,,0,0,0,,use one of our convenience
Dialogue: 0,0:11:59.57,0:12:01.24,Default,,0,0,0,,settings in capture, you can use
Dialogue: 0,0:12:01.24,0:12:02.55,Default,,0,0,0,,the VideoDataOutput and for
Dialogue: 0,0:12:02.55,0:12:03.65,Default,,0,0,0,,general encode you can use the
Dialogue: 0,0:12:03.65,0:12:05.01,Default,,0,0,0,,AVOutputSettingsAssistant.
Dialogue: 0,0:12:05.20,0:12:06.66,Default,,0,0,0,,We've added two new presets here
Dialogue: 0,0:12:06.66,0:12:08.20,Default,,0,0,0,,that on supported devices will
Dialogue: 0,0:12:08.20,0:12:09.94,Default,,0,0,0,,return HEVC output settings.
Dialogue: 0,0:12:11.08,0:12:12.14,Default,,0,0,0,,Now, if you're in the business
Dialogue: 0,0:12:12.14,0:12:13.18,Default,,0,0,0,,of creating your own custom
Dialogue: 0,0:12:13.18,0:12:14.70,Default,,0,0,0,,output settings, it can be a
Dialogue: 0,0:12:14.70,0:12:15.47,Default,,0,0,0,,little tricky.
Dialogue: 0,0:12:15.86,0:12:17.22,Default,,0,0,0,,So, not all encoders support all
Dialogue: 0,0:12:17.22,0:12:17.98,Default,,0,0,0,,output settings.
Dialogue: 0,0:12:19.01,0:12:20.22,Default,,0,0,0,,We've fixed that problem in iOS
Dialogue: 0,0:12:20.22,0:12:21.83,Default,,0,0,0,,11 and macOS High Sierra so you
Dialogue: 0,0:12:21.83,0:12:23.02,Default,,0,0,0,,can now query the encoder for
Dialogue: 0,0:12:23.02,0:12:24.34,Default,,0,0,0,,supported properties to use in
Dialogue: 0,0:12:24.34,0:12:25.23,Default,,0,0,0,,your output settings.
Dialogue: 0,0:12:25.55,0:12:27.61,Default,,0,0,0,,To do that you pass in HEVC
Dialogue: 0,0:12:27.61,0:12:29.34,Default,,0,0,0,,here, and it will return the
Dialogue: 0,0:12:29.34,0:12:30.64,Default,,0,0,0,,encoder ID and a list of
Dialogue: 0,0:12:30.64,0:12:31.62,Default,,0,0,0,,supported properties.
Dialogue: 0,0:12:32.17,0:12:33.45,Default,,0,0,0,,The encoder ID is the unique
Dialogue: 0,0:12:33.45,0:12:35.21,Default,,0,0,0,,identifier for that specific
Dialogue: 0,0:12:35.21,0:12:36.91,Default,,0,0,0,,encoder, and with that the
Dialogue: 0,0:12:36.91,0:12:38.45,Default,,0,0,0,,properties and the encoder ID
Dialogue: 0,0:12:38.45,0:12:40.20,Default,,0,0,0,,can be specified in the output
Dialogue: 0,0:12:40.20,0:12:41.19,Default,,0,0,0,,settings and you can be sure
Dialogue: 0,0:12:41.19,0:12:42.18,Default,,0,0,0,,that it actually works for
Dialogue: 0,0:12:42.18,0:12:42.66,Default,,0,0,0,,compression.
Dialogue: 0,0:12:43.40,0:12:44.53,Default,,0,0,0,,Now, let's move to the lowest
Dialogue: 0,0:12:44.53,0:12:45.91,Default,,0,0,0,,level compression interface and
Dialogue: 0,0:12:46.48,0:12:47.79,Default,,0,0,0,,that's compressing samples with
Dialogue: 0,0:12:47.79,0:12:48.82,Default,,0,0,0,,VTCompressionSession.
Dialogue: 0,0:12:49.31,0:12:50.90,Default,,0,0,0,,So, just like with AssetWriter
Dialogue: 0,0:12:50.90,0:12:51.86,Default,,0,0,0,,you might be generating the
Dialogue: 0,0:12:51.86,0:12:53.21,Default,,0,0,0,,samples yourself or getting them
Dialogue: 0,0:12:53.21,0:12:55.45,Default,,0,0,0,,from another one of our APIs.
Dialogue: 0,0:12:55.45,0:12:56.76,Default,,0,0,0,,VTCompressionsSession compresses
Dialogue: 0,0:12:56.76,0:12:59.08,Default,,0,0,0,,them and produces our compressed
Dialogue: 0,0:12:59.08,0:13:01.54,Default,,0,0,0,,media data.
Dialogue: 0,0:13:01.70,0:13:03.20,Default,,0,0,0,,So, to create a compression
Dialogue: 0,0:13:03.20,0:13:04.93,Default,,0,0,0,,session with an HEVC encoder,
Dialogue: 0,0:13:04.93,0:13:05.82,Default,,0,0,0,,it's very simple.
Dialogue: 0,0:13:05.86,0:13:07.26,Default,,0,0,0,,In this case we're creating one
Dialogue: 0,0:13:07.68,0:13:09.81,Default,,0,0,0,,that's compressing to H.264.
Dialogue: 0,0:13:09.81,0:13:11.37,Default,,0,0,0,,Let's go ahead and convert it to
Dialogue: 0,0:13:11.37,0:13:11.50,Default,,0,0,0,,HEVC.
Dialogue: 0,0:13:12.66,0:13:13.47,Default,,0,0,0,,There we go, and now we're
Dialogue: 0,0:13:13.47,0:13:14.83,Default,,0,0,0,,compressing with HEVC with
Dialogue: 0,0:13:14.83,0:13:15.76,Default,,0,0,0,,VideoToolbox.
Dialogue: 0,0:13:15.76,0:13:16.74,Default,,0,0,0,,So, that was pretty easy.
Dialogue: 0,0:13:17.20,0:13:18.49,Default,,0,0,0,,Now, let's go over a couple of
Dialogue: 0,0:13:18.49,0:13:19.96,Default,,0,0,0,,considerations on macOS.
Dialogue: 0,0:13:21.36,0:13:22.76,Default,,0,0,0,,So, for optimal encoding
Dialogue: 0,0:13:22.76,0:13:24.14,Default,,0,0,0,,performance on macOS you want to
Dialogue: 0,0:13:24.14,0:13:25.09,Default,,0,0,0,,opt-in to hardware.
Dialogue: 0,0:13:25.52,0:13:26.61,Default,,0,0,0,,This will use hardware when
Dialogue: 0,0:13:26.61,0:13:27.98,Default,,0,0,0,,available and when it's not
Dialogue: 0,0:13:28.04,0:13:29.03,Default,,0,0,0,,fallback to software.
Dialogue: 0,0:13:29.78,0:13:32.17,Default,,0,0,0,,So, to do that, set the
Dialogue: 0,0:13:32.17,0:13:33.51,Default,,0,0,0,,EnableHardwareAccelerated
Dialogue: 0,0:13:33.51,0:13:36.25,Default,,0,0,0,,VideoEncoder property to true in
Dialogue: 0,0:13:36.25,0:13:38.93,Default,,0,0,0,,your encoderSpecification and
Dialogue: 0,0:13:38.93,0:13:39.70,Default,,0,0,0,,then pass it into
Dialogue: 0,0:13:39.70,0:13:41.14,Default,,0,0,0,,VTCompressionSessionCreate.
Dialogue: 0,0:13:41.94,0:13:44.93,Default,,0,0,0,,Now, if you're do realtime
Dialogue: 0,0:13:44.93,0:13:46.37,Default,,0,0,0,,encode, you'll want to often
Dialogue: 0,0:13:46.37,0:13:47.90,Default,,0,0,0,,require hardware and never
Dialogue: 0,0:13:47.90,0:13:48.90,Default,,0,0,0,,fallback to software.
Dialogue: 0,0:13:49.40,0:13:51.19,Default,,0,0,0,,So, to do that, you set in your
Dialogue: 0,0:13:51.19,0:13:52.21,Default,,0,0,0,,encoderSpecification
Dialogue: 0,0:13:52.28,0:13:53.63,Default,,0,0,0,,RequireHardwareAccelarated
Dialogue: 0,0:13:53.63,0:13:56.16,Default,,0,0,0,,VideoEncoder to true and then
Dialogue: 0,0:13:56.36,0:13:57.37,Default,,0,0,0,,pass it into your
Dialogue: 0,0:13:57.37,0:13:58.39,Default,,0,0,0,,encoderSpecification.
Dialogue: 0,0:13:58.39,0:13:59.90,Default,,0,0,0,,Again, on systems where hardware
Dialogue: 0,0:13:59.90,0:14:01.35,Default,,0,0,0,,supported, this will succeed,
Dialogue: 0,0:14:01.46,0:14:02.77,Default,,0,0,0,,but hardware on systems where
Dialogue: 0,0:14:02.77,0:14:03.68,Default,,0,0,0,,there's only software encode,
Dialogue: 0,0:14:04.04,0:14:04.66,Default,,0,0,0,,this will fail.
Dialogue: 0,0:14:05.93,0:14:06.91,Default,,0,0,0,,All right, now let's go onto a
Dialogue: 0,0:14:06.91,0:14:08.62,Default,,0,0,0,,couple advanced encoding topics.
Dialogue: 0,0:14:09.11,0:14:10.49,Default,,0,0,0,,And the first is bit depth.
Dialogue: 0,0:14:11.23,0:14:12.32,Default,,0,0,0,,So, if you've ever seen a nice
Dialogue: 0,0:14:12.37,0:14:14.06,Default,,0,0,0,,gradient in a user interface or
Dialogue: 0,0:14:14.06,0:14:15.87,Default,,0,0,0,,a nice sunrise or sunset, you
Dialogue: 0,0:14:15.87,0:14:16.87,Default,,0,0,0,,notice what it looks like in
Dialogue: 0,0:14:16.95,0:14:18.47,Default,,0,0,0,,real life versus what it looks
Dialogue: 0,0:14:18.47,0:14:20.21,Default,,0,0,0,,like in a movie isn't exactly
Dialogue: 0,0:14:20.21,0:14:20.68,Default,,0,0,0,,the same.
Dialogue: 0,0:14:21.27,0:14:22.37,Default,,0,0,0,,So, you might see these color
Dialogue: 0,0:14:22.37,0:14:23.86,Default,,0,0,0,,banning effects in the video
Dialogue: 0,0:14:23.86,0:14:25.98,Default,,0,0,0,,version of your, of your movie.
Dialogue: 0,0:14:26.55,0:14:27.73,Default,,0,0,0,,And that's because with 8-bits
Dialogue: 0,0:14:27.73,0:14:28.84,Default,,0,0,0,,we don't have enough precision
Dialogue: 0,0:14:28.84,0:14:29.83,Default,,0,0,0,,to represent the subtle
Dialogue: 0,0:14:29.83,0:14:31.07,Default,,0,0,0,,differences between colors.
Dialogue: 0,0:14:31.55,0:14:32.39,Default,,0,0,0,,Now, the great thing about
Dialogue: 0,0:14:32.39,0:14:33.84,Default,,0,0,0,,10-bit is we actually do.
Dialogue: 0,0:14:33.84,0:14:34.72,Default,,0,0,0,,So, you get these really
Dialogue: 0,0:14:34.72,0:14:35.62,Default,,0,0,0,,beautiful gradients.
Dialogue: 0,0:14:36.77,0:14:38.12,Default,,0,0,0,,Now, with our macOS software
Dialogue: 0,0:14:38.12,0:14:39.25,Default,,0,0,0,,encoder, we actually support
Dialogue: 0,0:14:39.29,0:14:40.21,Default,,0,0,0,,10-bit encode.
Dialogue: 0,0:14:40.95,0:14:41.81,Default,,0,0,0,,So, first check that the
Dialogue: 0,0:14:41.81,0:14:43.61,Default,,0,0,0,,property is supported, and if it
Dialogue: 0,0:14:43.61,0:14:45.24,Default,,0,0,0,,is go ahead and use our HEVC
Dialogue: 0,0:14:45.24,0:14:47.21,Default,,0,0,0,,Main10 profile for our software
Dialogue: 0,0:14:47.21,0:14:47.52,Default,,0,0,0,,encoder.
Dialogue: 0,0:14:48.39,0:14:49.30,Default,,0,0,0,,And we want to make sure your
Dialogue: 0,0:14:49.30,0:14:50.73,Default,,0,0,0,,entire pipeline is 10-bit.
Dialogue: 0,0:14:50.86,0:14:51.93,Default,,0,0,0,,We don't want you going from
Dialogue: 0,0:14:51.93,0:14:53.65,Default,,0,0,0,,8-bit to 10-bit and then back to
Dialogue: 0,0:14:53.65,0:14:54.73,Default,,0,0,0,,8-bit, because that loses
Dialogue: 0,0:14:54.77,0:14:55.23,Default,,0,0,0,,precision.
Dialogue: 0,0:14:55.57,0:14:56.76,Default,,0,0,0,,So, we've added new CoreVideo
Dialogue: 0,0:14:56.76,0:14:58.16,Default,,0,0,0,,pixel buffer formats to ensure
Dialogue: 0,0:14:58.16,0:14:59.90,Default,,0,0,0,,that you can stay in 10-bit.
Dialogue: 0,0:14:59.90,0:15:00.79,Default,,0,0,0,,One is listed here.
Dialogue: 0,0:15:01.27,0:15:02.34,Default,,0,0,0,,So, now for the first time you
Dialogue: 0,0:15:02.34,0:15:04.10,Default,,0,0,0,,can render in 10-bit, encode in
Dialogue: 0,0:15:04.10,0:15:06.02,Default,,0,0,0,,10-bit, decode in 10-bit, and
Dialogue: 0,0:15:06.02,0:15:07.44,Default,,0,0,0,,for the first time ever on iOS
Dialogue: 0,0:15:07.44,0:15:08.85,Default,,0,0,0,,and macOS our display pipeline
Dialogue: 0,0:15:08.85,0:15:10.54,Default,,0,0,0,,also supports 10-bit, so we get
Dialogue: 0,0:15:10.54,0:15:11.34,Default,,0,0,0,,it across everything.
Dialogue: 0,0:15:12.52,0:15:15.56,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:15:16.06,0:15:17.12,Default,,0,0,0,,Now, let's go over our second
Dialogue: 0,0:15:17.12,0:15:18.07,Default,,0,0,0,,advanced topic and that's
Dialogue: 0,0:15:18.07,0:15:19.29,Default,,0,0,0,,Hierarchical Encoding.
Dialogue: 0,0:15:19.55,0:15:20.99,Default,,0,0,0,,And so to understand a little
Dialogue: 0,0:15:20.99,0:15:22.18,Default,,0,0,0,,bit about this we need to go
Dialogue: 0,0:15:22.18,0:15:23.24,Default,,0,0,0,,over a little bit of video
Dialogue: 0,0:15:23.24,0:15:25.05,Default,,0,0,0,,encoding 101.
Dialogue: 0,0:15:25.20,0:15:26.43,Default,,0,0,0,,There's three major frame types
Dialogue: 0,0:15:26.43,0:15:27.49,Default,,0,0,0,,that compress video, and the
Dialogue: 0,0:15:27.49,0:15:28.74,Default,,0,0,0,,first is an I Frame.
Dialogue: 0,0:15:29.24,0:15:30.22,Default,,0,0,0,,You can think of I Frames like
Dialogue: 0,0:15:30.22,0:15:31.59,Default,,0,0,0,,an image file and they can be
Dialogue: 0,0:15:31.59,0:15:32.69,Default,,0,0,0,,decoded independently.
Dialogue: 0,0:15:34.00,0:15:35.85,Default,,0,0,0,,Then we have a P Frame, and P
Dialogue: 0,0:15:35.85,0:15:37.61,Default,,0,0,0,,Frames refer to previous frames,
Dialogue: 0,0:15:37.75,0:15:38.92,Default,,0,0,0,,so think of them like a 1-way
Dialogue: 0,0:15:38.92,0:15:39.96,Default,,0,0,0,,diff and they only contain
Dialogue: 0,0:15:39.96,0:15:41.12,Default,,0,0,0,,information that isn't in the
Dialogue: 0,0:15:41.12,0:15:41.79,Default,,0,0,0,,previous frame.
Dialogue: 0,0:15:42.43,0:15:43.91,Default,,0,0,0,,Now we have their cousin, the B
Dialogue: 0,0:15:43.91,0:15:44.28,Default,,0,0,0,,Frame.
Dialogue: 0,0:15:44.75,0:15:46.30,Default,,0,0,0,,B Frames refer to previous and
Dialogue: 0,0:15:46.30,0:15:47.50,Default,,0,0,0,,future frames and they're like a
Dialogue: 0,0:15:47.50,0:15:49.34,Default,,0,0,0,,fancy multidirectional diff.
Dialogue: 0,0:15:49.45,0:15:50.27,Default,,0,0,0,,So, they only contain
Dialogue: 0,0:15:50.27,0:15:52.00,Default,,0,0,0,,information that isn't in either
Dialogue: 0,0:15:52.00,0:15:52.79,Default,,0,0,0,,frame they're referencing.
Dialogue: 0,0:15:53.51,0:15:54.42,Default,,0,0,0,,Now let's pretend we have a
Dialogue: 0,0:15:54.42,0:15:55.90,Default,,0,0,0,,decoder that can only handle 30
Dialogue: 0,0:15:55.90,0:15:57.75,Default,,0,0,0,,frames a second, and let's say
Dialogue: 0,0:15:57.75,0:15:59.42,Default,,0,0,0,,we have content that is 240
Dialogue: 0,0:15:59.42,0:16:00.12,Default,,0,0,0,,frames a second.
Dialogue: 0,0:16:00.56,0:16:01.71,Default,,0,0,0,,Well that means we need to drop
Dialogue: 0,0:16:01.71,0:16:02.85,Default,,0,0,0,,some frames before we can
Dialogue: 0,0:16:02.85,0:16:04.03,Default,,0,0,0,,decode, because it can't keep
Dialogue: 0,0:16:04.03,0:16:04.23,Default,,0,0,0,,up.
Dialogue: 0,0:16:04.76,0:16:06.08,Default,,0,0,0,,So, when can we drop frames?
Dialogue: 0,0:16:07.02,0:16:08.20,Default,,0,0,0,,We can drop frames when another
Dialogue: 0,0:16:08.20,0:16:09.51,Default,,0,0,0,,frame doesn't depend on it.
Dialogue: 0,0:16:10.15,0:16:11.24,Default,,0,0,0,,So, in this case we can drop the
Dialogue: 0,0:16:11.24,0:16:13.11,Default,,0,0,0,,last P Frame, because it refers
Dialogue: 0,0:16:13.11,0:16:14.90,Default,,0,0,0,,to another frame, but no frames
Dialogue: 0,0:16:14.90,0:16:15.47,Default,,0,0,0,,refer to it.
Dialogue: 0,0:16:15.61,0:16:16.69,Default,,0,0,0,,So, let's go ahead and drop it.
Dialogue: 0,0:16:17.19,0:16:18.92,Default,,0,0,0,,We can also drop the B frame
Dialogue: 0,0:16:18.92,0:16:20.09,Default,,0,0,0,,because it refers to other
Dialogue: 0,0:16:20.09,0:16:21.91,Default,,0,0,0,,frames, but no frames refer to
Dialogue: 0,0:16:21.91,0:16:22.04,Default,,0,0,0,,it.
Dialogue: 0,0:16:22.39,0:16:24.22,Default,,0,0,0,,So, let's go ahead and drop it.
Dialogue: 0,0:16:24.47,0:16:25.81,Default,,0,0,0,,Now, let's move to a real-world
Dialogue: 0,0:16:25.81,0:16:27.81,Default,,0,0,0,,case of encoding 240 frames per
Dialogue: 0,0:16:27.81,0:16:28.51,Default,,0,0,0,,second content.
Dialogue: 0,0:16:29.83,0:16:31.08,Default,,0,0,0,,So, this is a typical encoding
Dialogue: 0,0:16:31.08,0:16:32.20,Default,,0,0,0,,scheme used when creating
Dialogue: 0,0:16:32.20,0:16:33.68,Default,,0,0,0,,content compatible with low end
Dialogue: 0,0:16:33.68,0:16:34.39,Default,,0,0,0,,devices.
Dialogue: 0,0:16:35.25,0:16:36.44,Default,,0,0,0,,So, for example, when encoding
Dialogue: 0,0:16:36.44,0:16:37.87,Default,,0,0,0,,240 frames a second content,
Dialogue: 0,0:16:37.87,0:16:39.13,Default,,0,0,0,,we'll have one non-droppable
Dialogue: 0,0:16:39.13,0:16:41.06,Default,,0,0,0,,frame for every seven droppable.
Dialogue: 0,0:16:41.42,0:16:42.39,Default,,0,0,0,,So, this gives us a lot of
Dialogue: 0,0:16:42.39,0:16:43.67,Default,,0,0,0,,flexibility during playback.
Dialogue: 0,0:16:44.04,0:16:46.26,Default,,0,0,0,,On devices that support 120
Dialogue: 0,0:16:46.26,0:16:47.41,Default,,0,0,0,,frames per second decode we can
Dialogue: 0,0:16:47.41,0:16:48.44,Default,,0,0,0,,handle that, on devices that
Dialogue: 0,0:16:48.44,0:16:49.97,Default,,0,0,0,,only support 30, we can also
Dialogue: 0,0:16:49.97,0:16:50.62,Default,,0,0,0,,playback there.
Dialogue: 0,0:16:51.35,0:16:52.55,Default,,0,0,0,,Now, let's throw in our frame
Dialogue: 0,0:16:52.55,0:16:53.29,Default,,0,0,0,,references.
Dialogue: 0,0:16:53.76,0:16:54.50,Default,,0,0,0,,Because these frames are
Dialogue: 0,0:16:54.50,0:16:55.84,Default,,0,0,0,,droppable, they can't refer to
Dialogue: 0,0:16:55.84,0:16:57.02,Default,,0,0,0,,each other and they all refer to
Dialogue: 0,0:16:57.02,0:16:58.11,Default,,0,0,0,,the non-droppable frame.
Dialogue: 0,0:16:58.75,0:16:59.55,Default,,0,0,0,,Now, those of you with
Dialogue: 0,0:16:59.55,0:17:00.93,Default,,0,0,0,,compression experience, are all
Dialogue: 0,0:17:00.98,0:17:02.89,Default,,0,0,0,,already seeing one problem, is
Dialogue: 0,0:17:02.89,0:17:04.17,Default,,0,0,0,,that compression suffers because
Dialogue: 0,0:17:04.17,0:17:05.58,Default,,0,0,0,,we can't refer to the nearby
Dialogue: 0,0:17:05.58,0:17:06.14,Default,,0,0,0,,frames.
Dialogue: 0,0:17:06.35,0:17:07.36,Default,,0,0,0,,So, they're all referring to the
Dialogue: 0,0:17:07.36,0:17:08.70,Default,,0,0,0,,non-droppable frame and a lot
Dialogue: 0,0:17:08.70,0:17:09.72,Default,,0,0,0,,might have changed between the
Dialogue: 0,0:17:09.72,0:17:11.19,Default,,0,0,0,,non-droppable and the droppable
Dialogue: 0,0:17:11.19,0:17:11.48,Default,,0,0,0,,frame.
Dialogue: 0,0:17:11.59,0:17:13.24,Default,,0,0,0,,All right, so that's problem
Dialogue: 0,0:17:13.24,0:17:14.01,Default,,0,0,0,,number one that we're going to
Dialogue: 0,0:17:14.01,0:17:14.32,Default,,0,0,0,,fix.
Dialogue: 0,0:17:14.65,0:17:15.94,Default,,0,0,0,,Now, let's step through and
Dialogue: 0,0:17:15.94,0:17:17.24,Default,,0,0,0,,decode down to 30 frames a
Dialogue: 0,0:17:17.24,0:17:17.51,Default,,0,0,0,,second.
Dialogue: 0,0:17:18.00,0:17:19.38,Default,,0,0,0,,So, first let's say we can't
Dialogue: 0,0:17:19.38,0:17:20.95,Default,,0,0,0,,handle 240 frames a second,
Dialogue: 0,0:17:21.62,0:17:22.47,Default,,0,0,0,,let's go ahead and drop some
Dialogue: 0,0:17:22.47,0:17:23.05,Default,,0,0,0,,frames.
Dialogue: 0,0:17:23.22,0:17:24.23,Default,,0,0,0,,So here we're dropping down to
Dialogue: 0,0:17:24.23,0:17:25.84,Default,,0,0,0,,240 frames a second, and let's
Dialogue: 0,0:17:25.84,0:17:27.05,Default,,0,0,0,,say we still can't keep up.
Dialogue: 0,0:17:27.32,0:17:28.63,Default,,0,0,0,,We need to go down to 60 frames
Dialogue: 0,0:17:28.63,0:17:30.53,Default,,0,0,0,,a second, let's say we have our
Dialogue: 0,0:17:30.53,0:17:32.05,Default,,0,0,0,,decoder that can only handle 30
Dialogue: 0,0:17:32.05,0:17:33.13,Default,,0,0,0,,frames a second, we can't even
Dialogue: 0,0:17:33.13,0:17:34.29,Default,,0,0,0,,handle 60 frames a second.
Dialogue: 0,0:17:34.62,0:17:35.88,Default,,0,0,0,,So, we go ahead and drop this
Dialogue: 0,0:17:35.88,0:17:36.40,Default,,0,0,0,,last frame.
Dialogue: 0,0:17:37.44,0:17:39.23,Default,,0,0,0,,Now, I was really guessing about
Dialogue: 0,0:17:39.23,0:17:40.20,Default,,0,0,0,,what frames to drop.
Dialogue: 0,0:17:40.34,0:17:41.84,Default,,0,0,0,,So, there's no indication at all
Dialogue: 0,0:17:41.84,0:17:42.87,Default,,0,0,0,,about whether I should drop
Dialogue: 0,0:17:42.87,0:17:44.15,Default,,0,0,0,,every other frame, or just the
Dialogue: 0,0:17:44.15,0:17:45.45,Default,,0,0,0,,first half, or just the second
Dialogue: 0,0:17:45.45,0:17:46.20,Default,,0,0,0,,half.
Dialogue: 0,0:17:46.38,0:17:47.81,Default,,0,0,0,,So, let's fix this problem too.
Dialogue: 0,0:17:47.81,0:17:50.52,Default,,0,0,0,,We can fix that with a concept
Dialogue: 0,0:17:50.52,0:17:52.19,Default,,0,0,0,,known as temporal levels, and
Dialogue: 0,0:17:52.19,0:17:53.61,Default,,0,0,0,,this allows us to organize
Dialogue: 0,0:17:53.61,0:17:55.37,Default,,0,0,0,,frames about which ones to drop
Dialogue: 0,0:17:55.37,0:17:55.85,Default,,0,0,0,,first.
Dialogue: 0,0:17:56.15,0:17:57.30,Default,,0,0,0,,So, let's go ahead and re-encode
Dialogue: 0,0:17:57.30,0:17:57.89,Default,,0,0,0,,our content.
Dialogue: 0,0:17:57.96,0:18:01.78,Default,,0,0,0,,And you can already see that
Dialogue: 0,0:18:01.78,0:18:03.35,Default,,0,0,0,,this is way more organized.
Dialogue: 0,0:18:03.52,0:18:05.20,Default,,0,0,0,,So, first we drop temporal level
Dialogue: 0,0:18:05.20,0:18:06.67,Default,,0,0,0,,three, and then two, and then
Dialogue: 0,0:18:06.67,0:18:07.74,Default,,0,0,0,,one, and there's no guessing
Dialogue: 0,0:18:07.74,0:18:08.14,Default,,0,0,0,,involved.
Dialogue: 0,0:18:08.23,0:18:09.16,Default,,0,0,0,,So, this really helps.
Dialogue: 0,0:18:09.66,0:18:10.58,Default,,0,0,0,,Now, let's throw in our frame
Dialogue: 0,0:18:10.58,0:18:11.20,Default,,0,0,0,,references.
Dialogue: 0,0:18:12.47,0:18:13.63,Default,,0,0,0,,And you can already see there's
Dialogue: 0,0:18:13.63,0:18:15.21,Default,,0,0,0,,a big difference here, is that
Dialogue: 0,0:18:15.21,0:18:16.43,Default,,0,0,0,,the reference frames are much
Dialogue: 0,0:18:16.43,0:18:17.42,Default,,0,0,0,,closer together and they're
Dialogue: 0,0:18:17.42,0:18:18.60,Default,,0,0,0,,often referring to frames that
Dialogue: 0,0:18:18.60,0:18:19.84,Default,,0,0,0,,are just before, or just
Dialogue: 0,0:18:19.84,0:18:20.43,Default,,0,0,0,,afterwards.
Dialogue: 0,0:18:20.52,0:18:21.50,Default,,0,0,0,,So, this really improves
Dialogue: 0,0:18:21.50,0:18:21.94,Default,,0,0,0,,compression.
Dialogue: 0,0:18:22.95,0:18:24.16,Default,,0,0,0,,Now, let's go through and let's
Dialogue: 0,0:18:24.16,0:18:25.27,Default,,0,0,0,,say we have our same decoder
Dialogue: 0,0:18:25.27,0:18:26.75,Default,,0,0,0,,that can only handle 30 frames a
Dialogue: 0,0:18:26.75,0:18:27.03,Default,,0,0,0,,second.
Dialogue: 0,0:18:27.19,0:18:28.43,Default,,0,0,0,,We need to drop some frames.
Dialogue: 0,0:18:29.12,0:18:29.86,Default,,0,0,0,,Well, there's no guessing
Dialogue: 0,0:18:29.86,0:18:30.25,Default,,0,0,0,,involved.
Dialogue: 0,0:18:30.80,0:18:32.05,Default,,0,0,0,,We dropped temporal level three.
Dialogue: 0,0:18:32.29,0:18:35.16,Default,,0,0,0,,Now we're down to 120 frames a
Dialogue: 0,0:18:35.16,0:18:35.42,Default,,0,0,0,,second.
Dialogue: 0,0:18:35.42,0:18:37.41,Default,,0,0,0,,Let's drop down to level one.
Dialogue: 0,0:18:37.46,0:18:40.44,Default,,0,0,0,,Now we're down to 60, and now we
Dialogue: 0,0:18:40.44,0:18:42.16,Default,,0,0,0,,have a level that our decoder
Dialogue: 0,0:18:42.16,0:18:42.99,Default,,0,0,0,,can actually handle.
Dialogue: 0,0:18:43.40,0:18:45.76,Default,,0,0,0,,So, this reduces guessing with
Dialogue: 0,0:18:45.76,0:18:46.26,Default,,0,0,0,,frame dropping.
Dialogue: 0,0:18:47.62,0:18:48.42,Default,,0,0,0,,Let's go over what we've
Dialogue: 0,0:18:48.42,0:18:48.83,Default,,0,0,0,,learned.
Dialogue: 0,0:18:49.07,0:18:50.63,Default,,0,0,0,,So, with HEVC hierarchical
Dialogue: 0,0:18:50.63,0:18:51.79,Default,,0,0,0,,encoding, we have improved
Dialogue: 0,0:18:51.79,0:18:52.97,Default,,0,0,0,,temporal scalability.
Dialogue: 0,0:18:53.42,0:18:54.41,Default,,0,0,0,,There's a much more obvious
Dialogue: 0,0:18:54.41,0:18:55.51,Default,,0,0,0,,frame dropping pattern and it
Dialogue: 0,0:18:55.51,0:18:57.55,Default,,0,0,0,,removes frame drop guessing
Dialogue: 0,0:18:57.55,0:18:58.27,Default,,0,0,0,,during playback.
Dialogue: 0,0:18:58.79,0:19:00.31,Default,,0,0,0,,We also have improved motion
Dialogue: 0,0:19:00.31,0:19:01.99,Default,,0,0,0,,compensation, the reference
Dialogue: 0,0:19:01.99,0:19:03.30,Default,,0,0,0,,frames are much closer to each
Dialogue: 0,0:19:03.30,0:19:04.80,Default,,0,0,0,,other, so we can use more parts
Dialogue: 0,0:19:04.80,0:19:06.00,Default,,0,0,0,,of other frames and it also
Dialogue: 0,0:19:06.00,0:19:06.81,Default,,0,0,0,,improves compression.
Dialogue: 0,0:19:07.29,0:19:08.38,Default,,0,0,0,,We're also using file
Dialogue: 0,0:19:08.38,0:19:09.81,Default,,0,0,0,,annotations and for those of you
Dialogue: 0,0:19:09.81,0:19:11.43,Default,,0,0,0,,who like to read specs, check
Dialogue: 0,0:19:11.43,0:19:14.15,Default,,0,0,0,,out MPEG-4, Part 15 section 8.4
Dialogue: 0,0:19:14.47,0:19:15.83,Default,,0,0,0,,and basically we're using sample
Dialogue: 0,0:19:15.83,0:19:17.00,Default,,0,0,0,,groups, so no bitstream is
Dialogue: 0,0:19:17.03,0:19:18.16,Default,,0,0,0,,parsing -- no, sorry.
Dialogue: 0,0:19:18.72,0:19:20.24,Default,,0,0,0,,We're using sample groups so no
Dialogue: 0,0:19:20.24,0:19:21.78,Default,,0,0,0,,bitstream parsing is necessary
Dialogue: 0,0:19:21.78,0:19:22.99,Default,,0,0,0,,to get at this information.
Dialogue: 0,0:19:23.13,0:19:24.06,Default,,0,0,0,,So, that really helps.
Dialogue: 0,0:19:24.55,0:19:25.09,Default,,0,0,0,,All right.
Dialogue: 0,0:19:25.09,0:19:26.40,Default,,0,0,0,,How do we opt-in to this?
Dialogue: 0,0:19:27.28,0:19:28.45,Default,,0,0,0,,So you want to opt-in to this if
Dialogue: 0,0:19:28.45,0:19:29.53,Default,,0,0,0,,you want to create compatible
Dialogue: 0,0:19:29.53,0:19:31.02,Default,,0,0,0,,high frame rate content and
Dialogue: 0,0:19:31.02,0:19:32.32,Default,,0,0,0,,there's two properties you
Dialogue: 0,0:19:32.32,0:19:32.85,Default,,0,0,0,,should set.
Dialogue: 0,0:19:33.14,0:19:34.55,Default,,0,0,0,,You set the base layer and
Dialogue: 0,0:19:34.55,0:19:35.38,Default,,0,0,0,,capture frame rate.
Dialogue: 0,0:19:36.01,0:19:36.83,Default,,0,0,0,,First check that they're
Dialogue: 0,0:19:36.83,0:19:38.09,Default,,0,0,0,,supported on the encoder you're
Dialogue: 0,0:19:38.09,0:19:39.53,Default,,0,0,0,,using, then set the
Dialogue: 0,0:19:39.53,0:19:41.17,Default,,0,0,0,,BaseLayerFrameRate, this is the
Dialogue: 0,0:19:41.17,0:19:43.07,Default,,0,0,0,,temporal level 0 frame rate, in
Dialogue: 0,0:19:43.07,0:19:44.23,Default,,0,0,0,,our previous example this was
Dialogue: 0,0:19:44.23,0:19:45.85,Default,,0,0,0,,the 30 frames a second, and then
Dialogue: 0,0:19:45.85,0:19:47.39,Default,,0,0,0,,set the ExpectedFrameRate, in
Dialogue: 0,0:19:47.39,0:19:48.92,Default,,0,0,0,,our previous example this was
Dialogue: 0,0:19:48.92,0:19:50.26,Default,,0,0,0,,240 frames a second.
Dialogue: 0,0:19:50.88,0:19:52.45,Default,,0,0,0,,The base layer must be decoded,
Dialogue: 0,0:19:52.57,0:19:53.79,Default,,0,0,0,,and we can decode or drop other
Dialogue: 0,0:19:53.79,0:19:54.25,Default,,0,0,0,,levels.
Dialogue: 0,0:19:54.94,0:19:56.23,Default,,0,0,0,,So, now that you're all experts
Dialogue: 0,0:19:56.23,0:19:58.01,Default,,0,0,0,,in hierarchical encoding, let's
Dialogue: 0,0:19:58.01,0:19:59.38,Default,,0,0,0,,move it over to Brad for the
Dialogue: 0,0:19:59.38,0:20:00.36,Default,,0,0,0,,image side of things.
Dialogue: 0,0:20:00.46,0:20:00.94,Default,,0,0,0,,Thank you.
Dialogue: 0,0:20:01.52,0:20:06.73,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:20:07.23,0:20:07.83,Default,,0,0,0,,>> Thanks, Erik.
Dialogue: 0,0:20:08.15,0:20:09.42,Default,,0,0,0,,I'm Brad Ford from the camera
Dialogue: 0,0:20:09.42,0:20:11.58,Default,,0,0,0,,software team, and I get to talk
Dialogue: 0,0:20:11.58,0:20:12.57,Default,,0,0,0,,to you about the other
Dialogue: 0,0:20:12.57,0:20:14.05,Default,,0,0,0,,four-letter acronym that begins
Dialogue: 0,0:20:14.05,0:20:18.42,Default,,0,0,0,,with HE, Here's the agenda for
Dialogue: 0,0:20:18.42,0:20:19.36,Default,,0,0,0,,the rest of the session.
Dialogue: 0,0:20:19.72,0:20:20.81,Default,,0,0,0,,First, we're going to cover what
Dialogue: 0,0:20:20.81,0:20:22.73,Default,,0,0,0,,is HEIF at high level.
Dialogue: 0,0:20:22.86,0:20:24.57,Default,,0,0,0,,We'll start at the very lowest
Dialogue: 0,0:20:24.57,0:20:25.91,Default,,0,0,0,,level when we talk about reading
Dialogue: 0,0:20:25.91,0:20:27.94,Default,,0,0,0,,and writing files with HEIF.
Dialogue: 0,0:20:28.46,0:20:29.68,Default,,0,0,0,,Then we'll go up to the top of
Dialogue: 0,0:20:29.68,0:20:31.09,Default,,0,0,0,,the stack and talk about how to
Dialogue: 0,0:20:31.09,0:20:33.13,Default,,0,0,0,,use general use cases and common
Dialogue: 0,0:20:33.13,0:20:34.99,Default,,0,0,0,,scenarios with HEIF, and we'll
Dialogue: 0,0:20:34.99,0:20:36.28,Default,,0,0,0,,end with a topic that's most
Dialogue: 0,0:20:36.28,0:20:37.63,Default,,0,0,0,,dear, near and dear to me, which
Dialogue: 0,0:20:37.63,0:20:38.54,Default,,0,0,0,,is capturing HEIF.
Dialogue: 0,0:20:39.55,0:20:41.05,Default,,0,0,0,,So, first off, what is HEIF?
Dialogue: 0,0:20:42.34,0:20:44.26,Default,,0,0,0,,HEIF is the High Efficiency
Dialogue: 0,0:20:44.26,0:20:46.47,Default,,0,0,0,,Image File Format.
Dialogue: 0,0:20:46.94,0:20:48.81,Default,,0,0,0,,The second F is implied and
Dialogue: 0,0:20:48.81,0:20:49.22,Default,,0,0,0,,silent.
Dialogue: 0,0:20:49.44,0:20:50.79,Default,,0,0,0,,You don't need to call it HEIF
Dialogue: 0,0:20:50.79,0:20:51.56,Default,,0,0,0,,[extra F sound].
Dialogue: 0,0:20:51.56,0:20:53.34,Default,,0,0,0,,You'll just embarrass yourself
Dialogue: 0,0:20:53.34,0:20:54.36,Default,,0,0,0,,in front of your compressionist
Dialogue: 0,0:20:54.36,0:20:55.14,Default,,0,0,0,,friends if you do that.
Dialogue: 0,0:20:55.71,0:20:57.44,Default,,0,0,0,,It's a modern container format
Dialogue: 0,0:20:57.44,0:20:58.87,Default,,0,0,0,,for still images, and image
Dialogue: 0,0:20:58.87,0:20:59.55,Default,,0,0,0,,sequences.
Dialogue: 0,0:21:00.14,0:21:02.16,Default,,0,0,0,,It's part of the MPEG H Part 12
Dialogue: 0,0:21:02.16,0:21:04.22,Default,,0,0,0,,specification, and by way of
Dialogue: 0,0:21:04.22,0:21:05.85,Default,,0,0,0,,curiosity it was proposed in
Dialogue: 0,0:21:05.85,0:21:08.31,Default,,0,0,0,,2013 and it was ratified in
Dialogue: 0,0:21:08.31,0:21:11.16,Default,,0,0,0,,summer of 2015, just 1.5 years
Dialogue: 0,0:21:11.16,0:21:11.53,Default,,0,0,0,,later.
Dialogue: 0,0:21:12.35,0:21:13.30,Default,,0,0,0,,If any of you know anything
Dialogue: 0,0:21:13.30,0:21:15.28,Default,,0,0,0,,about standards organizations, a
Dialogue: 0,0:21:15.28,0:21:16.52,Default,,0,0,0,,year and a half is kind of like
Dialogue: 0,0:21:16.64,0:21:18.22,Default,,0,0,0,,two days in real people time.
Dialogue: 0,0:21:18.22,0:21:19.02,Default,,0,0,0,,So, you know it must be an
Dialogue: 0,0:21:19.07,0:21:21.86,Default,,0,0,0,,awesome spec. The technical
Dialogue: 0,0:21:21.86,0:21:22.94,Default,,0,0,0,,detail I'm sure your most
Dialogue: 0,0:21:22.94,0:21:24.21,Default,,0,0,0,,interested in and the reasons
Dialogue: 0,0:21:24.21,0:21:26.06,Default,,0,0,0,,that you came today is how to
Dialogue: 0,0:21:26.06,0:21:26.68,Default,,0,0,0,,pronounce it.
Dialogue: 0,0:21:27.72,0:21:27.98,Default,,0,0,0,,So-- .
Dialogue: 0,0:21:28.52,0:21:32.62,Default,,0,0,0,,[ Laughter and Applause ]
Dialogue: 0,0:21:33.12,0:21:34.42,Default,,0,0,0,,I use the scientific method, I
Dialogue: 0,0:21:34.57,0:21:35.89,Default,,0,0,0,,pulled all the engineers on my
Dialogue: 0,0:21:35.89,0:21:37.77,Default,,0,0,0,,floor and the voting was largely
Dialogue: 0,0:21:37.77,0:21:38.99,Default,,0,0,0,,along party lines.
Dialogue: 0,0:21:39.46,0:21:41.59,Default,,0,0,0,,The German speaker said "hife",
Dialogue: 0,0:21:42.03,0:21:44.17,Default,,0,0,0,,the French said "eff", and the
Dialogue: 0,0:21:44.17,0:21:45.85,Default,,0,0,0,,Russian said "heef".
Dialogue: 0,0:21:45.85,0:21:47.91,Default,,0,0,0,,And "heef" was the runaway
Dialogue: 0,0:21:47.91,0:21:48.42,Default,,0,0,0,,winner though.
Dialogue: 0,0:21:48.84,0:21:50.49,Default,,0,0,0,,That's "heef" as in I can't
Dialogue: 0,0:21:50.49,0:21:52.58,Default,,0,0,0,,belief how big, or how small the
Dialogue: 0,0:21:52.58,0:21:53.07,Default,,0,0,0,,files are.
Dialogue: 0,0:21:53.99,0:21:55.95,Default,,0,0,0,,Now, my Finnish office-mate was
Dialogue: 0,0:21:55.95,0:21:57.55,Default,,0,0,0,,quick to point out that Nokia
Dialogue: 0,0:21:57.55,0:21:58.69,Default,,0,0,0,,researchers were the ones that
Dialogue: 0,0:21:58.69,0:22:00.19,Default,,0,0,0,,came up with the spec, so the
Dialogue: 0,0:22:00.19,0:22:01.67,Default,,0,0,0,,Finnish pronunciation should
Dialogue: 0,0:22:01.67,0:22:03.85,Default,,0,0,0,,win, that would be the 1 percent
Dialogue: 0,0:22:03.98,0:22:04.54,Default,,0,0,0,,"hafe".
Dialogue: 0,0:22:07.50,0:22:08.81,Default,,0,0,0,,Well, as for me and my floor
Dialogue: 0,0:22:08.81,0:22:09.78,Default,,0,0,0,,we're going to call it "heef".
Dialogue: 0,0:22:10.18,0:22:12.55,Default,,0,0,0,,It can use HEVC intra-encoding,
Dialogue: 0,0:22:12.64,0:22:14.33,Default,,0,0,0,,which unsurprisingly compresses
Dialogue: 0,0:22:14.33,0:22:15.86,Default,,0,0,0,,much better than the 20-year-old
Dialogue: 0,0:22:16.04,0:22:18.75,Default,,0,0,0,,JPEG, two times as well as a
Dialogue: 0,0:22:18.75,0:22:19.37,Default,,0,0,0,,matter of fact.
Dialogue: 0,0:22:19.73,0:22:21.41,Default,,0,0,0,,That's an average of two times
Dialogue: 0,0:22:21.41,0:22:22.91,Default,,0,0,0,,smaller, not up to two times
Dialogue: 0,0:22:22.91,0:22:23.32,Default,,0,0,0,,smaller.
Dialogue: 0,0:22:23.84,0:22:25.88,Default,,0,0,0,,We used qualitative analysis on
Dialogue: 0,0:22:25.88,0:22:27.50,Default,,0,0,0,,a large data set of images to
Dialogue: 0,0:22:27.50,0:22:29.58,Default,,0,0,0,,arrive at this number, ensuring
Dialogue: 0,0:22:29.58,0:22:32.13,Default,,0,0,0,,visually equal quality to JPEG.
Dialogue: 0,0:22:33.22,0:22:35.28,Default,,0,0,0,,It supports chopping up an image
Dialogue: 0,0:22:35.28,0:22:36.89,Default,,0,0,0,,and compressing it individual
Dialogue: 0,0:22:36.89,0:22:37.54,Default,,0,0,0,,tiles.
Dialogue: 0,0:22:38.06,0:22:39.34,Default,,0,0,0,,This allows for more efficient
Dialogue: 0,0:22:39.34,0:22:41.46,Default,,0,0,0,,decompression of large images in
Dialogue: 0,0:22:41.46,0:22:42.13,Default,,0,0,0,,sections.
Dialogue: 0,0:22:43.36,0:22:45.11,Default,,0,0,0,,HEIF also has first class
Dialogue: 0,0:22:45.11,0:22:47.04,Default,,0,0,0,,support for auxiliary images,
Dialogue: 0,0:22:47.29,0:22:49.37,Default,,0,0,0,,such as alpha, disparity, or
Dialogue: 0,0:22:49.37,0:22:50.17,Default,,0,0,0,,depth maps.
Dialogue: 0,0:22:51.58,0:22:52.45,Default,,0,0,0,,Here's a gray scale
Dialogue: 0,0:22:52.45,0:22:54.13,Default,,0,0,0,,visualization of the depth map
Dialogue: 0,0:22:54.17,0:22:55.33,Default,,0,0,0,,that's embedded in this HEIF
Dialogue: 0,0:22:55.33,0:22:55.71,Default,,0,0,0,,file.
Dialogue: 0,0:22:56.63,0:22:58.12,Default,,0,0,0,,Having depth information opens
Dialogue: 0,0:22:58.12,0:22:59.49,Default,,0,0,0,,up a world of possibilities for
Dialogue: 0,0:22:59.49,0:23:01.39,Default,,0,0,0,,image editing, such as applying
Dialogue: 0,0:23:01.39,0:23:02.17,Default,,0,0,0,,different effects to the
Dialogue: 0,0:23:02.17,0:23:04.00,Default,,0,0,0,,background and foreground like
Dialogue: 0,0:23:04.00,0:23:04.38,Default,,0,0,0,,this.
Dialogue: 0,0:23:05.69,0:23:07.23,Default,,0,0,0,,Here I've applied the Noir black
Dialogue: 0,0:23:07.23,0:23:08.65,Default,,0,0,0,,and white filter to background,
Dialogue: 0,0:23:08.98,0:23:10.07,Default,,0,0,0,,and the fade filter to the
Dialogue: 0,0:23:10.07,0:23:10.61,Default,,0,0,0,,foreground.
Dialogue: 0,0:23:10.61,0:23:11.46,Default,,0,0,0,,So, notice that the little
Dialogue: 0,0:23:11.46,0:23:13.13,Default,,0,0,0,,girl's tights are still in pink,
Dialogue: 0,0:23:13.13,0:23:14.61,Default,,0,0,0,,while everything behind is in
Dialogue: 0,0:23:14.61,0:23:15.03,Default,,0,0,0,,Noir.
Dialogue: 0,0:23:15.96,0:23:17.34,Default,,0,0,0,,Knowing the gradations of depth,
Dialogue: 0,0:23:17.34,0:23:19.01,Default,,0,0,0,,I can even move the switch-over
Dialogue: 0,0:23:19.01,0:23:21.28,Default,,0,0,0,,point of the filters like this,
Dialogue: 0,0:23:21.51,0:23:22.77,Default,,0,0,0,,keep an eye on her flower.
Dialogue: 0,0:23:24.13,0:23:25.16,Default,,0,0,0,,Now, just her hand and the
Dialogue: 0,0:23:25.16,0:23:26.25,Default,,0,0,0,,flower are in color, while
Dialogue: 0,0:23:26.25,0:23:27.28,Default,,0,0,0,,everything else is black and
Dialogue: 0,0:23:27.28,0:23:27.56,Default,,0,0,0,,white.
Dialogue: 0,0:23:28.81,0:23:30.03,Default,,0,0,0,,You can even control foreground
Dialogue: 0,0:23:30.03,0:23:31.09,Default,,0,0,0,,and background lighting
Dialogue: 0,0:23:31.19,0:23:32.76,Default,,0,0,0,,separately, exposure, such as
Dialogue: 0,0:23:33.04,0:23:33.48,Default,,0,0,0,,this.
Dialogue: 0,0:23:34.92,0:23:35.88,Default,,0,0,0,,Now, she looks like you
Dialogue: 0,0:23:35.88,0:23:37.27,Default,,0,0,0,,Photoshopped her into her very
Dialogue: 0,0:23:37.27,0:23:37.81,Default,,0,0,0,,own photo.
Dialogue: 0,0:23:38.55,0:23:39.56,Default,,0,0,0,,I'm not saying you should do it,
Dialogue: 0,0:23:39.56,0:23:40.49,Default,,0,0,0,,I'm saying you could do it.
Dialogue: 0,0:23:41.83,0:23:43.50,Default,,0,0,0,,That was just a teaser for a
Dialogue: 0,0:23:43.50,0:23:45.88,Default,,0,0,0,,two-part session that we had on
Dialogue: 0,0:23:45.88,0:23:47.51,Default,,0,0,0,,depth, and that's sessions 507
Dialogue: 0,0:23:47.51,0:23:48.22,Default,,0,0,0,,and 508.
Dialogue: 0,0:23:48.22,0:23:49.16,Default,,0,0,0,,I hope you'll make some time to
Dialogue: 0,0:23:49.16,0:23:50.07,Default,,0,0,0,,look at those videos.
Dialogue: 0,0:23:51.25,0:23:53.05,Default,,0,0,0,,When it comes to metadata, HEIF
Dialogue: 0,0:23:53.32,0:23:55.24,Default,,0,0,0,,has a great compatibility story.
Dialogue: 0,0:23:55.38,0:23:56.84,Default,,0,0,0,,It supports industry standard
Dialogue: 0,0:23:56.84,0:23:59.32,Default,,0,0,0,,Exif and xmp as first-class
Dialogue: 0,0:23:59.32,0:23:59.84,Default,,0,0,0,,citizens.
Dialogue: 0,0:24:01.06,0:24:02.68,Default,,0,0,0,,HEIF isn't just for single
Dialogue: 0,0:24:02.68,0:24:05.76,Default,,0,0,0,,images, it also supports image
Dialogue: 0,0:24:05.76,0:24:07.80,Default,,0,0,0,,sequences such as bursts,
Dialogue: 0,0:24:08.11,0:24:10.58,Default,,0,0,0,,exposure brackets, focus stacks.
Dialogue: 0,0:24:11.26,0:24:12.56,Default,,0,0,0,,It also has affordances for
Dialogue: 0,0:24:12.56,0:24:14.69,Default,,0,0,0,,mixed media, such as audio and
Dialogue: 0,0:24:14.69,0:24:15.50,Default,,0,0,0,,video tracks.
Dialogue: 0,0:24:17.31,0:24:18.35,Default,,0,0,0,,Let's do a demo, shall we?
Dialogue: 0,0:24:19.63,0:24:21.54,Default,,0,0,0,,Okay, this is a showcase that
Dialogue: 0,0:24:21.54,0:24:22.97,Default,,0,0,0,,takes place in Apple's very own
Dialogue: 0,0:24:22.97,0:24:23.57,Default,,0,0,0,,Photos app.
Dialogue: 0,0:24:30.58,0:24:31.33,Default,,0,0,0,,All right, I'm going to start
Dialogue: 0,0:24:31.33,0:24:34.02,Default,,0,0,0,,with a pano and this is a nice
Dialogue: 0,0:24:34.02,0:24:36.16,Default,,0,0,0,,looking pano, this one is from
Dialogue: 0,0:24:36.16,0:24:37.77,Default,,0,0,0,,Pothole Dome in Yosemite.
Dialogue: 0,0:24:38.26,0:24:40.14,Default,,0,0,0,,It looks great, it's sort of
Dialogue: 0,0:24:40.42,0:24:41.78,Default,,0,0,0,,what you'd expect from a pano
Dialogue: 0,0:24:41.78,0:24:43.60,Default,,0,0,0,,until you start zooming in.
Dialogue: 0,0:24:44.28,0:24:45.57,Default,,0,0,0,,So, let's do that.
Dialogue: 0,0:24:46.37,0:24:47.50,Default,,0,0,0,,Zoom in a bit.
Dialogue: 0,0:24:48.32,0:24:49.72,Default,,0,0,0,,Looks nice, let's zoom in a
Dialogue: 0,0:24:49.72,0:24:50.34,Default,,0,0,0,,little more.
Dialogue: 0,0:24:51.18,0:24:52.64,Default,,0,0,0,,And then zoom in a little more.
Dialogue: 0,0:24:53.78,0:24:55.25,Default,,0,0,0,,And zoom in a little more.
Dialogue: 0,0:24:56.23,0:24:57.46,Default,,0,0,0,,And keep zooming.
Dialogue: 0,0:24:58.14,0:25:00.26,Default,,0,0,0,,And keep zooming, oh my gosh I
Dialogue: 0,0:25:00.26,0:25:01.73,Default,,0,0,0,,can see what the speed limit is,
Dialogue: 0,0:25:02.43,0:25:03.98,Default,,0,0,0,,and wow.
Dialogue: 0,0:25:04.52,0:25:09.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:25:10.05,0:25:11.55,Default,,0,0,0,,There are cars there, and there
Dialogue: 0,0:25:11.55,0:25:13.31,Default,,0,0,0,,are Porta Potties.
Dialogue: 0,0:25:13.37,0:25:14.69,Default,,0,0,0,,I can even go and take a look at
Dialogue: 0,0:25:14.69,0:25:15.82,Default,,0,0,0,,the peaks in the background.
Dialogue: 0,0:25:18.38,0:25:20.37,Default,,0,0,0,,Notice how it snaps into clarity
Dialogue: 0,0:25:20.37,0:25:20.90,Default,,0,0,0,,as I go.
Dialogue: 0,0:25:21.47,0:25:24.81,Default,,0,0,0,,This is actually a 2.9 gigapixel
Dialogue: 0,0:25:24.96,0:25:25.36,Default,,0,0,0,,pano.
Dialogue: 0,0:25:25.83,0:25:28.14,Default,,0,0,0,,It's 91,000 pixels by about
Dialogue: 0,0:25:28.21,0:25:29.86,Default,,0,0,0,,32,000 pixels.
Dialogue: 0,0:25:30.48,0:25:32.38,Default,,0,0,0,,The RGB TIFF file for this is
Dialogue: 0,0:25:32.38,0:25:33.82,Default,,0,0,0,,well over 2 gigabytes and I
Dialogue: 0,0:25:33.82,0:25:35.79,Default,,0,0,0,,assured it brings any fast Mac
Dialogue: 0,0:25:35.84,0:25:38.57,Default,,0,0,0,,to its knees, whereas the HEIF
Dialogue: 0,0:25:38.57,0:25:41.21,Default,,0,0,0,,file is 160 megabytes, you
Dialogue: 0,0:25:41.21,0:25:42.87,Default,,0,0,0,,literally cannot do this with
Dialogue: 0,0:25:42.87,0:25:45.03,Default,,0,0,0,,JPEG, since JPEG maxes out at
Dialogue: 0,0:25:45.11,0:25:47.40,Default,,0,0,0,,64k by 64k pixels.
Dialogue: 0,0:25:47.99,0:25:49.38,Default,,0,0,0,,HEIF does not max out.
Dialogue: 0,0:25:49.90,0:25:52.06,Default,,0,0,0,,It supports arbitrarily large
Dialogue: 0,0:25:52.48,0:25:55.21,Default,,0,0,0,,files and it keeps the memory in
Dialogue: 0,0:25:55.21,0:25:56.93,Default,,0,0,0,,check by efficiently loading and
Dialogue: 0,0:25:56.93,0:25:58.02,Default,,0,0,0,,unloading tiles.
Dialogue: 0,0:25:58.38,0:25:59.57,Default,,0,0,0,,So, while I have this enormous
Dialogue: 0,0:25:59.60,0:26:01.12,Default,,0,0,0,,data sitting in front of me, I'm
Dialogue: 0,0:26:01.12,0:26:02.39,Default,,0,0,0,,never using more than 70
Dialogue: 0,0:26:02.39,0:26:04.39,Default,,0,0,0,,megabytes of memory at a time in
Dialogue: 0,0:26:04.39,0:26:05.01,Default,,0,0,0,,the Photos app.
Dialogue: 0,0:26:05.34,0:26:07.32,Default,,0,0,0,,So, it's responsive and I can
Dialogue: 0,0:26:07.32,0:26:08.15,Default,,0,0,0,,zoom in and zoom out.
Dialogue: 0,0:26:08.15,0:26:09.20,Default,,0,0,0,,I could do this all day long,
Dialogue: 0,0:26:09.30,0:26:10.24,Default,,0,0,0,,but I should probably go back to
Dialogue: 0,0:26:10.24,0:26:10.63,Default,,0,0,0,,slides.
Dialogue: 0,0:26:12.52,0:26:15.50,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:26:19.23,0:26:23.14,Default,,0,0,0,,On all iOS 11 and macOS 10.13
Dialogue: 0,0:26:23.14,0:26:24.86,Default,,0,0,0,,supported hardware, we read and
Dialogue: 0,0:26:24.86,0:26:26.82,Default,,0,0,0,,decode three different flavors
Dialogue: 0,0:26:26.82,0:26:28.05,Default,,0,0,0,,of HEIF.
Dialogue: 0,0:26:28.14,0:26:29.26,Default,,0,0,0,,The three different extensions
Dialogue: 0,0:26:29.26,0:26:30.47,Default,,0,0,0,,you see here relate to how the
Dialogue: 0,0:26:30.47,0:26:32.20,Default,,0,0,0,,main image in the file is
Dialogue: 0,0:26:32.20,0:26:32.68,Default,,0,0,0,,encoded.
Dialogue: 0,0:26:34.42,0:26:37.94,Default,,0,0,0,,For HEIC, .HEIC also the UTI of
Dialogue: 0,0:26:37.94,0:26:39.89,Default,,0,0,0,,public.heic that refers to HEIF
Dialogue: 0,0:26:39.89,0:26:41.83,Default,,0,0,0,,files in which the main image is
Dialogue: 0,0:26:41.83,0:26:43.40,Default,,0,0,0,,compressed with HEVC.
Dialogue: 0,0:26:44.16,0:26:46.75,Default,,0,0,0,,The second flavor is AVCI, in
Dialogue: 0,0:26:46.75,0:26:47.96,Default,,0,0,0,,which the main images is
Dialogue: 0,0:26:47.96,0:26:51.02,Default,,0,0,0,,compressed with H.264, and then
Dialogue: 0,0:26:51.02,0:26:52.58,Default,,0,0,0,,the .HEIF extension is reserved
Dialogue: 0,0:26:52.58,0:26:55.11,Default,,0,0,0,,for anything else, could be JPEG
Dialogue: 0,0:26:55.11,0:26:56.25,Default,,0,0,0,,inside, could be any of the
Dialogue: 0,0:26:56.25,0:26:57.23,Default,,0,0,0,,supported codecs.
Dialogue: 0,0:26:59.17,0:27:01.05,Default,,0,0,0,,We only support one form of HEIF
Dialogue: 0,0:27:01.05,0:27:03.01,Default,,0,0,0,,for encode and writing, and
Dialogue: 0,0:27:03.01,0:27:04.96,Default,,0,0,0,,that's the HEIC format, in other
Dialogue: 0,0:27:04.96,0:27:06.50,Default,,0,0,0,,words the ones in which you use
Dialogue: 0,0:27:06.50,0:27:06.81,Default,,0,0,0,,HEVC.
Dialogue: 0,0:27:06.81,0:27:08.69,Default,,0,0,0,,We figure if you've gone far
Dialogue: 0,0:27:08.69,0:27:09.98,Default,,0,0,0,,enough to adopt the new file
Dialogue: 0,0:27:09.98,0:27:11.33,Default,,0,0,0,,container, you might as well
Dialogue: 0,0:27:11.33,0:27:12.65,Default,,0,0,0,,adopt the greatest compression
Dialogue: 0,0:27:12.65,0:27:13.51,Default,,0,0,0,,standard as well.
Dialogue: 0,0:27:14.17,0:27:15.61,Default,,0,0,0,,Support is currently limited to
Dialogue: 0,0:27:15.74,0:27:17.84,Default,,0,0,0,,iOS 11 devices with the A10
Dialogue: 0,0:27:17.84,0:27:19.64,Default,,0,0,0,,Fusion chip.
Dialogue: 0,0:27:19.88,0:27:21.04,Default,,0,0,0,,All right, let's go over to
Dialogue: 0,0:27:21.04,0:27:22.51,Default,,0,0,0,,low-level access to HEIF.
Dialogue: 0,0:27:23.14,0:27:25.04,Default,,0,0,0,,The lowest level interface on
Dialogue: 0,0:27:25.04,0:27:26.44,Default,,0,0,0,,our platform for reading and
Dialogue: 0,0:27:26.44,0:27:28.61,Default,,0,0,0,,writing images is ImageIO.
Dialogue: 0,0:27:29.13,0:27:30.74,Default,,0,0,0,,It encapsulates reading from
Dialogue: 0,0:27:30.74,0:27:32.71,Default,,0,0,0,,either a file or in-memory data
Dialogue: 0,0:27:32.71,0:27:34.40,Default,,0,0,0,,source using an object called
Dialogue: 0,0:27:34.53,0:27:35.70,Default,,0,0,0,,CGImageSource.
Dialogue: 0,0:27:36.61,0:27:38.10,Default,,0,0,0,,It also supports writing to
Dialogue: 0,0:27:38.10,0:27:40.56,Default,,0,0,0,,files or to immutable data using
Dialogue: 0,0:27:40.75,0:27:42.23,Default,,0,0,0,,CGImageDestination.
Dialogue: 0,0:27:42.90,0:27:44.04,Default,,0,0,0,,These objects have been around
Dialogue: 0,0:27:44.22,0:27:45.23,Default,,0,0,0,,for a long time.
Dialogue: 0,0:27:45.29,0:27:46.33,Default,,0,0,0,,You've probably used them.
Dialogue: 0,0:27:47.24,0:27:48.81,Default,,0,0,0,,To open a JPEG image file on
Dialogue: 0,0:27:48.81,0:27:50.30,Default,,0,0,0,,disk, this is how you would do
Dialogue: 0,0:27:50.30,0:27:51.36,Default,,0,0,0,,it using ImageIO.
Dialogue: 0,0:27:51.52,0:27:53.84,Default,,0,0,0,,First you create the URL, then
Dialogue: 0,0:27:53.84,0:27:54.28,Default,,0,0,0,,you call
Dialogue: 0,0:27:54.28,0:27:56.89,Default,,0,0,0,,CGImageSourceCreateWithURL to
Dialogue: 0,0:27:56.89,0:27:57.83,Default,,0,0,0,,create your source.
Dialogue: 0,0:27:58.28,0:27:59.62,Default,,0,0,0,,The last argument is an options
Dialogue: 0,0:27:59.62,0:28:00.74,Default,,0,0,0,,dictionary where you can
Dialogue: 0,0:28:00.74,0:28:02.27,Default,,0,0,0,,optionally pass the UTI of the
Dialogue: 0,0:28:02.27,0:28:02.78,Default,,0,0,0,,input.
Dialogue: 0,0:28:03.21,0:28:04.27,Default,,0,0,0,,It's not needed when you're
Dialogue: 0,0:28:04.27,0:28:06.11,Default,,0,0,0,,opening a file on disk, because
Dialogue: 0,0:28:06.11,0:28:07.65,Default,,0,0,0,,the UTI can be inferred from the
Dialogue: 0,0:28:07.65,0:28:09.39,Default,,0,0,0,,file path extension.
Dialogue: 0,0:28:10.29,0:28:11.88,Default,,0,0,0,,Once you've got a CGImageSource,
Dialogue: 0,0:28:12.28,0:28:13.99,Default,,0,0,0,,you can do several things with
Dialogue: 0,0:28:14.33,0:28:17.02,Default,,0,0,0,,it, such as copy the properties
Dialogue: 0,0:28:17.02,0:28:19.07,Default,,0,0,0,,at any index, that's getting
Dialogue: 0,0:28:19.17,0:28:21.67,Default,,0,0,0,,metadata out of it such as Exif.
Dialogue: 0,0:28:21.67,0:28:23.56,Default,,0,0,0,,You can also create a CGImage
Dialogue: 0,0:28:23.63,0:28:24.83,Default,,0,0,0,,from any of the images in the
Dialogue: 0,0:28:24.83,0:28:25.22,Default,,0,0,0,,file.
Dialogue: 0,0:28:25.33,0:28:27.11,Default,,0,0,0,,For JPEG there's typically only
Dialogue: 0,0:28:27.11,0:28:28.31,Default,,0,0,0,,one image in the file.
Dialogue: 0,0:28:29.02,0:28:30.43,Default,,0,0,0,,CGImage is of course like a
Dialogue: 0,0:28:30.43,0:28:32.80,Default,,0,0,0,,promise, a rendering promise.
Dialogue: 0,0:28:33.13,0:28:34.78,Default,,0,0,0,,The JPEG data can be lazily
Dialogue: 0,0:28:34.78,0:28:36.78,Default,,0,0,0,,decoded when necessary using
Dialogue: 0,0:28:36.78,0:28:38.39,Default,,0,0,0,,CGImage such as when you're
Dialogue: 0,0:28:38.39,0:28:40.40,Default,,0,0,0,,rendering it to a CG bitmap
Dialogue: 0,0:28:40.40,0:28:41.00,Default,,0,0,0,,context.
Dialogue: 0,0:28:41.68,0:28:43.11,Default,,0,0,0,,You can also get a thumbnail
Dialogue: 0,0:28:43.11,0:28:45.18,Default,,0,0,0,,image using a variety of
Dialogue: 0,0:28:45.18,0:28:45.84,Default,,0,0,0,,options.
Dialogue: 0,0:28:46.28,0:28:47.86,Default,,0,0,0,,For instance, the maximum size
Dialogue: 0,0:28:47.86,0:28:49.12,Default,,0,0,0,,that you would like, what to do
Dialogue: 0,0:28:49.12,0:28:50.21,Default,,0,0,0,,if there's none available in the
Dialogue: 0,0:28:50.21,0:28:51.99,Default,,0,0,0,,file, and when you call
Dialogue: 0,0:28:51.99,0:28:52.74,Default,,0,0,0,,CGImageSource
Dialogue: 0,0:28:52.74,0:28:54.56,Default,,0,0,0,,CreateThumbnailAtIndex it does
Dialogue: 0,0:28:54.86,0:28:55.98,Default,,0,0,0,,decode right away.
Dialogue: 0,0:28:57.90,0:28:59.43,Default,,0,0,0,,Now, here's the analogous code
Dialogue: 0,0:28:59.43,0:29:01.39,Default,,0,0,0,,for opening a .HEIC file.
Dialogue: 0,0:29:02.51,0:29:03.82,Default,,0,0,0,,Can anyone spot the differences?
Dialogue: 0,0:29:05.21,0:29:06.24,Default,,0,0,0,,Here, I'll make it easy for you.
Dialogue: 0,0:29:06.80,0:29:08.17,Default,,0,0,0,,That's it.
Dialogue: 0,0:29:09.08,0:29:12.66,Default,,0,0,0,,It's a comment and it's a file
Dialogue: 0,0:29:12.66,0:29:13.67,Default,,0,0,0,,path, that's it.
Dialogue: 0,0:29:14.15,0:29:15.46,Default,,0,0,0,,In other words, CGImageSource
Dialogue: 0,0:29:15.51,0:29:16.20,Default,,0,0,0,,just works.
Dialogue: 0,0:29:16.33,0:29:17.81,Default,,0,0,0,,The one difference you don't see
Dialogue: 0,0:29:17.81,0:29:19.40,Default,,0,0,0,,is how the HEVC is being
Dialogue: 0,0:29:19.40,0:29:19.96,Default,,0,0,0,,decoded.
Dialogue: 0,0:29:20.70,0:29:22.61,Default,,0,0,0,,On recent iOS devices and Macs
Dialogue: 0,0:29:22.61,0:29:24.00,Default,,0,0,0,,the decode is hardware
Dialogue: 0,0:29:24.00,0:29:26.06,Default,,0,0,0,,accelerated, whereas on older
Dialogue: 0,0:29:26.06,0:29:27.66,Default,,0,0,0,,devices it's done in software
Dialogue: 0,0:29:27.66,0:29:28.88,Default,,0,0,0,,and with thus be slower.
Dialogue: 0,0:29:30.11,0:29:31.52,Default,,0,0,0,,A quick word on the tiling
Dialogue: 0,0:29:31.52,0:29:32.85,Default,,0,0,0,,support that we just saw in the
Dialogue: 0,0:29:32.85,0:29:35.52,Default,,0,0,0,,demo, CGImageSource can provide
Dialogue: 0,0:29:35.52,0:29:37.59,Default,,0,0,0,,a dictionary of properties about
Dialogue: 0,0:29:37.59,0:29:38.62,Default,,0,0,0,,the image by calling
Dialogue: 0,0:29:38.77,0:29:39.82,Default,,0,0,0,,CGImageSourceCopy
Dialogue: 0,0:29:39.82,0:29:41.50,Default,,0,0,0,,PropertiesAtIndex and the
Dialogue: 0,0:29:41.50,0:29:43.43,Default,,0,0,0,,properties dictionary is a
Dialogue: 0,0:29:43.43,0:29:46.67,Default,,0,0,0,,synonym for metadata, Exif,
Dialogue: 0,0:29:46.87,0:29:48.26,Default,,0,0,0,,Apple Maker Note, et cetera.
Dialogue: 0,0:29:48.97,0:29:50.13,Default,,0,0,0,,There's also a subdictionary
Dialogue: 0,0:29:50.13,0:29:51.86,Default,,0,0,0,,called the TIFF subdictionary,
Dialogue: 0,0:29:52.20,0:29:53.89,Default,,0,0,0,,in which you'll find the size of
Dialogue: 0,0:29:53.89,0:29:55.50,Default,,0,0,0,,the encoded tiles as the tile
Dialogue: 0,0:29:55.50,0:29:56.96,Default,,0,0,0,,length and tile width.
Dialogue: 0,0:29:57.24,0:29:58.58,Default,,0,0,0,,By default they are encoded as
Dialogue: 0,0:29:58.58,0:30:00.84,Default,,0,0,0,,512 by 512 pixels.
Dialogue: 0,0:30:03.08,0:30:04.96,Default,,0,0,0,,CGImageSource provides you with
Dialogue: 0,0:30:05.01,0:30:07.34,Default,,0,0,0,,CG Images as we saw, and CGImage
Dialogue: 0,0:30:07.34,0:30:08.87,Default,,0,0,0,,has a nifty method called
Dialogue: 0,0:30:08.98,0:30:10.75,Default,,0,0,0,,cropping(to: that takes
Dialogue: 0,0:30:10.75,0:30:11.81,Default,,0,0,0,,advantage of the tiling.
Dialogue: 0,0:30:12.56,0:30:14.54,Default,,0,0,0,,This call creates a new CGImage
Dialogue: 0,0:30:14.54,0:30:16.74,Default,,0,0,0,,containing just a subsection of
Dialogue: 0,0:30:16.74,0:30:17.55,Default,,0,0,0,,another image.
Dialogue: 0,0:30:18.29,0:30:20.06,Default,,0,0,0,,This isn't a new API, but it
Dialogue: 0,0:30:20.06,0:30:21.54,Default,,0,0,0,,works really well with HEIF
Dialogue: 0,0:30:21.88,0:30:23.24,Default,,0,0,0,,where the tiles are encoded
Dialogue: 0,0:30:23.28,0:30:23.99,Default,,0,0,0,,individually.
Dialogue: 0,0:30:24.54,0:30:25.50,Default,,0,0,0,,You don't need to worry about
Dialogue: 0,0:30:25.70,0:30:27.90,Default,,0,0,0,,the underlying encoded tile
Dialogue: 0,0:30:27.90,0:30:29.40,Default,,0,0,0,,size, you can simply ask for the
Dialogue: 0,0:30:29.40,0:30:30.48,Default,,0,0,0,,subregion that you want to
Dialogue: 0,0:30:30.48,0:30:33.05,Default,,0,0,0,,display or render, and know that
Dialogue: 0,0:30:33.35,0:30:34.30,Default,,0,0,0,,under the hood you're getting
Dialogue: 0,0:30:34.30,0:30:35.68,Default,,0,0,0,,all of the tile-y goodness.
Dialogue: 0,0:30:35.68,0:30:38.08,Default,,0,0,0,,It's only decoding the tiles
Dialogue: 0,0:30:38.08,0:30:39.09,Default,,0,0,0,,that are necessary for that
Dialogue: 0,0:30:39.15,0:30:39.72,Default,,0,0,0,,subregion.
Dialogue: 0,0:30:40.33,0:30:41.91,Default,,0,0,0,,Now, let's talk about the
Dialogue: 0,0:30:41.91,0:30:42.62,Default,,0,0,0,,writing side.
Dialogue: 0,0:30:43.50,0:30:45.10,Default,,0,0,0,,Here's how you write a JPEG with
Dialogue: 0,0:30:45.10,0:30:45.68,Default,,0,0,0,,ImageIO.
Dialogue: 0,0:30:46.50,0:30:47.80,Default,,0,0,0,,You, after creating a
Dialogue: 0,0:30:47.80,0:30:49.33,Default,,0,0,0,,CGImageDestination calling
Dialogue: 0,0:30:49.33,0:30:51.37,Default,,0,0,0,,CGImageDestinationCreateWithURL,
Dialogue: 0,0:30:53.96,0:30:56.27,Default,,0,0,0,,where I should point out you do
Dialogue: 0,0:30:56.27,0:30:58.12,Default,,0,0,0,,need to specify what the UTI is.
Dialogue: 0,0:30:58.69,0:31:00.81,Default,,0,0,0,,Here I'm using AVFileType.jpg
Dialogue: 0,0:31:00.81,0:31:03.14,Default,,0,0,0,,which is the same as the UT type
Dialogue: 0,0:31:03.28,0:31:04.32,Default,,0,0,0,,public.jpg.
Dialogue: 0,0:31:05.36,0:31:07.09,Default,,0,0,0,,I'm being careful with the
Dialogue: 0,0:31:07.09,0:31:10.16,Default,,0,0,0,,result, I'm using guard let just
Dialogue: 0,0:31:10.16,0:31:11.58,Default,,0,0,0,,in case destination is nil.
Dialogue: 0,0:31:12.13,0:31:14.02,Default,,0,0,0,,Now, in the, with the current
Dialogue: 0,0:31:14.02,0:31:15.23,Default,,0,0,0,,JPEG, the only reason it would
Dialogue: 0,0:31:15.23,0:31:17.34,Default,,0,0,0,,be nil is if you asked to write
Dialogue: 0,0:31:17.34,0:31:18.46,Default,,0,0,0,,to a file that's outside your
Dialogue: 0,0:31:18.46,0:31:20.21,Default,,0,0,0,,sandbox, but to be defensive you
Dialogue: 0,0:31:20.21,0:31:21.90,Default,,0,0,0,,should really write code in this
Dialogue: 0,0:31:21.90,0:31:22.29,Default,,0,0,0,,manner.
Dialogue: 0,0:31:23.13,0:31:25.06,Default,,0,0,0,,Next, you add your CG image or
Dialogue: 0,0:31:25.06,0:31:27.28,Default,,0,0,0,,images, one at a time with
Dialogue: 0,0:31:27.28,0:31:28.33,Default,,0,0,0,,accompanying metadata if you
Dialogue: 0,0:31:28.58,0:31:29.08,Default,,0,0,0,,would like.
Dialogue: 0,0:31:29.08,0:31:30.85,Default,,0,0,0,,And then when you're done, you
Dialogue: 0,0:31:30.85,0:31:32.90,Default,,0,0,0,,call CGImageDestinationFinalize
Dialogue: 0,0:31:33.38,0:31:34.76,Default,,0,0,0,,which closes the container for
Dialogue: 0,0:31:34.76,0:31:36.21,Default,,0,0,0,,editing and then writes it to
Dialogue: 0,0:31:36.21,0:31:36.50,Default,,0,0,0,,disc.
Dialogue: 0,0:31:37.96,0:31:39.29,Default,,0,0,0,,Now, let's look at the HEIC
Dialogue: 0,0:31:39.49,0:31:39.90,Default,,0,0,0,,writing.
Dialogue: 0,0:31:40.06,0:31:41.27,Default,,0,0,0,,Again, differences are very
Dialogue: 0,0:31:41.27,0:31:41.70,Default,,0,0,0,,small.
Dialogue: 0,0:31:42.19,0:31:45.46,Default,,0,0,0,,Just the file path extension,
Dialogue: 0,0:31:45.57,0:31:47.17,Default,,0,0,0,,the UTI, the comment.
Dialogue: 0,0:31:47.75,0:31:48.86,Default,,0,0,0,,One important difference here
Dialogue: 0,0:31:48.86,0:31:50.66,Default,,0,0,0,,though between JPEG and HEIF is
Dialogue: 0,0:31:50.66,0:31:51.52,Default,,0,0,0,,that creating a
Dialogue: 0,0:31:51.52,0:31:54.81,Default,,0,0,0,,CGImageDestination will fail on
Dialogue: 0,0:31:54.81,0:31:57.01,Default,,0,0,0,,devices with no HEVC hardware
Dialogue: 0,0:31:57.01,0:31:57.60,Default,,0,0,0,,encoder.
Dialogue: 0,0:31:58.13,0:31:59.78,Default,,0,0,0,,And when it fails, destination
Dialogue: 0,0:31:59.78,0:32:00.28,Default,,0,0,0,,is nil.
Dialogue: 0,0:32:00.70,0:32:02.06,Default,,0,0,0,,So, the good defensive code that
Dialogue: 0,0:32:02.06,0:32:03.32,Default,,0,0,0,,I wrote on the previous slide,
Dialogue: 0,0:32:03.71,0:32:05.45,Default,,0,0,0,,is even more important to do
Dialogue: 0,0:32:05.52,0:32:07.61,Default,,0,0,0,,with HEVC where there is now a
Dialogue: 0,0:32:07.61,0:32:09.04,Default,,0,0,0,,new reason that the destination
Dialogue: 0,0:32:09.04,0:32:09.69,Default,,0,0,0,,might be nil.
Dialogue: 0,0:32:10.62,0:32:11.84,Default,,0,0,0,,Please always make sure that you
Dialogue: 0,0:32:11.84,0:32:13.66,Default,,0,0,0,,check this is the one and only
Dialogue: 0,0:32:13.66,0:32:15.50,Default,,0,0,0,,way to know whether writing to
Dialogue: 0,0:32:15.50,0:32:16.62,Default,,0,0,0,,HEIC is supported on your
Dialogue: 0,0:32:16.62,0:32:17.37,Default,,0,0,0,,current platform.
Dialogue: 0,0:32:19.06,0:32:20.21,Default,,0,0,0,,Also worth noting is that
Dialogue: 0,0:32:20.21,0:32:21.99,Default,,0,0,0,,ImageIO has added support for
Dialogue: 0,0:32:21.99,0:32:23.67,Default,,0,0,0,,reading and writing depth maps
Dialogue: 0,0:32:23.67,0:32:25.09,Default,,0,0,0,,as I talked about earlier.
Dialogue: 0,0:32:25.44,0:32:26.75,Default,,0,0,0,,We've done that for both HEIC
Dialogue: 0,0:32:26.75,0:32:28.86,Default,,0,0,0,,and we manipulated JPEG in
Dialogue: 0,0:32:28.86,0:32:30.63,Default,,0,0,0,,strange sorcery ways that we
Dialogue: 0,0:32:31.04,0:32:32.03,Default,,0,0,0,,probably shouldn't talk about,
Dialogue: 0,0:32:32.41,0:32:34.22,Default,,0,0,0,,I'm not going to delve deeply
Dialogue: 0,0:32:34.22,0:32:35.64,Default,,0,0,0,,into that though because it's
Dialogue: 0,0:32:35.64,0:32:37.07,Default,,0,0,0,,covered in the dedicated session
Dialogue: 0,0:32:37.07,0:32:39.54,Default,,0,0,0,,507 and 508 where we talk about
Dialogue: 0,0:32:39.61,0:32:39.95,Default,,0,0,0,,depth.
Dialogue: 0,0:32:39.95,0:32:41.23,Default,,0,0,0,,And I hope you'll go look at
Dialogue: 0,0:32:41.23,0:32:42.69,Default,,0,0,0,,those session because they're
Dialogue: 0,0:32:43.06,0:32:45.30,Default,,0,0,0,,many segues to the auxiliary
Dialogue: 0,0:32:45.30,0:32:48.15,Default,,0,0,0,,image format in HEIF.
Dialogue: 0,0:32:48.15,0:32:49.22,Default,,0,0,0,,All right, it's time to move on
Dialogue: 0,0:32:49.22,0:32:50.49,Default,,0,0,0,,to our next major topic which is
Dialogue: 0,0:32:50.62,0:32:52.11,Default,,0,0,0,,high level access to HEIF.
Dialogue: 0,0:32:52.99,0:32:55.94,Default,,0,0,0,,But before we do that, I feel
Dialogue: 0,0:32:55.94,0:32:57.81,Default,,0,0,0,,that WWDC should be a cultural
Dialogue: 0,0:32:57.81,0:32:58.87,Default,,0,0,0,,experience, culturally
Dialogue: 0,0:32:58.87,0:33:00.32,Default,,0,0,0,,enriching, not just an
Dialogue: 0,0:33:00.32,0:33:01.11,Default,,0,0,0,,educational one.
Dialogue: 0,0:33:01.11,0:33:02.27,Default,,0,0,0,,And that's why I want you to
Dialogue: 0,0:33:02.27,0:33:03.29,Default,,0,0,0,,rest your brains for a moment
Dialogue: 0,0:33:03.29,0:33:04.93,Default,,0,0,0,,with some compression poetry.
Dialogue: 0,0:33:06.23,0:33:06.52,Default,,0,0,0,,All right.
Dialogue: 0,0:33:07.40,0:33:09.18,Default,,0,0,0,,Wait for it.
Dialogue: 0,0:33:09.39,0:33:13.05,Default,,0,0,0,,JPEG is yay big, but HEIF is
Dialogue: 0,0:33:13.05,0:33:13.46,Default,,0,0,0,,brief.
Dialogue: 0,0:33:15.07,0:33:15.40,Default,,0,0,0,,[laughter] Thank you.
Dialogue: 0,0:33:16.04,0:33:18.04,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:33:18.07,0:33:19.44,Default,,0,0,0,,See it's compression poetry, so
Dialogue: 0,0:33:19.44,0:33:20.11,Default,,0,0,0,,it's small.
Dialogue: 0,0:33:20.53,0:33:21.45,Default,,0,0,0,,Did you like that?
Dialogue: 0,0:33:21.45,0:33:22.92,Default,,0,0,0,,Do you want to hear some more?
Dialogue: 0,0:33:24.07,0:33:24.95,Default,,0,0,0,,Okay, let's do another one.
Dialogue: 0,0:33:25.57,0:33:26.70,Default,,0,0,0,,Here's a compression haiku.
Dialogue: 0,0:33:29.19,0:33:33.61,Default,,0,0,0,,HEVC has twice as many syllables
Dialogue: 0,0:33:34.84,0:33:37.18,Default,,0,0,0,,as JPEG progress.
Dialogue: 0,0:33:38.17,0:33:38.48,Default,,0,0,0,,Thank you.
Dialogue: 0,0:33:38.76,0:33:39.92,Default,,0,0,0,,All right let's move on.
Dialogue: 0,0:33:41.75,0:33:42.58,Default,,0,0,0,,[applause] I'm sure they'll edit
Dialogue: 0,0:33:42.58,0:33:43.31,Default,,0,0,0,,that out later.
Dialogue: 0,0:33:44.23,0:33:45.32,Default,,0,0,0,,Okay, we're going to talk about
Dialogue: 0,0:33:45.32,0:33:46.17,Default,,0,0,0,,HEIF and PhotoKit.
Dialogue: 0,0:33:46.87,0:33:48.01,Default,,0,0,0,,PhotoKit is actually two
Dialogue: 0,0:33:48.01,0:33:49.46,Default,,0,0,0,,frameworks, it's Photos
Dialogue: 0,0:33:49.46,0:33:51.11,Default,,0,0,0,,framework and PhotosUI and it's
Dialogue: 0,0:33:51.11,0:33:52.58,Default,,0,0,0,,very high level, it's even above
Dialogue: 0,0:33:52.58,0:33:53.16,Default,,0,0,0,,UIKit.
Dialogue: 0,0:33:54.28,0:33:56.82,Default,,0,0,0,,The way that you work with HEIF
Dialogue: 0,0:33:56.82,0:33:58.44,Default,,0,0,0,,in PhotoKit when applying
Dialogue: 0,0:33:58.44,0:34:00.06,Default,,0,0,0,,adjustments we're going to cover
Dialogue: 0,0:34:00.12,0:34:01.52,Default,,0,0,0,,just briefly and we're going to
Dialogue: 0,0:34:01.52,0:34:02.51,Default,,0,0,0,,talk about how you apply
Dialogue: 0,0:34:02.51,0:34:03.76,Default,,0,0,0,,adjustments in three different
Dialogue: 0,0:34:03.76,0:34:05.50,Default,,0,0,0,,scenarios, photos, videos, and
Dialogue: 0,0:34:05.50,0:34:06.21,Default,,0,0,0,,Live Photos.
Dialogue: 0,0:34:06.50,0:34:07.71,Default,,0,0,0,,And then we'll talk about common
Dialogue: 0,0:34:07.71,0:34:09.02,Default,,0,0,0,,workflows that you would use
Dialogue: 0,0:34:09.02,0:34:10.52,Default,,0,0,0,,with PHPhotoLibrary.
Dialogue: 0,0:34:11.78,0:34:12.96,Default,,0,0,0,,Let's briefly outline the steps
Dialogue: 0,0:34:12.96,0:34:14.87,Default,,0,0,0,,involved in applying an edit or
Dialogue: 0,0:34:14.87,0:34:16.73,Default,,0,0,0,,an adjustment to an asset using
Dialogue: 0,0:34:16.73,0:34:17.35,Default,,0,0,0,,PhotoLibrary.
Dialogue: 0,0:34:18.22,0:34:19.75,Default,,0,0,0,,You ask the PHPhotoLibrary to
Dialogue: 0,0:34:19.75,0:34:21.63,Default,,0,0,0,,performChanges and in that
Dialogue: 0,0:34:21.63,0:34:23.56,Default,,0,0,0,,change request you start with a
Dialogue: 0,0:34:23.56,0:34:25.05,Default,,0,0,0,,PHAsset that you want to edit,
Dialogue: 0,0:34:25.50,0:34:26.53,Default,,0,0,0,,such as a photo.
Dialogue: 0,0:34:27.27,0:34:28.95,Default,,0,0,0,,And you call request content
Dialogue: 0,0:34:28.95,0:34:30.88,Default,,0,0,0,,editing input on the asset to
Dialogue: 0,0:34:30.88,0:34:33.31,Default,,0,0,0,,get a PHContentEditingInput.
Dialogue: 0,0:34:33.43,0:34:35.63,Default,,0,0,0,,This is the guy that gives you
Dialogue: 0,0:34:35.63,0:34:36.76,Default,,0,0,0,,access to all the media
Dialogue: 0,0:34:36.76,0:34:38.45,Default,,0,0,0,,associated with your asset such
Dialogue: 0,0:34:38.45,0:34:42.03,Default,,0,0,0,,as a UIImage, a URL, an AVAsset,
Dialogue: 0,0:34:42.47,0:34:43.54,Default,,0,0,0,,or a Live Photo.
Dialogue: 0,0:34:44.41,0:34:45.54,Default,,0,0,0,,Next you create a
Dialogue: 0,0:34:45.54,0:34:47.91,Default,,0,0,0,,PHContentEditingOutput by
Dialogue: 0,0:34:47.91,0:34:49.18,Default,,0,0,0,,calling in it with content
Dialogue: 0,0:34:49.18,0:34:49.96,Default,,0,0,0,,editing input.
Dialogue: 0,0:34:50.72,0:34:52.56,Default,,0,0,0,,The editing output tells you
Dialogue: 0,0:34:52.56,0:34:53.91,Default,,0,0,0,,where to place all of your
Dialogue: 0,0:34:53.91,0:34:55.75,Default,,0,0,0,,rendered files on disc by
Dialogue: 0,0:34:55.75,0:34:57.10,Default,,0,0,0,,providing you with a
Dialogue: 0,0:34:57.10,0:34:58.59,Default,,0,0,0,,renderContentURL.
Dialogue: 0,0:34:59.08,0:35:00.91,Default,,0,0,0,,You then perform your edits to
Dialogue: 0,0:35:00.91,0:35:02.90,Default,,0,0,0,,the media that's provided you
Dialogue: 0,0:35:02.90,0:35:04.94,Default,,0,0,0,,from the editing input, and then
Dialogue: 0,0:35:04.94,0:35:06.36,Default,,0,0,0,,you write them to the specified
Dialogue: 0,0:35:06.36,0:35:06.97,Default,,0,0,0,,location.
Dialogue: 0,0:35:07.34,0:35:10.55,Default,,0,0,0,,Finally, the PHPhotoLibrary
Dialogue: 0,0:35:10.55,0:35:12.38,Default,,0,0,0,,validates your changes and
Dialogue: 0,0:35:12.38,0:35:13.61,Default,,0,0,0,,accepts them as a whole or
Dialogue: 0,0:35:13.61,0:35:14.60,Default,,0,0,0,,rejects the change.
Dialogue: 0,0:35:16.07,0:35:18.19,Default,,0,0,0,,So, the rules with respect to
Dialogue: 0,0:35:18.19,0:35:19.45,Default,,0,0,0,,renderedOutputImages are
Dialogue: 0,0:35:19.45,0:35:21.32,Default,,0,0,0,,unchanged, but you may not been
Dialogue: 0,0:35:21.32,0:35:23.04,Default,,0,0,0,,aware that they were in force.
Dialogue: 0,0:35:23.52,0:35:26.03,Default,,0,0,0,,In iOS 10 your output images
Dialogue: 0,0:35:26.20,0:35:29.02,Default,,0,0,0,,must be rendered as JPEG with an
Dialogue: 0,0:35:29.02,0:35:31.29,Default,,0,0,0,,Exif orientation of 1, that is
Dialogue: 0,0:35:31.29,0:35:33.13,Default,,0,0,0,,if there's any rotation to be
Dialogue: 0,0:35:33.13,0:35:34.93,Default,,0,0,0,,done, it is baked into the image
Dialogue: 0,0:35:35.44,0:35:37.04,Default,,0,0,0,,in the outputRendered file.
Dialogue: 0,0:35:37.51,0:35:38.46,Default,,0,0,0,,You may have overlooked this
Dialogue: 0,0:35:38.46,0:35:40.14,Default,,0,0,0,,detail since probably 99 percent
Dialogue: 0,0:35:40.14,0:35:41.10,Default,,0,0,0,,of the content that you are
Dialogue: 0,0:35:41.10,0:35:43.20,Default,,0,0,0,,editing was provided as JPEG and
Dialogue: 0,0:35:43.35,0:35:44.75,Default,,0,0,0,,then you just outputted it to
Dialogue: 0,0:35:44.75,0:35:45.54,Default,,0,0,0,,the same format.
Dialogue: 0,0:35:45.92,0:35:46.65,Default,,0,0,0,,But now you will see a
Dialogue: 0,0:35:46.65,0:35:48.61,Default,,0,0,0,,proliferation of input content
Dialogue: 0,0:35:48.61,0:35:50.32,Default,,0,0,0,,that is HEIC, so you should be
Dialogue: 0,0:35:50.32,0:35:51.77,Default,,0,0,0,,well aware that you must still
Dialogue: 0,0:35:51.90,0:35:53.34,Default,,0,0,0,,render all of your output
Dialogue: 0,0:35:53.34,0:35:55.39,Default,,0,0,0,,content to JPEG with Exif
Dialogue: 0,0:35:55.39,0:35:56.38,Default,,0,0,0,,orientation 1.
Dialogue: 0,0:35:57.26,0:35:59.73,Default,,0,0,0,,Here's the code for it.
Dialogue: 0,0:35:59.89,0:36:01.63,Default,,0,0,0,,Make, first you make a CIImage,
Dialogue: 0,0:36:01.85,0:36:03.12,Default,,0,0,0,,this would be one way of doing
Dialogue: 0,0:36:03.12,0:36:03.26,Default,,0,0,0,,it.
Dialogue: 0,0:36:03.71,0:36:05.32,Default,,0,0,0,,You could make a CIImage from
Dialogue: 0,0:36:05.38,0:36:07.11,Default,,0,0,0,,the content editing inputs file
Dialogue: 0,0:36:07.15,0:36:10.01,Default,,0,0,0,,URL, and then apply your edits.
Dialogue: 0,0:36:10.11,0:36:12.12,Default,,0,0,0,,Here I'm doing both an
Dialogue: 0,0:36:12.12,0:36:14.29,Default,,0,0,0,,application of a filter and
Dialogue: 0,0:36:14.41,0:36:15.82,Default,,0,0,0,,baking in the orientation.
Dialogue: 0,0:36:16.34,0:36:18.76,Default,,0,0,0,,And then when I'm done, I call
Dialogue: 0,0:36:18.76,0:36:20.78,Default,,0,0,0,,ciContext's handy dandy
Dialogue: 0,0:36:20.78,0:36:23.71,Default,,0,0,0,,writeJPEGRepresentation, which
Dialogue: 0,0:36:23.81,0:36:25.10,Default,,0,0,0,,if you've used this boilerplate
Dialogue: 0,0:36:25.10,0:36:26.63,Default,,0,0,0,,code in the past, it still works
Dialogue: 0,0:36:26.69,0:36:27.86,Default,,0,0,0,,correctly because it's
Dialogue: 0,0:36:28.07,0:36:30.00,Default,,0,0,0,,outputting to a JPEG regardless
Dialogue: 0,0:36:30.00,0:36:30.98,Default,,0,0,0,,of what the input was.
Dialogue: 0,0:36:32.86,0:36:34.29,Default,,0,0,0,,Our second applying adjustments
Dialogue: 0,0:36:34.29,0:36:36.33,Default,,0,0,0,,use case relates to videos, and
Dialogue: 0,0:36:36.33,0:36:39.56,Default,,0,0,0,,the rule again same as iOS 10 is
Dialogue: 0,0:36:39.56,0:36:40.80,Default,,0,0,0,,that no matter what the format
Dialogue: 0,0:36:40.80,0:36:42.83,Default,,0,0,0,,of your input movie content, you
Dialogue: 0,0:36:42.83,0:36:44.93,Default,,0,0,0,,must produce a movie compressed
Dialogue: 0,0:36:44.93,0:36:47.14,Default,,0,0,0,,with H.264 as your output.
Dialogue: 0,0:36:48.08,0:36:49.50,Default,,0,0,0,,Yes, even if the source movie is
Dialogue: 0,0:36:49.50,0:36:51.23,Default,,0,0,0,,HEVC, you still need to render
Dialogue: 0,0:36:51.38,0:36:56.81,Default,,0,0,0,,to H.264 for output.
Dialogue: 0,0:36:57.64,0:36:59.00,Default,,0,0,0,,Here's some boilerplate code to
Dialogue: 0,0:36:59.00,0:37:00.52,Default,,0,0,0,,edit video content that looks
Dialogue: 0,0:37:00.52,0:37:01.06,Default,,0,0,0,,like this.
Dialogue: 0,0:37:01.18,0:37:03.69,Default,,0,0,0,,First you get an AVAsset from
Dialogue: 0,0:37:03.73,0:37:06.82,Default,,0,0,0,,the PHContentEditingInput, then
Dialogue: 0,0:37:06.82,0:37:07.78,Default,,0,0,0,,you can create an
Dialogue: 0,0:37:07.78,0:37:09.83,Default,,0,0,0,,AVVideoComposition in which you
Dialogue: 0,0:37:09.83,0:37:11.79,Default,,0,0,0,,are handed each frame one at a
Dialogue: 0,0:37:12.40,0:37:13.98,Default,,0,0,0,,time and you can get them as
Dialogue: 0,0:37:13.98,0:37:15.93,Default,,0,0,0,,CIImages and then request an
Dialogue: 0,0:37:15.93,0:37:18.48,Default,,0,0,0,,object that has a mouthful of a
Dialogue: 0,0:37:18.48,0:37:19.82,Default,,0,0,0,,name, AVAsynchronous
Dialogue: 0,0:37:19.82,0:37:21.79,Default,,0,0,0,,CoreImageFilteringRequest.
Dialogue: 0,0:37:22.64,0:37:24.42,Default,,0,0,0,,You get a CIImage and then you
Dialogue: 0,0:37:24.42,0:37:26.76,Default,,0,0,0,,produce a CIImage, when you're
Dialogue: 0,0:37:26.76,0:37:27.99,Default,,0,0,0,,done rendering it you call
Dialogue: 0,0:37:27.99,0:37:30.39,Default,,0,0,0,,request.finish and then as a
Dialogue: 0,0:37:30.39,0:37:32.52,Default,,0,0,0,,final step, you export your
Dialogue: 0,0:37:32.52,0:37:34.82,Default,,0,0,0,,AVAsset to a file on disc at the
Dialogue: 0,0:37:34.82,0:37:36.44,Default,,0,0,0,,URL told to you by the
Dialogue: 0,0:37:36.44,0:37:38.32,Default,,0,0,0,,PHContentEditingOutput.
Dialogue: 0,0:37:38.92,0:37:40.00,Default,,0,0,0,,Now here's the important part.
Dialogue: 0,0:37:40.51,0:37:41.95,Default,,0,0,0,,The preset to use is
Dialogue: 0,0:37:41.95,0:37:43.64,Default,,0,0,0,,AVAssetExportPreset
Dialogue: 0,0:37:43.64,0:37:45.80,Default,,0,0,0,,HighestQuality or any of the
Dialogue: 0,0:37:45.80,0:37:47.35,Default,,0,0,0,,existing ones as Erik said,
Dialogue: 0,0:37:47.59,0:37:49.96,Default,,0,0,0,,still compressed to H.264.
Dialogue: 0,0:37:50.20,0:37:51.64,Default,,0,0,0,,Don't use the similarly named
Dialogue: 0,0:37:51.64,0:37:53.50,Default,,0,0,0,,new ones which have HEVC in the
Dialogue: 0,0:37:53.50,0:37:55.12,Default,,0,0,0,,name because you're change
Dialogue: 0,0:37:55.12,0:37:56.73,Default,,0,0,0,,request will fail with an error.
Dialogue: 0,0:37:58.07,0:38:00.96,Default,,0,0,0,,Finally, applying adjustments
Dialogue: 0,0:38:01.07,0:38:03.52,Default,,0,0,0,,using Live Photos, the video
Dialogue: 0,0:38:03.52,0:38:04.66,Default,,0,0,0,,content of Live Photos.
Dialogue: 0,0:38:05.51,0:38:06.92,Default,,0,0,0,,What I'm talking about here is
Dialogue: 0,0:38:06.92,0:38:09.47,Default,,0,0,0,,the moving aspect of a picture
Dialogue: 0,0:38:09.47,0:38:11.36,Default,,0,0,0,,when you either swipe between
Dialogue: 0,0:38:11.36,0:38:12.69,Default,,0,0,0,,photos that were Live Photos or
Dialogue: 0,0:38:12.69,0:38:14.66,Default,,0,0,0,,when you Force Touch on a
Dialogue: 0,0:38:14.66,0:38:15.99,Default,,0,0,0,,picture or swipe between
Dialogue: 0,0:38:16.21,0:38:16.76,Default,,0,0,0,,pictures.
Dialogue: 0,0:38:17.32,0:38:19.21,Default,,0,0,0,,This is the simplest use case as
Dialogue: 0,0:38:19.26,0:38:20.49,Default,,0,0,0,,you never get to deal directly
Dialogue: 0,0:38:20.49,0:38:22.27,Default,,0,0,0,,with the input or output files.
Dialogue: 0,0:38:22.66,0:38:24.51,Default,,0,0,0,,You're passed CIImages and you
Dialogue: 0,0:38:24.51,0:38:25.64,Default,,0,0,0,,produce CIImages.
Dialogue: 0,0:38:26.04,0:38:27.22,Default,,0,0,0,,The encoding is done on your
Dialogue: 0,0:38:27.22,0:38:27.74,Default,,0,0,0,,behalf.
Dialogue: 0,0:38:28.79,0:38:30.19,Default,,0,0,0,,There's a lot of good code to
Dialogue: 0,0:38:30.19,0:38:31.48,Default,,0,0,0,,look at here, but I'm not going
Dialogue: 0,0:38:31.48,0:38:32.55,Default,,0,0,0,,to spend a lot of time on it.
Dialogue: 0,0:38:32.66,0:38:33.76,Default,,0,0,0,,You can pause the video later
Dialogue: 0,0:38:33.76,0:38:35.37,Default,,0,0,0,,and take a good long look at it.
Dialogue: 0,0:38:35.87,0:38:37.35,Default,,0,0,0,,The one take home point is that
Dialogue: 0,0:38:37.60,0:38:38.68,Default,,0,0,0,,after you've filtered each
Dialogue: 0,0:38:38.68,0:38:41.20,Default,,0,0,0,,frame, in a Live Photo movie you
Dialogue: 0,0:38:41.20,0:38:42.58,Default,,0,0,0,,can tell the Live Photo content
Dialogue: 0,0:38:42.63,0:38:44.46,Default,,0,0,0,,to save your Live Photo to a
Dialogue: 0,0:38:44.46,0:38:46.16,Default,,0,0,0,,given URL and that's it.
Dialogue: 0,0:38:46.64,0:38:48.05,Default,,0,0,0,,The Live Photos will be saved
Dialogue: 0,0:38:48.05,0:38:50.56,Default,,0,0,0,,out using H.264 on your behalf
Dialogue: 0,0:38:50.87,0:38:52.81,Default,,0,0,0,,just as the stills will be
Dialogue: 0,0:38:52.89,0:38:55.18,Default,,0,0,0,,encoded as JPEG.
Dialogue: 0,0:38:55.66,0:38:56.81,Default,,0,0,0,,Okay, let's move over to the
Dialogue: 0,0:38:56.81,0:38:58.76,Default,,0,0,0,,common workflows with PhotoKit.
Dialogue: 0,0:38:59.44,0:39:01.30,Default,,0,0,0,,When displaying content from
Dialogue: 0,0:39:01.30,0:39:02.91,Default,,0,0,0,,your photo library, you use an
Dialogue: 0,0:39:02.91,0:39:04.88,Default,,0,0,0,,object called the PHImageManager
Dialogue: 0,0:39:05.29,0:39:08.35,Default,,0,0,0,,and this provides you with one
Dialogue: 0,0:39:08.35,0:39:09.15,Default,,0,0,0,,of three things.
Dialogue: 0,0:39:09.84,0:39:11.78,Default,,0,0,0,,You could get a UIImage if it's
Dialogue: 0,0:39:11.78,0:39:13.83,Default,,0,0,0,,an image, a PlayerItem if it's a
Dialogue: 0,0:39:13.83,0:39:16.35,Default,,0,0,0,,video, or a PHLivePhoto if it's
Dialogue: 0,0:39:16.35,0:39:17.68,Default,,0,0,0,,Live Photo content.
Dialogue: 0,0:39:18.18,0:39:19.39,Default,,0,0,0,,Here you don't need to make any
Dialogue: 0,0:39:19.39,0:39:21.62,Default,,0,0,0,,changes because all of these are
Dialogue: 0,0:39:21.62,0:39:23.47,Default,,0,0,0,,high level abstractions in which
Dialogue: 0,0:39:23.47,0:39:24.79,Default,,0,0,0,,you don't care where the sources
Dialogue: 0,0:39:24.79,0:39:25.97,Default,,0,0,0,,came from, all you're doing is
Dialogue: 0,0:39:25.97,0:39:26.63,Default,,0,0,0,,displaying them.
Dialogue: 0,0:39:26.96,0:39:28.22,Default,,0,0,0,,No code changes needed here.
Dialogue: 0,0:39:29.47,0:39:31.68,Default,,0,0,0,,The next is backup.
Dialogue: 0,0:39:32.03,0:39:33.56,Default,,0,0,0,,When using PhotoKit for backup
Dialogue: 0,0:39:33.63,0:39:35.48,Default,,0,0,0,,purposes, you probably want to
Dialogue: 0,0:39:35.48,0:39:37.75,Default,,0,0,0,,access the raw assets such as
Dialogue: 0,0:39:37.79,0:39:39.10,Default,,0,0,0,,the HEIC files and the QuickTime
Dialogue: 0,0:39:39.10,0:39:39.49,Default,,0,0,0,,movies.
Dialogue: 0,0:39:39.79,0:39:41.16,Default,,0,0,0,,And you do that using
Dialogue: 0,0:39:41.16,0:39:42.61,Default,,0,0,0,,PHAssetResourceManager.
Dialogue: 0,0:39:42.98,0:39:44.29,Default,,0,0,0,,It will give them to you in the
Dialogue: 0,0:39:44.29,0:39:45.09,Default,,0,0,0,,native format.
Dialogue: 0,0:39:45.41,0:39:46.43,Default,,0,0,0,,The only thing to be aware of
Dialogue: 0,0:39:46.43,0:39:48.21,Default,,0,0,0,,here is that you might get
Dialogue: 0,0:39:48.21,0:39:49.60,Default,,0,0,0,,different file types coming than
Dialogue: 0,0:39:49.60,0:39:50.74,Default,,0,0,0,,you're used to, so make sure
Dialogue: 0,0:39:50.74,0:39:52.78,Default,,0,0,0,,that you're ready for it.
Dialogue: 0,0:39:53.63,0:39:54.90,Default,,0,0,0,,The third and most complicated
Dialogue: 0,0:39:54.90,0:39:55.76,Default,,0,0,0,,case is sharing.
Dialogue: 0,0:39:56.72,0:39:58.23,Default,,0,0,0,,Here you're sort of leaving
Dialogue: 0,0:39:58.23,0:39:59.89,Default,,0,0,0,,Apple's nice walled garden.
Dialogue: 0,0:40:00.34,0:40:01.37,Default,,0,0,0,,You have to think about your
Dialogue: 0,0:40:01.37,0:40:02.76,Default,,0,0,0,,compatibility requirements.
Dialogue: 0,0:40:03.12,0:40:04.49,Default,,0,0,0,,Are native assets okay?
Dialogue: 0,0:40:04.64,0:40:06.53,Default,,0,0,0,,You might be doing your clients
Dialogue: 0,0:40:06.53,0:40:07.58,Default,,0,0,0,,a favor or you might be doing
Dialogue: 0,0:40:07.58,0:40:08.96,Default,,0,0,0,,them a disservice by giving them
Dialogue: 0,0:40:08.96,0:40:10.54,Default,,0,0,0,,HEIC content depending on
Dialogue: 0,0:40:10.54,0:40:11.55,Default,,0,0,0,,whether they're ready for it.
Dialogue: 0,0:40:11.94,0:40:12.91,Default,,0,0,0,,So, here you must weigh
Dialogue: 0,0:40:12.91,0:40:14.51,Default,,0,0,0,,compatibility versus the
Dialogue: 0,0:40:14.51,0:40:16.11,Default,,0,0,0,,features that HEIC affords.
Dialogue: 0,0:40:17.22,0:40:19.24,Default,,0,0,0,,If you do choose compatibility
Dialogue: 0,0:40:19.24,0:40:21.01,Default,,0,0,0,,over features, you can ensure
Dialogue: 0,0:40:21.01,0:40:22.35,Default,,0,0,0,,format compatibility by
Dialogue: 0,0:40:22.35,0:40:24.50,Default,,0,0,0,,specifying the output format
Dialogue: 0,0:40:24.50,0:40:25.23,Default,,0,0,0,,explicitly.
Dialogue: 0,0:40:25.37,0:40:27.80,Default,,0,0,0,,For images, you can just check
Dialogue: 0,0:40:27.80,0:40:29.78,Default,,0,0,0,,the UTType that you get, and see
Dialogue: 0,0:40:29.78,0:40:31.88,Default,,0,0,0,,that it conforms to say JPEG,
Dialogue: 0,0:40:31.88,0:40:33.76,Default,,0,0,0,,and if it doesn't, explicitly
Dialogue: 0,0:40:33.76,0:40:34.28,Default,,0,0,0,,convert it.
Dialogue: 0,0:40:34.80,0:40:36.45,Default,,0,0,0,,With videos, you can always
Dialogue: 0,0:40:36.45,0:40:37.69,Default,,0,0,0,,force compatibility by
Dialogue: 0,0:40:37.69,0:40:39.38,Default,,0,0,0,,requesting an export session
Dialogue: 0,0:40:39.66,0:40:41.15,Default,,0,0,0,,with a preset that you know will
Dialogue: 0,0:40:41.15,0:40:43.53,Default,,0,0,0,,deliver H.264 such as
Dialogue: 0,0:40:43.74,0:40:44.98,Default,,0,0,0,,PresetHighestQuality.
Dialogue: 0,0:40:46.24,0:40:48.64,Default,,0,0,0,,All right, onto our last topic
Dialogue: 0,0:40:48.64,0:40:50.16,Default,,0,0,0,,of the day, capturing HEIF.
Dialogue: 0,0:40:50.48,0:40:51.79,Default,,0,0,0,,Finally, one that I know what
Dialogue: 0,0:40:51.79,0:40:52.49,Default,,0,0,0,,I'm talking about.
Dialogue: 0,0:40:53.91,0:40:55.12,Default,,0,0,0,,But let's do compression haiku
Dialogue: 0,0:40:55.12,0:40:56.34,Default,,0,0,0,,number two, please would you let
Dialogue: 0,0:40:56.34,0:40:56.49,Default,,0,0,0,,me?
Dialogue: 0,0:40:57.30,0:40:57.98,Default,,0,0,0,,It's fun for me.
Dialogue: 0,0:40:58.74,0:40:59.11,Default,,0,0,0,,Here we go.
Dialogue: 0,0:41:00.12,0:41:03.89,Default,,0,0,0,,HEIF a container, compresses
Dialogue: 0,0:41:03.93,0:41:08.05,Default,,0,0,0,,four times better than HEVC.
Dialogue: 0,0:41:09.58,0:41:10.66,Default,,0,0,0,,Think about that.
Dialogue: 0,0:41:10.77,0:41:12.69,Default,,0,0,0,,Okay, so, why are we wasting our
Dialogue: 0,0:41:12.69,0:41:14.38,Default,,0,0,0,,lives saying HEVC, it's supposed
Dialogue: 0,0:41:14.38,0:41:15.31,Default,,0,0,0,,to be a good codec right?
Dialogue: 0,0:41:15.31,0:41:15.99,Default,,0,0,0,,Why aren't we calling it
Dialogue: 0,0:41:15.99,0:41:16.38,Default,,0,0,0,,"hevick".
Dialogue: 0,0:41:17.98,0:41:18.79,Default,,0,0,0,,All right.
Dialogue: 0,0:41:19.46,0:41:20.73,Default,,0,0,0,,So, Erik mentioned that
Dialogue: 0,0:41:21.02,0:41:23.26,Default,,0,0,0,,AVCapturePhotoOutput added
Dialogue: 0,0:41:23.26,0:41:25.16,Default,,0,0,0,,support for Live Photo movies
Dialogue: 0,0:41:25.24,0:41:26.45,Default,,0,0,0,,encoded with HEVC.
Dialogue: 0,0:41:27.46,0:41:28.80,Default,,0,0,0,,This class was introduced last
Dialogue: 0,0:41:28.80,0:41:30.43,Default,,0,0,0,,year as the successor to
Dialogue: 0,0:41:30.43,0:41:31.72,Default,,0,0,0,,AVCaptureStillImageOutput.
Dialogue: 0,0:41:32.17,0:41:33.72,Default,,0,0,0,,It excels at handling complex
Dialogue: 0,0:41:33.72,0:41:35.08,Default,,0,0,0,,still image capture requests
Dialogue: 0,0:41:35.08,0:41:36.80,Default,,0,0,0,,where you need multiple assets
Dialogue: 0,0:41:36.80,0:41:38.04,Default,,0,0,0,,delivered over time.
Dialogue: 0,0:41:38.85,0:41:40.13,Default,,0,0,0,,It is currently the only way on
Dialogue: 0,0:41:40.13,0:41:42.08,Default,,0,0,0,,our platform to capture Live
Dialogue: 0,0:41:42.08,0:41:45.97,Default,,0,0,0,,Photos, Bayer RAW images, Apple
Dialogue: 0,0:41:46.05,0:41:49.23,Default,,0,0,0,,P3 Wide Color Images, and new in
Dialogue: 0,0:41:49.33,0:41:50.98,Default,,0,0,0,,iOS 11 it is the only interface
Dialogue: 0,0:41:50.98,0:41:52.51,Default,,0,0,0,,on our platform for capturing
Dialogue: 0,0:41:52.69,0:41:53.79,Default,,0,0,0,,HEIF content.
Dialogue: 0,0:41:56.24,0:41:58.12,Default,,0,0,0,,HEIF capture is supported on the
Dialogue: 0,0:41:58.42,0:42:01.49,Default,,0,0,0,,A10 chip devices which are
Dialogue: 0,0:42:01.49,0:42:03.73,Default,,0,0,0,,iPhone 7 Plus, iPhone 7, and the
Dialogue: 0,0:42:03.73,0:42:05.60,Default,,0,0,0,,newly announced iPad Pros.
Dialogue: 0,0:42:05.70,0:42:08.97,Default,,0,0,0,,We'll do a brief refresher on
Dialogue: 0,0:42:08.97,0:42:10.43,Default,,0,0,0,,how to request and receive
Dialogue: 0,0:42:10.43,0:42:12.14,Default,,0,0,0,,images with the photo output.
Dialogue: 0,0:42:12.50,0:42:15.30,Default,,0,0,0,,First, you fill out an object
Dialogue: 0,0:42:15.30,0:42:17.03,Default,,0,0,0,,called an AVCapturePhotoSettings
Dialogue: 0,0:42:17.03,0:42:18.23,Default,,0,0,0,,this is sort of like a request
Dialogue: 0,0:42:18.23,0:42:19.87,Default,,0,0,0,,object where you specify the
Dialogue: 0,0:42:19.87,0:42:21.41,Default,,0,0,0,,features that you want in your
Dialogue: 0,0:42:21.64,0:42:22.40,Default,,0,0,0,,photo capture.
Dialogue: 0,0:42:22.75,0:42:24.36,Default,,0,0,0,,Here it's the orange box.
Dialogue: 0,0:42:25.07,0:42:26.32,Default,,0,0,0,,Here, I've indicated that I want
Dialogue: 0,0:42:26.50,0:42:29.17,Default,,0,0,0,,auto flash, meaning photo output
Dialogue: 0,0:42:29.17,0:42:30.53,Default,,0,0,0,,only use the flash if it's
Dialogue: 0,0:42:30.53,0:42:32.07,Default,,0,0,0,,necessary, only if the light is
Dialogue: 0,0:42:32.25,0:42:33.51,Default,,0,0,0,,low enough to warrant it.
Dialogue: 0,0:42:34.39,0:42:35.75,Default,,0,0,0,,I've also asked for a preview
Dialogue: 0,0:42:35.75,0:42:37.14,Default,,0,0,0,,sized image to accompany the
Dialogue: 0,0:42:37.14,0:42:38.98,Default,,0,0,0,,full-sized image so that I can
Dialogue: 0,0:42:38.98,0:42:40.31,Default,,0,0,0,,have a quick preview to put on
Dialogue: 0,0:42:40.31,0:42:40.81,Default,,0,0,0,,screen.
Dialogue: 0,0:42:41.37,0:42:42.38,Default,,0,0,0,,I don't know exactly what the
Dialogue: 0,0:42:42.38,0:42:44.00,Default,,0,0,0,,final aspect ratio of it will be
Dialogue: 0,0:42:44.00,0:42:46.15,Default,,0,0,0,,so I just ask for a box that's
Dialogue: 0,0:42:46.15,0:42:48.03,Default,,0,0,0,,1440 by 1440.
Dialogue: 0,0:42:48.88,0:42:50.71,Default,,0,0,0,,I then pass this settings object
Dialogue: 0,0:42:50.71,0:42:52.80,Default,,0,0,0,,with a delegate that I provide
Dialogue: 0,0:42:53.34,0:42:56.35,Default,,0,0,0,,to the photo output to start or
Dialogue: 0,0:42:56.35,0:42:57.85,Default,,0,0,0,,kick off a capture request.
Dialogue: 0,0:43:00.26,0:43:02.60,Default,,0,0,0,,Now the arrow on top shows when
Dialogue: 0,0:43:02.60,0:43:04.82,Default,,0,0,0,,the request was made, and now
Dialogue: 0,0:43:05.35,0:43:07.14,Default,,0,0,0,,I'm sort of tracking this
Dialogue: 0,0:43:07.14,0:43:09.43,Default,,0,0,0,,package delivery, PhotoOutput
Dialogue: 0,0:43:09.51,0:43:11.43,Default,,0,0,0,,calls my delegate back with one
Dialogue: 0,0:43:11.43,0:43:12.78,Default,,0,0,0,,method call at a time.
Dialogue: 0,0:43:13.36,0:43:14.61,Default,,0,0,0,,Very soon after I make the
Dialogue: 0,0:43:14.61,0:43:16.26,Default,,0,0,0,,request the PhotoOutput calls
Dialogue: 0,0:43:16.26,0:43:17.61,Default,,0,0,0,,the delegates first callback
Dialogue: 0,0:43:17.61,0:43:19.98,Default,,0,0,0,,which is willBeginCaptureFor
Dialogue: 0,0:43:20.35,0:43:22.25,Default,,0,0,0,,resolved settings and it passes
Dialogue: 0,0:43:22.25,0:43:24.10,Default,,0,0,0,,you this blue box which is a
Dialogue: 0,0:43:24.10,0:43:25.75,Default,,0,0,0,,ResolvedPhotoSettings.
Dialogue: 0,0:43:26.73,0:43:27.83,Default,,0,0,0,,This is sort of like the
Dialogue: 0,0:43:27.83,0:43:29.05,Default,,0,0,0,,courtesy email that you get
Dialogue: 0,0:43:29.05,0:43:30.06,Default,,0,0,0,,saying we've received your
Dialogue: 0,0:43:30.06,0:43:32.20,Default,,0,0,0,,order, here's what we'll be
Dialogue: 0,0:43:32.20,0:43:32.90,Default,,0,0,0,,sending you.
Dialogue: 0,0:43:33.59,0:43:35.88,Default,,0,0,0,,And this ResolvedPhotoSetting
Dialogue: 0,0:43:35.88,0:43:37.58,Default,,0,0,0,,sort of clears up any ambiguity
Dialogue: 0,0:43:37.58,0:43:39.29,Default,,0,0,0,,that you had in your settings
Dialogue: 0,0:43:39.29,0:43:40.32,Default,,0,0,0,,that you provided at the
Dialogue: 0,0:43:40.32,0:43:40.83,Default,,0,0,0,,beginning.
Dialogue: 0,0:43:41.18,0:43:42.31,Default,,0,0,0,,In this case, we can now see
Dialogue: 0,0:43:42.31,0:43:44.09,Default,,0,0,0,,that flash is not auto, it's
Dialogue: 0,0:43:44.14,0:43:44.92,Default,,0,0,0,,true or false.
Dialogue: 0,0:43:45.29,0:43:47.09,Default,,0,0,0,,So, it's become true, we know
Dialogue: 0,0:43:47.09,0:43:48.35,Default,,0,0,0,,that the flash is going to fire.
Dialogue: 0,0:43:48.84,0:43:50.95,Default,,0,0,0,,Also, we now know what the final
Dialogue: 0,0:43:50.95,0:43:52.49,Default,,0,0,0,,preview image resolution is
Dialogue: 0,0:43:52.49,0:43:53.12,Default,,0,0,0,,going to be.
Dialogue: 0,0:43:55.45,0:43:57.02,Default,,0,0,0,,Finally, after we get the
Dialogue: 0,0:43:57.02,0:43:59.07,Default,,0,0,0,,willBeginCaptureFor, we, our
Dialogue: 0,0:43:59.07,0:44:00.42,Default,,0,0,0,,second call back that we receive
Dialogue: 0,0:44:00.42,0:44:02.30,Default,,0,0,0,,is willCapturePhotoFor
Dialogue: 0,0:44:02.30,0:44:03.21,Default,,0,0,0,,ResolvedSettings.
Dialogue: 0,0:44:03.80,0:44:05.05,Default,,0,0,0,,This is delivered coincident
Dialogue: 0,0:44:05.05,0:44:06.96,Default,,0,0,0,,with the shutter sound being
Dialogue: 0,0:44:06.96,0:44:07.44,Default,,0,0,0,,played.
Dialogue: 0,0:44:08.78,0:44:10.36,Default,,0,0,0,,And then shortly thereafter
Dialogue: 0,0:44:10.59,0:44:12.55,Default,,0,0,0,,comes didCapturePhotoFor
Dialogue: 0,0:44:12.55,0:44:14.25,Default,,0,0,0,,ResolvedSettings just after the
Dialogue: 0,0:44:14.25,0:44:16.01,Default,,0,0,0,,image has been fully exposed and
Dialogue: 0,0:44:16.01,0:44:16.50,Default,,0,0,0,,read out.
Dialogue: 0,0:44:17.82,0:44:19.79,Default,,0,0,0,,Then some time typically passes
Dialogue: 0,0:44:19.79,0:44:21.86,Default,,0,0,0,,while the image or images are
Dialogue: 0,0:44:21.86,0:44:23.48,Default,,0,0,0,,processed, applying all the
Dialogue: 0,0:44:23.48,0:44:24.69,Default,,0,0,0,,features that you asked for.
Dialogue: 0,0:44:25.37,0:44:26.65,Default,,0,0,0,,When the photo is ready, you
Dialogue: 0,0:44:26.65,0:44:27.50,Default,,0,0,0,,receive the
Dialogue: 0,0:44:27.50,0:44:29.55,Default,,0,0,0,,didFinishProcessingPhoto sample
Dialogue: 0,0:44:29.55,0:44:31.78,Default,,0,0,0,,buffer call back and the image
Dialogue: 0,0:44:31.78,0:44:33.50,Default,,0,0,0,,or images are delivered to you.
Dialogue: 0,0:44:33.95,0:44:35.87,Default,,0,0,0,,Here I got the main image, and
Dialogue: 0,0:44:35.87,0:44:36.69,Default,,0,0,0,,the preview image.
Dialogue: 0,0:44:37.08,0:44:38.15,Default,,0,0,0,,They're delivered together in
Dialogue: 0,0:44:38.15,0:44:38.90,Default,,0,0,0,,the same call back.
Dialogue: 0,0:44:39.97,0:44:42.19,Default,,0,0,0,,Finally, you always always
Dialogue: 0,0:44:42.19,0:44:43.26,Default,,0,0,0,,always get the
Dialogue: 0,0:44:43.26,0:44:45.01,Default,,0,0,0,,DidFinishCaptureFor
Dialogue: 0,0:44:45.01,0:44:46.91,Default,,0,0,0,,ResolvedSettings callback.
Dialogue: 0,0:44:47.36,0:44:48.89,Default,,0,0,0,,And that is guaranteed to be
Dialogue: 0,0:44:48.89,0:44:49.66,Default,,0,0,0,,delivered last.
Dialogue: 0,0:44:49.66,0:44:50.95,Default,,0,0,0,,It's the PhotoOutput's way of
Dialogue: 0,0:44:51.15,0:44:52.84,Default,,0,0,0,,saying we're done with this
Dialogue: 0,0:44:52.84,0:44:54.61,Default,,0,0,0,,transaction, pleasure doing
Dialogue: 0,0:44:54.61,0:44:56.47,Default,,0,0,0,,business with you, you can clean
Dialogue: 0,0:44:56.47,0:44:57.32,Default,,0,0,0,,up your delegate now.
Dialogue: 0,0:45:00.08,0:45:02.07,Default,,0,0,0,,This programming model has
Dialogue: 0,0:45:02.07,0:45:03.97,Default,,0,0,0,,proved to be very flexible.
Dialogue: 0,0:45:04.07,0:45:05.34,Default,,0,0,0,,We've had a lot of success with
Dialogue: 0,0:45:05.34,0:45:06.59,Default,,0,0,0,,it because we've been able to
Dialogue: 0,0:45:06.59,0:45:08.65,Default,,0,0,0,,add new methods to the delegate
Dialogue: 0,0:45:08.88,0:45:10.45,Default,,0,0,0,,as needed when we add new
Dialogue: 0,0:45:10.45,0:45:11.00,Default,,0,0,0,,features.
Dialogue: 0,0:45:11.74,0:45:13.40,Default,,0,0,0,,For instance, we added support
Dialogue: 0,0:45:13.40,0:45:14.36,Default,,0,0,0,,for RAW images.
Dialogue: 0,0:45:14.87,0:45:16.17,Default,,0,0,0,,There's a call back for that.
Dialogue: 0,0:45:16.93,0:45:17.91,Default,,0,0,0,,We added support for Live
Dialogue: 0,0:45:17.95,0:45:19.76,Default,,0,0,0,,Photos, there's a separate call
Dialogue: 0,0:45:19.76,0:45:21.28,Default,,0,0,0,,back for that, for getting the
Dialogue: 0,0:45:21.28,0:45:21.65,Default,,0,0,0,,movie.
Dialogue: 0,0:45:22.37,0:45:23.76,Default,,0,0,0,,So, it would seem like HEIF
Dialogue: 0,0:45:23.76,0:45:25.03,Default,,0,0,0,,would be an easy addition to
Dialogue: 0,0:45:25.03,0:45:26.52,Default,,0,0,0,,this very flexible programming
Dialogue: 0,0:45:26.52,0:45:27.05,Default,,0,0,0,,paradigm.
Dialogue: 0,0:45:27.58,0:45:28.95,Default,,0,0,0,,Unfortunately, it's not.
Dialogue: 0,0:45:30.12,0:45:32.37,Default,,0,0,0,,The incompatibility lies in the
Dialogue: 0,0:45:32.37,0:45:34.89,Default,,0,0,0,,CoreMedia SampleBuffer which is
Dialogue: 0,0:45:35.01,0:45:36.42,Default,,0,0,0,,and has been the coin of the
Dialogue: 0,0:45:36.42,0:45:38.09,Default,,0,0,0,,realm in AVFoundation for many
Dialogue: 0,0:45:38.09,0:45:38.70,Default,,0,0,0,,many years.
Dialogue: 0,0:45:39.23,0:45:41.45,Default,,0,0,0,,We have used it for still images
Dialogue: 0,0:45:41.77,0:45:42.82,Default,,0,0,0,,since iOS 4.
Dialogue: 0,0:45:44.44,0:45:45.89,Default,,0,0,0,,It's a thin container for media
Dialogue: 0,0:45:45.89,0:45:47.50,Default,,0,0,0,,data such as video samples,
Dialogue: 0,0:45:47.68,0:45:49.38,Default,,0,0,0,,audio samples, text, closed
Dialogue: 0,0:45:49.38,0:45:50.07,Default,,0,0,0,,captions.
Dialogue: 0,0:45:51.36,0:45:53.61,Default,,0,0,0,,HEIF on the other hand is a file
Dialogue: 0,0:45:53.61,0:45:55.14,Default,,0,0,0,,format, not a media format.
Dialogue: 0,0:45:55.53,0:45:57.03,Default,,0,0,0,,It can hold many media types.
Dialogue: 0,0:45:58.11,0:46:00.26,Default,,0,0,0,,Also, CMSampleBuffers can of
Dialogue: 0,0:46:00.30,0:46:02.55,Default,,0,0,0,,course carry HEVC compressed
Dialogue: 0,0:46:02.55,0:46:05.29,Default,,0,0,0,,video, but that HEV compressed,
Dialogue: 0,0:46:05.29,0:46:06.74,Default,,0,0,0,,HEVC compressed video doesn't
Dialogue: 0,0:46:06.74,0:46:09.15,Default,,0,0,0,,look like the HEIF containerized
Dialogue: 0,0:46:09.15,0:46:09.53,Default,,0,0,0,,HEVC.
Dialogue: 0,0:46:09.93,0:46:11.37,Default,,0,0,0,,Remember, HEIF likes to chop
Dialogue: 0,0:46:11.37,0:46:13.18,Default,,0,0,0,,things up into individual tiles
Dialogue: 0,0:46:13.54,0:46:14.78,Default,,0,0,0,,for quick decode.
Dialogue: 0,0:46:15.24,0:46:17.51,Default,,0,0,0,,You can't store that kind of
Dialogue: 0,0:46:17.51,0:46:20.37,Default,,0,0,0,,HEVC compression in a frame in a
Dialogue: 0,0:46:20.37,0:46:21.53,Default,,0,0,0,,QuickTime movie, it would just
Dialogue: 0,0:46:21.53,0:46:22.65,Default,,0,0,0,,confuse the decoder.
Dialogue: 0,0:46:23.36,0:46:24.24,Default,,0,0,0,,So, at this point, you might be
Dialogue: 0,0:46:24.24,0:46:25.89,Default,,0,0,0,,asking yourself, if we have this
Dialogue: 0,0:46:25.89,0:46:27.83,Default,,0,0,0,,fundamental tension between file
Dialogue: 0,0:46:27.83,0:46:30.09,Default,,0,0,0,,container and media container,
Dialogue: 0,0:46:30.29,0:46:31.80,Default,,0,0,0,,how would we be able to use
Dialogue: 0,0:46:31.87,0:46:33.69,Default,,0,0,0,,CMSampleBuffer for so many years
Dialogue: 0,0:46:33.93,0:46:35.93,Default,,0,0,0,,with photo output and still
Dialogue: 0,0:46:35.93,0:46:36.50,Default,,0,0,0,,image output?
Dialogue: 0,0:46:37.24,0:46:39.36,Default,,0,0,0,,Well the answer is JPEG.
Dialogue: 0,0:46:40.52,0:46:42.02,Default,,0,0,0,,We got away with this because of
Dialogue: 0,0:46:42.02,0:46:43.68,Default,,0,0,0,,the happy coincidence that JPEG,
Dialogue: 0,0:46:44.34,0:46:46.52,Default,,0,0,0,,the image codec, and JFIF the
Dialogue: 0,0:46:46.52,0:46:48.44,Default,,0,0,0,,file format are virtually
Dialogue: 0,0:46:48.44,0:46:49.41,Default,,0,0,0,,indistinguishable from one
Dialogue: 0,0:46:49.41,0:46:49.74,Default,,0,0,0,,another.
Dialogue: 0,0:46:50.21,0:46:51.79,Default,,0,0,0,,Both are acceptable as images,
Dialogue: 0,0:46:52.37,0:46:53.95,Default,,0,0,0,,in another container such as a
Dialogue: 0,0:46:53.95,0:46:54.65,Default,,0,0,0,,QuickTime movie.
Dialogue: 0,0:46:56.03,0:46:58.06,Default,,0,0,0,,So, the answer to our quandary
Dialogue: 0,0:46:58.06,0:46:59.94,Default,,0,0,0,,is to come up with a new purpose
Dialogue: 0,0:46:59.94,0:47:01.83,Default,,0,0,0,,built in-memory wrapper for
Dialogue: 0,0:47:01.83,0:47:03.49,Default,,0,0,0,,image results and we call that
Dialogue: 0,0:47:03.49,0:47:04.67,Default,,0,0,0,,the AVCapturePhoto.
Dialogue: 0,0:47:05.37,0:47:06.75,Default,,0,0,0,,It's our drop-in replacement for
Dialogue: 0,0:47:06.75,0:47:07.77,Default,,0,0,0,,CMSampleBuffer.
Dialogue: 0,0:47:08.60,0:47:10.86,Default,,0,0,0,,It is in fact faster than
Dialogue: 0,0:47:10.86,0:47:12.29,Default,,0,0,0,,CMSampleBuffer because we are
Dialogue: 0,0:47:12.29,0:47:13.94,Default,,0,0,0,,able to optimize delivery of it
Dialogue: 0,0:47:13.94,0:47:15.70,Default,,0,0,0,,across the process boundary from
Dialogue: 0,0:47:15.70,0:47:17.16,Default,,0,0,0,,the media server, so you get
Dialogue: 0,0:47:17.16,0:47:18.44,Default,,0,0,0,,even better performance than you
Dialogue: 0,0:47:18.44,0:47:19.49,Default,,0,0,0,,did in iOS 10.
Dialogue: 0,0:47:20.77,0:47:22.95,Default,,0,0,0,,It's 100 percent immutable like
Dialogue: 0,0:47:22.98,0:47:24.84,Default,,0,0,0,,the, unlike the CMSampleBuffer
Dialogue: 0,0:47:24.84,0:47:26.91,Default,,0,0,0,,so that it's easier to share
Dialogue: 0,0:47:26.91,0:47:28.10,Default,,0,0,0,,between code modules.
Dialogue: 0,0:47:29.21,0:47:30.35,Default,,0,0,0,,It's also backed by
Dialogue: 0,0:47:30.35,0:47:31.61,Default,,0,0,0,,containerized data.
Dialogue: 0,0:47:31.61,0:47:32.76,Default,,0,0,0,,I'm going to talk more about
Dialogue: 0,0:47:32.76,0:47:34.39,Default,,0,0,0,,that in a minute.
Dialogue: 0,0:47:34.58,0:47:35.55,Default,,0,0,0,,Let's talk about some of its
Dialogue: 0,0:47:35.55,0:47:36.31,Default,,0,0,0,,attributes.
Dialogue: 0,0:47:36.90,0:47:38.27,Default,,0,0,0,,It has access to critical
Dialogue: 0,0:47:38.27,0:47:39.68,Default,,0,0,0,,information about the photo such
Dialogue: 0,0:47:39.68,0:47:41.17,Default,,0,0,0,,as the time at which it was
Dialogue: 0,0:47:41.17,0:47:43.79,Default,,0,0,0,,captured, whether or not it's a
Dialogue: 0,0:47:43.79,0:47:46.49,Default,,0,0,0,,RAW, Bayer RAW photo, and for
Dialogue: 0,0:47:46.49,0:47:48.02,Default,,0,0,0,,uncompressed or RAW photos, you
Dialogue: 0,0:47:48.02,0:47:49.43,Default,,0,0,0,,get access to the pixel buffer
Dialogue: 0,0:47:49.43,0:47:49.74,Default,,0,0,0,,data.
Dialogue: 0,0:47:50.75,0:47:52.29,Default,,0,0,0,,Also, side band information
Dialogue: 0,0:47:52.29,0:47:53.84,Default,,0,0,0,,travels with the AVCapturePhoto
Dialogue: 0,0:47:53.84,0:47:56.71,Default,,0,0,0,,too, such as the second smaller
Dialogue: 0,0:47:56.71,0:47:58.38,Default,,0,0,0,,preview image that you can ask
Dialogue: 0,0:47:58.38,0:47:58.65,Default,,0,0,0,,for.
Dialogue: 0,0:47:59.48,0:48:01.67,Default,,0,0,0,,You can also now request a third
Dialogue: 0,0:48:01.91,0:48:04.32,Default,,0,0,0,,image that's even smaller to be
Dialogue: 0,0:48:04.32,0:48:06.25,Default,,0,0,0,,in embedded as a thumbnail in
Dialogue: 0,0:48:06.25,0:48:06.88,Default,,0,0,0,,the container.
Dialogue: 0,0:48:08.71,0:48:10.08,Default,,0,0,0,,An ImageIO property style
Dialogue: 0,0:48:10.08,0:48:11.57,Default,,0,0,0,,metadata dictionary is provided
Dialogue: 0,0:48:11.57,0:48:13.67,Default,,0,0,0,,that can contain Exif, or other
Dialogue: 0,0:48:13.67,0:48:14.80,Default,,0,0,0,,metadata that you've come to
Dialogue: 0,0:48:14.80,0:48:15.21,Default,,0,0,0,,expect.
Dialogue: 0,0:48:16.18,0:48:18.19,Default,,0,0,0,,And with the iPhone 7 Plus dual
Dialogue: 0,0:48:18.19,0:48:20.39,Default,,0,0,0,,camera, you can request that a
Dialogue: 0,0:48:20.39,0:48:22.20,Default,,0,0,0,,depth data map be delivered with
Dialogue: 0,0:48:22.20,0:48:23.68,Default,,0,0,0,,the AVCapturePhoto results as
Dialogue: 0,0:48:23.68,0:48:23.98,Default,,0,0,0,,well.
Dialogue: 0,0:48:25.46,0:48:27.29,Default,,0,0,0,,AVCapturePhoto also provides a
Dialogue: 0,0:48:27.29,0:48:28.88,Default,,0,0,0,,number of convenience accessors
Dialogue: 0,0:48:28.98,0:48:31.04,Default,,0,0,0,,such as a reference to the
Dialogue: 0,0:48:31.04,0:48:32.56,Default,,0,0,0,,resolvedSettings object that we
Dialogue: 0,0:48:32.56,0:48:34.02,Default,,0,0,0,,saw in previous slides.
Dialogue: 0,0:48:34.52,0:48:37.03,Default,,0,0,0,,Also, it gives you easy access
Dialogue: 0,0:48:37.03,0:48:38.78,Default,,0,0,0,,to bookkeeping about the photos.
Dialogue: 0,0:48:38.88,0:48:40.75,Default,,0,0,0,,For instance, if you've fired
Dialogue: 0,0:48:40.75,0:48:42.84,Default,,0,0,0,,off a request for a RAW plus
Dialogue: 0,0:48:42.92,0:48:44.40,Default,,0,0,0,,HEIC, you would expect to get
Dialogue: 0,0:48:44.44,0:48:45.19,Default,,0,0,0,,two photos.
Dialogue: 0,0:48:45.54,0:48:47.20,Default,,0,0,0,,So, the photo count accessor
Dialogue: 0,0:48:47.20,0:48:48.74,Default,,0,0,0,,will tell is this photo one or
Dialogue: 0,0:48:48.74,0:48:49.34,Default,,0,0,0,,photo two?
Dialogue: 0,0:48:50.71,0:48:51.87,Default,,0,0,0,,If this photo is part of a
Dialogue: 0,0:48:51.87,0:48:53.90,Default,,0,0,0,,bracketed capture, such as an
Dialogue: 0,0:48:53.90,0:48:55.44,Default,,0,0,0,,auto exposure bracket of three
Dialogue: 0,0:48:55.44,0:48:57.94,Default,,0,0,0,,or four different EV values, it
Dialogue: 0,0:48:57.94,0:48:59.62,Default,,0,0,0,,can tell you which bracket
Dialogue: 0,0:48:59.62,0:49:00.77,Default,,0,0,0,,settings were applied to this
Dialogue: 0,0:49:00.77,0:49:02.91,Default,,0,0,0,,particular result as well as its
Dialogue: 0,0:49:03.08,0:49:05.41,Default,,0,0,0,,sequence number and whether lens
Dialogue: 0,0:49:05.41,0:49:07.12,Default,,0,0,0,,stabilization was engaged.
Dialogue: 0,0:49:09.16,0:49:11.12,Default,,0,0,0,,AVCapturePhoto also supports
Dialogue: 0,0:49:11.20,0:49:12.34,Default,,0,0,0,,conversions to different
Dialogue: 0,0:49:12.34,0:49:14.39,Default,,0,0,0,,formats, so it's friendly and
Dialogue: 0,0:49:14.39,0:49:16.62,Default,,0,0,0,,able to move to other frameworks
Dialogue: 0,0:49:16.62,0:49:17.75,Default,,0,0,0,,that you would use with image
Dialogue: 0,0:49:17.75,0:49:18.42,Default,,0,0,0,,processing.
Dialogue: 0,0:49:18.91,0:49:20.31,Default,,0,0,0,,First and foremost, it supports
Dialogue: 0,0:49:20.31,0:49:22.04,Default,,0,0,0,,conversions to data
Dialogue: 0,0:49:22.04,0:49:23.55,Default,,0,0,0,,representations if you just want
Dialogue: 0,0:49:23.55,0:49:24.34,Default,,0,0,0,,to write to file.
Dialogue: 0,0:49:24.90,0:49:26.64,Default,,0,0,0,,And it can produce a CGImage of
Dialogue: 0,0:49:26.64,0:49:28.43,Default,,0,0,0,,either the full-size preview or
Dialogue: 0,0:49:28.43,0:49:31.08,Default,,0,0,0,,the -- sorry the full-size photo
Dialogue: 0,0:49:31.08,0:49:31.98,Default,,0,0,0,,or the preview photo.
Dialogue: 0,0:49:32.01,0:49:35.45,Default,,0,0,0,,Now the mechanism for opting in
Dialogue: 0,0:49:35.45,0:49:37.18,Default,,0,0,0,,to get an AVCapturePhoto instead
Dialogue: 0,0:49:37.18,0:49:38.83,Default,,0,0,0,,of a CMSampleBuffer is just that
Dialogue: 0,0:49:38.83,0:49:40.17,Default,,0,0,0,,you need to implement one new
Dialogue: 0,0:49:40.17,0:49:41.82,Default,,0,0,0,,delegate method in your
Dialogue: 0,0:49:41.82,0:49:44.11,Default,,0,0,0,,AVCapture PhotoCapture delegate,
Dialogue: 0,0:49:44.11,0:49:45.10,Default,,0,0,0,,and that's this one here.
Dialogue: 0,0:49:45.51,0:49:46.85,Default,,0,0,0,,It's very simple it just has
Dialogue: 0,0:49:46.85,0:49:47.79,Default,,0,0,0,,three parameters.
Dialogue: 0,0:49:48.15,0:49:49.81,Default,,0,0,0,,It gives you the AVCapturePhoto
Dialogue: 0,0:49:50.31,0:49:51.77,Default,,0,0,0,,and optionally an error.
Dialogue: 0,0:49:52.46,0:49:54.69,Default,,0,0,0,,Now, error or not, you always
Dialogue: 0,0:49:54.69,0:49:56.73,Default,,0,0,0,,get an AVCapturePhoto with as
Dialogue: 0,0:49:56.73,0:49:58.03,Default,,0,0,0,,much information about it as
Dialogue: 0,0:49:58.03,0:49:59.62,Default,,0,0,0,,possible, even if there's no
Dialogue: 0,0:49:59.62,0:50:02.49,Default,,0,0,0,,backing pixel data.
Dialogue: 0,0:50:03.16,0:50:05.30,Default,,0,0,0,,The following two really lengthy
Dialogue: 0,0:50:05.63,0:50:06.91,Default,,0,0,0,,delegate methods have been
Dialogue: 0,0:50:06.91,0:50:09.26,Default,,0,0,0,,deprecated to help steer you
Dialogue: 0,0:50:09.26,0:50:10.53,Default,,0,0,0,,towards the new and better.
Dialogue: 0,0:50:11.40,0:50:14.17,Default,,0,0,0,,We used to have separate call
Dialogue: 0,0:50:14.17,0:50:16.19,Default,,0,0,0,,backs for getting the RAW or the
Dialogue: 0,0:50:16.22,0:50:18.10,Default,,0,0,0,,uncompressed or compressed,
Dialogue: 0,0:50:18.21,0:50:20.27,Default,,0,0,0,,didFinishProcessingPhoto which
Dialogue: 0,0:50:20.27,0:50:21.76,Default,,0,0,0,,would give you a CMSampleBuffer
Dialogue: 0,0:50:21.76,0:50:24.10,Default,,0,0,0,,or didFinishProcessingRawPhoto
Dialogue: 0,0:50:24.10,0:50:24.87,Default,,0,0,0,,which would give you a
Dialogue: 0,0:50:24.87,0:50:25.53,Default,,0,0,0,,SampleBuffer.
Dialogue: 0,0:50:26.25,0:50:28.59,Default,,0,0,0,,You needn't, you needn't use
Dialogue: 0,0:50:28.59,0:50:29.14,Default,,0,0,0,,these anymore.
Dialogue: 0,0:50:29.14,0:50:31.09,Default,,0,0,0,,You can just use the new single
Dialogue: 0,0:50:31.52,0:50:33.04,Default,,0,0,0,,which subsumes both of them into
Dialogue: 0,0:50:33.04,0:50:33.37,Default,,0,0,0,,one.
Dialogue: 0,0:50:33.92,0:50:37.03,Default,,0,0,0,,All right, in iOS 10 we
Dialogue: 0,0:50:37.03,0:50:38.92,Default,,0,0,0,,supported the following formats.
Dialogue: 0,0:50:39.53,0:50:40.86,Default,,0,0,0,,For compression, all you could
Dialogue: 0,0:50:40.86,0:50:41.66,Default,,0,0,0,,get was JPEG.
Dialogue: 0,0:50:42.22,0:50:43.37,Default,,0,0,0,,For uncompressed you had your
Dialogue: 0,0:50:43.37,0:50:45.64,Default,,0,0,0,,choice of two flavors of 420 or
Dialogue: 0,0:50:45.64,0:50:47.85,Default,,0,0,0,,BGRA, and of course we supported
Dialogue: 0,0:50:47.90,0:50:48.55,Default,,0,0,0,,Bayer RAW.
Dialogue: 0,0:50:49.41,0:50:52.19,Default,,0,0,0,,Now, in iOS 11, in addition to
Dialogue: 0,0:50:52.19,0:50:54.50,Default,,0,0,0,,adding HEVC support, we're
Dialogue: 0,0:50:54.50,0:50:55.74,Default,,0,0,0,,adding a new dimension to this
Dialogue: 0,0:50:55.74,0:50:56.19,Default,,0,0,0,,as well.
Dialogue: 0,0:50:56.75,0:50:58.23,Default,,0,0,0,,Every image format that you,
Dialogue: 0,0:50:58.54,0:51:01.44,Default,,0,0,0,,that you request is also backed
Dialogue: 0,0:51:01.44,0:51:03.93,Default,,0,0,0,,by a file container format.
Dialogue: 0,0:51:04.14,0:51:06.11,Default,,0,0,0,,In other words, implicitly,
Dialogue: 0,0:51:06.41,0:51:07.98,Default,,0,0,0,,every image that you capture is
Dialogue: 0,0:51:07.98,0:51:09.09,Default,,0,0,0,,being containerized.
Dialogue: 0,0:51:09.69,0:51:11.75,Default,,0,0,0,,For HEVC the implicit container
Dialogue: 0,0:51:11.75,0:51:16.21,Default,,0,0,0,,is HEIC, for JPEG it's JFIF, for
Dialogue: 0,0:51:16.21,0:51:17.54,Default,,0,0,0,,the uncompressed formats it's
Dialogue: 0,0:51:17.67,0:51:20.07,Default,,0,0,0,,TIFF, and for RAW formats as
Dialogue: 0,0:51:20.07,0:51:21.24,Default,,0,0,0,,before it's DNG.
Dialogue: 0,0:51:21.77,0:51:22.99,Default,,0,0,0,,Now, why would file
Dialogue: 0,0:51:22.99,0:51:24.25,Default,,0,0,0,,containerization be a good
Dialogue: 0,0:51:24.25,0:51:24.62,Default,,0,0,0,,thing?
Dialogue: 0,0:51:25.46,0:51:26.68,Default,,0,0,0,,The answer is performance.
Dialogue: 0,0:51:26.73,0:51:28.34,Default,,0,0,0,,Let me explain using a case
Dialogue: 0,0:51:28.34,0:51:28.63,Default,,0,0,0,,study.
Dialogue: 0,0:51:29.25,0:51:31.18,Default,,0,0,0,,So, here's the old way you would
Dialogue: 0,0:51:31.18,0:51:32.72,Default,,0,0,0,,get a JPEG and write it to disc.
Dialogue: 0,0:51:33.73,0:51:35.46,Default,,0,0,0,,PhotoOutput would deliver you a
Dialogue: 0,0:51:35.46,0:51:37.31,Default,,0,0,0,,SampleBuffer with a full-sized
Dialogue: 0,0:51:37.31,0:51:40.33,Default,,0,0,0,,image and a preview image and it
Dialogue: 0,0:51:40.33,0:51:41.78,Default,,0,0,0,,would attach some metadata to it
Dialogue: 0,0:51:41.78,0:51:42.87,Default,,0,0,0,,such as Exif.
Dialogue: 0,0:51:42.97,0:51:44.47,Default,,0,0,0,,If you wanted to mutate that in
Dialogue: 0,0:51:44.47,0:51:45.76,Default,,0,0,0,,any way, you would have to wait
Dialogue: 0,0:51:45.76,0:51:46.95,Default,,0,0,0,,until it delivered the call back
Dialogue: 0,0:51:47.29,0:51:48.49,Default,,0,0,0,,and then you would get the
Dialogue: 0,0:51:48.49,0:51:50.34,Default,,0,0,0,,attachment that had the Exif,
Dialogue: 0,0:51:50.77,0:51:53.41,Default,,0,0,0,,manipulate it, and re-add it to
Dialogue: 0,0:51:53.41,0:51:54.20,Default,,0,0,0,,the SampleBuffer.
Dialogue: 0,0:51:54.78,0:51:56.03,Default,,0,0,0,,Then when it came time for
Dialogue: 0,0:51:56.03,0:51:57.38,Default,,0,0,0,,writing it to disc, you would
Dialogue: 0,0:51:57.38,0:51:58.65,Default,,0,0,0,,call PhotoOutput's
Dialogue: 0,0:51:59.11,0:52:02.29,Default,,0,0,0,,JPEGDataPhotoRepresentation and
Dialogue: 0,0:52:02.29,0:52:03.42,Default,,0,0,0,,pass it the two buffers.
Dialogue: 0,0:52:04.34,0:52:06.59,Default,,0,0,0,,Outcomes a JPEG data, ready to
Dialogue: 0,0:52:06.59,0:52:07.27,Default,,0,0,0,,write to disc.
Dialogue: 0,0:52:07.85,0:52:09.97,Default,,0,0,0,,While in code it looks simple, a
Dialogue: 0,0:52:09.97,0:52:11.39,Default,,0,0,0,,lot is happening under the hood.
Dialogue: 0,0:52:12.05,0:52:13.62,Default,,0,0,0,,Because we conflated preview
Dialogue: 0,0:52:13.62,0:52:15.27,Default,,0,0,0,,image with embedded thumbnail
Dialogue: 0,0:52:15.27,0:52:16.78,Default,,0,0,0,,image, we had to take something
Dialogue: 0,0:52:16.78,0:52:18.16,Default,,0,0,0,,that was sized for the screen
Dialogue: 0,0:52:18.53,0:52:21.60,Default,,0,0,0,,and scale it down, compress it
Dialogue: 0,0:52:21.60,0:52:23.85,Default,,0,0,0,,to JPEG, incorporate all of your
Dialogue: 0,0:52:23.85,0:52:25.99,Default,,0,0,0,,Exif changes, and rewrite the
Dialogue: 0,0:52:25.99,0:52:26.92,Default,,0,0,0,,full-size image.
Dialogue: 0,0:52:26.98,0:52:29.82,Default,,0,0,0,,So, a lot of scaling and
Dialogue: 0,0:52:29.82,0:52:32.01,Default,,0,0,0,,compression done just because
Dialogue: 0,0:52:32.01,0:52:33.18,Default,,0,0,0,,you wanted to include a
Dialogue: 0,0:52:33.18,0:52:35.37,Default,,0,0,0,,thumbnail with your image and
Dialogue: 0,0:52:35.49,0:52:36.45,Default,,0,0,0,,manipulate a little bit of
Dialogue: 0,0:52:36.45,0:52:37.03,Default,,0,0,0,,metadata.
Dialogue: 0,0:52:37.37,0:52:38.43,Default,,0,0,0,,Not efficient at all.
Dialogue: 0,0:52:39.00,0:52:40.93,Default,,0,0,0,,Now in the new way,
Dialogue: 0,0:52:40.93,0:52:43.68,Default,,0,0,0,,AVCapturePhoto lets you specify
Dialogue: 0,0:52:43.68,0:52:45.60,Default,,0,0,0,,up front what you want in the
Dialogue: 0,0:52:45.60,0:52:46.14,Default,,0,0,0,,container.
Dialogue: 0,0:52:47.11,0:52:48.38,Default,,0,0,0,,If it has enough information to
Dialogue: 0,0:52:48.38,0:52:50.14,Default,,0,0,0,,prepare the file container right
Dialogue: 0,0:52:50.29,0:52:52.27,Default,,0,0,0,,the first time, then it's done
Dialogue: 0,0:52:52.27,0:52:53.43,Default,,0,0,0,,before you ever get the first
Dialogue: 0,0:52:53.43,0:52:53.91,Default,,0,0,0,,call back.
Dialogue: 0,0:52:55.10,0:52:56.17,Default,,0,0,0,,The way you do this is you fill
Dialogue: 0,0:52:56.17,0:52:58.01,Default,,0,0,0,,out some extra features in the
Dialogue: 0,0:52:58.01,0:52:59.11,Default,,0,0,0,,AvCapturePhotoSettings.
Dialogue: 0,0:52:59.58,0:53:00.79,Default,,0,0,0,,This time you can specify in
Dialogue: 0,0:53:00.79,0:53:02.57,Default,,0,0,0,,advance the codec that you want,
Dialogue: 0,0:53:02.57,0:53:04.54,Default,,0,0,0,,and optionally the file type.
Dialogue: 0,0:53:05.53,0:53:07.20,Default,,0,0,0,,You specify metadata that you
Dialogue: 0,0:53:07.20,0:53:08.81,Default,,0,0,0,,would like to add such as GPS
Dialogue: 0,0:53:08.81,0:53:10.04,Default,,0,0,0,,location, you can now do this
Dialogue: 0,0:53:10.07,0:53:11.79,Default,,0,0,0,,before you've even issued the
Dialogue: 0,0:53:11.79,0:53:12.41,Default,,0,0,0,,request.
Dialogue: 0,0:53:12.91,0:53:14.10,Default,,0,0,0,,You can also tell it I would
Dialogue: 0,0:53:14.10,0:53:15.38,Default,,0,0,0,,like an embedded thumbnail and I
Dialogue: 0,0:53:15.38,0:53:19.07,Default,,0,0,0,,would like it using these, these
Dialogue: 0,0:53:19.07,0:53:19.61,Default,,0,0,0,,dimensions.
Dialogue: 0,0:53:21.03,0:53:22.52,Default,,0,0,0,,You then submit your request to
Dialogue: 0,0:53:22.52,0:53:23.84,Default,,0,0,0,,the AVCapturePhotoOutput and
Dialogue: 0,0:53:23.84,0:53:25.55,Default,,0,0,0,,eventually it gives your
Dialogue: 0,0:53:25.55,0:53:28.25,Default,,0,0,0,,delegate an AVCapturePhoto as
Dialogue: 0,0:53:28.62,0:53:29.53,Default,,0,0,0,,its result.
Dialogue: 0,0:53:30.17,0:53:31.91,Default,,0,0,0,,This AVCapturePhoto is backed by
Dialogue: 0,0:53:31.91,0:53:33.15,Default,,0,0,0,,something that's already in a
Dialogue: 0,0:53:33.23,0:53:34.28,Default,,0,0,0,,HEIC container.
Dialogue: 0,0:53:34.78,0:53:36.27,Default,,0,0,0,,It's already been compressed in
Dialogue: 0,0:53:36.27,0:53:36.88,Default,,0,0,0,,tiles.
Dialogue: 0,0:53:37.46,0:53:39.37,Default,,0,0,0,,It's already embedded that
Dialogue: 0,0:53:39.37,0:53:40.64,Default,,0,0,0,,thumbnail image that you asked
Dialogue: 0,0:53:40.64,0:53:41.07,Default,,0,0,0,,it to.
Dialogue: 0,0:53:41.07,0:53:42.96,Default,,0,0,0,,It's already put the metadata in
Dialogue: 0,0:53:42.96,0:53:43.95,Default,,0,0,0,,the correct place.
Dialogue: 0,0:53:44.86,0:53:46.21,Default,,0,0,0,,So, the final call that you
Dialogue: 0,0:53:46.21,0:53:47.93,Default,,0,0,0,,would do to write it to disc
Dialogue: 0,0:53:48.61,0:53:51.65,Default,,0,0,0,,photo.fileDataRepresentation is
Dialogue: 0,0:53:51.65,0:53:52.62,Default,,0,0,0,,much simpler than in the
Dialogue: 0,0:53:52.62,0:53:53.60,Default,,0,0,0,,previous example.
Dialogue: 0,0:53:54.16,0:53:56.25,Default,,0,0,0,,All it's doing is a simple byte
Dialogue: 0,0:53:56.25,0:53:58.85,Default,,0,0,0,,copy to NSData of the backing
Dialogue: 0,0:53:58.85,0:53:59.19,Default,,0,0,0,,store.
Dialogue: 0,0:53:59.82,0:54:01.88,Default,,0,0,0,,No additional compression, or
Dialogue: 0,0:54:01.88,0:54:02.98,Default,,0,0,0,,scaling, or anything.
Dialogue: 0,0:54:03.10,0:54:04.83,Default,,0,0,0,,It's all done in advance.
Dialogue: 0,0:54:05.11,0:54:06.50,Default,,0,0,0,,This is much more efficient and
Dialogue: 0,0:54:06.50,0:54:07.50,Default,,0,0,0,,especially when we're dealing
Dialogue: 0,0:54:07.50,0:54:10.03,Default,,0,0,0,,with HEIF, it's necessary to get
Dialogue: 0,0:54:10.24,0:54:12.03,Default,,0,0,0,,all of the performance of that
Dialogue: 0,0:54:12.03,0:54:13.29,Default,,0,0,0,,great tiling format that I
Dialogue: 0,0:54:13.46,0:54:14.22,Default,,0,0,0,,talked about earlier.
Dialogue: 0,0:54:15.29,0:54:16.99,Default,,0,0,0,,Now, let's switch over to a few
Dialogue: 0,0:54:16.99,0:54:18.56,Default,,0,0,0,,performance considerations with
Dialogue: 0,0:54:18.56,0:54:19.71,Default,,0,0,0,,HEVC and HEIF.
Dialogue: 0,0:54:20.39,0:54:22.35,Default,,0,0,0,,The first is what to do about
Dialogue: 0,0:54:22.35,0:54:24.03,Default,,0,0,0,,photos that are taken during
Dialogue: 0,0:54:24.03,0:54:24.93,Default,,0,0,0,,still capture.
Dialogue: 0,0:54:26.41,0:54:28.25,Default,,0,0,0,,When you take a HEIC photo while
Dialogue: 0,0:54:28.25,0:54:30.02,Default,,0,0,0,,capturing a movie, you should be
Dialogue: 0,0:54:30.02,0:54:31.74,Default,,0,0,0,,aware that the same hardware
Dialogue: 0,0:54:31.74,0:54:33.34,Default,,0,0,0,,block that's compressing video,
Dialogue: 0,0:54:33.34,0:54:35.60,Default,,0,0,0,,that is the one that does H.264
Dialogue: 0,0:54:35.60,0:54:38.46,Default,,0,0,0,,or HEVC compression, is also
Dialogue: 0,0:54:38.46,0:54:40.42,Default,,0,0,0,,being asked to do double duty if
Dialogue: 0,0:54:40.42,0:54:43.16,Default,,0,0,0,,you want to encode a HEIC file
Dialogue: 0,0:54:43.37,0:54:45.06,Default,,0,0,0,,where HEVC is the compression
Dialogue: 0,0:54:45.06,0:54:45.48,Default,,0,0,0,,format.
Dialogue: 0,0:54:46.38,0:54:48.64,Default,,0,0,0,,That hardware block may be very
Dialogue: 0,0:54:48.64,0:54:50.49,Default,,0,0,0,,busy indeed if you are capturing
Dialogue: 0,0:54:50.49,0:54:52.35,Default,,0,0,0,,high-bandwidth video such as 4k
Dialogue: 0,0:54:52.35,0:54:54.22,Default,,0,0,0,,30 or 1080p 60.
Dialogue: 0,0:54:55.37,0:54:56.73,Default,,0,0,0,,Video is on a real-time
Dialogue: 0,0:54:56.73,0:54:58.71,Default,,0,0,0,,deadline, so it gets priority
Dialogue: 0,0:54:58.91,0:54:59.55,Default,,0,0,0,,over stills.
Dialogue: 0,0:55:00.10,0:55:01.20,Default,,0,0,0,,This means that it may take
Dialogue: 0,0:55:01.20,0:55:02.76,Default,,0,0,0,,longer to get your still results
Dialogue: 0,0:55:02.76,0:55:05.43,Default,,0,0,0,,back and it also may mean that
Dialogue: 0,0:55:05.43,0:55:06.63,Default,,0,0,0,,there are up to 20 percent
Dialogue: 0,0:55:06.63,0:55:07.90,Default,,0,0,0,,larger than they would be
Dialogue: 0,0:55:07.90,0:55:09.77,Default,,0,0,0,,otherwise because the encoder is
Dialogue: 0,0:55:09.77,0:55:11.10,Default,,0,0,0,,too busy to use all of the
Dialogue: 0,0:55:11.10,0:55:12.54,Default,,0,0,0,,features that it would if it
Dialogue: 0,0:55:12.54,0:55:13.59,Default,,0,0,0,,didn't have to meet that
Dialogue: 0,0:55:13.59,0:55:15.37,Default,,0,0,0,,real-time deadline for 30 or 60
Dialogue: 0,0:55:15.37,0:55:16.12,Default,,0,0,0,,frames a second.
Dialogue: 0,0:55:16.65,0:55:18.57,Default,,0,0,0,,So, our recommendation is if
Dialogue: 0,0:55:18.57,0:55:20.19,Default,,0,0,0,,you're capturing video, and
Dialogue: 0,0:55:20.19,0:55:22.78,Default,,0,0,0,,taking stills at the same time,
Dialogue: 0,0:55:22.78,0:55:23.93,Default,,0,0,0,,you should use JPEG for the
Dialogue: 0,0:55:23.93,0:55:26.68,Default,,0,0,0,,photos to leave the encoder for
Dialogue: 0,0:55:26.68,0:55:29.05,Default,,0,0,0,,HEVC as available as possible
Dialogue: 0,0:55:29.05,0:55:29.66,Default,,0,0,0,,for the video.
Dialogue: 0,0:55:32.30,0:55:34.95,Default,,0,0,0,,Another concern is HEVC and HEIF
Dialogue: 0,0:55:35.03,0:55:35.77,Default,,0,0,0,,bursts.
Dialogue: 0,0:55:36.10,0:55:37.73,Default,,0,0,0,,This is where you mash on the
Dialogue: 0,0:55:37.73,0:55:40.51,Default,,0,0,0,,button and you're trying to get
Dialogue: 0,0:55:40.51,0:55:41.99,Default,,0,0,0,,a constant frame rate maybe 10
Dialogue: 0,0:55:41.99,0:55:44.83,Default,,0,0,0,,frames a second of capture
Dialogue: 0,0:55:44.83,0:55:45.33,Default,,0,0,0,,images.
Dialogue: 0,0:55:46.24,0:55:47.98,Default,,0,0,0,,HEVC encode obviously is doing a
Dialogue: 0,0:55:47.98,0:55:49.42,Default,,0,0,0,,lot more work than JPEG did,
Dialogue: 0,0:55:49.92,0:55:51.42,Default,,0,0,0,,it's delivering a file that's
Dialogue: 0,0:55:51.86,0:55:53.86,Default,,0,0,0,,less half the size of JPEG.
Dialogue: 0,0:55:54.28,0:55:56.09,Default,,0,0,0,,Therefore, HEVC encode does take
Dialogue: 0,0:55:56.09,0:55:56.56,Default,,0,0,0,,longer.
Dialogue: 0,0:55:57.37,0:55:59.29,Default,,0,0,0,,Now we've benchmarked and we're
Dialogue: 0,0:55:59.29,0:56:03.27,Default,,0,0,0,,comfortable that HEVC HEIF can
Dialogue: 0,0:56:03.27,0:56:07.67,Default,,0,0,0,,meet the 10 fps minimum
Dialogue: 0,0:56:07.67,0:56:09.81,Default,,0,0,0,,requirement for bursts, but if
Dialogue: 0,0:56:09.81,0:56:11.36,Default,,0,0,0,,you need to capture at a higher
Dialogue: 0,0:56:11.36,0:56:12.64,Default,,0,0,0,,frame rate than that, our
Dialogue: 0,0:56:12.64,0:56:14.35,Default,,0,0,0,,recommendation is to go back to
Dialogue: 0,0:56:14.35,0:56:15.41,Default,,0,0,0,,JPEG for bursts.
Dialogue: 0,0:56:15.94,0:56:18.77,Default,,0,0,0,,And we've heard a lot about
Dialogue: 0,0:56:18.77,0:56:20.35,Default,,0,0,0,,compression today and I feel I
Dialogue: 0,0:56:20.35,0:56:21.72,Default,,0,0,0,,would remiss if I didn't give
Dialogue: 0,0:56:21.72,0:56:24.39,Default,,0,0,0,,you my thoughts on WWDC.
Dialogue: 0,0:56:24.45,0:56:26.95,Default,,0,0,0,,It is after all a compression
Dialogue: 0,0:56:26.95,0:56:27.30,Default,,0,0,0,,talk.
Dialogue: 0,0:56:28.01,0:56:29.94,Default,,0,0,0,,So, I can't just leave this
Dialogue: 0,0:56:30.12,0:56:30.87,Default,,0,0,0,,dangling there.
Dialogue: 0,0:56:31.85,0:56:33.81,Default,,0,0,0,,World Wide Developer Conference,
Dialogue: 0,0:56:34.64,0:56:35.67,Default,,0,0,0,,nine syllables.
Dialogue: 0,0:56:36.80,0:56:40.47,Default,,0,0,0,,W-W-D-C, eight syllables.
Dialogue: 0,0:56:41.09,0:56:42.78,Default,,0,0,0,,That is like the worst
Dialogue: 0,0:56:42.78,0:56:44.03,Default,,0,0,0,,compression format ever.
Dialogue: 0,0:56:44.09,0:56:47.92,Default,,0,0,0,,It's lossy, it's like .1 to 1
Dialogue: 0,0:56:47.92,0:56:49.19,Default,,0,0,0,,compression ratio, which is even
Dialogue: 0,0:56:49.19,0:56:50.30,Default,,0,0,0,,worse than lossless JPEG.
Dialogue: 0,0:56:51.03,0:56:53.24,Default,,0,0,0,,So, please as a service to me,
Dialogue: 0,0:56:53.63,0:56:55.26,Default,,0,0,0,,for the rest of the conference,
Dialogue: 0,0:56:55.30,0:56:56.71,Default,,0,0,0,,which you please only refer to
Dialogue: 0,0:56:56.71,0:56:59.39,Default,,0,0,0,,conference as Dub-Dub or
Dialogue: 0,0:56:59.58,0:57:00.36,Default,,0,0,0,,Wuh-Duck.
Dialogue: 0,0:57:00.36,0:57:03.92,Default,,0,0,0,,[laughter] All right.
Dialogue: 0,0:57:04.04,0:57:05.11,Default,,0,0,0,,Let's summarize what we learned
Dialogue: 0,0:57:05.11,0:57:05.36,Default,,0,0,0,,today.
Dialogue: 0,0:57:06.80,0:57:09.12,Default,,0,0,0,,HEVC movies are up to 40 percent
Dialogue: 0,0:57:09.12,0:57:10.73,Default,,0,0,0,,smaller for general content than
Dialogue: 0,0:57:10.73,0:57:13.23,Default,,0,0,0,,H.264 and for camera content on
Dialogue: 0,0:57:13.23,0:57:15.46,Default,,0,0,0,,iOS they are 2x smaller.
Dialogue: 0,0:57:16.17,0:57:18.11,Default,,0,0,0,,Also, HEVC playback is supported
Dialogue: 0,0:57:18.11,0:57:20.23,Default,,0,0,0,,everywhere on iOS 11 and High
Dialogue: 0,0:57:20.23,0:57:22.28,Default,,0,0,0,,Sierra, sometimes with software
Dialogue: 0,0:57:22.44,0:57:23.52,Default,,0,0,0,,sometimes with hardware.
Dialogue: 0,0:57:24.19,0:57:26.37,Default,,0,0,0,,And to create HEVC content you
Dialogue: 0,0:57:26.37,0:57:28.50,Default,,0,0,0,,need to opt in to new capture
Dialogue: 0,0:57:28.50,0:57:30.40,Default,,0,0,0,,APIs or new export APIs.
Dialogue: 0,0:57:30.88,0:57:32.27,Default,,0,0,0,,Also, we learned about HEIC
Dialogue: 0,0:57:32.27,0:57:34.61,Default,,0,0,0,,files that they are twice as
Dialogue: 0,0:57:34.61,0:57:37.84,Default,,0,0,0,,small as JPEGs and that decode
Dialogue: 0,0:57:37.84,0:57:39.62,Default,,0,0,0,,is supported everywhere on iOS
Dialogue: 0,0:57:39.62,0:57:42.25,Default,,0,0,0,,11 and macOS where capture is
Dialogue: 0,0:57:42.25,0:57:45.40,Default,,0,0,0,,supported iOS only and where we
Dialogue: 0,0:57:45.40,0:57:47.07,Default,,0,0,0,,have an A10 chip, and you do
Dialogue: 0,0:57:47.07,0:57:47.79,Default,,0,0,0,,that using the new
Dialogue: 0,0:57:47.79,0:57:49.53,Default,,0,0,0,,AVCapturePhoto interface.
Dialogue: 0,0:57:50.05,0:57:52.86,Default,,0,0,0,,For more information, here is
Dialogue: 0,0:57:53.00,0:57:54.53,Default,,0,0,0,,the URL for today's session.
Dialogue: 0,0:57:55.84,0:57:57.50,Default,,0,0,0,,I also wanted to point you to
Dialogue: 0,0:57:57.50,0:57:58.88,Default,,0,0,0,,some sister sessions to this
Dialogue: 0,0:57:58.88,0:58:00.69,Default,,0,0,0,,one, the first one in the list
Dialogue: 0,0:58:00.89,0:58:02.27,Default,,0,0,0,,High Efficiency Image File
Dialogue: 0,0:58:02.27,0:58:03.87,Default,,0,0,0,,Format is one that went straight
Dialogue: 0,0:58:03.87,0:58:04.46,Default,,0,0,0,,to video.
Dialogue: 0,0:58:05.00,0:58:06.26,Default,,0,0,0,,This is where we really delve
Dialogue: 0,0:58:06.26,0:58:09.60,Default,,0,0,0,,deeply into the bits in the HEIF
Dialogue: 0,0:58:09.60,0:58:09.99,Default,,0,0,0,,file.
Dialogue: 0,0:58:10.44,0:58:11.73,Default,,0,0,0,,It's a great, great
Dialogue: 0,0:58:12.21,0:58:13.01,Default,,0,0,0,,presentation.
Dialogue: 0,0:58:13.01,0:58:14.14,Default,,0,0,0,,You should definitely listen to
Dialogue: 0,0:58:14.14,0:58:14.29,Default,,0,0,0,,it.
Dialogue: 0,0:58:14.64,0:58:16.09,Default,,0,0,0,,It's performed by Davide so you
Dialogue: 0,0:58:16.09,0:58:17.34,Default,,0,0,0,,get the nice Italian accent
Dialogue: 0,0:58:17.34,0:58:18.46,Default,,0,0,0,,going at the same time.
Dialogue: 0,0:58:19.46,0:58:21.37,Default,,0,0,0,,Also, the Introducing HEIF and
Dialogue: 0,0:58:21.37,0:58:23.02,Default,,0,0,0,,HEVC which was one Tuesday,
Dialogue: 0,0:58:23.29,0:58:25.14,Default,,0,0,0,,which gave a higher-level
Dialogue: 0,0:58:25.31,0:58:26.78,Default,,0,0,0,,introduction to what we talked
Dialogue: 0,0:58:26.78,0:58:27.35,Default,,0,0,0,,about today.
Dialogue: 0,0:58:27.72,0:58:29.25,Default,,0,0,0,,And finally, the depth sessions
Dialogue: 0,0:58:29.25,0:58:30.21,Default,,0,0,0,,that I've made several
Dialogue: 0,0:58:30.21,0:58:31.93,Default,,0,0,0,,references to, they have several
Dialogue: 0,0:58:31.93,0:58:33.47,Default,,0,0,0,,segues to the auxiliary image
Dialogue: 0,0:58:33.47,0:58:34.86,Default,,0,0,0,,format that we use to store
Dialogue: 0,0:58:35.52,0:58:36.76,Default,,0,0,0,,depth in HEIF.
Dialogue: 0,0:58:38.00,0:58:39.45,Default,,0,0,0,,Thank you and enjoy the rest of
Dialogue: 0,0:58:39.45,0:58:39.75,Default,,0,0,0,,the show.
Dialogue: 0,0:58:40.52,0:58:44.50,Default,,0,0,0,,[ Applause ]
