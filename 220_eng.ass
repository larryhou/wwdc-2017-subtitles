[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:27.56,0:00:28.60,Default,,0,0,0,,>> Good afternoon everybody.
Dialogue: 0,0:00:28.68,0:00:30.42,Default,,0,0,0,,Welcome to session 220,
Dialogue: 0,0:00:30.42,0:00:32.75,Default,,0,0,0,,customize loading in WKWebView.
Dialogue: 0,0:00:33.71,0:00:34.81,Default,,0,0,0,,My name is Brady Eidson.
Dialogue: 0,0:00:34.81,0:00:36.38,Default,,0,0,0,,I'm a software engineer on this
Dialogue: 0,0:00:36.38,0:00:37.64,Default,,0,0,0,,[inaudible] teams at Apple.
Dialogue: 0,0:00:37.64,0:00:38.99,Default,,0,0,0,,A little later I'll be joined up
Dialogue: 0,0:00:38.99,0:00:40.69,Default,,0,0,0,,here with my colleague, Alex
Dialogue: 0,0:00:40.69,0:00:41.22,Default,,0,0,0,,Christensen.
Dialogue: 0,0:00:41.75,0:00:43.55,Default,,0,0,0,,Let's just start out with a
Dialogue: 0,0:00:43.55,0:00:44.22,Default,,0,0,0,,quick question.
Dialogue: 0,0:00:44.38,0:00:46.46,Default,,0,0,0,,How many of you integrate web
Dialogue: 0,0:00:46.46,0:00:47.97,Default,,0,0,0,,content into your applications?
Dialogue: 0,0:00:48.48,0:00:50.57,Default,,0,0,0,,You're probably all in the right
Dialogue: 0,0:00:50.57,0:00:50.88,Default,,0,0,0,,room.
Dialogue: 0,0:00:51.88,0:00:52.99,Default,,0,0,0,,Now a follow up.
Dialogue: 0,0:00:52.99,0:00:54.24,Default,,0,0,0,,How many of you have used
Dialogue: 0,0:00:54.24,0:00:56.24,Default,,0,0,0,,WKWebView to integrate that web
Dialogue: 0,0:00:56.24,0:00:56.68,Default,,0,0,0,,content?
Dialogue: 0,0:00:57.39,0:00:58.55,Default,,0,0,0,,Fewer hands came up.
Dialogue: 0,0:00:58.55,0:00:59.44,Default,,0,0,0,,Still a lot of you though.
Dialogue: 0,0:00:59.66,0:01:02.05,Default,,0,0,0,,So I'm very excited to talk
Dialogue: 0,0:01:02.05,0:01:03.86,Default,,0,0,0,,about some great new APIs in
Dialogue: 0,0:01:03.86,0:01:05.79,Default,,0,0,0,,WKWebView that will help all of
Dialogue: 0,0:01:05.79,0:01:07.04,Default,,0,0,0,,you who are already using
Dialogue: 0,0:01:07.04,0:01:09.11,Default,,0,0,0,,WKWebView do some cool new
Dialogue: 0,0:01:09.11,0:01:11.57,Default,,0,0,0,,things and hopefully adopt --
Dialogue: 0,0:01:11.57,0:01:13.29,Default,,0,0,0,,help the rest of you to adopt
Dialogue: 0,0:01:13.29,0:01:13.99,Default,,0,0,0,,WKWebView.
Dialogue: 0,0:01:16.81,0:01:19.67,Default,,0,0,0,,Apple is a big believer in web
Dialogue: 0,0:01:19.67,0:01:20.51,Default,,0,0,0,,technologies.
Dialogue: 0,0:01:20.99,0:01:23.08,Default,,0,0,0,,We know how important they are
Dialogue: 0,0:01:23.08,0:01:25.40,Default,,0,0,0,,to our developers, our users,
Dialogue: 0,0:01:25.51,0:01:26.66,Default,,0,0,0,,and your users.
Dialogue: 0,0:01:27.20,0:01:29.21,Default,,0,0,0,,We have a handful of different
Dialogue: 0,0:01:29.21,0:01:30.87,Default,,0,0,0,,technologies you can use to
Dialogue: 0,0:01:30.87,0:01:32.21,Default,,0,0,0,,integrate web content in your
Dialogue: 0,0:01:32.21,0:01:32.75,Default,,0,0,0,,application.
Dialogue: 0,0:01:33.89,0:01:35.56,Default,,0,0,0,,Today's talk is primarily about
Dialogue: 0,0:01:35.56,0:01:38.01,Default,,0,0,0,,WKWebView but I do briefly want
Dialogue: 0,0:01:38.01,0:01:39.95,Default,,0,0,0,,to mention a different one which
Dialogue: 0,0:01:39.95,0:01:41.52,Default,,0,0,0,,is Safari View Controller.
Dialogue: 0,0:01:42.61,0:01:45.04,Default,,0,0,0,,If you need an in app web
Dialogue: 0,0:01:45.04,0:01:47.52,Default,,0,0,0,,browsing experience, Safari View
Dialogue: 0,0:01:47.52,0:01:48.94,Default,,0,0,0,,Controller is, by far, the
Dialogue: 0,0:01:48.94,0:01:50.22,Default,,0,0,0,,preferred way for you to go.
Dialogue: 0,0:01:51.52,0:01:53.22,Default,,0,0,0,,Using just a few lines of code,
Dialogue: 0,0:01:53.51,0:01:55.32,Default,,0,0,0,,you can integrate a powerful
Dialogue: 0,0:01:55.32,0:01:57.36,Default,,0,0,0,,secure web browser into your
Dialogue: 0,0:01:57.54,0:01:57.82,Default,,0,0,0,,app.
Dialogue: 0,0:01:58.27,0:01:59.35,Default,,0,0,0,,You don't even need to worry
Dialogue: 0,0:01:59.35,0:02:00.27,Default,,0,0,0,,about adding the UI.
Dialogue: 0,0:02:00.90,0:02:05.10,Default,,0,0,0,,But underneath that UI is web
Dialogue: 0,0:02:05.10,0:02:05.54,Default,,0,0,0,,content.
Dialogue: 0,0:02:06.24,0:02:08.96,Default,,0,0,0,,And many of you have much deeper
Dialogue: 0,0:02:08.96,0:02:10.87,Default,,0,0,0,,needs than a straight forward
Dialogue: 0,0:02:10.87,0:02:12.46,Default,,0,0,0,,web browsing experience can
Dialogue: 0,0:02:12.46,0:02:12.95,Default,,0,0,0,,fulfill.
Dialogue: 0,0:02:13.87,0:02:16.60,Default,,0,0,0,,You need customization of the
Dialogue: 0,0:02:16.60,0:02:19.43,Default,,0,0,0,,behavior of the loading of the
Dialogue: 0,0:02:19.43,0:02:22.15,Default,,0,0,0,,web content of how it renders,
Dialogue: 0,0:02:22.41,0:02:24.92,Default,,0,0,0,,of how it interacts with your
Dialogue: 0,0:02:24.92,0:02:25.74,Default,,0,0,0,,native UI.
Dialogue: 0,0:02:26.44,0:02:29.07,Default,,0,0,0,,In fact, many of you might be
Dialogue: 0,0:02:29.12,0:02:31.06,Default,,0,0,0,,integrating the web content into
Dialogue: 0,0:02:31.06,0:02:32.54,Default,,0,0,0,,your native UI in such a way
Dialogue: 0,0:02:32.54,0:02:33.92,Default,,0,0,0,,that it's not even obvious
Dialogue: 0,0:02:33.92,0:02:35.65,Default,,0,0,0,,you're using web content at all.
Dialogue: 0,0:02:39.28,0:02:43.04,Default,,0,0,0,,If this is you, then WKWebView
Dialogue: 0,0:02:43.47,0:02:46.64,Default,,0,0,0,,is, by far, the preferred way to
Dialogue: 0,0:02:46.64,0:02:46.86,Default,,0,0,0,,go.
Dialogue: 0,0:02:46.86,0:02:50.25,Default,,0,0,0,,Now I want to briefly talk about
Dialogue: 0,0:02:50.25,0:02:51.58,Default,,0,0,0,,WKWebView's architecture.
Dialogue: 0,0:02:52.75,0:02:54.67,Default,,0,0,0,,When you integrate web content
Dialogue: 0,0:02:54.67,0:02:56.10,Default,,0,0,0,,into your application using
Dialogue: 0,0:02:56.10,0:02:59.56,Default,,0,0,0,,WKWebView, you are inviting the
Dialogue: 0,0:02:59.56,0:03:01.38,Default,,0,0,0,,entire web platform into your
Dialogue: 0,0:03:01.38,0:03:03.74,Default,,0,0,0,,application with all of its
Dialogue: 0,0:03:03.74,0:03:05.64,Default,,0,0,0,,power, all of its flexibility
Dialogue: 0,0:03:05.87,0:03:07.81,Default,,0,0,0,,but also all of its complexity.
Dialogue: 0,0:03:09.60,0:03:12.08,Default,,0,0,0,,So WKWebView isolates your
Dialogue: 0,0:03:12.08,0:03:14.11,Default,,0,0,0,,application from this complexity
Dialogue: 0,0:03:14.42,0:03:15.72,Default,,0,0,0,,as best we know how.
Dialogue: 0,0:03:16.30,0:03:19.00,Default,,0,0,0,,It does this using process
Dialogue: 0,0:03:19.00,0:03:19.71,Default,,0,0,0,,isolation.
Dialogue: 0,0:03:20.41,0:03:22.37,Default,,0,0,0,,We load the web content and
Dialogue: 0,0:03:22.37,0:03:23.58,Default,,0,0,0,,render it and execute
Dialogue: 0,0:03:23.58,0:03:25.18,Default,,0,0,0,,JavaScript, that type of stuff,
Dialogue: 0,0:03:25.44,0:03:27.40,Default,,0,0,0,,in a separate process from your
Dialogue: 0,0:03:27.40,0:03:28.55,Default,,0,0,0,,application's process.
Dialogue: 0,0:03:29.87,0:03:31.42,Default,,0,0,0,,This gives us some fantastic
Dialogue: 0,0:03:31.52,0:03:32.72,Default,,0,0,0,,security benefits.
Dialogue: 0,0:03:33.29,0:03:35.17,Default,,0,0,0,,We can protect your application
Dialogue: 0,0:03:35.45,0:03:37.02,Default,,0,0,0,,from potentially malicious web
Dialogue: 0,0:03:37.02,0:03:37.50,Default,,0,0,0,,content.
Dialogue: 0,0:03:38.03,0:03:40.43,Default,,0,0,0,,In fact, different bits of web
Dialogue: 0,0:03:40.43,0:03:41.88,Default,,0,0,0,,content can each run in their
Dialogue: 0,0:03:41.88,0:03:43.29,Default,,0,0,0,,own web process.
Dialogue: 0,0:03:43.84,0:03:45.60,Default,,0,0,0,,So we can protect your trusted
Dialogue: 0,0:03:45.60,0:03:47.16,Default,,0,0,0,,web content from other
Dialogue: 0,0:03:47.16,0:03:48.30,Default,,0,0,0,,potentially malicious web
Dialogue: 0,0:03:48.30,0:03:48.70,Default,,0,0,0,,content.
Dialogue: 0,0:03:50.14,0:03:51.84,Default,,0,0,0,,This also opens up some great
Dialogue: 0,0:03:51.96,0:03:53.30,Default,,0,0,0,,performance benefits.
Dialogue: 0,0:03:53.54,0:03:54.63,Default,,0,0,0,,Web content can be run
Dialogue: 0,0:03:54.86,0:03:55.77,Default,,0,0,0,,concurrently with your
Dialogue: 0,0:03:55.77,0:03:57.28,Default,,0,0,0,,application because of the
Dialogue: 0,0:03:57.28,0:03:59.30,Default,,0,0,0,,security, we can enable the
Dialogue: 0,0:03:59.30,0:04:00.72,Default,,0,0,0,,advanced JavaScript Just-In-Time
Dialogue: 0,0:04:00.72,0:04:01.27,Default,,0,0,0,,compiler.
Dialogue: 0,0:04:01.81,0:04:05.38,Default,,0,0,0,,But because all this is
Dialogue: 0,0:04:05.38,0:04:06.86,Default,,0,0,0,,happening in a separate process,
Dialogue: 0,0:04:07.34,0:04:08.88,Default,,0,0,0,,the normal steps you would take
Dialogue: 0,0:04:09.09,0:04:11.63,Default,,0,0,0,,to configure your process don't
Dialogue: 0,0:04:11.63,0:04:13.17,Default,,0,0,0,,apply to the web content.
Dialogue: 0,0:04:13.80,0:04:15.90,Default,,0,0,0,,We need explicit APIs to
Dialogue: 0,0:04:15.90,0:04:17.43,Default,,0,0,0,,interact with the web content.
Dialogue: 0,0:04:18.77,0:04:20.01,Default,,0,0,0,,And every since we introduced
Dialogue: 0,0:04:20.01,0:04:22.29,Default,,0,0,0,,WKWebView, we've been gathering
Dialogue: 0,0:04:22.29,0:04:23.95,Default,,0,0,0,,feedback from developers of all
Dialogue: 0,0:04:23.95,0:04:25.48,Default,,0,0,0,,types working on all sorts of
Dialogue: 0,0:04:25.48,0:04:26.27,Default,,0,0,0,,applications.
Dialogue: 0,0:04:27.14,0:04:29.60,Default,,0,0,0,,And we've compiled a list of a
Dialogue: 0,0:04:29.60,0:04:31.52,Default,,0,0,0,,top three that we're going to
Dialogue: 0,0:04:31.52,0:04:32.40,Default,,0,0,0,,introduce today.
Dialogue: 0,0:04:32.40,0:04:34.34,Default,,0,0,0,,And we think that these three
Dialogue: 0,0:04:34.34,0:04:37.00,Default,,0,0,0,,new mechanisms will unlock some
Dialogue: 0,0:04:37.00,0:04:38.38,Default,,0,0,0,,pretty powerful capabilities
Dialogue: 0,0:04:38.58,0:04:39.68,Default,,0,0,0,,that you guys have been asking
Dialogue: 0,0:04:39.68,0:04:39.88,Default,,0,0,0,,for.
Dialogue: 0,0:04:43.05,0:04:44.33,Default,,0,0,0,,So first we're going to
Dialogue: 0,0:04:44.33,0:04:46.24,Default,,0,0,0,,introduce a way to manage
Dialogue: 0,0:04:46.35,0:04:48.63,Default,,0,0,0,,cookies visible to a WKWebView.
Dialogue: 0,0:04:48.63,0:04:52.68,Default,,0,0,0,,We're going to introduce a
Dialogue: 0,0:04:52.68,0:04:53.88,Default,,0,0,0,,fantastic mechanism for
Dialogue: 0,0:04:53.88,0:04:56.96,Default,,0,0,0,,filtering unwanted content from
Dialogue: 0,0:04:57.02,0:04:57.71,Default,,0,0,0,,your WebView.
Dialogue: 0,0:04:58.11,0:05:02.47,Default,,0,0,0,,And finally, a way for you to
Dialogue: 0,0:05:02.47,0:05:04.57,Default,,0,0,0,,provide custom resources to web
Dialogue: 0,0:05:04.57,0:05:07.29,Default,,0,0,0,,content no matter where you have
Dialogue: 0,0:05:07.29,0:05:08.40,Default,,0,0,0,,the data for those custom
Dialogue: 0,0:05:08.40,0:05:09.02,Default,,0,0,0,,resources.
Dialogue: 0,0:05:09.02,0:05:10.24,Default,,0,0,0,,Wherever -- no matter where it
Dialogue: 0,0:05:10.24,0:05:10.66,Default,,0,0,0,,comes from.
Dialogue: 0,0:05:11.20,0:05:15.52,Default,,0,0,0,,So first managing cookies.
Dialogue: 0,0:05:16.04,0:05:18.54,Default,,0,0,0,,We actually know that a lot of
Dialogue: 0,0:05:18.84,0:05:20.40,Default,,0,0,0,,the developers dipping their
Dialogue: 0,0:05:20.40,0:05:22.26,Default,,0,0,0,,toes in the waters of WKWebView
Dialogue: 0,0:05:22.44,0:05:23.64,Default,,0,0,0,,are pretty new to the web
Dialogue: 0,0:05:23.64,0:05:24.12,Default,,0,0,0,,platform.
Dialogue: 0,0:05:24.93,0:05:25.98,Default,,0,0,0,,So I briefly want to go over
Dialogue: 0,0:05:26.15,0:05:28.31,Default,,0,0,0,,what is a cookie?
Dialogue: 0,0:05:28.82,0:05:30.38,Default,,0,0,0,,When a webpage is rendered in a
Dialogue: 0,0:05:30.38,0:05:32.38,Default,,0,0,0,,browser engine, a lot of sub
Dialogue: 0,0:05:32.38,0:05:33.22,Default,,0,0,0,,resources come up.
Dialogue: 0,0:05:33.47,0:05:36.24,Default,,0,0,0,,Images, JavaScript files, style
Dialogue: 0,0:05:36.24,0:05:38.09,Default,,0,0,0,,sheets, things like that.
Dialogue: 0,0:05:38.50,0:05:40.60,Default,,0,0,0,,For each sub resource, we need
Dialogue: 0,0:05:40.60,0:05:42.04,Default,,0,0,0,,to make a request to the server.
Dialogue: 0,0:05:42.23,0:05:44.34,Default,,0,0,0,,The server needs to respond with
Dialogue: 0,0:05:44.39,0:05:46.55,Default,,0,0,0,,the data of the resource itself
Dialogue: 0,0:05:47.14,0:05:48.37,Default,,0,0,0,,and some meta data about the
Dialogue: 0,0:05:48.37,0:05:48.90,Default,,0,0,0,,resource.
Dialogue: 0,0:05:49.40,0:05:51.58,Default,,0,0,0,,And both the requests and the
Dialogue: 0,0:05:51.58,0:05:53.22,Default,,0,0,0,,responses include little bits of
Dialogue: 0,0:05:53.22,0:05:54.23,Default,,0,0,0,,data called cookies.
Dialogue: 0,0:05:55.42,0:05:56.68,Default,,0,0,0,,The server will respond with a
Dialogue: 0,0:05:56.68,0:05:58.41,Default,,0,0,0,,cookie which the browser
Dialogue: 0,0:05:58.41,0:06:00.39,Default,,0,0,0,,remembers and can send back out
Dialogue: 0,0:06:00.39,0:06:01.63,Default,,0,0,0,,to the server in future
Dialogue: 0,0:06:01.63,0:06:02.33,Default,,0,0,0,,requests.
Dialogue: 0,0:06:03.21,0:06:04.86,Default,,0,0,0,,This helps track a user's
Dialogue: 0,0:06:04.86,0:06:06.29,Default,,0,0,0,,session when using a web
Dialogue: 0,0:06:06.29,0:06:06.98,Default,,0,0,0,,application.
Dialogue: 0,0:06:07.65,0:06:09.73,Default,,0,0,0,,Things like their log in
Dialogue: 0,0:06:09.73,0:06:10.32,Default,,0,0,0,,credentials.
Dialogue: 0,0:06:10.32,0:06:12.02,Default,,0,0,0,,Their log in state, a log in
Dialogue: 0,0:06:12.02,0:06:12.52,Default,,0,0,0,,token.
Dialogue: 0,0:06:13.06,0:06:14.64,Default,,0,0,0,,Or if it's a shopping
Dialogue: 0,0:06:14.64,0:06:17.01,Default,,0,0,0,,application, perhaps, the state
Dialogue: 0,0:06:17.01,0:06:18.17,Default,,0,0,0,,of their shopping cart and
Dialogue: 0,0:06:18.17,0:06:20.47,Default,,0,0,0,,what's in it.
Dialogue: 0,0:06:20.97,0:06:22.07,Default,,0,0,0,,When you're integrating web
Dialogue: 0,0:06:22.07,0:06:23.23,Default,,0,0,0,,content into your native
Dialogue: 0,0:06:23.23,0:06:26.15,Default,,0,0,0,,application, you often need to
Dialogue: 0,0:06:26.15,0:06:27.64,Default,,0,0,0,,manipulate these bits of data.
Dialogue: 0,0:06:28.88,0:06:31.10,Default,,0,0,0,,You might know things ahead of
Dialogue: 0,0:06:31.10,0:06:32.98,Default,,0,0,0,,time to help prompt prime the
Dialogue: 0,0:06:32.98,0:06:33.44,Default,,0,0,0,,WebView.
Dialogue: 0,0:06:33.44,0:06:35.74,Default,,0,0,0,,To make the experience smoother.
Dialogue: 0,0:06:35.74,0:06:38.58,Default,,0,0,0,,You might need to do something
Dialogue: 0,0:06:38.58,0:06:40.32,Default,,0,0,0,,like add a log out button where
Dialogue: 0,0:06:40.32,0:06:41.50,Default,,0,0,0,,you could just delete the
Dialogue: 0,0:06:41.50,0:06:43.19,Default,,0,0,0,,session cookie or the cookie
Dialogue: 0,0:06:43.19,0:06:45.04,Default,,0,0,0,,representing the user's session
Dialogue: 0,0:06:45.04,0:06:46.06,Default,,0,0,0,,log in.
Dialogue: 0,0:06:47.62,0:06:49.80,Default,,0,0,0,,There's also other -- another
Dialogue: 0,0:06:49.87,0:06:51.69,Default,,0,0,0,,type of why you need -- might
Dialogue: 0,0:06:51.69,0:06:53.46,Default,,0,0,0,,need to manage cookies which is
Dialogue: 0,0:06:53.46,0:06:54.98,Default,,0,0,0,,the opposite of helping the
Dialogue: 0,0:06:54.98,0:06:55.75,Default,,0,0,0,,session along.
Dialogue: 0,0:06:56.05,0:06:57.52,Default,,0,0,0,,You might need to protect the
Dialogue: 0,0:06:57.58,0:06:59.38,Default,,0,0,0,,user from having a session
Dialogue: 0,0:06:59.38,0:07:02.43,Default,,0,0,0,,tracked for certain types of
Dialogue: 0,0:07:02.43,0:07:03.88,Default,,0,0,0,,applications and perhaps,
Dialogue: 0,0:07:03.88,0:07:05.59,Default,,0,0,0,,certain types of users this is
Dialogue: 0,0:07:05.59,0:07:07.34,Default,,0,0,0,,becoming more and more important
Dialogue: 0,0:07:07.34,0:07:09.11,Default,,0,0,0,,to be aware of these days.
Dialogue: 0,0:07:10.40,0:07:12.22,Default,,0,0,0,,So whatever your reason is to
Dialogue: 0,0:07:12.22,0:07:13.61,Default,,0,0,0,,manipulate the cookies visible
Dialogue: 0,0:07:13.61,0:07:15.79,Default,,0,0,0,,to a WKWebView, the new API,
Dialogue: 0,0:07:15.79,0:07:19.10,Default,,0,0,0,,WKHTTPCookieStore, will do what
Dialogue: 0,0:07:19.10,0:07:21.50,Default,,0,0,0,,you need it to do.
Dialogue: 0,0:07:22.32,0:07:25.04,Default,,0,0,0,,Using the HTTPCookieStore, you
Dialogue: 0,0:07:25.08,0:07:26.88,Default,,0,0,0,,can add and remove individual
Dialogue: 0,0:07:26.88,0:07:28.38,Default,,0,0,0,,cookies visible to a WebView.
Dialogue: 0,0:07:29.72,0:07:32.68,Default,,0,0,0,,Pretty straight forward.
Dialogue: 0,0:07:32.68,0:07:35.23,Default,,0,0,0,,You can also get a list of all
Dialogue: 0,0:07:35.23,0:07:36.55,Default,,0,0,0,,of the cookies visible in the
Dialogue: 0,0:07:36.55,0:07:36.81,Default,,0,0,0,,WebView.
Dialogue: 0,0:07:36.81,0:07:39.10,Default,,0,0,0,,You know if you're a veteran
Dialogue: 0,0:07:39.58,0:07:41.78,Default,,0,0,0,,WKWebView user, you might have
Dialogue: 0,0:07:41.78,0:07:43.53,Default,,0,0,0,,used JavaScript to get the
Dialogue: 0,0:07:43.53,0:07:46.26,Default,,0,0,0,,cookies visible to the current
Dialogue: 0,0:07:46.26,0:07:48.04,Default,,0,0,0,,document displayed in a WebView
Dialogue: 0,0:07:49.07,0:07:50.20,Default,,0,0,0,,but when you do that, you didn't
Dialogue: 0,0:07:50.20,0:07:52.74,Default,,0,0,0,,get at the http only cookies
Dialogue: 0,0:07:52.89,0:07:53.71,Default,,0,0,0,,that are supposed to be hidden
Dialogue: 0,0:07:53.71,0:07:54.46,Default,,0,0,0,,from JavaScript.
Dialogue: 0,0:07:55.22,0:07:56.38,Default,,0,0,0,,Now that is possible.
Dialogue: 0,0:07:56.68,0:08:00.93,Default,,0,0,0,,And then finally it adds a
Dialogue: 0,0:08:00.93,0:08:02.57,Default,,0,0,0,,mechanism for you to observe
Dialogue: 0,0:08:02.57,0:08:03.85,Default,,0,0,0,,changes to the cookie store.
Dialogue: 0,0:08:04.59,0:08:06.08,Default,,0,0,0,,While you might be specifically
Dialogue: 0,0:08:06.08,0:08:08.00,Default,,0,0,0,,adding or removing cookies from
Dialogue: 0,0:08:08.00,0:08:10.22,Default,,0,0,0,,the cookie store, any resource
Dialogue: 0,0:08:10.22,0:08:11.54,Default,,0,0,0,,requests that goes to a server
Dialogue: 0,0:08:11.54,0:08:13.07,Default,,0,0,0,,and comes back could also add
Dialogue: 0,0:08:13.07,0:08:15.05,Default,,0,0,0,,new cookies to the store or
Dialogue: 0,0:08:15.05,0:08:16.71,Default,,0,0,0,,JavaScript executed in a page
Dialogue: 0,0:08:16.84,0:08:17.94,Default,,0,0,0,,could add new cookies.
Dialogue: 0,0:08:18.28,0:08:20.16,Default,,0,0,0,,And you can now observe those
Dialogue: 0,0:08:20.16,0:08:20.71,Default,,0,0,0,,changes.
Dialogue: 0,0:08:22.63,0:08:24.90,Default,,0,0,0,,So you can get to a specific
Dialogue: 0,0:08:24.90,0:08:27.28,Default,,0,0,0,,WKWebView cookie's store through
Dialogue: 0,0:08:27.28,0:08:28.64,Default,,0,0,0,,its website data store.
Dialogue: 0,0:08:29.29,0:08:30.47,Default,,0,0,0,,This is already a property
Dialogue: 0,0:08:30.47,0:08:31.83,Default,,0,0,0,,that's exposed on a WebView's
Dialogue: 0,0:08:31.83,0:08:32.63,Default,,0,0,0,,configuration.
Dialogue: 0,0:08:32.93,0:08:34.33,Default,,0,0,0,,And now the website data store
Dialogue: 0,0:08:34.33,0:08:35.97,Default,,0,0,0,,itself has a new property to get
Dialogue: 0,0:08:35.97,0:08:36.64,Default,,0,0,0,,to the cookie store.
Dialogue: 0,0:08:36.64,0:08:42.03,Default,,0,0,0,,To add a cookie, you use the
Dialogue: 0,0:08:42.03,0:08:44.15,Default,,0,0,0,,already established HTTPCookie
Dialogue: 0,0:08:44.15,0:08:46.32,Default,,0,0,0,,API to construct the cookie
Dialogue: 0,0:08:46.32,0:08:47.60,Default,,0,0,0,,object you'd like to put in the
Dialogue: 0,0:08:47.60,0:08:48.11,Default,,0,0,0,,data store.
Dialogue: 0,0:08:48.90,0:08:52.38,Default,,0,0,0,,The specifics of this are up to
Dialogue: 0,0:08:52.38,0:08:53.99,Default,,0,0,0,,you and the web service you are
Dialogue: 0,0:08:53.99,0:08:56.17,Default,,0,0,0,,interacting with but once you
Dialogue: 0,0:08:56.17,0:08:57.18,Default,,0,0,0,,have the cookie all set and
Dialogue: 0,0:08:57.18,0:08:59.71,Default,,0,0,0,,ready to go, you'll call set
Dialogue: 0,0:08:59.74,0:09:00.96,Default,,0,0,0,,cookie on the cookie store with
Dialogue: 0,0:09:01.00,0:09:01.40,Default,,0,0,0,,your cookie.
Dialogue: 0,0:09:02.51,0:09:03.42,Default,,0,0,0,,Now you'll notice there's your
Dialogue: 0,0:09:03.42,0:09:04.53,Default,,0,0,0,,trailing closure here, a
Dialogue: 0,0:09:04.53,0:09:05.44,Default,,0,0,0,,completion handler.
Dialogue: 0,0:09:05.91,0:09:08.32,Default,,0,0,0,,This process is asynchronous and
Dialogue: 0,0:09:08.32,0:09:09.74,Default,,0,0,0,,it needs to send out to all
Dialogue: 0,0:09:09.74,0:09:12.11,Default,,0,0,0,,those processes involved in the
Dialogue: 0,0:09:12.11,0:09:14.52,Default,,0,0,0,,WKWebView mechanism that are
Dialogue: 0,0:09:14.52,0:09:15.92,Default,,0,0,0,,isolated from your application.
Dialogue: 0,0:09:16.11,0:09:18.15,Default,,0,0,0,,So you need to wait until WebKit
Dialogue: 0,0:09:18.15,0:09:19.70,Default,,0,0,0,,decides it's all done and ready
Dialogue: 0,0:09:19.70,0:09:20.10,Default,,0,0,0,,to go.
Dialogue: 0,0:09:20.10,0:09:21.97,Default,,0,0,0,,And you can be confident in your
Dialogue: 0,0:09:21.97,0:09:23.72,Default,,0,0,0,,completion handler that any
Dialogue: 0,0:09:23.72,0:09:25.02,Default,,0,0,0,,request you load in the WebView
Dialogue: 0,0:09:25.36,0:09:26.87,Default,,0,0,0,,will have that cookie applied.
Dialogue: 0,0:09:30.18,0:09:31.55,Default,,0,0,0,,If you need to manipulate the
Dialogue: 0,0:09:31.55,0:09:33.78,Default,,0,0,0,,existing cookies, you can get at
Dialogue: 0,0:09:33.78,0:09:34.96,Default,,0,0,0,,the set of all cookies.
Dialogue: 0,0:09:36.01,0:09:37.16,Default,,0,0,0,,Again in your completion
Dialogue: 0,0:09:37.16,0:09:38.59,Default,,0,0,0,,handler, you'll have a set of
Dialogue: 0,0:09:38.59,0:09:39.68,Default,,0,0,0,,the cookies and you can walk
Dialogue: 0,0:09:39.68,0:09:40.80,Default,,0,0,0,,through and find the right one.
Dialogue: 0,0:09:41.39,0:09:42.62,Default,,0,0,0,,In this illustration, we're
Dialogue: 0,0:09:42.81,0:09:44.39,Default,,0,0,0,,going for logging the user out
Dialogue: 0,0:09:44.39,0:09:45.76,Default,,0,0,0,,by finding the log in cookie.
Dialogue: 0,0:09:46.29,0:09:49.34,Default,,0,0,0,,And then we'll call delete and
Dialogue: 0,0:09:49.34,0:09:50.14,Default,,0,0,0,,get rid of that cookie.
Dialogue: 0,0:09:50.99,0:09:52.17,Default,,0,0,0,,And again, in our completion
Dialogue: 0,0:09:52.17,0:09:53.90,Default,,0,0,0,,handler, we will know that any
Dialogue: 0,0:09:53.90,0:09:55.12,Default,,0,0,0,,future requests in the WebView
Dialogue: 0,0:09:55.36,0:09:56.52,Default,,0,0,0,,will have that cookie removed.
Dialogue: 0,0:09:56.91,0:09:58.29,Default,,0,0,0,,And those are the basics of
Dialogue: 0,0:09:58.29,0:10:00.02,Default,,0,0,0,,managing cookies using
Dialogue: 0,0:10:00.07,0:10:01.50,Default,,0,0,0,,WKHTTPCookieStore.
Dialogue: 0,0:10:02.09,0:10:03.38,Default,,0,0,0,,We'll see a little bit more
Dialogue: 0,0:10:03.38,0:10:04.94,Default,,0,0,0,,about that later but I'd like to
Dialogue: 0,0:10:04.94,0:10:07.48,Default,,0,0,0,,move on to filtering unwanted
Dialogue: 0,0:10:08.84,0:10:09.09,Default,,0,0,0,,content.
Dialogue: 0,0:10:10.13,0:10:11.79,Default,,0,0,0,,When you a load page in a
Dialogue: 0,0:10:11.79,0:10:13.66,Default,,0,0,0,,WebView, an HTML document,
Dialogue: 0,0:10:14.44,0:10:15.78,Default,,0,0,0,,there's all those sub resources
Dialogue: 0,0:10:15.93,0:10:17.02,Default,,0,0,0,,that are loaded that I already
Dialogue: 0,0:10:17.02,0:10:17.45,Default,,0,0,0,,mentioned.
Dialogue: 0,0:10:18.57,0:10:20.11,Default,,0,0,0,,And there's a number of reasons
Dialogue: 0,0:10:20.11,0:10:21.57,Default,,0,0,0,,why you need to make on a
Dialogue: 0,0:10:21.57,0:10:23.96,Default,,0,0,0,,resource by resource basis a
Dialogue: 0,0:10:23.96,0:10:25.22,Default,,0,0,0,,decision about whether or not to
Dialogue: 0,0:10:25.22,0:10:27.22,Default,,0,0,0,,load the resource or otherwise,
Dialogue: 0,0:10:27.22,0:10:28.29,Default,,0,0,0,,change how the resource is
Dialogue: 0,0:10:28.29,0:10:28.68,Default,,0,0,0,,loaded.
Dialogue: 0,0:10:29.23,0:10:31.60,Default,,0,0,0,,A common case we hear from
Dialogue: 0,0:10:31.60,0:10:33.50,Default,,0,0,0,,developers is they're working on
Dialogue: 0,0:10:33.50,0:10:36.08,Default,,0,0,0,,a browser targeted for schools,
Dialogue: 0,0:10:36.08,0:10:37.76,Default,,0,0,0,,libraries, some other public
Dialogue: 0,0:10:37.76,0:10:40.59,Default,,0,0,0,,place where the content loaded
Dialogue: 0,0:10:40.59,0:10:41.89,Default,,0,0,0,,in the browser has to be family
Dialogue: 0,0:10:41.89,0:10:42.32,Default,,0,0,0,,friendly.
Dialogue: 0,0:10:42.62,0:10:43.79,Default,,0,0,0,,So we need to filter out
Dialogue: 0,0:10:43.79,0:10:45.47,Default,,0,0,0,,everything is not family
Dialogue: 0,0:10:45.47,0:10:45.80,Default,,0,0,0,,friendly.
Dialogue: 0,0:10:46.32,0:10:50.21,Default,,0,0,0,,In a similar vane, we've heard
Dialogue: 0,0:10:50.21,0:10:51.16,Default,,0,0,0,,from developers working on
Dialogue: 0,0:10:51.16,0:10:52.90,Default,,0,0,0,,corporate intranet applications
Dialogue: 0,0:10:53.34,0:10:54.60,Default,,0,0,0,,that they have varying needs
Dialogue: 0,0:10:54.60,0:10:55.48,Default,,0,0,0,,within the same app.
Dialogue: 0,0:10:55.56,0:10:57.58,Default,,0,0,0,,One WebView might need to block
Dialogue: 0,0:10:57.58,0:10:59.51,Default,,0,0,0,,all content that is not coming
Dialogue: 0,0:10:59.51,0:11:00.60,Default,,0,0,0,,from the corporate's network.
Dialogue: 0,0:11:01.04,0:11:02.27,Default,,0,0,0,,Another WebView might need to
Dialogue: 0,0:11:02.27,0:11:04.33,Default,,0,0,0,,block all content coming from
Dialogue: 0,0:11:04.45,0:11:06.00,Default,,0,0,0,,certain specific servers.
Dialogue: 0,0:11:06.49,0:11:07.94,Default,,0,0,0,,You can have each WebView setup
Dialogue: 0,0:11:08.30,0:11:10.98,Default,,0,0,0,,to do its own thing on a per sub
Dialogue: 0,0:11:10.98,0:11:11.87,Default,,0,0,0,,resource basis.
Dialogue: 0,0:11:15.54,0:11:16.87,Default,,0,0,0,,And then there's insecure
Dialogue: 0,0:11:16.87,0:11:17.36,Default,,0,0,0,,content.
Dialogue: 0,0:11:17.97,0:11:19.40,Default,,0,0,0,,We can upgrade it to be as
Dialogue: 0,0:11:19.40,0:11:21.31,Default,,0,0,0,,secure as we possibly know how.
Dialogue: 0,0:11:21.72,0:11:23.45,Default,,0,0,0,,This can help keep our user's
Dialogue: 0,0:11:23.45,0:11:25.27,Default,,0,0,0,,data and their browsing activity
Dialogue: 0,0:11:25.43,0:11:26.90,Default,,0,0,0,,and our app's browsing activity
Dialogue: 0,0:11:27.44,0:11:28.84,Default,,0,0,0,,hidden from prying eyes.
Dialogue: 0,0:11:32.12,0:11:35.53,Default,,0,0,0,,So the new WKContentRuleList API
Dialogue: 0,0:11:35.53,0:11:37.99,Default,,0,0,0,,will help you do all of these
Dialogue: 0,0:11:39.96,0:11:40.09,Default,,0,0,0,,things.
Dialogue: 0,0:11:40.29,0:11:42.39,Default,,0,0,0,,Now if you're familiar with
Dialogue: 0,0:11:42.99,0:11:44.92,Default,,0,0,0,,Safari content blocking
Dialogue: 0,0:11:44.97,0:11:47.08,Default,,0,0,0,,extensions where you provide a
Dialogue: 0,0:11:47.08,0:11:49.68,Default,,0,0,0,,rule set to configure Safari to
Dialogue: 0,0:11:49.68,0:11:51.33,Default,,0,0,0,,block certain resources loads,
Dialogue: 0,0:11:52.23,0:11:54.77,Default,,0,0,0,,the ContentRuleList has the same
Dialogue: 0,0:11:54.87,0:11:56.54,Default,,0,0,0,,syntax as those content blocker
Dialogue: 0,0:11:56.54,0:11:57.13,Default,,0,0,0,,extensions.
Dialogue: 0,0:11:57.53,0:12:01.28,Default,,0,0,0,,With them, you can block
Dialogue: 0,0:12:01.40,0:12:04.41,Default,,0,0,0,,specific resource loads by --
Dialogue: 0,0:12:04.67,0:12:06.64,Default,,0,0,0,,for example, matching the url of
Dialogue: 0,0:12:06.64,0:12:07.88,Default,,0,0,0,,the resource to a regular
Dialogue: 0,0:12:07.88,0:12:08.40,Default,,0,0,0,,expression.
Dialogue: 0,0:12:08.69,0:12:10.02,Default,,0,0,0,,You might be able to tell WebKit
Dialogue: 0,0:12:10.02,0:12:11.71,Default,,0,0,0,,ahead of time don't ever load
Dialogue: 0,0:12:11.93,0:12:12.89,Default,,0,0,0,,such urls.
Dialogue: 0,0:12:13.24,0:12:17.44,Default,,0,0,0,,In some cases, if you block a
Dialogue: 0,0:12:17.44,0:12:19.18,Default,,0,0,0,,resource load all together, you
Dialogue: 0,0:12:19.18,0:12:21.25,Default,,0,0,0,,can break the webpage in subtle,
Dialogue: 0,0:12:21.35,0:12:22.91,Default,,0,0,0,,sometimes not so subtle ways.
Dialogue: 0,0:12:23.47,0:12:25.30,Default,,0,0,0,,So there is a rule action where
Dialogue: 0,0:12:25.30,0:12:26.72,Default,,0,0,0,,you can tell WebKit to perform
Dialogue: 0,0:12:26.72,0:12:28.39,Default,,0,0,0,,the load but make the resulting
Dialogue: 0,0:12:28.39,0:12:29.58,Default,,0,0,0,,content invisible.
Dialogue: 0,0:12:29.98,0:12:34.93,Default,,0,0,0,,And then finally we can upgrade
Dialogue: 0,0:12:34.93,0:12:37.36,Default,,0,0,0,,those insecure resource loads to
Dialogue: 0,0:12:37.36,0:12:38.40,Default,,0,0,0,,be secure loads.
Dialogue: 0,0:12:39.13,0:12:40.22,Default,,0,0,0,,This comes in two important
Dialogue: 0,0:12:40.22,0:12:40.73,Default,,0,0,0,,forms.
Dialogue: 0,0:12:40.90,0:12:45.16,Default,,0,0,0,,One is any http plain text url
Dialogue: 0,0:12:45.65,0:12:47.45,Default,,0,0,0,,that is come across, you can
Dialogue: 0,0:12:47.45,0:12:49.31,Default,,0,0,0,,upgrade it to be an encrypted
Dialogue: 0,0:12:49.31,0:12:50.20,Default,,0,0,0,,https url.
Dialogue: 0,0:12:51.34,0:12:54.15,Default,,0,0,0,,And you can also block cookies
Dialogue: 0,0:12:54.45,0:12:56.16,Default,,0,0,0,,from being sent out with certain
Dialogue: 0,0:12:56.16,0:12:56.88,Default,,0,0,0,,requests.
Dialogue: 0,0:12:57.34,0:12:58.58,Default,,0,0,0,,If the requests are to a
Dialogue: 0,0:12:58.58,0:13:01.03,Default,,0,0,0,,resource of a sensitive nature,
Dialogue: 0,0:13:01.16,0:13:03.53,Default,,0,0,0,,you can prevent your user's data
Dialogue: 0,0:13:03.53,0:13:05.12,Default,,0,0,0,,and session state from leaking
Dialogue: 0,0:13:05.12,0:13:06.22,Default,,0,0,0,,out with those requests.
Dialogue: 0,0:13:08.52,0:13:11.65,Default,,0,0,0,,When you provide your rule list
Dialogue: 0,0:13:11.65,0:13:14.89,Default,,0,0,0,,to WebKit, WebKit compiles into
Dialogue: 0,0:13:15.10,0:13:16.85,Default,,0,0,0,,an efficient byte code format.
Dialogue: 0,0:13:17.07,0:13:19.34,Default,,0,0,0,,This is kind of an
Dialogue: 0,0:13:19.34,0:13:21.17,Default,,0,0,0,,implementation detail that's not
Dialogue: 0,0:13:21.17,0:13:22.51,Default,,0,0,0,,directly relevant to you.
Dialogue: 0,0:13:22.73,0:13:25.13,Default,,0,0,0,,I'm bringing it up because I
Dialogue: 0,0:13:25.13,0:13:26.64,Default,,0,0,0,,want to assure you that a
Dialogue: 0,0:13:26.64,0:13:28.67,Default,,0,0,0,,content rule list even a large
Dialogue: 0,0:13:28.76,0:13:31.63,Default,,0,0,0,,set of thousands of rules we've
Dialogue: 0,0:13:31.63,0:13:32.97,Default,,0,0,0,,been spending a lot of time
Dialogue: 0,0:13:32.97,0:13:33.99,Default,,0,0,0,,working on making that as
Dialogue: 0,0:13:34.33,0:13:35.50,Default,,0,0,0,,efficient as possible.
Dialogue: 0,0:13:35.50,0:13:36.98,Default,,0,0,0,,And no matter how big your rule
Dialogue: 0,0:13:36.98,0:13:38.64,Default,,0,0,0,,set is, if it compiles
Dialogue: 0,0:13:38.64,0:13:40.67,Default,,0,0,0,,successfully you should not see
Dialogue: 0,0:13:40.67,0:13:41.87,Default,,0,0,0,,degradation in loading
Dialogue: 0,0:13:41.87,0:13:42.55,Default,,0,0,0,,performance.
Dialogue: 0,0:13:46.91,0:13:49.11,Default,,0,0,0,,You supply your rules in a
Dialogue: 0,0:13:49.11,0:13:51.07,Default,,0,0,0,,simple JSON format.
Dialogue: 0,0:13:52.20,0:13:54.59,Default,,0,0,0,,The JSON has pairs of triggers
Dialogue: 0,0:13:55.15,0:13:55.99,Default,,0,0,0,,and actions.
Dialogue: 0,0:13:56.75,0:13:58.29,Default,,0,0,0,,In this example up on the
Dialogue: 0,0:13:58.29,0:14:01.46,Default,,0,0,0,,screen, the trigger is matching
Dialogue: 0,0:14:01.46,0:14:03.38,Default,,0,0,0,,a url that is a url.
Dialogue: 0,0:14:03.48,0:14:04.91,Default,,0,0,0,,It's for every single url that's
Dialogue: 0,0:14:04.91,0:14:05.95,Default,,0,0,0,,a regular expression that says
Dialogue: 0,0:14:06.36,0:14:09.44,Default,,0,0,0,,for all urls take the action of
Dialogue: 0,0:14:09.44,0:14:11.57,Default,,0,0,0,,making the url https.
Dialogue: 0,0:14:12.29,0:14:15.47,Default,,0,0,0,,So this is a common and
Dialogue: 0,0:14:15.47,0:14:18.00,Default,,0,0,0,,important shotgun approach to
Dialogue: 0,0:14:18.00,0:14:19.72,Default,,0,0,0,,upgrading all plain text
Dialogue: 0,0:14:19.88,0:14:22.87,Default,,0,0,0,,requests to be encrypted ones.
Dialogue: 0,0:14:23.20,0:14:26.46,Default,,0,0,0,,I'm not going to go into the
Dialogue: 0,0:14:26.46,0:14:27.94,Default,,0,0,0,,other actions and triggers that
Dialogue: 0,0:14:27.94,0:14:30.93,Default,,0,0,0,,are available right here because
Dialogue: 0,0:14:30.93,0:14:32.00,Default,,0,0,0,,I have so much more I'd like to
Dialogue: 0,0:14:32.00,0:14:33.83,Default,,0,0,0,,talk about today but there are
Dialogue: 0,0:14:33.83,0:14:35.46,Default,,0,0,0,,resources that we will refer you
Dialogue: 0,0:14:35.46,0:14:37.59,Default,,0,0,0,,to to get the full breadth of
Dialogue: 0,0:14:37.59,0:14:39.13,Default,,0,0,0,,what is available to you.
Dialogue: 0,0:14:40.70,0:14:43.05,Default,,0,0,0,,Once you have your JSON, you'll
Dialogue: 0,0:14:43.05,0:14:44.75,Default,,0,0,0,,pass it to the related new API,
Dialogue: 0,0:14:44.79,0:14:47.49,Default,,0,0,0,,WKContentRuleListStore, to
Dialogue: 0,0:14:47.49,0:14:49.34,Default,,0,0,0,,compile it into that efficient
Dialogue: 0,0:14:49.34,0:14:50.77,Default,,0,0,0,,byte code format.
Dialogue: 0,0:14:52.72,0:14:54.56,Default,,0,0,0,,Now notice there's a string
Dialogue: 0,0:14:54.63,0:14:56.09,Default,,0,0,0,,identifier passed in.
Dialogue: 0,0:14:56.54,0:14:58.15,Default,,0,0,0,,It's up to you to come up with
Dialogue: 0,0:14:58.15,0:14:59.90,Default,,0,0,0,,what the string is and it will
Dialogue: 0,0:14:59.90,0:15:01.64,Default,,0,0,0,,be relevant in just a little
Dialogue: 0,0:15:02.17,0:15:02.27,Default,,0,0,0,,bit.
Dialogue: 0,0:15:04.46,0:15:06.47,Default,,0,0,0,,You'll have a completion handler
Dialogue: 0,0:15:06.47,0:15:07.56,Default,,0,0,0,,and when your completion handler
Dialogue: 0,0:15:07.56,0:15:08.32,Default,,0,0,0,,is called with the
Dialogue: 0,0:15:08.32,0:15:10.59,Default,,0,0,0,,WKContentRuleList, you can
Dialogue: 0,0:15:10.59,0:15:11.92,Default,,0,0,0,,create a WebView with that rule
Dialogue: 0,0:15:11.92,0:15:14.02,Default,,0,0,0,,list installed and start loading
Dialogue: 0,0:15:14.02,0:15:16.25,Default,,0,0,0,,content -- start loading web
Dialogue: 0,0:15:16.25,0:15:17.78,Default,,0,0,0,,content that filters out
Dialogue: 0,0:15:17.78,0:15:19.16,Default,,0,0,0,,unwanted sub resources.
Dialogue: 0,0:15:19.43,0:15:22.76,Default,,0,0,0,,So that identifier.
Dialogue: 0,0:15:23.75,0:15:25.40,Default,,0,0,0,,When we compile a rule list from
Dialogue: 0,0:15:25.40,0:15:27.18,Default,,0,0,0,,JSON to the efficient byte code
Dialogue: 0,0:15:27.18,0:15:28.92,Default,,0,0,0,,format, you can name it.
Dialogue: 0,0:15:29.31,0:15:31.29,Default,,0,0,0,,And then later you can look up
Dialogue: 0,0:15:31.29,0:15:33.13,Default,,0,0,0,,by the same identifier so you
Dialogue: 0,0:15:33.13,0:15:34.43,Default,,0,0,0,,don't have to compile it again.
Dialogue: 0,0:15:34.66,0:15:36.98,Default,,0,0,0,,WebKit stores it on the storage
Dialogue: 0,0:15:36.98,0:15:39.55,Default,,0,0,0,,of the device and can look it up
Dialogue: 0,0:15:39.55,0:15:40.38,Default,,0,0,0,,much quicker later.
Dialogue: 0,0:15:40.88,0:15:42.07,Default,,0,0,0,,So you can -- you only need to
Dialogue: 0,0:15:42.07,0:15:43.91,Default,,0,0,0,,compile a certain rule set once.
Dialogue: 0,0:15:44.26,0:15:47.33,Default,,0,0,0,,Once you have your
Dialogue: 0,0:15:47.33,0:15:50.49,Default,,0,0,0,,WKContentRuleList as I just
Dialogue: 0,0:15:50.49,0:15:51.76,Default,,0,0,0,,mentioned, you add it to the
Dialogue: 0,0:15:51.76,0:15:53.95,Default,,0,0,0,,WebView's configuration and now
Dialogue: 0,0:15:54.06,0:15:54.72,Default,,0,0,0,,you're ready to go.
Dialogue: 0,0:15:55.30,0:15:57.31,Default,,0,0,0,,I believe there's no better way
Dialogue: 0,0:15:57.31,0:15:59.10,Default,,0,0,0,,to see what cool new APIs can do
Dialogue: 0,0:15:59.10,0:16:00.35,Default,,0,0,0,,other than a demo.
Dialogue: 0,0:16:00.45,0:16:01.94,Default,,0,0,0,,So I'd like to invite Alex on
Dialogue: 0,0:16:01.94,0:16:03.41,Default,,0,0,0,,the stage to show you a little
Dialogue: 0,0:16:03.41,0:16:03.75,Default,,0,0,0,,bit more.
Dialogue: 0,0:16:04.52,0:16:10.00,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:16:10.50,0:16:11.35,Default,,0,0,0,,>> Thanks Brady.
Dialogue: 0,0:16:13.40,0:16:16.65,Default,,0,0,0,,I am making an app and it's an
Dialogue: 0,0:16:16.65,0:16:17.52,Default,,0,0,0,,educational app.
Dialogue: 0,0:16:17.90,0:16:20.24,Default,,0,0,0,,And it will help people to learn
Dialogue: 0,0:16:20.24,0:16:22.46,Default,,0,0,0,,something more about a subject
Dialogue: 0,0:16:23.23,0:16:25.23,Default,,0,0,0,,that makes me very happy and
Dialogue: 0,0:16:25.23,0:16:26.57,Default,,0,0,0,,that is dogs.
Dialogue: 0,0:16:27.70,0:16:30.71,Default,,0,0,0,,And so my users are going to
Dialogue: 0,0:16:30.71,0:16:31.80,Default,,0,0,0,,read articles online.
Dialogue: 0,0:16:33.07,0:16:34.92,Default,,0,0,0,,They're going to take a quiz on
Dialogue: 0,0:16:34.92,0:16:36.39,Default,,0,0,0,,these articles and then they are
Dialogue: 0,0:16:36.39,0:16:38.38,Default,,0,0,0,,going to receive a diploma.
Dialogue: 0,0:16:39.56,0:16:41.40,Default,,0,0,0,,So since I am going to be
Dialogue: 0,0:16:41.40,0:16:42.72,Default,,0,0,0,,showing web content and
Dialogue: 0,0:16:42.72,0:16:44.16,Default,,0,0,0,,integrating into my app, I'm
Dialogue: 0,0:16:44.16,0:16:46.33,Default,,0,0,0,,going to use WKWebView.
Dialogue: 0,0:16:53.46,0:16:54.25,Default,,0,0,0,,There we go.
Dialogue: 0,0:16:55.09,0:16:58.90,Default,,0,0,0,,We have a very simple app that
Dialogue: 0,0:16:58.90,0:17:01.43,Default,,0,0,0,,basically does nothing but open
Dialogue: 0,0:17:01.52,0:17:03.70,Default,,0,0,0,,a WKWebView and open up the web
Dialogue: 0,0:17:03.70,0:17:05.53,Default,,0,0,0,,content in that WKWebView.
Dialogue: 0,0:17:06.09,0:17:08.01,Default,,0,0,0,,Let's see what it looks like
Dialogue: 0,0:17:08.01,0:17:11.61,Default,,0,0,0,,right out of the box.
Dialogue: 0,0:17:11.77,0:17:13.95,Default,,0,0,0,,Okay. So this web service checks
Dialogue: 0,0:17:14.60,0:17:18.19,Default,,0,0,0,,the http header for the presence
Dialogue: 0,0:17:18.19,0:17:21.69,Default,,0,0,0,,of a cookie to indicate who the
Dialogue: 0,0:17:21.69,0:17:25.08,Default,,0,0,0,,student is and if there is no
Dialogue: 0,0:17:25.08,0:17:27.41,Default,,0,0,0,,cookie, then it will forward us
Dialogue: 0,0:17:27.41,0:17:28.42,Default,,0,0,0,,to a log in screen.
Dialogue: 0,0:17:29.72,0:17:32.58,Default,,0,0,0,,And we could click here to log
Dialogue: 0,0:17:32.58,0:17:33.09,Default,,0,0,0,,in.
Dialogue: 0,0:17:34.28,0:17:37.60,Default,,0,0,0,,And we could log in but this
Dialogue: 0,0:17:38.07,0:17:39.73,Default,,0,0,0,,user experience can be improved
Dialogue: 0,0:17:39.73,0:17:44.67,Default,,0,0,0,,upon and maybe we've already
Dialogue: 0,0:17:44.67,0:17:46.08,Default,,0,0,0,,logged into the app using the
Dialogue: 0,0:17:46.08,0:17:47.06,Default,,0,0,0,,touch ID or something.
Dialogue: 0,0:17:47.52,0:17:49.08,Default,,0,0,0,,And we know how to communicate
Dialogue: 0,0:17:49.08,0:17:50.26,Default,,0,0,0,,with this web service.
Dialogue: 0,0:17:51.08,0:17:52.56,Default,,0,0,0,,The fact that this student is
Dialogue: 0,0:17:52.56,0:17:54.00,Default,,0,0,0,,logged in with a cookie.
Dialogue: 0,0:17:54.30,0:17:56.57,Default,,0,0,0,,So we're going to do just that.
Dialogue: 0,0:18:02.64,0:18:04.62,Default,,0,0,0,,To do that, we need to make an
Dialogue: 0,0:18:04.62,0:18:05.43,Default,,0,0,0,,http cookie.
Dialogue: 0,0:18:06.40,0:18:09.41,Default,,0,0,0,,We need to put this cookie into
Dialogue: 0,0:18:09.41,0:18:10.55,Default,,0,0,0,,a website data store's
Dialogue: 0,0:18:10.63,0:18:14.67,Default,,0,0,0,,httpCookieStore using the new
Dialogue: 0,0:18:14.67,0:18:16.43,Default,,0,0,0,,API set cookie.
Dialogue: 0,0:18:17.18,0:18:21.62,Default,,0,0,0,,And then once that's done, we
Dialogue: 0,0:18:21.62,0:18:24.24,Default,,0,0,0,,need to tell the WKWebView to
Dialogue: 0,0:18:24.41,0:18:27.57,Default,,0,0,0,,use the website data store that
Dialogue: 0,0:18:27.63,0:18:30.14,Default,,0,0,0,,has the cookie inside of it and
Dialogue: 0,0:18:30.14,0:18:32.01,Default,,0,0,0,,we do so through the WKWebView
Dialogue: 0,0:18:32.01,0:18:32.79,Default,,0,0,0,,configuration.
Dialogue: 0,0:18:34.08,0:18:34.64,Default,,0,0,0,,Right here.
Dialogue: 0,0:18:36.13,0:18:38.57,Default,,0,0,0,,Set the website data store to be
Dialogue: 0,0:18:38.57,0:18:40.58,Default,,0,0,0,,the one that has a cookie in it.
Dialogue: 0,0:18:40.58,0:18:41.67,Default,,0,0,0,,And then we proceed as we did
Dialogue: 0,0:18:41.67,0:18:42.10,Default,,0,0,0,,before.
Dialogue: 0,0:18:42.69,0:18:43.89,Default,,0,0,0,,Use this configuration.
Dialogue: 0,0:18:44.09,0:18:44.95,Default,,0,0,0,,Open a WebView.
Dialogue: 0,0:18:45.04,0:18:45.98,Default,,0,0,0,,Open the web content.
Dialogue: 0,0:18:54.24,0:18:54.90,Default,,0,0,0,,All right.
Dialogue: 0,0:18:55.10,0:18:56.86,Default,,0,0,0,,So right off the bat, we are
Dialogue: 0,0:18:56.86,0:18:57.47,Default,,0,0,0,,logged in.
Dialogue: 0,0:18:57.82,0:19:00.33,Default,,0,0,0,,Our initial request has this
Dialogue: 0,0:19:00.33,0:19:01.79,Default,,0,0,0,,http cookie in its header.
Dialogue: 0,0:19:02.49,0:19:06.45,Default,,0,0,0,,So this article that I want my
Dialogue: 0,0:19:06.45,0:19:10.00,Default,,0,0,0,,users to read has some sub
Dialogue: 0,0:19:10.00,0:19:12.25,Default,,0,0,0,,resources that are loaded over
Dialogue: 0,0:19:13.22,0:19:15.03,Default,,0,0,0,,unencrypted http connections.
Dialogue: 0,0:19:15.95,0:19:18.49,Default,,0,0,0,,And our app transport security,
Dialogue: 0,0:19:19.73,0:19:21.51,Default,,0,0,0,,by default, keeps our users safe
Dialogue: 0,0:19:21.54,0:19:23.00,Default,,0,0,0,,by preventing loads over
Dialogue: 0,0:19:23.00,0:19:25.40,Default,,0,0,0,,unencrypted http connections.
Dialogue: 0,0:19:26.13,0:19:30.27,Default,,0,0,0,,And so right here, we see some
Dialogue: 0,0:19:30.38,0:19:33.15,Default,,0,0,0,,missing images.
Dialogue: 0,0:19:34.05,0:19:36.61,Default,,0,0,0,,These -- the servers from which
Dialogue: 0,0:19:36.61,0:19:38.70,Default,,0,0,0,,we wanted to get these images
Dialogue: 0,0:19:39.59,0:19:41.31,Default,,0,0,0,,are correctly configured with
Dialogue: 0,0:19:41.31,0:19:43.95,Default,,0,0,0,,https tls certificates on them
Dialogue: 0,0:19:44.58,0:19:46.88,Default,,0,0,0,,and if we had made an encrypted
Dialogue: 0,0:19:47.17,0:19:49.76,Default,,0,0,0,,https request, it would have
Dialogue: 0,0:19:49.76,0:19:51.51,Default,,0,0,0,,responded with the same image.
Dialogue: 0,0:19:52.75,0:19:54.94,Default,,0,0,0,,So if we wanted to go in and
Dialogue: 0,0:19:55.37,0:19:58.36,Default,,0,0,0,,take the http url and turn it
Dialogue: 0,0:19:58.36,0:20:01.15,Default,,0,0,0,,into an https url just before
Dialogue: 0,0:20:01.15,0:20:03.71,Default,,0,0,0,,the load, then we would receive
Dialogue: 0,0:20:04.41,0:20:06.49,Default,,0,0,0,,the data that we wanted over a
Dialogue: 0,0:20:06.49,0:20:07.38,Default,,0,0,0,,secure connection.
Dialogue: 0,0:20:08.54,0:20:11.27,Default,,0,0,0,,Let's do that using a
Dialogue: 0,0:20:11.57,0:20:12.98,Default,,0,0,0,,WKContentRuleList.
Dialogue: 0,0:20:21.50,0:20:23.15,Default,,0,0,0,,Okay. I added a little bit of
Dialogue: 0,0:20:24.69,0:20:24.87,Default,,0,0,0,,code.
Dialogue: 0,0:20:26.15,0:20:28.62,Default,,0,0,0,,Here we have the content rule
Dialogue: 0,0:20:28.62,0:20:31.06,Default,,0,0,0,,list that we want to use.
Dialogue: 0,0:20:31.60,0:20:33.48,Default,,0,0,0,,In this case we have one rule.
Dialogue: 0,0:20:34.28,0:20:36.93,Default,,0,0,0,,It contains a trigger which is a
Dialogue: 0,0:20:36.93,0:20:38.12,Default,,0,0,0,,regular expression that matches
Dialogue: 0,0:20:38.20,0:20:38.73,Default,,0,0,0,,everything.
Dialogue: 0,0:20:39.30,0:20:40.67,Default,,0,0,0,,This regular expression is run
Dialogue: 0,0:20:40.67,0:20:42.76,Default,,0,0,0,,on the urls of each resource
Dialogue: 0,0:20:43.07,0:20:46.23,Default,,0,0,0,,WebKit is about to fetch.
Dialogue: 0,0:20:46.44,0:20:48.10,Default,,0,0,0,,The action is make https.
Dialogue: 0,0:20:48.55,0:20:51.57,Default,,0,0,0,,So if we would have requested an
Dialogue: 0,0:20:51.57,0:20:54.51,Default,,0,0,0,,unsecure resource, request a
Dialogue: 0,0:20:54.51,0:20:56.09,Default,,0,0,0,,secure resource basically by
Dialogue: 0,0:20:56.09,0:20:57.82,Default,,0,0,0,,just adding an s into the
Dialogue: 0,0:20:57.82,0:20:58.22,Default,,0,0,0,,scheme.
Dialogue: 0,0:20:59.34,0:21:00.95,Default,,0,0,0,,Once we have this JSON, we need
Dialogue: 0,0:21:00.95,0:21:02.44,Default,,0,0,0,,to compile the content rule
Dialogue: 0,0:21:03.79,0:21:04.41,Default,,0,0,0,,list.
Dialogue: 0,0:21:05.15,0:21:07.50,Default,,0,0,0,,Once this content rule list is
Dialogue: 0,0:21:07.50,0:21:11.55,Default,,0,0,0,,compiled, we need to take the
Dialogue: 0,0:21:11.55,0:21:15.75,Default,,0,0,0,,content rule list and add it to
Dialogue: 0,0:21:15.75,0:21:17.28,Default,,0,0,0,,the WKWebView configuration
Dialogue: 0,0:21:17.66,0:21:19.30,Default,,0,0,0,,through the user content
Dialogue: 0,0:21:19.30,0:21:21.03,Default,,0,0,0,,controller and then proceed as
Dialogue: 0,0:21:21.09,0:21:21.42,Default,,0,0,0,,before.
Dialogue: 0,0:21:22.08,0:21:25.55,Default,,0,0,0,,So let's see what happens when
Dialogue: 0,0:21:25.55,0:21:26.12,Default,,0,0,0,,we do this.
Dialogue: 0,0:21:26.12,0:21:30.30,Default,,0,0,0,,We load the article and these
Dialogue: 0,0:21:30.30,0:21:33.19,Default,,0,0,0,,resources are now being loaded
Dialogue: 0,0:21:33.19,0:21:34.34,Default,,0,0,0,,over secure connections.
Dialogue: 0,0:21:35.37,0:21:35.73,Default,,0,0,0,,All right.
Dialogue: 0,0:21:35.93,0:21:37.78,Default,,0,0,0,,So we now have an app that
Dialogue: 0,0:21:38.13,0:21:40.55,Default,,0,0,0,,starts with cookies and it
Dialogue: 0,0:21:40.55,0:21:42.21,Default,,0,0,0,,promotes all of its insecure
Dialogue: 0,0:21:42.21,0:21:43.94,Default,,0,0,0,,resources to secure resources.
Dialogue: 0,0:21:44.85,0:21:46.04,Default,,0,0,0,,Let's hear more about customized
Dialogue: 0,0:21:46.04,0:21:46.83,Default,,0,0,0,,loading from Brady.
Dialogue: 0,0:21:46.94,0:21:48.94,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:21:49.05,0:21:49.84,Default,,0,0,0,,>> Thank you, Alex.
Dialogue: 0,0:21:52.04,0:21:53.06,Default,,0,0,0,,Pretty straight forward.
Dialogue: 0,0:21:53.14,0:21:55.19,Default,,0,0,0,,I do want to reiterate a couple
Dialogue: 0,0:21:55.19,0:21:55.79,Default,,0,0,0,,of points.
Dialogue: 0,0:21:59.05,0:22:02.50,Default,,0,0,0,,Alex showed that you can now set
Dialogue: 0,0:22:02.50,0:22:05.49,Default,,0,0,0,,a cookie in a WKWebView and know
Dialogue: 0,0:22:05.49,0:22:06.99,Default,,0,0,0,,when the right time is to make a
Dialogue: 0,0:22:06.99,0:22:08.48,Default,,0,0,0,,request where that cookie will
Dialogue: 0,0:22:08.48,0:22:09.01,Default,,0,0,0,,be applied.
Dialogue: 0,0:22:09.01,0:22:11.57,Default,,0,0,0,,And that's enabled by the new
Dialogue: 0,0:22:11.57,0:22:13.09,Default,,0,0,0,,WKHTTPCookieStore API.
Dialogue: 0,0:22:16.74,0:22:18.30,Default,,0,0,0,,And then to hammer it home, the
Dialogue: 0,0:22:18.30,0:22:20.65,Default,,0,0,0,,one little bit of the content
Dialogue: 0,0:22:20.65,0:22:22.07,Default,,0,0,0,,rule list power that we like
Dialogue: 0,0:22:22.07,0:22:24.19,Default,,0,0,0,,focusing on is upgrading
Dialogue: 0,0:22:24.39,0:22:26.47,Default,,0,0,0,,insecure, unencrypted resource
Dialogue: 0,0:22:26.47,0:22:30.30,Default,,0,0,0,,requests to be https with just
Dialogue: 0,0:22:30.30,0:22:31.69,Default,,0,0,0,,that simple rule list.
Dialogue: 0,0:22:31.69,0:22:33.05,Default,,0,0,0,,With one action and one trigger.
Dialogue: 0,0:22:33.57,0:22:34.91,Default,,0,0,0,,Alex showed how WebKit can
Dialogue: 0,0:22:34.91,0:22:36.57,Default,,0,0,0,,efficiently do that
Dialogue: 0,0:22:36.57,0:22:38.95,Default,,0,0,0,,automatically on your behalf.
Dialogue: 0,0:22:42.14,0:22:44.33,Default,,0,0,0,,And now I'd like to move on to
Dialogue: 0,0:22:44.33,0:22:46.60,Default,,0,0,0,,our third and final new
Dialogue: 0,0:22:46.60,0:22:48.53,Default,,0,0,0,,mechanism which is the ability
Dialogue: 0,0:22:48.53,0:22:50.48,Default,,0,0,0,,to provide custom resources.
Dialogue: 0,0:22:51.02,0:22:54.20,Default,,0,0,0,,We've heard from a lot of
Dialogue: 0,0:22:54.20,0:22:56.88,Default,,0,0,0,,developers that they have a
Dialogue: 0,0:22:56.88,0:22:58.39,Default,,0,0,0,,bundle of web content that they
Dialogue: 0,0:22:58.39,0:22:58.92,Default,,0,0,0,,control.
Dialogue: 0,0:22:59.79,0:23:00.95,Default,,0,0,0,,Some of them put it in their
Dialogue: 0,0:23:00.95,0:23:02.06,Default,,0,0,0,,application bundle.
Dialogue: 0,0:23:02.29,0:23:03.93,Default,,0,0,0,,Some of them host it on a web
Dialogue: 0,0:23:03.93,0:23:05.38,Default,,0,0,0,,server that they control.
Dialogue: 0,0:23:05.38,0:23:08.04,Default,,0,0,0,,And they would like to insert
Dialogue: 0,0:23:08.04,0:23:10.12,Default,,0,0,0,,into that web content resource
Dialogue: 0,0:23:10.12,0:23:12.18,Default,,0,0,0,,data local to the user's device.
Dialogue: 0,0:23:12.55,0:23:17.20,Default,,0,0,0,,One pretty cool app that has
Dialogue: 0,0:23:17.20,0:23:19.61,Default,,0,0,0,,this need that we've seen is a
Dialogue: 0,0:23:19.61,0:23:21.81,Default,,0,0,0,,photo book maker where it's
Dialogue: 0,0:23:21.81,0:23:24.72,Default,,0,0,0,,using entirely web technologies
Dialogue: 0,0:23:24.95,0:23:26.49,Default,,0,0,0,,to have a photo book layout
Dialogue: 0,0:23:27.27,0:23:28.90,Default,,0,0,0,,where the company's designers
Dialogue: 0,0:23:28.90,0:23:30.47,Default,,0,0,0,,are adding new templates for new
Dialogue: 0,0:23:30.47,0:23:31.87,Default,,0,0,0,,layouts and styles of the photo
Dialogue: 0,0:23:31.87,0:23:33.79,Default,,0,0,0,,books but they want to access
Dialogue: 0,0:23:33.79,0:23:35.17,Default,,0,0,0,,photos that are local to the
Dialogue: 0,0:23:35.17,0:23:36.20,Default,,0,0,0,,user's device.
Dialogue: 0,0:23:37.20,0:23:38.97,Default,,0,0,0,,And using this new API that will
Dialogue: 0,0:23:38.97,0:23:39.59,Default,,0,0,0,,be possible.
Dialogue: 0,0:23:41.92,0:23:43.22,Default,,0,0,0,,There's also a lot of game
Dialogue: 0,0:23:43.22,0:23:44.38,Default,,0,0,0,,developers out there we hear
Dialogue: 0,0:23:44.38,0:23:46.45,Default,,0,0,0,,from who have an in game
Dialogue: 0,0:23:46.45,0:23:48.60,Default,,0,0,0,,newsletter or an in game
Dialogue: 0,0:23:48.74,0:23:50.30,Default,,0,0,0,,leaderboard that uses web
Dialogue: 0,0:23:50.30,0:23:50.97,Default,,0,0,0,,technology.
Dialogue: 0,0:23:51.57,0:23:53.56,Default,,0,0,0,,And they want to integrate local
Dialogue: 0,0:23:53.77,0:23:55.87,Default,,0,0,0,,experiences from their user's
Dialogue: 0,0:23:55.87,0:23:57.56,Default,,0,0,0,,local play of the game so their
Dialogue: 0,0:23:57.56,0:24:00.20,Default,,0,0,0,,user feels more attached to the
Dialogue: 0,0:24:00.20,0:24:02.47,Default,,0,0,0,,goings on in the game's
Dialogue: 0,0:24:02.47,0:24:03.29,Default,,0,0,0,,universe.
Dialogue: 0,0:24:03.81,0:24:07.14,Default,,0,0,0,,These are just a couple of
Dialogue: 0,0:24:07.14,0:24:07.78,Default,,0,0,0,,examples.
Dialogue: 0,0:24:08.18,0:24:09.82,Default,,0,0,0,,There's many more things of what
Dialogue: 0,0:24:09.82,0:24:11.61,Default,,0,0,0,,you can do with the new
Dialogue: 0,0:24:11.61,0:24:13.62,Default,,0,0,0,,WKURLSchemeHandler API.
Dialogue: 0,0:24:15.88,0:24:18.85,Default,,0,0,0,,WKURLSchemeHandler allows your
Dialogue: 0,0:24:18.85,0:24:21.04,Default,,0,0,0,,app to handle resource loads for
Dialogue: 0,0:24:21.04,0:24:23.01,Default,,0,0,0,,a particularly url scheme.
Dialogue: 0,0:24:23.32,0:24:26.28,Default,,0,0,0,,Now just so we're all on the
Dialogue: 0,0:24:26.28,0:24:26.98,Default,,0,0,0,,same page.
Dialogue: 0,0:24:27.09,0:24:28.25,Default,,0,0,0,,What is an url scheme?
Dialogue: 0,0:24:28.77,0:24:30.65,Default,,0,0,0,,These are examples of some urls
Dialogue: 0,0:24:30.65,0:24:31.66,Default,,0,0,0,,we've probably seen.
Dialogue: 0,0:24:32.92,0:24:34.10,Default,,0,0,0,,And these are the schemes.
Dialogue: 0,0:24:34.83,0:24:36.45,Default,,0,0,0,,Everything that comes before the
Dialogue: 0,0:24:36.45,0:24:37.08,Default,,0,0,0,,first colon.
Dialogue: 0,0:24:38.11,0:24:39.49,Default,,0,0,0,,So referencing custom url
Dialogue: 0,0:24:39.49,0:24:40.54,Default,,0,0,0,,schemes that WebKit doesn't
Dialogue: 0,0:24:40.54,0:24:43.05,Default,,0,0,0,,already handle itself, you can
Dialogue: 0,0:24:43.05,0:24:44.79,Default,,0,0,0,,register a scheme handler to
Dialogue: 0,0:24:44.79,0:24:46.06,Default,,0,0,0,,handle resource loads to any
Dialogue: 0,0:24:46.06,0:24:47.80,Default,,0,0,0,,resource that has a url matching
Dialogue: 0,0:24:47.80,0:24:48.31,Default,,0,0,0,,that scheme.
Dialogue: 0,0:24:48.83,0:24:51.13,Default,,0,0,0,,In this example, we've
Dialogue: 0,0:24:51.13,0:24:52.45,Default,,0,0,0,,arbitrarily chosen the scheme
Dialogue: 0,0:24:52.45,0:24:52.87,Default,,0,0,0,,local.
Dialogue: 0,0:24:52.95,0:24:54.92,Default,,0,0,0,,Not a standard url scheme that
Dialogue: 0,0:24:54.92,0:24:56.43,Default,,0,0,0,,WebKit handles itself.
Dialogue: 0,0:24:56.43,0:24:58.13,Default,,0,0,0,,Not any part of any web standard
Dialogue: 0,0:24:58.13,0:24:59.63,Default,,0,0,0,,or anything like that.
Dialogue: 0,0:25:00.74,0:25:02.87,Default,,0,0,0,,But one could conceivably see
Dialogue: 0,0:25:02.87,0:25:04.60,Default,,0,0,0,,how it could become a web
Dialogue: 0,0:25:04.60,0:25:05.44,Default,,0,0,0,,standard in the future.
Dialogue: 0,0:25:05.44,0:25:07.21,Default,,0,0,0,,It might become something WebKit
Dialogue: 0,0:25:07.21,0:25:07.96,Default,,0,0,0,,handles itself.
Dialogue: 0,0:25:08.11,0:25:09.60,Default,,0,0,0,,So we'd like to encourage the
Dialogue: 0,0:25:09.91,0:25:11.84,Default,,0,0,0,,best practice of future proofing
Dialogue: 0,0:25:11.87,0:25:13.46,Default,,0,0,0,,your custom scheme by name
Dialogue: 0,0:25:13.46,0:25:14.91,Default,,0,0,0,,spacing it with your company
Dialogue: 0,0:25:14.91,0:25:17.37,Default,,0,0,0,,name or the app bundle name,
Dialogue: 0,0:25:17.37,0:25:17.96,Default,,0,0,0,,something like that.
Dialogue: 0,0:25:21.70,0:25:23.47,Default,,0,0,0,,What is a WKURLSchemeHandler
Dialogue: 0,0:25:23.47,0:25:23.92,Default,,0,0,0,,itself?
Dialogue: 0,0:25:24.47,0:25:26.26,Default,,0,0,0,,It's a fairly simple protocol
Dialogue: 0,0:25:26.30,0:25:28.03,Default,,0,0,0,,that you implement with two
Dialogue: 0,0:25:28.03,0:25:30.51,Default,,0,0,0,,methods so you are told to start
Dialogue: 0,0:25:30.51,0:25:33.04,Default,,0,0,0,,loading a scheme task or stop
Dialogue: 0,0:25:33.04,0:25:33.50,Default,,0,0,0,,loading one.
Dialogue: 0,0:25:33.96,0:25:36.59,Default,,0,0,0,,We'll get into what the scheme
Dialogue: 0,0:25:36.59,0:25:38.23,Default,,0,0,0,,task is in a little bit.
Dialogue: 0,0:25:38.72,0:25:39.67,Default,,0,0,0,,Once you've implemented the
Dialogue: 0,0:25:39.67,0:25:43.43,Default,,0,0,0,,protocol, you will set the
Dialogue: 0,0:25:43.43,0:25:44.72,Default,,0,0,0,,scheme handler on the WebView's
Dialogue: 0,0:25:44.72,0:25:46.62,Default,,0,0,0,,configuration and this is where
Dialogue: 0,0:25:46.62,0:25:48.64,Default,,0,0,0,,you decide which url scheme you
Dialogue: 0,0:25:48.64,0:25:50.10,Default,,0,0,0,,want that scheme handler to
Dialogue: 0,0:25:50.10,0:25:51.15,Default,,0,0,0,,handle custom loads for.
Dialogue: 0,0:25:52.05,0:25:53.62,Default,,0,0,0,,You can use the same instance of
Dialogue: 0,0:25:53.62,0:25:55.47,Default,,0,0,0,,your class for all the custom
Dialogue: 0,0:25:55.47,0:25:57.12,Default,,0,0,0,,url schemes in your app.
Dialogue: 0,0:25:57.50,0:25:59.07,Default,,0,0,0,,You can have a different class
Dialogue: 0,0:25:59.22,0:26:00.42,Default,,0,0,0,,for different url schemes.
Dialogue: 0,0:26:00.48,0:26:03.14,Default,,0,0,0,,You can have different instances
Dialogue: 0,0:26:03.14,0:26:04.36,Default,,0,0,0,,for all the different schemes or
Dialogue: 0,0:26:04.36,0:26:06.54,Default,,0,0,0,,have one shared instance for all
Dialogue: 0,0:26:06.54,0:26:07.00,Default,,0,0,0,,the schemes.
Dialogue: 0,0:26:07.04,0:26:07.67,Default,,0,0,0,,It's up to you and your
Dialogue: 0,0:26:07.67,0:26:08.77,Default,,0,0,0,,application's architecture.
Dialogue: 0,0:26:09.29,0:26:14.02,Default,,0,0,0,,And then you create your WebView
Dialogue: 0,0:26:14.53,0:26:15.79,Default,,0,0,0,,and load some content in it.
Dialogue: 0,0:26:16.11,0:26:17.90,Default,,0,0,0,,And any sub resource in that web
Dialogue: 0,0:26:17.90,0:26:19.85,Default,,0,0,0,,content that references your
Dialogue: 0,0:26:19.85,0:26:21.01,Default,,0,0,0,,custom url scheme that you
Dialogue: 0,0:26:21.01,0:26:23.57,Default,,0,0,0,,registered will call back into
Dialogue: 0,0:26:23.57,0:26:24.86,Default,,0,0,0,,the object that you registered
Dialogue: 0,0:26:24.98,0:26:25.93,Default,,0,0,0,,with the WKWebView.
Dialogue: 0,0:26:26.34,0:26:29.07,Default,,0,0,0,,And note that this includes even
Dialogue: 0,0:26:29.31,0:26:31.09,Default,,0,0,0,,the top level html document
Dialogue: 0,0:26:31.09,0:26:33.40,Default,,0,0,0,,itself, can be of the custom
Dialogue: 0,0:26:33.40,0:26:34.75,Default,,0,0,0,,scheme that you registered.
Dialogue: 0,0:26:35.31,0:26:40.47,Default,,0,0,0,,So what is that WKURLSchemeTask.
Dialogue: 0,0:26:41.48,0:26:43.33,Default,,0,0,0,,Each task sent to your handler
Dialogue: 0,0:26:43.44,0:26:45.52,Default,,0,0,0,,represents a specific sub
Dialogue: 0,0:26:45.52,0:26:46.17,Default,,0,0,0,,resource load.
Dialogue: 0,0:26:47.12,0:26:49.57,Default,,0,0,0,,The task contains the url
Dialogue: 0,0:26:49.62,0:26:50.75,Default,,0,0,0,,request object.
Dialogue: 0,0:26:51.42,0:26:53.23,Default,,0,0,0,,This is the same information
Dialogue: 0,0:26:53.23,0:26:54.97,Default,,0,0,0,,that would go out to an http
Dialogue: 0,0:26:54.97,0:26:56.65,Default,,0,0,0,,server if this request was going
Dialogue: 0,0:26:56.65,0:26:57.56,Default,,0,0,0,,out onto the network.
Dialogue: 0,0:26:58.17,0:26:59.88,Default,,0,0,0,,It includes a lot of little bits
Dialogue: 0,0:26:59.88,0:27:01.27,Default,,0,0,0,,of data about the resource but
Dialogue: 0,0:27:01.27,0:27:02.53,Default,,0,0,0,,very importantly, the url
Dialogue: 0,0:27:02.53,0:27:02.90,Default,,0,0,0,,itself.
Dialogue: 0,0:27:04.97,0:27:07.14,Default,,0,0,0,,And then the task has four
Dialogue: 0,0:27:07.39,0:27:09.02,Default,,0,0,0,,straight forward methods for you
Dialogue: 0,0:27:09.02,0:27:10.53,Default,,0,0,0,,to communicate loading progress
Dialogue: 0,0:27:10.53,0:27:12.06,Default,,0,0,0,,back to WebKit for this
Dialogue: 0,0:27:12.06,0:27:12.98,Default,,0,0,0,,particular resource.
Dialogue: 0,0:27:17.25,0:27:19.71,Default,,0,0,0,,Once you are given a task and
Dialogue: 0,0:27:19.71,0:27:21.49,Default,,0,0,0,,told to start loading for it,
Dialogue: 0,0:27:22.34,0:27:23.57,Default,,0,0,0,,first thing you need to do is
Dialogue: 0,0:27:23.71,0:27:24.78,Default,,0,0,0,,create a response.
Dialogue: 0,0:27:25.64,0:27:26.86,Default,,0,0,0,,Just like that url request
Dialogue: 0,0:27:26.86,0:27:28.87,Default,,0,0,0,,object represents what would go
Dialogue: 0,0:27:28.98,0:27:31.16,Default,,0,0,0,,to a server on the network, this
Dialogue: 0,0:27:31.16,0:27:32.29,Default,,0,0,0,,is the response that would come
Dialogue: 0,0:27:32.29,0:27:33.08,Default,,0,0,0,,back from the server.
Dialogue: 0,0:27:33.48,0:27:35.23,Default,,0,0,0,,You need to manufacture that.
Dialogue: 0,0:27:36.45,0:27:38.01,Default,,0,0,0,,Very importantly, in the
Dialogue: 0,0:27:38.01,0:27:39.47,Default,,0,0,0,,response, you need to include
Dialogue: 0,0:27:39.47,0:27:40.14,Default,,0,0,0,,the mime type.
Dialogue: 0,0:27:40.42,0:27:42.01,Default,,0,0,0,,For those of you not yet
Dialogue: 0,0:27:42.01,0:27:43.09,Default,,0,0,0,,intimately familiar with web
Dialogue: 0,0:27:43.09,0:27:44.54,Default,,0,0,0,,technologies this is kind of
Dialogue: 0,0:27:44.54,0:27:45.51,Default,,0,0,0,,like the file type.
Dialogue: 0,0:27:45.81,0:27:47.36,Default,,0,0,0,,It's you telling WebKit how to
Dialogue: 0,0:27:47.36,0:27:48.29,Default,,0,0,0,,interpret the resource.
Dialogue: 0,0:27:48.61,0:27:50.33,Default,,0,0,0,,This is an HTML resource.
Dialogue: 0,0:27:50.45,0:27:55.30,Default,,0,0,0,,This is a JPEG image, etc. Once
Dialogue: 0,0:27:55.30,0:27:57.23,Default,,0,0,0,,you have the response, you tell
Dialogue: 0,0:27:57.23,0:27:59.09,Default,,0,0,0,,the task that the response was
Dialogue: 0,0:27:59.09,0:27:59.44,Default,,0,0,0,,received.
Dialogue: 0,0:28:00.02,0:28:02.40,Default,,0,0,0,,In this case, we have all of the
Dialogue: 0,0:28:02.40,0:28:04.07,Default,,0,0,0,,data for the response in memory
Dialogue: 0,0:28:04.07,0:28:04.54,Default,,0,0,0,,already.
Dialogue: 0,0:28:04.92,0:28:06.45,Default,,0,0,0,,So we can immediately pass the
Dialogue: 0,0:28:06.45,0:28:07.96,Default,,0,0,0,,data back to WebKit for the
Dialogue: 0,0:28:07.96,0:28:08.39,Default,,0,0,0,,task.
Dialogue: 0,0:28:08.71,0:28:12.48,Default,,0,0,0,,And then we signal completion of
Dialogue: 0,0:28:12.48,0:28:13.38,Default,,0,0,0,,the load to WebKit.
Dialogue: 0,0:28:13.48,0:28:14.95,Default,,0,0,0,,So WebKit isn't waiting for more
Dialogue: 0,0:28:14.95,0:28:18.52,Default,,0,0,0,,data to come in.
Dialogue: 0,0:28:18.78,0:28:20.45,Default,,0,0,0,,Again, no better way to
Dialogue: 0,0:28:20.45,0:28:21.86,Default,,0,0,0,,illustrate other than to see it
Dialogue: 0,0:28:21.86,0:28:22.39,Default,,0,0,0,,into action.
Dialogue: 0,0:28:22.48,0:28:23.70,Default,,0,0,0,,So I'd like to invite Alex back
Dialogue: 0,0:28:23.70,0:28:24.25,Default,,0,0,0,,on to stage.
Dialogue: 0,0:28:26.52,0:28:29.83,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:28:30.33,0:28:30.84,Default,,0,0,0,,>> Thanks Brady.
Dialogue: 0,0:28:32.51,0:28:34.87,Default,,0,0,0,,So remember in my app, I'm going
Dialogue: 0,0:28:34.87,0:28:36.83,Default,,0,0,0,,to have my users read articles
Dialogue: 0,0:28:36.83,0:28:39.74,Default,,0,0,0,,online, take quizzes on those
Dialogue: 0,0:28:39.74,0:28:40.98,Default,,0,0,0,,articles, and then receive a
Dialogue: 0,0:28:40.98,0:28:41.50,Default,,0,0,0,,diploma.
Dialogue: 0,0:28:42.17,0:28:43.81,Default,,0,0,0,,And I have a team of web
Dialogue: 0,0:28:43.81,0:28:45.13,Default,,0,0,0,,designers who is constantly
Dialogue: 0,0:28:45.13,0:28:46.93,Default,,0,0,0,,coming up with beautiful diploma
Dialogue: 0,0:28:46.93,0:28:47.44,Default,,0,0,0,,designs.
Dialogue: 0,0:28:47.91,0:28:49.13,Default,,0,0,0,,And so I want the users of my
Dialogue: 0,0:28:49.13,0:28:51.13,Default,,0,0,0,,app to go and fetch these new
Dialogue: 0,0:28:51.13,0:28:54.29,Default,,0,0,0,,designs from my servers but I
Dialogue: 0,0:28:54.29,0:28:57.12,Default,,0,0,0,,want each diploma to include a
Dialogue: 0,0:28:57.12,0:28:59.10,Default,,0,0,0,,picture of the user's avatar and
Dialogue: 0,0:28:59.57,0:29:01.50,Default,,0,0,0,,I want that to be loaded locally
Dialogue: 0,0:29:01.50,0:29:02.64,Default,,0,0,0,,on the user's device.
Dialogue: 0,0:29:03.51,0:29:06.92,Default,,0,0,0,,And so to do this custom local
Dialogue: 0,0:29:06.92,0:29:09.28,Default,,0,0,0,,loading within WebKit, I am
Dialogue: 0,0:29:09.28,0:29:11.14,Default,,0,0,0,,going to use a custom scheme.
Dialogue: 0,0:29:12.01,0:29:14.26,Default,,0,0,0,,Now let me show you the source
Dialogue: 0,0:29:15.12,0:29:17.58,Default,,0,0,0,,of my diploma.
Dialogue: 0,0:29:21.05,0:29:22.85,Default,,0,0,0,,Okay. So here I have some HTML.
Dialogue: 0,0:29:23.66,0:29:24.56,Default,,0,0,0,,And I have an image.
Dialogue: 0,0:29:25.35,0:29:27.20,Default,,0,0,0,,And its source has a url with a
Dialogue: 0,0:29:27.20,0:29:28.02,Default,,0,0,0,,custom scheme.
Dialogue: 0,0:29:28.75,0:29:31.08,Default,,0,0,0,,In this case, canine school dash
Dialogue: 0,0:29:32.50,0:29:33.78,Default,,0,0,0,,avatar.
Dialogue: 0,0:29:33.78,0:29:38.29,Default,,0,0,0,,And if I open this in a browser
Dialogue: 0,0:29:38.29,0:29:41.44,Default,,0,0,0,,or in a WKWebView the WKWebView
Dialogue: 0,0:29:41.82,0:29:43.13,Default,,0,0,0,,won't know what to do with this.
Dialogue: 0,0:29:43.13,0:29:45.39,Default,,0,0,0,,Let me show you what that looks
Dialogue: 0,0:29:45.39,0:29:45.98,Default,,0,0,0,,like really quick.
Dialogue: 0,0:29:49.16,0:29:49.87,Default,,0,0,0,,Take the quiz.
Dialogue: 0,0:29:51.30,0:29:52.80,Default,,0,0,0,,Dogs. Yes.
Dialogue: 0,0:29:53.48,0:29:56.75,Default,,0,0,0,,Okay. So here I have my
Dialogue: 0,0:29:56.75,0:29:57.73,Default,,0,0,0,,beautiful diploma.
Dialogue: 0,0:29:58.64,0:30:01.49,Default,,0,0,0,,And I have a missing image tag
Dialogue: 0,0:30:02.05,0:30:04.95,Default,,0,0,0,,because WebKit tried to load a
Dialogue: 0,0:30:05.02,0:30:07.20,Default,,0,0,0,,resource that had the school --
Dialogue: 0,0:30:07.28,0:30:09.75,Default,,0,0,0,,that had the scheme canine
Dialogue: 0,0:30:09.75,0:30:11.81,Default,,0,0,0,,school dash avatar and WebKit
Dialogue: 0,0:30:11.81,0:30:13.32,Default,,0,0,0,,doesn't know what to do with
Dialogue: 0,0:30:13.37,0:30:14.09,Default,,0,0,0,,such a scheme.
Dialogue: 0,0:30:15.11,0:30:18.37,Default,,0,0,0,,So we can use the
Dialogue: 0,0:30:18.37,0:30:22.10,Default,,0,0,0,,WKURLSchemeHandler to teach this
Dialogue: 0,0:30:22.21,0:30:25.00,Default,,0,0,0,,WKWebView what to do with such a
Dialogue: 0,0:30:25.00,0:30:25.37,Default,,0,0,0,,request.
Dialogue: 0,0:30:27.05,0:30:29.54,Default,,0,0,0,,Okay. So I added a bit of code.
Dialogue: 0,0:30:29.85,0:30:34.61,Default,,0,0,0,,I have an object, a class that
Dialogue: 0,0:30:34.61,0:30:37.04,Default,,0,0,0,,implements WKURLSchemeHandler
Dialogue: 0,0:30:37.78,0:30:39.45,Default,,0,0,0,,and there's a bit of code.
Dialogue: 0,0:30:39.45,0:30:40.36,Default,,0,0,0,,I'll get back to this in a
Dialogue: 0,0:30:40.36,0:30:40.77,Default,,0,0,0,,second.
Dialogue: 0,0:30:42.40,0:30:44.94,Default,,0,0,0,,But down here, in my WKWebView
Dialogue: 0,0:30:44.94,0:30:47.50,Default,,0,0,0,,configuration, I need to call
Dialogue: 0,0:30:47.50,0:30:49.24,Default,,0,0,0,,the new method set
Dialogue: 0,0:30:49.24,0:30:52.59,Default,,0,0,0,,URLSchemeHandler with an
Dialogue: 0,0:30:52.59,0:30:54.37,Default,,0,0,0,,instance of my class that
Dialogue: 0,0:30:54.37,0:30:55.45,Default,,0,0,0,,implements url,
Dialogue: 0,0:30:55.60,0:31:00.64,Default,,0,0,0,,WKURLSchemeHandler and then I
Dialogue: 0,0:31:00.64,0:31:02.95,Default,,0,0,0,,need to tell WebKit what url
Dialogue: 0,0:31:02.95,0:31:05.32,Default,,0,0,0,,scheme this class is going to
Dialogue: 0,0:31:05.32,0:31:07.53,Default,,0,0,0,,handle the requests of.
Dialogue: 0,0:31:10.26,0:31:12.01,Default,,0,0,0,,In my class implementation,
Dialogue: 0,0:31:14.04,0:31:17.77,Default,,0,0,0,,implementing WKURLSchemeHandler
Dialogue: 0,0:31:18.17,0:31:20.08,Default,,0,0,0,,means I have these two methods.
Dialogue: 0,0:31:20.46,0:31:22.21,Default,,0,0,0,,Start and stop.
Dialogue: 0,0:31:24.22,0:31:25.91,Default,,0,0,0,,Start is called by the web
Dialogue: 0,0:31:25.91,0:31:29.34,Default,,0,0,0,,content when a request for this
Dialogue: 0,0:31:29.37,0:31:30.60,Default,,0,0,0,,scheme is generated.
Dialogue: 0,0:31:31.32,0:31:33.25,Default,,0,0,0,,So in this case, when the web
Dialogue: 0,0:31:33.25,0:31:35.27,Default,,0,0,0,,content wants to load my image.
Dialogue: 0,0:31:35.88,0:31:40.49,Default,,0,0,0,,It's my job to respond to this
Dialogue: 0,0:31:40.49,0:31:43.17,Default,,0,0,0,,request using this url scheme
Dialogue: 0,0:31:44.01,0:31:44.23,Default,,0,0,0,,task.
Dialogue: 0,0:31:45.62,0:31:47.86,Default,,0,0,0,,In my case, I'm going to pull up
Dialogue: 0,0:31:47.86,0:31:49.07,Default,,0,0,0,,an image picker and allow the
Dialogue: 0,0:31:49.07,0:31:50.65,Default,,0,0,0,,user to pick an image.
Dialogue: 0,0:31:50.65,0:31:51.83,Default,,0,0,0,,So I don't need to respond
Dialogue: 0,0:31:51.83,0:31:52.42,Default,,0,0,0,,immediately.
Dialogue: 0,0:31:53.79,0:31:56.74,Default,,0,0,0,,If the WKWebView calls my stop
Dialogue: 0,0:31:56.74,0:31:59.08,Default,,0,0,0,,method while this happening,
Dialogue: 0,0:31:59.71,0:32:01.54,Default,,0,0,0,,then it -- I shouldn't respond
Dialogue: 0,0:32:01.63,0:32:03.98,Default,,0,0,0,,to that request anymore because
Dialogue: 0,0:32:03.98,0:32:05.67,Default,,0,0,0,,it was cancelled or something
Dialogue: 0,0:32:05.67,0:32:05.95,Default,,0,0,0,,like that.
Dialogue: 0,0:32:10.24,0:32:12.64,Default,,0,0,0,,Down here once my image picker
Dialogue: 0,0:32:12.64,0:32:14.76,Default,,0,0,0,,is done, I will have my data.
Dialogue: 0,0:32:15.61,0:32:18.17,Default,,0,0,0,,In this case, I will JPEG encode
Dialogue: 0,0:32:18.17,0:32:18.34,Default,,0,0,0,,it.
Dialogue: 0,0:32:19.49,0:32:20.84,Default,,0,0,0,,And I need to call these three
Dialogue: 0,0:32:20.84,0:32:21.18,Default,,0,0,0,,methods.
Dialogue: 0,0:32:22.14,0:32:23.74,Default,,0,0,0,,Did receive response.
Dialogue: 0,0:32:24.87,0:32:27.92,Default,,0,0,0,,Did receive data and did finish.
Dialogue: 0,0:32:29.78,0:32:31.71,Default,,0,0,0,,Did receive data is special.
Dialogue: 0,0:32:31.71,0:32:33.53,Default,,0,0,0,,I can call it more than once as
Dialogue: 0,0:32:33.66,0:32:35.62,Default,,0,0,0,,the data is generated or as its
Dialogue: 0,0:32:35.62,0:32:39.00,Default,,0,0,0,,received or however I want to
Dialogue: 0,0:32:39.00,0:32:39.93,Default,,0,0,0,,provide this data.
Dialogue: 0,0:32:40.23,0:32:41.50,Default,,0,0,0,,In this case, I'm only calling
Dialogue: 0,0:32:41.50,0:32:43.12,Default,,0,0,0,,it once because I have the
Dialogue: 0,0:32:43.12,0:32:46.65,Default,,0,0,0,,entire data of the response, the
Dialogue: 0,0:32:46.65,0:32:48.56,Default,,0,0,0,,JPEG encoded image in one
Dialogue: 0,0:32:48.56,0:32:48.92,Default,,0,0,0,,buffer.
Dialogue: 0,0:32:51.90,0:32:53.80,Default,,0,0,0,,So let's see what happens when I
Dialogue: 0,0:32:53.80,0:32:54.91,Default,,0,0,0,,have this implemented.
Dialogue: 0,0:33:02.28,0:33:04.28,Default,,0,0,0,,Okay. I'm already logged in
Dialogue: 0,0:33:04.75,0:33:05.66,Default,,0,0,0,,because I have the cookie.
Dialogue: 0,0:33:06.52,0:33:08.01,Default,,0,0,0,,Everything is loaded securely.
Dialogue: 0,0:33:08.19,0:33:11.40,Default,,0,0,0,,I take the quiz.
Dialogue: 0,0:33:12.09,0:33:13.50,Default,,0,0,0,,Dogs. Yes.
Dialogue: 0,0:33:15.06,0:33:17.51,Default,,0,0,0,,Okay. So this image picker comes
Dialogue: 0,0:33:17.51,0:33:21.08,Default,,0,0,0,,up because this start method has
Dialogue: 0,0:33:21.08,0:33:21.54,Default,,0,0,0,,been called.
Dialogue: 0,0:33:22.28,0:33:26.71,Default,,0,0,0,,I go into my camera roll and I
Dialogue: 0,0:33:26.83,0:33:29.36,Default,,0,0,0,,choose my avatar photo that I
Dialogue: 0,0:33:29.36,0:33:31.25,Default,,0,0,0,,want to be in my web content.
Dialogue: 0,0:33:31.97,0:33:34.95,Default,,0,0,0,,And then because of calling
Dialogue: 0,0:33:34.95,0:33:38.14,Default,,0,0,0,,those methods on the task, I now
Dialogue: 0,0:33:38.14,0:33:40.14,Default,,0,0,0,,have that data in my web
Dialogue: 0,0:33:40.18,0:33:40.67,Default,,0,0,0,,content.
Dialogue: 0,0:33:41.26,0:33:42.41,Default,,0,0,0,,So I now have an application
Dialogue: 0,0:33:42.41,0:33:44.50,Default,,0,0,0,,that manages its cookies, that
Dialogue: 0,0:33:44.50,0:33:46.57,Default,,0,0,0,,uses a content rule list to
Dialogue: 0,0:33:46.57,0:33:49.25,Default,,0,0,0,,upgrade insecure requests, and
Dialogue: 0,0:33:49.25,0:33:51.39,Default,,0,0,0,,that does custom loading through
Dialogue: 0,0:33:52.21,0:33:55.71,Default,,0,0,0,,a WKURLSchemeHandler.
Dialogue: 0,0:33:56.59,0:33:57.19,Default,,0,0,0,,Back to Brady.
Dialogue: 0,0:33:58.52,0:34:00.58,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:34:01.08,0:34:02.37,Default,,0,0,0,,>> So to reiterate once again,
Dialogue: 0,0:34:02.68,0:34:04.73,Default,,0,0,0,,what we just saw, Alex show us
Dialogue: 0,0:34:04.73,0:34:05.21,Default,,0,0,0,,in code.
Dialogue: 0,0:34:06.20,0:34:07.78,Default,,0,0,0,,He chose a future proof url
Dialogue: 0,0:34:07.78,0:34:08.19,Default,,0,0,0,,scheme.
Dialogue: 0,0:34:09.01,0:34:10.65,Default,,0,0,0,,A best practice that I want to
Dialogue: 0,0:34:10.65,0:34:12.77,Default,,0,0,0,,reiterate a few times to make
Dialogue: 0,0:34:12.77,0:34:14.21,Default,,0,0,0,,sure you don't choose a scheme
Dialogue: 0,0:34:14.38,0:34:15.64,Default,,0,0,0,,that might become some sort of
Dialogue: 0,0:34:15.64,0:34:16.76,Default,,0,0,0,,standardized schema in the
Dialogue: 0,0:34:16.76,0:34:17.13,Default,,0,0,0,,future.
Dialogue: 0,0:34:17.49,0:34:21.69,Default,,0,0,0,,And then he showed something I
Dialogue: 0,0:34:21.69,0:34:23.56,Default,,0,0,0,,hadn't even explicitly mentioned
Dialogue: 0,0:34:23.64,0:34:24.82,Default,,0,0,0,,which is that you can provide
Dialogue: 0,0:34:24.82,0:34:26.62,Default,,0,0,0,,the data for a task
Dialogue: 0,0:34:26.86,0:34:27.70,Default,,0,0,0,,asynchronously.
Dialogue: 0,0:34:28.58,0:34:29.87,Default,,0,0,0,,You might generate the data
Dialogue: 0,0:34:29.87,0:34:30.52,Default,,0,0,0,,locally.
Dialogue: 0,0:34:30.68,0:34:32.02,Default,,0,0,0,,You might have the user take a
Dialogue: 0,0:34:32.02,0:34:32.53,Default,,0,0,0,,picture.
Dialogue: 0,0:34:32.95,0:34:34.22,Default,,0,0,0,,You might do your own networking
Dialogue: 0,0:34:34.22,0:34:34.85,Default,,0,0,0,,to get the data.
Dialogue: 0,0:34:35.13,0:34:36.47,Default,,0,0,0,,However long it takes for you to
Dialogue: 0,0:34:36.47,0:34:38.10,Default,,0,0,0,,get the data you can provide it
Dialogue: 0,0:34:38.10,0:34:39.95,Default,,0,0,0,,back to WebKit asynchronously.
Dialogue: 0,0:34:44.05,0:34:45.45,Default,,0,0,0,,So that is it for all the new
Dialogue: 0,0:34:45.45,0:34:47.43,Default,,0,0,0,,stuff I have to talk you about
Dialogue: 0,0:34:47.43,0:34:47.74,Default,,0,0,0,,today.
Dialogue: 0,0:34:48.31,0:34:49.15,Default,,0,0,0,,Today we went over
Dialogue: 0,0:34:49.39,0:34:52.76,Default,,0,0,0,,WKHTTPCookieStore, the new API
Dialogue: 0,0:34:52.76,0:34:54.57,Default,,0,0,0,,for managing cookies in your
Dialogue: 0,0:34:54.57,0:34:55.58,Default,,0,0,0,,WKWebViews.
Dialogue: 0,0:34:56.13,0:34:58.94,Default,,0,0,0,,We talked about
Dialogue: 0,0:34:58.94,0:35:01.87,Default,,0,0,0,,WKContentRuleList, a fast and
Dialogue: 0,0:35:01.87,0:35:04.39,Default,,0,0,0,,efficient way to filter unwanted
Dialogue: 0,0:35:04.39,0:35:06.89,Default,,0,0,0,,content from your WKWebViews.
Dialogue: 0,0:35:07.40,0:35:10.59,Default,,0,0,0,,And we talked about
Dialogue: 0,0:35:10.59,0:35:14.04,Default,,0,0,0,,WKURLSchemeHandler, a fantastic
Dialogue: 0,0:35:14.04,0:35:16.27,Default,,0,0,0,,way for you to provide custom
Dialogue: 0,0:35:16.27,0:35:18.59,Default,,0,0,0,,resources to web content no
Dialogue: 0,0:35:18.59,0:35:20.01,Default,,0,0,0,,matter where that web content
Dialogue: 0,0:35:20.01,0:35:20.63,Default,,0,0,0,,comes from.
Dialogue: 0,0:35:21.18,0:35:25.37,Default,,0,0,0,,I'd like to reiterate one more
Dialogue: 0,0:35:25.37,0:35:27.19,Default,,0,0,0,,time that we came up with these
Dialogue: 0,0:35:27.19,0:35:28.83,Default,,0,0,0,,new APIs and worked hard on them
Dialogue: 0,0:35:29.06,0:35:30.85,Default,,0,0,0,,because of developer feedback
Dialogue: 0,0:35:31.07,0:35:32.58,Default,,0,0,0,,that we've gotten from all of
Dialogue: 0,0:35:32.58,0:35:32.87,Default,,0,0,0,,you.
Dialogue: 0,0:35:33.30,0:35:34.84,Default,,0,0,0,,And we'd like you to continue
Dialogue: 0,0:35:34.84,0:35:36.68,Default,,0,0,0,,giving us your feedback so we
Dialogue: 0,0:35:36.68,0:35:38.43,Default,,0,0,0,,can gather it and come up with
Dialogue: 0,0:35:38.97,0:35:41.09,Default,,0,0,0,,the next great new features that
Dialogue: 0,0:35:41.09,0:35:42.85,Default,,0,0,0,,will exist in future versions of
Dialogue: 0,0:35:42.85,0:35:43.55,Default,,0,0,0,,WKWebView.
Dialogue: 0,0:35:44.45,0:35:46.25,Default,,0,0,0,,For more information, please
Dialogue: 0,0:35:46.25,0:35:48.09,Default,,0,0,0,,visit the website for this
Dialogue: 0,0:35:48.09,0:35:50.28,Default,,0,0,0,,session and there are some
Dialogue: 0,0:35:50.28,0:35:51.97,Default,,0,0,0,,related sessions I'd encourage
Dialogue: 0,0:35:51.97,0:35:52.77,Default,,0,0,0,,you to look into.
Dialogue: 0,0:35:53.30,0:35:54.53,Default,,0,0,0,,Tomorrow morning we're going to
Dialogue: 0,0:35:54.53,0:35:55.57,Default,,0,0,0,,talk about some great new things
Dialogue: 0,0:35:55.57,0:35:56.69,Default,,0,0,0,,in Safari View Controller.
Dialogue: 0,0:35:56.78,0:35:58.30,Default,,0,0,0,,So if you are interested in
Dialogue: 0,0:35:58.30,0:36:00.19,Default,,0,0,0,,adding a powerful in app web
Dialogue: 0,0:36:00.19,0:36:01.22,Default,,0,0,0,,browsing experience to your
Dialogue: 0,0:36:01.22,0:36:03.75,Default,,0,0,0,,application, please come see
Dialogue: 0,0:36:03.75,0:36:04.67,Default,,0,0,0,,that.
Dialogue: 0,0:36:05.24,0:36:07.06,Default,,0,0,0,,And we also have -- well some
Dialogue: 0,0:36:07.06,0:36:09.19,Default,,0,0,0,,old talks about when we first
Dialogue: 0,0:36:09.19,0:36:11.03,Default,,0,0,0,,introduced the WKWebView API.
Dialogue: 0,0:36:11.03,0:36:13.06,Default,,0,0,0,,And also when we introduced
Dialogue: 0,0:36:13.06,0:36:14.01,Default,,0,0,0,,those content blocking
Dialogue: 0,0:36:14.01,0:36:15.30,Default,,0,0,0,,extensions for Safari.
Dialogue: 0,0:36:15.89,0:36:17.68,Default,,0,0,0,,That's where you can get a lot
Dialogue: 0,0:36:17.68,0:36:19.60,Default,,0,0,0,,of detail on the powerful rule
Dialogue: 0,0:36:19.60,0:36:21.52,Default,,0,0,0,,set that is available to you
Dialogue: 0,0:36:21.52,0:36:23.22,Default,,0,0,0,,using WKContentRuleList.
Dialogue: 0,0:36:24.56,0:36:25.65,Default,,0,0,0,,Thanks for coming and I hope you
Dialogue: 0,0:36:25.65,0:36:27.06,Default,,0,0,0,,have a great rest of WWDC.
Dialogue: 0,0:36:27.06,0:36:28.00,Default,,0,0,0,,[ Applause ]
