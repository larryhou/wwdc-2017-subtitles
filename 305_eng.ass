[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:17.82,0:00:17.98,Default,,0,0,0,,>> All right.
Dialogue: 0,0:00:18.10,0:00:18.91,Default,,0,0,0,,Good afternoon everyone.
Dialogue: 0,0:00:19.52,0:00:23.04,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:00:23.54,0:00:24.60,Default,,0,0,0,,My name's Pete Hare and I'm an
Dialogue: 0,0:00:24.60,0:00:26.06,Default,,0,0,0,,engineer on the App Store team
Dialogue: 0,0:00:26.06,0:00:26.55,Default,,0,0,0,,here at Apple.
Dialogue: 0,0:00:26.90,0:00:28.54,Default,,0,0,0,,Now you're probably here because
Dialogue: 0,0:00:28.54,0:00:29.82,Default,,0,0,0,,you're in one of a couple of
Dialogue: 0,0:00:29.82,0:00:30.45,Default,,0,0,0,,different groups.
Dialogue: 0,0:00:30.45,0:00:31.47,Default,,0,0,0,,Maybe you're here to find out a
Dialogue: 0,0:00:31.51,0:00:33.11,Default,,0,0,0,,bit more about integrating
Dialogue: 0,0:00:33.11,0:00:34.61,Default,,0,0,0,,in-app purchases into your
Dialogue: 0,0:00:34.61,0:00:35.57,Default,,0,0,0,,application and you want to know
Dialogue: 0,0:00:35.57,0:00:36.69,Default,,0,0,0,,a bit more about how to do it
Dialogue: 0,0:00:36.88,0:00:38.30,Default,,0,0,0,,securely and reliably.
Dialogue: 0,0:00:38.38,0:00:39.84,Default,,0,0,0,,Or maybe you're here to find out
Dialogue: 0,0:00:40.11,0:00:41.71,Default,,0,0,0,,about subscriptions and you want
Dialogue: 0,0:00:41.71,0:00:43.14,Default,,0,0,0,,to understand the process of
Dialogue: 0,0:00:43.40,0:00:44.79,Default,,0,0,0,,maintaining a subscription state
Dialogue: 0,0:00:44.79,0:00:46.60,Default,,0,0,0,,across multiple platforms in a
Dialogue: 0,0:00:46.60,0:00:47.90,Default,,0,0,0,,server environment, that kind of
Dialogue: 0,0:00:47.90,0:00:48.13,Default,,0,0,0,,thing.
Dialogue: 0,0:00:48.89,0:00:50.36,Default,,0,0,0,,Well whichever group you land
Dialogue: 0,0:00:50.36,0:00:51.56,Default,,0,0,0,,in, in-app purchases really
Dialogue: 0,0:00:51.56,0:00:53.43,Default,,0,0,0,,represents a new level of trust
Dialogue: 0,0:00:53.43,0:00:54.90,Default,,0,0,0,,between you and your users.
Dialogue: 0,0:00:55.21,0:00:56.58,Default,,0,0,0,,You see as soon a user is
Dialogue: 0,0:00:56.58,0:00:58.52,Default,,0,0,0,,handing over money in exchange
Dialogue: 0,0:00:58.72,0:01:00.09,Default,,0,0,0,,for digital content or services,
Dialogue: 0,0:01:00.09,0:01:01.62,Default,,0,0,0,,they're really entrusting you
Dialogue: 0,0:01:01.62,0:01:03.14,Default,,0,0,0,,with the responsibility of
Dialogue: 0,0:01:03.14,0:01:04.74,Default,,0,0,0,,delivering that in a reliable
Dialogue: 0,0:01:04.74,0:01:05.54,Default,,0,0,0,,and secure manner.
Dialogue: 0,0:01:06.52,0:01:07.48,Default,,0,0,0,,So today we're going to talk
Dialogue: 0,0:01:07.48,0:01:09.37,Default,,0,0,0,,about some techniques do that.
Dialogue: 0,0:01:09.64,0:01:10.60,Default,,0,0,0,,Firstly, we're going to discuss
Dialogue: 0,0:01:10.60,0:01:12.00,Default,,0,0,0,,receipt validation in greater
Dialogue: 0,0:01:12.00,0:01:12.48,Default,,0,0,0,,detail.
Dialogue: 0,0:01:12.48,0:01:13.94,Default,,0,0,0,,We talked on it a little bit
Dialogue: 0,0:01:13.94,0:01:14.94,Default,,0,0,0,,this morning in the what's new
Dialogue: 0,0:01:14.94,0:01:16.11,Default,,0,0,0,,session but we're going to go
Dialogue: 0,0:01:16.11,0:01:17.28,Default,,0,0,0,,into some details around how to
Dialogue: 0,0:01:17.28,0:01:19.03,Default,,0,0,0,,do this on the user's device.
Dialogue: 0,0:01:19.38,0:01:20.94,Default,,0,0,0,,We're also going to talk about
Dialogue: 0,0:01:20.94,0:01:22.43,Default,,0,0,0,,maintaining a subscription state
Dialogue: 0,0:01:22.73,0:01:24.48,Default,,0,0,0,,particularly on the server and
Dialogue: 0,0:01:24.48,0:01:26.34,Default,,0,0,0,,how to update multiple different
Dialogue: 0,0:01:26.34,0:01:27.50,Default,,0,0,0,,platforms based on that
Dialogue: 0,0:01:27.50,0:01:28.30,Default,,0,0,0,,subscription state.
Dialogue: 0,0:01:29.61,0:01:30.41,Default,,0,0,0,,Finally, we're also going to
Dialogue: 0,0:01:30.41,0:01:31.24,Default,,0,0,0,,touch on development in a
Dialogue: 0,0:01:31.24,0:01:32.16,Default,,0,0,0,,sandbox environment.
Dialogue: 0,0:01:32.16,0:01:33.20,Default,,0,0,0,,So how you can use these
Dialogue: 0,0:01:33.20,0:01:34.32,Default,,0,0,0,,technologies when you're
Dialogue: 0,0:01:34.32,0:01:35.74,Default,,0,0,0,,developing without actually
Dialogue: 0,0:01:35.74,0:01:36.89,Default,,0,0,0,,having to use your own money.
Dialogue: 0,0:01:37.51,0:01:39.27,Default,,0,0,0,,So I'm going to put up this
Dialogue: 0,0:01:39.27,0:01:39.67,Default,,0,0,0,,diagram.
Dialogue: 0,0:01:39.67,0:01:40.38,Default,,0,0,0,,This is what we looked at in
Dialogue: 0,0:01:40.38,0:01:41.17,Default,,0,0,0,,this morning's session.
Dialogue: 0,0:01:41.17,0:01:42.57,Default,,0,0,0,,This was the in-app purchase
Dialogue: 0,0:01:42.57,0:01:42.97,Default,,0,0,0,,flow.
Dialogue: 0,0:01:42.97,0:01:44.03,Default,,0,0,0,,So this is what you need to
Dialogue: 0,0:01:44.03,0:01:45.34,Default,,0,0,0,,implement in your application in
Dialogue: 0,0:01:45.34,0:01:47.14,Default,,0,0,0,,order to actually sell in-app
Dialogue: 0,0:01:47.19,0:01:47.75,Default,,0,0,0,,purchases.
Dialogue: 0,0:01:48.39,0:01:49.50,Default,,0,0,0,,In this particular session,
Dialogue: 0,0:01:49.50,0:01:50.35,Default,,0,0,0,,we're just going to really focus
Dialogue: 0,0:01:50.35,0:01:51.65,Default,,0,0,0,,on these last three points
Dialogue: 0,0:01:51.68,0:01:52.79,Default,,0,0,0,,though which I'm going to refer
Dialogue: 0,0:01:52.79,0:01:54.39,Default,,0,0,0,,to as processing transactions.
Dialogue: 0,0:01:54.52,0:01:55.69,Default,,0,0,0,,So this is when StoreKit
Dialogue: 0,0:01:55.69,0:01:56.87,Default,,0,0,0,,delivers a transaction to you
Dialogue: 0,0:01:56.87,0:01:58.54,Default,,0,0,0,,once a user's made a payment and
Dialogue: 0,0:01:58.54,0:01:59.94,Default,,0,0,0,,it's up to you to then process
Dialogue: 0,0:02:00.01,0:02:01.75,Default,,0,0,0,,that transaction and deliver the
Dialogue: 0,0:02:01.75,0:02:02.96,Default,,0,0,0,,content to the user who's paid
Dialogue: 0,0:02:02.96,0:02:03.82,Default,,0,0,0,,for it.
Dialogue: 0,0:02:03.82,0:02:05.09,Default,,0,0,0,,So I'm going to expand out these
Dialogue: 0,0:02:05.13,0:02:06.38,Default,,0,0,0,,three steps now and also
Dialogue: 0,0:02:06.38,0:02:07.75,Default,,0,0,0,,introduce an extra layer to this
Dialogue: 0,0:02:07.75,0:02:08.94,Default,,0,0,0,,which is to add your server into
Dialogue: 0,0:02:08.94,0:02:09.38,Default,,0,0,0,,the mix.
Dialogue: 0,0:02:10.64,0:02:11.68,Default,,0,0,0,,So this is how we can think of
Dialogue: 0,0:02:11.68,0:02:12.78,Default,,0,0,0,,it for this particular talk.
Dialogue: 0,0:02:12.99,0:02:14.03,Default,,0,0,0,,The process is going to start
Dialogue: 0,0:02:14.03,0:02:15.80,Default,,0,0,0,,with us receiving a transaction.
Dialogue: 0,0:02:16.35,0:02:17.68,Default,,0,0,0,,And this arrives by a StoreKit
Dialogue: 0,0:02:17.68,0:02:18.59,Default,,0,0,0,,on the user's device.
Dialogue: 0,0:02:19.44,0:02:20.38,Default,,0,0,0,,Then you make a choice as to
Dialogue: 0,0:02:20.38,0:02:21.63,Default,,0,0,0,,whether you want to validate the
Dialogue: 0,0:02:21.63,0:02:23.77,Default,,0,0,0,,receipt on the user's device or
Dialogue: 0,0:02:23.77,0:02:24.46,Default,,0,0,0,,up in the server.
Dialogue: 0,0:02:26.82,0:02:28.11,Default,,0,0,0,,From there, you can proceed to
Dialogue: 0,0:02:28.11,0:02:29.40,Default,,0,0,0,,inspect the contents of that
Dialogue: 0,0:02:29.40,0:02:31.57,Default,,0,0,0,,receipt and unlock content or
Dialogue: 0,0:02:31.57,0:02:32.74,Default,,0,0,0,,update a subscription state
Dialogue: 0,0:02:32.80,0:02:34.42,Default,,0,0,0,,based on that contents.
Dialogue: 0,0:02:34.94,0:02:36.12,Default,,0,0,0,,And finally the last step in the
Dialogue: 0,0:02:36.12,0:02:36.91,Default,,0,0,0,,process, to finish the
Dialogue: 0,0:02:36.91,0:02:38.86,Default,,0,0,0,,transaction back down on the
Dialogue: 0,0:02:38.86,0:02:39.71,Default,,0,0,0,,user's device.
Dialogue: 0,0:02:40.87,0:02:42.01,Default,,0,0,0,,Now you'll notice that the first
Dialogue: 0,0:02:42.01,0:02:44.12,Default,,0,0,0,,and last parts of this flow
Dialogue: 0,0:02:44.31,0:02:46.10,Default,,0,0,0,,occur on the device level only.
Dialogue: 0,0:02:46.10,0:02:47.77,Default,,0,0,0,,We don't allow transactions to
Dialogue: 0,0:02:47.77,0:02:48.73,Default,,0,0,0,,come in at the server level.
Dialogue: 0,0:02:48.73,0:02:49.74,Default,,0,0,0,,Now this is really important.
Dialogue: 0,0:02:49.74,0:02:51.44,Default,,0,0,0,,Even if you're using a service
Dialogue: 0,0:02:51.44,0:02:52.34,Default,,0,0,0,,side flow for receipt
Dialogue: 0,0:02:52.34,0:02:53.35,Default,,0,0,0,,validation, you still need to
Dialogue: 0,0:02:53.35,0:02:54.39,Default,,0,0,0,,make sure that you receive and
Dialogue: 0,0:02:54.39,0:02:55.82,Default,,0,0,0,,finish transactions on the
Dialogue: 0,0:02:55.82,0:02:56.52,Default,,0,0,0,,user's device.
Dialogue: 0,0:02:57.95,0:02:59.86,Default,,0,0,0,,Now this morning, we also
Dialogue: 0,0:02:59.86,0:03:01.20,Default,,0,0,0,,discussed the four different
Dialogue: 0,0:03:01.20,0:03:02.27,Default,,0,0,0,,types of in-app purchases.
Dialogue: 0,0:03:02.75,0:03:03.65,Default,,0,0,0,,If you're dealing with
Dialogue: 0,0:03:03.65,0:03:04.70,Default,,0,0,0,,consumable products or
Dialogue: 0,0:03:04.70,0:03:06.14,Default,,0,0,0,,non-consumable products, it's
Dialogue: 0,0:03:06.14,0:03:07.36,Default,,0,0,0,,quite likely that you'll do a
Dialogue: 0,0:03:07.36,0:03:08.58,Default,,0,0,0,,flow like this, which is the on
Dialogue: 0,0:03:08.58,0:03:09.18,Default,,0,0,0,,device flow.
Dialogue: 0,0:03:09.78,0:03:11.04,Default,,0,0,0,,This is where you can inspect
Dialogue: 0,0:03:11.25,0:03:12.50,Default,,0,0,0,,the receipt and unlock content
Dialogue: 0,0:03:12.50,0:03:13.70,Default,,0,0,0,,without sending anything up to
Dialogue: 0,0:03:13.70,0:03:14.96,Default,,0,0,0,,your server or requiring a
Dialogue: 0,0:03:14.96,0:03:15.74,Default,,0,0,0,,network request.
Dialogue: 0,0:03:16.31,0:03:17.23,Default,,0,0,0,,If you're dealing with
Dialogue: 0,0:03:17.23,0:03:18.63,Default,,0,0,0,,subscriptions, auto renewable
Dialogue: 0,0:03:18.63,0:03:19.66,Default,,0,0,0,,subscriptions in particular,
Dialogue: 0,0:03:19.95,0:03:20.84,Default,,0,0,0,,it's quite likely that you'll
Dialogue: 0,0:03:20.84,0:03:22.56,Default,,0,0,0,,have a situation like this where
Dialogue: 0,0:03:22.56,0:03:23.93,Default,,0,0,0,,you want to keep state on the
Dialogue: 0,0:03:23.93,0:03:24.58,Default,,0,0,0,,server side.
Dialogue: 0,0:03:24.58,0:03:25.73,Default,,0,0,0,,And you need to have a server
Dialogue: 0,0:03:25.73,0:03:26.99,Default,,0,0,0,,being able to update multiple
Dialogue: 0,0:03:26.99,0:03:27.83,Default,,0,0,0,,devices from there.
Dialogue: 0,0:03:28.68,0:03:30.04,Default,,0,0,0,,You can, of course, do both of
Dialogue: 0,0:03:30.04,0:03:31.06,Default,,0,0,0,,these techniques if you want.
Dialogue: 0,0:03:31.42,0:03:32.92,Default,,0,0,0,,But either way, the process
Dialogue: 0,0:03:32.92,0:03:34.21,Default,,0,0,0,,still starts at that same point
Dialogue: 0,0:03:34.21,0:03:35.64,Default,,0,0,0,,which is to receive transaction
Dialogue: 0,0:03:36.02,0:03:36.77,Default,,0,0,0,,on the device.
Dialogue: 0,0:03:36.89,0:03:38.53,Default,,0,0,0,,So let's dive now into each of
Dialogue: 0,0:03:38.53,0:03:39.48,Default,,0,0,0,,these steps to see what they
Dialogue: 0,0:03:39.48,0:03:39.95,Default,,0,0,0,,look like.
Dialogue: 0,0:03:43.24,0:03:44.28,Default,,0,0,0,,This is right at the start of my
Dialogue: 0,0:03:44.28,0:03:45.44,Default,,0,0,0,,application life cycle.
Dialogue: 0,0:03:46.27,0:03:47.26,Default,,0,0,0,,We have the did finish launching
Dialogue: 0,0:03:47.26,0:03:48.65,Default,,0,0,0,,with options delegate method on
Dialogue: 0,0:03:48.65,0:03:50.41,Default,,0,0,0,,the application and here we have
Dialogue: 0,0:03:50.41,0:03:51.50,Default,,0,0,0,,to register a transaction
Dialogue: 0,0:03:51.50,0:03:53.10,Default,,0,0,0,,observer for the SK payment
Dialogue: 0,0:03:53.10,0:03:53.31,Default,,0,0,0,,queue.
Dialogue: 0,0:03:53.65,0:03:54.51,Default,,0,0,0,,So you need the transaction
Dialogue: 0,0:03:54.51,0:03:55.53,Default,,0,0,0,,observer to be registered as
Dialogue: 0,0:03:55.57,0:03:56.57,Default,,0,0,0,,early as possible in the
Dialogue: 0,0:03:56.57,0:03:57.82,Default,,0,0,0,,application life cycle so that
Dialogue: 0,0:03:58.09,0:03:59.16,Default,,0,0,0,,you can start to receive the
Dialogue: 0,0:03:59.16,0:04:00.58,Default,,0,0,0,,updated transactions that come
Dialogue: 0,0:04:00.58,0:04:01.19,Default,,0,0,0,,through StoreKit.
Dialogue: 0,0:04:02.09,0:04:02.97,Default,,0,0,0,,Here I'm just adding the app
Dialogue: 0,0:04:02.97,0:04:04.66,Default,,0,0,0,,delegate itself as my payment
Dialogue: 0,0:04:04.66,0:04:06.16,Default,,0,0,0,,observer but you might add a
Dialogue: 0,0:04:06.24,0:04:07.36,Default,,0,0,0,,separate controller object to do
Dialogue: 0,0:04:07.36,0:04:07.80,Default,,0,0,0,,this for you.
Dialogue: 0,0:04:07.80,0:04:08.53,Default,,0,0,0,,It's really up to you.
Dialogue: 0,0:04:09.23,0:04:10.27,Default,,0,0,0,,What's important is that it's
Dialogue: 0,0:04:10.27,0:04:11.25,Default,,0,0,0,,happening right at the start of
Dialogue: 0,0:04:11.25,0:04:13.04,Default,,0,0,0,,the application life cycle but
Dialogue: 0,0:04:13.04,0:04:14.34,Default,,0,0,0,,once that's registered, you're
Dialogue: 0,0:04:14.34,0:04:15.97,Default,,0,0,0,,ready to start receiving
Dialogue: 0,0:04:15.97,0:04:17.65,Default,,0,0,0,,transactions through the updated
Dialogue: 0,0:04:17.65,0:04:18.59,Default,,0,0,0,,transactions call back.
Dialogue: 0,0:04:19.62,0:04:20.74,Default,,0,0,0,,So this is the updated
Dialogue: 0,0:04:20.74,0:04:22.10,Default,,0,0,0,,transactions call back in the
Dialogue: 0,0:04:22.10,0:04:22.93,Default,,0,0,0,,transaction observer.
Dialogue: 0,0:04:23.78,0:04:25.12,Default,,0,0,0,,And you receive an array of
Dialogue: 0,0:04:25.12,0:04:25.98,Default,,0,0,0,,transactions that you can
Dialogue: 0,0:04:25.98,0:04:26.79,Default,,0,0,0,,iterate through.
Dialogue: 0,0:04:27.02,0:04:28.02,Default,,0,0,0,,You can check the transaction
Dialogue: 0,0:04:28.02,0:04:28.95,Default,,0,0,0,,state on each of these.
Dialogue: 0,0:04:29.40,0:04:30.16,Default,,0,0,0,,And you want to look for a
Dialogue: 0,0:04:30.16,0:04:31.44,Default,,0,0,0,,transaction in the purchase
Dialogue: 0,0:04:31.44,0:04:31.73,Default,,0,0,0,,state.
Dialogue: 0,0:04:31.73,0:04:33.10,Default,,0,0,0,,So this is a transaction that
Dialogue: 0,0:04:33.10,0:04:34.70,Default,,0,0,0,,StoreKit deems appropriate for
Dialogue: 0,0:04:34.70,0:04:36.22,Default,,0,0,0,,you to go ahead and validate.
Dialogue: 0,0:04:36.22,0:04:37.73,Default,,0,0,0,,And then unlock content for.
Dialogue: 0,0:04:37.94,0:04:39.17,Default,,0,0,0,,So it's telling you that the
Dialogue: 0,0:04:39.17,0:04:40.26,Default,,0,0,0,,user has actually handed over
Dialogue: 0,0:04:40.89,0:04:41.00,Default,,0,0,0,,money.
Dialogue: 0,0:04:42.48,0:04:43.82,Default,,0,0,0,,So once you've got that
Dialogue: 0,0:04:43.82,0:04:45.02,Default,,0,0,0,,transaction in a purchase state,
Dialogue: 0,0:04:45.02,0:04:46.20,Default,,0,0,0,,you're ready to go ahead with
Dialogue: 0,0:04:46.20,0:04:47.35,Default,,0,0,0,,the next step in this diagram.
Dialogue: 0,0:04:47.94,0:04:49.43,Default,,0,0,0,,So let's firstly look at how to
Dialogue: 0,0:04:49.43,0:04:50.81,Default,,0,0,0,,do this validation of the
Dialogue: 0,0:04:50.81,0:04:52.61,Default,,0,0,0,,receipt on the user's device.
Dialogue: 0,0:04:53.35,0:04:54.62,Default,,0,0,0,,Now what is the receipt?
Dialogue: 0,0:04:55.01,0:04:55.93,Default,,0,0,0,,We talked about it a little bit
Dialogue: 0,0:04:55.93,0:04:56.75,Default,,0,0,0,,this morning but for those of
Dialogue: 0,0:04:56.75,0:04:57.91,Default,,0,0,0,,you who weren't there, the
Dialogue: 0,0:04:57.91,0:04:59.14,Default,,0,0,0,,receipt's really just like a
Dialogue: 0,0:04:59.14,0:04:59.61,Default,,0,0,0,,document.
Dialogue: 0,0:04:59.61,0:05:00.94,Default,,0,0,0,,Like a receipt you'd get at any
Dialogue: 0,0:05:00.94,0:05:01.60,Default,,0,0,0,,department store.
Dialogue: 0,0:05:01.60,0:05:03.14,Default,,0,0,0,,It's a proof of purchase that
Dialogue: 0,0:05:03.47,0:05:04.74,Default,,0,0,0,,really is an authentic document
Dialogue: 0,0:05:04.74,0:05:05.57,Default,,0,0,0,,that indicates they've bought
Dialogue: 0,0:05:05.57,0:05:06.68,Default,,0,0,0,,what they say they've bought.
Dialogue: 0,0:05:07.29,0:05:08.49,Default,,0,0,0,,So we've have this application
Dialogue: 0,0:05:08.49,0:05:09.65,Default,,0,0,0,,receipt which is a trusted
Dialogue: 0,0:05:09.65,0:05:11.31,Default,,0,0,0,,record of the app and any in-app
Dialogue: 0,0:05:11.31,0:05:13.12,Default,,0,0,0,,purchases that a user's made in
Dialogue: 0,0:05:13.12,0:05:13.74,Default,,0,0,0,,your application.
Dialogue: 0,0:05:14.81,0:05:16.32,Default,,0,0,0,,This particular receipt's stored
Dialogue: 0,0:05:16.32,0:05:16.98,Default,,0,0,0,,on the device.
Dialogue: 0,0:05:17.68,0:05:18.59,Default,,0,0,0,,And it's issued by the App
Dialogue: 0,0:05:18.59,0:05:18.79,Default,,0,0,0,,Store.
Dialogue: 0,0:05:18.79,0:05:19.77,Default,,0,0,0,,It's put there by StoreKit.
Dialogue: 0,0:05:21.12,0:05:22.61,Default,,0,0,0,,Now it's assigned an verifiable
Dialogue: 0,0:05:22.61,0:05:24.17,Default,,0,0,0,,document which means you can use
Dialogue: 0,0:05:24.46,0:05:25.73,Default,,0,0,0,,certificates to be able to check
Dialogue: 0,0:05:25.73,0:05:26.90,Default,,0,0,0,,that this document was actually
Dialogue: 0,0:05:26.96,0:05:28.70,Default,,0,0,0,,issued by Apple and put there on
Dialogue: 0,0:05:28.70,0:05:30.28,Default,,0,0,0,,the user's device to make sure
Dialogue: 0,0:05:31.08,0:05:32.04,Default,,0,0,0,,it's authentic.
Dialogue: 0,0:05:32.14,0:05:33.24,Default,,0,0,0,,Finally it's for your app on
Dialogue: 0,0:05:33.24,0:05:35.31,Default,,0,0,0,,that device only which means it
Dialogue: 0,0:05:35.31,0:05:36.54,Default,,0,0,0,,can't be shared across devices
Dialogue: 0,0:05:36.54,0:05:38.27,Default,,0,0,0,,or amongst other applications.
Dialogue: 0,0:05:39.75,0:05:41.01,Default,,0,0,0,,So when it comes receipt
Dialogue: 0,0:05:41.01,0:05:42.33,Default,,0,0,0,,validation, this is the process
Dialogue: 0,0:05:42.33,0:05:43.76,Default,,0,0,0,,of ensuring that this document
Dialogue: 0,0:05:43.76,0:05:45.24,Default,,0,0,0,,is an authentic document and not
Dialogue: 0,0:05:45.65,0:05:46.69,Default,,0,0,0,,some phony one that's someone
Dialogue: 0,0:05:46.75,0:05:47.08,Default,,0,0,0,,put there.
Dialogue: 0,0:05:47.17,0:05:48.17,Default,,0,0,0,,There's two ways to do this.
Dialogue: 0,0:05:48.17,0:05:49.30,Default,,0,0,0,,You can do this on the device,
Dialogue: 0,0:05:49.43,0:05:50.45,Default,,0,0,0,,which we're about to look at now
Dialogue: 0,0:05:51.35,0:05:52.28,Default,,0,0,0,,and of course, you can do this
Dialogue: 0,0:05:52.69,0:05:53.87,Default,,0,0,0,,by sending it up to your server
Dialogue: 0,0:05:53.87,0:05:54.92,Default,,0,0,0,,using the server-to-server
Dialogue: 0,0:05:54.92,0:05:55.53,Default,,0,0,0,,validation.
Dialogue: 0,0:05:55.53,0:05:57.67,Default,,0,0,0,,Now I just want to point out
Dialogue: 0,0:05:57.67,0:05:58.31,Default,,0,0,0,,here that if you're on the
Dialogue: 0,0:05:58.31,0:05:59.49,Default,,0,0,0,,user's device, it's really
Dialogue: 0,0:05:59.49,0:06:00.34,Default,,0,0,0,,important that you don't use
Dialogue: 0,0:06:00.39,0:06:01.90,Default,,0,0,0,,online validation directly from
Dialogue: 0,0:06:01.90,0:06:03.35,Default,,0,0,0,,the user's device because this
Dialogue: 0,0:06:03.35,0:06:05.04,Default,,0,0,0,,isn't a secure way of checking
Dialogue: 0,0:06:05.26,0:06:05.53,Default,,0,0,0,,at all.
Dialogue: 0,0:06:05.53,0:06:06.47,Default,,0,0,0,,If you're going to be doing it
Dialogue: 0,0:06:06.47,0:06:07.48,Default,,0,0,0,,directly on the device, you need
Dialogue: 0,0:06:07.48,0:06:08.61,Default,,0,0,0,,to use these checks we're about
Dialogue: 0,0:06:08.61,0:06:09.40,Default,,0,0,0,,to do now.
Dialogue: 0,0:06:10.05,0:06:12.41,Default,,0,0,0,,So what does the receipt look
Dialogue: 0,0:06:12.41,0:06:12.61,Default,,0,0,0,,like?
Dialogue: 0,0:06:12.61,0:06:13.50,Default,,0,0,0,,Let's take a look at the actual
Dialogue: 0,0:06:13.50,0:06:13.92,Default,,0,0,0,,document.
Dialogue: 0,0:06:14.50,0:06:16.76,Default,,0,0,0,,The receipt document.
Dialogue: 0,0:06:17.23,0:06:18.35,Default,,0,0,0,,We just take all that purchase
Dialogue: 0,0:06:18.35,0:06:19.22,Default,,0,0,0,,information about your
Dialogue: 0,0:06:19.22,0:06:20.26,Default,,0,0,0,,application including all the
Dialogue: 0,0:06:20.35,0:06:21.40,Default,,0,0,0,,in-app purchases and we wrap
Dialogue: 0,0:06:21.40,0:06:23.06,Default,,0,0,0,,that around certificates and
Dialogue: 0,0:06:23.06,0:06:25.07,Default,,0,0,0,,signatures in order to create a
Dialogue: 0,0:06:25.07,0:06:26.11,Default,,0,0,0,,document that you can check for
Dialogue: 0,0:06:26.11,0:06:26.74,Default,,0,0,0,,authenticity.
Dialogue: 0,0:06:27.30,0:06:28.74,Default,,0,0,0,,So it's a document that's stored
Dialogue: 0,0:06:28.78,0:06:30.21,Default,,0,0,0,,in the application bundle and we
Dialogue: 0,0:06:30.21,0:06:31.68,Default,,0,0,0,,provide an API for you to
Dialogue: 0,0:06:31.68,0:06:33.50,Default,,0,0,0,,actually get that document.
Dialogue: 0,0:06:34.38,0:06:35.29,Default,,0,0,0,,It's a single file.
Dialogue: 0,0:06:35.90,0:06:37.15,Default,,0,0,0,,And it contains all the purchase
Dialogue: 0,0:06:37.15,0:06:38.66,Default,,0,0,0,,data about the application and
Dialogue: 0,0:06:38.66,0:06:40.19,Default,,0,0,0,,also the in-app purchases that
Dialogue: 0,0:06:40.19,0:06:40.59,Default,,0,0,0,,have occurred.
Dialogue: 0,0:06:40.92,0:06:42.20,Default,,0,0,0,,And it also contains a signature
Dialogue: 0,0:06:42.27,0:06:43.99,Default,,0,0,0,,for you to be able to check for
Dialogue: 0,0:06:44.11,0:06:44.80,Default,,0,0,0,,authenticity.
Dialogue: 0,0:06:44.95,0:06:45.93,Default,,0,0,0,,To make sure it's issued by
Dialogue: 0,0:06:45.93,0:06:46.21,Default,,0,0,0,,Apple.
Dialogue: 0,0:06:47.33,0:06:49.03,Default,,0,0,0,,The document is based on a
Dialogue: 0,0:06:49.03,0:06:50.36,Default,,0,0,0,,series of industry standards.
Dialogue: 0,0:06:50.36,0:06:51.53,Default,,0,0,0,,So it's actually signed using
Dialogue: 0,0:06:51.68,0:06:52.94,Default,,0,0,0,,the public key cryptographic
Dialogue: 0,0:06:52.98,0:06:54.38,Default,,0,0,0,,standard 7, cryptographic
Dialogue: 0,0:06:54.38,0:06:54.76,Default,,0,0,0,,container.
Dialogue: 0,0:06:56.07,0:06:58.26,Default,,0,0,0,,It's encoded using an ASN.1 data
Dialogue: 0,0:06:58.26,0:06:58.70,Default,,0,0,0,,encoding.
Dialogue: 0,0:06:58.70,0:07:00.46,Default,,0,0,0,,And don't let the acronyms, the
Dialogue: 0,0:07:00.46,0:07:01.67,Default,,0,0,0,,daunting acronyms fool you.
Dialogue: 0,0:07:01.67,0:07:03.13,Default,,0,0,0,,These are actually very public
Dialogue: 0,0:07:03.13,0:07:04.15,Default,,0,0,0,,open standards and there's a lot
Dialogue: 0,0:07:04.15,0:07:05.55,Default,,0,0,0,,of information available online
Dialogue: 0,0:07:05.55,0:07:06.84,Default,,0,0,0,,for you to be able to actually
Dialogue: 0,0:07:06.84,0:07:07.59,Default,,0,0,0,,do these things.
Dialogue: 0,0:07:08.19,0:07:09.76,Default,,0,0,0,,One prebuilt technique that you
Dialogue: 0,0:07:09.76,0:07:10.93,Default,,0,0,0,,might recognize is actual
Dialogue: 0,0:07:10.93,0:07:11.47,Default,,0,0,0,,OpenSSL.
Dialogue: 0,0:07:11.76,0:07:13.30,Default,,0,0,0,,So OpenSSL is a framework that
Dialogue: 0,0:07:13.69,0:07:15.01,Default,,0,0,0,,not only provides the
Dialogue: 0,0:07:15.01,0:07:16.30,Default,,0,0,0,,functionality for secure web
Dialogue: 0,0:07:16.30,0:07:17.40,Default,,0,0,0,,traffic tunneling, it also
Dialogue: 0,0:07:17.67,0:07:18.96,Default,,0,0,0,,includes functions to be able to
Dialogue: 0,0:07:19.22,0:07:20.50,Default,,0,0,0,,read in the data encoding from
Dialogue: 0,0:07:20.50,0:07:22.49,Default,,0,0,0,,an ASN.1 payload and also check
Dialogue: 0,0:07:22.49,0:07:23.61,Default,,0,0,0,,the signing on a cryptographic
Dialogue: 0,0:07:23.61,0:07:24.45,Default,,0,0,0,,container like this.
Dialogue: 0,0:07:25.68,0:07:26.88,Default,,0,0,0,,Of course, you can use a
Dialogue: 0,0:07:26.88,0:07:28.35,Default,,0,0,0,,prebuilt solution like OpenSSL
Dialogue: 0,0:07:28.35,0:07:29.55,Default,,0,0,0,,or you could even roll your own,
Dialogue: 0,0:07:29.55,0:07:30.61,Default,,0,0,0,,you know, to read in this
Dialogue: 0,0:07:30.61,0:07:31.32,Default,,0,0,0,,particular data.
Dialogue: 0,0:07:31.63,0:07:32.52,Default,,0,0,0,,It's really up to you and your
Dialogue: 0,0:07:32.52,0:07:34.10,Default,,0,0,0,,business as to which solution
Dialogue: 0,0:07:34.10,0:07:34.53,Default,,0,0,0,,you use.
Dialogue: 0,0:07:34.53,0:07:35.64,Default,,0,0,0,,You see when it comes to
Dialogue: 0,0:07:35.64,0:07:37.15,Default,,0,0,0,,security and this particular
Dialogue: 0,0:07:37.15,0:07:39.31,Default,,0,0,0,,type of check, it's not a binary
Dialogue: 0,0:07:39.31,0:07:39.63,Default,,0,0,0,,choice.
Dialogue: 0,0:07:39.63,0:07:41.17,Default,,0,0,0,,It's not secure or not secure.
Dialogue: 0,0:07:41.17,0:07:42.34,Default,,0,0,0,,You know, security's a scale.
Dialogue: 0,0:07:42.60,0:07:43.59,Default,,0,0,0,,So you have to think about how
Dialogue: 0,0:07:43.65,0:07:45.01,Default,,0,0,0,,far down that scale you want to
Dialogue: 0,0:07:45.01,0:07:46.88,Default,,0,0,0,,go in order to verify these
Dialogue: 0,0:07:46.92,0:07:47.49,Default,,0,0,0,,purchases.
Dialogue: 0,0:07:48.71,0:07:50.41,Default,,0,0,0,,But either way, it starts by
Dialogue: 0,0:07:50.41,0:07:51.58,Default,,0,0,0,,reading in this encrypted data
Dialogue: 0,0:07:51.73,0:07:52.40,Default,,0,0,0,,for this document.
Dialogue: 0,0:07:52.40,0:07:53.71,Default,,0,0,0,,So you do that by using the API
Dialogue: 0,0:07:53.71,0:07:54.35,Default,,0,0,0,,I mentioned.
Dialogue: 0,0:07:54.71,0:07:56.84,Default,,0,0,0,,It's the AppStoreReceiptURL API
Dialogue: 0,0:07:57.47,0:07:58.24,Default,,0,0,0,,on the bend bundle.
Dialogue: 0,0:07:59.22,0:08:00.27,Default,,0,0,0,,That gives you an url that you
Dialogue: 0,0:08:00.27,0:08:01.78,Default,,0,0,0,,can just past through to a data
Dialogue: 0,0:08:01.78,0:08:03.63,Default,,0,0,0,,object and you can read in that
Dialogue: 0,0:08:03.63,0:08:05.65,Default,,0,0,0,,encrypted binary data to a
Dialogue: 0,0:08:05.65,0:08:06.42,Default,,0,0,0,,receipt object.
Dialogue: 0,0:08:06.42,0:08:08.02,Default,,0,0,0,,So now you've got that encrypted
Dialogue: 0,0:08:08.02,0:08:09.85,Default,,0,0,0,,binary data in memory ready to
Dialogue: 0,0:08:10.18,0:08:11.30,Default,,0,0,0,,act on.
Dialogue: 0,0:08:13.16,0:08:14.73,Default,,0,0,0,,A couple of tips if you do want
Dialogue: 0,0:08:14.73,0:08:15.77,Default,,0,0,0,,to use OpenSSL.
Dialogue: 0,0:08:15.77,0:08:16.50,Default,,0,0,0,,We're not going to go through
Dialogue: 0,0:08:16.50,0:08:17.52,Default,,0,0,0,,the whole process of using
Dialogue: 0,0:08:17.52,0:08:20.22,Default,,0,0,0,,OpenSSL in this talk but OpenSSL
Dialogue: 0,0:08:20.22,0:08:21.65,Default,,0,0,0,,doesn't actually ship with iOS.
Dialogue: 0,0:08:22.17,0:08:23.35,Default,,0,0,0,,You have to build it and include
Dialogue: 0,0:08:23.35,0:08:24.54,Default,,0,0,0,,it in your app yourself.
Dialogue: 0,0:08:25.07,0:08:26.66,Default,,0,0,0,,If you are building it, remember
Dialogue: 0,0:08:26.66,0:08:27.87,Default,,0,0,0,,to build as your own static
Dialogue: 0,0:08:27.87,0:08:29.16,Default,,0,0,0,,library for your application and
Dialogue: 0,0:08:29.16,0:08:30.27,Default,,0,0,0,,not a dynamic library.
Dialogue: 0,0:08:30.27,0:08:31.84,Default,,0,0,0,,If it was a dynamic library,
Dialogue: 0,0:08:31.84,0:08:32.76,Default,,0,0,0,,it's much easier for someone to
Dialogue: 0,0:08:32.76,0:08:34.18,Default,,0,0,0,,come along and switch out that
Dialogue: 0,0:08:34.18,0:08:35.85,Default,,0,0,0,,dynamic library with a phony one
Dialogue: 0,0:08:36.10,0:08:38.17,Default,,0,0,0,,than say, you know, messing with
Dialogue: 0,0:08:38.17,0:08:39.59,Default,,0,0,0,,the actual methods inside your
Dialogue: 0,0:08:39.59,0:08:40.56,Default,,0,0,0,,own application binary.
Dialogue: 0,0:08:40.56,0:08:42.02,Default,,0,0,0,,So a static library will mean
Dialogue: 0,0:08:42.02,0:08:43.19,Default,,0,0,0,,that that binary data's wrapped
Dialogue: 0,0:08:43.19,0:08:44.63,Default,,0,0,0,,up with your own application and
Dialogue: 0,0:08:44.63,0:08:45.66,Default,,0,0,0,,it's much harder for someone to
Dialogue: 0,0:08:45.66,0:08:46.97,Default,,0,0,0,,come along and switch out your
Dialogue: 0,0:08:46.97,0:08:47.97,Default,,0,0,0,,OpenSSL instance.
Dialogue: 0,0:08:49.49,0:08:50.30,Default,,0,0,0,,When it comes to the actual
Dialogue: 0,0:08:50.30,0:08:51.47,Default,,0,0,0,,certificate check, you can
Dialogue: 0,0:08:51.47,0:08:52.39,Default,,0,0,0,,download the Apple Root
Dialogue: 0,0:08:52.39,0:08:53.45,Default,,0,0,0,,certificate authority's
Dialogue: 0,0:08:53.57,0:08:55.15,Default,,0,0,0,,certificate from the Apple site.
Dialogue: 0,0:08:55.48,0:08:56.48,Default,,0,0,0,,And you can use that certificate
Dialogue: 0,0:08:56.48,0:08:57.62,Default,,0,0,0,,to actually perform that check
Dialogue: 0,0:08:57.66,0:08:59.82,Default,,0,0,0,,using OpenSSL to see that it is
Dialogue: 0,0:08:59.82,0:09:01.06,Default,,0,0,0,,a verified document from Apple.
Dialogue: 0,0:09:01.89,0:09:03.16,Default,,0,0,0,,If you are bundling in the app,
Dialogue: 0,0:09:03.16,0:09:04.32,Default,,0,0,0,,just one note here that be
Dialogue: 0,0:09:04.32,0:09:06.23,Default,,0,0,0,,mindful about the expiry date on
Dialogue: 0,0:09:06.23,0:09:07.25,Default,,0,0,0,,the actual certificate that
Dialogue: 0,0:09:07.25,0:09:09.15,Default,,0,0,0,,you're including with a bundled
Dialogue: 0,0:09:09.15,0:09:09.69,Default,,0,0,0,,application.
Dialogue: 0,0:09:11.08,0:09:12.27,Default,,0,0,0,,There is plenty of documentation
Dialogue: 0,0:09:12.27,0:09:12.94,Default,,0,0,0,,online for this.
Dialogue: 0,0:09:12.94,0:09:14.36,Default,,0,0,0,,In fact, we had a session here a
Dialogue: 0,0:09:14.36,0:09:15.82,Default,,0,0,0,,couple of years where we built
Dialogue: 0,0:09:15.86,0:09:17.40,Default,,0,0,0,,OpenSSL here on stage just in a
Dialogue: 0,0:09:17.40,0:09:19.15,Default,,0,0,0,,live demo and did these checks
Dialogue: 0,0:09:19.15,0:09:19.73,Default,,0,0,0,,here on stage.
Dialogue: 0,0:09:19.73,0:09:20.87,Default,,0,0,0,,So it's a much simple process
Dialogue: 0,0:09:20.92,0:09:21.58,Default,,0,0,0,,than you might think.
Dialogue: 0,0:09:21.58,0:09:22.74,Default,,0,0,0,,So I'd encourage you to check
Dialogue: 0,0:09:22.74,0:09:24.37,Default,,0,0,0,,out those previous sessions on
Dialogue: 0,0:09:24.37,0:09:25.53,Default,,0,0,0,,receipt validation to see how
Dialogue: 0,0:09:25.53,0:09:27.85,Default,,0,0,0,,that might be done.
Dialogue: 0,0:09:28.06,0:09:28.93,Default,,0,0,0,,When it comes to prebuilt
Dialogue: 0,0:09:28.93,0:09:30.10,Default,,0,0,0,,solutions, I'm sure some of you
Dialogue: 0,0:09:30.10,0:09:31.75,Default,,0,0,0,,in here have tried integrating
Dialogue: 0,0:09:31.75,0:09:32.94,Default,,0,0,0,,in-app purchases and probably
Dialogue: 0,0:09:33.34,0:09:35.12,Default,,0,0,0,,maybe go on Get Hub and found a
Dialogue: 0,0:09:35.34,0:09:36.46,Default,,0,0,0,,solution that's prebuilt that
Dialogue: 0,0:09:36.46,0:09:37.51,Default,,0,0,0,,can do a lot of these checks for
Dialogue: 0,0:09:37.51,0:09:37.64,Default,,0,0,0,,you.
Dialogue: 0,0:09:38.15,0:09:39.87,Default,,0,0,0,,Just remember when you're
Dialogue: 0,0:09:39.87,0:09:41.21,Default,,0,0,0,,downloading prebuilt solutions
Dialogue: 0,0:09:41.21,0:09:42.28,Default,,0,0,0,,that convenience comes at a
Dialogue: 0,0:09:42.28,0:09:42.75,Default,,0,0,0,,price.
Dialogue: 0,0:09:43.95,0:09:45.83,Default,,0,0,0,,And so reusing code like this
Dialogue: 0,0:09:45.83,0:09:46.78,Default,,0,0,0,,brings with it any bugs and
Dialogue: 0,0:09:46.78,0:09:47.55,Default,,0,0,0,,vulnerabilities.
Dialogue: 0,0:09:47.55,0:09:48.82,Default,,0,0,0,,And that's especially important
Dialogue: 0,0:09:48.82,0:09:50.14,Default,,0,0,0,,when it comes to transactional
Dialogue: 0,0:09:50.27,0:09:51.51,Default,,0,0,0,,APIs like StoreKit.
Dialogue: 0,0:09:52.17,0:09:53.65,Default,,0,0,0,,Can you imagine if every jeweler
Dialogue: 0,0:09:53.65,0:09:54.99,Default,,0,0,0,,around the country used the same
Dialogue: 0,0:09:54.99,0:09:56.01,Default,,0,0,0,,lock on their safe?
Dialogue: 0,0:09:56.19,0:09:57.29,Default,,0,0,0,,And then a single exploit was
Dialogue: 0,0:09:57.29,0:09:58.95,Default,,0,0,0,,found on that one particular
Dialogue: 0,0:09:58.95,0:09:59.22,Default,,0,0,0,,lock.
Dialogue: 0,0:09:59.22,0:10:00.43,Default,,0,0,0,,Suddenly every jeweler around
Dialogue: 0,0:10:00.43,0:10:01.82,Default,,0,0,0,,the country has their jewels
Dialogue: 0,0:10:01.82,0:10:03.44,Default,,0,0,0,,vulnerable to the same single
Dialogue: 0,0:10:03.44,0:10:03.95,Default,,0,0,0,,exploit.
Dialogue: 0,0:10:03.95,0:10:06.03,Default,,0,0,0,,So it's important for you when
Dialogue: 0,0:10:06.03,0:10:06.91,Default,,0,0,0,,you're doing this to know and
Dialogue: 0,0:10:06.91,0:10:08.08,Default,,0,0,0,,own the risks as you build it.
Dialogue: 0,0:10:08.08,0:10:09.50,Default,,0,0,0,,And remember that while you're
Dialogue: 0,0:10:09.50,0:10:11.13,Default,,0,0,0,,building these integrations with
Dialogue: 0,0:10:11.13,0:10:12.65,Default,,0,0,0,,StoreKit, it's your revenue
Dialogue: 0,0:10:12.65,0:10:12.99,Default,,0,0,0,,stream.
Dialogue: 0,0:10:12.99,0:10:14.12,Default,,0,0,0,,And so people who are building
Dialogue: 0,0:10:14.65,0:10:16.35,Default,,0,0,0,,these prebuilt solutions are not
Dialogue: 0,0:10:16.35,0:10:17.48,Default,,0,0,0,,as inclined to be worried about
Dialogue: 0,0:10:17.48,0:10:18.36,Default,,0,0,0,,your money as you are.
Dialogue: 0,0:10:22.34,0:10:23.44,Default,,0,0,0,,When you're verifying the
Dialogue: 0,0:10:23.44,0:10:24.38,Default,,0,0,0,,receipt -- the actual
Dialogue: 0,0:10:24.38,0:10:26.05,Default,,0,0,0,,certificate used to sign the
Dialogue: 0,0:10:26.05,0:10:27.96,Default,,0,0,0,,receipt, a couple of tips here.
Dialogue: 0,0:10:28.63,0:10:29.58,Default,,0,0,0,,You don't need to actually check
Dialogue: 0,0:10:29.58,0:10:30.91,Default,,0,0,0,,the expiry date of the
Dialogue: 0,0:10:30.91,0:10:32.32,Default,,0,0,0,,certificate used to sign the
Dialogue: 0,0:10:32.32,0:10:32.79,Default,,0,0,0,,receipt.
Dialogue: 0,0:10:34.55,0:10:35.32,Default,,0,0,0,,What do I mean by that?
Dialogue: 0,0:10:35.32,0:10:36.50,Default,,0,0,0,,Well, if you think about a
Dialogue: 0,0:10:36.50,0:10:37.90,Default,,0,0,0,,receipt that's encrypted at a
Dialogue: 0,0:10:37.90,0:10:38.90,Default,,0,0,0,,point in time, let's say two
Dialogue: 0,0:10:38.90,0:10:40.71,Default,,0,0,0,,years ago and then someone signs
Dialogue: 0,0:10:40.71,0:10:41.57,Default,,0,0,0,,it with a certificate that's
Dialogue: 0,0:10:41.57,0:10:42.35,Default,,0,0,0,,valid at the time.
Dialogue: 0,0:10:42.67,0:10:43.91,Default,,0,0,0,,Then that certificate expires a
Dialogue: 0,0:10:43.91,0:10:44.60,Default,,0,0,0,,little while later.
Dialogue: 0,0:10:45.25,0:10:46.24,Default,,0,0,0,,Just because the certificate's
Dialogue: 0,0:10:46.24,0:10:47.29,Default,,0,0,0,,now expired and we're in the
Dialogue: 0,0:10:47.29,0:10:48.68,Default,,0,0,0,,future, doesn't make the receipt
Dialogue: 0,0:10:48.80,0:10:49.99,Default,,0,0,0,,actually any less valid.
Dialogue: 0,0:10:50.29,0:10:51.40,Default,,0,0,0,,What's really important here is
Dialogue: 0,0:10:51.40,0:10:52.68,Default,,0,0,0,,not whether the certificate's
Dialogue: 0,0:10:52.68,0:10:54.32,Default,,0,0,0,,still valid right now, it's
Dialogue: 0,0:10:54.32,0:10:55.54,Default,,0,0,0,,really only important as to
Dialogue: 0,0:10:55.54,0:10:56.84,Default,,0,0,0,,whether it was valid at the time
Dialogue: 0,0:10:57.01,0:10:57.97,Default,,0,0,0,,the receipt was made.
Dialogue: 0,0:10:57.97,0:10:58.86,Default,,0,0,0,,So if you're going to compare
Dialogue: 0,0:10:58.86,0:11:00.26,Default,,0,0,0,,that date to anything, compare
Dialogue: 0,0:11:00.26,0:11:01.73,Default,,0,0,0,,it to a purchase date of a
Dialogue: 0,0:11:01.73,0:11:03.13,Default,,0,0,0,,transaction inside the receipt
Dialogue: 0,0:11:03.13,0:11:04.08,Default,,0,0,0,,to make sure it was valid at the
Dialogue: 0,0:11:04.08,0:11:04.78,Default,,0,0,0,,time of signing.
Dialogue: 0,0:11:05.33,0:11:08.22,Default,,0,0,0,,Let's take look inside the
Dialogue: 0,0:11:08.22,0:11:09.31,Default,,0,0,0,,actual payload of the receipt.
Dialogue: 0,0:11:09.31,0:11:10.85,Default,,0,0,0,,So this is the ASN.1 encoding
Dialogue: 0,0:11:10.85,0:11:11.41,Default,,0,0,0,,that I mentioned.
Dialogue: 0,0:11:12.07,0:11:13.20,Default,,0,0,0,,All this is, is really, a series
Dialogue: 0,0:11:13.20,0:11:14.23,Default,,0,0,0,,of types and values.
Dialogue: 0,0:11:14.57,0:11:15.36,Default,,0,0,0,,Much like dictionary.
Dialogue: 0,0:11:15.36,0:11:16.38,Default,,0,0,0,,You can just think about it as
Dialogue: 0,0:11:16.62,0:11:17.50,Default,,0,0,0,,keys and values like a
Dialogue: 0,0:11:17.50,0:11:18.26,Default,,0,0,0,,dictionary would have.
Dialogue: 0,0:11:18.73,0:11:19.60,Default,,0,0,0,,And you could read out these
Dialogue: 0,0:11:19.60,0:11:21.06,Default,,0,0,0,,particular values based on the
Dialogue: 0,0:11:21.06,0:11:21.65,Default,,0,0,0,,different types.
Dialogue: 0,0:11:22.60,0:11:24.03,Default,,0,0,0,,So now that you've verified that
Dialogue: 0,0:11:24.03,0:11:25.44,Default,,0,0,0,,the actual document is signed
Dialogue: 0,0:11:25.44,0:11:26.68,Default,,0,0,0,,using the right certificate from
Dialogue: 0,0:11:26.68,0:11:28.83,Default,,0,0,0,,Apple, you need to verify that
Dialogue: 0,0:11:28.83,0:11:31.27,Default,,0,0,0,,the application used to make
Dialogue: 0,0:11:31.27,0:11:32.12,Default,,0,0,0,,this receipt is the one the
Dialogue: 0,0:11:32.12,0:11:32.75,Default,,0,0,0,,user's running on.
Dialogue: 0,0:11:32.78,0:11:33.63,Default,,0,0,0,,So how do we do that?
Dialogue: 0,0:11:34.95,0:11:36.17,Default,,0,0,0,,To verify that this receipt's
Dialogue: 0,0:11:36.17,0:11:37.40,Default,,0,0,0,,for this application, there's
Dialogue: 0,0:11:37.44,0:11:38.40,Default,,0,0,0,,two particular types of
Dialogue: 0,0:11:38.40,0:11:38.93,Default,,0,0,0,,attributes.
Dialogue: 0,0:11:39.02,0:11:40.77,Default,,0,0,0,,Type 2 and 3, and they contain
Dialogue: 0,0:11:40.77,0:11:42.31,Default,,0,0,0,,the bundle identifier that this
Dialogue: 0,0:11:42.31,0:11:43.93,Default,,0,0,0,,receipt's for and also the
Dialogue: 0,0:11:43.93,0:11:45.03,Default,,0,0,0,,bundle version that this
Dialogue: 0,0:11:45.03,0:11:45.59,Default,,0,0,0,,receipt's for.
Dialogue: 0,0:11:46.47,0:11:47.29,Default,,0,0,0,,So what you need to do is
Dialogue: 0,0:11:47.29,0:11:48.99,Default,,0,0,0,,compare these two particular
Dialogue: 0,0:11:48.99,0:11:50.58,Default,,0,0,0,,attributes to hard coded ones
Dialogue: 0,0:11:50.58,0:11:51.89,Default,,0,0,0,,inside your application.
Dialogue: 0,0:11:52.45,0:11:53.53,Default,,0,0,0,,It's important to use hard coded
Dialogue: 0,0:11:53.53,0:11:54.64,Default,,0,0,0,,values here because of the same
Dialogue: 0,0:11:54.64,0:11:55.65,Default,,0,0,0,,principle I mentioned earlier.
Dialogue: 0,0:11:56.81,0:11:58.17,Default,,0,0,0,,If it's an info plist file, it's
Dialogue: 0,0:11:58.17,0:11:59.03,Default,,0,0,0,,much easier for someone to
Dialogue: 0,0:11:59.03,0:12:00.66,Default,,0,0,0,,switch out a plist file with
Dialogue: 0,0:12:00.66,0:12:01.99,Default,,0,0,0,,phony values to match a phony
Dialogue: 0,0:12:01.99,0:12:04.70,Default,,0,0,0,,receipt than it is to switch out
Dialogue: 0,0:12:04.70,0:12:05.78,Default,,0,0,0,,something to match hard coded
Dialogue: 0,0:12:05.78,0:12:06.22,Default,,0,0,0,,values.
Dialogue: 0,0:12:06.73,0:12:08.87,Default,,0,0,0,,But if you check these two
Dialogue: 0,0:12:08.87,0:12:10.05,Default,,0,0,0,,things against hard coded values
Dialogue: 0,0:12:10.05,0:12:11.31,Default,,0,0,0,,and they match then great.
Dialogue: 0,0:12:11.31,0:12:12.32,Default,,0,0,0,,You verified that the
Dialogue: 0,0:12:12.32,0:12:14.00,Default,,0,0,0,,application is correct.
Dialogue: 0,0:12:14.89,0:12:16.00,Default,,0,0,0,,The next step is to verify the
Dialogue: 0,0:12:16.00,0:12:17.30,Default,,0,0,0,,device that the user's on and
Dialogue: 0,0:12:17.30,0:12:18.27,Default,,0,0,0,,verify that this document
Dialogue: 0,0:12:18.27,0:12:18.72,Default,,0,0,0,,matches.
Dialogue: 0,0:12:19.32,0:12:20.96,Default,,0,0,0,,We do that using types 4 and 5.
Dialogue: 0,0:12:21.20,0:12:22.82,Default,,0,0,0,,It's a similar process but this
Dialogue: 0,0:12:22.87,0:12:23.71,Default,,0,0,0,,time, the one that we want to
Dialogue: 0,0:12:23.71,0:12:25.00,Default,,0,0,0,,check is attribute number 5.
Dialogue: 0,0:12:26.02,0:12:27.05,Default,,0,0,0,,Now attribute number 5 is
Dialogue: 0,0:12:27.05,0:12:28.72,Default,,0,0,0,,actually a SHA-1 hash of these
Dialogue: 0,0:12:28.80,0:12:29.54,Default,,0,0,0,,three values.
Dialogue: 0,0:12:29.54,0:12:31.01,Default,,0,0,0,,It's a SHA-1 hash of the bundle
Dialogue: 0,0:12:31.08,0:12:33.56,Default,,0,0,0,,ID, the device ID, we provide
Dialogue: 0,0:12:33.56,0:12:34.91,Default,,0,0,0,,APIs for the device ID.
Dialogue: 0,0:12:34.91,0:12:36.90,Default,,0,0,0,,And the third one is an opaque
Dialogue: 0,0:12:36.90,0:12:38.64,Default,,0,0,0,,value, which is really just the
Dialogue: 0,0:12:38.64,0:12:40.11,Default,,0,0,0,,attribute in type number 4.
Dialogue: 0,0:12:40.25,0:12:41.82,Default,,0,0,0,,Now the reason we do that, it's
Dialogue: 0,0:12:41.82,0:12:42.84,Default,,0,0,0,,a little bit of cryptographic
Dialogue: 0,0:12:42.84,0:12:43.38,Default,,0,0,0,,entropy.
Dialogue: 0,0:12:43.38,0:12:45.04,Default,,0,0,0,,A bit of secret salt that allows
Dialogue: 0,0:12:45.04,0:12:46.47,Default,,0,0,0,,that SHA-1 hash to change over
Dialogue: 0,0:12:46.47,0:12:47.90,Default,,0,0,0,,time, even the bundle ID and the
Dialogue: 0,0:12:47.90,0:12:49.08,Default,,0,0,0,,device ID aren't changing.
Dialogue: 0,0:12:49.57,0:12:50.66,Default,,0,0,0,,So it just makes this process a
Dialogue: 0,0:12:50.66,0:12:51.47,Default,,0,0,0,,little more secure.
Dialogue: 0,0:12:52.70,0:12:53.87,Default,,0,0,0,,And so accordingly, this SHA-1
Dialogue: 0,0:12:53.87,0:12:55.65,Default,,0,0,0,,hash is unique to this app on
Dialogue: 0,0:12:55.65,0:12:56.24,Default,,0,0,0,,the device.
Dialogue: 0,0:12:56.79,0:12:58.16,Default,,0,0,0,,And what you do is you create
Dialogue: 0,0:12:58.16,0:12:59.63,Default,,0,0,0,,that SHA-1 hash using your own,
Dialogue: 0,0:12:59.94,0:13:01.10,Default,,0,0,0,,you know, hard coded values.
Dialogue: 0,0:13:01.10,0:13:01.97,Default,,0,0,0,,The same technique that we did
Dialogue: 0,0:13:01.97,0:13:03.79,Default,,0,0,0,,before and you compare it to the
Dialogue: 0,0:13:03.79,0:13:04.81,Default,,0,0,0,,one in type number 5.
Dialogue: 0,0:13:04.81,0:13:06.67,Default,,0,0,0,,And if they match, then that's
Dialogue: 0,0:13:06.67,0:13:06.94,Default,,0,0,0,,it.
Dialogue: 0,0:13:06.94,0:13:08.67,Default,,0,0,0,,You verified that the device the
Dialogue: 0,0:13:08.67,0:13:09.96,Default,,0,0,0,,user's on matches the one the
Dialogue: 0,0:13:09.96,0:13:12.46,Default,,0,0,0,,receipt is for.
Dialogue: 0,0:13:12.72,0:13:13.81,Default,,0,0,0,,So now you've done those three
Dialogue: 0,0:13:13.81,0:13:14.31,Default,,0,0,0,,checks.
Dialogue: 0,0:13:15.67,0:13:16.93,Default,,0,0,0,,That's the process of validating
Dialogue: 0,0:13:16.93,0:13:17.94,Default,,0,0,0,,the receipt on the device.
Dialogue: 0,0:13:17.94,0:13:18.70,Default,,0,0,0,,You now know that this is a
Dialogue: 0,0:13:18.70,0:13:20.10,Default,,0,0,0,,document that you can trust when
Dialogue: 0,0:13:20.10,0:13:21.20,Default,,0,0,0,,you're reading out further
Dialogue: 0,0:13:21.20,0:13:22.15,Default,,0,0,0,,information from it.
Dialogue: 0,0:13:22.31,0:13:23.33,Default,,0,0,0,,So let's take a look at the next
Dialogue: 0,0:13:23.33,0:13:25.31,Default,,0,0,0,,step which is to actually update
Dialogue: 0,0:13:25.31,0:13:27.04,Default,,0,0,0,,state and inspect the contents
Dialogue: 0,0:13:27.27,0:13:28.83,Default,,0,0,0,,of these in-app purchases inside
Dialogue: 0,0:13:28.83,0:13:29.30,Default,,0,0,0,,the receipt.
Dialogue: 0,0:13:31.01,0:13:32.14,Default,,0,0,0,,Let's dive back into what the
Dialogue: 0,0:13:32.45,0:13:33.83,Default,,0,0,0,,payload of the receipt contains.
Dialogue: 0,0:13:34.97,0:13:36.41,Default,,0,0,0,,The receipt contains a specific
Dialogue: 0,0:13:36.41,0:13:38.44,Default,,0,0,0,,type, type 17 for every
Dialogue: 0,0:13:38.44,0:13:40.48,Default,,0,0,0,,transaction that occurs for this
Dialogue: 0,0:13:40.48,0:13:42.20,Default,,0,0,0,,user on this device.
Dialogue: 0,0:13:43.11,0:13:45.61,Default,,0,0,0,,Now in each type 17, the actual
Dialogue: 0,0:13:45.61,0:13:47.80,Default,,0,0,0,,payload is another ASN.1 encoded
Dialogue: 0,0:13:47.84,0:13:48.47,Default,,0,0,0,,container.
Dialogue: 0,0:13:49.11,0:13:51.32,Default,,0,0,0,,And inside of this, there's a
Dialogue: 0,0:13:51.32,0:13:53.25,Default,,0,0,0,,bunch of types and values that
Dialogue: 0,0:13:53.25,0:13:54.63,Default,,0,0,0,,are associated just for this
Dialogue: 0,0:13:54.63,0:13:55.67,Default,,0,0,0,,specific transaction in
Dialogue: 0,0:13:55.67,0:13:56.06,Default,,0,0,0,,question.
Dialogue: 0,0:13:56.06,0:13:57.11,Default,,0,0,0,,So we have things like a
Dialogue: 0,0:13:57.11,0:13:58.76,Default,,0,0,0,,quantity, a product identifier,
Dialogue: 0,0:13:58.76,0:13:59.69,Default,,0,0,0,,a transaction ID.
Dialogue: 0,0:13:59.99,0:14:01.07,Default,,0,0,0,,So these are values that you can
Dialogue: 0,0:14:01.07,0:14:03.48,Default,,0,0,0,,use to verify that a transaction
Dialogue: 0,0:14:03.67,0:14:04.81,Default,,0,0,0,,exists in the real world.
Dialogue: 0,0:14:05.81,0:14:06.87,Default,,0,0,0,,One more to call out while I'm
Dialogue: 0,0:14:06.87,0:14:08.20,Default,,0,0,0,,here is type 1708.
Dialogue: 0,0:14:08.20,0:14:09.44,Default,,0,0,0,,This is particularly important
Dialogue: 0,0:14:09.44,0:14:10.17,Default,,0,0,0,,if you're dealing with auto
Dialogue: 0,0:14:10.17,0:14:11.35,Default,,0,0,0,,renewable subscriptions.
Dialogue: 0,0:14:11.82,0:14:13.15,Default,,0,0,0,,This contains the expiry date
Dialogue: 0,0:14:13.35,0:14:14.94,Default,,0,0,0,,for a particular transaction for
Dialogue: 0,0:14:14.94,0:14:15.84,Default,,0,0,0,,a particular billing period.
Dialogue: 0,0:14:15.84,0:14:17.31,Default,,0,0,0,,And we'll come back to talking
Dialogue: 0,0:14:17.31,0:14:18.29,Default,,0,0,0,,about subscriptions in a bit.
Dialogue: 0,0:14:19.56,0:14:20.15,Default,,0,0,0,,If you want to know more
Dialogue: 0,0:14:20.15,0:14:21.41,Default,,0,0,0,,information about all the
Dialogue: 0,0:14:21.41,0:14:22.14,Default,,0,0,0,,different types that are
Dialogue: 0,0:14:22.14,0:14:23.05,Default,,0,0,0,,included here, I'd just
Dialogue: 0,0:14:23.33,0:14:24.16,Default,,0,0,0,,encourage you to check out the
Dialogue: 0,0:14:24.16,0:14:25.45,Default,,0,0,0,,Receipt Validation programming
Dialogue: 0,0:14:25.45,0:14:26.01,Default,,0,0,0,,guide online.
Dialogue: 0,0:14:26.32,0:14:27.41,Default,,0,0,0,,And we go through all the
Dialogue: 0,0:14:27.41,0:14:28.09,Default,,0,0,0,,different types that are
Dialogue: 0,0:14:28.09,0:14:29.50,Default,,0,0,0,,actually included in the
Dialogue: 0,0:14:29.50,0:14:29.89,Default,,0,0,0,,receipt.
Dialogue: 0,0:14:30.41,0:14:32.90,Default,,0,0,0,,But now that you can read all
Dialogue: 0,0:14:32.90,0:14:35.23,Default,,0,0,0,,these transactions, it's up to
Dialogue: 0,0:14:35.23,0:14:36.57,Default,,0,0,0,,you to use those to verify the
Dialogue: 0,0:14:36.57,0:14:38.40,Default,,0,0,0,,content that StoreKit's telling
Dialogue: 0,0:14:38.40,0:14:38.87,Default,,0,0,0,,you the user's bought.
Dialogue: 0,0:14:38.87,0:14:40.66,Default,,0,0,0,,So what you do is you take the
Dialogue: 0,0:14:40.66,0:14:41.80,Default,,0,0,0,,transaction that's appeared
Dialogue: 0,0:14:41.80,0:14:42.49,Default,,0,0,0,,through this updated
Dialogue: 0,0:14:42.49,0:14:43.55,Default,,0,0,0,,transaction's call at the
Dialogue: 0,0:14:43.55,0:14:45.27,Default,,0,0,0,,beginning of the process and all
Dialogue: 0,0:14:45.27,0:14:46.45,Default,,0,0,0,,you have to do is compare all
Dialogue: 0,0:14:46.45,0:14:47.98,Default,,0,0,0,,those values to the ones inside
Dialogue: 0,0:14:47.98,0:14:48.43,Default,,0,0,0,,the receipt.
Dialogue: 0,0:14:48.43,0:14:49.39,Default,,0,0,0,,So you can use things like the
Dialogue: 0,0:14:49.39,0:14:50.73,Default,,0,0,0,,transaction ID, the purchase
Dialogue: 0,0:14:50.73,0:14:52.34,Default,,0,0,0,,date, the product identifier
Dialogue: 0,0:14:52.34,0:14:53.46,Default,,0,0,0,,that it's saying the user
Dialogue: 0,0:14:53.46,0:14:54.86,Default,,0,0,0,,bought, and if you can verify
Dialogue: 0,0:14:54.86,0:14:55.81,Default,,0,0,0,,that there's a transaction that
Dialogue: 0,0:14:55.81,0:14:56.93,Default,,0,0,0,,matches then great.
Dialogue: 0,0:14:56.93,0:14:58.46,Default,,0,0,0,,You've got a proof -- a document
Dialogue: 0,0:14:58.46,0:14:59.53,Default,,0,0,0,,proving that the user actually
Dialogue: 0,0:14:59.53,0:15:00.45,Default,,0,0,0,,purchased it and money's
Dialogue: 0,0:15:00.45,0:15:01.44,Default,,0,0,0,,actually changed hands.
Dialogue: 0,0:15:01.44,0:15:03.08,Default,,0,0,0,,So you can trust the transaction
Dialogue: 0,0:15:03.08,0:15:04.60,Default,,0,0,0,,that StoreKit's telling you.
Dialogue: 0,0:15:05.72,0:15:06.52,Default,,0,0,0,,When you're dealing with
Dialogue: 0,0:15:06.52,0:15:08.06,Default,,0,0,0,,subscriptions a common question
Dialogue: 0,0:15:08.06,0:15:09.69,Default,,0,0,0,,at this point is does my user
Dialogue: 0,0:15:09.69,0:15:10.76,Default,,0,0,0,,have an active subscription.
Dialogue: 0,0:15:11.70,0:15:13.24,Default,,0,0,0,,Well one thing just to note
Dialogue: 0,0:15:13.24,0:15:13.46,Default,,0,0,0,,here.
Dialogue: 0,0:15:13.46,0:15:14.36,Default,,0,0,0,,Just remember that a valid
Dialogue: 0,0:15:14.36,0:15:16.00,Default,,0,0,0,,receipt is not the same thing as
Dialogue: 0,0:15:16.00,0:15:17.16,Default,,0,0,0,,having a subscribed user.
Dialogue: 0,0:15:17.64,0:15:18.65,Default,,0,0,0,,So there's a bit of confusion
Dialogue: 0,0:15:18.65,0:15:19.22,Default,,0,0,0,,sometimes.
Dialogue: 0,0:15:19.44,0:15:20.57,Default,,0,0,0,,If you can validate the receipt
Dialogue: 0,0:15:20.57,0:15:21.18,Default,,0,0,0,,that doesn't mean that the
Dialogue: 0,0:15:21.18,0:15:22.58,Default,,0,0,0,,user's actually paid anything.
Dialogue: 0,0:15:22.88,0:15:23.75,Default,,0,0,0,,You know every app has a
Dialogue: 0,0:15:23.75,0:15:24.16,Default,,0,0,0,,receipt.
Dialogue: 0,0:15:24.24,0:15:25.53,Default,,0,0,0,,It contains information about
Dialogue: 0,0:15:25.77,0:15:27.45,Default,,0,0,0,,original application purchases
Dialogue: 0,0:15:27.45,0:15:28.41,Default,,0,0,0,,even for free apps.
Dialogue: 0,0:15:29.02,0:15:30.03,Default,,0,0,0,,It's the data inside the
Dialogue: 0,0:15:30.03,0:15:30.35,Default,,0,0,0,,receipt.
Dialogue: 0,0:15:30.35,0:15:31.46,Default,,0,0,0,,These transactions that's going
Dialogue: 0,0:15:31.46,0:15:32.26,Default,,0,0,0,,to tell you about the
Dialogue: 0,0:15:32.26,0:15:33.39,Default,,0,0,0,,subscription state of the user.
Dialogue: 0,0:15:33.39,0:15:35.85,Default,,0,0,0,,Now how do we find out that
Dialogue: 0,0:15:35.85,0:15:36.58,Default,,0,0,0,,subscription state?
Dialogue: 0,0:15:36.58,0:15:37.90,Default,,0,0,0,,You could take those
Dialogue: 0,0:15:37.90,0:15:39.48,Default,,0,0,0,,transactions and you want to
Dialogue: 0,0:15:39.48,0:15:40.37,Default,,0,0,0,,group them together by the
Dialogue: 0,0:15:40.37,0:15:42.44,Default,,0,0,0,,original transaction ID field.
Dialogue: 0,0:15:43.31,0:15:44.68,Default,,0,0,0,,This field just contains that
Dialogue: 0,0:15:44.75,0:15:46.09,Default,,0,0,0,,first transaction ID for a
Dialogue: 0,0:15:46.09,0:15:47.21,Default,,0,0,0,,particular auto renewable
Dialogue: 0,0:15:47.21,0:15:48.73,Default,,0,0,0,,subscription that a user used.
Dialogue: 0,0:15:48.73,0:15:49.67,Default,,0,0,0,,You can kind of think of this as
Dialogue: 0,0:15:49.67,0:15:51.53,Default,,0,0,0,,being like a subscription ID
Dialogue: 0,0:15:51.68,0:15:52.67,Default,,0,0,0,,that you can use to reference
Dialogue: 0,0:15:52.67,0:15:53.75,Default,,0,0,0,,and group together these
Dialogue: 0,0:15:53.75,0:15:54.47,Default,,0,0,0,,transactions.
Dialogue: 0,0:15:55.51,0:15:56.52,Default,,0,0,0,,So you can grab those
Dialogue: 0,0:15:56.77,0:15:58.01,Default,,0,0,0,,transactions and you want to
Dialogue: 0,0:15:58.01,0:15:58.97,Default,,0,0,0,,look for the one that has the
Dialogue: 0,0:15:58.97,0:16:00.17,Default,,0,0,0,,latest expiry date.
Dialogue: 0,0:16:00.46,0:16:02.32,Default,,0,0,0,,Now this is an indication of the
Dialogue: 0,0:16:02.32,0:16:03.64,Default,,0,0,0,,latest transaction that's taken
Dialogue: 0,0:16:03.64,0:16:03.85,Default,,0,0,0,,place.
Dialogue: 0,0:16:03.85,0:16:05.03,Default,,0,0,0,,So if you see an expiry date in
Dialogue: 0,0:16:05.03,0:16:06.61,Default,,0,0,0,,the future, that's an indication
Dialogue: 0,0:16:06.61,0:16:07.60,Default,,0,0,0,,that the user's in the middle of
Dialogue: 0,0:16:07.60,0:16:08.75,Default,,0,0,0,,a billing period and they have
Dialogue: 0,0:16:08.75,0:16:09.65,Default,,0,0,0,,an active subscription.
Dialogue: 0,0:16:10.12,0:16:11.86,Default,,0,0,0,,Now if you find an expiry date
Dialogue: 0,0:16:11.86,0:16:13.26,Default,,0,0,0,,in the past, that's an
Dialogue: 0,0:16:13.26,0:16:14.28,Default,,0,0,0,,indication that there's been no
Dialogue: 0,0:16:14.28,0:16:15.36,Default,,0,0,0,,transaction since then.
Dialogue: 0,0:16:15.36,0:16:16.52,Default,,0,0,0,,So the user's subscription's
Dialogue: 0,0:16:16.52,0:16:17.28,Default,,0,0,0,,actually lapsed.
Dialogue: 0,0:16:18.18,0:16:20.42,Default,,0,0,0,,Now if you do find this, you can
Dialogue: 0,0:16:20.42,0:16:21.76,Default,,0,0,0,,do what we say -- what we call a
Dialogue: 0,0:16:21.76,0:16:22.87,Default,,0,0,0,,receive refresh request.
Dialogue: 0,0:16:24.06,0:16:25.35,Default,,0,0,0,,And this'll go fetch the latest
Dialogue: 0,0:16:25.35,0:16:26.56,Default,,0,0,0,,copy of the receipt just as a
Dialogue: 0,0:16:26.56,0:16:27.96,Default,,0,0,0,,double check and you can repeat
Dialogue: 0,0:16:27.96,0:16:28.86,Default,,0,0,0,,those steps of receipt
Dialogue: 0,0:16:28.86,0:16:31.16,Default,,0,0,0,,validation and check these steps
Dialogue: 0,0:16:31.19,0:16:33.27,Default,,0,0,0,,that we just called above to see
Dialogue: 0,0:16:33.27,0:16:34.31,Default,,0,0,0,,if any new transactions have
Dialogue: 0,0:16:34.31,0:16:34.72,Default,,0,0,0,,appeared.
Dialogue: 0,0:16:36.32,0:16:37.70,Default,,0,0,0,,Now there is one caveat when
Dialogue: 0,0:16:37.70,0:16:38.60,Default,,0,0,0,,you're maintaining a
Dialogue: 0,0:16:38.60,0:16:40.00,Default,,0,0,0,,subscription state on the device
Dialogue: 0,0:16:40.00,0:16:40.40,Default,,0,0,0,,like this.
Dialogue: 0,0:16:40.40,0:16:41.58,Default,,0,0,0,,We talked about, you know,
Dialogue: 0,0:16:41.58,0:16:42.44,Default,,0,0,0,,expiry dates.
Dialogue: 0,0:16:42.44,0:16:43.40,Default,,0,0,0,,And we've talked about purchase
Dialogue: 0,0:16:43.40,0:16:43.72,Default,,0,0,0,,dates.
Dialogue: 0,0:16:44.05,0:16:45.40,Default,,0,0,0,,Well if you're doing this purely
Dialogue: 0,0:16:45.40,0:16:47.12,Default,,0,0,0,,on the device, the only data you
Dialogue: 0,0:16:47.12,0:16:48.20,Default,,0,0,0,,actually have to compare these
Dialogue: 0,0:16:48.20,0:16:49.45,Default,,0,0,0,,to is the user system data.
Dialogue: 0,0:16:49.99,0:16:51.09,Default,,0,0,0,,So what's stopping the user from
Dialogue: 0,0:16:51.09,0:16:52.31,Default,,0,0,0,,just winding their clock back
Dialogue: 0,0:16:52.59,0:16:53.85,Default,,0,0,0,,and putting themselves into an
Dialogue: 0,0:16:53.85,0:16:54.93,Default,,0,0,0,,active subscription period?
Dialogue: 0,0:16:56.73,0:16:57.94,Default,,0,0,0,,Not a lot, unfortunately.
Dialogue: 0,0:16:58.22,0:16:59.80,Default,,0,0,0,,So if this is a problem for you,
Dialogue: 0,0:16:59.80,0:17:01.18,Default,,0,0,0,,it's probably likely that you're
Dialogue: 0,0:17:01.18,0:17:01.91,Default,,0,0,0,,going to need to look at some
Dialogue: 0,0:17:01.91,0:17:03.04,Default,,0,0,0,,kind of service side solution.
Dialogue: 0,0:17:03.15,0:17:04.38,Default,,0,0,0,,Maybe look at receipt validation
Dialogue: 0,0:17:04.38,0:17:05.75,Default,,0,0,0,,on your server or at least, some
Dialogue: 0,0:17:05.75,0:17:06.97,Default,,0,0,0,,check to actually get timed --
Dialogue: 0,0:17:07.15,0:17:08.36,Default,,0,0,0,,time and date from your server
Dialogue: 0,0:17:08.36,0:17:09.08,Default,,0,0,0,,to check it against.
Dialogue: 0,0:17:09.08,0:17:11.73,Default,,0,0,0,,When it comes to actually
Dialogue: 0,0:17:11.80,0:17:13.14,Default,,0,0,0,,refreshing the receipt like I
Dialogue: 0,0:17:13.14,0:17:14.50,Default,,0,0,0,,just mentioned, you can do this
Dialogue: 0,0:17:14.50,0:17:15.93,Default,,0,0,0,,if the receipt doesn't exist or
Dialogue: 0,0:17:15.93,0:17:17.20,Default,,0,0,0,,it's invalid or maybe you're
Dialogue: 0,0:17:17.20,0:17:18.00,Default,,0,0,0,,searching for that extra
Dialogue: 0,0:17:18.00,0:17:18.59,Default,,0,0,0,,transaction.
Dialogue: 0,0:17:18.59,0:17:20.09,Default,,0,0,0,,It will require a network
Dialogue: 0,0:17:20.09,0:17:21.12,Default,,0,0,0,,request because it goes and
Dialogue: 0,0:17:21.12,0:17:22.19,Default,,0,0,0,,fetches a new receipt from the
Dialogue: 0,0:17:22.19,0:17:22.74,Default,,0,0,0,,App Store.
Dialogue: 0,0:17:22.98,0:17:24.87,Default,,0,0,0,,And it will require sign-in from
Dialogue: 0,0:17:24.87,0:17:26.63,Default,,0,0,0,,the user which means that you
Dialogue: 0,0:17:26.63,0:17:27.58,Default,,0,0,0,,should be very careful about how
Dialogue: 0,0:17:27.58,0:17:29.23,Default,,0,0,0,,often you do this and avoid
Dialogue: 0,0:17:29.23,0:17:31.07,Default,,0,0,0,,continuous loops of validating
Dialogue: 0,0:17:31.07,0:17:31.68,Default,,0,0,0,,and refreshing.
Dialogue: 0,0:17:31.68,0:17:32.57,Default,,0,0,0,,If you're doing that example
Dialogue: 0,0:17:32.57,0:17:33.69,Default,,0,0,0,,that we just spoke about where
Dialogue: 0,0:17:33.69,0:17:34.91,Default,,0,0,0,,you're looking for that expiry
Dialogue: 0,0:17:34.91,0:17:36.15,Default,,0,0,0,,date, make sure that if you
Dialogue: 0,0:17:36.15,0:17:37.09,Default,,0,0,0,,don't find it that you don't
Dialogue: 0,0:17:37.09,0:17:38.75,Default,,0,0,0,,just keep refreshing the receipt
Dialogue: 0,0:17:38.75,0:17:40.41,Default,,0,0,0,,refresh request over and over
Dialogue: 0,0:17:40.41,0:17:41.08,Default,,0,0,0,,again because it'll keep
Dialogue: 0,0:17:41.12,0:17:42.22,Default,,0,0,0,,prompting the user to log in.
Dialogue: 0,0:17:42.51,0:17:43.54,Default,,0,0,0,,So just issue one of these
Dialogue: 0,0:17:43.54,0:17:45.05,Default,,0,0,0,,requests if you're going to do
Dialogue: 0,0:17:45.05,0:17:46.36,Default,,0,0,0,,it and this is what it looks
Dialogue: 0,0:17:46.36,0:17:46.98,Default,,0,0,0,,like in code.
Dialogue: 0,0:17:47.79,0:17:48.28,Default,,0,0,0,,You create an
Dialogue: 0,0:17:48.28,0:17:50.08,Default,,0,0,0,,SKReceiptRefreshRequest object.
Dialogue: 0,0:17:50.56,0:17:51.66,Default,,0,0,0,,You set a delegate on it and you
Dialogue: 0,0:17:51.66,0:17:53.05,Default,,0,0,0,,just kick it off using the start
Dialogue: 0,0:17:53.13,0:17:53.31,Default,,0,0,0,,method.
Dialogue: 0,0:17:53.60,0:17:56.27,Default,,0,0,0,,On mac iOS if you're developing
Dialogue: 0,0:17:56.27,0:17:58.48,Default,,0,0,0,,for the Mac, same principles
Dialogue: 0,0:17:58.48,0:17:58.73,Default,,0,0,0,,apply.
Dialogue: 0,0:17:58.73,0:18:00.03,Default,,0,0,0,,You can do this if the receipt's
Dialogue: 0,0:18:00.03,0:18:00.44,Default,,0,0,0,,invalid.
Dialogue: 0,0:18:01.30,0:18:02.60,Default,,0,0,0,,It'll require a network request
Dialogue: 0,0:18:02.60,0:18:03.87,Default,,0,0,0,,and it will prompt the user to
Dialogue: 0,0:18:03.87,0:18:05.97,Default,,0,0,0,,actually log in as well but in
Dialogue: 0,0:18:05.97,0:18:06.82,Default,,0,0,0,,this case, it's a little
Dialogue: 0,0:18:06.82,0:18:07.09,Default,,0,0,0,,different.
Dialogue: 0,0:18:07.09,0:18:08.48,Default,,0,0,0,,The API what you do is you exit
Dialogue: 0,0:18:08.48,0:18:10.12,Default,,0,0,0,,your application using the code
Dialogue: 0,0:18:10.12,0:18:11.22,Default,,0,0,0,,173.
Dialogue: 0,0:18:11.22,0:18:12.80,Default,,0,0,0,,And that looks like this.
Dialogue: 0,0:18:12.80,0:18:14.06,Default,,0,0,0,,So this'll exit your
Dialogue: 0,0:18:14.06,0:18:14.63,Default,,0,0,0,,application.
Dialogue: 0,0:18:14.63,0:18:15.67,Default,,0,0,0,,This will trigger StoreKit in
Dialogue: 0,0:18:15.67,0:18:16.55,Default,,0,0,0,,the background to go and
Dialogue: 0,0:18:16.55,0:18:18.08,Default,,0,0,0,,download a new receipt to the
Dialogue: 0,0:18:18.08,0:18:19.77,Default,,0,0,0,,Mac and then it'll prompt the
Dialogue: 0,0:18:19.77,0:18:21.29,Default,,0,0,0,,user to log in and launch your
Dialogue: 0,0:18:21.29,0:18:21.52,Default,,0,0,0,,app again.
Dialogue: 0,0:18:21.52,0:18:24.48,Default,,0,0,0,,Now at this point I just want to
Dialogue: 0,0:18:24.48,0:18:25.94,Default,,0,0,0,,touch on a couple of differences
Dialogue: 0,0:18:25.94,0:18:26.83,Default,,0,0,0,,here between restoring
Dialogue: 0,0:18:26.83,0:18:28.50,Default,,0,0,0,,transactions and refreshing the
Dialogue: 0,0:18:28.50,0:18:28.99,Default,,0,0,0,,receipt.
Dialogue: 0,0:18:29.05,0:18:29.94,Default,,0,0,0,,These can be sometimes be
Dialogue: 0,0:18:29.94,0:18:30.37,Default,,0,0,0,,confused.
Dialogue: 0,0:18:30.37,0:18:32.12,Default,,0,0,0,,These are two separate APIs.
Dialogue: 0,0:18:33.02,0:18:34.26,Default,,0,0,0,,So restoring completed
Dialogue: 0,0:18:34.26,0:18:35.94,Default,,0,0,0,,transactions which is an API we
Dialogue: 0,0:18:35.94,0:18:37.15,Default,,0,0,0,,looked at in the What's New in
Dialogue: 0,0:18:37.15,0:18:38.85,Default,,0,0,0,,StoreKit talk this morning, this
Dialogue: 0,0:18:38.85,0:18:40.47,Default,,0,0,0,,is an API on the SK payment
Dialogue: 0,0:18:40.47,0:18:42.51,Default,,0,0,0,,queue whereas the receipt
Dialogue: 0,0:18:42.51,0:18:44.04,Default,,0,0,0,,refresh request is its own
Dialogue: 0,0:18:44.04,0:18:45.40,Default,,0,0,0,,instance that you create and you
Dialogue: 0,0:18:45.40,0:18:46.53,Default,,0,0,0,,kick it off using the start
Dialogue: 0,0:18:46.53,0:18:46.79,Default,,0,0,0,,method.
Dialogue: 0,0:18:46.91,0:18:48.20,Default,,0,0,0,,And they accomplish slightly
Dialogue: 0,0:18:48.20,0:18:48.79,Default,,0,0,0,,different things.
Dialogue: 0,0:18:48.93,0:18:50.16,Default,,0,0,0,,So restoring completed
Dialogue: 0,0:18:50.16,0:18:52.35,Default,,0,0,0,,transactions causes all the
Dialogue: 0,0:18:52.35,0:18:53.49,Default,,0,0,0,,completed transactions that have
Dialogue: 0,0:18:53.49,0:18:54.95,Default,,0,0,0,,occurred for a user to appear
Dialogue: 0,0:18:54.95,0:18:55.89,Default,,0,0,0,,back on that updated
Dialogue: 0,0:18:55.89,0:18:57.70,Default,,0,0,0,,transactions call back for you
Dialogue: 0,0:18:57.70,0:18:58.72,Default,,0,0,0,,to be able to process.
Dialogue: 0,0:18:59.76,0:19:01.04,Default,,0,0,0,,Whereas the receipt refresh
Dialogue: 0,0:19:01.04,0:19:02.45,Default,,0,0,0,,request is really just used to
Dialogue: 0,0:19:02.45,0:19:03.93,Default,,0,0,0,,go and fetch that new receipt
Dialogue: 0,0:19:03.93,0:19:04.32,Default,,0,0,0,,document.
Dialogue: 0,0:19:04.32,0:19:05.90,Default,,0,0,0,,That encrypted binary code for
Dialogue: 0,0:19:05.90,0:19:07.12,Default,,0,0,0,,you to be able to check the
Dialogue: 0,0:19:07.28,0:19:08.09,Default,,0,0,0,,contents of.
Dialogue: 0,0:19:09.41,0:19:10.27,Default,,0,0,0,,And there's also a slight
Dialogue: 0,0:19:10.27,0:19:11.51,Default,,0,0,0,,difference to actually what they
Dialogue: 0,0:19:11.51,0:19:12.01,Default,,0,0,0,,include.
Dialogue: 0,0:19:12.01,0:19:13.08,Default,,0,0,0,,So when you're restoring
Dialogue: 0,0:19:13.08,0:19:14.86,Default,,0,0,0,,completed transactions, this
Dialogue: 0,0:19:14.86,0:19:16.33,Default,,0,0,0,,restores only non-consumerable
Dialogue: 0,0:19:16.33,0:19:17.54,Default,,0,0,0,,products and auto renewable
Dialogue: 0,0:19:17.54,0:19:18.56,Default,,0,0,0,,subscription products.
Dialogue: 0,0:19:19.75,0:19:21.01,Default,,0,0,0,,Whereas a receipt refresh
Dialogue: 0,0:19:21.01,0:19:22.70,Default,,0,0,0,,request has both of those but it
Dialogue: 0,0:19:22.70,0:19:23.43,Default,,0,0,0,,also includes also any
Dialogue: 0,0:19:23.43,0:19:24.81,Default,,0,0,0,,non-renewing subscription
Dialogue: 0,0:19:25.17,0:19:26.47,Default,,0,0,0,,entries in the receipt.
Dialogue: 0,0:19:27.15,0:19:28.63,Default,,0,0,0,,So you'll notice that consumable
Dialogue: 0,0:19:28.63,0:19:30.14,Default,,0,0,0,,products are absent from both of
Dialogue: 0,0:19:30.14,0:19:31.23,Default,,0,0,0,,these types of requests.
Dialogue: 0,0:19:31.42,0:19:31.94,Default,,0,0,0,,If you're dealing with
Dialogue: 0,0:19:31.94,0:19:33.71,Default,,0,0,0,,consumable product purchases,
Dialogue: 0,0:19:34.23,0:19:35.25,Default,,0,0,0,,they're just going to appear
Dialogue: 0,0:19:35.25,0:19:36.70,Default,,0,0,0,,both in the updated transactions
Dialogue: 0,0:19:36.95,0:19:38.43,Default,,0,0,0,,and on the receipt at the time
Dialogue: 0,0:19:38.43,0:19:39.11,Default,,0,0,0,,of purchase.
Dialogue: 0,0:19:39.29,0:19:40.07,Default,,0,0,0,,So you kind of have that one
Dialogue: 0,0:19:40.07,0:19:41.96,Default,,0,0,0,,chance to actually verify the
Dialogue: 0,0:19:41.96,0:19:43.19,Default,,0,0,0,,consumable product and it won't
Dialogue: 0,0:19:43.19,0:19:44.58,Default,,0,0,0,,be restored for either of these
Dialogue: 0,0:19:44.58,0:19:44.92,Default,,0,0,0,,calls.
Dialogue: 0,0:19:46.18,0:19:47.36,Default,,0,0,0,,Now one other tip for dealing
Dialogue: 0,0:19:47.36,0:19:48.69,Default,,0,0,0,,with receipts is if you're
Dialogue: 0,0:19:48.69,0:19:49.45,Default,,0,0,0,,looking to switch to
Dialogue: 0,0:19:49.45,0:19:50.42,Default,,0,0,0,,subscriptions, maybe you've got
Dialogue: 0,0:19:50.42,0:19:51.64,Default,,0,0,0,,a paid application and you want
Dialogue: 0,0:19:51.64,0:19:52.58,Default,,0,0,0,,to switch it to being a
Dialogue: 0,0:19:52.58,0:19:54.20,Default,,0,0,0,,subscription model, you can use
Dialogue: 0,0:19:54.20,0:19:56.20,Default,,0,0,0,,this type 19 value in the
Dialogue: 0,0:19:56.20,0:19:57.22,Default,,0,0,0,,application receipt.
Dialogue: 0,0:19:58.59,0:19:59.61,Default,,0,0,0,,This contains the original
Dialogue: 0,0:19:59.61,0:20:00.51,Default,,0,0,0,,application version.
Dialogue: 0,0:20:00.59,0:20:02.16,Default,,0,0,0,,So you can use this application
Dialogue: 0,0:20:02.16,0:20:03.40,Default,,0,0,0,,version that a user originally
Dialogue: 0,0:20:03.40,0:20:05.06,Default,,0,0,0,,downloaded as kind of a gate to
Dialogue: 0,0:20:05.06,0:20:06.50,Default,,0,0,0,,know as to whether you need to
Dialogue: 0,0:20:06.50,0:20:07.77,Default,,0,0,0,,provide a content based on a
Dialogue: 0,0:20:07.80,0:20:08.92,Default,,0,0,0,,paid app or based on a
Dialogue: 0,0:20:08.98,0:20:09.43,Default,,0,0,0,,subscription.
Dialogue: 0,0:20:09.43,0:20:10.57,Default,,0,0,0,,You know it's not a great
Dialogue: 0,0:20:10.57,0:20:11.53,Default,,0,0,0,,experience if you've paid for an
Dialogue: 0,0:20:11.53,0:20:12.86,Default,,0,0,0,,application and then suddenly
Dialogue: 0,0:20:12.86,0:20:13.77,Default,,0,0,0,,you lose access to that
Dialogue: 0,0:20:13.77,0:20:15.27,Default,,0,0,0,,functionality you paid for if
Dialogue: 0,0:20:15.27,0:20:16.23,Default,,0,0,0,,it's now a subscription model.
Dialogue: 0,0:20:16.23,0:20:17.92,Default,,0,0,0,,So use type 19 as a bit of a
Dialogue: 0,0:20:17.92,0:20:20.61,Default,,0,0,0,,gate to be able to supply that.
Dialogue: 0,0:20:21.50,0:20:22.85,Default,,0,0,0,,So once you've done this step,
Dialogue: 0,0:20:22.85,0:20:23.88,Default,,0,0,0,,that's the process of checking
Dialogue: 0,0:20:23.88,0:20:25.34,Default,,0,0,0,,the transaction and confirming
Dialogue: 0,0:20:25.34,0:20:26.21,Default,,0,0,0,,subscription state on the
Dialogue: 0,0:20:26.21,0:20:26.65,Default,,0,0,0,,device.
Dialogue: 0,0:20:27.05,0:20:28.37,Default,,0,0,0,,You can then go ahead to finish
Dialogue: 0,0:20:28.41,0:20:29.03,Default,,0,0,0,,the transaction.
Dialogue: 0,0:20:29.03,0:20:30.35,Default,,0,0,0,,So you've made the content
Dialogue: 0,0:20:30.35,0:20:31.16,Default,,0,0,0,,available to the user.
Dialogue: 0,0:20:31.48,0:20:32.86,Default,,0,0,0,,You've updated that subscription
Dialogue: 0,0:20:32.86,0:20:33.18,Default,,0,0,0,,state.
Dialogue: 0,0:20:33.49,0:20:34.38,Default,,0,0,0,,When it comes to finishing the
Dialogue: 0,0:20:34.38,0:20:36.77,Default,,0,0,0,,transaction, you have to
Dialogue: 0,0:20:36.77,0:20:37.51,Default,,0,0,0,,remember to finish all
Dialogue: 0,0:20:37.51,0:20:38.88,Default,,0,0,0,,transactions that come through
Dialogue: 0,0:20:38.88,0:20:40.36,Default,,0,0,0,,this flow but only do it once
Dialogue: 0,0:20:40.36,0:20:41.70,Default,,0,0,0,,you've made content available to
Dialogue: 0,0:20:41.70,0:20:42.03,Default,,0,0,0,,the user.
Dialogue: 0,0:20:43.32,0:20:44.45,Default,,0,0,0,,So maybe you're downloading
Dialogue: 0,0:20:44.45,0:20:45.59,Default,,0,0,0,,content associated with an
Dialogue: 0,0:20:45.59,0:20:46.22,Default,,0,0,0,,in-app purchase.
Dialogue: 0,0:20:46.42,0:20:47.51,Default,,0,0,0,,Make sure until that download's
Dialogue: 0,0:20:47.51,0:20:48.99,Default,,0,0,0,,completely finished before you
Dialogue: 0,0:20:48.99,0:20:49.85,Default,,0,0,0,,go ahead and finish the
Dialogue: 0,0:20:49.85,0:20:50.41,Default,,0,0,0,,transaction.
Dialogue: 0,0:20:51.37,0:20:52.73,Default,,0,0,0,,And this includes all auto
Dialogue: 0,0:20:52.73,0:20:53.83,Default,,0,0,0,,renewable subscription
Dialogue: 0,0:20:53.83,0:20:54.47,Default,,0,0,0,,transactions.
Dialogue: 0,0:20:54.47,0:20:55.89,Default,,0,0,0,,So these renewable transactions
Dialogue: 0,0:20:55.89,0:20:56.91,Default,,0,0,0,,that come in at the end of each
Dialogue: 0,0:20:56.91,0:20:58.30,Default,,0,0,0,,billing period, you still need
Dialogue: 0,0:20:58.30,0:20:59.04,Default,,0,0,0,,to finish all of these
Dialogue: 0,0:20:59.04,0:21:00.09,Default,,0,0,0,,transactions and handle them.
Dialogue: 0,0:21:00.90,0:21:02.02,Default,,0,0,0,,And if you don't, the payment
Dialogue: 0,0:21:02.13,0:21:03.50,Default,,0,0,0,,actually stays on the payment
Dialogue: 0,0:21:03.50,0:21:05.11,Default,,0,0,0,,queue and it'll keep reappearing
Dialogue: 0,0:21:05.11,0:21:06.36,Default,,0,0,0,,in the updated transactions call
Dialogue: 0,0:21:06.36,0:21:07.82,Default,,0,0,0,,back until you deal with it and
Dialogue: 0,0:21:07.97,0:21:09.09,Default,,0,0,0,,call finish transactions.
Dialogue: 0,0:21:09.68,0:21:11.50,Default,,0,0,0,,We also have specific logic
Dialogue: 0,0:21:11.50,0:21:12.60,Default,,0,0,0,,around subscription billing
Dialogue: 0,0:21:12.60,0:21:13.05,Default,,0,0,0,,retry.
Dialogue: 0,0:21:13.05,0:21:14.32,Default,,0,0,0,,So if you do have auto renewable
Dialogue: 0,0:21:14.32,0:21:16.03,Default,,0,0,0,,subscriptions, it's important
Dialogue: 0,0:21:16.03,0:21:17.28,Default,,0,0,0,,that you do finish these
Dialogue: 0,0:21:17.28,0:21:18.25,Default,,0,0,0,,transactions so that our
Dialogue: 0,0:21:18.25,0:21:20.08,Default,,0,0,0,,subscription billing retry logic
Dialogue: 0,0:21:20.08,0:21:21.33,Default,,0,0,0,,can continue to try and charge
Dialogue: 0,0:21:21.33,0:21:22.59,Default,,0,0,0,,user's credit cards if there's
Dialogue: 0,0:21:22.59,0:21:23.79,Default,,0,0,0,,any kind of billing error along
Dialogue: 0,0:21:23.79,0:21:24.09,Default,,0,0,0,,the way.
Dialogue: 0,0:21:24.46,0:21:25.74,Default,,0,0,0,,So this is quite important for
Dialogue: 0,0:21:25.74,0:21:27.05,Default,,0,0,0,,our end to know the state of all
Dialogue: 0,0:21:27.05,0:21:28.16,Default,,0,0,0,,these transactions.
Dialogue: 0,0:21:29.04,0:21:30.02,Default,,0,0,0,,This is what the API though
Dialogue: 0,0:21:30.07,0:21:30.49,Default,,0,0,0,,looks like.
Dialogue: 0,0:21:30.70,0:21:31.69,Default,,0,0,0,,It's just one line of code.
Dialogue: 0,0:21:31.85,0:21:33.16,Default,,0,0,0,,You can pass in that transaction
Dialogue: 0,0:21:33.16,0:21:34.30,Default,,0,0,0,,object that we received at the
Dialogue: 0,0:21:34.30,0:21:35.82,Default,,0,0,0,,start of the process to the
Dialogue: 0,0:21:35.82,0:21:38.12,Default,,0,0,0,,finish transaction method on the
Dialogue: 0,0:21:38.12,0:21:39.64,Default,,0,0,0,,SKPaymentQueue's default queue.
Dialogue: 0,0:21:43.06,0:21:44.32,Default,,0,0,0,,So that wraps up that device
Dialogue: 0,0:21:44.39,0:21:46.02,Default,,0,0,0,,flow of validating the receipt
Dialogue: 0,0:21:46.02,0:21:47.45,Default,,0,0,0,,and updating content on the
Dialogue: 0,0:21:47.45,0:21:48.16,Default,,0,0,0,,user's device.
Dialogue: 0,0:21:48.34,0:21:49.76,Default,,0,0,0,,Let's jump up now and look at
Dialogue: 0,0:21:49.76,0:21:51.04,Default,,0,0,0,,how this works in a service side
Dialogue: 0,0:21:51.04,0:21:51.50,Default,,0,0,0,,environment.
Dialogue: 0,0:21:52.07,0:21:53.40,Default,,0,0,0,,And to do this, let's just walk
Dialogue: 0,0:21:53.40,0:21:54.21,Default,,0,0,0,,through a bit of an example.
Dialogue: 0,0:21:56.23,0:21:58.49,Default,,0,0,0,,Let's say I have a user here and
Dialogue: 0,0:21:58.49,0:22:01.40,Default,,0,0,0,,it's using your application and
Dialogue: 0,0:22:01.40,0:22:02.34,Default,,0,0,0,,you've got a server there
Dialogue: 0,0:22:02.62,0:22:03.51,Default,,0,0,0,,powering your back end.
Dialogue: 0,0:22:03.85,0:22:04.91,Default,,0,0,0,,The process here starts, of
Dialogue: 0,0:22:04.91,0:22:05.84,Default,,0,0,0,,course, with receiving that
Dialogue: 0,0:22:05.84,0:22:06.94,Default,,0,0,0,,transaction and the update
Dialogue: 0,0:22:06.94,0:22:08.10,Default,,0,0,0,,transactions call back that we
Dialogue: 0,0:22:08.10,0:22:08.42,Default,,0,0,0,,saw.
Dialogue: 0,0:22:09.40,0:22:10.48,Default,,0,0,0,,From there, you could read in
Dialogue: 0,0:22:10.48,0:22:12.32,Default,,0,0,0,,that binary receipt data using
Dialogue: 0,0:22:12.32,0:22:13.39,Default,,0,0,0,,the API mentioned.
Dialogue: 0,0:22:13.72,0:22:14.96,Default,,0,0,0,,At this point it's still encoded
Dialogue: 0,0:22:14.96,0:22:15.69,Default,,0,0,0,,so we haven't done all these
Dialogue: 0,0:22:15.69,0:22:16.86,Default,,0,0,0,,checks yet with the certificate
Dialogue: 0,0:22:16.86,0:22:17.22,Default,,0,0,0,,or anything.
Dialogue: 0,0:22:17.81,0:22:18.46,Default,,0,0,0,,Instead of doing it on the
Dialogue: 0,0:22:18.46,0:22:19.80,Default,,0,0,0,,device, what we can do is take
Dialogue: 0,0:22:19.80,0:22:21.35,Default,,0,0,0,,that binary encoded receipt data
Dialogue: 0,0:22:21.72,0:22:23.26,Default,,0,0,0,,and send it up to your server.
Dialogue: 0,0:22:24.63,0:22:26.10,Default,,0,0,0,,From here, you can just
Dialogue: 0,0:22:26.10,0:22:27.25,Default,,0,0,0,,establish connection over to the
Dialogue: 0,0:22:27.25,0:22:29.26,Default,,0,0,0,,App Store server by this verify
Dialogue: 0,0:22:29.26,0:22:30.40,Default,,0,0,0,,receipt url.
Dialogue: 0,0:22:31.08,0:22:32.33,Default,,0,0,0,,And you pass that binary data
Dialogue: 0,0:22:32.33,0:22:33.30,Default,,0,0,0,,over to the App Store.
Dialogue: 0,0:22:33.30,0:22:34.81,Default,,0,0,0,,Now the App Store does all that
Dialogue: 0,0:22:34.81,0:22:35.77,Default,,0,0,0,,hard work of checking the
Dialogue: 0,0:22:35.77,0:22:37.40,Default,,0,0,0,,certificates and verifying all
Dialogue: 0,0:22:37.40,0:22:38.07,Default,,0,0,0,,this information.
Dialogue: 0,0:22:38.25,0:22:40.09,Default,,0,0,0,,And it responds with a receipt
Dialogue: 0,0:22:40.09,0:22:41.43,Default,,0,0,0,,validity status as to whether or
Dialogue: 0,0:22:41.43,0:22:42.97,Default,,0,0,0,,not this is a valid document
Dialogue: 0,0:22:42.97,0:22:45.56,Default,,0,0,0,,that you can trust.
Dialogue: 0,0:22:45.56,0:22:47.18,Default,,0,0,0,,So this is it again really in
Dialogue: 0,0:22:47.18,0:22:48.58,Default,,0,0,0,,textual form, the response is in
Dialogue: 0,0:22:48.58,0:22:48.81,Default,,0,0,0,,JSON.
Dialogue: 0,0:22:49.53,0:22:51.82,Default,,0,0,0,,And it returns that status as to
Dialogue: 0,0:22:51.82,0:22:52.87,Default,,0,0,0,,whether a receipt is valid or
Dialogue: 0,0:22:52.87,0:22:54.14,Default,,0,0,0,,not but one point to note here,
Dialogue: 0,0:22:54.14,0:22:55.59,Default,,0,0,0,,as I mentioned before, you
Dialogue: 0,0:22:55.59,0:22:56.43,Default,,0,0,0,,shouldn't ever use this
Dialogue: 0,0:22:56.43,0:22:57.52,Default,,0,0,0,,technique directly from the
Dialogue: 0,0:22:57.52,0:22:58.27,Default,,0,0,0,,user's device.
Dialogue: 0,0:22:58.62,0:22:59.78,Default,,0,0,0,,This is really only secure when
Dialogue: 0,0:22:59.78,0:23:00.76,Default,,0,0,0,,you're doing it from your server
Dialogue: 0,0:23:00.76,0:23:01.39,Default,,0,0,0,,to the App Store.
Dialogue: 0,0:23:01.98,0:23:05.71,Default,,0,0,0,,And that's the whole step of
Dialogue: 0,0:23:05.76,0:23:06.93,Default,,0,0,0,,validating a receipt on your
Dialogue: 0,0:23:06.93,0:23:07.24,Default,,0,0,0,,server.
Dialogue: 0,0:23:07.24,0:23:08.81,Default,,0,0,0,,It's a little simpler than on
Dialogue: 0,0:23:08.81,0:23:09.61,Default,,0,0,0,,the user's device.
Dialogue: 0,0:23:10.47,0:23:11.70,Default,,0,0,0,,Now let's take a look at how you
Dialogue: 0,0:23:11.70,0:23:13.16,Default,,0,0,0,,unlock content and inspect
Dialogue: 0,0:23:13.16,0:23:14.99,Default,,0,0,0,,transactions based on this
Dialogue: 0,0:23:14.99,0:23:15.37,Default,,0,0,0,,scenario.
Dialogue: 0,0:23:17.74,0:23:18.83,Default,,0,0,0,,Let's look at this example
Dialogue: 0,0:23:18.83,0:23:19.10,Default,,0,0,0,,again.
Dialogue: 0,0:23:19.10,0:23:20.30,Default,,0,0,0,,So let's say that you've sent
Dialogue: 0,0:23:20.30,0:23:21.82,Default,,0,0,0,,that binary data up to your
Dialogue: 0,0:23:22.23,0:23:22.43,Default,,0,0,0,,server.
Dialogue: 0,0:23:22.46,0:23:23.75,Default,,0,0,0,,You establish that connection to
Dialogue: 0,0:23:23.75,0:23:24.98,Default,,0,0,0,,the App Store and you send over
Dialogue: 0,0:23:24.98,0:23:26.40,Default,,0,0,0,,the binary data to the App
Dialogue: 0,0:23:26.40,0:23:26.64,Default,,0,0,0,,Store.
Dialogue: 0,0:23:27.64,0:23:28.88,Default,,0,0,0,,Now not only does the App Store
Dialogue: 0,0:23:28.88,0:23:30.56,Default,,0,0,0,,actually respond with the
Dialogue: 0,0:23:30.56,0:23:32.18,Default,,0,0,0,,validity of the receipt, the
Dialogue: 0,0:23:32.34,0:23:33.84,Default,,0,0,0,,response here actually includes
Dialogue: 0,0:23:34.11,0:23:35.89,Default,,0,0,0,,a decoded version of the latest
Dialogue: 0,0:23:36.33,0:23:37.95,Default,,0,0,0,,application receipt as well.
Dialogue: 0,0:23:38.39,0:23:39.75,Default,,0,0,0,,So this is a decoded version in
Dialogue: 0,0:23:39.75,0:23:41.50,Default,,0,0,0,,JSON that you can inspect and
Dialogue: 0,0:23:41.50,0:23:42.79,Default,,0,0,0,,look at all those transactions.
Dialogue: 0,0:23:42.79,0:23:43.95,Default,,0,0,0,,It's just the same consent that
Dialogue: 0,0:23:43.95,0:23:45.55,Default,,0,0,0,,you see on the user's device
Dialogue: 0,0:23:45.55,0:23:46.40,Default,,0,0,0,,when you decrypt it on the
Dialogue: 0,0:23:46.40,0:23:48.12,Default,,0,0,0,,device but this time it's a JSON
Dialogue: 0,0:23:48.12,0:23:49.07,Default,,0,0,0,,payload from the App Store and
Dialogue: 0,0:23:49.07,0:23:50.00,Default,,0,0,0,,you can just inspect all those
Dialogue: 0,0:23:50.00,0:23:50.57,Default,,0,0,0,,transactions.
Dialogue: 0,0:23:50.91,0:23:52.06,Default,,0,0,0,,Make decisions about whether to
Dialogue: 0,0:23:52.06,0:23:53.72,Default,,0,0,0,,unlock the content and then go
Dialogue: 0,0:23:53.72,0:23:54.49,Default,,0,0,0,,ahead and finish that
Dialogue: 0,0:23:54.49,0:23:55.60,Default,,0,0,0,,transaction back down on the
Dialogue: 0,0:23:55.60,0:23:56.55,Default,,0,0,0,,user's device again.
Dialogue: 0,0:23:57.31,0:23:58.27,Default,,0,0,0,,This is particularly useful
Dialogue: 0,0:23:58.27,0:23:59.45,Default,,0,0,0,,because you can then do things
Dialogue: 0,0:23:59.45,0:24:00.75,Default,,0,0,0,,like updating state across other
Dialogue: 0,0:24:00.75,0:24:01.76,Default,,0,0,0,,platforms that you might have
Dialogue: 0,0:24:01.76,0:24:03.11,Default,,0,0,0,,associated with your server.
Dialogue: 0,0:24:04.63,0:24:05.94,Default,,0,0,0,,So this is what that process
Dialogue: 0,0:24:05.94,0:24:07.27,Default,,0,0,0,,looks like, again, just in text
Dialogue: 0,0:24:07.27,0:24:08.58,Default,,0,0,0,,but the important point here to
Dialogue: 0,0:24:08.58,0:24:09.41,Default,,0,0,0,,call out is that you have to
Dialogue: 0,0:24:09.41,0:24:10.75,Default,,0,0,0,,remember to tell the device to
Dialogue: 0,0:24:10.75,0:24:12.13,Default,,0,0,0,,still finish the transaction if
Dialogue: 0,0:24:12.13,0:24:12.98,Default,,0,0,0,,you're using this technique.
Dialogue: 0,0:24:18.23,0:24:19.26,Default,,0,0,0,,So let's answer this question
Dialogue: 0,0:24:19.26,0:24:21.43,Default,,0,0,0,,again of unlocking subscription
Dialogue: 0,0:24:21.43,0:24:21.75,Default,,0,0,0,,features.
Dialogue: 0,0:24:21.75,0:24:23.19,Default,,0,0,0,,So does my user have an active
Dialogue: 0,0:24:23.19,0:24:23.75,Default,,0,0,0,,subscription.
Dialogue: 0,0:24:24.80,0:24:25.91,Default,,0,0,0,,It's exactly the same flow, you
Dialogue: 0,0:24:25.91,0:24:26.94,Default,,0,0,0,,know, here because we said that
Dialogue: 0,0:24:27.31,0:24:28.34,Default,,0,0,0,,this receipt contains all the
Dialogue: 0,0:24:28.34,0:24:29.01,Default,,0,0,0,,same information.
Dialogue: 0,0:24:29.01,0:24:29.66,Default,,0,0,0,,So you can group the
Dialogue: 0,0:24:29.66,0:24:30.94,Default,,0,0,0,,transactions that come back in
Dialogue: 0,0:24:30.94,0:24:32.77,Default,,0,0,0,,this receipt by the original
Dialogue: 0,0:24:32.77,0:24:33.58,Default,,0,0,0,,transaction ID.
Dialogue: 0,0:24:33.58,0:24:34.94,Default,,0,0,0,,That's that subscription ID
Dialogue: 0,0:24:34.94,0:24:35.25,Default,,0,0,0,,field.
Dialogue: 0,0:24:35.96,0:24:36.98,Default,,0,0,0,,And all you need to do is find
Dialogue: 0,0:24:36.98,0:24:37.96,Default,,0,0,0,,the transaction that has the
Dialogue: 0,0:24:37.96,0:24:39.13,Default,,0,0,0,,latest expiry date.
Dialogue: 0,0:24:39.13,0:24:40.39,Default,,0,0,0,,And if there's an expiry date in
Dialogue: 0,0:24:40.39,0:24:41.88,Default,,0,0,0,,the future that's an indication
Dialogue: 0,0:24:41.88,0:24:43.48,Default,,0,0,0,,that the user is in an active
Dialogue: 0,0:24:43.48,0:24:44.09,Default,,0,0,0,,subscription.
Dialogue: 0,0:24:45.16,0:24:46.17,Default,,0,0,0,,If there's not an expiry date in
Dialogue: 0,0:24:46.17,0:24:47.18,Default,,0,0,0,,the future, if it's in the past
Dialogue: 0,0:24:47.18,0:24:48.84,Default,,0,0,0,,somewhere well that means that
Dialogue: 0,0:24:48.90,0:24:50.16,Default,,0,0,0,,the subscription's unfortunately
Dialogue: 0,0:24:50.16,0:24:50.58,Default,,0,0,0,,lapsed.
Dialogue: 0,0:24:50.96,0:24:52.13,Default,,0,0,0,,And this is the latest copy of
Dialogue: 0,0:24:52.13,0:24:52.59,Default,,0,0,0,,the receipt.
Dialogue: 0,0:24:52.59,0:24:53.39,Default,,0,0,0,,So there's no way that you can
Dialogue: 0,0:24:53.39,0:24:55.17,Default,,0,0,0,,really do a receipt refresh
Dialogue: 0,0:24:55.17,0:24:55.85,Default,,0,0,0,,request from the server.
Dialogue: 0,0:24:55.85,0:24:56.98,Default,,0,0,0,,You've just got the latest copy
Dialogue: 0,0:24:56.98,0:24:57.29,Default,,0,0,0,,already.
Dialogue: 0,0:24:57.93,0:25:01.09,Default,,0,0,0,,So now we've unlocked content on
Dialogue: 0,0:25:01.17,0:25:02.35,Default,,0,0,0,,the server based on this
Dialogue: 0,0:25:02.35,0:25:02.93,Default,,0,0,0,,information.
Dialogue: 0,0:25:03.17,0:25:04.08,Default,,0,0,0,,As I mentioned, you still need
Dialogue: 0,0:25:04.08,0:25:04.88,Default,,0,0,0,,to remember to finish the
Dialogue: 0,0:25:04.88,0:25:06.04,Default,,0,0,0,,transaction back down on the
Dialogue: 0,0:25:06.04,0:25:06.98,Default,,0,0,0,,user's device again.
Dialogue: 0,0:25:07.45,0:25:08.55,Default,,0,0,0,,You'll hear me say finish
Dialogue: 0,0:25:08.55,0:25:09.74,Default,,0,0,0,,transactions a lot in this talk.
Dialogue: 0,0:25:09.74,0:25:11.34,Default,,0,0,0,,It's a really important point
Dialogue: 0,0:25:11.34,0:25:13.73,Default,,0,0,0,,that I want to drive home today.
Dialogue: 0,0:25:13.94,0:25:15.49,Default,,0,0,0,,So let's look specifically at
Dialogue: 0,0:25:15.49,0:25:16.49,Default,,0,0,0,,subscriptions for a little
Dialogue: 0,0:25:16.49,0:25:16.75,Default,,0,0,0,,while.
Dialogue: 0,0:25:16.75,0:25:18.69,Default,,0,0,0,,These scenarios have applied to
Dialogue: 0,0:25:18.69,0:25:19.80,Default,,0,0,0,,all in-app purchase types.
Dialogue: 0,0:25:20.04,0:25:21.14,Default,,0,0,0,,Now let's really talk about
Dialogue: 0,0:25:21.42,0:25:22.43,Default,,0,0,0,,maintaining subscription state
Dialogue: 0,0:25:22.43,0:25:24.03,Default,,0,0,0,,and particularly using that
Dialogue: 0,0:25:24.03,0:25:24.83,Default,,0,0,0,,service side flow.
Dialogue: 0,0:25:24.83,0:25:29.69,Default,,0,0,0,,So in this example, again, we
Dialogue: 0,0:25:29.69,0:25:30.90,Default,,0,0,0,,have an updated transactions
Dialogue: 0,0:25:30.90,0:25:32.71,Default,,0,0,0,,call being given to the user's
Dialogue: 0,0:25:32.71,0:25:33.27,Default,,0,0,0,,device.
Dialogue: 0,0:25:33.49,0:25:34.45,Default,,0,0,0,,And the user can read in that
Dialogue: 0,0:25:34.45,0:25:36.63,Default,,0,0,0,,binary receipt data into memory
Dialogue: 0,0:25:36.63,0:25:37.36,Default,,0,0,0,,on the user's device.
Dialogue: 0,0:25:37.36,0:25:39.53,Default,,0,0,0,,They send that information up to
Dialogue: 0,0:25:39.61,0:25:40.95,Default,,0,0,0,,your server.
Dialogue: 0,0:25:41.13,0:25:42.33,Default,,0,0,0,,Now this time, we're going to do
Dialogue: 0,0:25:42.33,0:25:43.07,Default,,0,0,0,,a little bit of a different
Dialogue: 0,0:25:43.07,0:25:43.44,Default,,0,0,0,,technique.
Dialogue: 0,0:25:43.44,0:25:44.40,Default,,0,0,0,,This is going to be a bit more
Dialogue: 0,0:25:44.40,0:25:45.47,Default,,0,0,0,,of a real world scenario here.
Dialogue: 0,0:25:45.90,0:25:47.32,Default,,0,0,0,,We're going to hold onto a copy
Dialogue: 0,0:25:47.63,0:25:49.32,Default,,0,0,0,,of the binary receipt data on
Dialogue: 0,0:25:49.32,0:25:51.35,Default,,0,0,0,,your server here and at the same
Dialogue: 0,0:25:51.35,0:25:52.52,Default,,0,0,0,,time, we'll send a copy of that
Dialogue: 0,0:25:52.52,0:25:53.75,Default,,0,0,0,,data over to the App Store to
Dialogue: 0,0:25:53.75,0:25:54.98,Default,,0,0,0,,achieve the technique that we
Dialogue: 0,0:25:54.98,0:25:55.56,Default,,0,0,0,,saw before.
Dialogue: 0,0:25:55.56,0:25:56.96,Default,,0,0,0,,So this will respond with the
Dialogue: 0,0:25:56.96,0:25:58.06,Default,,0,0,0,,latest copy of the receipt and
Dialogue: 0,0:25:58.06,0:25:59.51,Default,,0,0,0,,we can do that same technique of
Dialogue: 0,0:25:59.90,0:26:01.24,Default,,0,0,0,,finishing a transaction and
Dialogue: 0,0:26:01.24,0:26:02.81,Default,,0,0,0,,updating content across devices.
Dialogue: 0,0:26:03.12,0:26:06.02,Default,,0,0,0,,Now in this example, we're
Dialogue: 0,0:26:06.02,0:26:06.92,Default,,0,0,0,,dealing with an auto renewable
Dialogue: 0,0:26:06.92,0:26:07.59,Default,,0,0,0,,subscription.
Dialogue: 0,0:26:07.66,0:26:09.32,Default,,0,0,0,,So let's say that the user goes
Dialogue: 0,0:26:09.40,0:26:10.51,Default,,0,0,0,,offline for a bit and stops
Dialogue: 0,0:26:10.51,0:26:11.67,Default,,0,0,0,,using your app for a few days
Dialogue: 0,0:26:12.09,0:26:13.58,Default,,0,0,0,,which is a shocking thought, I
Dialogue: 0,0:26:13.58,0:26:13.71,Default,,0,0,0,,know.
Dialogue: 0,0:26:14.01,0:26:16.18,Default,,0,0,0,,But it can happen and if it does
Dialogue: 0,0:26:16.18,0:26:18.35,Default,,0,0,0,,happen and then the user happens
Dialogue: 0,0:26:18.38,0:26:19.31,Default,,0,0,0,,to have their subscription
Dialogue: 0,0:26:19.31,0:26:20.38,Default,,0,0,0,,renewed in the background during
Dialogue: 0,0:26:20.38,0:26:21.05,Default,,0,0,0,,this process.
Dialogue: 0,0:26:21.05,0:26:22.23,Default,,0,0,0,,The credit card's charged.
Dialogue: 0,0:26:22.80,0:26:24.12,Default,,0,0,0,,So a new transaction's taken
Dialogue: 0,0:26:24.12,0:26:24.75,Default,,0,0,0,,place somewhere.
Dialogue: 0,0:26:25.73,0:26:26.67,Default,,0,0,0,,And you don't know about it yet.
Dialogue: 0,0:26:26.67,0:26:28.08,Default,,0,0,0,,So the user jumps on, I don't
Dialogue: 0,0:26:28.08,0:26:28.74,Default,,0,0,0,,know your website.
Dialogue: 0,0:26:30.13,0:26:31.39,Default,,0,0,0,,And at this point, your server
Dialogue: 0,0:26:31.39,0:26:32.71,Default,,0,0,0,,doesn't have any new information
Dialogue: 0,0:26:32.71,0:26:33.74,Default,,0,0,0,,about the transaction that's
Dialogue: 0,0:26:33.74,0:26:35.34,Default,,0,0,0,,taken place in the background.
Dialogue: 0,0:26:35.95,0:26:36.99,Default,,0,0,0,,So in order for you to know this
Dialogue: 0,0:26:36.99,0:26:38.27,Default,,0,0,0,,information from your service
Dialogue: 0,0:26:38.27,0:26:40.14,Default,,0,0,0,,point of view, remember we're
Dialogue: 0,0:26:40.14,0:26:41.24,Default,,0,0,0,,holding on to that binary
Dialogue: 0,0:26:41.24,0:26:42.45,Default,,0,0,0,,receipt data on the server.
Dialogue: 0,0:26:42.45,0:26:43.81,Default,,0,0,0,,You can treat that data just
Dialogue: 0,0:26:43.81,0:26:44.31,Default,,0,0,0,,like a token.
Dialogue: 0,0:26:44.31,0:26:45.46,Default,,0,0,0,,And you can actually send it
Dialogue: 0,0:26:45.46,0:26:46.70,Default,,0,0,0,,back over to the App Store here
Dialogue: 0,0:26:46.99,0:26:48.00,Default,,0,0,0,,by that same request.
Dialogue: 0,0:26:48.49,0:26:50.85,Default,,0,0,0,,And as I mentioned before, not
Dialogue: 0,0:26:50.85,0:26:52.10,Default,,0,0,0,,only does this include the
Dialogue: 0,0:26:52.10,0:26:53.39,Default,,0,0,0,,decoded receipt data, this is
Dialogue: 0,0:26:53.39,0:26:55.05,Default,,0,0,0,,actually the latest copy of the
Dialogue: 0,0:26:55.05,0:26:55.98,Default,,0,0,0,,application receipt.
Dialogue: 0,0:26:56.23,0:26:57.75,Default,,0,0,0,,So this is latest copy is going
Dialogue: 0,0:26:57.75,0:26:59.25,Default,,0,0,0,,to contain any new transactions
Dialogue: 0,0:26:59.25,0:27:00.21,Default,,0,0,0,,that have occurred in the
Dialogue: 0,0:27:00.21,0:27:00.74,Default,,0,0,0,,background.
Dialogue: 0,0:27:00.74,0:27:02.41,Default,,0,0,0,,So you can find out about that
Dialogue: 0,0:27:02.41,0:27:03.46,Default,,0,0,0,,transaction that's occurred and
Dialogue: 0,0:27:03.79,0:27:05.28,Default,,0,0,0,,accordingly, give the user
Dialogue: 0,0:27:05.28,0:27:06.56,Default,,0,0,0,,access to your website again.
Dialogue: 0,0:27:07.70,0:27:08.49,Default,,0,0,0,,From there, you might want to
Dialogue: 0,0:27:08.49,0:27:09.70,Default,,0,0,0,,unlock content across multiple
Dialogue: 0,0:27:09.70,0:27:10.28,Default,,0,0,0,,devices.
Dialogue: 0,0:27:11.03,0:27:12.10,Default,,0,0,0,,But you do have to remember that
Dialogue: 0,0:27:12.10,0:27:13.30,Default,,0,0,0,,when the user does pick up that
Dialogue: 0,0:27:13.30,0:27:14.80,Default,,0,0,0,,original device again and come
Dialogue: 0,0:27:14.80,0:27:16.76,Default,,0,0,0,,back online, that will still
Dialogue: 0,0:27:16.76,0:27:17.96,Default,,0,0,0,,receive the transaction through
Dialogue: 0,0:27:17.96,0:27:19.28,Default,,0,0,0,,the updated transactions call.
Dialogue: 0,0:27:19.28,0:27:21.19,Default,,0,0,0,,And so you still need to handle
Dialogue: 0,0:27:21.19,0:27:22.40,Default,,0,0,0,,this and all the way through to
Dialogue: 0,0:27:22.40,0:27:23.34,Default,,0,0,0,,finishing the transaction.
Dialogue: 0,0:27:23.34,0:27:24.90,Default,,0,0,0,,So what we'd suggest is maybe
Dialogue: 0,0:27:25.10,0:27:26.24,Default,,0,0,0,,treat this as an opportunity to
Dialogue: 0,0:27:26.57,0:27:27.99,Default,,0,0,0,,update that binary receipt data
Dialogue: 0,0:27:27.99,0:27:28.72,Default,,0,0,0,,up on your server.
Dialogue: 0,0:27:28.72,0:27:30.91,Default,,0,0,0,,You're probably associating that
Dialogue: 0,0:27:30.91,0:27:32.47,Default,,0,0,0,,with a user's account for your
Dialogue: 0,0:27:32.47,0:27:33.37,Default,,0,0,0,,particular application.
Dialogue: 0,0:27:33.82,0:27:35.19,Default,,0,0,0,,And then remember to finish the
Dialogue: 0,0:27:35.19,0:27:36.23,Default,,0,0,0,,transaction back down on the
Dialogue: 0,0:27:36.23,0:27:36.83,Default,,0,0,0,,device again.
Dialogue: 0,0:27:36.83,0:27:37.72,Default,,0,0,0,,So even though your server
Dialogue: 0,0:27:37.72,0:27:38.60,Default,,0,0,0,,already knew about this
Dialogue: 0,0:27:38.60,0:27:39.55,Default,,0,0,0,,transaction, it's still
Dialogue: 0,0:27:39.55,0:27:40.97,Default,,0,0,0,,important to complete this flow
Dialogue: 0,0:27:40.97,0:27:42.00,Default,,0,0,0,,and finish that transaction
Dialogue: 0,0:27:42.00,0:27:43.00,Default,,0,0,0,,based on what I said before.
Dialogue: 0,0:27:44.06,0:27:45.32,Default,,0,0,0,,So for this technique, what
Dialogue: 0,0:27:45.35,0:27:46.40,Default,,0,0,0,,we're really doing here is we're
Dialogue: 0,0:27:46.40,0:27:48.11,Default,,0,0,0,,treating that receipt data much
Dialogue: 0,0:27:48.11,0:27:48.65,Default,,0,0,0,,like a token.
Dialogue: 0,0:27:48.74,0:27:49.83,Default,,0,0,0,,And we're using it to perform
Dialogue: 0,0:27:50.03,0:27:51.52,Default,,0,0,0,,multiple requests by storing it
Dialogue: 0,0:27:51.80,0:27:52.41,Default,,0,0,0,,on your server.
Dialogue: 0,0:27:53.05,0:27:54.16,Default,,0,0,0,,It's the same binary data that
Dialogue: 0,0:27:54.16,0:27:55.73,Default,,0,0,0,,can be used over and over again.
Dialogue: 0,0:27:56.34,0:27:58.30,Default,,0,0,0,,And it's quite useful for
Dialogue: 0,0:27:58.30,0:27:59.60,Default,,0,0,0,,propagating subscription state
Dialogue: 0,0:27:59.60,0:28:00.91,Default,,0,0,0,,across multiple devices and
Dialogue: 0,0:28:00.91,0:28:02.77,Default,,0,0,0,,platforms but still remember
Dialogue: 0,0:28:02.90,0:28:04.79,Default,,0,0,0,,that you have to process all the
Dialogue: 0,0:28:04.79,0:28:06.11,Default,,0,0,0,,updated transaction calls and
Dialogue: 0,0:28:06.11,0:28:07.17,Default,,0,0,0,,that means all the renewal
Dialogue: 0,0:28:07.17,0:28:08.57,Default,,0,0,0,,transactions that come through
Dialogue: 0,0:28:08.83,0:28:10.31,Default,,0,0,0,,for each billing period all the
Dialogue: 0,0:28:10.31,0:28:11.89,Default,,0,0,0,,way through to finishing the
Dialogue: 0,0:28:11.89,0:28:12.44,Default,,0,0,0,,transaction.
Dialogue: 0,0:28:12.44,0:28:16.72,Default,,0,0,0,,Now, as you can imagine, over
Dialogue: 0,0:28:16.72,0:28:18.10,Default,,0,0,0,,time if you're dealing with an
Dialogue: 0,0:28:18.10,0:28:19.16,Default,,0,0,0,,auto renewable subscription
Dialogue: 0,0:28:19.16,0:28:20.83,Default,,0,0,0,,particularly if it has a short
Dialogue: 0,0:28:20.83,0:28:22.78,Default,,0,0,0,,billing period, this transaction
Dialogue: 0,0:28:22.78,0:28:24.24,Default,,0,0,0,,receipt can grow quite large,
Dialogue: 0,0:28:24.24,0:28:24.46,Default,,0,0,0,,you know?
Dialogue: 0,0:28:24.46,0:28:26.24,Default,,0,0,0,,Every transaction that occurs
Dialogue: 0,0:28:26.24,0:28:27.27,Default,,0,0,0,,for a subscription appears on
Dialogue: 0,0:28:27.27,0:28:27.69,Default,,0,0,0,,the receipt.
Dialogue: 0,0:28:27.78,0:28:29.51,Default,,0,0,0,,So this document can grow quite
Dialogue: 0,0:28:29.51,0:28:30.45,Default,,0,0,0,,large over time.
Dialogue: 0,0:28:31.19,0:28:32.82,Default,,0,0,0,,And we've heard feedback that a
Dialogue: 0,0:28:32.82,0:28:34.09,Default,,0,0,0,,lot of you only real care about
Dialogue: 0,0:28:34.34,0:28:35.30,Default,,0,0,0,,the latest transaction.
Dialogue: 0,0:28:35.38,0:28:36.49,Default,,0,0,0,,You know I keep on saying you
Dialogue: 0,0:28:36.49,0:28:37.61,Default,,0,0,0,,check for the latest expiry
Dialogue: 0,0:28:37.61,0:28:37.74,Default,,0,0,0,,date.
Dialogue: 0,0:28:37.74,0:28:38.72,Default,,0,0,0,,Well a lot of you really only
Dialogue: 0,0:28:38.72,0:28:39.62,Default,,0,0,0,,care about that particular
Dialogue: 0,0:28:39.62,0:28:40.17,Default,,0,0,0,,transaction.
Dialogue: 0,0:28:40.17,0:28:42.53,Default,,0,0,0,,So we're enhancing this endpoint
Dialogue: 0,0:28:42.53,0:28:44.14,Default,,0,0,0,,today with a new query parameter
Dialogue: 0,0:28:44.14,0:28:45.46,Default,,0,0,0,,that you can include which is to
Dialogue: 0,0:28:45.46,0:28:47.42,Default,,0,0,0,,exclude old transactions from
Dialogue: 0,0:28:47.42,0:28:48.14,Default,,0,0,0,,this endpoint.
Dialogue: 0,0:28:48.65,0:28:50.51,Default,,0,0,0,,If you set this to true, the
Dialogue: 0,0:28:51.49,0:28:52.79,Default,,0,0,0,,verify receipt endpoint's just
Dialogue: 0,0:28:52.79,0:28:54.64,Default,,0,0,0,,going to respond with the latest
Dialogue: 0,0:28:54.64,0:28:55.77,Default,,0,0,0,,transaction for each
Dialogue: 0,0:28:55.77,0:28:56.41,Default,,0,0,0,,subscription.
Dialogue: 0,0:28:56.50,0:28:57.40,Default,,0,0,0,,So that's going to drastically
Dialogue: 0,0:28:57.40,0:28:58.91,Default,,0,0,0,,reduce the payload of that
Dialogue: 0,0:28:58.91,0:29:00.38,Default,,0,0,0,,request that's coming back from
Dialogue: 0,0:29:00.38,0:29:01.57,Default,,0,0,0,,the verified receipt endpoint.
Dialogue: 0,0:29:01.99,0:29:03.76,Default,,0,0,0,,And not only just save web
Dialogue: 0,0:29:03.76,0:29:04.81,Default,,0,0,0,,traffic but it's also just going
Dialogue: 0,0:29:04.81,0:29:07.10,Default,,0,0,0,,to mean saved processing time on
Dialogue: 0,0:29:07.10,0:29:08.09,Default,,0,0,0,,your server because you don't
Dialogue: 0,0:29:08.09,0:29:09.43,Default,,0,0,0,,have as many transactions to be
Dialogue: 0,0:29:09.43,0:29:09.89,Default,,0,0,0,,looping through.
Dialogue: 0,0:29:09.89,0:29:11.07,Default,,0,0,0,,Now this doesn't sound like a
Dialogue: 0,0:29:11.07,0:29:12.07,Default,,0,0,0,,lot but when you're dealing with
Dialogue: 0,0:29:12.21,0:29:13.90,Default,,0,0,0,,thousands or millions of users
Dialogue: 0,0:29:13.90,0:29:15.49,Default,,0,0,0,,like a lot of you do, this can
Dialogue: 0,0:29:15.49,0:29:16.39,Default,,0,0,0,,actually save quite a lot of
Dialogue: 0,0:29:16.39,0:29:16.61,Default,,0,0,0,,time.
Dialogue: 0,0:29:16.61,0:29:17.46,Default,,0,0,0,,So we think this is going to be
Dialogue: 0,0:29:17.46,0:29:18.55,Default,,0,0,0,,a great enhancement for those of
Dialogue: 0,0:29:18.55,0:29:19.54,Default,,0,0,0,,you're dealing with this
Dialogue: 0,0:29:19.54,0:29:20.32,Default,,0,0,0,,particular scenario.
Dialogue: 0,0:29:21.01,0:29:23.71,Default,,0,0,0,,Now this technique of status
Dialogue: 0,0:29:23.71,0:29:23.98,Default,,0,0,0,,polling --
Dialogue: 0,0:29:24.52,0:29:27.61,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:29:28.11,0:29:30.69,Default,,0,0,0,,Thanks. This technique of status
Dialogue: 0,0:29:30.69,0:29:32.17,Default,,0,0,0,,polling really fits as a bit of
Dialogue: 0,0:29:32.17,0:29:33.07,Default,,0,0,0,,a server side tool.
Dialogue: 0,0:29:33.07,0:29:33.96,Default,,0,0,0,,So you can think about it as
Dialogue: 0,0:29:33.96,0:29:34.71,Default,,0,0,0,,sitting up here in this
Dialogue: 0,0:29:34.71,0:29:36.62,Default,,0,0,0,,particular diagram but you'll
Dialogue: 0,0:29:36.62,0:29:37.85,Default,,0,0,0,,notice I'm leaving that
Dialogue: 0,0:29:37.85,0:29:39.46,Default,,0,0,0,,particular flow of updating and
Dialogue: 0,0:29:39.46,0:29:40.59,Default,,0,0,0,,finishing transactions because
Dialogue: 0,0:29:40.59,0:29:41.66,Default,,0,0,0,,it's still important that you
Dialogue: 0,0:29:41.66,0:29:43.21,Default,,0,0,0,,handle all of these transactions
Dialogue: 0,0:29:43.21,0:29:43.86,Default,,0,0,0,,as you come through in a user's
Dialogue: 0,0:29:43.86,0:29:44.00,Default,,0,0,0,,device.
Dialogue: 0,0:29:47.98,0:29:49.60,Default,,0,0,0,,So let's stick on the subject of
Dialogue: 0,0:29:49.60,0:29:50.93,Default,,0,0,0,,subscriptions for a little bit.
Dialogue: 0,0:29:57.42,0:29:58.56,Default,,0,0,0,,Now we opened up auto renewable
Dialogue: 0,0:29:58.56,0:30:00.03,Default,,0,0,0,,subscriptions to many more
Dialogue: 0,0:30:00.03,0:30:01.18,Default,,0,0,0,,categories last year.
Dialogue: 0,0:30:01.36,0:30:02.53,Default,,0,0,0,,And we've seen great uptake and
Dialogue: 0,0:30:02.53,0:30:03.82,Default,,0,0,0,,heard great feedback from those
Dialogue: 0,0:30:03.82,0:30:04.77,Default,,0,0,0,,of you who have implemented
Dialogue: 0,0:30:04.77,0:30:04.90,Default,,0,0,0,,them.
Dialogue: 0,0:30:05.64,0:30:06.82,Default,,0,0,0,,And we've tried to offer
Dialogue: 0,0:30:07.13,0:30:08.72,Default,,0,0,0,,information about your users and
Dialogue: 0,0:30:08.72,0:30:09.81,Default,,0,0,0,,the behavior of them via the way
Dialogue: 0,0:30:09.81,0:30:11.12,Default,,0,0,0,,of things like iTunes Connect
Dialogue: 0,0:30:11.12,0:30:11.62,Default,,0,0,0,,reports.
Dialogue: 0,0:30:12.03,0:30:13.45,Default,,0,0,0,,You can find about how many
Dialogue: 0,0:30:13.45,0:30:14.82,Default,,0,0,0,,expirys you had and some of the
Dialogue: 0,0:30:14.82,0:30:15.82,Default,,0,0,0,,reasoning behind that but
Dialogue: 0,0:30:16.26,0:30:17.22,Default,,0,0,0,,there's been a lot of questions
Dialogue: 0,0:30:17.22,0:30:18.09,Default,,0,0,0,,that you've had that you haven't
Dialogue: 0,0:30:18.09,0:30:19.25,Default,,0,0,0,,been able to answer until now.
Dialogue: 0,0:30:19.96,0:30:21.07,Default,,0,0,0,,Particularly about individual
Dialogue: 0,0:30:21.07,0:30:21.33,Default,,0,0,0,,users.
Dialogue: 0,0:30:21.33,0:30:22.56,Default,,0,0,0,,So what are these questions?
Dialogue: 0,0:30:22.56,0:30:24.18,Default,,0,0,0,,Things like why did a particular
Dialogue: 0,0:30:24.18,0:30:25.42,Default,,0,0,0,,user's subscription expire?
Dialogue: 0,0:30:25.42,0:30:27.81,Default,,0,0,0,,Or will this user's subscription
Dialogue: 0,0:30:27.81,0:30:29.11,Default,,0,0,0,,be renewed as the end of this
Dialogue: 0,0:30:29.14,0:30:29.75,Default,,0,0,0,,billing period?
Dialogue: 0,0:30:31.18,0:30:32.82,Default,,0,0,0,,Will this user be downgraded at
Dialogue: 0,0:30:32.82,0:30:33.70,Default,,0,0,0,,the end of this billing period?
Dialogue: 0,0:30:33.70,0:30:35.35,Default,,0,0,0,,Have they elected to change that
Dialogue: 0,0:30:35.35,0:30:36.53,Default,,0,0,0,,subscription that they're
Dialogue: 0,0:30:36.53,0:30:38.22,Default,,0,0,0,,subscribed to?
Dialogue: 0,0:30:38.39,0:30:39.49,Default,,0,0,0,,Maybe they asked for a refund
Dialogue: 0,0:30:39.49,0:30:40.17,Default,,0,0,0,,from AppleCare?
Dialogue: 0,0:30:40.23,0:30:41.35,Default,,0,0,0,,What was the reason behind it?
Dialogue: 0,0:30:41.47,0:30:42.71,Default,,0,0,0,,Did they have a problem or is
Dialogue: 0,0:30:42.77,0:30:43.82,Default,,0,0,0,,just something that they wanted
Dialogue: 0,0:30:43.82,0:30:44.10,Default,,0,0,0,,to do?
Dialogue: 0,0:30:45.18,0:30:46.19,Default,,0,0,0,,Have they agreed to a price
Dialogue: 0,0:30:46.19,0:30:47.46,Default,,0,0,0,,increase that I've put in place?
Dialogue: 0,0:30:47.49,0:30:49.39,Default,,0,0,0,,Or will they just end their
Dialogue: 0,0:30:49.39,0:30:50.36,Default,,0,0,0,,subscription at the end of this
Dialogue: 0,0:30:50.40,0:30:50.86,Default,,0,0,0,,billing period?
Dialogue: 0,0:30:50.86,0:30:51.75,Default,,0,0,0,,How can I know this ahead of
Dialogue: 0,0:30:51.80,0:30:52.07,Default,,0,0,0,,time?
Dialogue: 0,0:30:52.45,0:30:53.88,Default,,0,0,0,,Or just simply what kind of
Dialogue: 0,0:30:53.88,0:30:55.51,Default,,0,0,0,,messaging do I need to tell my
Dialogue: 0,0:30:55.51,0:30:56.62,Default,,0,0,0,,user about their subscription?
Dialogue: 0,0:30:56.62,0:30:58.08,Default,,0,0,0,,How can I communicate to them
Dialogue: 0,0:30:58.08,0:31:00.45,Default,,0,0,0,,effectively and you know, with
Dialogue: 0,0:31:00.45,0:31:01.10,Default,,0,0,0,,things they need to know?
Dialogue: 0,0:31:01.55,0:31:02.86,Default,,0,0,0,,Now why are all these questions
Dialogue: 0,0:31:02.86,0:31:03.52,Default,,0,0,0,,really important?
Dialogue: 0,0:31:04.91,0:31:06.36,Default,,0,0,0,,Obviously to provide a great
Dialogue: 0,0:31:06.36,0:31:07.72,Default,,0,0,0,,experience for the user but can
Dialogue: 0,0:31:07.72,0:31:09.13,Default,,0,0,0,,you think about why these
Dialogue: 0,0:31:09.13,0:31:10.28,Default,,0,0,0,,questions are really important?
Dialogue: 0,0:31:10.28,0:31:13.50,Default,,0,0,0,,Well, it's because all these
Dialogue: 0,0:31:14.38,0:31:16.25,Default,,0,0,0,,questions are centered around
Dialogue: 0,0:31:16.32,0:31:17.73,Default,,0,0,0,,the user's renewal of their
Dialogue: 0,0:31:17.73,0:31:19.39,Default,,0,0,0,,subscription and so providing a
Dialogue: 0,0:31:19.39,0:31:21.03,Default,,0,0,0,,seamless experience in these
Dialogue: 0,0:31:21.03,0:31:22.46,Default,,0,0,0,,particularly scenarios, it's
Dialogue: 0,0:31:22.54,0:31:24.19,Default,,0,0,0,,really paramount to reducing
Dialogue: 0,0:31:24.19,0:31:25.51,Default,,0,0,0,,what we call subscription churn.
Dialogue: 0,0:31:26.41,0:31:27.32,Default,,0,0,0,,Subscription churn is just a
Dialogue: 0,0:31:27.32,0:31:28.31,Default,,0,0,0,,fancy way of saying losing
Dialogue: 0,0:31:28.31,0:31:28.95,Default,,0,0,0,,subscribers.
Dialogue: 0,0:31:29.26,0:31:30.13,Default,,0,0,0,,And the thing is when you lose
Dialogue: 0,0:31:30.13,0:31:32.11,Default,,0,0,0,,subscribers that's immediately
Dialogue: 0,0:31:32.11,0:31:33.45,Default,,0,0,0,,lost revenue for your business.
Dialogue: 0,0:31:33.59,0:31:34.82,Default,,0,0,0,,And not only is it lost revenue
Dialogue: 0,0:31:34.82,0:31:35.99,Default,,0,0,0,,for your business it's a lost
Dialogue: 0,0:31:35.99,0:31:37.63,Default,,0,0,0,,acquisition cost for each one of
Dialogue: 0,0:31:37.63,0:31:38.47,Default,,0,0,0,,those users as well.
Dialogue: 0,0:31:39.93,0:31:40.69,Default,,0,0,0,,Now we can think about
Dialogue: 0,0:31:40.69,0:31:42.57,Default,,0,0,0,,subscription churn as two
Dialogue: 0,0:31:42.57,0:31:43.32,Default,,0,0,0,,particular buckets.
Dialogue: 0,0:31:43.32,0:31:44.00,Default,,0,0,0,,We can talk about the
Dialogue: 0,0:31:44.00,0:31:46.06,Default,,0,0,0,,involuntary churn, which is the
Dialogue: 0,0:31:46.06,0:31:47.51,Default,,0,0,0,,case that the user hasn't even
Dialogue: 0,0:31:47.51,0:31:48.82,Default,,0,0,0,,elected to unsubscribe.
Dialogue: 0,0:31:48.82,0:31:49.83,Default,,0,0,0,,Maybe their credit card just
Dialogue: 0,0:31:49.83,0:31:51.03,Default,,0,0,0,,expired and it was an
Dialogue: 0,0:31:51.03,0:31:52.03,Default,,0,0,0,,involuntary action.
Dialogue: 0,0:31:52.78,0:31:55.22,Default,,0,0,0,,Now this is far too many users
Dialogue: 0,0:31:55.22,0:31:56.03,Default,,0,0,0,,fall into this particular
Dialogue: 0,0:31:56.03,0:31:56.41,Default,,0,0,0,,category.
Dialogue: 0,0:31:57.52,0:31:58.60,Default,,0,0,0,,There's also voluntary
Dialogue: 0,0:31:58.60,0:31:59.33,Default,,0,0,0,,subscription churn.
Dialogue: 0,0:31:59.33,0:32:00.47,Default,,0,0,0,,In the case that a user elected
Dialogue: 0,0:32:00.47,0:32:01.96,Default,,0,0,0,,to unsubscribe from your
Dialogue: 0,0:32:01.96,0:32:02.52,Default,,0,0,0,,application.
Dialogue: 0,0:32:02.91,0:32:04.36,Default,,0,0,0,,Maybe they asked for a refund
Dialogue: 0,0:32:04.36,0:32:05.44,Default,,0,0,0,,from AppleCare or they turned
Dialogue: 0,0:32:05.44,0:32:06.83,Default,,0,0,0,,off auto renew inside the
Dialogue: 0,0:32:06.83,0:32:07.35,Default,,0,0,0,,settings.
Dialogue: 0,0:32:08.79,0:32:10.16,Default,,0,0,0,,So we really want to empower you
Dialogue: 0,0:32:10.16,0:32:11.38,Default,,0,0,0,,with new tools to be able to
Dialogue: 0,0:32:11.38,0:32:12.41,Default,,0,0,0,,address both of these buckets
Dialogue: 0,0:32:12.41,0:32:13.10,Default,,0,0,0,,and we think we've got some
Dialogue: 0,0:32:13.10,0:32:14.37,Default,,0,0,0,,great new ways to do that today.
Dialogue: 0,0:32:14.37,0:32:15.31,Default,,0,0,0,,So we're announcing some new
Dialogue: 0,0:32:15.31,0:32:16.90,Default,,0,0,0,,tools to help reduce this
Dialogue: 0,0:32:16.90,0:32:17.57,Default,,0,0,0,,subscription churn.
Dialogue: 0,0:32:18.30,0:32:19.38,Default,,0,0,0,,Now to go through them, let's
Dialogue: 0,0:32:19.38,0:32:20.40,Default,,0,0,0,,walk through an example, again,
Dialogue: 0,0:32:20.40,0:32:21.12,Default,,0,0,0,,just to illustrate it.
Dialogue: 0,0:32:22.46,0:32:23.54,Default,,0,0,0,,So let's say a user here is
Dialogue: 0,0:32:23.54,0:32:24.93,Default,,0,0,0,,subscribed to your subscription
Dialogue: 0,0:32:24.93,0:32:25.42,Default,,0,0,0,,service.
Dialogue: 0,0:32:25.42,0:32:26.39,Default,,0,0,0,,It's a video subscription
Dialogue: 0,0:32:26.39,0:32:27.36,Default,,0,0,0,,service for this example.
Dialogue: 0,0:32:28.10,0:32:29.45,Default,,0,0,0,,You're using these techniques
Dialogue: 0,0:32:29.45,0:32:30.67,Default,,0,0,0,,with status polling like we said
Dialogue: 0,0:32:30.67,0:32:32.38,Default,,0,0,0,,before to poll the App Store to
Dialogue: 0,0:32:32.38,0:32:34.31,Default,,0,0,0,,find out the latest subscription
Dialogue: 0,0:32:34.44,0:32:35.66,Default,,0,0,0,,information about a user and
Dialogue: 0,0:32:35.76,0:32:36.88,Default,,0,0,0,,they're actively subscribed.
Dialogue: 0,0:32:37.13,0:32:37.68,Default,,0,0,0,,Everyone's happy.
Dialogue: 0,0:32:38.72,0:32:40.09,Default,,0,0,0,,Then the user goes offline for a
Dialogue: 0,0:32:40.09,0:32:40.62,Default,,0,0,0,,few days.
Dialogue: 0,0:32:41.98,0:32:43.27,Default,,0,0,0,,And during this particular time,
Dialogue: 0,0:32:43.72,0:32:44.71,Default,,0,0,0,,their subscription's renewed
Dialogue: 0,0:32:44.71,0:32:44.92,Default,,0,0,0,,again.
Dialogue: 0,0:32:44.92,0:32:45.93,Default,,0,0,0,,This is a similar example to
Dialogue: 0,0:32:45.93,0:32:47.98,Default,,0,0,0,,before, but, this time let's say
Dialogue: 0,0:32:47.98,0:32:48.98,Default,,0,0,0,,that the user's credit card's
Dialogue: 0,0:32:48.98,0:32:49.52,Default,,0,0,0,,expired.
Dialogue: 0,0:32:49.52,0:32:50.81,Default,,0,0,0,,And the App Store wasn't able to
Dialogue: 0,0:32:50.81,0:32:51.27,Default,,0,0,0,,charge them.
Dialogue: 0,0:32:51.92,0:32:53.15,Default,,0,0,0,,So there was some kind of
Dialogue: 0,0:32:53.15,0:32:54.09,Default,,0,0,0,,billing error that's happened
Dialogue: 0,0:32:54.51,0:32:55.85,Default,,0,0,0,,and the user comes along and
Dialogue: 0,0:32:55.85,0:32:58.13,Default,,0,0,0,,jumps on your website in order
Dialogue: 0,0:32:58.13,0:32:59.15,Default,,0,0,0,,to keep on watching videos.
Dialogue: 0,0:32:59.61,0:33:00.53,Default,,0,0,0,,Now at this point your server
Dialogue: 0,0:33:00.53,0:33:01.56,Default,,0,0,0,,does that status polling
Dialogue: 0,0:33:01.56,0:33:02.71,Default,,0,0,0,,technique that we talked about
Dialogue: 0,0:33:03.48,0:33:05.21,Default,,0,0,0,,but the App Store's going to
Dialogue: 0,0:33:05.21,0:33:06.16,Default,,0,0,0,,inform it that there's been no
Dialogue: 0,0:33:06.16,0:33:07.12,Default,,0,0,0,,transaction that's occurred
Dialogue: 0,0:33:07.12,0:33:08.32,Default,,0,0,0,,because there was a billing
Dialogue: 0,0:33:08.32,0:33:08.79,Default,,0,0,0,,error, right?
Dialogue: 0,0:33:08.79,0:33:10.14,Default,,0,0,0,,So your server does the only
Dialogue: 0,0:33:10.14,0:33:10.72,Default,,0,0,0,,thing that it can.
Dialogue: 0,0:33:10.72,0:33:12.10,Default,,0,0,0,,It informs the website that
Dialogue: 0,0:33:12.48,0:33:13.71,Default,,0,0,0,,subscription's actually expired
Dialogue: 0,0:33:13.75,0:33:15.44,Default,,0,0,0,,and the user, the poor user's
Dialogue: 0,0:33:15.44,0:33:16.13,Default,,0,0,0,,done nothing wrong.
Dialogue: 0,0:33:16.13,0:33:17.28,Default,,0,0,0,,Their credit card just expired.
Dialogue: 0,0:33:17.68,0:33:19.10,Default,,0,0,0,,They go over and begrudgingly
Dialogue: 0,0:33:19.10,0:33:20.12,Default,,0,0,0,,pull out their credit card.
Dialogue: 0,0:33:20.28,0:33:21.37,Default,,0,0,0,,They go and update their credit
Dialogue: 0,0:33:21.37,0:33:22.65,Default,,0,0,0,,card details in the App Store.
Dialogue: 0,0:33:23.13,0:33:24.45,Default,,0,0,0,,The App Store based on the new
Dialogue: 0,0:33:24.45,0:33:25.34,Default,,0,0,0,,credit card details is
Dialogue: 0,0:33:25.34,0:33:26.62,Default,,0,0,0,,successfully able to actually
Dialogue: 0,0:33:26.62,0:33:27.41,Default,,0,0,0,,charge that card.
Dialogue: 0,0:33:27.77,0:33:28.64,Default,,0,0,0,,So the user's gone to this
Dialogue: 0,0:33:28.64,0:33:30.10,Default,,0,0,0,,effort, everything looks good.
Dialogue: 0,0:33:30.10,0:33:31.26,Default,,0,0,0,,They jump back on your website
Dialogue: 0,0:33:31.63,0:33:32.07,Default,,0,0,0,,and then bah.
Dialogue: 0,0:33:33.13,0:33:33.60,Default,,0,0,0,,This happens.
Dialogue: 0,0:33:34.90,0:33:36.59,Default,,0,0,0,,Now at this point, your server
Dialogue: 0,0:33:36.72,0:33:38.58,Default,,0,0,0,,had no knowledge of the actual
Dialogue: 0,0:33:38.61,0:33:39.68,Default,,0,0,0,,transaction that's occurred.
Dialogue: 0,0:33:39.88,0:33:40.92,Default,,0,0,0,,The fact that that credit card
Dialogue: 0,0:33:40.92,0:33:42.44,Default,,0,0,0,,was able to be charged again and
Dialogue: 0,0:33:42.44,0:33:43.62,Default,,0,0,0,,so if this kind of thing happens
Dialogue: 0,0:33:43.62,0:33:45.62,Default,,0,0,0,,to you as a user, go to all that
Dialogue: 0,0:33:45.62,0:33:45.95,Default,,0,0,0,,effort.
Dialogue: 0,0:33:45.95,0:33:46.80,Default,,0,0,0,,You update your credit card
Dialogue: 0,0:33:46.80,0:33:48.41,Default,,0,0,0,,details and then you even see
Dialogue: 0,0:33:48.41,0:33:49.55,Default,,0,0,0,,money being taken off your
Dialogue: 0,0:33:49.55,0:33:51.30,Default,,0,0,0,,credit card and then you don't
Dialogue: 0,0:33:51.30,0:33:52.36,Default,,0,0,0,,get an immediate update of your
Dialogue: 0,0:33:52.36,0:33:54.32,Default,,0,0,0,,subscription state, you probably
Dialogue: 0,0:33:54.32,0:33:56.48,Default,,0,0,0,,just unsubscribe or you ask for
Dialogue: 0,0:33:56.48,0:33:57.32,Default,,0,0,0,,a refund straight away.
Dialogue: 0,0:33:57.32,0:33:58.47,Default,,0,0,0,,Now this happens far too
Dialogue: 0,0:33:58.47,0:33:58.98,Default,,0,0,0,,frequently.
Dialogue: 0,0:33:59.39,0:34:00.74,Default,,0,0,0,,So to address that today we're
Dialogue: 0,0:34:00.74,0:34:02.41,Default,,0,0,0,,introducing new server-to-server
Dialogue: 0,0:34:02.55,0:34:03.86,Default,,0,0,0,,notifications from the App
Dialogue: 0,0:34:03.86,0:34:03.98,Default,,0,0,0,,Store.
Dialogue: 0,0:34:04.52,0:34:09.58,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:34:10.08,0:34:10.97,Default,,0,0,0,,So let's look at how that
Dialogue: 0,0:34:10.97,0:34:12.37,Default,,0,0,0,,scenario plays out now.
Dialogue: 0,0:34:13.29,0:34:14.30,Default,,0,0,0,,The user receives this
Dialogue: 0,0:34:14.30,0:34:15.25,Default,,0,0,0,,information that's something
Dialogue: 0,0:34:15.25,0:34:15.50,Default,,0,0,0,,happened.
Dialogue: 0,0:34:15.50,0:34:16.28,Default,,0,0,0,,There's been a billing error.
Dialogue: 0,0:34:17.01,0:34:18.23,Default,,0,0,0,,They go over and they update
Dialogue: 0,0:34:18.23,0:34:19.37,Default,,0,0,0,,their credit card details.
Dialogue: 0,0:34:19.53,0:34:20.97,Default,,0,0,0,,Now this time with the new
Dialogue: 0,0:34:20.97,0:34:22.05,Default,,0,0,0,,notifications, as soon as the
Dialogue: 0,0:34:22.05,0:34:23.42,Default,,0,0,0,,App Store is able to charge that
Dialogue: 0,0:34:23.42,0:34:25.08,Default,,0,0,0,,credit card it sends a
Dialogue: 0,0:34:25.08,0:34:26.53,Default,,0,0,0,,notification over to your server
Dialogue: 0,0:34:26.83,0:34:27.92,Default,,0,0,0,,with the latest transaction
Dialogue: 0,0:34:27.92,0:34:28.20,Default,,0,0,0,,that's occurred.
Dialogue: 0,0:34:28.20,0:34:29.88,Default,,0,0,0,,And you can use the payload of
Dialogue: 0,0:34:29.88,0:34:31.31,Default,,0,0,0,,that transaction to unblock the
Dialogue: 0,0:34:31.31,0:34:32.90,Default,,0,0,0,,user immediately and give them
Dialogue: 0,0:34:32.90,0:34:34.23,Default,,0,0,0,,access to using that website and
Dialogue: 0,0:34:34.23,0:34:35.20,Default,,0,0,0,,you've got happy users.
Dialogue: 0,0:34:35.36,0:34:35.79,Default,,0,0,0,,That's great.
Dialogue: 0,0:34:36.46,0:34:37.99,Default,,0,0,0,,So this is going to be awesome
Dialogue: 0,0:34:37.99,0:34:39.06,Default,,0,0,0,,for those of you who are dealing
Dialogue: 0,0:34:39.06,0:34:40.42,Default,,0,0,0,,with subscriptions on the server
Dialogue: 0,0:34:40.42,0:34:40.77,Default,,0,0,0,,side.
Dialogue: 0,0:34:41.16,0:34:41.95,Default,,0,0,0,,This is what it looks like in
Dialogue: 0,0:34:41.95,0:34:42.37,Default,,0,0,0,,practice.
Dialogue: 0,0:34:42.37,0:34:43.56,Default,,0,0,0,,You've got a status url in
Dialogue: 0,0:34:43.67,0:34:45.28,Default,,0,0,0,,iTunes Connect that you can
Dialogue: 0,0:34:45.28,0:34:45.44,Default,,0,0,0,,enter.
Dialogue: 0,0:34:45.44,0:34:47.13,Default,,0,0,0,,That you can put url in for your
Dialogue: 0,0:34:47.13,0:34:47.41,Default,,0,0,0,,own server.
Dialogue: 0,0:34:47.41,0:34:49.66,Default,,0,0,0,,Your server does have to adhere
Dialogue: 0,0:34:49.66,0:34:51.07,Default,,0,0,0,,the app transport security
Dialogue: 0,0:34:51.07,0:34:53.93,Default,,0,0,0,,requirements but if it does, all
Dialogue: 0,0:34:53.93,0:34:56.20,Default,,0,0,0,,it is an http post that gets
Dialogue: 0,0:34:56.20,0:34:57.28,Default,,0,0,0,,sent to your server for key
Dialogue: 0,0:34:57.51,0:34:58.47,Default,,0,0,0,,status changes for
Dialogue: 0,0:34:58.47,0:34:59.02,Default,,0,0,0,,subscriptions.
Dialogue: 0,0:34:59.02,0:35:00.25,Default,,0,0,0,,Now what are these events that
Dialogue: 0,0:35:00.25,0:35:01.01,Default,,0,0,0,,we send them for.
Dialogue: 0,0:35:01.13,0:35:02.66,Default,,0,0,0,,It happens for any initial
Dialogue: 0,0:35:02.66,0:35:03.83,Default,,0,0,0,,purchase of a subscription.
Dialogue: 0,0:35:05.54,0:35:06.68,Default,,0,0,0,,If there's any subscription
Dialogue: 0,0:35:06.68,0:35:07.99,Default,,0,0,0,,cancellations by AppleCare.
Dialogue: 0,0:35:07.99,0:35:09.47,Default,,0,0,0,,So if a user gets a refund, you
Dialogue: 0,0:35:09.47,0:35:10.32,Default,,0,0,0,,get notified of that.
Dialogue: 0,0:35:11.22,0:35:12.44,Default,,0,0,0,,It happens for any subscription
Dialogue: 0,0:35:12.44,0:35:13.04,Default,,0,0,0,,downgrades.
Dialogue: 0,0:35:13.04,0:35:14.22,Default,,0,0,0,,So any time a user elects to
Dialogue: 0,0:35:14.22,0:35:15.37,Default,,0,0,0,,downgrade their subscription,
Dialogue: 0,0:35:15.37,0:35:16.84,Default,,0,0,0,,you can find out about that and
Dialogue: 0,0:35:16.84,0:35:18.09,Default,,0,0,0,,update their subscription state
Dialogue: 0,0:35:18.28,0:35:19.28,Default,,0,0,0,,on the server accordingly.
Dialogue: 0,0:35:20.37,0:35:21.60,Default,,0,0,0,,And also that example that we
Dialogue: 0,0:35:21.60,0:35:22.34,Default,,0,0,0,,just saw, when there's a
Dialogue: 0,0:35:22.38,0:35:23.90,Default,,0,0,0,,successful renewal or a
Dialogue: 0,0:35:23.90,0:35:25.17,Default,,0,0,0,,re-purchase for an expired
Dialogue: 0,0:35:25.17,0:35:26.09,Default,,0,0,0,,subscription so that you can
Dialogue: 0,0:35:26.13,0:35:27.58,Default,,0,0,0,,unblock those users immediately
Dialogue: 0,0:35:27.85,0:35:28.84,Default,,0,0,0,,and give them access to their
Dialogue: 0,0:35:28.84,0:35:29.35,Default,,0,0,0,,subscription.
Dialogue: 0,0:35:29.35,0:35:31.64,Default,,0,0,0,,Now the payload of the
Dialogue: 0,0:35:31.64,0:35:32.96,Default,,0,0,0,,notification includes the latest
Dialogue: 0,0:35:32.96,0:35:34.48,Default,,0,0,0,,transaction for the actual
Dialogue: 0,0:35:35.49,0:35:36.76,Default,,0,0,0,,transaction in question that's
Dialogue: 0,0:35:36.76,0:35:37.72,Default,,0,0,0,,taken place that you've missed
Dialogue: 0,0:35:37.72,0:35:38.00,Default,,0,0,0,,out on.
Dialogue: 0,0:35:39.02,0:35:39.85,Default,,0,0,0,,So when you're doing this it
Dialogue: 0,0:35:39.85,0:35:40.64,Default,,0,0,0,,means that you don't need to
Dialogue: 0,0:35:40.64,0:35:42.30,Default,,0,0,0,,polling the verify receipt
Dialogue: 0,0:35:42.44,0:35:43.73,Default,,0,0,0,,nearly as often as you used to.
Dialogue: 0,0:35:44.68,0:35:45.95,Default,,0,0,0,,You still might need to call
Dialogue: 0,0:35:45.95,0:35:47.08,Default,,0,0,0,,verify receipt using that
Dialogue: 0,0:35:47.08,0:35:48.40,Default,,0,0,0,,polling but you can be a bit
Dialogue: 0,0:35:48.40,0:35:49.70,Default,,0,0,0,,smarter about when you do it.
Dialogue: 0,0:35:50.36,0:35:51.80,Default,,0,0,0,,Maybe an App Store notification
Dialogue: 0,0:35:51.80,0:35:52.83,Default,,0,0,0,,wasn't able to reach your
Dialogue: 0,0:35:52.83,0:35:53.13,Default,,0,0,0,,server.
Dialogue: 0,0:35:53.67,0:35:54.74,Default,,0,0,0,,So you still need to maybe use
Dialogue: 0,0:35:54.74,0:35:55.91,Default,,0,0,0,,this to actually retrieve and
Dialogue: 0,0:35:55.95,0:35:57.26,Default,,0,0,0,,poll information about the
Dialogue: 0,0:35:57.26,0:35:58.88,Default,,0,0,0,,subscription state but as I
Dialogue: 0,0:35:58.88,0:35:59.87,Default,,0,0,0,,said, you can a bit smarter
Dialogue: 0,0:35:59.87,0:36:00.54,Default,,0,0,0,,about when you do it.
Dialogue: 0,0:36:00.54,0:36:01.81,Default,,0,0,0,,Maybe you want to do it the day
Dialogue: 0,0:36:01.81,0:36:03.46,Default,,0,0,0,,before or the day of a user's
Dialogue: 0,0:36:03.46,0:36:05.10,Default,,0,0,0,,expiry instead of having to do
Dialogue: 0,0:36:05.10,0:36:06.48,Default,,0,0,0,,it every five minutes.
Dialogue: 0,0:36:07.28,0:36:08.44,Default,,0,0,0,,So these are coming later this
Dialogue: 0,0:36:08.44,0:36:09.98,Default,,0,0,0,,year and we think it's going to
Dialogue: 0,0:36:09.98,0:36:11.96,Default,,0,0,0,,drastically improve and reduce
Dialogue: 0,0:36:11.96,0:36:13.41,Default,,0,0,0,,that subscription churn that you
Dialogue: 0,0:36:13.41,0:36:13.93,Default,,0,0,0,,might be seeing.
Dialogue: 0,0:36:17.77,0:36:18.53,Default,,0,0,0,,So let's bring up these
Dialogue: 0,0:36:18.53,0:36:19.68,Default,,0,0,0,,questions again that I asked
Dialogue: 0,0:36:19.68,0:36:20.24,Default,,0,0,0,,just before.
Dialogue: 0,0:36:20.80,0:36:22.60,Default,,0,0,0,,The new notifications is going
Dialogue: 0,0:36:22.60,0:36:24.03,Default,,0,0,0,,to do a great job of reducing
Dialogue: 0,0:36:24.03,0:36:24.68,Default,,0,0,0,,subscription churn.
Dialogue: 0,0:36:24.81,0:36:25.99,Default,,0,0,0,,You know via that technique that
Dialogue: 0,0:36:25.99,0:36:26.89,Default,,0,0,0,,we just saw but there's a lot of
Dialogue: 0,0:36:26.89,0:36:28.84,Default,,0,0,0,,information here that we still
Dialogue: 0,0:36:28.84,0:36:29.75,Default,,0,0,0,,don't have answers for
Dialogue: 0,0:36:31.14,0:36:33.17,Default,,0,0,0,,particularly about users before
Dialogue: 0,0:36:33.17,0:36:33.82,Default,,0,0,0,,they've expired.
Dialogue: 0,0:36:34.25,0:36:36.12,Default,,0,0,0,,So in order to give you access
Dialogue: 0,0:36:36.19,0:36:37.57,Default,,0,0,0,,to this specific information,
Dialogue: 0,0:36:37.57,0:36:38.76,Default,,0,0,0,,today we're announcing new
Dialogue: 0,0:36:38.93,0:36:40.54,Default,,0,0,0,,fields in the verify receipt
Dialogue: 0,0:36:40.54,0:36:40.92,Default,,0,0,0,,endpoint.
Dialogue: 0,0:36:41.50,0:36:42.87,Default,,0,0,0,,Now these new fields are going
Dialogue: 0,0:36:42.87,0:36:43.64,Default,,0,0,0,,to provide you with the
Dialogue: 0,0:36:43.64,0:36:45.27,Default,,0,0,0,,information specifically about
Dialogue: 0,0:36:45.27,0:36:46.74,Default,,0,0,0,,users along these key
Dialogue: 0,0:36:46.74,0:36:47.50,Default,,0,0,0,,subscription events.
Dialogue: 0,0:36:47.50,0:36:49.00,Default,,0,0,0,,So if they turn off auto renew
Dialogue: 0,0:36:49.23,0:36:50.16,Default,,0,0,0,,in the settings, you can now
Dialogue: 0,0:36:50.16,0:36:51.32,Default,,0,0,0,,know this ahead of time that
Dialogue: 0,0:36:51.32,0:36:52.56,Default,,0,0,0,,they've elected to not be
Dialogue: 0,0:36:52.56,0:36:53.96,Default,,0,0,0,,subscribed at the end of this
Dialogue: 0,0:36:53.96,0:36:55.46,Default,,0,0,0,,billing period or maybe they
Dialogue: 0,0:36:55.46,0:36:56.85,Default,,0,0,0,,cancel a receipt or refund at
Dialogue: 0,0:36:57.06,0:36:59.02,Default,,0,0,0,,the end and they won't have
Dialogue: 0,0:36:59.02,0:37:00.06,Default,,0,0,0,,their subscription continuing.
Dialogue: 0,0:37:00.06,0:37:00.91,Default,,0,0,0,,So you can act on this
Dialogue: 0,0:37:00.91,0:37:02.16,Default,,0,0,0,,information now ahead of time
Dialogue: 0,0:37:02.16,0:37:03.48,Default,,0,0,0,,and make key business decisions
Dialogue: 0,0:37:03.74,0:37:04.74,Default,,0,0,0,,about this information.
Dialogue: 0,0:37:05.09,0:37:06.06,Default,,0,0,0,,So let's look at the new fields
Dialogue: 0,0:37:06.06,0:37:06.74,Default,,0,0,0,,that we're including.
Dialogue: 0,0:37:08.03,0:37:09.32,Default,,0,0,0,,So this is that same request,
Dialogue: 0,0:37:09.32,0:37:10.65,Default,,0,0,0,,the verify receipt endpoint.
Dialogue: 0,0:37:11.25,0:37:12.24,Default,,0,0,0,,We're including now an auto
Dialogue: 0,0:37:12.24,0:37:13.11,Default,,0,0,0,,renew status.
Dialogue: 0,0:37:13.73,0:37:15.73,Default,,0,0,0,,So when a user elects to turn
Dialogue: 0,0:37:15.73,0:37:16.55,Default,,0,0,0,,off auto renew for a
Dialogue: 0,0:37:16.55,0:37:17.97,Default,,0,0,0,,subscription, you can find this
Dialogue: 0,0:37:17.97,0:37:19.32,Default,,0,0,0,,out now ahead of time before
Dialogue: 0,0:37:19.32,0:37:20.31,Default,,0,0,0,,they've actually expired their
Dialogue: 0,0:37:20.31,0:37:20.85,Default,,0,0,0,,subscription.
Dialogue: 0,0:37:22.17,0:37:23.19,Default,,0,0,0,,We're including an auto renew
Dialogue: 0,0:37:23.19,0:37:23.81,Default,,0,0,0,,preference.
Dialogue: 0,0:37:24.31,0:37:25.88,Default,,0,0,0,,So if a user elects to downgrade
Dialogue: 0,0:37:25.88,0:37:26.98,Default,,0,0,0,,or change their subscription
Dialogue: 0,0:37:26.98,0:37:28.73,Default,,0,0,0,,preference, you can now know how
Dialogue: 0,0:37:28.73,0:37:29.37,Default,,0,0,0,,they're going to have -- what's
Dialogue: 0,0:37:29.37,0:37:30.23,Default,,0,0,0,,going to happen at the end of
Dialogue: 0,0:37:30.23,0:37:31.36,Default,,0,0,0,,that particular billing period.
Dialogue: 0,0:37:32.13,0:37:33.93,Default,,0,0,0,,We're including a price consent
Dialogue: 0,0:37:33.93,0:37:34.39,Default,,0,0,0,,status.
Dialogue: 0,0:37:34.53,0:37:35.63,Default,,0,0,0,,So if you're rolling a price
Dialogue: 0,0:37:35.63,0:37:37.16,Default,,0,0,0,,increase to a bunch of users,
Dialogue: 0,0:37:37.38,0:37:38.46,Default,,0,0,0,,now you can find out that I
Dialogue: 0,0:37:38.78,0:37:39.42,Default,,0,0,0,,don't know let's look at an
Dialogue: 0,0:37:39.42,0:37:39.71,Default,,0,0,0,,example.
Dialogue: 0,0:37:39.71,0:37:41.65,Default,,0,0,0,,Maybe 80% of your users haven't
Dialogue: 0,0:37:41.65,0:37:42.73,Default,,0,0,0,,agreed to a price increase and
Dialogue: 0,0:37:42.73,0:37:43.47,Default,,0,0,0,,they're actually going to be
Dialogue: 0,0:37:43.47,0:37:44.64,Default,,0,0,0,,unsubscribed at the end of the
Dialogue: 0,0:37:44.64,0:37:45.23,Default,,0,0,0,,billing period.
Dialogue: 0,0:37:45.44,0:37:46.72,Default,,0,0,0,,Previously you didn't know how
Dialogue: 0,0:37:46.72,0:37:47.68,Default,,0,0,0,,many users were going to be
Dialogue: 0,0:37:47.68,0:37:48.07,Default,,0,0,0,,rolled off.
Dialogue: 0,0:37:48.07,0:37:49.40,Default,,0,0,0,,So you can make key business
Dialogue: 0,0:37:49.40,0:37:50.48,Default,,0,0,0,,decisions based off that now.
Dialogue: 0,0:37:50.71,0:37:52.06,Default,,0,0,0,,Maybe you'll decide to not go
Dialogue: 0,0:37:52.06,0:37:53.02,Default,,0,0,0,,ahead with the price increase
Dialogue: 0,0:37:53.07,0:37:53.88,Default,,0,0,0,,based on the fact that you're
Dialogue: 0,0:37:53.88,0:37:54.48,Default,,0,0,0,,going to lose too many
Dialogue: 0,0:37:54.48,0:37:55.13,Default,,0,0,0,,subscribers.
Dialogue: 0,0:37:56.86,0:37:58.18,Default,,0,0,0,,We're including a subscription
Dialogue: 0,0:37:58.18,0:37:59.30,Default,,0,0,0,,billing retry flag.
Dialogue: 0,0:37:59.99,0:38:01.12,Default,,0,0,0,,So if a user falls into the
Dialogue: 0,0:38:01.12,0:38:02.62,Default,,0,0,0,,category of having some kind of
Dialogue: 0,0:38:02.62,0:38:04.01,Default,,0,0,0,,billing error like we saw before
Dialogue: 0,0:38:04.33,0:38:05.37,Default,,0,0,0,,and App Store is trying to
Dialogue: 0,0:38:05.37,0:38:06.52,Default,,0,0,0,,recharge their credit card to
Dialogue: 0,0:38:06.52,0:38:07.75,Default,,0,0,0,,get a successful transaction,
Dialogue: 0,0:38:07.75,0:38:09.29,Default,,0,0,0,,you can see if a user's in that
Dialogue: 0,0:38:09.29,0:38:09.61,Default,,0,0,0,,window.
Dialogue: 0,0:38:09.61,0:38:10.56,Default,,0,0,0,,And we'll see a couple of
Dialogue: 0,0:38:10.56,0:38:11.89,Default,,0,0,0,,examples about how to use these
Dialogue: 0,0:38:11.89,0:38:14.48,Default,,0,0,0,,in just a moment.
Dialogue: 0,0:38:14.48,0:38:15.50,Default,,0,0,0,,An expiration intent.
Dialogue: 0,0:38:15.94,0:38:17.60,Default,,0,0,0,,So why a user actually expired.
Dialogue: 0,0:38:17.60,0:38:18.62,Default,,0,0,0,,Was it because of a billing
Dialogue: 0,0:38:18.62,0:38:19.92,Default,,0,0,0,,error or some other reason?
Dialogue: 0,0:38:19.92,0:38:20.77,Default,,0,0,0,,You can now find this
Dialogue: 0,0:38:20.77,0:38:22.11,Default,,0,0,0,,information out about a user.
Dialogue: 0,0:38:23.33,0:38:24.14,Default,,0,0,0,,We're also including an
Dialogue: 0,0:38:24.14,0:38:25.13,Default,,0,0,0,,cancellation reason.
Dialogue: 0,0:38:25.87,0:38:28.11,Default,,0,0,0,,So previously if a user got a
Dialogue: 0,0:38:28.11,0:38:29.29,Default,,0,0,0,,refund from AppleCare, you were
Dialogue: 0,0:38:29.29,0:38:30.59,Default,,0,0,0,,going to kind of blind as to why
Dialogue: 0,0:38:30.59,0:38:31.19,Default,,0,0,0,,that was the case.
Dialogue: 0,0:38:31.19,0:38:32.65,Default,,0,0,0,,Now you can know if the user had
Dialogue: 0,0:38:32.65,0:38:34.10,Default,,0,0,0,,a problem with your app or an
Dialogue: 0,0:38:34.10,0:38:35.71,Default,,0,0,0,,in-app purchase or if it was
Dialogue: 0,0:38:35.71,0:38:36.90,Default,,0,0,0,,some personal reason the user
Dialogue: 0,0:38:36.96,0:38:38.47,Default,,0,0,0,,had in order to get a refund.
Dialogue: 0,0:38:39.72,0:38:40.77,Default,,0,0,0,,So let's look at a couple of
Dialogue: 0,0:38:40.77,0:38:41.75,Default,,0,0,0,,examples about how you can
Dialogue: 0,0:38:41.75,0:38:43.35,Default,,0,0,0,,actually use these fields in
Dialogue: 0,0:38:43.35,0:38:44.06,Default,,0,0,0,,order to address the
Dialogue: 0,0:38:44.06,0:38:45.19,Default,,0,0,0,,subscription turn that we talked
Dialogue: 0,0:38:45.19,0:38:45.41,Default,,0,0,0,,about.
Dialogue: 0,0:38:45.51,0:38:46.26,Default,,0,0,0,,Firstly, let's address
Dialogue: 0,0:38:46.26,0:38:47.57,Default,,0,0,0,,involuntary expiration.
Dialogue: 0,0:38:47.64,0:38:49.29,Default,,0,0,0,,So this is the case that a user
Dialogue: 0,0:38:49.29,0:38:50.55,Default,,0,0,0,,hasn't even elected to
Dialogue: 0,0:38:50.55,0:38:51.13,Default,,0,0,0,,unsubscribe.
Dialogue: 0,0:38:51.90,0:38:52.96,Default,,0,0,0,,So we think there's a lot we can
Dialogue: 0,0:38:52.96,0:38:54.05,Default,,0,0,0,,do to address involuntary
Dialogue: 0,0:38:54.05,0:38:54.61,Default,,0,0,0,,expiration.
Dialogue: 0,0:38:54.80,0:38:55.75,Default,,0,0,0,,And so we're going to do what we
Dialogue: 0,0:38:55.75,0:38:57.62,Default,,0,0,0,,can on our end to address this.
Dialogue: 0,0:38:57.62,0:38:59.28,Default,,0,0,0,,And that includes expanding that
Dialogue: 0,0:38:59.28,0:39:01.10,Default,,0,0,0,,retry window for billing retry
Dialogue: 0,0:39:01.43,0:39:02.70,Default,,0,0,0,,to up to 60 days now.
Dialogue: 0,0:39:03.44,0:39:05.61,Default,,0,0,0,,So previously, we would only try
Dialogue: 0,0:39:05.61,0:39:07.10,Default,,0,0,0,,for a period of a few hours to
Dialogue: 0,0:39:07.10,0:39:08.64,Default,,0,0,0,,recharge a credit card if there
Dialogue: 0,0:39:08.64,0:39:09.49,Default,,0,0,0,,was any kind of issues.
Dialogue: 0,0:39:09.49,0:39:10.81,Default,,0,0,0,,Now we're expanding that right
Dialogue: 0,0:39:10.81,0:39:11.98,Default,,0,0,0,,out to be up to 60 days.
Dialogue: 0,0:39:12.40,0:39:13.61,Default,,0,0,0,,We think that's going to catch a
Dialogue: 0,0:39:13.82,0:39:16.10,Default,,0,0,0,,lot of unsubscribes that occur.
Dialogue: 0,0:39:16.18,0:39:17.42,Default,,0,0,0,,On your end, there's a couple of
Dialogue: 0,0:39:17.42,0:39:18.25,Default,,0,0,0,,things that you can do to
Dialogue: 0,0:39:18.25,0:39:19.30,Default,,0,0,0,,address these scenarios.
Dialogue: 0,0:39:19.84,0:39:22.18,Default,,0,0,0,,You can use that expiration
Dialogue: 0,0:39:22.18,0:39:23.67,Default,,0,0,0,,intent field and the
Dialogue: 0,0:39:23.67,0:39:25.19,Default,,0,0,0,,subscription retry flag to do a
Dialogue: 0,0:39:25.19,0:39:25.93,Default,,0,0,0,,few key things.
Dialogue: 0,0:39:26.76,0:39:27.58,Default,,0,0,0,,Now if there's anything that you
Dialogue: 0,0:39:27.58,0:39:29.61,Default,,0,0,0,,can get from this talk, let it
Dialogue: 0,0:39:29.61,0:39:31.80,Default,,0,0,0,,be these three points because if
Dialogue: 0,0:39:31.80,0:39:33.18,Default,,0,0,0,,you can go ahead and implement
Dialogue: 0,0:39:33.18,0:39:34.03,Default,,0,0,0,,these things that I'm about to
Dialogue: 0,0:39:34.03,0:39:35.38,Default,,0,0,0,,outline, you'll drastically
Dialogue: 0,0:39:35.38,0:39:36.51,Default,,0,0,0,,reduce your involuntary
Dialogue: 0,0:39:36.51,0:39:37.23,Default,,0,0,0,,subscription turn.
Dialogue: 0,0:39:37.87,0:39:39.31,Default,,0,0,0,,So firstly, you can use these
Dialogue: 0,0:39:39.31,0:39:41.19,Default,,0,0,0,,two fields to provide messaging
Dialogue: 0,0:39:41.19,0:39:41.68,Default,,0,0,0,,to your user.
Dialogue: 0,0:39:42.02,0:39:42.90,Default,,0,0,0,,If you see that they've had a
Dialogue: 0,0:39:42.90,0:39:44.52,Default,,0,0,0,,billing error, you can now tell
Dialogue: 0,0:39:44.52,0:39:45.66,Default,,0,0,0,,them to go ahead and update
Dialogue: 0,0:39:45.91,0:39:47.20,Default,,0,0,0,,their billing info in the app
Dialogue: 0,0:39:47.20,0:39:47.48,Default,,0,0,0,,store.
Dialogue: 0,0:39:48.64,0:39:50.85,Default,,0,0,0,,Number 2, you can offer a
Dialogue: 0,0:39:50.85,0:39:52.16,Default,,0,0,0,,downgraded or temporary
Dialogue: 0,0:39:52.16,0:39:53.56,Default,,0,0,0,,experience to users who are in
Dialogue: 0,0:39:53.56,0:39:54.42,Default,,0,0,0,,this retry window.
Dialogue: 0,0:39:54.42,0:39:55.40,Default,,0,0,0,,So if you see that they're in
Dialogue: 0,0:39:55.40,0:39:56.99,Default,,0,0,0,,billing retry window, maybe you
Dialogue: 0,0:39:56.99,0:39:58.70,Default,,0,0,0,,give them access to browse your
Dialogue: 0,0:39:58.70,0:39:59.94,Default,,0,0,0,,catalog or videos but you don't
Dialogue: 0,0:39:59.94,0:40:00.56,Default,,0,0,0,,let them watch them.
Dialogue: 0,0:40:01.10,0:40:01.95,Default,,0,0,0,,So give them some kind of
Dialogue: 0,0:40:02.05,0:40:03.24,Default,,0,0,0,,temporary experience in the
Dialogue: 0,0:40:03.24,0:40:03.61,Default,,0,0,0,,middle there.
Dialogue: 0,0:40:04.22,0:40:06.83,Default,,0,0,0,,And number three, use these new
Dialogue: 0,0:40:06.83,0:40:08.04,Default,,0,0,0,,server notifications.
Dialogue: 0,0:40:08.04,0:40:09.26,Default,,0,0,0,,Use the verify receipt endpoint
Dialogue: 0,0:40:09.26,0:40:10.53,Default,,0,0,0,,or any other technique to
Dialogue: 0,0:40:10.61,0:40:12.69,Default,,0,0,0,,unblock users as soon as their
Dialogue: 0,0:40:12.69,0:40:13.70,Default,,0,0,0,,subscription renews.
Dialogue: 0,0:40:14.40,0:40:15.86,Default,,0,0,0,,Now these sound like pretty
Dialogue: 0,0:40:16.72,0:40:17.88,Default,,0,0,0,,obvious examples but if you can
Dialogue: 0,0:40:17.88,0:40:19.26,Default,,0,0,0,,do these three things, there's a
Dialogue: 0,0:40:19.26,0:40:20.71,Default,,0,0,0,,lot of involuntary expiration
Dialogue: 0,0:40:20.71,0:40:22.67,Default,,0,0,0,,that you will save because of
Dialogue: 0,0:40:22.67,0:40:23.34,Default,,0,0,0,,these three things.
Dialogue: 0,0:40:23.91,0:40:25.80,Default,,0,0,0,,So there's some things you can
Dialogue: 0,0:40:25.80,0:40:26.96,Default,,0,0,0,,do for the voluntary case as
Dialogue: 0,0:40:26.96,0:40:27.20,Default,,0,0,0,,well.
Dialogue: 0,0:40:27.29,0:40:28.52,Default,,0,0,0,,So when a user has actually
Dialogue: 0,0:40:28.52,0:40:29.90,Default,,0,0,0,,voluntarily elected to
Dialogue: 0,0:40:29.90,0:40:31.08,Default,,0,0,0,,unsubscribe from your app, you
Dialogue: 0,0:40:31.08,0:40:32.31,Default,,0,0,0,,can use this information to help
Dialogue: 0,0:40:32.31,0:40:32.98,Default,,0,0,0,,you here as well.
Dialogue: 0,0:40:33.74,0:40:34.92,Default,,0,0,0,,There's that expiration intent
Dialogue: 0,0:40:34.92,0:40:35.96,Default,,0,0,0,,field that we're including now
Dialogue: 0,0:40:36.01,0:40:37.41,Default,,0,0,0,,and you can use this as a way to
Dialogue: 0,0:40:37.41,0:40:38.44,Default,,0,0,0,,offer messaging to those
Dialogue: 0,0:40:38.44,0:40:39.35,Default,,0,0,0,,particular users.
Dialogue: 0,0:40:40.10,0:40:41.17,Default,,0,0,0,,So let's say that a user
Dialogue: 0,0:40:41.17,0:40:41.59,Default,,0,0,0,,canceled.
Dialogue: 0,0:40:42.38,0:40:44.00,Default,,0,0,0,,You can maybe think well, let's
Dialogue: 0,0:40:44.00,0:40:45.26,Default,,0,0,0,,apply some kind of win back.
Dialogue: 0,0:40:46.21,0:40:47.37,Default,,0,0,0,,Maybe you rolled out a price
Dialogue: 0,0:40:47.37,0:40:49.25,Default,,0,0,0,,increase and the user expired
Dialogue: 0,0:40:49.25,0:40:50.57,Default,,0,0,0,,because they didn't consent to
Dialogue: 0,0:40:50.57,0:40:50.64,Default,,0,0,0,,it.
Dialogue: 0,0:40:50.64,0:40:52.21,Default,,0,0,0,,Well now you can offer maybe an
Dialogue: 0,0:40:52.21,0:40:53.31,Default,,0,0,0,,attractive downgrade option
Dialogue: 0,0:40:53.31,0:40:54.51,Default,,0,0,0,,because you know that it was
Dialogue: 0,0:40:54.51,0:40:55.27,Default,,0,0,0,,really about the price
Dialogue: 0,0:40:55.27,0:40:56.59,Default,,0,0,0,,difference that caused the user
Dialogue: 0,0:40:56.59,0:40:57.39,Default,,0,0,0,,to unsubscribe.
Dialogue: 0,0:40:57.39,0:40:58.79,Default,,0,0,0,,So you can see how you can use
Dialogue: 0,0:40:59.00,0:40:59.68,Default,,0,0,0,,just in these couple of
Dialogue: 0,0:40:59.68,0:41:00.98,Default,,0,0,0,,examples, these fields to now,
Dialogue: 0,0:41:01.39,0:41:02.31,Default,,0,0,0,,you know, make key business
Dialogue: 0,0:41:02.31,0:41:03.54,Default,,0,0,0,,decisions and how you interact
Dialogue: 0,0:41:03.54,0:41:04.69,Default,,0,0,0,,with your users and save
Dialogue: 0,0:41:04.93,0:41:05.64,Default,,0,0,0,,subscription churn.
Dialogue: 0,0:41:07.60,0:41:08.79,Default,,0,0,0,,These new fields are arriving
Dialogue: 0,0:41:08.79,0:41:10.05,Default,,0,0,0,,later this year along with the
Dialogue: 0,0:41:10.05,0:41:12.05,Default,,0,0,0,,server notifications and we
Dialogue: 0,0:41:12.05,0:41:13.18,Default,,0,0,0,,think this is going to give a
Dialogue: 0,0:41:13.18,0:41:14.56,Default,,0,0,0,,much better experience for all
Dialogue: 0,0:41:14.56,0:41:16.02,Default,,0,0,0,,users for your subscriptions and
Dialogue: 0,0:41:16.02,0:41:17.08,Default,,0,0,0,,for you developing it as well.
Dialogue: 0,0:41:18.52,0:41:24.55,Default,,0,0,0,,[ Clapping ]
Dialogue: 0,0:41:25.05,0:41:27.63,Default,,0,0,0,,They fit in this diagram as
Dialogue: 0,0:41:27.63,0:41:28.58,Default,,0,0,0,,another set of tools that you
Dialogue: 0,0:41:28.58,0:41:29.58,Default,,0,0,0,,can use for server side
Dialogue: 0,0:41:29.58,0:41:30.54,Default,,0,0,0,,subscription management
Dialogue: 0,0:41:30.54,0:41:31.72,Default,,0,0,0,,alongside the status polling
Dialogue: 0,0:41:31.72,0:41:32.45,Default,,0,0,0,,that we talked about.
Dialogue: 0,0:41:32.45,0:41:33.83,Default,,0,0,0,,But of course, you still need to
Dialogue: 0,0:41:33.83,0:41:35.62,Default,,0,0,0,,be relying on this flow of
Dialogue: 0,0:41:35.62,0:41:36.45,Default,,0,0,0,,updating and finishing
Dialogue: 0,0:41:36.45,0:41:38.28,Default,,0,0,0,,transactions on a user's device.
Dialogue: 0,0:41:39.21,0:41:40.55,Default,,0,0,0,,So while we're talking about
Dialogue: 0,0:41:40.55,0:41:41.48,Default,,0,0,0,,subscriptions, I just want to
Dialogue: 0,0:41:41.48,0:41:43.49,Default,,0,0,0,,touch on free trials for a
Dialogue: 0,0:41:44.42,0:41:44.65,Default,,0,0,0,,moment.
Dialogue: 0,0:41:44.76,0:41:45.94,Default,,0,0,0,,Free trial is when a user can
Dialogue: 0,0:41:46.16,0:41:47.37,Default,,0,0,0,,begin a subscription without
Dialogue: 0,0:41:47.37,0:41:48.75,Default,,0,0,0,,actually paying for anything.
Dialogue: 0,0:41:49.18,0:41:50.63,Default,,0,0,0,,And they are not billed until
Dialogue: 0,0:41:50.63,0:41:51.62,Default,,0,0,0,,the free trial period is
Dialogue: 0,0:41:51.62,0:41:52.11,Default,,0,0,0,,actually over.
Dialogue: 0,0:41:53.57,0:41:56.00,Default,,0,0,0,,So previously, we had this
Dialogue: 0,0:41:56.48,0:41:57.67,Default,,0,0,0,,pretty convoluted looking table
Dialogue: 0,0:41:57.67,0:41:59.14,Default,,0,0,0,,and you'd have an associated
Dialogue: 0,0:41:59.14,0:42:00.73,Default,,0,0,0,,free trial duration for a
Dialogue: 0,0:42:00.73,0:42:01.55,Default,,0,0,0,,subscription length.
Dialogue: 0,0:42:01.88,0:42:03.38,Default,,0,0,0,,And you had to choose which
Dialogue: 0,0:42:03.38,0:42:04.84,Default,,0,0,0,,trials you could offer based on
Dialogue: 0,0:42:04.84,0:42:05.72,Default,,0,0,0,,the subscription length that you
Dialogue: 0,0:42:05.72,0:42:06.54,Default,,0,0,0,,were offering users.
Dialogue: 0,0:42:06.54,0:42:07.42,Default,,0,0,0,,Now we made some changes
Dialogue: 0,0:42:07.42,0:42:08.96,Default,,0,0,0,,recently to make this much
Dialogue: 0,0:42:08.96,0:42:09.26,Default,,0,0,0,,simpler.
Dialogue: 0,0:42:09.26,0:42:10.61,Default,,0,0,0,,So you can now have any
Dialogue: 0,0:42:10.61,0:42:11.86,Default,,0,0,0,,subscription length available
Dialogue: 0,0:42:11.86,0:42:13.26,Default,,0,0,0,,for any free trial duration.
Dialogue: 0,0:42:13.26,0:42:14.60,Default,,0,0,0,,So we think is a much better
Dialogue: 0,0:42:14.60,0:42:16.21,Default,,0,0,0,,improvement and this includes
Dialogue: 0,0:42:16.55,0:42:18.11,Default,,0,0,0,,two new free trial durations as
Dialogue: 0,0:42:18.11,0:42:19.13,Default,,0,0,0,,well, which is the three-day
Dialogue: 0,0:42:19.13,0:42:20.58,Default,,0,0,0,,trial and the two-week trial.
Dialogue: 0,0:42:20.58,0:42:21.77,Default,,0,0,0,,These are two new trial
Dialogue: 0,0:42:21.77,0:42:22.77,Default,,0,0,0,,durations that you can offer to
Dialogue: 0,0:42:22.77,0:42:23.38,Default,,0,0,0,,your users.
Dialogue: 0,0:42:23.93,0:42:26.46,Default,,0,0,0,,So that's a bit about
Dialogue: 0,0:42:26.46,0:42:27.81,Default,,0,0,0,,maintaining subscription state
Dialogue: 0,0:42:27.81,0:42:29.00,Default,,0,0,0,,and talking about managing auto
Dialogue: 0,0:42:29.00,0:42:29.99,Default,,0,0,0,,renewable subscriptions in the
Dialogue: 0,0:42:29.99,0:42:30.24,Default,,0,0,0,,server.
Dialogue: 0,0:42:30.24,0:42:32.18,Default,,0,0,0,,I'd like to touch now on
Dialogue: 0,0:42:32.27,0:42:33.60,Default,,0,0,0,,developing in the sandbox
Dialogue: 0,0:42:33.60,0:42:34.12,Default,,0,0,0,,environment.
Dialogue: 0,0:42:34.23,0:42:35.08,Default,,0,0,0,,So how you can use these
Dialogue: 0,0:42:35.08,0:42:36.29,Default,,0,0,0,,technologies while you're
Dialogue: 0,0:42:36.29,0:42:36.75,Default,,0,0,0,,developing.
Dialogue: 0,0:42:37.41,0:42:38.80,Default,,0,0,0,,So what is the sandbox?
Dialogue: 0,0:42:39.61,0:42:40.56,Default,,0,0,0,,Well it's not to be confused
Dialogue: 0,0:42:40.56,0:42:41.73,Default,,0,0,0,,with the sandbox on your
Dialogue: 0,0:42:41.73,0:42:43.17,Default,,0,0,0,,application, on a user's device
Dialogue: 0,0:42:43.21,0:42:44.15,Default,,0,0,0,,that guards access to
Dialogue: 0,0:42:44.15,0:42:45.23,Default,,0,0,0,,application resources.
Dialogue: 0,0:42:45.50,0:42:47.74,Default,,0,0,0,,This particular sandbox is the
Dialogue: 0,0:42:47.74,0:42:48.81,Default,,0,0,0,,test environment that we offer
Dialogue: 0,0:42:48.81,0:42:50.18,Default,,0,0,0,,for you to test out in-app
Dialogue: 0,0:42:50.18,0:42:50.75,Default,,0,0,0,,purchases in.
Dialogue: 0,0:42:51.41,0:42:53.03,Default,,0,0,0,,And we select it based on the
Dialogue: 0,0:42:53.03,0:42:54.13,Default,,0,0,0,,certificate that's actually used
Dialogue: 0,0:42:54.13,0:42:55.22,Default,,0,0,0,,to sign your application.
Dialogue: 0,0:42:55.73,0:42:56.95,Default,,0,0,0,,It's how StoreKit knows whether
Dialogue: 0,0:42:56.95,0:42:58.24,Default,,0,0,0,,to be in a sandbox mode or not.
Dialogue: 0,0:42:58.65,0:43:00.45,Default,,0,0,0,,So if you build and run your app
Dialogue: 0,0:43:00.45,0:43:01.01,Default,,0,0,0,,from Xcode [phonetic].
Dialogue: 0,0:43:01.01,0:43:02.24,Default,,0,0,0,,It's signed using your developer
Dialogue: 0,0:43:02.24,0:43:03.66,Default,,0,0,0,,certificate and StoreKit knows
Dialogue: 0,0:43:03.66,0:43:04.85,Default,,0,0,0,,that it needs to be talking to
Dialogue: 0,0:43:04.85,0:43:05.92,Default,,0,0,0,,the sandbox environment.
Dialogue: 0,0:43:06.02,0:43:07.93,Default,,0,0,0,,Of course, if you distribute it
Dialogue: 0,0:43:07.93,0:43:09.78,Default,,0,0,0,,using the App Store, well
Dialogue: 0,0:43:09.93,0:43:10.90,Default,,0,0,0,,StoreKit knows that it needs to
Dialogue: 0,0:43:10.90,0:43:11.70,Default,,0,0,0,,talk to the production
Dialogue: 0,0:43:11.70,0:43:12.48,Default,,0,0,0,,environment based on the
Dialogue: 0,0:43:12.48,0:43:14.12,Default,,0,0,0,,certificate used to sign your
Dialogue: 0,0:43:14.12,0:43:14.31,Default,,0,0,0,,app.
Dialogue: 0,0:43:15.55,0:43:16.51,Default,,0,0,0,,And how do you know when you're
Dialogue: 0,0:43:16.51,0:43:18.03,Default,,0,0,0,,actually working with app which
Dialogue: 0,0:43:18.08,0:43:19.62,Default,,0,0,0,,environment you're in?
Dialogue: 0,0:43:20.57,0:43:21.43,Default,,0,0,0,,When you make your in-app
Dialogue: 0,0:43:21.43,0:43:22.28,Default,,0,0,0,,purchase inside your
Dialogue: 0,0:43:22.28,0:43:24.00,Default,,0,0,0,,application, you get this
Dialogue: 0,0:43:24.00,0:43:25.00,Default,,0,0,0,,payment sheet that we saw in
Dialogue: 0,0:43:25.00,0:43:25.76,Default,,0,0,0,,this morning's session.
Dialogue: 0,0:43:26.67,0:43:28.10,Default,,0,0,0,,And we have this indication here
Dialogue: 0,0:43:28.10,0:43:29.16,Default,,0,0,0,,that you're in sandbox mode.
Dialogue: 0,0:43:29.16,0:43:30.15,Default,,0,0,0,,So this is going to inform you
Dialogue: 0,0:43:30.15,0:43:31.34,Default,,0,0,0,,that the payment that's about to
Dialogue: 0,0:43:31.34,0:43:33.22,Default,,0,0,0,,take place is actually a sandbox
Dialogue: 0,0:43:33.22,0:43:34.68,Default,,0,0,0,,payment and no real money is
Dialogue: 0,0:43:34.68,0:43:35.94,Default,,0,0,0,,going to be changing hands.
Dialogue: 0,0:43:36.51,0:43:39.39,Default,,0,0,0,,So the key differences between
Dialogue: 0,0:43:39.39,0:43:40.45,Default,,0,0,0,,the sandbox and the production
Dialogue: 0,0:43:40.45,0:43:41.26,Default,,0,0,0,,environment, well the biggest
Dialogue: 0,0:43:41.26,0:43:42.01,Default,,0,0,0,,one, of course, is that there's
Dialogue: 0,0:43:42.01,0:43:43.56,Default,,0,0,0,,no real money being changed
Dialogue: 0,0:43:43.56,0:43:43.97,Default,,0,0,0,,hands here.
Dialogue: 0,0:43:43.97,0:43:45.38,Default,,0,0,0,,There's no actual charge
Dialogue: 0,0:43:45.38,0:43:45.73,Default,,0,0,0,,happening.
Dialogue: 0,0:43:45.73,0:43:46.87,Default,,0,0,0,,So you don't need to be charging
Dialogue: 0,0:43:46.87,0:43:48.04,Default,,0,0,0,,your personal card 10-cent
Dialogue: 0,0:43:48.04,0:43:49.48,Default,,0,0,0,,transactions all the time.
Dialogue: 0,0:43:49.83,0:43:51.27,Default,,0,0,0,,There's a different endpoint as
Dialogue: 0,0:43:51.27,0:43:51.89,Default,,0,0,0,,well when it comes to
Dialogue: 0,0:43:51.89,0:43:53.35,Default,,0,0,0,,server-to-server validation.
Dialogue: 0,0:43:53.72,0:43:54.95,Default,,0,0,0,,We provide a different url for
Dialogue: 0,0:43:54.95,0:43:56.27,Default,,0,0,0,,that verify receipt endpoint.
Dialogue: 0,0:43:56.99,0:43:58.35,Default,,0,0,0,,And you can also request expired
Dialogue: 0,0:43:58.35,0:43:59.90,Default,,0,0,0,,and revoked certificates in the
Dialogue: 0,0:43:59.90,0:44:01.04,Default,,0,0,0,,sandbox environment to be able
Dialogue: 0,0:44:01.04,0:44:01.78,Default,,0,0,0,,to handle them a little
Dialogue: 0,0:44:01.78,0:44:02.16,Default,,0,0,0,,differently.
Dialogue: 0,0:44:03.38,0:44:04.75,Default,,0,0,0,,The other thing that is
Dialogue: 0,0:44:04.75,0:44:06.34,Default,,0,0,0,,different is a time contraction
Dialogue: 0,0:44:06.52,0:44:07.15,Default,,0,0,0,,for auto renewable
Dialogue: 0,0:44:07.15,0:44:07.84,Default,,0,0,0,,subscriptions.
Dialogue: 0,0:44:08.30,0:44:09.28,Default,,0,0,0,,So instead of having to wait a
Dialogue: 0,0:44:09.28,0:44:10.73,Default,,0,0,0,,full year for a subscription to
Dialogue: 0,0:44:10.73,0:44:11.78,Default,,0,0,0,,renew to be able to test out
Dialogue: 0,0:44:11.78,0:44:13.10,Default,,0,0,0,,that scenario, we can track
Dialogue: 0,0:44:13.15,0:44:14.00,Default,,0,0,0,,these time intervals.
Dialogue: 0,0:44:14.43,0:44:15.86,Default,,0,0,0,,So the rule of thumb is that one
Dialogue: 0,0:44:15.86,0:44:17.06,Default,,0,0,0,,hour of time in the sandbox
Dialogue: 0,0:44:17.06,0:44:19.03,Default,,0,0,0,,world equals one year of time in
Dialogue: 0,0:44:19.03,0:44:19.61,Default,,0,0,0,,the real world.
Dialogue: 0,0:44:19.61,0:44:21.72,Default,,0,0,0,,And this is how those relate for
Dialogue: 0,0:44:21.72,0:44:22.47,Default,,0,0,0,,the various different
Dialogue: 0,0:44:22.47,0:44:23.58,Default,,0,0,0,,subscription durations.
Dialogue: 0,0:44:24.10,0:44:26.30,Default,,0,0,0,,The other thing that we do when
Dialogue: 0,0:44:26.30,0:44:27.41,Default,,0,0,0,,you're operating in a sandbox
Dialogue: 0,0:44:27.41,0:44:28.51,Default,,0,0,0,,environment is that if you are
Dialogue: 0,0:44:28.51,0:44:30.05,Default,,0,0,0,,subscribed to an auto renewable
Dialogue: 0,0:44:30.05,0:44:32.04,Default,,0,0,0,,subscription, we only renew it
Dialogue: 0,0:44:32.04,0:44:34.59,Default,,0,0,0,,after six times per eight-hour
Dialogue: 0,0:44:34.59,0:44:34.88,Default,,0,0,0,,window.
Dialogue: 0,0:44:36.16,0:44:37.63,Default,,0,0,0,,Then we let it expire.
Dialogue: 0,0:44:37.82,0:44:39.41,Default,,0,0,0,,So you can handle the case where
Dialogue: 0,0:44:39.41,0:44:40.44,Default,,0,0,0,,a user has actually let their
Dialogue: 0,0:44:40.44,0:44:41.50,Default,,0,0,0,,subscription lapse and you can
Dialogue: 0,0:44:41.79,0:44:43.06,Default,,0,0,0,,handle that in your application
Dialogue: 0,0:44:43.06,0:44:43.52,Default,,0,0,0,,accordingly.
Dialogue: 0,0:44:45.54,0:44:46.84,Default,,0,0,0,,When it comes to setting up this
Dialogue: 0,0:44:46.84,0:44:47.89,Default,,0,0,0,,test environment, it's done
Dialogue: 0,0:44:47.89,0:44:48.83,Default,,0,0,0,,through iTunes Connect.
Dialogue: 0,0:44:49.41,0:44:50.78,Default,,0,0,0,,You create test users in iTunes
Dialogue: 0,0:44:50.78,0:44:52.16,Default,,0,0,0,,Connect and you can just those
Dialogue: 0,0:44:52.16,0:44:53.15,Default,,0,0,0,,in-app purchase products that
Dialogue: 0,0:44:53.15,0:44:54.71,Default,,0,0,0,,you've already got for sale and
Dialogue: 0,0:44:54.71,0:44:55.95,Default,,0,0,0,,then you just build and sign
Dialogue: 0,0:44:55.95,0:44:56.89,Default,,0,0,0,,your app using XCode.
Dialogue: 0,0:44:57.09,0:44:58.21,Default,,0,0,0,,So it's built and signed using
Dialogue: 0,0:44:58.21,0:44:59.36,Default,,0,0,0,,the developer certificate.
Dialogue: 0,0:44:59.82,0:45:00.99,Default,,0,0,0,,And you just go ahead and buy
Dialogue: 0,0:45:00.99,0:45:02.02,Default,,0,0,0,,products in your application.
Dialogue: 0,0:45:02.02,0:45:03.35,Default,,0,0,0,,And when you're prompted to sign
Dialogue: 0,0:45:03.35,0:45:04.86,Default,,0,0,0,,in, you'll be able to sign in
Dialogue: 0,0:45:04.86,0:45:06.72,Default,,0,0,0,,using that test user that you
Dialogue: 0,0:45:06.72,0:45:07.66,Default,,0,0,0,,made in iTunes Connect.
Dialogue: 0,0:45:08.91,0:45:10.05,Default,,0,0,0,,One note if you are developing
Dialogue: 0,0:45:10.05,0:45:11.75,Default,,0,0,0,,for the Mac, you may need to
Dialogue: 0,0:45:11.75,0:45:13.15,Default,,0,0,0,,launch your app once from Finder
Dialogue: 0,0:45:13.23,0:45:14.72,Default,,0,0,0,,just in order to make sure that
Dialogue: 0,0:45:14.72,0:45:15.76,Default,,0,0,0,,the receipt gets fetched.
Dialogue: 0,0:45:16.49,0:45:18.15,Default,,0,0,0,,This is because that exit code
Dialogue: 0,0:45:18.15,0:45:19.01,Default,,0,0,0,,that we mentioned earlier on in
Dialogue: 0,0:45:19.01,0:45:21.11,Default,,0,0,0,,the talk where you exit 173 on a
Dialogue: 0,0:45:21.11,0:45:23.30,Default,,0,0,0,,Mac, well XCode catches that if
Dialogue: 0,0:45:23.30,0:45:24.07,Default,,0,0,0,,you're building and running
Dialogue: 0,0:45:24.07,0:45:25.16,Default,,0,0,0,,straight from XCode the first
Dialogue: 0,0:45:25.16,0:45:25.34,Default,,0,0,0,,time.
Dialogue: 0,0:45:25.34,0:45:26.13,Default,,0,0,0,,You need to make sure that you
Dialogue: 0,0:45:26.13,0:45:27.61,Default,,0,0,0,,launch the app once that binary
Dialogue: 0,0:45:27.61,0:45:29.04,Default,,0,0,0,,from Finder so that StoreKit can
Dialogue: 0,0:45:29.04,0:45:30.82,Default,,0,0,0,,catch that exit code and handle
Dialogue: 0,0:45:30.82,0:45:31.35,Default,,0,0,0,,it appropriately.
Dialogue: 0,0:45:31.96,0:45:34.48,Default,,0,0,0,,In terms of using the sandbox
Dialogue: 0,0:45:34.48,0:45:35.31,Default,,0,0,0,,from the server, I mentioned
Dialogue: 0,0:45:35.31,0:45:36.08,Default,,0,0,0,,that we have a different
Dialogue: 0,0:45:36.27,0:45:37.82,Default,,0,0,0,,endpoint for the verify receipt
Dialogue: 0,0:45:37.82,0:45:37.89,Default,,0,0,0,,url.
Dialogue: 0,0:45:37.88,0:45:39.82,Default,,0,0,0,,This is what it looks like in
Dialogue: 0,0:45:39.83,0:45:40.74,Default,,0,0,0,,the development environment.
Dialogue: 0,0:45:40.74,0:45:41.52,Default,,0,0,0,,You'll probably have your
Dialogue: 0,0:45:41.69,0:45:43.23,Default,,0,0,0,,developer signed app probably
Dialogue: 0,0:45:43.23,0:45:45.00,Default,,0,0,0,,talking to your test server and
Dialogue: 0,0:45:45.00,0:45:46.51,Default,,0,0,0,,that test server can talk to the
Dialogue: 0,0:45:46.51,0:45:47.72,Default,,0,0,0,,App Store sandbox by the
Dialogue: 0,0:45:47.72,0:45:48.41,Default,,0,0,0,,different url.
Dialogue: 0,0:45:49.60,0:45:50.35,Default,,0,0,0,,In production, you'll have
Dialogue: 0,0:45:50.35,0:45:50.95,Default,,0,0,0,,something like this.
Dialogue: 0,0:45:50.95,0:45:52.31,Default,,0,0,0,,Your production app will talk to
Dialogue: 0,0:45:52.31,0:45:53.94,Default,,0,0,0,,your production server and that
Dialogue: 0,0:45:53.94,0:45:55.00,Default,,0,0,0,,can talk to the production App
Dialogue: 0,0:45:55.00,0:45:56.63,Default,,0,0,0,,Store server but there is one
Dialogue: 0,0:45:56.63,0:45:57.91,Default,,0,0,0,,particularly case where there's
Dialogue: 0,0:45:57.91,0:45:58.76,Default,,0,0,0,,a bit of a mismatch.
Dialogue: 0,0:45:59.81,0:46:00.94,Default,,0,0,0,,And that's when your app is in
Dialogue: 0,0:46:00.94,0:46:01.52,Default,,0,0,0,,app review.
Dialogue: 0,0:46:01.52,0:46:04.03,Default,,0,0,0,,And why is it a mismatch?
Dialogue: 0,0:46:04.03,0:46:05.55,Default,,0,0,0,,It's because the app review team
Dialogue: 0,0:46:05.55,0:46:07.37,Default,,0,0,0,,actually uses a sandbox user to
Dialogue: 0,0:46:07.37,0:46:08.48,Default,,0,0,0,,be able to test your in-app
Dialogue: 0,0:46:08.48,0:46:09.15,Default,,0,0,0,,purchases.
Dialogue: 0,0:46:09.88,0:46:10.93,Default,,0,0,0,,So this is what that looks like.
Dialogue: 0,0:46:10.93,0:46:12.30,Default,,0,0,0,,You have your production signed
Dialogue: 0,0:46:12.30,0:46:13.99,Default,,0,0,0,,app talking to your production
Dialogue: 0,0:46:13.99,0:46:15.22,Default,,0,0,0,,server but you need to be able
Dialogue: 0,0:46:15.22,0:46:17.40,Default,,0,0,0,,to verify transactions for a
Dialogue: 0,0:46:17.40,0:46:18.74,Default,,0,0,0,,sandbox user just to get through
Dialogue: 0,0:46:18.74,0:46:19.83,Default,,0,0,0,,the app review scenario.
Dialogue: 0,0:46:19.83,0:46:21.14,Default,,0,0,0,,So how do you handle this
Dialogue: 0,0:46:21.19,0:46:22.06,Default,,0,0,0,,particular mismatch?
Dialogue: 0,0:46:22.55,0:46:23.62,Default,,0,0,0,,Well we have a way of doing
Dialogue: 0,0:46:23.62,0:46:23.87,Default,,0,0,0,,this.
Dialogue: 0,0:46:24.84,0:46:25.97,Default,,0,0,0,,Firstly, when you're in the
Dialogue: 0,0:46:25.97,0:46:28.76,Default,,0,0,0,,production environment try the
Dialogue: 0,0:46:28.76,0:46:30.31,Default,,0,0,0,,production App Store url first.
Dialogue: 0,0:46:31.30,0:46:32.53,Default,,0,0,0,,Now if the receipt is for the
Dialogue: 0,0:46:32.53,0:46:33.54,Default,,0,0,0,,sandbox, you'll receive a
Dialogue: 0,0:46:33.54,0:46:35.77,Default,,0,0,0,,specific error code, 21 double 0
Dialogue: 0,0:46:35.77,0:46:35.95,Default,,0,0,0,,7.
Dialogue: 0,0:46:36.61,0:46:37.53,Default,,0,0,0,,That's an indication that you
Dialogue: 0,0:46:37.53,0:46:39.56,Default,,0,0,0,,need to then to try against the
Dialogue: 0,0:46:39.56,0:46:40.97,Default,,0,0,0,,App Store sandbox instead.
Dialogue: 0,0:46:41.41,0:46:42.52,Default,,0,0,0,,So you can leave that in your
Dialogue: 0,0:46:42.52,0:46:43.72,Default,,0,0,0,,production environment and this
Dialogue: 0,0:46:43.72,0:46:44.59,Default,,0,0,0,,will just mean that your app is
Dialogue: 0,0:46:44.59,0:46:45.91,Default,,0,0,0,,able to sail through app review
Dialogue: 0,0:46:46.15,0:46:47.13,Default,,0,0,0,,without any problems in this
Dialogue: 0,0:46:47.13,0:46:47.44,Default,,0,0,0,,regard.
Dialogue: 0,0:46:47.44,0:46:50.52,Default,,0,0,0,,When it comes to the new server
Dialogue: 0,0:46:50.52,0:46:52.43,Default,,0,0,0,,to server notifications, this is
Dialogue: 0,0:46:52.43,0:46:53.46,Default,,0,0,0,,handled slightly differently.
Dialogue: 0,0:46:53.46,0:46:54.59,Default,,0,0,0,,So we don't actually have a
Dialogue: 0,0:46:54.59,0:46:56.21,Default,,0,0,0,,separate url in iTunes Connect
Dialogue: 0,0:46:56.53,0:46:58.17,Default,,0,0,0,,for a sandbox -- or for your own
Dialogue: 0,0:46:58.17,0:46:58.72,Default,,0,0,0,,test server.
Dialogue: 0,0:46:59.69,0:47:01.12,Default,,0,0,0,,We handle this sandboxing by
Dialogue: 0,0:47:01.12,0:47:02.42,Default,,0,0,0,,parameter in the actual payload
Dialogue: 0,0:47:02.75,0:47:03.67,Default,,0,0,0,,of the notification.
Dialogue: 0,0:47:03.67,0:47:04.85,Default,,0,0,0,,So there's an environment key
Dialogue: 0,0:47:04.85,0:47:06.23,Default,,0,0,0,,that you can use that'll tell
Dialogue: 0,0:47:06.23,0:47:06.86,Default,,0,0,0,,you whether or not the
Dialogue: 0,0:47:06.86,0:47:09.72,Default,,0,0,0,,notification is for a sandbox
Dialogue: 0,0:47:09.72,0:47:11.05,Default,,0,0,0,,subscription or whether it's for
Dialogue: 0,0:47:11.05,0:47:11.63,Default,,0,0,0,,a production one.
Dialogue: 0,0:47:12.21,0:47:15.23,Default,,0,0,0,,So that's a bit about developing
Dialogue: 0,0:47:15.23,0:47:16.16,Default,,0,0,0,,now in a sandbox.
Dialogue: 0,0:47:16.23,0:47:17.51,Default,,0,0,0,,So we touched on a few things
Dialogue: 0,0:47:17.51,0:47:17.72,Default,,0,0,0,,today.
Dialogue: 0,0:47:17.72,0:47:18.24,Default,,0,0,0,,There's been a lot of
Dialogue: 0,0:47:18.24,0:47:18.84,Default,,0,0,0,,information.
Dialogue: 0,0:47:19.57,0:47:20.87,Default,,0,0,0,,Let's just go through again what
Dialogue: 0,0:47:20.87,0:47:21.41,Default,,0,0,0,,we talked about.
Dialogue: 0,0:47:21.41,0:47:22.19,Default,,0,0,0,,We talked about receipt
Dialogue: 0,0:47:22.19,0:47:22.96,Default,,0,0,0,,validation in detail.
Dialogue: 0,0:47:22.96,0:47:24.38,Default,,0,0,0,,How to do this on a user's
Dialogue: 0,0:47:24.38,0:47:25.83,Default,,0,0,0,,device and how to check that
Dialogue: 0,0:47:25.83,0:47:27.51,Default,,0,0,0,,document for authenticity and
Dialogue: 0,0:47:27.51,0:47:29.53,Default,,0,0,0,,read out transactions from it.
Dialogue: 0,0:47:29.53,0:47:30.90,Default,,0,0,0,,We talked about maintaining a
Dialogue: 0,0:47:30.90,0:47:32.61,Default,,0,0,0,,subscription state across a
Dialogue: 0,0:47:32.61,0:47:33.51,Default,,0,0,0,,server environment.
Dialogue: 0,0:47:33.51,0:47:35.49,Default,,0,0,0,,How to update devices and act on
Dialogue: 0,0:47:35.49,0:47:36.78,Default,,0,0,0,,that verify receipt endpoint.
Dialogue: 0,0:47:37.92,0:47:40.15,Default,,0,0,0,,We have new notifications that
Dialogue: 0,0:47:40.15,0:47:41.14,Default,,0,0,0,,we're introducing that's going
Dialogue: 0,0:47:41.14,0:47:42.25,Default,,0,0,0,,to unblock and save a lot of
Dialogue: 0,0:47:42.25,0:47:43.49,Default,,0,0,0,,that involuntary subscription
Dialogue: 0,0:47:43.49,0:47:43.65,Default,,0,0,0,,churn.
Dialogue: 0,0:47:44.03,0:47:45.34,Default,,0,0,0,,Provide a much better experience
Dialogue: 0,0:47:45.34,0:47:45.98,Default,,0,0,0,,for your users.
Dialogue: 0,0:47:46.76,0:47:48.22,Default,,0,0,0,,We're also introducing those new
Dialogue: 0,0:47:48.22,0:47:48.90,Default,,0,0,0,,receipt fields.
Dialogue: 0,0:47:48.90,0:47:50.15,Default,,0,0,0,,So you can make key decisions
Dialogue: 0,0:47:50.39,0:47:51.85,Default,,0,0,0,,based on business information
Dialogue: 0,0:47:51.85,0:47:53.77,Default,,0,0,0,,about your users and now message
Dialogue: 0,0:47:53.77,0:47:54.76,Default,,0,0,0,,them much more directly.
Dialogue: 0,0:47:55.46,0:47:56.67,Default,,0,0,0,,Remember those three easy steps
Dialogue: 0,0:47:56.67,0:47:57.87,Default,,0,0,0,,to retain subscribers.
Dialogue: 0,0:47:58.27,0:47:59.41,Default,,0,0,0,,Three steps to success.
Dialogue: 0,0:48:00.22,0:48:01.37,Default,,0,0,0,,So if you do these three things,
Dialogue: 0,0:48:01.57,0:48:03.01,Default,,0,0,0,,this will, I kid you not, it'll
Dialogue: 0,0:48:03.01,0:48:04.39,Default,,0,0,0,,save you a ton of involuntary
Dialogue: 0,0:48:04.39,0:48:05.14,Default,,0,0,0,,subscription churns.
Dialogue: 0,0:48:05.14,0:48:06.58,Default,,0,0,0,,So please go ahead and do these
Dialogue: 0,0:48:06.58,0:48:07.66,Default,,0,0,0,,when these fields come out later
Dialogue: 0,0:48:07.66,0:48:08.03,Default,,0,0,0,,this year.
Dialogue: 0,0:48:08.43,0:48:09.47,Default,,0,0,0,,And finally we talked about
Dialogue: 0,0:48:09.71,0:48:10.54,Default,,0,0,0,,sandbox development.
Dialogue: 0,0:48:10.54,0:48:11.29,Default,,0,0,0,,Being able to use these
Dialogue: 0,0:48:11.29,0:48:12.53,Default,,0,0,0,,technologies in the sandbox
Dialogue: 0,0:48:12.53,0:48:13.03,Default,,0,0,0,,environment.
Dialogue: 0,0:48:13.27,0:48:14.67,Default,,0,0,0,,So for more information on this
Dialogue: 0,0:48:14.67,0:48:16.12,Default,,0,0,0,,session and to see the slides
Dialogue: 0,0:48:16.12,0:48:17.45,Default,,0,0,0,,and follow any links, this is
Dialogue: 0,0:48:17.45,0:48:18.42,Default,,0,0,0,,session 305.
Dialogue: 0,0:48:18.42,0:48:19.58,Default,,0,0,0,,You can check it out on the
Dialogue: 0,0:48:19.58,0:48:20.35,Default,,0,0,0,,developer website.
Dialogue: 0,0:48:21.32,0:48:22.14,Default,,0,0,0,,We did have some related
Dialogue: 0,0:48:22.19,0:48:23.80,Default,,0,0,0,,sessions earlier this week.
Dialogue: 0,0:48:23.80,0:48:24.46,Default,,0,0,0,,We're kind of at the end of the
Dialogue: 0,0:48:24.46,0:48:24.87,Default,,0,0,0,,week now.
Dialogue: 0,0:48:25.20,0:48:26.24,Default,,0,0,0,,But we are still here in the
Dialogue: 0,0:48:26.24,0:48:27.63,Default,,0,0,0,,labs all afternoon this
Dialogue: 0,0:48:27.63,0:48:28.05,Default,,0,0,0,,afternoon.
Dialogue: 0,0:48:28.05,0:48:29.96,Default,,0,0,0,,So we have engineers from both
Dialogue: 0,0:48:29.96,0:48:31.54,Default,,0,0,0,,the client and from the service
Dialogue: 0,0:48:31.54,0:48:32.83,Default,,0,0,0,,side from all across the
Dialogue: 0,0:48:32.83,0:48:34.21,Default,,0,0,0,,organization down in the
Dialogue: 0,0:48:34.21,0:48:35.27,Default,,0,0,0,,StoreKit labs, both this
Dialogue: 0,0:48:35.27,0:48:36.24,Default,,0,0,0,,afternoon and tomorrow
Dialogue: 0,0:48:36.24,0:48:36.57,Default,,0,0,0,,afternoon.
Dialogue: 0,0:48:36.83,0:48:38.46,Default,,0,0,0,,So please come and say hi and
Dialogue: 0,0:48:38.69,0:48:39.80,Default,,0,0,0,,bombard us with questions.
Dialogue: 0,0:48:39.80,0:48:40.99,Default,,0,0,0,,And we're happy to help you out
Dialogue: 0,0:48:40.99,0:48:42.07,Default,,0,0,0,,and talk about how you're
Dialogue: 0,0:48:42.07,0:48:43.24,Default,,0,0,0,,architecting your solutions.
Dialogue: 0,0:48:43.64,0:48:44.89,Default,,0,0,0,,But until then, thanks for
Dialogue: 0,0:48:44.89,0:48:45.37,Default,,0,0,0,,coming today.
Dialogue: 0,0:48:45.37,0:48:46.29,Default,,0,0,0,,Thanks for your time.
Dialogue: 0,0:48:46.29,0:48:46.96,Default,,0,0,0,,Enjoy your afternoon.
Dialogue: 0,0:48:47.52,0:48:51.50,Default,,0,0,0,,[ Clapping ]
