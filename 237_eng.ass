[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:18.35,0:00:19.44,Default,,0,0,0,,>> Good morning, everyone.
Dialogue: 0,0:00:19.92,0:00:22.26,Default,,0,0,0,,And welcome to session 237 this
Dialogue: 0,0:00:22.26,0:00:23.39,Default,,0,0,0,,early Friday morning.
Dialogue: 0,0:00:23.72,0:00:25.09,Default,,0,0,0,,My name is Fredrik Olsson and
Dialogue: 0,0:00:25.14,0:00:26.40,Default,,0,0,0,,I'm an engineer on the MapKit
Dialogue: 0,0:00:26.45,0:00:26.73,Default,,0,0,0,,team.
Dialogue: 0,0:00:27.00,0:00:28.92,Default,,0,0,0,,And today I'm here to talk about
Dialogue: 0,0:00:28.92,0:00:30.29,Default,,0,0,0,,what's new in MapKit.
Dialogue: 0,0:00:31.50,0:00:33.38,Default,,0,0,0,,The generic map, the standard
Dialogue: 0,0:00:33.38,0:00:35.48,Default,,0,0,0,,map that has been with us for a
Dialogue: 0,0:00:35.48,0:00:37.57,Default,,0,0,0,,couple of iterations all the
Dialogue: 0,0:00:37.57,0:00:39.48,Default,,0,0,0,,time, is a good map.
Dialogue: 0,0:00:39.74,0:00:41.57,Default,,0,0,0,,It has a road network for easy
Dialogue: 0,0:00:41.57,0:00:42.35,Default,,0,0,0,,navigation.
Dialogue: 0,0:00:42.35,0:00:43.90,Default,,0,0,0,,You have your points of interest
Dialogue: 0,0:00:43.90,0:00:44.89,Default,,0,0,0,,for reference.
Dialogue: 0,0:00:45.38,0:00:48.23,Default,,0,0,0,,But sometimes your application
Dialogue: 0,0:00:48.61,0:00:51.45,Default,,0,0,0,,has a little bit more specific
Dialogue: 0,0:00:51.49,0:00:52.92,Default,,0,0,0,,kind of data that you want to
Dialogue: 0,0:00:52.92,0:00:53.64,Default,,0,0,0,,stand out.
Dialogue: 0,0:00:54.01,0:00:56.90,Default,,0,0,0,,Like we had in AppleMaps when we
Dialogue: 0,0:00:56.90,0:00:59.00,Default,,0,0,0,,added the transit mode when we
Dialogue: 0,0:00:59.00,0:01:01.05,Default,,0,0,0,,want the transit line to stand
Dialogue: 0,0:01:01.05,0:01:03.05,Default,,0,0,0,,up and the map to take a little
Dialogue: 0,0:01:03.05,0:01:05.50,Default,,0,0,0,,bit of a step back, mute down
Dialogue: 0,0:01:05.50,0:01:07.86,Default,,0,0,0,,and let the data pop so the user
Dialogue: 0,0:01:07.86,0:01:09.25,Default,,0,0,0,,can see what is important at the
Dialogue: 0,0:01:09.25,0:01:09.69,Default,,0,0,0,,moment.
Dialogue: 0,0:01:10.32,0:01:14.25,Default,,0,0,0,,In new iOS 11, we give you muted
Dialogue: 0,0:01:14.32,0:01:16.63,Default,,0,0,0,,standard map type but do the
Dialogue: 0,0:01:16.63,0:01:18.71,Default,,0,0,0,,same for your applications so
Dialogue: 0,0:01:18.71,0:01:20.75,Default,,0,0,0,,that your data can stand out on
Dialogue: 0,0:01:20.75,0:01:22.80,Default,,0,0,0,,your map and your applications.
Dialogue: 0,0:01:25.28,0:01:28.76,Default,,0,0,0,,The map is not only the map.
Dialogue: 0,0:01:29.46,0:01:30.82,Default,,0,0,0,,There are also a couple of
Dialogue: 0,0:01:30.82,0:01:32.97,Default,,0,0,0,,system controls that we provide
Dialogue: 0,0:01:32.97,0:01:34.70,Default,,0,0,0,,for free on top of the map.
Dialogue: 0,0:01:35.60,0:01:37.54,Default,,0,0,0,,You have up in the left corner
Dialogue: 0,0:01:37.54,0:01:39.62,Default,,0,0,0,,here you can see the scale view.
Dialogue: 0,0:01:39.62,0:01:42.19,Default,,0,0,0,,You have the complex view up in
Dialogue: 0,0:01:42.19,0:01:43.02,Default,,0,0,0,,the right corner.
Dialogue: 0,0:01:43.38,0:01:46.38,Default,,0,0,0,,And down in the bottom right you
Dialogue: 0,0:01:46.38,0:01:48.01,Default,,0,0,0,,have a friend that has been
Dialogue: 0,0:01:48.01,0:01:50.80,Default,,0,0,0,,available as API for your use,
Dialogue: 0,0:01:51.04,0:01:53.00,Default,,0,0,0,,the user tracking bar bottom
Dialogue: 0,0:01:53.00,0:01:53.41,Default,,0,0,0,,item.
Dialogue: 0,0:01:54.77,0:01:57.55,Default,,0,0,0,,Now, it is a bar bottom item
Dialogue: 0,0:01:57.55,0:01:58.74,Default,,0,0,0,,which means that you can only
Dialogue: 0,0:01:58.74,0:02:01.50,Default,,0,0,0,,use it within the context of a
Dialogue: 0,0:02:01.50,0:02:04.30,Default,,0,0,0,,bar, such as navigation bars or
Dialogue: 0,0:02:04.30,0:02:04.92,Default,,0,0,0,,tool bars.
Dialogue: 0,0:02:05.40,0:02:07.33,Default,,0,0,0,,And if you want to display it
Dialogue: 0,0:02:07.57,0:02:10.13,Default,,0,0,0,,anywhere else, you have to
Dialogue: 0,0:02:10.37,0:02:11.89,Default,,0,0,0,,unfortunately roll your own.
Dialogue: 0,0:02:12.22,0:02:17.21,Default,,0,0,0,,And in iOS 11 we fixed that and
Dialogue: 0,0:02:17.21,0:02:18.84,Default,,0,0,0,,we give you a proper user
Dialogue: 0,0:02:18.84,0:02:20.62,Default,,0,0,0,,tracking button that is the
Dialogue: 0,0:02:20.62,0:02:23.00,Default,,0,0,0,,UIView subclass so that you can
Dialogue: 0,0:02:23.00,0:02:26.52,Default,,0,0,0,,use it wherever and whenever it,
Dialogue: 0,0:02:27.77,0:02:29.87,Default,,0,0,0,,well is good for the context of
Dialogue: 0,0:02:29.87,0:02:30.86,Default,,0,0,0,,your application.
Dialogue: 0,0:02:32.26,0:02:33.92,Default,,0,0,0,,When we give you the user
Dialogue: 0,0:02:33.92,0:02:36.44,Default,,0,0,0,,tracking button, we thought why
Dialogue: 0,0:02:36.44,0:02:37.76,Default,,0,0,0,,not give you more?
Dialogue: 0,0:02:37.76,0:02:40.68,Default,,0,0,0,,So, yes we will now also give
Dialogue: 0,0:02:40.68,0:02:42.26,Default,,0,0,0,,you the compass button.
Dialogue: 0,0:02:43.71,0:02:46.08,Default,,0,0,0,,The compass button is by
Dialogue: 0,0:02:46.08,0:02:48.55,Default,,0,0,0,,standard app in the upper right
Dialogue: 0,0:02:48.55,0:02:48.99,Default,,0,0,0,,corner.
Dialogue: 0,0:02:49.51,0:02:52.46,Default,,0,0,0,,By having it as a UIView button
Dialogue: 0,0:02:52.46,0:02:54.06,Default,,0,0,0,,you can position it wherever you
Dialogue: 0,0:02:54.06,0:02:54.50,Default,,0,0,0,,want.
Dialogue: 0,0:02:54.93,0:02:56.97,Default,,0,0,0,,You can even put it in one of
Dialogue: 0,0:02:56.97,0:02:58.48,Default,,0,0,0,,the navigation bars if you want
Dialogue: 0,0:02:58.48,0:02:58.69,Default,,0,0,0,,to.
Dialogue: 0,0:02:59.39,0:03:02.33,Default,,0,0,0,,The compass button has one more
Dialogue: 0,0:03:02.33,0:03:04.51,Default,,0,0,0,,property than the user tracking
Dialogue: 0,0:03:04.51,0:03:05.13,Default,,0,0,0,,button do.
Dialogue: 0,0:03:05.45,0:03:07.76,Default,,0,0,0,,It's the compass visibility.
Dialogue: 0,0:03:08.28,0:03:10.72,Default,,0,0,0,,It's on purpose that the compass
Dialogue: 0,0:03:10.72,0:03:12.95,Default,,0,0,0,,visibility is not just
Dialogue: 0,0:03:12.95,0:03:15.60,Default,,0,0,0,,repurposing the hidden property
Dialogue: 0,0:03:16.00,0:03:19.39,Default,,0,0,0,,or some equal simple bool yes
Dialogue: 0,0:03:19.39,0:03:21.10,Default,,0,0,0,,show it or don't show it.
Dialogue: 0,0:03:21.77,0:03:23.48,Default,,0,0,0,,We already could show the
Dialogue: 0,0:03:23.48,0:03:25.85,Default,,0,0,0,,compass on the map view by using
Dialogue: 0,0:03:25.85,0:03:28.78,Default,,0,0,0,,the shows compass on the map
Dialogue: 0,0:03:28.78,0:03:29.56,Default,,0,0,0,,view itself.
Dialogue: 0,0:03:29.66,0:03:31.46,Default,,0,0,0,,Which is a Boolean yes no.
Dialogue: 0,0:03:31.78,0:03:34.60,Default,,0,0,0,,But it's a bit limited and
Dialogue: 0,0:03:35.00,0:03:36.88,Default,,0,0,0,,doesn't encompass all the
Dialogue: 0,0:03:37.12,0:03:38.63,Default,,0,0,0,,features that we want to expose.
Dialogue: 0,0:03:38.91,0:03:41.33,Default,,0,0,0,,So, feature visibility is a new
Dialogue: 0,0:03:41.33,0:03:41.82,Default,,0,0,0,,enum.
Dialogue: 0,0:03:43.07,0:03:44.55,Default,,0,0,0,,It has three states.
Dialogue: 0,0:03:44.79,0:03:46.35,Default,,0,0,0,,The adaptive mode which is the
Dialogue: 0,0:03:46.35,0:03:48.39,Default,,0,0,0,,default, hidden and visible.
Dialogue: 0,0:03:49.23,0:03:51.65,Default,,0,0,0,,And if you look at them, hidden
Dialogue: 0,0:03:52.43,0:03:53.34,Default,,0,0,0,,is obvious.
Dialogue: 0,0:03:53.34,0:03:54.73,Default,,0,0,0,,It does what it says.
Dialogue: 0,0:03:55.08,0:03:57.53,Default,,0,0,0,,Visible also does what it says,
Dialogue: 0,0:03:57.53,0:04:00.68,Default,,0,0,0,,so no reason to talk much more
Dialogue: 0,0:04:00.68,0:04:01.17,Default,,0,0,0,,about it.
Dialogue: 0,0:04:01.25,0:04:04.38,Default,,0,0,0,,But the adaptive default mode do
Dialogue: 0,0:04:04.49,0:04:05.65,Default,,0,0,0,,require a little bit of
Dialogue: 0,0:04:05.65,0:04:06.32,Default,,0,0,0,,explanation.
Dialogue: 0,0:04:07.25,0:04:08.90,Default,,0,0,0,,What the adaptive mode do is
Dialogue: 0,0:04:08.90,0:04:11.01,Default,,0,0,0,,that if the user has rotated the
Dialogue: 0,0:04:11.01,0:04:13.06,Default,,0,0,0,,map a little bit away from pure
Dialogue: 0,0:04:13.06,0:04:14.57,Default,,0,0,0,,north, we display it.
Dialogue: 0,0:04:15.19,0:04:16.88,Default,,0,0,0,,And if the user rotates back to
Dialogue: 0,0:04:16.88,0:04:19.54,Default,,0,0,0,,pure north, we fade it away.
Dialogue: 0,0:04:20.55,0:04:22.39,Default,,0,0,0,,And being a button, if you tap
Dialogue: 0,0:04:22.39,0:04:24.99,Default,,0,0,0,,on it we will rotate back to
Dialogue: 0,0:04:24.99,0:04:26.83,Default,,0,0,0,,pure north and fade it away as
Dialogue: 0,0:04:26.83,0:04:27.11,Default,,0,0,0,,well.
Dialogue: 0,0:04:28.22,0:04:29.88,Default,,0,0,0,,It is tapable in all the
Dialogue: 0,0:04:29.88,0:04:32.19,Default,,0,0,0,,different visibility states, so
Dialogue: 0,0:04:33.06,0:04:34.13,Default,,0,0,0,,you can always tap it.
Dialogue: 0,0:04:34.33,0:04:35.54,Default,,0,0,0,,It will always be a button.
Dialogue: 0,0:04:35.54,0:04:37.39,Default,,0,0,0,,But it's a nice catch.
Dialogue: 0,0:04:37.79,0:04:39.43,Default,,0,0,0,,And if the user rotates away
Dialogue: 0,0:04:39.43,0:04:41.64,Default,,0,0,0,,from pure north past the little
Dialogue: 0,0:04:41.64,0:04:43.83,Default,,0,0,0,,threshold, we fade it in again.
Dialogue: 0,0:04:44.60,0:04:46.39,Default,,0,0,0,,And that is the compass button.
Dialogue: 0,0:04:47.51,0:04:49.84,Default,,0,0,0,,The last sibling, the scale
Dialogue: 0,0:04:49.84,0:04:50.12,Default,,0,0,0,,view.
Dialogue: 0,0:04:52.39,0:04:54.74,Default,,0,0,0,,Also have the visibility
Dialogue: 0,0:04:54.91,0:04:57.36,Default,,0,0,0,,property which is the same three
Dialogue: 0,0:04:57.36,0:04:59.03,Default,,0,0,0,,states in enumeration.
Dialogue: 0,0:04:59.63,0:05:01.64,Default,,0,0,0,,Hidden, self-explanatory.
Dialogue: 0,0:05:01.64,0:05:04.43,Default,,0,0,0,,Visible, also self-explanatory.
Dialogue: 0,0:05:04.93,0:05:07.94,Default,,0,0,0,,And adaptive is a new behavior
Dialogue: 0,0:05:08.06,0:05:10.64,Default,,0,0,0,,where when your user is zooming
Dialogue: 0,0:05:10.68,0:05:14.23,Default,,0,0,0,,in and out, then we display the
Dialogue: 0,0:05:14.23,0:05:14.84,Default,,0,0,0,,scale view.
Dialogue: 0,0:05:14.95,0:05:16.21,Default,,0,0,0,,Otherwise, we hide it.
Dialogue: 0,0:05:17.43,0:05:19.02,Default,,0,0,0,,The scale view has also been
Dialogue: 0,0:05:19.02,0:05:20.86,Default,,0,0,0,,available on map view previously
Dialogue: 0,0:05:20.95,0:05:23.96,Default,,0,0,0,,with the show scale property on
Dialogue: 0,0:05:24.00,0:05:24.48,Default,,0,0,0,,map view.
Dialogue: 0,0:05:25.90,0:05:28.08,Default,,0,0,0,,The default behavior for show
Dialogue: 0,0:05:28.08,0:05:30.15,Default,,0,0,0,,scale and show compass has
Dialogue: 0,0:05:30.15,0:05:31.71,Default,,0,0,0,,unfortunately been a little bit
Dialogue: 0,0:05:31.80,0:05:32.37,Default,,0,0,0,,different.
Dialogue: 0,0:05:32.78,0:05:33.96,Default,,0,0,0,,So, where the default for
Dialogue: 0,0:05:33.96,0:05:36.60,Default,,0,0,0,,showing the compass has been the
Dialogue: 0,0:05:36.60,0:05:38.45,Default,,0,0,0,,adaptive mode where we hide it,
Dialogue: 0,0:05:39.17,0:05:41.57,Default,,0,0,0,,the default for scale has been
Dialogue: 0,0:05:41.57,0:05:42.71,Default,,0,0,0,,to always show it.
Dialogue: 0,0:05:43.13,0:05:45.19,Default,,0,0,0,,And now with the scale view
Dialogue: 0,0:05:45.51,0:05:47.30,Default,,0,0,0,,being exposed to you, you have
Dialogue: 0,0:05:47.30,0:05:49.79,Default,,0,0,0,,all three options available to
Dialogue: 0,0:05:49.79,0:05:51.00,Default,,0,0,0,,use as it fits in your
Dialogue: 0,0:05:51.00,0:05:51.75,Default,,0,0,0,,applications.
Dialogue: 0,0:05:53.09,0:05:56.93,Default,,0,0,0,,There is one more property on
Dialogue: 0,0:05:56.93,0:05:57.52,Default,,0,0,0,,the scale view.
Dialogue: 0,0:05:58.33,0:05:59.92,Default,,0,0,0,,The legend alignment.
Dialogue: 0,0:06:00.34,0:06:02.64,Default,,0,0,0,,The legend alignment is related
Dialogue: 0,0:06:02.64,0:06:04.65,Default,,0,0,0,,to the also new and improved
Dialogue: 0,0:06:05.36,0:06:07.31,Default,,0,0,0,,localization support for map
Dialogue: 0,0:06:07.31,0:06:07.59,Default,,0,0,0,,view.
Dialogue: 0,0:06:08.90,0:06:11.66,Default,,0,0,0,,Previously, the compass has
Dialogue: 0,0:06:11.66,0:06:13.23,Default,,0,0,0,,always been in the upper right.
Dialogue: 0,0:06:13.76,0:06:15.67,Default,,0,0,0,,The scale has always been in the
Dialogue: 0,0:06:15.86,0:06:16.53,Default,,0,0,0,,upper left.
Dialogue: 0,0:06:17.67,0:06:19.87,Default,,0,0,0,,These are the defaults you get.
Dialogue: 0,0:06:20.43,0:06:23.98,Default,,0,0,0,,But new in iOS 11, if you
Dialogue: 0,0:06:23.98,0:06:26.31,Default,,0,0,0,,recompile against iOS 11 SDK, we
Dialogue: 0,0:06:26.75,0:06:29.61,Default,,0,0,0,,will instead fix the compass
Dialogue: 0,0:06:29.72,0:06:31.74,Default,,0,0,0,,against the trailing edge and
Dialogue: 0,0:06:31.74,0:06:33.18,Default,,0,0,0,,the scale view against the
Dialogue: 0,0:06:33.18,0:06:35.92,Default,,0,0,0,,leading edge to get that natural
Dialogue: 0,0:06:36.34,0:06:38.23,Default,,0,0,0,,look and feel for our
Dialogue: 0,0:06:38.34,0:06:39.64,Default,,0,0,0,,right-to-left users.
Dialogue: 0,0:06:40.76,0:06:42.99,Default,,0,0,0,,This, however, has one little
Dialogue: 0,0:06:43.40,0:06:46.55,Default,,0,0,0,,complication that leads us into
Dialogue: 0,0:06:46.55,0:06:48.82,Default,,0,0,0,,legend alignment property and
Dialogue: 0,0:06:48.82,0:06:49.59,Default,,0,0,0,,why we need it.
Dialogue: 0,0:06:50.66,0:06:53.84,Default,,0,0,0,,The default is leading, which
Dialogue: 0,0:06:53.84,0:06:56.88,Default,,0,0,0,,means that we will fit the
Dialogue: 0,0:06:56.88,0:07:00.80,Default,,0,0,0,,serial point of the legend to
Dialogue: 0,0:07:00.80,0:07:02.95,Default,,0,0,0,,the edge, the leading edge.
Dialogue: 0,0:07:03.59,0:07:05.09,Default,,0,0,0,,And the upper bound of the
Dialogue: 0,0:07:05.09,0:07:07.87,Default,,0,0,0,,legend is flexible and will move
Dialogue: 0,0:07:07.87,0:07:09.75,Default,,0,0,0,,as the users zoom in and out.
Dialogue: 0,0:07:10.46,0:07:12.52,Default,,0,0,0,,And the leading edge for in this
Dialogue: 0,0:07:12.52,0:07:14.38,Default,,0,0,0,,example British English would be
Dialogue: 0,0:07:14.38,0:07:15.32,Default,,0,0,0,,the left-hand side.
Dialogue: 0,0:07:15.82,0:07:18.01,Default,,0,0,0,,And for Arabic in this example
Dialogue: 0,0:07:18.01,0:07:20.08,Default,,0,0,0,,is always the right-hand side.
Dialogue: 0,0:07:20.71,0:07:22.26,Default,,0,0,0,,If you instead want to align
Dialogue: 0,0:07:22.60,0:07:25.04,Default,,0,0,0,,your scale view to the opposite
Dialogue: 0,0:07:25.16,0:07:27.52,Default,,0,0,0,,side of the screen, you need to
Dialogue: 0,0:07:27.52,0:07:29.18,Default,,0,0,0,,set the legend alignment
Dialogue: 0,0:07:29.18,0:07:32.15,Default,,0,0,0,,property to trailing and we will
Dialogue: 0,0:07:32.24,0:07:34.54,Default,,0,0,0,,flip the zero point that is
Dialogue: 0,0:07:34.54,0:07:38.63,Default,,0,0,0,,fixed and to dynamically adapt
Dialogue: 0,0:07:39.29,0:07:41.48,Default,,0,0,0,,to the localization that is
Dialogue: 0,0:07:41.48,0:07:42.21,Default,,0,0,0,,currently being used.
Dialogue: 0,0:07:42.42,0:07:43.48,Default,,0,0,0,,This makes a little bit more
Dialogue: 0,0:07:43.48,0:07:45.78,Default,,0,0,0,,sense if we look at it as the
Dialogue: 0,0:07:45.97,0:07:47.53,Default,,0,0,0,,user actually interacts with the
Dialogue: 0,0:07:47.53,0:07:47.79,Default,,0,0,0,,map.
Dialogue: 0,0:07:47.85,0:07:50.47,Default,,0,0,0,,The zero point, the zero points
Dialogue: 0,0:07:50.97,0:07:53.45,Default,,0,0,0,,are fixed but as the user starts
Dialogue: 0,0:07:53.45,0:07:55.81,Default,,0,0,0,,zooming and this animates, the
Dialogue: 0,0:07:55.81,0:07:57.86,Default,,0,0,0,,upper edge is moving.
Dialogue: 0,0:07:58.54,0:08:00.95,Default,,0,0,0,,And if that upper edge is the
Dialogue: 0,0:08:00.95,0:08:03.64,Default,,0,0,0,,closer edge to the screen, it
Dialogue: 0,0:08:03.64,0:08:05.48,Default,,0,0,0,,looks kind of silly as the zero
Dialogue: 0,0:08:05.48,0:08:06.75,Default,,0,0,0,,point in the middle of the
Dialogue: 0,0:08:06.75,0:08:08.38,Default,,0,0,0,,screen is fixed but the other
Dialogue: 0,0:08:08.38,0:08:09.17,Default,,0,0,0,,one is moving.
Dialogue: 0,0:08:09.44,0:08:13.10,Default,,0,0,0,,So, you need to change it if you
Dialogue: 0,0:08:13.17,0:08:14.99,Default,,0,0,0,,align the scale view to another
Dialogue: 0,0:08:14.99,0:08:15.47,Default,,0,0,0,,page.
Dialogue: 0,0:08:17.40,0:08:20.90,Default,,0,0,0,,In using this simple APIs, the
Dialogue: 0,0:08:21.81,0:08:25.06,Default,,0,0,0,,muted standard map and exposed
Dialogue: 0,0:08:25.22,0:08:27.78,Default,,0,0,0,,map controls, we can take this
Dialogue: 0,0:08:28.33,0:08:29.85,Default,,0,0,0,,fictional bike sharing
Dialogue: 0,0:08:29.85,0:08:32.19,Default,,0,0,0,,application that we look at
Dialogue: 0,0:08:32.19,0:08:32.57,Default,,0,0,0,,today.
Dialogue: 0,0:08:33.12,0:08:35.42,Default,,0,0,0,,It is an application that allows
Dialogue: 0,0:08:35.42,0:08:38.03,Default,,0,0,0,,us to share unicycles and
Dialogue: 0,0:08:38.03,0:08:39.77,Default,,0,0,0,,tricycles in the San Francisco
Dialogue: 0,0:08:39.77,0:08:40.17,Default,,0,0,0,,area.
Dialogue: 0,0:08:40.98,0:08:42.54,Default,,0,0,0,,We can take this application
Dialogue: 0,0:08:42.91,0:08:46.26,Default,,0,0,0,,that is a little bit dated and
Dialogue: 0,0:08:46.26,0:08:48.56,Default,,0,0,0,,making it slightly more modern.
Dialogue: 0,0:08:49.57,0:08:52.47,Default,,0,0,0,,Now, let's look at that one more
Dialogue: 0,0:08:52.47,0:08:52.77,Default,,0,0,0,,time.
Dialogue: 0,0:08:53.18,0:08:55.43,Default,,0,0,0,,It was a little bit small of a
Dialogue: 0,0:08:55.43,0:08:56.09,Default,,0,0,0,,difference maybe.
Dialogue: 0,0:08:56.09,0:08:58.40,Default,,0,0,0,,We can take the slightly dated
Dialogue: 0,0:08:58.40,0:09:01.15,Default,,0,0,0,,application and bring it to the
Dialogue: 0,0:09:01.15,0:09:01.55,Default,,0,0,0,,future.
Dialogue: 0,0:09:03.15,0:09:04.76,Default,,0,0,0,,As we see here, the big
Dialogue: 0,0:09:04.76,0:09:06.54,Default,,0,0,0,,difference might not necessarily
Dialogue: 0,0:09:06.54,0:09:08.75,Default,,0,0,0,,have been the map mode and the
Dialogue: 0,0:09:08.75,0:09:09.51,Default,,0,0,0,,controls.
Dialogue: 0,0:09:09.72,0:09:12.82,Default,,0,0,0,,The important part on your maps
Dialogue: 0,0:09:12.94,0:09:15.17,Default,,0,0,0,,in your application is your
Dialogue: 0,0:09:15.34,0:09:17.37,Default,,0,0,0,,data, your annotations,
Dialogue: 0,0:09:17.44,0:09:19.92,Default,,0,0,0,,overlays, etc. And this is what
Dialogue: 0,0:09:19.92,0:09:21.79,Default,,0,0,0,,we are going to focus on next.
Dialogue: 0,0:09:23.14,0:09:24.81,Default,,0,0,0,,The standard way to display our
Dialogue: 0,0:09:24.81,0:09:26.79,Default,,0,0,0,,annotations has been the pin
Dialogue: 0,0:09:26.79,0:09:29.14,Default,,0,0,0,,annotation view since I was two
Dialogue: 0,0:09:29.14,0:09:29.56,Default,,0,0,0,,days.
Dialogue: 0,0:09:30.21,0:09:32.15,Default,,0,0,0,,The pin annotation view comes in
Dialogue: 0,0:09:32.27,0:09:33.66,Default,,0,0,0,,two different states.
Dialogue: 0,0:09:34.02,0:09:35.75,Default,,0,0,0,,We have the normal state when we
Dialogue: 0,0:09:35.84,0:09:37.72,Default,,0,0,0,,show it on a map and it's a pin.
Dialogue: 0,0:09:38.28,0:09:40.37,Default,,0,0,0,,And the user can tap on it or we
Dialogue: 0,0:09:40.37,0:09:42.39,Default,,0,0,0,,can programmatically select it
Dialogue: 0,0:09:42.47,0:09:43.82,Default,,0,0,0,,and it becomes the selected
Dialogue: 0,0:09:43.82,0:09:46.07,Default,,0,0,0,,state with a callout and show
Dialogue: 0,0:09:46.07,0:09:47.73,Default,,0,0,0,,the title and subtitle.
Dialogue: 0,0:09:48.94,0:09:50.66,Default,,0,0,0,,There is a little drawback here
Dialogue: 0,0:09:50.66,0:09:53.24,Default,,0,0,0,,and that is we only display the
Dialogue: 0,0:09:53.32,0:09:56.65,Default,,0,0,0,,title and subtitle if the pin is
Dialogue: 0,0:09:56.65,0:09:57.29,Default,,0,0,0,,selected.
Dialogue: 0,0:09:57.95,0:10:01.48,Default,,0,0,0,,So, as a user, you have to tap
Dialogue: 0,0:10:01.48,0:10:02.76,Default,,0,0,0,,on everything to see what they
Dialogue: 0,0:10:02.76,0:10:04.86,Default,,0,0,0,,actually are, which is a little
Dialogue: 0,0:10:04.86,0:10:05.74,Default,,0,0,0,,bit cumbersome.
Dialogue: 0,0:10:06.09,0:10:08.50,Default,,0,0,0,,So, as you saw in Maps app from
Dialogue: 0,0:10:08.57,0:10:12.54,Default,,0,0,0,,iOS 10, we use something that
Dialogue: 0,0:10:12.54,0:10:14.01,Default,,0,0,0,,looks a little bit like this
Dialogue: 0,0:10:14.01,0:10:14.53,Default,,0,0,0,,instead.
Dialogue: 0,0:10:15.02,0:10:17.36,Default,,0,0,0,,And with iOS 11, it's available
Dialogue: 0,0:10:17.36,0:10:18.14,Default,,0,0,0,,also to you.
Dialogue: 0,0:10:18.36,0:10:18.81,Default,,0,0,0,,We call it the
Dialogue: 0,0:10:18.81,0:10:20.05,Default,,0,0,0,,MarkerAnnotationView.
Dialogue: 0,0:10:21.05,0:10:23.69,Default,,0,0,0,,It is a AnnotationView subclass,
Dialogue: 0,0:10:23.81,0:10:25.56,Default,,0,0,0,,so it's a sibling to the pin
Dialogue: 0,0:10:25.56,0:10:26.35,Default,,0,0,0,,annotation view.
Dialogue: 0,0:10:27.18,0:10:28.63,Default,,0,0,0,,And we think you're going to
Dialogue: 0,0:10:28.63,0:10:30.73,Default,,0,0,0,,like it so much that it's the
Dialogue: 0,0:10:30.73,0:10:33.54,Default,,0,0,0,,new default for iOS and tvOS.
Dialogue: 0,0:10:34.15,0:10:36.05,Default,,0,0,0,,So, if you don't implement the
Dialogue: 0,0:10:36.05,0:10:37.58,Default,,0,0,0,,delegate callbacks for creating
Dialogue: 0,0:10:37.58,0:10:40.22,Default,,0,0,0,,them yourself, we will give you
Dialogue: 0,0:10:40.22,0:10:41.89,Default,,0,0,0,,a MarkerAnnotationView as
Dialogue: 0,0:10:41.89,0:10:44.04,Default,,0,0,0,,default if you recompile against
Dialogue: 0,0:10:44.47,0:10:45.27,Default,,0,0,0,,iOS 11.
Dialogue: 0,0:10:46.60,0:10:49.01,Default,,0,0,0,,The MarkerAnnotationView also
Dialogue: 0,0:10:49.10,0:10:50.55,Default,,0,0,0,,have two states.
Dialogue: 0,0:10:50.77,0:10:52.89,Default,,0,0,0,,We have the normal state which
Dialogue: 0,0:10:52.89,0:10:55.17,Default,,0,0,0,,will try to display the title as
Dialogue: 0,0:10:55.17,0:10:58.25,Default,,0,0,0,,well below the marker if there
Dialogue: 0,0:10:58.25,0:10:59.08,Default,,0,0,0,,is room on the map.
Dialogue: 0,0:10:59.73,0:11:01.50,Default,,0,0,0,,We have the selected state.
Dialogue: 0,0:11:01.74,0:11:02.82,Default,,0,0,0,,And in the selected state, we
Dialogue: 0,0:11:02.82,0:11:05.77,Default,,0,0,0,,also show the subtitle if there
Dialogue: 0,0:11:05.77,0:11:06.56,Default,,0,0,0,,is room for it.
Dialogue: 0,0:11:07.03,0:11:09.99,Default,,0,0,0,,And that way the user will at
Dialogue: 0,0:11:09.99,0:11:11.60,Default,,0,0,0,,the glance at the map, see what
Dialogue: 0,0:11:11.60,0:11:13.75,Default,,0,0,0,,are all of these data points
Dialogue: 0,0:11:14.01,0:11:15.58,Default,,0,0,0,,without having to tap on them
Dialogue: 0,0:11:15.78,0:11:16.87,Default,,0,0,0,,one at a time.
Dialogue: 0,0:11:17.63,0:11:21.64,Default,,0,0,0,,Now, there is one more thing.
Dialogue: 0,0:11:21.64,0:11:23.07,Default,,0,0,0,,We have to go back to the pin
Dialogue: 0,0:11:23.42,0:11:25.11,Default,,0,0,0,,one more time.
Dialogue: 0,0:11:25.65,0:11:27.59,Default,,0,0,0,,If we look at this pin and the
Dialogue: 0,0:11:27.59,0:11:30.23,Default,,0,0,0,,callout, there is one small
Dialogue: 0,0:11:30.23,0:11:32.31,Default,,0,0,0,,little thing in the callout.
Dialogue: 0,0:11:32.72,0:11:34.71,Default,,0,0,0,,You can add accessory views to
Dialogue: 0,0:11:34.71,0:11:34.98,Default,,0,0,0,,them.
Dialogue: 0,0:11:35.20,0:11:36.74,Default,,0,0,0,,You can add detail views to
Dialogue: 0,0:11:36.74,0:11:36.94,Default,,0,0,0,,them.
Dialogue: 0,0:11:36.94,0:11:37.93,Default,,0,0,0,,You can configure them.
Dialogue: 0,0:11:38.74,0:11:41.60,Default,,0,0,0,,And MarkerAnnotationView is an
Dialogue: 0,0:11:41.60,0:11:42.39,Default,,0,0,0,,annotation view.
Dialogue: 0,0:11:42.39,0:11:45.00,Default,,0,0,0,,So, all the API from annotation
Dialogue: 0,0:11:45.00,0:11:47.01,Default,,0,0,0,,views are supported for
Dialogue: 0,0:11:47.01,0:11:48.93,Default,,0,0,0,,MarkerAnnotationViews as well.
Dialogue: 0,0:11:49.71,0:11:53.57,Default,,0,0,0,,And if you add a in this case a
Dialogue: 0,0:11:53.57,0:11:55.37,Default,,0,0,0,,right accessory view to the
Dialogue: 0,0:11:55.37,0:11:58.22,Default,,0,0,0,,callout, then there is no
Dialogue: 0,0:11:58.22,0:12:01.31,Default,,0,0,0,,natural location within the big
Dialogue: 0,0:12:01.31,0:12:03.27,Default,,0,0,0,,marker where you can display
Dialogue: 0,0:12:03.27,0:12:03.87,Default,,0,0,0,,that data.
Dialogue: 0,0:12:04.26,0:12:06.12,Default,,0,0,0,,And it's even more obvious if we
Dialogue: 0,0:12:06.12,0:12:07.57,Default,,0,0,0,,think about the detail view
Dialogue: 0,0:12:07.81,0:12:10.73,Default,,0,0,0,,where you can put endless amount
Dialogue: 0,0:12:10.73,0:12:12.91,Default,,0,0,0,,of data, a lot of data, a full
Dialogue: 0,0:12:13.08,0:12:15.45,Default,,0,0,0,,placecard of your item if you
Dialogue: 0,0:12:15.45,0:12:15.80,Default,,0,0,0,,want.
Dialogue: 0,0:12:16.22,0:12:18.81,Default,,0,0,0,,So, what do we do in that case?
Dialogue: 0,0:12:19.81,0:12:23.46,Default,,0,0,0,,We have to use a third state of
Dialogue: 0,0:12:23.46,0:12:24.93,Default,,0,0,0,,the MarkerAnnotationView.
Dialogue: 0,0:12:25.43,0:12:27.17,Default,,0,0,0,,So, in practice, your
Dialogue: 0,0:12:27.17,0:12:28.97,Default,,0,0,0,,MarkerAnnotationViews have three
Dialogue: 0,0:12:28.97,0:12:29.53,Default,,0,0,0,,states.
Dialogue: 0,0:12:30.00,0:12:31.89,Default,,0,0,0,,We have the normal state when
Dialogue: 0,0:12:31.89,0:12:32.79,Default,,0,0,0,,it's unselected.
Dialogue: 0,0:12:33.28,0:12:34.43,Default,,0,0,0,,We have the selected state.
Dialogue: 0,0:12:34.87,0:12:36.44,Default,,0,0,0,,And the selected with callout
Dialogue: 0,0:12:36.44,0:12:38.35,Default,,0,0,0,,state which we will use if you
Dialogue: 0,0:12:38.35,0:12:40.12,Default,,0,0,0,,configure the marker annotation
Dialogue: 0,0:12:40.46,0:12:42.36,Default,,0,0,0,,with views that cannot be
Dialogue: 0,0:12:42.39,0:12:44.51,Default,,0,0,0,,displayed in the marker alone.
Dialogue: 0,0:12:45.74,0:12:47.73,Default,,0,0,0,,And with that, let's look at the
Dialogue: 0,0:12:47.73,0:12:48.10,Default,,0,0,0,,code.
Dialogue: 0,0:12:48.50,0:12:49.72,Default,,0,0,0,,This is the
Dialogue: 0,0:12:49.72,0:12:51.45,Default,,0,0,0,,MarkerAnnotationView.
Dialogue: 0,0:12:52.79,0:12:54.89,Default,,0,0,0,,The MarkerAnnotationView first
Dialogue: 0,0:12:54.89,0:12:56.94,Default,,0,0,0,,and foremost you have the titles
Dialogue: 0,0:12:57.32,0:12:59.07,Default,,0,0,0,,and you can configure the titles
Dialogue: 0,0:12:59.07,0:13:00.79,Default,,0,0,0,,that are displayed below it.
Dialogue: 0,0:13:01.21,0:13:02.98,Default,,0,0,0,,And notice that we yet again see
Dialogue: 0,0:13:02.98,0:13:04.76,Default,,0,0,0,,this three-state enumeration,
Dialogue: 0,0:13:04.85,0:13:06.35,Default,,0,0,0,,the feature visibility.
Dialogue: 0,0:13:06.99,0:13:10.74,Default,,0,0,0,,Because you can configure it in
Dialogue: 0,0:13:10.74,0:13:12.22,Default,,0,0,0,,many different ways, not only
Dialogue: 0,0:13:12.22,0:13:13.29,Default,,0,0,0,,visible and hidden.
Dialogue: 0,0:13:13.67,0:13:14.95,Default,,0,0,0,,The hidden obvious.
Dialogue: 0,0:13:14.95,0:13:16.15,Default,,0,0,0,,We don't show it.
Dialogue: 0,0:13:16.83,0:13:19.39,Default,,0,0,0,,The visible is also obvious.
Dialogue: 0,0:13:19.44,0:13:21.26,Default,,0,0,0,,We will always try to display
Dialogue: 0,0:13:21.58,0:13:23.13,Default,,0,0,0,,the title and the subtitle if
Dialogue: 0,0:13:23.13,0:13:24.16,Default,,0,0,0,,you configure them to be
Dialogue: 0,0:13:24.16,0:13:24.65,Default,,0,0,0,,visible.
Dialogue: 0,0:13:25.26,0:13:27.38,Default,,0,0,0,,Do note, I say we will try.
Dialogue: 0,0:13:28.53,0:13:31.45,Default,,0,0,0,,If the map is dense with data,
Dialogue: 0,0:13:31.87,0:13:35.17,Default,,0,0,0,,we will opt to hide the titles
Dialogue: 0,0:13:35.69,0:13:37.73,Default,,0,0,0,,to unclutter the map and display
Dialogue: 0,0:13:37.73,0:13:39.37,Default,,0,0,0,,more information as needed.
Dialogue: 0,0:13:39.46,0:13:41.37,Default,,0,0,0,,So, we will display them most of
Dialogue: 0,0:13:41.37,0:13:43.40,Default,,0,0,0,,the time but they can be hidden.
Dialogue: 0,0:13:43.96,0:13:46.69,Default,,0,0,0,,And in the last visibility we
Dialogue: 0,0:13:46.69,0:13:48.23,Default,,0,0,0,,have is the adaptive mode.
Dialogue: 0,0:13:48.56,0:13:49.98,Default,,0,0,0,,The adaptive mode is also the
Dialogue: 0,0:13:49.98,0:13:52.72,Default,,0,0,0,,default mode which gives you
Dialogue: 0,0:13:53.91,0:13:56.38,Default,,0,0,0,,that for free option for the
Dialogue: 0,0:13:56.38,0:13:58.79,Default,,0,0,0,,subtitle, especially where we
Dialogue: 0,0:13:58.79,0:14:01.21,Default,,0,0,0,,will hide it when it's in normal
Dialogue: 0,0:14:01.21,0:14:03.48,Default,,0,0,0,,state and display it when you're
Dialogue: 0,0:14:03.48,0:14:04.52,Default,,0,0,0,,in selected state.
Dialogue: 0,0:14:05.99,0:14:08.22,Default,,0,0,0,,So, that is the title below the
Dialogue: 0,0:14:08.22,0:14:08.79,Default,,0,0,0,,marker.
Dialogue: 0,0:14:09.01,0:14:10.23,Default,,0,0,0,,Next up we have the markers
Dialogue: 0,0:14:10.23,0:14:11.85,Default,,0,0,0,,themselves that you can also
Dialogue: 0,0:14:11.85,0:14:12.48,Default,,0,0,0,,configure.
Dialogue: 0,0:14:13.42,0:14:14.70,Default,,0,0,0,,First with the color.
Dialogue: 0,0:14:15.12,0:14:16.66,Default,,0,0,0,,So, there's the marker tint
Dialogue: 0,0:14:16.66,0:14:18.62,Default,,0,0,0,,color and the glyph tint color.
Dialogue: 0,0:14:19.13,0:14:22.82,Default,,0,0,0,,The marker color is the color of
Dialogue: 0,0:14:22.82,0:14:24.09,Default,,0,0,0,,the marker itself.
Dialogue: 0,0:14:24.56,0:14:26.54,Default,,0,0,0,,It is a normal UI color.
Dialogue: 0,0:14:26.99,0:14:28.81,Default,,0,0,0,,The default value is a nil value
Dialogue: 0,0:14:28.81,0:14:30.22,Default,,0,0,0,,which will pick a system
Dialogue: 0,0:14:30.22,0:14:32.77,Default,,0,0,0,,default, which is currently a
Dialogue: 0,0:14:33.06,0:14:34.14,Default,,0,0,0,,slightly reddish color.
Dialogue: 0,0:14:34.69,0:14:35.84,Default,,0,0,0,,You can set it to any other
Dialogue: 0,0:14:35.84,0:14:37.87,Default,,0,0,0,,color you want, for example why
Dialogue: 0,0:14:37.87,0:14:38.61,Default,,0,0,0,,not orange.
Dialogue: 0,0:14:39.20,0:14:41.13,Default,,0,0,0,,Do note that we call it marker
Dialogue: 0,0:14:41.48,0:14:43.58,Default,,0,0,0,,tint color, not just color.
Dialogue: 0,0:14:43.91,0:14:45.91,Default,,0,0,0,,And that is because the color
Dialogue: 0,0:14:45.91,0:14:47.96,Default,,0,0,0,,you provide might not be the
Dialogue: 0,0:14:47.96,0:14:50.67,Default,,0,0,0,,color, the exact color that we
Dialogue: 0,0:14:50.82,0:14:51.70,Default,,0,0,0,,use in the end.
Dialogue: 0,0:14:51.70,0:14:54.06,Default,,0,0,0,,We may apply some visual effects
Dialogue: 0,0:14:54.37,0:14:55.88,Default,,0,0,0,,on the color to make it look
Dialogue: 0,0:14:55.88,0:14:56.43,Default,,0,0,0,,nicer.
Dialogue: 0,0:14:56.82,0:14:59.90,Default,,0,0,0,,So, it's a tint that you're
Dialogue: 0,0:14:59.90,0:15:00.38,Default,,0,0,0,,applying.
Dialogue: 0,0:15:00.75,0:15:02.39,Default,,0,0,0,,And you can even use the new in
Dialogue: 0,0:15:02.48,0:15:05.67,Default,,0,0,0,,iOS asset catalog name colors of
Dialogue: 0,0:15:05.67,0:15:06.13,Default,,0,0,0,,course.
Dialogue: 0,0:15:06.57,0:15:09.67,Default,,0,0,0,,And the same thing for the glyph
Dialogue: 0,0:15:10.09,0:15:12.21,Default,,0,0,0,,tint color which is instead the
Dialogue: 0,0:15:12.25,0:15:15.07,Default,,0,0,0,,color of the glyph within the
Dialogue: 0,0:15:15.07,0:15:18.32,Default,,0,0,0,,marker which is defaulting to
Dialogue: 0,0:15:18.32,0:15:19.99,Default,,0,0,0,,white pin in this case.
Dialogue: 0,0:15:22.88,0:15:25.16,Default,,0,0,0,,Speaking of the glyph.
Dialogue: 0,0:15:25.34,0:15:27.12,Default,,0,0,0,,You want to configure also what
Dialogue: 0,0:15:27.12,0:15:29.27,Default,,0,0,0,,is inside of the marker, the
Dialogue: 0,0:15:29.27,0:15:30.59,Default,,0,0,0,,little glyph in it.
Dialogue: 0,0:15:30.94,0:15:32.89,Default,,0,0,0,,And the easiest way to do it is
Dialogue: 0,0:15:33.37,0:15:35.28,Default,,0,0,0,,by using the glyph text
Dialogue: 0,0:15:35.41,0:15:35.86,Default,,0,0,0,,property.
Dialogue: 0,0:15:36.59,0:15:37.69,Default,,0,0,0,,It's a simple string.
Dialogue: 0,0:15:38.49,0:15:39.66,Default,,0,0,0,,We see a pattern here.
Dialogue: 0,0:15:39.66,0:15:40.91,Default,,0,0,0,,It defaults to nil.
Dialogue: 0,0:15:41.47,0:15:42.96,Default,,0,0,0,,And when it defaults to nil, we
Dialogue: 0,0:15:42.96,0:15:44.96,Default,,0,0,0,,pick a system default which is a
Dialogue: 0,0:15:44.96,0:15:45.41,Default,,0,0,0,,pin.
Dialogue: 0,0:15:46.37,0:15:47.61,Default,,0,0,0,,It's a pin in a balloon.
Dialogue: 0,0:15:47.61,0:15:48.89,Default,,0,0,0,,It might be dangerous, but it
Dialogue: 0,0:15:48.89,0:15:49.37,Default,,0,0,0,,works.
Dialogue: 0,0:15:50.24,0:15:52.38,Default,,0,0,0,,And you can set it to any text
Dialogue: 0,0:15:52.38,0:15:52.80,Default,,0,0,0,,you want.
Dialogue: 0,0:15:52.80,0:15:54.71,Default,,0,0,0,,You might want to grade your
Dialogue: 0,0:15:54.71,0:15:55.55,Default,,0,0,0,,annotations.
Dialogue: 0,0:15:55.91,0:15:58.12,Default,,0,0,0,,You can even use the characters
Dialogue: 0,0:15:58.12,0:16:00.00,Default,,0,0,0,,or the Unicode standard to get
Dialogue: 0,0:16:00.00,0:16:01.53,Default,,0,0,0,,vector graphics for free.
Dialogue: 0,0:16:02.50,0:16:05.30,Default,,0,0,0,,Now, glyph text is a string.
Dialogue: 0,0:16:05.30,0:16:07.47,Default,,0,0,0,,So, you can set it to any text
Dialogue: 0,0:16:07.47,0:16:07.91,Default,,0,0,0,,you want.
Dialogue: 0,0:16:07.91,0:16:09.39,Default,,0,0,0,,If you want, you can put the old
Dialogue: 0,0:16:09.93,0:16:12.77,Default,,0,0,0,,iliad into it and we will try to
Dialogue: 0,0:16:12.77,0:16:13.31,Default,,0,0,0,,render it.
Dialogue: 0,0:16:13.72,0:16:16.24,Default,,0,0,0,,But it will look silly.
Dialogue: 0,0:16:16.43,0:16:18.07,Default,,0,0,0,,We will try to shrink down the
Dialogue: 0,0:16:18.07,0:16:21.21,Default,,0,0,0,,text as much as possible but the
Dialogue: 0,0:16:21.21,0:16:23.14,Default,,0,0,0,,user will not really be able to
Dialogue: 0,0:16:23.14,0:16:24.58,Default,,0,0,0,,read what is on screen.
Dialogue: 0,0:16:24.82,0:16:26.92,Default,,0,0,0,,So, as a rule of thumb, please
Dialogue: 0,0:16:26.98,0:16:29.44,Default,,0,0,0,,try to limit yourself to around
Dialogue: 0,0:16:29.97,0:16:31.38,Default,,0,0,0,,two to three characters.
Dialogue: 0,0:16:32.68,0:16:36.03,Default,,0,0,0,,And not everything though his
Dialogue: 0,0:16:36.03,0:16:39.19,Default,,0,0,0,,representable by characters or
Dialogue: 0,0:16:39.26,0:16:39.79,Default,,0,0,0,,text.
Dialogue: 0,0:16:40.00,0:16:41.82,Default,,0,0,0,,Not even with the full Unicode
Dialogue: 0,0:16:41.82,0:16:43.74,Default,,0,0,0,,standard being expanded every
Dialogue: 0,0:16:43.74,0:16:44.11,Default,,0,0,0,,year.
Dialogue: 0,0:16:44.35,0:16:46.26,Default,,0,0,0,,So, you might want to use your
Dialogue: 0,0:16:46.26,0:16:47.95,Default,,0,0,0,,own image graphics.
Dialogue: 0,0:16:48.13,0:16:49.90,Default,,0,0,0,,And for that we have glyph image
Dialogue: 0,0:16:50.21,0:16:51.61,Default,,0,0,0,,and the selected glyph image
Dialogue: 0,0:16:51.71,0:16:52.30,Default,,0,0,0,,properties.
Dialogue: 0,0:16:53.10,0:16:55.98,Default,,0,0,0,,The glyph image property is the
Dialogue: 0,0:16:55.98,0:16:58.15,Default,,0,0,0,,only property that you probably
Dialogue: 0,0:16:58.15,0:17:00.01,Default,,0,0,0,,will want to use most of the
Dialogue: 0,0:17:00.01,0:17:00.43,Default,,0,0,0,,time.
Dialogue: 0,0:17:00.77,0:17:03.58,Default,,0,0,0,,And you just give it an image
Dialogue: 0,0:17:03.86,0:17:05.74,Default,,0,0,0,,that is 40 x 40 points.
Dialogue: 0,0:17:06.27,0:17:08.77,Default,,0,0,0,,And when, which is used in the
Dialogue: 0,0:17:08.77,0:17:09.55,Default,,0,0,0,,selected state.
Dialogue: 0,0:17:10.20,0:17:11.96,Default,,0,0,0,,And then for the normal state,
Dialogue: 0,0:17:11.96,0:17:13.77,Default,,0,0,0,,we will shrink it down to 20 x
Dialogue: 0,0:17:13.77,0:17:14.16,Default,,0,0,0,,20.
Dialogue: 0,0:17:15.02,0:17:16.55,Default,,0,0,0,,Which works most of the time,
Dialogue: 0,0:17:16.93,0:17:18.92,Default,,0,0,0,,unless the graphics you have is
Dialogue: 0,0:17:18.92,0:17:21.16,Default,,0,0,0,,quite detailed, since then you
Dialogue: 0,0:17:21.42,0:17:23.40,Default,,0,0,0,,can get graphical scaling
Dialogue: 0,0:17:23.40,0:17:25.27,Default,,0,0,0,,artifacts as we scale it down.
Dialogue: 0,0:17:25.54,0:17:27.78,Default,,0,0,0,,And if that is the case, you
Dialogue: 0,0:17:27.78,0:17:29.10,Default,,0,0,0,,need to use both of the
Dialogue: 0,0:17:29.10,0:17:29.72,Default,,0,0,0,,properties.
Dialogue: 0,0:17:29.90,0:17:31.91,Default,,0,0,0,,So, for the small glyph image,
Dialogue: 0,0:17:31.91,0:17:33.41,Default,,0,0,0,,you can provide the smaller 20 x
Dialogue: 0,0:17:33.41,0:17:33.83,Default,,0,0,0,,20.
Dialogue: 0,0:17:34.39,0:17:35.88,Default,,0,0,0,,And for the larger one you give
Dialogue: 0,0:17:35.88,0:17:38.09,Default,,0,0,0,,it the bigger 40 x 40.
Dialogue: 0,0:17:38.43,0:17:39.84,Default,,0,0,0,,We will cross fade between the
Dialogue: 0,0:17:39.84,0:17:42.02,Default,,0,0,0,,two and you get that crispiness,
Dialogue: 0,0:17:42.27,0:17:44.42,Default,,0,0,0,,both in the normal and selective
Dialogue: 0,0:17:45.62,0:17:45.78,Default,,0,0,0,,states.
Dialogue: 0,0:17:45.95,0:17:49.61,Default,,0,0,0,,And using that, we can get this
Dialogue: 0,0:17:49.74,0:17:51.68,Default,,0,0,0,,much, much more modern-looking
Dialogue: 0,0:17:51.68,0:17:52.46,Default,,0,0,0,,application.
Dialogue: 0,0:17:53.06,0:17:55.85,Default,,0,0,0,,Now, this application though is,
Dialogue: 0,0:17:56.63,0:17:58.21,Default,,0,0,0,,if I have to say so, a little
Dialogue: 0,0:17:58.21,0:17:58.89,Default,,0,0,0,,bit cluttered.
Dialogue: 0,0:17:59.39,0:18:00.77,Default,,0,0,0,,You might want to clean it up
Dialogue: 0,0:18:00.77,0:18:02.85,Default,,0,0,0,,and have it easier to look at
Dialogue: 0,0:18:02.85,0:18:04.70,Default,,0,0,0,,and find what you actually want.
Dialogue: 0,0:18:05.02,0:18:06.22,Default,,0,0,0,,You want it to look a little bit
Dialogue: 0,0:18:06.22,0:18:07.17,Default,,0,0,0,,more like this.
Dialogue: 0,0:18:07.55,0:18:10.42,Default,,0,0,0,,And there is one single property
Dialogue: 0,0:18:11.28,0:18:13.08,Default,,0,0,0,,that we add in iOS 11 to do
Dialogue: 0,0:18:13.08,0:18:13.35,Default,,0,0,0,,this.
Dialogue: 0,0:18:13.66,0:18:15.79,Default,,0,0,0,,We call it the display priority
Dialogue: 0,0:18:16.53,0:18:19.57,Default,,0,0,0,,where we can tell annotation
Dialogue: 0,0:18:19.57,0:18:22.78,Default,,0,0,0,,views what priority are you in
Dialogue: 0,0:18:22.78,0:18:24.17,Default,,0,0,0,,order to display on the screen.
Dialogue: 0,0:18:24.87,0:18:27.14,Default,,0,0,0,,The feature display priority is
Dialogue: 0,0:18:27.67,0:18:29.30,Default,,0,0,0,,modeled after the layout
Dialogue: 0,0:18:29.53,0:18:31.89,Default,,0,0,0,,constraint priorities from UIKit
Dialogue: 0,0:18:32.18,0:18:32.80,Default,,0,0,0,,and MapKit.
Dialogue: 0,0:18:33.87,0:18:35.29,Default,,0,0,0,,Which means it's a floating
Dialogue: 0,0:18:35.29,0:18:37.89,Default,,0,0,0,,point range between a 0 and 1000
Dialogue: 0,0:18:38.36,0:18:40.00,Default,,0,0,0,,where 1000 is the required
Dialogue: 0,0:18:40.00,0:18:40.51,Default,,0,0,0,,value.
Dialogue: 0,0:18:40.83,0:18:42.86,Default,,0,0,0,,And if we look at what they do,
Dialogue: 0,0:18:43.56,0:18:45.50,Default,,0,0,0,,required means opt out.
Dialogue: 0,0:18:46.01,0:18:48.31,Default,,0,0,0,,Do not occlude or hide anything
Dialogue: 0,0:18:48.31,0:18:50.17,Default,,0,0,0,,as the annotation views overlap.
Dialogue: 0,0:18:50.53,0:18:51.24,Default,,0,0,0,,Do nothing.
Dialogue: 0,0:18:51.60,0:18:52.88,Default,,0,0,0,,But if you set the display
Dialogue: 0,0:18:52.88,0:18:54.55,Default,,0,0,0,,priority property to anything
Dialogue: 0,0:18:54.55,0:18:56.14,Default,,0,0,0,,else, like the provider
Dialogue: 0,0:18:56.14,0:18:56.89,Default,,0,0,0,,defaults.
Dialogue: 0,0:18:57.23,0:19:00.83,Default,,0,0,0,,Default high which is 750 and
Dialogue: 0,0:19:00.83,0:19:03.44,Default,,0,0,0,,default low 250, yes, that's the
Dialogue: 0,0:19:03.44,0:19:04.38,Default,,0,0,0,,layout constraints.
Dialogue: 0,0:19:05.20,0:19:07.88,Default,,0,0,0,,Then, you get these annotations
Dialogue: 0,0:19:08.21,0:19:08.58,Default,,0,0,0,,hiding.
Dialogue: 0,0:19:09.14,0:19:14.11,Default,,0,0,0,,And you can get from the, oops.
Dialogue: 0,0:19:14.99,0:19:16.26,Default,,0,0,0,,That is not what I meant.
Dialogue: 0,0:19:16.76,0:19:18.65,Default,,0,0,0,,So, being a floating point value
Dialogue: 0,0:19:18.98,0:19:21.15,Default,,0,0,0,,from 0 to 1000 means that you
Dialogue: 0,0:19:21.15,0:19:23.44,Default,,0,0,0,,can use it for nice things.
Dialogue: 0,0:19:24.46,0:19:26.36,Default,,0,0,0,,If you for example map your
Dialogue: 0,0:19:26.36,0:19:27.87,Default,,0,0,0,,display priority to the
Dialogue: 0,0:19:27.97,0:19:29.72,Default,,0,0,0,,popularity of your items.
Dialogue: 0,0:19:29.72,0:19:31.92,Default,,0,0,0,,So, you have a high, a very
Dialogue: 0,0:19:31.92,0:19:33.50,Default,,0,0,0,,popular item get the high
Dialogue: 0,0:19:33.50,0:19:35.62,Default,,0,0,0,,display priority and a less
Dialogue: 0,0:19:35.62,0:19:37.81,Default,,0,0,0,,popular item get a lower display
Dialogue: 0,0:19:37.81,0:19:39.67,Default,,0,0,0,,priority, that would mean as the
Dialogue: 0,0:19:39.67,0:19:41.24,Default,,0,0,0,,user is zoomed out on a high
Dialogue: 0,0:19:41.24,0:19:42.46,Default,,0,0,0,,level and looking at the whole
Dialogue: 0,0:19:42.46,0:19:45.00,Default,,0,0,0,,city, the most popular items are
Dialogue: 0,0:19:45.00,0:19:46.69,Default,,0,0,0,,the one that is remaining on
Dialogue: 0,0:19:46.69,0:19:47.64,Default,,0,0,0,,screen and visible.
Dialogue: 0,0:19:48.02,0:19:50.61,Default,,0,0,0,,And as the user zooms in, you
Dialogue: 0,0:19:50.61,0:19:52.52,Default,,0,0,0,,see also all the other data.
Dialogue: 0,0:19:53.17,0:19:55.43,Default,,0,0,0,,Which allows you to go from this
Dialogue: 0,0:19:55.87,0:19:58.08,Default,,0,0,0,,very cluttered map to something
Dialogue: 0,0:19:58.08,0:19:59.35,Default,,0,0,0,,that is a lot cleaner.
Dialogue: 0,0:20:00.70,0:20:03.01,Default,,0,0,0,,Now, if you do the popularity
Dialogue: 0,0:20:03.01,0:20:04.97,Default,,0,0,0,,thing and hide all the data,
Dialogue: 0,0:20:04.97,0:20:07.77,Default,,0,0,0,,then yes all the data is hidden.
Dialogue: 0,0:20:07.99,0:20:09.74,Default,,0,0,0,,So, the user will have to zoom
Dialogue: 0,0:20:09.74,0:20:11.44,Default,,0,0,0,,in a bit to actually find it and
Dialogue: 0,0:20:11.44,0:20:13.96,Default,,0,0,0,,then zoom out again to see the
Dialogue: 0,0:20:13.96,0:20:14.54,Default,,0,0,0,,rest of it.
Dialogue: 0,0:20:14.96,0:20:17.76,Default,,0,0,0,,And there is a better way to do
Dialogue: 0,0:20:17.76,0:20:17.90,Default,,0,0,0,,it.
Dialogue: 0,0:20:17.90,0:20:20.74,Default,,0,0,0,,What we could do is just cluster
Dialogue: 0,0:20:20.83,0:20:23.91,Default,,0,0,0,,the annotations and say that
Dialogue: 0,0:20:23.91,0:20:25.95,Default,,0,0,0,,yes, here we have 11 more and
Dialogue: 0,0:20:25.95,0:20:27.04,Default,,0,0,0,,here is 8 more.
Dialogue: 0,0:20:27.28,0:20:28.58,Default,,0,0,0,,You don't have to zoom in.
Dialogue: 0,0:20:28.84,0:20:29.56,Default,,0,0,0,,Well show you.
Dialogue: 0,0:20:30.29,0:20:32.99,Default,,0,0,0,,And the API for this is just as
Dialogue: 0,0:20:32.99,0:20:35.85,Default,,0,0,0,,simple as the API for display
Dialogue: 0,0:20:35.85,0:20:36.35,Default,,0,0,0,,priority.
Dialogue: 0,0:20:36.64,0:20:38.05,Default,,0,0,0,,We call it a clustering
Dialogue: 0,0:20:38.05,0:20:38.99,Default,,0,0,0,,identifier.
Dialogue: 0,0:20:39.56,0:20:41.30,Default,,0,0,0,,It is a string, so you can set
Dialogue: 0,0:20:41.30,0:20:42.32,Default,,0,0,0,,it to anything you want.
Dialogue: 0,0:20:42.94,0:20:44.90,Default,,0,0,0,,It is modeled after the reuse
Dialogue: 0,0:20:44.98,0:20:45.73,Default,,0,0,0,,identifier.
Dialogue: 0,0:20:45.73,0:20:47.63,Default,,0,0,0,,Both annotations views, your
Dialogue: 0,0:20:47.63,0:20:49.40,Default,,0,0,0,,table view cells and collection
Dialogue: 0,0:20:49.40,0:20:50.00,Default,,0,0,0,,view cells.
Dialogue: 0,0:20:50.40,0:20:52.26,Default,,0,0,0,,So, that you can have groups.
Dialogue: 0,0:20:52.76,0:20:54.77,Default,,0,0,0,,In the case of our application,
Dialogue: 0,0:20:55.07,0:20:57.25,Default,,0,0,0,,the bike sharing application, it
Dialogue: 0,0:20:57.28,0:20:59.29,Default,,0,0,0,,might be that we want to cluster
Dialogue: 0,0:20:59.48,0:21:02.84,Default,,0,0,0,,unicycles with unicycles and
Dialogue: 0,0:21:02.84,0:21:05.04,Default,,0,0,0,,tricycles with tricycles, but we
Dialogue: 0,0:21:05.04,0:21:06.36,Default,,0,0,0,,don't want to mix them together.
Dialogue: 0,0:21:06.79,0:21:09.18,Default,,0,0,0,,And if you can achieve that but
Dialogue: 0,0:21:09.18,0:21:11.19,Default,,0,0,0,,give them those annotation views
Dialogue: 0,0:21:11.40,0:21:12.95,Default,,0,0,0,,different but distinct
Dialogue: 0,0:21:13.20,0:21:14.72,Default,,0,0,0,,clustering identifiers.
Dialogue: 0,0:21:15.28,0:21:17.48,Default,,0,0,0,,So, as you use it, the default
Dialogue: 0,0:21:17.48,0:21:18.01,Default,,0,0,0,,tis nil.
Dialogue: 0,0:21:18.65,0:21:20.24,Default,,0,0,0,,If you set it to nil, you opt
Dialogue: 0,0:21:20.24,0:21:21.46,Default,,0,0,0,,out and nothing happens.
Dialogue: 0,0:21:22.21,0:21:23.39,Default,,0,0,0,,And if you set it to any other
Dialogue: 0,0:21:23.39,0:21:26.20,Default,,0,0,0,,string, all annotations sharing
Dialogue: 0,0:21:26.20,0:21:27.92,Default,,0,0,0,,the same annotation view are
Dialogue: 0,0:21:27.92,0:21:29.72,Default,,0,0,0,,illegible for being clustered
Dialogue: 0,0:21:30.07,0:21:34.29,Default,,0,0,0,,into a group as they overlap.
Dialogue: 0,0:21:34.29,0:21:36.87,Default,,0,0,0,,This is a very powerful and
Dialogue: 0,0:21:36.87,0:21:38.82,Default,,0,0,0,,beautiful feature but a little
Dialogue: 0,0:21:38.82,0:21:40.38,Default,,0,0,0,,bit hard to explain.
Dialogue: 0,0:21:40.54,0:21:43.04,Default,,0,0,0,,So, let me switch over to the
Dialogue: 0,0:21:43.04,0:21:45.47,Default,,0,0,0,,demo machine and show it to you
Dialogue: 0,0:21:45.47,0:21:45.80,Default,,0,0,0,,instead.
Dialogue: 0,0:21:48.46,0:21:49.86,Default,,0,0,0,,There is the demo machine.
Dialogue: 0,0:21:50.96,0:21:53.73,Default,,0,0,0,,So, in this little sample app, I
Dialogue: 0,0:21:53.73,0:21:55.25,Default,,0,0,0,,have four annotations.
Dialogue: 0,0:21:56.00,0:21:58.24,Default,,0,0,0,,I have a unicycle and a second
Dialogue: 0,0:21:58.24,0:21:59.88,Default,,0,0,0,,unicycle that share one
Dialogue: 0,0:22:00.20,0:22:01.72,Default,,0,0,0,,clustering identifier.
Dialogue: 0,0:22:02.31,0:22:04.50,Default,,0,0,0,,And I have another tricycle and
Dialogue: 0,0:22:04.50,0:22:06.20,Default,,0,0,0,,a tricycle sharing a second
Dialogue: 0,0:22:06.20,0:22:06.89,Default,,0,0,0,,identifier.
Dialogue: 0,0:22:07.37,0:22:09.17,Default,,0,0,0,,If I move them together, we'll
Dialogue: 0,0:22:09.17,0:22:09.95,Default,,0,0,0,,see their cluster.
Dialogue: 0,0:22:11.14,0:22:12.86,Default,,0,0,0,,And if I drag them apart, they
Dialogue: 0,0:22:12.86,0:22:13.82,Default,,0,0,0,,decluster again.
Dialogue: 0,0:22:14.76,0:22:17.39,Default,,0,0,0,,Now, all four of these have the
Dialogue: 0,0:22:17.39,0:22:19.17,Default,,0,0,0,,same display priority.
Dialogue: 0,0:22:19.59,0:22:20.74,Default,,0,0,0,,So, all four have the same
Dialogue: 0,0:22:20.74,0:22:21.64,Default,,0,0,0,,display priority.
Dialogue: 0,0:22:22.67,0:22:25.40,Default,,0,0,0,,When I group them together, the
Dialogue: 0,0:22:25.40,0:22:27.49,Default,,0,0,0,,cluster will get the display
Dialogue: 0,0:22:27.49,0:22:30.38,Default,,0,0,0,,priority of the highest display
Dialogue: 0,0:22:30.38,0:22:32.30,Default,,0,0,0,,priority within the group.
Dialogue: 0,0:22:33.30,0:22:35.53,Default,,0,0,0,,So, in practice, this means that
Dialogue: 0,0:22:35.53,0:22:37.10,Default,,0,0,0,,in this example, both of them
Dialogue: 0,0:22:37.10,0:22:38.58,Default,,0,0,0,,still have the same display
Dialogue: 0,0:22:38.58,0:22:39.14,Default,,0,0,0,,priority.
Dialogue: 0,0:22:39.82,0:22:40.84,Default,,0,0,0,,And when I move them even
Dialogue: 0,0:22:40.84,0:22:43.25,Default,,0,0,0,,further together, they collide
Dialogue: 0,0:22:43.55,0:22:44.60,Default,,0,0,0,,and they hide each other.
Dialogue: 0,0:22:45.22,0:22:46.46,Default,,0,0,0,,Move them out again and they
Dialogue: 0,0:22:46.46,0:22:47.28,Default,,0,0,0,,hide each other.
Dialogue: 0,0:22:47.96,0:22:50.12,Default,,0,0,0,,Now, if two annotation views
Dialogue: 0,0:22:50.17,0:22:52.06,Default,,0,0,0,,have the same display priority,
Dialogue: 0,0:22:52.34,0:22:53.78,Default,,0,0,0,,which one should we hide?
Dialogue: 0,0:22:55.01,0:22:57.48,Default,,0,0,0,,And there is logic to it.
Dialogue: 0,0:22:58.07,0:22:59.62,Default,,0,0,0,,If we rotate the map a little
Dialogue: 0,0:22:59.62,0:23:01.79,Default,,0,0,0,,bit and move them together, we
Dialogue: 0,0:23:01.79,0:23:03.36,Default,,0,0,0,,see we are still hiding the
Dialogue: 0,0:23:03.36,0:23:03.95,Default,,0,0,0,,green one.
Dialogue: 0,0:23:04.94,0:23:08.60,Default,,0,0,0,,If we rotate 180 degrees and
Dialogue: 0,0:23:08.60,0:23:10.87,Default,,0,0,0,,move them together, we notice
Dialogue: 0,0:23:11.07,0:23:12.47,Default,,0,0,0,,the orange one is the one
Dialogue: 0,0:23:12.47,0:23:13.06,Default,,0,0,0,,getting hidden.
Dialogue: 0,0:23:13.69,0:23:16.43,Default,,0,0,0,,So, the logic here is if they
Dialogue: 0,0:23:16.43,0:23:18.30,Default,,0,0,0,,have the same display priority,
Dialogue: 0,0:23:18.38,0:23:20.81,Default,,0,0,0,,we hide the one that is closest
Dialogue: 0,0:23:20.81,0:23:21.91,Default,,0,0,0,,to the top of the screen.
Dialogue: 0,0:23:22.94,0:23:25.70,Default,,0,0,0,,Which is good for developers and
Dialogue: 0,0:23:25.70,0:23:28.20,Default,,0,0,0,,users because you can see,
Dialogue: 0,0:23:28.20,0:23:29.63,Default,,0,0,0,,expect what is going to happen
Dialogue: 0,0:23:29.63,0:23:30.03,Default,,0,0,0,,next.
Dialogue: 0,0:23:30.51,0:23:32.82,Default,,0,0,0,,But one of the many reasons this
Dialogue: 0,0:23:32.82,0:23:34.55,Default,,0,0,0,,was done, I have to say if we
Dialogue: 0,0:23:34.58,0:23:37.20,Default,,0,0,0,,tilt the map into 3D mode, it
Dialogue: 0,0:23:37.20,0:23:39.20,Default,,0,0,0,,looks kind of cool as you rotate
Dialogue: 0,0:23:39.20,0:23:41.15,Default,,0,0,0,,in the annotation behind the
Dialogue: 0,0:23:41.15,0:23:41.77,Default,,0,0,0,,other one.
Dialogue: 0,0:23:43.70,0:23:47.87,Default,,0,0,0,,Now, let's zoom out a bit and
Dialogue: 0,0:23:47.87,0:23:49.80,Default,,0,0,0,,drop another annotation on the
Dialogue: 0,0:23:49.80,0:23:50.07,Default,,0,0,0,,map.
Dialogue: 0,0:23:50.91,0:23:52.49,Default,,0,0,0,,Being in annotation view, you
Dialogue: 0,0:23:52.49,0:23:54.74,Default,,0,0,0,,inherit all the APIs from
Dialogue: 0,0:23:54.74,0:23:57.05,Default,,0,0,0,,annotation view including
Dialogue: 0,0:23:57.17,0:23:57.68,Default,,0,0,0,,dragging.
Dialogue: 0,0:23:57.73,0:23:59.76,Default,,0,0,0,,So, I can pick it up and drop it
Dialogue: 0,0:23:59.76,0:24:00.25,Default,,0,0,0,,down again.
Dialogue: 0,0:24:01.02,0:24:03.44,Default,,0,0,0,,I can pick it up, drag it around
Dialogue: 0,0:24:04.05,0:24:06.33,Default,,0,0,0,,and drop it down again.
Dialogue: 0,0:24:09.02,0:24:10.24,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:24:10.24,0:24:11.36,Default,,0,0,0,,Did you notice something
Dialogue: 0,0:24:11.36,0:24:12.98,Default,,0,0,0,,happening there as I dropped it
Dialogue: 0,0:24:12.98,0:24:14.61,Default,,0,0,0,,down close to beach street?
Dialogue: 0,0:24:15.43,0:24:17.32,Default,,0,0,0,,So, look closely as I pick it up
Dialogue: 0,0:24:17.97,0:24:19.91,Default,,0,0,0,,and drop it down on Dollar
Dialogue: 0,0:24:19.91,0:24:22.05,Default,,0,0,0,,Rent-A-Car.
Dialogue: 0,0:24:22.25,0:24:23.11,Default,,0,0,0,,It gets hidden.
Dialogue: 0,0:24:23.71,0:24:25.63,Default,,0,0,0,,If you set the display priority
Dialogue: 0,0:24:25.72,0:24:27.76,Default,,0,0,0,,on annotation views, you will
Dialogue: 0,0:24:27.76,0:24:29.72,Default,,0,0,0,,also, we will also try to
Dialogue: 0,0:24:29.72,0:24:32.16,Default,,0,0,0,,collide out items and labels on
Dialogue: 0,0:24:32.16,0:24:34.13,Default,,0,0,0,,the base map for you to keep the
Dialogue: 0,0:24:34.13,0:24:36.30,Default,,0,0,0,,map even more uncluttered.
Dialogue: 0,0:24:36.74,0:24:39.06,Default,,0,0,0,,So, I can pick it up and why not
Dialogue: 0,0:24:39.06,0:24:40.96,Default,,0,0,0,,drag it down, drop it down on
Dialogue: 0,0:24:40.96,0:24:42.76,Default,,0,0,0,,another annotation and they
Dialogue: 0,0:24:42.91,0:24:45.10,Default,,0,0,0,,merge in one smooth animation.
Dialogue: 0,0:24:45.75,0:24:47.02,Default,,0,0,0,,All of these are actually
Dialogue: 0,0:24:47.62,0:24:48.13,Default,,0,0,0,,draggable.
Dialogue: 0,0:24:48.71,0:24:51.20,Default,,0,0,0,,So, I can pick them up and pick
Dialogue: 0,0:24:51.40,0:24:54.24,Default,,0,0,0,,them up, which is not true.
Dialogue: 0,0:24:54.39,0:24:58.75,Default,,0,0,0,,Because the cluster itself is
Dialogue: 0,0:24:58.75,0:24:59.67,Default,,0,0,0,,not draggable.
Dialogue: 0,0:25:00.26,0:25:02.51,Default,,0,0,0,,In order to be a draggable
Dialogue: 0,0:25:02.51,0:25:04.20,Default,,0,0,0,,annotation, you need to have a
Dialogue: 0,0:25:04.26,0:25:04.81,Default,,0,0,0,,coordinate.
Dialogue: 0,0:25:05.89,0:25:08.64,Default,,0,0,0,,And a cluster doesn't have a
Dialogue: 0,0:25:08.64,0:25:10.01,Default,,0,0,0,,coordinate on its own.
Dialogue: 0,0:25:10.39,0:25:12.71,Default,,0,0,0,,The geographical coordinate for
Dialogue: 0,0:25:12.71,0:25:14.72,Default,,0,0,0,,the cluster is the average of
Dialogue: 0,0:25:14.72,0:25:17.02,Default,,0,0,0,,all the member annotations that
Dialogue: 0,0:25:17.02,0:25:18.50,Default,,0,0,0,,is currently encompassing.
Dialogue: 0,0:25:18.57,0:25:20.09,Default,,0,0,0,,And that is why you can't drag
Dialogue: 0,0:25:20.09,0:25:20.22,Default,,0,0,0,,it.
Dialogue: 0,0:25:20.82,0:25:22.36,Default,,0,0,0,,But back to the slides.
Dialogue: 0,0:25:23.22,0:25:24.78,Default,,0,0,0,,It's a simple and powerful API
Dialogue: 0,0:25:25.43,0:25:27.12,Default,,0,0,0,,that allows you to go from this
Dialogue: 0,0:25:28.01,0:25:29.91,Default,,0,0,0,,cluttered mess to something a
Dialogue: 0,0:25:29.91,0:25:31.28,Default,,0,0,0,,little bit more clutter
Dialogue: 0,0:25:31.83,0:25:32.65,Default,,0,0,0,,cleanliness.
Dialogue: 0,0:25:33.20,0:25:37.17,Default,,0,0,0,,And this is good, since now we
Dialogue: 0,0:25:37.17,0:25:39.14,Default,,0,0,0,,see there are 11 annotations up
Dialogue: 0,0:25:39.14,0:25:41.09,Default,,0,0,0,,there and we have two more up
Dialogue: 0,0:25:41.09,0:25:41.63,Default,,0,0,0,,there.
Dialogue: 0,0:25:41.63,0:25:44.24,Default,,0,0,0,,And, but we don't really see
Dialogue: 0,0:25:44.24,0:25:46.22,Default,,0,0,0,,what kind of annotations are
Dialogue: 0,0:25:46.22,0:25:46.52,Default,,0,0,0,,there.
Dialogue: 0,0:25:47.04,0:25:48.56,Default,,0,0,0,,So, being unicycles and
Dialogue: 0,0:25:48.56,0:25:50.89,Default,,0,0,0,,tricycles, I really don't want
Dialogue: 0,0:25:50.89,0:25:52.42,Default,,0,0,0,,to go to a location where there
Dialogue: 0,0:25:52.42,0:25:53.76,Default,,0,0,0,,is only unicycles.
Dialogue: 0,0:25:53.76,0:25:55.53,Default,,0,0,0,,Because I haven't bothered to
Dialogue: 0,0:25:55.53,0:25:57.07,Default,,0,0,0,,learn to ride one yet so I want
Dialogue: 0,0:25:57.07,0:25:58.37,Default,,0,0,0,,to make sure I go to a place
Dialogue: 0,0:25:58.87,0:26:00.40,Default,,0,0,0,,with tricycles only.
Dialogue: 0,0:26:00.85,0:26:03.43,Default,,0,0,0,,So, we want to have the clusters
Dialogue: 0,0:26:03.43,0:26:06.03,Default,,0,0,0,,display at the glance what kind
Dialogue: 0,0:26:06.03,0:26:07.94,Default,,0,0,0,,of data do they contain at this
Dialogue: 0,0:26:07.94,0:26:08.57,Default,,0,0,0,,location.
Dialogue: 0,0:26:08.91,0:26:11.12,Default,,0,0,0,,And that we can do by doing our
Dialogue: 0,0:26:11.12,0:26:13.09,Default,,0,0,0,,own custom annotation views.
Dialogue: 0,0:26:13.40,0:26:14.62,Default,,0,0,0,,So, we can display it as a
Dialogue: 0,0:26:14.62,0:26:15.68,Default,,0,0,0,,little pie chart.
Dialogue: 0,0:26:16.86,0:26:19.14,Default,,0,0,0,,And I can see, yeah, there are
Dialogue: 0,0:26:19.14,0:26:21.53,Default,,0,0,0,,at least two tricycles there.
Dialogue: 0,0:26:21.53,0:26:22.74,Default,,0,0,0,,It's safe, I can go there.
Dialogue: 0,0:26:23.28,0:26:24.29,Default,,0,0,0,,How do we do this?
Dialogue: 0,0:26:24.77,0:26:26.61,Default,,0,0,0,,We have to go to our good old
Dialogue: 0,0:26:26.61,0:26:28.81,Default,,0,0,0,,friend the map view for
Dialogue: 0,0:26:28.81,0:26:30.58,Default,,0,0,0,,annotation delegate callback.
Dialogue: 0,0:26:31.73,0:26:33.34,Default,,0,0,0,,This delegate callbacks has
Dialogue: 0,0:26:33.48,0:26:36.20,Default,,0,0,0,,always provided a system
Dialogue: 0,0:26:36.41,0:26:37.41,Default,,0,0,0,,annotation for you.
Dialogue: 0,0:26:37.48,0:26:39.20,Default,,0,0,0,,The user location annotation
Dialogue: 0,0:26:39.20,0:26:41.02,Default,,0,0,0,,which is the representation of
Dialogue: 0,0:26:41.02,0:26:43.62,Default,,0,0,0,,where is the user currently in
Dialogue: 0,0:26:43.62,0:26:44.08,Default,,0,0,0,,the world.
Dialogue: 0,0:26:44.80,0:26:46.65,Default,,0,0,0,,And you can either return nil
Dialogue: 0,0:26:46.65,0:26:48.21,Default,,0,0,0,,value and you get the default
Dialogue: 0,0:26:48.21,0:26:48.70,Default,,0,0,0,,pack.
Dialogue: 0,0:26:49.16,0:26:50.84,Default,,0,0,0,,Or you could return your own
Dialogue: 0,0:26:50.84,0:26:52.53,Default,,0,0,0,,custom annotation and display
Dialogue: 0,0:26:52.53,0:26:53.84,Default,,0,0,0,,the user location in a
Dialogue: 0,0:26:54.19,0:26:55.46,Default,,0,0,0,,completely different way that
Dialogue: 0,0:26:55.46,0:26:56.82,Default,,0,0,0,,fits your application needs.
Dialogue: 0,0:26:57.21,0:27:00.70,Default,,0,0,0,,And for everything else you DQ
Dialogue: 0,0:27:00.70,0:27:02.78,Default,,0,0,0,,create your annotation view and
Dialogue: 0,0:27:02.84,0:27:03.93,Default,,0,0,0,,return it.
Dialogue: 0,0:27:04.53,0:27:06.46,Default,,0,0,0,,If you return nil, you get the
Dialogue: 0,0:27:06.46,0:27:09.47,Default,,0,0,0,,system default which, in iOS 11,
Dialogue: 0,0:27:09.66,0:27:11.12,Default,,0,0,0,,is the MarkerAnnotationView.
Dialogue: 0,0:27:11.83,0:27:15.83,Default,,0,0,0,,Now, in iOS 11, you will also
Dialogue: 0,0:27:15.83,0:27:18.68,Default,,0,0,0,,get one more different kind of
Dialogue: 0,0:27:18.88,0:27:21.42,Default,,0,0,0,,annotation, system annotation in
Dialogue: 0,0:27:21.42,0:27:22.25,Default,,0,0,0,,your callbacks.
Dialogue: 0,0:27:22.61,0:27:23.66,Default,,0,0,0,,You might get this
Dialogue: 0,0:27:23.85,0:27:25.08,Default,,0,0,0,,ClusterAnnotation.
Dialogue: 0,0:27:25.50,0:27:27.37,Default,,0,0,0,,So, if you opt into clustering
Dialogue: 0,0:27:28.09,0:27:30.41,Default,,0,0,0,,and they collide, there is not a
Dialogue: 0,0:27:30.41,0:27:31.62,Default,,0,0,0,,new delegate callback.
Dialogue: 0,0:27:31.62,0:27:33.64,Default,,0,0,0,,We reuse the existing callback,
Dialogue: 0,0:27:33.97,0:27:36.01,Default,,0,0,0,,give you a ClusterAnnotation
Dialogue: 0,0:27:36.09,0:27:37.91,Default,,0,0,0,,that represents the cluster, and
Dialogue: 0,0:27:37.91,0:27:38.92,Default,,0,0,0,,you can return the
Dialogue: 0,0:27:38.92,0:27:40.78,Default,,0,0,0,,AnnotationView that you want.
Dialogue: 0,0:27:41.12,0:27:43.34,Default,,0,0,0,,The ClusterAnnotation is a
Dialogue: 0,0:27:43.34,0:27:45.84,Default,,0,0,0,,simple concrete class of the
Dialogue: 0,0:27:45.84,0:27:47.42,Default,,0,0,0,,annotation protocol.
Dialogue: 0,0:27:48.08,0:27:49.75,Default,,0,0,0,,It provides you an array of all
Dialogue: 0,0:27:49.75,0:27:51.06,Default,,0,0,0,,the member annotations.
Dialogue: 0,0:27:51.61,0:27:53.43,Default,,0,0,0,,It's a flat array, so we
Dialogue: 0,0:27:53.43,0:27:54.99,Default,,0,0,0,,guarantee that there will be no
Dialogue: 0,0:27:54.99,0:27:56.64,Default,,0,0,0,,clusters within clusters within
Dialogue: 0,0:27:56.64,0:27:57.10,Default,,0,0,0,,clusters.
Dialogue: 0,0:27:57.10,0:27:58.63,Default,,0,0,0,,It's a flat array of all the
Dialogue: 0,0:27:58.63,0:28:00.55,Default,,0,0,0,,annotations that is currently
Dialogue: 0,0:28:00.55,0:28:02.07,Default,,0,0,0,,representing and only those.
Dialogue: 0,0:28:02.59,0:28:04.54,Default,,0,0,0,,We order it so the one with the
Dialogue: 0,0:28:04.67,0:28:06.69,Default,,0,0,0,,highest display priority is
Dialogue: 0,0:28:06.69,0:28:07.14,Default,,0,0,0,,first.
Dialogue: 0,0:28:08.15,0:28:09.81,Default,,0,0,0,,So, if you, as I said
Dialogue: 0,0:28:09.81,0:28:11.67,Default,,0,0,0,,previously, using display
Dialogue: 0,0:28:11.67,0:28:12.85,Default,,0,0,0,,priority and mapping it with
Dialogue: 0,0:28:12.88,0:28:14.19,Default,,0,0,0,,popularity, you will get the
Dialogue: 0,0:28:14.19,0:28:16.92,Default,,0,0,0,,most popular one at the start.
Dialogue: 0,0:28:17.56,0:28:19.22,Default,,0,0,0,,The MarkerAnnotationView placed
Dialogue: 0,0:28:19.22,0:28:21.88,Default,,0,0,0,,well with the ClusterAnnotation.
Dialogue: 0,0:28:22.08,0:28:24.05,Default,,0,0,0,,So, we will display the count
Dialogue: 0,0:28:24.05,0:28:26.27,Default,,0,0,0,,there as the glyph.
Dialogue: 0,0:28:26.45,0:28:27.68,Default,,0,0,0,,So, you can see at a glance how
Dialogue: 0,0:28:27.68,0:28:28.36,Default,,0,0,0,,many there are.
Dialogue: 0,0:28:29.06,0:28:31.47,Default,,0,0,0,,We will also, for the title and
Dialogue: 0,0:28:31.47,0:28:34.02,Default,,0,0,0,,subtitle, provide good default.
Dialogue: 0,0:28:34.37,0:28:36.73,Default,,0,0,0,,So, the title will be the title
Dialogue: 0,0:28:36.73,0:28:38.65,Default,,0,0,0,,of the most popular one or the
Dialogue: 0,0:28:38.65,0:28:40.26,Default,,0,0,0,,first member annotation.
Dialogue: 0,0:28:40.69,0:28:42.84,Default,,0,0,0,,And the subtitle is a localized
Dialogue: 0,0:28:43.16,0:28:45.28,Default,,0,0,0,,plus X number or more how many
Dialogue: 0,0:28:45.28,0:28:46.88,Default,,0,0,0,,annotations you want to have.
Dialogue: 0,0:28:48.30,0:28:49.41,Default,,0,0,0,,Both of these properties are
Dialogue: 0,0:28:49.41,0:28:51.05,Default,,0,0,0,,mutable, so you can change them
Dialogue: 0,0:28:51.16,0:28:52.79,Default,,0,0,0,,anytime you want and provide
Dialogue: 0,0:28:52.79,0:28:53.46,Default,,0,0,0,,something else.
Dialogue: 0,0:28:53.94,0:28:55.55,Default,,0,0,0,,We might want to change it and
Dialogue: 0,0:28:55.55,0:28:59.07,Default,,0,0,0,,have, say, three unicycles and
Dialogue: 0,0:28:59.07,0:29:00.69,Default,,0,0,0,,two tricycles and then you can
Dialogue: 0,0:29:00.69,0:29:02.80,Default,,0,0,0,,see at the subtitle what it is
Dialogue: 0,0:29:03.04,0:29:04.96,Default,,0,0,0,,without doing a custom
Dialogue: 0,0:29:04.96,0:29:05.71,Default,,0,0,0,,AnnotationView.
Dialogue: 0,0:29:06.24,0:29:08.75,Default,,0,0,0,,But you might want to do that
Dialogue: 0,0:29:08.75,0:29:09.76,Default,,0,0,0,,custom AnnotationView.
Dialogue: 0,0:29:10.87,0:29:13.38,Default,,0,0,0,,So, custom AnnotationViews.
Dialogue: 0,0:29:14.69,0:29:16.02,Default,,0,0,0,,Let's look at this little pie
Dialogue: 0,0:29:16.02,0:29:16.36,Default,,0,0,0,,chart.
Dialogue: 0,0:29:16.82,0:29:19.65,Default,,0,0,0,,A AnnotationVview is a view.
Dialogue: 0,0:29:20.13,0:29:21.91,Default,,0,0,0,,A view has a frame.
Dialogue: 0,0:29:22.95,0:29:25.65,Default,,0,0,0,,And the underlying thing that
Dialogue: 0,0:29:25.72,0:29:27.75,Default,,0,0,0,,drives both display priority to
Dialogue: 0,0:29:27.75,0:29:30.02,Default,,0,0,0,,hiding things and clustering is
Dialogue: 0,0:29:30.02,0:29:31.98,Default,,0,0,0,,that annotations must be able to
Dialogue: 0,0:29:31.98,0:29:33.72,Default,,0,0,0,,detect if they are overlapping.
Dialogue: 0,0:29:34.96,0:29:36.43,Default,,0,0,0,,And since we are views and we
Dialogue: 0,0:29:36.43,0:29:38.76,Default,,0,0,0,,have a frame, we can just use
Dialogue: 0,0:29:38.76,0:29:39.99,Default,,0,0,0,,that frame and detect a
Dialogue: 0,0:29:39.99,0:29:40.40,Default,,0,0,0,,collision.
Dialogue: 0,0:29:41.86,0:29:43.55,Default,,0,0,0,,Now this doesn't look good.
Dialogue: 0,0:29:44.24,0:29:46.22,Default,,0,0,0,,I mean, they're circles, yes.
Dialogue: 0,0:29:46.22,0:29:48.36,Default,,0,0,0,,The frames are colliding but
Dialogue: 0,0:29:48.36,0:29:50.32,Default,,0,0,0,,visually they are not really
Dialogue: 0,0:29:50.32,0:29:51.00,Default,,0,0,0,,colliding yet.
Dialogue: 0,0:29:51.07,0:29:52.93,Default,,0,0,0,,So, this is not quite what we
Dialogue: 0,0:29:52.93,0:29:53.32,Default,,0,0,0,,want.
Dialogue: 0,0:29:53.69,0:29:56.04,Default,,0,0,0,,So, we add one more property on
Dialogue: 0,0:29:56.12,0:29:56.84,Default,,0,0,0,,AnnotationView.
Dialogue: 0,0:29:56.94,0:29:58.06,Default,,0,0,0,,We call it collisionMode.
Dialogue: 0,0:29:58.78,0:30:00.85,Default,,0,0,0,,The default value is rectangle.
Dialogue: 0,0:30:01.49,0:30:03.55,Default,,0,0,0,,So, we have to use the frame.
Dialogue: 0,0:30:04.20,0:30:06.05,Default,,0,0,0,,The other option we have is
Dialogue: 0,0:30:06.05,0:30:06.60,Default,,0,0,0,,circle.
Dialogue: 0,0:30:07.52,0:30:09.02,Default,,0,0,0,,Where we use the inscribed
Dialogue: 0,0:30:09.02,0:30:11.96,Default,,0,0,0,,circle of the frame for the
Dialogue: 0,0:30:11.96,0:30:13.16,Default,,0,0,0,,annotation.
Dialogue: 0,0:30:13.23,0:30:14.45,Default,,0,0,0,,And now when we move them
Dialogue: 0,0:30:14.45,0:30:17.24,Default,,0,0,0,,together, they collide and
Dialogue: 0,0:30:17.24,0:30:18.81,Default,,0,0,0,,detect a collision when they are
Dialogue: 0,0:30:18.81,0:30:19.90,Default,,0,0,0,,visually colliding.
Dialogue: 0,0:30:20.65,0:30:23.80,Default,,0,0,0,,Now, not all AnnotationViews are
Dialogue: 0,0:30:23.80,0:30:26.00,Default,,0,0,0,,perfect boxes.
Dialogue: 0,0:30:26.22,0:30:27.41,Default,,0,0,0,,Some of them are actually
Dialogue: 0,0:30:27.41,0:30:28.15,Default,,0,0,0,,rectangles.
Dialogue: 0,0:30:28.64,0:30:30.41,Default,,0,0,0,,And for collisionMode rectangle,
Dialogue: 0,0:30:30.98,0:30:32.93,Default,,0,0,0,,yes, the collision is with the
Dialogue: 0,0:30:32.93,0:30:33.57,Default,,0,0,0,,rectangle.
Dialogue: 0,0:30:33.82,0:30:35.55,Default,,0,0,0,,But if you change it to the
Dialogue: 0,0:30:35.55,0:30:37.75,Default,,0,0,0,,circle, it is a circle.
Dialogue: 0,0:30:37.96,0:30:40.26,Default,,0,0,0,,So, we use the inscribed circle
Dialogue: 0,0:30:40.34,0:30:41.84,Default,,0,0,0,,in the rectangle, not the
Dialogue: 0,0:30:41.84,0:30:43.38,Default,,0,0,0,,inscribed ellipses.
Dialogue: 0,0:30:44.65,0:30:45.92,Default,,0,0,0,,It's important to take a little
Dialogue: 0,0:30:45.92,0:30:46.74,Default,,0,0,0,,bit of note there.
Dialogue: 0,0:30:47.11,0:30:49.94,Default,,0,0,0,,So, not everything is rectangles
Dialogue: 0,0:30:49.94,0:30:51.00,Default,,0,0,0,,or circles either.
Dialogue: 0,0:30:51.00,0:30:52.00,Default,,0,0,0,,We might have something a little
Dialogue: 0,0:30:52.00,0:30:52.97,Default,,0,0,0,,bit more fancy, like
Dialogue: 0,0:30:53.45,0:30:55.78,Default,,0,0,0,,nice-looking 3D rendered golf
Dialogue: 0,0:30:55.78,0:30:58.26,Default,,0,0,0,,clubs for our golf application
Dialogue: 0,0:30:58.61,0:31:00.57,Default,,0,0,0,,that is displayed in flyover.
Dialogue: 0,0:31:00.73,0:31:02.63,Default,,0,0,0,,And as we tilt the map in 3D and
Dialogue: 0,0:31:02.63,0:31:04.24,Default,,0,0,0,,we move them together, we want
Dialogue: 0,0:31:04.24,0:31:05.20,Default,,0,0,0,,them to actually overlap a
Dialogue: 0,0:31:05.20,0:31:06.72,Default,,0,0,0,,little bit because it looks
Dialogue: 0,0:31:06.72,0:31:07.02,Default,,0,0,0,,cool.
Dialogue: 0,0:31:07.80,0:31:09.06,Default,,0,0,0,,It looks really nice, actually.
Dialogue: 0,0:31:09.48,0:31:10.81,Default,,0,0,0,,So, if we use just the
Dialogue: 0,0:31:10.81,0:31:13.31,Default,,0,0,0,,rectangles, they are way past
Dialogue: 0,0:31:13.31,0:31:16.23,Default,,0,0,0,,when we want them to detect
Dialogue: 0,0:31:16.27,0:31:16.72,Default,,0,0,0,,collision.
Dialogue: 0,0:31:17.20,0:31:19.44,Default,,0,0,0,,If we use the circles, no.
Dialogue: 0,0:31:19.60,0:31:21.06,Default,,0,0,0,,it doesn't really fit either.
Dialogue: 0,0:31:21.06,0:31:22.49,Default,,0,0,0,,I mean, what we really want is
Dialogue: 0,0:31:22.49,0:31:23.54,Default,,0,0,0,,something a little bit more
Dialogue: 0,0:31:23.54,0:31:25.57,Default,,0,0,0,,close to this which would be the
Dialogue: 0,0:31:25.57,0:31:26.67,Default,,0,0,0,,circle in the bottom with the
Dialogue: 0,0:31:26.67,0:31:30.08,Default,,0,0,0,,five-point outset option that we
Dialogue: 0,0:31:30.08,0:31:31.06,Default,,0,0,0,,did not give you [laughter].
Dialogue: 0,0:31:32.92,0:31:34.13,Default,,0,0,0,,You don't have that option,
Dialogue: 0,0:31:34.24,0:31:34.54,Default,,0,0,0,,sorry.
Dialogue: 0,0:31:35.56,0:31:38.26,Default,,0,0,0,,Instead, we went back to all the
Dialogue: 0,0:31:38.26,0:31:39.72,Default,,0,0,0,,way when outer layout was
Dialogue: 0,0:31:39.72,0:31:42.45,Default,,0,0,0,,introduced to both iOS and macOS
Dialogue: 0,0:31:42.45,0:31:43.60,Default,,0,0,0,,in the year before.
Dialogue: 0,0:31:43.98,0:31:45.10,Default,,0,0,0,,And you have the alignment
Dialogue: 0,0:31:45.10,0:31:47.00,Default,,0,0,0,,rectangle insets which are the
Dialogue: 0,0:31:47.00,0:31:49.13,Default,,0,0,0,,options that say that you can
Dialogue: 0,0:31:49.13,0:31:51.55,Default,,0,0,0,,configure if two views re to be
Dialogue: 0,0:31:51.55,0:31:53.69,Default,,0,0,0,,aligned next to each other, what
Dialogue: 0,0:31:53.69,0:31:56.25,Default,,0,0,0,,kind of insets would they use to
Dialogue: 0,0:31:56.25,0:31:57.53,Default,,0,0,0,,look visually pleasing?
Dialogue: 0,0:31:58.20,0:31:59.63,Default,,0,0,0,,Which is just what we're doing
Dialogue: 0,0:31:59.63,0:32:00.78,Default,,0,0,0,,here with the AnnotationViews,
Dialogue: 0,0:32:00.78,0:32:01.01,Default,,0,0,0,,right?
Dialogue: 0,0:32:01.66,0:32:03.40,Default,,0,0,0,,What is the visually pleasing
Dialogue: 0,0:32:04.17,0:32:05.48,Default,,0,0,0,,collision rectangle.
Dialogue: 0,0:32:05.78,0:32:07.02,Default,,0,0,0,,So, all you need to do.
Dialogue: 0,0:32:07.39,0:32:09.73,Default,,0,0,0,,Override it and you provide
Dialogue: 0,0:32:09.73,0:32:10.18,Default,,0,0,0,,offset.
Dialogue: 0,0:32:10.36,0:32:11.95,Default,,0,0,0,,So, for the top we can set it to
Dialogue: 0,0:32:11.95,0:32:13.84,Default,,0,0,0,,50 points and we move the
Dialogue: 0,0:32:14.06,0:32:15.16,Default,,0,0,0,,collision area down.
Dialogue: 0,0:32:15.68,0:32:17.60,Default,,0,0,0,,The left edge, 0, we don't need
Dialogue: 0,0:32:17.71,0:32:19.03,Default,,0,0,0,,to change it at all.
Dialogue: 0,0:32:19.41,0:32:21.18,Default,,0,0,0,,The bottom edge we move out by
Dialogue: 0,0:32:21.18,0:32:23.33,Default,,0,0,0,,negative 5, because we want an
Dialogue: 0,0:32:23.43,0:32:24.75,Default,,0,0,0,,outset, not an inset.
Dialogue: 0,0:32:25.21,0:32:26.97,Default,,0,0,0,,And then we do the right edge as
Dialogue: 0,0:32:26.97,0:32:27.26,Default,,0,0,0,,well.
Dialogue: 0,0:32:27.73,0:32:30.76,Default,,0,0,0,,And what we have is that little
Dialogue: 0,0:32:31.06,0:32:32.97,Default,,0,0,0,,circle in the bottom left outset
Dialogue: 0,0:32:32.97,0:32:34.88,Default,,0,0,0,,by 5 points, just as we wanted.
Dialogue: 0,0:32:35.43,0:32:38.36,Default,,0,0,0,,And when we now collide them, it
Dialogue: 0,0:32:38.36,0:32:40.37,Default,,0,0,0,,looks very visually pleasing.
Dialogue: 0,0:32:41.26,0:32:42.95,Default,,0,0,0,,Let's look at the code to
Dialogue: 0,0:32:42.95,0:32:44.17,Default,,0,0,0,,configure our custom
Dialogue: 0,0:32:44.17,0:32:45.16,Default,,0,0,0,,AnnotationViews.
Dialogue: 0,0:32:45.52,0:32:48.82,Default,,0,0,0,,And a few tips and tricks to
Dialogue: 0,0:32:48.82,0:32:50.52,Default,,0,0,0,,make our code base a little bit
Dialogue: 0,0:32:50.52,0:32:53.19,Default,,0,0,0,,more modern and nice.
Dialogue: 0,0:32:54.05,0:32:55.47,Default,,0,0,0,,There we go.
Dialogue: 0,0:32:57.26,0:32:59.88,Default,,0,0,0,,So, let's run the application
Dialogue: 0,0:32:59.88,0:33:01.82,Default,,0,0,0,,first so we see that it works.
Dialogue: 0,0:33:04.20,0:33:05.37,Default,,0,0,0,,Build succeeded.
Dialogue: 0,0:33:05.81,0:33:06.51,Default,,0,0,0,,Compiling.
Dialogue: 0,0:33:07.11,0:33:07.81,Default,,0,0,0,,It is running.
Dialogue: 0,0:33:08.80,0:33:12.43,Default,,0,0,0,,And we have the collision when
Dialogue: 0,0:33:12.43,0:33:13.48,Default,,0,0,0,,we move them together.
Dialogue: 0,0:33:14.29,0:33:15.12,Default,,0,0,0,,They collide out.
Dialogue: 0,0:33:16.16,0:33:16.81,Default,,0,0,0,,So, it works.
Dialogue: 0,0:33:18.20,0:33:20.65,Default,,0,0,0,,Now, looking at the code, we
Dialogue: 0,0:33:20.65,0:33:23.06,Default,,0,0,0,,have our mapView, viewFor
Dialogue: 0,0:33:23.06,0:33:23.69,Default,,0,0,0,,annotation.
Dialogue: 0,0:33:25.02,0:33:26.35,Default,,0,0,0,,The first thing we do is we
Dialogue: 0,0:33:26.35,0:33:28.39,Default,,0,0,0,,check if that is one of our own
Dialogue: 0,0:33:28.39,0:33:29.23,Default,,0,0,0,,annotations.
Dialogue: 0,0:33:29.49,0:33:34.61,Default,,0,0,0,,And if it is, we configure it a
Dialogue: 0,0:33:34.61,0:33:36.35,Default,,0,0,0,,lot to set it up.
Dialogue: 0,0:33:37.27,0:33:39.86,Default,,0,0,0,,And otherwise we check if it's
Dialogue: 0,0:33:39.86,0:33:41.21,Default,,0,0,0,,the system-provided
Dialogue: 0,0:33:41.62,0:33:42.71,Default,,0,0,0,,ClusterAnnotation.
Dialogue: 0,0:33:43.40,0:33:46.25,Default,,0,0,0,,And if it is, we configure it
Dialogue: 0,0:33:46.25,0:33:46.99,Default,,0,0,0,,differently.
Dialogue: 0,0:33:48.02,0:33:50.29,Default,,0,0,0,,And for the else case, we just
Dialogue: 0,0:33:50.29,0:33:51.85,Default,,0,0,0,,return nil to get the system
Dialogue: 0,0:33:51.85,0:33:52.41,Default,,0,0,0,,default.
Dialogue: 0,0:33:52.89,0:33:54.53,Default,,0,0,0,,Currently that would be called
Dialogue: 0,0:33:54.53,0:33:57.16,Default,,0,0,0,,for all the user locations, but
Dialogue: 0,0:33:57.16,0:33:58.84,Default,,0,0,0,,it might be that we add more
Dialogue: 0,0:33:59.00,0:34:00.23,Default,,0,0,0,,system annotations in the
Dialogue: 0,0:34:00.23,0:34:00.70,Default,,0,0,0,,future.
Dialogue: 0,0:34:00.70,0:34:02.11,Default,,0,0,0,,So, good take.
Dialogue: 0,0:34:02.78,0:34:05.01,Default,,0,0,0,,Don't check for user location by
Dialogue: 0,0:34:05.01,0:34:05.49,Default,,0,0,0,,default.
Dialogue: 0,0:34:05.99,0:34:07.62,Default,,0,0,0,,Do the else case, return nil,
Dialogue: 0,0:34:07.62,0:34:08.80,Default,,0,0,0,,and let the system do the right
Dialogue: 0,0:34:08.83,0:34:11.39,Default,,0,0,0,,thing for all the other cases.
Dialogue: 0,0:34:12.38,0:34:15.80,Default,,0,0,0,,Now, this is a lot of code, in
Dialogue: 0,0:34:15.80,0:34:18.44,Default,,0,0,0,,our view controller nonetheless,
Dialogue: 0,0:34:18.76,0:34:19.95,Default,,0,0,0,,and it doesn't really have
Dialogue: 0,0:34:19.95,0:34:21.86,Default,,0,0,0,,anything to do with how it's
Dialogue: 0,0:34:21.86,0:34:24.61,Default,,0,0,0,,going to be displayed or rather
Dialogue: 0,0:34:24.61,0:34:26.10,Default,,0,0,0,,it is all how it's going to be
Dialogue: 0,0:34:26.10,0:34:26.57,Default,,0,0,0,,displayed.
Dialogue: 0,0:34:26.86,0:34:29.01,Default,,0,0,0,,So, I don't think this should be
Dialogue: 0,0:34:29.01,0:34:30.14,Default,,0,0,0,,in the view controller.
Dialogue: 0,0:34:30.75,0:34:35.91,Default,,0,0,0,,So, if I grab here and drag in a
Dialogue: 0,0:34:35.98,0:34:39.42,Default,,0,0,0,,couple of views to my project, I
Dialogue: 0,0:34:39.42,0:34:43.05,Default,,0,0,0,,think that first of all I know I
Dialogue: 0,0:34:43.05,0:34:45.00,Default,,0,0,0,,need to add these files to the
Dialogue: 0,0:34:45.13,0:34:47.09,Default,,0,0,0,,target or it won't compile.
Dialogue: 0,0:34:47.61,0:34:48.05,Default,,0,0,0,,There we go.
Dialogue: 0,0:34:48.95,0:34:51.97,Default,,0,0,0,,Another good tip is in your
Dialogue: 0,0:34:51.97,0:34:54.51,Default,,0,0,0,,AnnotationViews, you can
Dialogue: 0,0:34:54.51,0:34:56.13,Default,,0,0,0,,override the set annotation
Dialogue: 0,0:34:56.13,0:34:58.19,Default,,0,0,0,,method and do the configuration
Dialogue: 0,0:34:58.19,0:34:58.52,Default,,0,0,0,,there.
Dialogue: 0,0:34:58.89,0:35:00.42,Default,,0,0,0,,So, here I have the same thing.
Dialogue: 0,0:35:00.42,0:35:02.04,Default,,0,0,0,,I know I will get a bike.
Dialogue: 0,0:35:02.33,0:35:04.75,Default,,0,0,0,,And if I get a bike, I configure
Dialogue: 0,0:35:04.75,0:35:07.07,Default,,0,0,0,,it, set it up, and be done with
Dialogue: 0,0:35:08.49,0:35:08.88,Default,,0,0,0,,it.
Dialogue: 0,0:35:08.88,0:35:11.43,Default,,0,0,0,,The, this will allow me to go
Dialogue: 0,0:35:11.75,0:35:20.28,Default,,0,0,0,,back here and delete all of
Dialogue: 0,0:35:20.28,0:35:20.73,Default,,0,0,0,,this.
Dialogue: 0,0:35:21.09,0:35:23.85,Default,,0,0,0,,No, actually, not that one.
Dialogue: 0,0:35:24.00,0:35:25.78,Default,,0,0,0,,And delete all of this, because
Dialogue: 0,0:35:25.78,0:35:27.82,Default,,0,0,0,,it's really not fitting there in
Dialogue: 0,0:35:27.82,0:35:28.66,Default,,0,0,0,,the view controller.
Dialogue: 0,0:35:28.66,0:35:30.12,Default,,0,0,0,,It gets a lot, lot smaller.
Dialogue: 0,0:35:31.55,0:35:33.72,Default,,0,0,0,,Another thing that might annoy
Dialogue: 0,0:35:33.91,0:35:38.28,Default,,0,0,0,,SWF developers is that this view
Dialogue: 0,0:35:38.28,0:35:40.38,Default,,0,0,0,,here is an optional.
Dialogue: 0,0:35:40.99,0:35:42.93,Default,,0,0,0,,We really don't want optionals.
Dialogue: 0,0:35:43.99,0:35:47.42,Default,,0,0,0,,So, we want it to be normal
Dialogue: 0,0:35:47.42,0:35:48.54,Default,,0,0,0,,required variable.
Dialogue: 0,0:35:49.15,0:35:52.33,Default,,0,0,0,,Now, the DQ reusable annotation
Dialogue: 0,0:35:52.42,0:35:56.42,Default,,0,0,0,,with view do return an optional.
Dialogue: 0,0:35:57.37,0:36:00.30,Default,,0,0,0,,But we fixed that and give you a
Dialogue: 0,0:36:00.30,0:36:00.88,Default,,0,0,0,,sibling.
Dialogue: 0,0:36:01.55,0:36:04.51,Default,,0,0,0,,The DQ reusable annotation with
Dialogue: 0,0:36:04.51,0:36:07.12,Default,,0,0,0,,identifier for annotation.
Dialogue: 0,0:36:07.98,0:36:09.56,Default,,0,0,0,,It is modeled after the DQ
Dialogue: 0,0:36:09.56,0:36:11.68,Default,,0,0,0,,methods on UITableView and
Dialogue: 0,0:36:11.68,0:36:12.71,Default,,0,0,0,,UICollectionView.
Dialogue: 0,0:36:13.37,0:36:15.02,Default,,0,0,0,,So, it will always return an
Dialogue: 0,0:36:15.02,0:36:15.64,Default,,0,0,0,,instance.
Dialogue: 0,0:36:15.89,0:36:21.07,Default,,0,0,0,,Let's give it a, oops.
Dialogue: 0,0:36:21.55,0:36:27.45,Default,,0,0,0,,Yeah. That's how you type.
Dialogue: 0,0:36:27.45,0:36:30.36,Default,,0,0,0,,And the annotation.
Dialogue: 0,0:36:30.90,0:36:32.55,Default,,0,0,0,,You might notice I did not have
Dialogue: 0,0:36:32.55,0:36:33.33,Default,,0,0,0,,US keyboard here.
Dialogue: 0,0:36:34.18,0:36:36.98,Default,,0,0,0,,And by doing that, we no longer
Dialogue: 0,0:36:37.57,0:36:40.21,Default,,0,0,0,,have to do the if check for did
Dialogue: 0,0:36:40.21,0:36:42.89,Default,,0,0,0,,we actually do it and create it
Dialogue: 0,0:36:42.89,0:36:43.30,Default,,0,0,0,,instead.
Dialogue: 0,0:36:43.92,0:36:45.35,Default,,0,0,0,,We don't have to set the
Dialogue: 0,0:36:45.35,0:36:46.87,Default,,0,0,0,,annotation, because we give it
Dialogue: 0,0:36:46.95,0:36:48.26,Default,,0,0,0,,to the initializer.
Dialogue: 0,0:36:48.79,0:36:49.94,Default,,0,0,0,,And we can just delete this.
Dialogue: 0,0:36:50.92,0:36:52.66,Default,,0,0,0,,Actually, let's go one further.
Dialogue: 0,0:36:53.87,0:36:56.57,Default,,0,0,0,,We can delete all of this.
Dialogue: 0,0:36:56.61,0:36:57.73,Default,,0,0,0,,We don't need that.
Dialogue: 0,0:36:58.56,0:37:00.59,Default,,0,0,0,,Because we can register our
Dialogue: 0,0:37:00.59,0:37:04.58,Default,,0,0,0,,AnnotationViews to use for reuse
Dialogue: 0,0:37:04.58,0:37:05.61,Default,,0,0,0,,identifiers.
Dialogue: 0,0:37:06.46,0:37:08.67,Default,,0,0,0,,So, just as with the TableViews
Dialogue: 0,0:37:09.20,0:37:10.82,Default,,0,0,0,,and CollectionViews, we have
Dialogue: 0,0:37:11.00,0:37:13.41,Default,,0,0,0,,tell the map view here, I want
Dialogue: 0,0:37:13.41,0:37:14.09,Default,,0,0,0,,to register.
Dialogue: 0,0:37:14.48,0:37:17.60,Default,,0,0,0,,And use the bike view class for
Dialogue: 0,0:37:17.60,0:37:20.52,Default,,0,0,0,,any view with the reuse
Dialogue: 0,0:37:20.52,0:37:22.75,Default,,0,0,0,,identifier that could be of your
Dialogue: 0,0:37:22.75,0:37:24.67,Default,,0,0,0,,choosing or one of the two
Dialogue: 0,0:37:25.07,0:37:26.57,Default,,0,0,0,,constants that we provide for
Dialogue: 0,0:37:26.57,0:37:26.78,Default,,0,0,0,,you.
Dialogue: 0,0:37:27.15,0:37:29.75,Default,,0,0,0,,The default annotation view
Dialogue: 0,0:37:29.99,0:37:31.50,Default,,0,0,0,,which we use for any single
Dialogue: 0,0:37:31.50,0:37:33.01,Default,,0,0,0,,annotation view created by the
Dialogue: 0,0:37:33.01,0:37:35.61,Default,,0,0,0,,system and the default
Dialogue: 0,0:37:35.80,0:37:37.53,Default,,0,0,0,,ClusterAnnotation view that we
Dialogue: 0,0:37:37.53,0:37:39.83,Default,,0,0,0,,use for any system annotation
Dialogue: 0,0:37:39.83,0:37:40.01,Default,,0,0,0,,view.
Dialogue: 0,0:37:40.88,0:37:49.23,Default,,0,0,0,,And now when we run it, it
Dialogue: 0,0:37:49.50,0:37:50.19,Default,,0,0,0,,compiles.
Dialogue: 0,0:37:50.63,0:37:52.50,Default,,0,0,0,,It runs. It launches.
Dialogue: 0,0:37:53.07,0:37:55.24,Default,,0,0,0,,And as we move them together
Dialogue: 0,0:37:55.87,0:37:57.64,Default,,0,0,0,,with no code, they merge.
Dialogue: 0,0:37:59.00,0:38:01.14,Default,,0,0,0,,And when we group them, we get
Dialogue: 0,0:38:01.14,0:38:02.63,Default,,0,0,0,,the nice little pie chart.
Dialogue: 0,0:38:03.51,0:38:05.42,Default,,0,0,0,,And that is a few tips and
Dialogue: 0,0:38:05.42,0:38:06.59,Default,,0,0,0,,tricks for how to make
Dialogue: 0,0:38:06.59,0:38:08.69,Default,,0,0,0,,AnnotationViews a lot easier.
Dialogue: 0,0:38:09.46,0:38:10.41,Default,,0,0,0,,Let's go back to the slides.
Dialogue: 0,0:38:11.52,0:38:14.52,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:38:15.02,0:38:19.22,Default,,0,0,0,,So, thank you for being here.
Dialogue: 0,0:38:19.85,0:38:21.04,Default,,0,0,0,,Today we covered a lot of
Dialogue: 0,0:38:21.04,0:38:21.38,Default,,0,0,0,,things.
Dialogue: 0,0:38:21.83,0:38:25.29,Default,,0,0,0,,First we have the new map type,
Dialogue: 0,0:38:25.29,0:38:28.57,Default,,0,0,0,,the muted standard, that allows
Dialogue: 0,0:38:28.57,0:38:30.79,Default,,0,0,0,,your data to stand out on your
Dialogue: 0,0:38:30.79,0:38:32.33,Default,,0,0,0,,map in your application.
Dialogue: 0,0:38:33.15,0:38:35.45,Default,,0,0,0,,We give you all of the map
Dialogue: 0,0:38:35.52,0:38:37.94,Default,,0,0,0,,controls as proper views so you
Dialogue: 0,0:38:37.94,0:38:40.27,Default,,0,0,0,,can configure in to display them
Dialogue: 0,0:38:40.27,0:38:42.58,Default,,0,0,0,,where and when it makes sense
Dialogue: 0,0:38:42.58,0:38:43.67,Default,,0,0,0,,with the context of your
Dialogue: 0,0:38:43.67,0:38:44.52,Default,,0,0,0,,applications.
Dialogue: 0,0:38:45.07,0:38:45.69,Default,,0,0,0,,We have the new
Dialogue: 0,0:38:45.69,0:38:47.51,Default,,0,0,0,,MarkerAnnotationView that
Dialogue: 0,0:38:47.51,0:38:49.74,Default,,0,0,0,,displays a lot more information
Dialogue: 0,0:38:49.74,0:38:51.49,Default,,0,0,0,,about your data at a glance
Dialogue: 0,0:38:51.49,0:38:53.18,Default,,0,0,0,,without having to dig in and out
Dialogue: 0,0:38:53.18,0:38:54.30,Default,,0,0,0,,of the data all the time.
Dialogue: 0,0:38:54.98,0:38:57.01,Default,,0,0,0,,And the MarkerAnnotationView
Dialogue: 0,0:38:57.01,0:38:59.39,Default,,0,0,0,,works beautiful with the new
Dialogue: 0,0:38:59.42,0:39:03.21,Default,,0,0,0,,APIs for display priority and
Dialogue: 0,0:39:03.24,0:39:06.28,Default,,0,0,0,,clustering to get your data a
Dialogue: 0,0:39:06.28,0:39:08.91,Default,,0,0,0,,lot more nicer looking and less
Dialogue: 0,0:39:09.43,0:39:10.24,Default,,0,0,0,,cluttered map.
Dialogue: 0,0:39:10.95,0:39:13.56,Default,,0,0,0,,For more information, go to this
Dialogue: 0,0:39:13.56,0:39:14.04,Default,,0,0,0,,website.
Dialogue: 0,0:39:14.78,0:39:17.67,Default,,0,0,0,,There is also the sample code
Dialogue: 0,0:39:17.77,0:39:19.15,Default,,0,0,0,,for the application I've been
Dialogue: 0,0:39:19.45,0:39:20.33,Default,,0,0,0,,showing you today.
Dialogue: 0,0:39:20.91,0:39:22.47,Default,,0,0,0,,Please play around with it and
Dialogue: 0,0:39:22.47,0:39:24.11,Default,,0,0,0,,see what great things can be
Dialogue: 0,0:39:24.11,0:39:24.45,Default,,0,0,0,,done.
Dialogue: 0,0:39:24.80,0:39:26.38,Default,,0,0,0,,I'm very excited to see what you
Dialogue: 0,0:39:26.38,0:39:28.65,Default,,0,0,0,,will do with this.
Dialogue: 0,0:39:29.19,0:39:30.46,Default,,0,0,0,,Also, go back and watch the
Dialogue: 0,0:39:30.46,0:39:32.49,Default,,0,0,0,,videos for What's New in
Dialogue: 0,0:39:32.71,0:39:34.12,Default,,0,0,0,,Location Technologies from
Dialogue: 0,0:39:34.12,0:39:34.67,Default,,0,0,0,,yesterday.
Dialogue: 0,0:39:34.97,0:39:36.96,Default,,0,0,0,,And What's New in MapKit from
Dialogue: 0,0:39:36.96,0:39:38.14,Default,,0,0,0,,2015.
Dialogue: 0,0:39:38.64,0:39:39.42,Default,,0,0,0,,Thank you very much.
Dialogue: 0,0:39:40.51,0:39:42.51,Default,,0,0,0,,[ Applause ]
