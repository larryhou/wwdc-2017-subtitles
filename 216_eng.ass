[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.18,0:00:23.31,Default,,0,0,0,,>> Hi, everyone.
Dialogue: 0,0:00:23.40,0:00:24.82,Default,,0,0,0,,My name is Neil Desai, and I'm a
Dialogue: 0,0:00:24.82,0:00:26.24,Default,,0,0,0,,WatchKit Frameworks Engineer,
Dialogue: 0,0:00:26.51,0:00:28.51,Default,,0,0,0,,and I'm really excited to talk
Dialogue: 0,0:00:28.51,0:00:30.17,Default,,0,0,0,,about the life of a watchOS app
Dialogue: 0,0:00:30.17,0:00:30.44,Default,,0,0,0,,today.
Dialogue: 0,0:00:32.51,0:00:35.09,Default,,0,0,0,,So, watch apps have a phenomenal
Dialogue: 0,0:00:35.09,0:00:37.32,Default,,0,0,0,,capacity to be simple yet
Dialogue: 0,0:00:37.32,0:00:38.63,Default,,0,0,0,,incredibly powerful.
Dialogue: 0,0:00:39.28,0:00:40.93,Default,,0,0,0,,Well-designed watch apps have
Dialogue: 0,0:00:40.93,0:00:43.04,Default,,0,0,0,,the potential to be the ultimate
Dialogue: 0,0:00:43.04,0:00:44.79,Default,,0,0,0,,companion on your user's wrist.
Dialogue: 0,0:00:45.59,0:00:47.93,Default,,0,0,0,,Now, let's imagine your user for
Dialogue: 0,0:00:47.93,0:00:48.38,Default,,0,0,0,,a second.
Dialogue: 0,0:00:48.88,0:00:50.37,Default,,0,0,0,,What are they asking for when
Dialogue: 0,0:00:50.37,0:00:51.74,Default,,0,0,0,,they want to use your watch app?
Dialogue: 0,0:00:52.48,0:00:53.63,Default,,0,0,0,,Maybe they want to quickly
Dialogue: 0,0:00:53.63,0:00:55.32,Default,,0,0,0,,glance at some information, or
Dialogue: 0,0:00:55.32,0:00:56.53,Default,,0,0,0,,complete a simple task.
Dialogue: 0,0:00:57.21,0:00:58.92,Default,,0,0,0,,We think about great watch apps
Dialogue: 0,0:00:59.19,0:01:00.41,Default,,0,0,0,,that are designed to help your
Dialogue: 0,0:01:00.41,0:01:02.65,Default,,0,0,0,,user accomplish their goals in a
Dialogue: 0,0:01:02.65,0:01:04.91,Default,,0,0,0,,simple, quick way so that the
Dialogue: 0,0:01:04.91,0:01:06.73,Default,,0,0,0,,technology disappears and the
Dialogue: 0,0:01:06.73,0:01:08.95,Default,,0,0,0,,user can go about their day and
Dialogue: 0,0:01:08.95,0:01:11.20,Default,,0,0,0,,have an enhanced experience, all
Dialogue: 0,0:01:11.20,0:01:14.49,Default,,0,0,0,,because of your app.
Dialogue: 0,0:01:14.76,0:01:16.71,Default,,0,0,0,,So, today we're going to design
Dialogue: 0,0:01:16.71,0:01:18.36,Default,,0,0,0,,an app that I've been working on
Dialogue: 0,0:01:18.36,0:01:19.27,Default,,0,0,0,,in watchOS 3.
Dialogue: 0,0:01:19.89,0:01:21.34,Default,,0,0,0,,We're not ready to ship it just
Dialogue: 0,0:01:21.34,0:01:23.05,Default,,0,0,0,,yet, but we'll get to take
Dialogue: 0,0:01:23.05,0:01:24.40,Default,,0,0,0,,advantage of some of the new
Dialogue: 0,0:01:24.40,0:01:26.68,Default,,0,0,0,,capabilities and enhancements in
Dialogue: 0,0:01:26.68,0:01:28.80,Default,,0,0,0,,watchOS 4 to take our app to the
Dialogue: 0,0:01:28.80,0:01:30.15,Default,,0,0,0,,next level.
Dialogue: 0,0:01:30.76,0:01:32.79,Default,,0,0,0,,Today, we're going to talk
Dialogue: 0,0:01:32.79,0:01:34.54,Default,,0,0,0,,through four different additions
Dialogue: 0,0:01:34.54,0:01:36.81,Default,,0,0,0,,in watchOS 4 that can help
Dialogue: 0,0:01:36.81,0:01:37.61,Default,,0,0,0,,design our app.
Dialogue: 0,0:01:38.49,0:01:39.51,Default,,0,0,0,,We're going to talk about some
Dialogue: 0,0:01:39.51,0:01:41.45,Default,,0,0,0,,new things, such as our new
Dialogue: 0,0:01:43.17,0:01:45.08,Default,,0,0,0,,Unified Process Runtime.
Dialogue: 0,0:01:45.50,0:01:46.90,Default,,0,0,0,,We're going to get some great
Dialogue: 0,0:01:46.90,0:01:48.30,Default,,0,0,0,,performance improvements in our
Dialogue: 0,0:01:48.30,0:01:49.49,Default,,0,0,0,,app, and I'm going to show you
Dialogue: 0,0:01:49.49,0:01:51.23,Default,,0,0,0,,how to do so in watchOS 4.
Dialogue: 0,0:01:53.38,0:01:54.87,Default,,0,0,0,,We're going to talk through our
Dialogue: 0,0:01:54.87,0:01:56.38,Default,,0,0,0,,new Frontmost App State.
Dialogue: 0,0:01:56.77,0:01:58.00,Default,,0,0,0,,We're going to take advantage of
Dialogue: 0,0:01:58.00,0:02:00.16,Default,,0,0,0,,this state and build an amazing
Dialogue: 0,0:02:00.16,0:02:01.53,Default,,0,0,0,,experience for our user.
Dialogue: 0,0:02:03.78,0:02:05.65,Default,,0,0,0,,Also, we're going to talk about
Dialogue: 0,0:02:05.65,0:02:07.17,Default,,0,0,0,,some new improvements we've made
Dialogue: 0,0:02:07.17,0:02:09.25,Default,,0,0,0,,to Background App Refresh, and
Dialogue: 0,0:02:09.42,0:02:10.60,Default,,0,0,0,,how we can take advantage of
Dialogue: 0,0:02:10.60,0:02:10.89,Default,,0,0,0,,them.
Dialogue: 0,0:02:12.68,0:02:14.79,Default,,0,0,0,,And lastly, we're going to talk
Dialogue: 0,0:02:14.79,0:02:16.51,Default,,0,0,0,,about some new background modes
Dialogue: 0,0:02:16.51,0:02:18.84,Default,,0,0,0,,that are available in watchOS 4,
Dialogue: 0,0:02:18.84,0:02:20.22,Default,,0,0,0,,and take advantage of one of
Dialogue: 0,0:02:20.22,0:02:21.04,Default,,0,0,0,,them in our app.
Dialogue: 0,0:02:22.13,0:02:24.34,Default,,0,0,0,,So, let's get started and dive
Dialogue: 0,0:02:24.34,0:02:26.72,Default,,0,0,0,,right into our new Unified
Dialogue: 0,0:02:26.72,0:02:27.74,Default,,0,0,0,,Process Runtime.
Dialogue: 0,0:02:28.60,0:02:29.89,Default,,0,0,0,,So, we've designed a
Dialogue: 0,0:02:29.89,0:02:31.60,Default,,0,0,0,,single-process architecture that
Dialogue: 0,0:02:31.60,0:02:33.28,Default,,0,0,0,,will help your apps become even
Dialogue: 0,0:02:33.28,0:02:35.17,Default,,0,0,0,,faster and more responsive to
Dialogue: 0,0:02:35.17,0:02:35.91,Default,,0,0,0,,your user.
Dialogue: 0,0:02:36.53,0:02:38.52,Default,,0,0,0,,So, let's now just revisit some
Dialogue: 0,0:02:38.52,0:02:39.80,Default,,0,0,0,,of the history of where we came
Dialogue: 0,0:02:39.80,0:02:41.06,Default,,0,0,0,,from and where we're now at,
Dialogue: 0,0:02:41.15,0:02:41.43,Default,,0,0,0,,today.
Dialogue: 0,0:02:43.57,0:02:46.00,Default,,0,0,0,,So in watchOS 3, your apps UI
Dialogue: 0,0:02:46.00,0:02:47.81,Default,,0,0,0,,lived in the app process, which
Dialogue: 0,0:02:47.81,0:02:49.56,Default,,0,0,0,,we managed for you, and your
Dialogue: 0,0:02:49.56,0:02:51.46,Default,,0,0,0,,code lived in the watch
Dialogue: 0,0:02:51.46,0:02:53.21,Default,,0,0,0,,extension, so we had two
Dialogue: 0,0:02:53.21,0:02:54.72,Default,,0,0,0,,separate processes, in this
Dialogue: 0,0:02:54.72,0:02:56.08,Default,,0,0,0,,case, that lived on the system.
Dialogue: 0,0:02:57.44,0:02:59.30,Default,,0,0,0,,So, we changed things internally
Dialogue: 0,0:02:59.30,0:03:01.21,Default,,0,0,0,,and unified our process runtime,
Dialogue: 0,0:03:02.11,0:03:04.65,Default,,0,0,0,,so now the UI and your extension
Dialogue: 0,0:03:04.65,0:03:06.65,Default,,0,0,0,,code all get executed from the
Dialogue: 0,0:03:06.65,0:03:07.60,Default,,0,0,0,,same process.
Dialogue: 0,0:03:08.30,0:03:09.93,Default,,0,0,0,,And now, you might be wondering,
Dialogue: 0,0:03:09.93,0:03:13.27,Default,,0,0,0,,why exactly did we do this?
Dialogue: 0,0:03:13.45,0:03:15.50,Default,,0,0,0,,So ultimately, we wanted to
Dialogue: 0,0:03:15.50,0:03:17.16,Default,,0,0,0,,improve the performance of all
Dialogue: 0,0:03:17.16,0:03:19.53,Default,,0,0,0,,WatchKit apps on watchOS 4, so
Dialogue: 0,0:03:19.53,0:03:21.36,Default,,0,0,0,,users could have an even better
Dialogue: 0,0:03:21.36,0:03:22.60,Default,,0,0,0,,experience with your apps.
Dialogue: 0,0:03:23.25,0:03:25.33,Default,,0,0,0,,And, I'm really happy to say,
Dialogue: 0,0:03:25.33,0:03:26.91,Default,,0,0,0,,we've accomplished our goals.
Dialogue: 0,0:03:28.07,0:03:29.56,Default,,0,0,0,,We can see touch latency
Dialogue: 0,0:03:29.56,0:03:30.95,Default,,0,0,0,,improvements of almost up to
Dialogue: 0,0:03:30.95,0:03:33.42,Default,,0,0,0,,twice as fast in some cases.
Dialogue: 0,0:03:33.99,0:03:35.55,Default,,0,0,0,,So, from the moment a user
Dialogue: 0,0:03:35.55,0:03:37.13,Default,,0,0,0,,actually touches the screen, to
Dialogue: 0,0:03:37.13,0:03:38.96,Default,,0,0,0,,when your code gets called into,
Dialogue: 0,0:03:39.24,0:03:40.44,Default,,0,0,0,,we've seen a dramatic
Dialogue: 0,0:03:40.44,0:03:41.08,Default,,0,0,0,,improvement.
Dialogue: 0,0:03:42.24,0:03:44.03,Default,,0,0,0,,Also, for example, we've seen
Dialogue: 0,0:03:44.03,0:03:45.38,Default,,0,0,0,,dramatic frames-per-second
Dialogue: 0,0:03:45.38,0:03:47.12,Default,,0,0,0,,improvements when tied to
Dialogue: 0,0:03:47.12,0:03:49.68,Default,,0,0,0,,general pan gestures, and we
Dialogue: 0,0:03:49.68,0:03:51.16,Default,,0,0,0,,expect launch performance to
Dialogue: 0,0:03:51.16,0:03:51.99,Default,,0,0,0,,also improve.
Dialogue: 0,0:03:53.18,0:03:55.07,Default,,0,0,0,,And now, since we just have one
Dialogue: 0,0:03:55.07,0:03:57.38,Default,,0,0,0,,process to manage your UI and
Dialogue: 0,0:03:57.38,0:03:59.24,Default,,0,0,0,,your extension code, we now have
Dialogue: 0,0:03:59.24,0:04:00.98,Default,,0,0,0,,upped the memory limits to
Dialogue: 0,0:04:00.98,0:04:01.73,Default,,0,0,0,,account for this.
Dialogue: 0,0:04:03.02,0:04:04.00,Default,,0,0,0,,And, you might be wondering,
Dialogue: 0,0:04:04.00,0:04:04.97,Default,,0,0,0,,there's a lot of architecture
Dialogue: 0,0:04:04.97,0:04:07.04,Default,,0,0,0,,that we did internally, so what
Dialogue: 0,0:04:07.04,0:04:08.35,Default,,0,0,0,,do you all have to do to change
Dialogue: 0,0:04:08.52,0:04:10.66,Default,,0,0,0,,your apps to adopt this new
Dialogue: 0,0:04:10.66,0:04:11.31,Default,,0,0,0,,mechanism?
Dialogue: 0,0:04:11.63,0:04:13.38,Default,,0,0,0,,And, the great thing is that
Dialogue: 0,0:04:13.38,0:04:14.65,Default,,0,0,0,,there are actually no changes
Dialogue: 0,0:04:14.65,0:04:15.61,Default,,0,0,0,,required at all.
Dialogue: 0,0:04:16.21,0:04:18.47,Default,,0,0,0,,So, you'll be happy to hear that
Dialogue: 0,0:04:18.82,0:04:20.37,Default,,0,0,0,,all existing native WatchKit
Dialogue: 0,0:04:20.37,0:04:22.24,Default,,0,0,0,,extensions in the App Store
Dialogue: 0,0:04:22.24,0:04:24.78,Default,,0,0,0,,today will get this behavior as
Dialogue: 0,0:04:24.78,0:04:26.23,Default,,0,0,0,,soon as your user upgrades to
Dialogue: 0,0:04:26.23,0:04:27.12,Default,,0,0,0,,watchOS 4.
Dialogue: 0,0:04:27.78,0:04:29.69,Default,,0,0,0,,This new Unified Process Runtime
Dialogue: 0,0:04:29.69,0:04:30.99,Default,,0,0,0,,is completely backwards
Dialogue: 0,0:04:30.99,0:04:31.61,Default,,0,0,0,,compatible.
Dialogue: 0,0:04:32.79,0:04:34.29,Default,,0,0,0,,As long as your app is built
Dialogue: 0,0:04:34.29,0:04:36.34,Default,,0,0,0,,with watchOS 2 or later, you
Dialogue: 0,0:04:36.34,0:04:38.01,Default,,0,0,0,,don't have to anything else.
Dialogue: 0,0:04:38.83,0:04:40.82,Default,,0,0,0,,So, this means the app we're
Dialogue: 0,0:04:40.82,0:04:43.02,Default,,0,0,0,,going to improve today doesn't
Dialogue: 0,0:04:43.02,0:04:45.13,Default,,0,0,0,,need to change in Xcode, or on
Dialogue: 0,0:04:45.13,0:04:45.84,Default,,0,0,0,,the App Store.
Dialogue: 0,0:04:46.05,0:04:47.43,Default,,0,0,0,,It just works.
Dialogue: 0,0:04:49.59,0:04:51.95,Default,,0,0,0,,So now, let's talk about our new
Dialogue: 0,0:04:52.09,0:04:53.04,Default,,0,0,0,,Frontmost App State.
Dialogue: 0,0:04:54.13,0:04:56.21,Default,,0,0,0,,On the watch, a user many times
Dialogue: 0,0:04:56.21,0:04:57.52,Default,,0,0,0,,uses an app in a matter of
Dialogue: 0,0:04:57.52,0:04:59.67,Default,,0,0,0,,seconds, and then they put their
Dialogue: 0,0:04:59.67,0:05:01.45,Default,,0,0,0,,wrist down and expect the app to
Dialogue: 0,0:05:01.45,0:05:03.46,Default,,0,0,0,,finish up whatever task needs to
Dialogue: 0,0:05:03.46,0:05:04.07,Default,,0,0,0,,be finished.
Dialogue: 0,0:05:05.35,0:05:07.10,Default,,0,0,0,,Many times, a user wants to
Dialogue: 0,0:05:07.10,0:05:08.80,Default,,0,0,0,,raise their wrist again and see
Dialogue: 0,0:05:08.80,0:05:10.52,Default,,0,0,0,,your app has finished doing
Dialogue: 0,0:05:10.52,0:05:12.63,Default,,0,0,0,,whatever it needs to, and they
Dialogue: 0,0:05:12.63,0:05:14.41,Default,,0,0,0,,want it to feel like magic.
Dialogue: 0,0:05:15.32,0:05:16.40,Default,,0,0,0,,And, users shouldn't have to
Dialogue: 0,0:05:16.40,0:05:17.61,Default,,0,0,0,,keep their wrist up, for your
Dialogue: 0,0:05:17.61,0:05:18.56,Default,,0,0,0,,app to have to finish doing
Dialogue: 0,0:05:18.56,0:05:19.74,Default,,0,0,0,,whatever task it needs to
Dialogue: 0,0:05:19.74,0:05:21.47,Default,,0,0,0,,finish, and this is a really
Dialogue: 0,0:05:21.47,0:05:23.20,Default,,0,0,0,,common pain point for our users.
Dialogue: 0,0:05:24.12,0:05:26.81,Default,,0,0,0,,So, we thought a lot about all
Dialogue: 0,0:05:26.81,0:05:28.01,Default,,0,0,0,,the different ways we could give
Dialogue: 0,0:05:28.01,0:05:30.25,Default,,0,0,0,,you all more runtime to help
Dialogue: 0,0:05:30.25,0:05:32.22,Default,,0,0,0,,finish your tasks for your user,
Dialogue: 0,0:05:32.79,0:05:35.25,Default,,0,0,0,,and today, we're introducing a
Dialogue: 0,0:05:35.25,0:05:36.93,Default,,0,0,0,,collection of new capabilities
Dialogue: 0,0:05:37.14,0:05:38.93,Default,,0,0,0,,we call the Frontmost App State
Dialogue: 0,0:05:38.93,0:05:40.98,Default,,0,0,0,,to help you design experiences
Dialogue: 0,0:05:40.98,0:05:41.87,Default,,0,0,0,,for this case.
Dialogue: 0,0:05:44.19,0:05:46.46,Default,,0,0,0,,So, without further ado, let's
Dialogue: 0,0:05:46.46,0:05:47.28,Default,,0,0,0,,talk about our app.
Dialogue: 0,0:05:47.99,0:05:51.44,Default,,0,0,0,,So, the app is called Apple Pie
Dialogue: 0,0:05:51.44,0:05:53.38,Default,,0,0,0,,Me, and let's see how it looks.
Dialogue: 0,0:05:53.90,0:05:55.91,Default,,0,0,0,,So, it's a food delivery service
Dialogue: 0,0:05:55.91,0:05:57.20,Default,,0,0,0,,where you can get apple pies
Dialogue: 0,0:05:57.32,0:05:59.21,Default,,0,0,0,,delivered wherever you are, so
Dialogue: 0,0:05:59.21,0:06:00.26,Default,,0,0,0,,an apple pie a day keeps the
Dialogue: 0,0:06:00.26,0:06:01.15,Default,,0,0,0,,doctor away, right?
Dialogue: 0,0:06:01.68,0:06:03.98,Default,,0,0,0,,I think so, at least, I really
Dialogue: 0,0:06:03.98,0:06:05.87,Default,,0,0,0,,hope so, because I eat an apple
Dialogue: 0,0:06:05.87,0:06:07.74,Default,,0,0,0,,pie every single day, and
Dialogue: 0,0:06:07.79,0:06:08.66,Default,,0,0,0,,they're delicious.
Dialogue: 0,0:06:09.84,0:06:12.11,Default,,0,0,0,,And, I'm pretty busy, and I
Dialogue: 0,0:06:12.11,0:06:13.15,Default,,0,0,0,,always just want to quickly
Dialogue: 0,0:06:13.15,0:06:14.48,Default,,0,0,0,,order my apple pie, and get it
Dialogue: 0,0:06:14.48,0:06:15.69,Default,,0,0,0,,delivered wherever I am.
Dialogue: 0,0:06:16.70,0:06:18.32,Default,,0,0,0,,And, most importantly, I want to
Dialogue: 0,0:06:18.32,0:06:20.02,Default,,0,0,0,,tap the order button and then
Dialogue: 0,0:06:20.02,0:06:21.71,Default,,0,0,0,,simply put my wrist down and go
Dialogue: 0,0:06:21.71,0:06:22.43,Default,,0,0,0,,about my day.
Dialogue: 0,0:06:23.20,0:06:24.99,Default,,0,0,0,,In watchOS 3, it was a bit
Dialogue: 0,0:06:25.04,0:06:26.51,Default,,0,0,0,,difficult to build a perfect
Dialogue: 0,0:06:26.51,0:06:28.97,Default,,0,0,0,,experience, but with watchOS 4,
Dialogue: 0,0:06:28.97,0:06:30.29,Default,,0,0,0,,I'm going to show you how to
Dialogue: 0,0:06:30.29,0:06:32.17,Default,,0,0,0,,surprise and delight your users
Dialogue: 0,0:06:32.31,0:06:33.81,Default,,0,0,0,,using our new Frontmost App
Dialogue: 0,0:06:33.81,0:06:34.15,Default,,0,0,0,,State.
Dialogue: 0,0:06:36.17,0:06:37.95,Default,,0,0,0,,So, to help explain the
Dialogue: 0,0:06:37.95,0:06:39.68,Default,,0,0,0,,Frontmost App State, we're going
Dialogue: 0,0:06:39.68,0:06:41.39,Default,,0,0,0,,to talk through what exactly
Dialogue: 0,0:06:41.39,0:06:42.79,Default,,0,0,0,,application state means on the
Dialogue: 0,0:06:42.79,0:06:44.85,Default,,0,0,0,,watch, what does the term
Dialogue: 0,0:06:44.85,0:06:46.99,Default,,0,0,0,,frontmost mean, the enhanced
Dialogue: 0,0:06:46.99,0:06:48.18,Default,,0,0,0,,capabilities that you're going
Dialogue: 0,0:06:48.18,0:06:50.39,Default,,0,0,0,,to receive, and lastly, we're
Dialogue: 0,0:06:50.39,0:06:51.15,Default,,0,0,0,,going to walk through
Dialogue: 0,0:06:51.15,0:06:52.68,Default,,0,0,0,,architecting our Apple Pie Me
Dialogue: 0,0:06:52.68,0:06:52.91,Default,,0,0,0,,app.
Dialogue: 0,0:06:55.45,0:06:56.88,Default,,0,0,0,,So, let's say our user decides
Dialogue: 0,0:06:56.88,0:06:57.61,Default,,0,0,0,,to launch our app.
Dialogue: 0,0:06:58.06,0:07:00.29,Default,,0,0,0,,So here, the app is foreground,
Dialogue: 0,0:07:00.42,0:07:01.79,Default,,0,0,0,,the screen is on, and the
Dialogue: 0,0:07:01.79,0:07:03.49,Default,,0,0,0,,application state, in this case,
Dialogue: 0,0:07:03.49,0:07:04.14,Default,,0,0,0,,is active.
Dialogue: 0,0:07:05.47,0:07:06.62,Default,,0,0,0,,So now, let's say our user
Dialogue: 0,0:07:06.62,0:07:08.06,Default,,0,0,0,,decided to go back to the watch
Dialogue: 0,0:07:08.06,0:07:08.40,Default,,0,0,0,,face.
Dialogue: 0,0:07:09.29,0:07:11.95,Default,,0,0,0,,So, in this case, the app is
Dialogue: 0,0:07:11.95,0:07:14.36,Default,,0,0,0,,actually in the background and,
Dialogue: 0,0:07:14.49,0:07:15.94,Default,,0,0,0,,for instance, your application
Dialogue: 0,0:07:15.94,0:07:16.82,Default,,0,0,0,,might be running for a
Dialogue: 0,0:07:16.82,0:07:18.10,Default,,0,0,0,,complication update, for
Dialogue: 0,0:07:18.10,0:07:18.51,Default,,0,0,0,,example.
Dialogue: 0,0:07:20.04,0:07:21.25,Default,,0,0,0,,And now, let's say our user
Dialogue: 0,0:07:21.25,0:07:23.61,Default,,0,0,0,,decides to go back to our app.
Dialogue: 0,0:07:23.71,0:07:25.26,Default,,0,0,0,,So, we're active in foreground
Dialogue: 0,0:07:25.26,0:07:27.17,Default,,0,0,0,,again, and now the user's using
Dialogue: 0,0:07:27.17,0:07:28.73,Default,,0,0,0,,the app, but then they decide
Dialogue: 0,0:07:28.73,0:07:29.59,Default,,0,0,0,,they want to put their wrist
Dialogue: 0,0:07:29.59,0:07:29.90,Default,,0,0,0,,down.
Dialogue: 0,0:07:30.32,0:07:32.26,Default,,0,0,0,,So, the screen turns off, and
Dialogue: 0,0:07:32.26,0:07:33.99,Default,,0,0,0,,your app is no longer foreground
Dialogue: 0,0:07:34.59,0:07:35.40,Default,,0,0,0,,because of this.
Dialogue: 0,0:07:35.96,0:07:37.78,Default,,0,0,0,,However, since your app was the
Dialogue: 0,0:07:37.78,0:07:39.25,Default,,0,0,0,,last thing used, it's the
Dialogue: 0,0:07:39.25,0:07:42.00,Default,,0,0,0,,frontmost app, so when the user
Dialogue: 0,0:07:42.00,0:07:43.74,Default,,0,0,0,,raises their wrist again, your
Dialogue: 0,0:07:43.74,0:07:45.17,Default,,0,0,0,,app will be what they see,
Dialogue: 0,0:07:45.58,0:07:46.93,Default,,0,0,0,,instead of the watch face.
Dialogue: 0,0:07:48.14,0:07:50.16,Default,,0,0,0,,During this time, we think of
Dialogue: 0,0:07:50.16,0:07:51.73,Default,,0,0,0,,your app as the frontmost app.
Dialogue: 0,0:07:52.87,0:07:54.48,Default,,0,0,0,,So now, when your app is
Dialogue: 0,0:07:54.48,0:07:56.00,Default,,0,0,0,,frontmost in this way, the
Dialogue: 0,0:07:56.00,0:07:57.82,Default,,0,0,0,,application state will be
Dialogue: 0,0:07:57.82,0:08:00.12,Default,,0,0,0,,background, and you might be
Dialogue: 0,0:08:00.12,0:08:02.37,Default,,0,0,0,,wondering how exactly, or how
Dialogue: 0,0:08:02.37,0:08:04.07,Default,,0,0,0,,long does the app stay frontmost
Dialogue: 0,0:08:04.07,0:08:04.30,Default,,0,0,0,,for?
Dialogue: 0,0:08:05.65,0:08:07.30,Default,,0,0,0,,So, it's going to be two minutes
Dialogue: 0,0:08:07.30,0:08:08.24,Default,,0,0,0,,for all apps.
Dialogue: 0,0:08:09.11,0:08:10.84,Default,,0,0,0,,However, if there is an
Dialogue: 0,0:08:10.84,0:08:13.15,Default,,0,0,0,,expectation by your user to see
Dialogue: 0,0:08:13.15,0:08:14.97,Default,,0,0,0,,your app next when they raise
Dialogue: 0,0:08:14.97,0:08:16.36,Default,,0,0,0,,their wrist, then you can use a
Dialogue: 0,0:08:16.36,0:08:18.72,Default,,0,0,0,,new API to extend this timeout
Dialogue: 0,0:08:18.99,0:08:20.01,Default,,0,0,0,,to be eight minutes.
Dialogue: 0,0:08:21.18,0:08:22.84,Default,,0,0,0,,So, for example, if you're a
Dialogue: 0,0:08:22.84,0:08:24.19,Default,,0,0,0,,ride-sharing app in the middle
Dialogue: 0,0:08:24.19,0:08:26.09,Default,,0,0,0,,of a ride, then you might want
Dialogue: 0,0:08:26.09,0:08:27.41,Default,,0,0,0,,additional time in the frontmost
Dialogue: 0,0:08:27.41,0:08:28.53,Default,,0,0,0,,state, because there's a
Dialogue: 0,0:08:28.53,0:08:30.41,Default,,0,0,0,,reasonable expectation that the
Dialogue: 0,0:08:30.41,0:08:32.12,Default,,0,0,0,,user wants to see your app the
Dialogue: 0,0:08:32.12,0:08:33.14,Default,,0,0,0,,next time they raise their
Dialogue: 0,0:08:33.14,0:08:33.55,Default,,0,0,0,,wrist.
Dialogue: 0,0:08:34.68,0:08:37.04,Default,,0,0,0,,However, in many cases, if you
Dialogue: 0,0:08:37.04,0:08:38.97,Default,,0,0,0,,forget to turn this off when
Dialogue: 0,0:08:38.97,0:08:40.18,Default,,0,0,0,,it's not needed, you can
Dialogue: 0,0:08:40.18,0:08:42.19,Default,,0,0,0,,unwittingly annoy your user and
Dialogue: 0,0:08:42.19,0:08:43.23,Default,,0,0,0,,leave them with a subpar
Dialogue: 0,0:08:43.23,0:08:44.02,Default,,0,0,0,,experience.
Dialogue: 0,0:08:44.50,0:08:46.20,Default,,0,0,0,,So, always just make sure to
Dialogue: 0,0:08:46.20,0:08:48.05,Default,,0,0,0,,turn it off, to reset the time
Dialogue: 0,0:08:48.05,0:08:49.90,Default,,0,0,0,,back to two minutes when you no
Dialogue: 0,0:08:49.90,0:08:51.16,Default,,0,0,0,,longer need this experience.
Dialogue: 0,0:08:52.46,0:08:54.63,Default,,0,0,0,,So, let's jump into code to see
Dialogue: 0,0:08:54.63,0:08:56.09,Default,,0,0,0,,how we might enable the extended
Dialogue: 0,0:08:56.09,0:08:56.48,Default,,0,0,0,,timeout.
Dialogue: 0,0:08:58.73,0:09:00.00,Default,,0,0,0,,So, it's really simple.
Dialogue: 0,0:09:00.00,0:09:01.46,Default,,0,0,0,,It's a Boolean property on our
Dialogue: 0,0:09:01.46,0:09:03.20,Default,,0,0,0,,WKExtension, and when we want
Dialogue: 0,0:09:03.20,0:09:04.46,Default,,0,0,0,,eight minutes, we can set it to
Dialogue: 0,0:09:04.46,0:09:06.25,Default,,0,0,0,,be true, and when we want to go
Dialogue: 0,0:09:06.25,0:09:07.42,Default,,0,0,0,,back to the default of two
Dialogue: 0,0:09:07.42,0:09:08.63,Default,,0,0,0,,minutes, we just set it to be
Dialogue: 0,0:09:08.63,0:09:09.07,Default,,0,0,0,,false.
Dialogue: 0,0:09:11.92,0:09:13.71,Default,,0,0,0,,So, there's one other point I
Dialogue: 0,0:09:13.71,0:09:14.67,Default,,0,0,0,,wanted to mention.
Dialogue: 0,0:09:14.94,0:09:16.82,Default,,0,0,0,,If the user raises their wrist
Dialogue: 0,0:09:16.82,0:09:18.31,Default,,0,0,0,,and views your app, then the
Dialogue: 0,0:09:18.31,0:09:20.92,Default,,0,0,0,,timeout is reset, regardless if,
Dialogue: 0,0:09:20.92,0:09:23.27,Default,,0,0,0,,if you use the frontmost
Dialogue: 0,0:09:23.27,0:09:24.67,Default,,0,0,0,,extended API or not.
Dialogue: 0,0:09:25.72,0:09:27.56,Default,,0,0,0,,Essentially, if the user is
Dialogue: 0,0:09:27.56,0:09:29.12,Default,,0,0,0,,still interested in using your
Dialogue: 0,0:09:29.12,0:09:30.53,Default,,0,0,0,,app, your app will stay
Dialogue: 0,0:09:30.53,0:09:31.23,Default,,0,0,0,,frontmost.
Dialogue: 0,0:09:34.03,0:09:36.38,Default,,0,0,0,,So, now we know what frontmost
Dialogue: 0,0:09:36.38,0:09:37.93,Default,,0,0,0,,means, but what does this all
Dialogue: 0,0:09:37.93,0:09:38.66,Default,,0,0,0,,really mean?
Dialogue: 0,0:09:38.66,0:09:40.03,Default,,0,0,0,,Like, what exactly does this new
Dialogue: 0,0:09:40.03,0:09:40.79,Default,,0,0,0,,state give us?
Dialogue: 0,0:09:41.47,0:09:42.74,Default,,0,0,0,,Well, we're going to get some
Dialogue: 0,0:09:42.74,0:09:43.96,Default,,0,0,0,,enhanced capabilities.
Dialogue: 0,0:09:44.56,0:09:47.38,Default,,0,0,0,,So, we're going to change the
Dialogue: 0,0:09:47.38,0:09:48.68,Default,,0,0,0,,notion of how we get our
Dialogue: 0,0:09:48.68,0:09:50.34,Default,,0,0,0,,WatchConnectivity resumes, and
Dialogue: 0,0:09:50.34,0:09:51.98,Default,,0,0,0,,our NSURLSession resumes.
Dialogue: 0,0:09:52.19,0:09:53.14,Default,,0,0,0,,So, our transfer and
Dialogue: 0,0:09:53.14,0:09:55.00,Default,,0,0,0,,connectivity is now improved.
Dialogue: 0,0:09:55.60,0:09:57.46,Default,,0,0,0,,We'll also change a little bit
Dialogue: 0,0:09:57.46,0:09:58.98,Default,,0,0,0,,about our task completions.
Dialogue: 0,0:09:59.46,0:10:00.52,Default,,0,0,0,,>> And then, we're also going to
Dialogue: 0,0:10:00.52,0:10:01.87,Default,,0,0,0,,allow haptics to be played in
Dialogue: 0,0:10:01.87,0:10:02.90,Default,,0,0,0,,this frontmost state.
Dialogue: 0,0:10:03.22,0:10:04.95,Default,,0,0,0,,And lastly, we're going to get a
Dialogue: 0,0:10:04.95,0:10:06.53,Default,,0,0,0,,frontmost notification, so we
Dialogue: 0,0:10:06.53,0:10:08.79,Default,,0,0,0,,can handle this via the user
Dialogue: 0,0:10:08.79,0:10:10.43,Default,,0,0,0,,notifications framework, and
Dialogue: 0,0:10:10.43,0:10:11.74,Default,,0,0,0,,choose the right experience.
Dialogue: 0,0:10:13.23,0:10:14.57,Default,,0,0,0,,So, let's dive right in.
Dialogue: 0,0:10:15.18,0:10:18.27,Default,,0,0,0,,So, for WatchConnectivity, we've
Dialogue: 0,0:10:18.27,0:10:19.90,Default,,0,0,0,,changed the way our background
Dialogue: 0,0:10:19.90,0:10:22.12,Default,,0,0,0,,transfers work, so when you use
Dialogue: 0,0:10:22.12,0:10:23.93,Default,,0,0,0,,on the phone, update application
Dialogue: 0,0:10:23.93,0:10:26.30,Default,,0,0,0,,context, transfer user info, or
Dialogue: 0,0:10:26.30,0:10:28.47,Default,,0,0,0,,transfer file, the request, when
Dialogue: 0,0:10:28.47,0:10:29.71,Default,,0,0,0,,you send it from the phone to
Dialogue: 0,0:10:29.71,0:10:31.52,Default,,0,0,0,,the watch, it'll just go right
Dialogue: 0,0:10:31.57,0:10:33.34,Default,,0,0,0,,through, wake up your app on the
Dialogue: 0,0:10:33.34,0:10:35.04,Default,,0,0,0,,watch, and then just deliver
Dialogue: 0,0:10:35.04,0:10:35.69,Default,,0,0,0,,your payload.
Dialogue: 0,0:10:36.94,0:10:39.46,Default,,0,0,0,,And, there's one point I wanted
Dialogue: 0,0:10:39.46,0:10:40.85,Default,,0,0,0,,to mention in relation to
Dialogue: 0,0:10:40.85,0:10:42.70,Default,,0,0,0,,WatchConnectivity, is that send
Dialogue: 0,0:10:42.70,0:10:44.27,Default,,0,0,0,,message won't work when you're
Dialogue: 0,0:10:44.27,0:10:45.90,Default,,0,0,0,,frontmost, but the screen's off,
Dialogue: 0,0:10:46.13,0:10:47.40,Default,,0,0,0,,because your application state
Dialogue: 0,0:10:47.40,0:10:48.05,Default,,0,0,0,,is background.
Dialogue: 0,0:10:48.96,0:10:50.38,Default,,0,0,0,,So, just always make sure that
Dialogue: 0,0:10:50.38,0:10:52.15,Default,,0,0,0,,call is reachable first, and
Dialogue: 0,0:10:52.15,0:10:53.27,Default,,0,0,0,,then that can allow you to send
Dialogue: 0,0:10:53.27,0:10:53.83,Default,,0,0,0,,the message.
Dialogue: 0,0:10:55.20,0:10:56.76,Default,,0,0,0,,And, along the same vein as
Dialogue: 0,0:10:56.76,0:10:58.70,Default,,0,0,0,,WatchConnectivity, we're also
Dialogue: 0,0:10:58.70,0:10:59.86,Default,,0,0,0,,going to change the notion of
Dialogue: 0,0:10:59.86,0:11:01.85,Default,,0,0,0,,our resumes for NSURLSession.
Dialogue: 0,0:11:02.42,0:11:03.82,Default,,0,0,0,,So, when we have a background
Dialogue: 0,0:11:03.82,0:11:05.73,Default,,0,0,0,,download, for instance, and the
Dialogue: 0,0:11:05.73,0:11:07.34,Default,,0,0,0,,system's downloading it for us,
Dialogue: 0,0:11:08.12,0:11:09.14,Default,,0,0,0,,and then when the system is
Dialogue: 0,0:11:09.14,0:11:09.99,Default,,0,0,0,,finished, it's going to
Dialogue: 0,0:11:09.99,0:11:11.89,Default,,0,0,0,,automatically wake up our app,
Dialogue: 0,0:11:11.89,0:11:13.18,Default,,0,0,0,,if we're in the frontmost state,
Dialogue: 0,0:11:13.45,0:11:15.12,Default,,0,0,0,,and deliver the data right to
Dialogue: 0,0:11:15.12,0:11:16.71,Default,,0,0,0,,our application.
Dialogue: 0,0:11:18.36,0:11:19.40,Default,,0,0,0,,And, of course, with
Dialogue: 0,0:11:19.40,0:11:20.80,Default,,0,0,0,,NSURLSession, there is actually
Dialogue: 0,0:11:20.80,0:11:21.94,Default,,0,0,0,,two major parts.
Dialogue: 0,0:11:22.25,0:11:23.48,Default,,0,0,0,,There is the resume, when the
Dialogue: 0,0:11:23.48,0:11:25.45,Default,,0,0,0,,system has actually completed
Dialogue: 0,0:11:25.45,0:11:26.77,Default,,0,0,0,,downloading whatever it is you
Dialogue: 0,0:11:26.77,0:11:28.34,Default,,0,0,0,,need, but then there's also the
Dialogue: 0,0:11:28.34,0:11:30.39,Default,,0,0,0,,initiation of a download in the
Dialogue: 0,0:11:30.39,0:11:30.94,Default,,0,0,0,,background.
Dialogue: 0,0:11:32.39,0:11:34.25,Default,,0,0,0,,So, in most cases, this will
Dialogue: 0,0:11:34.25,0:11:36.57,Default,,0,0,0,,occur immediately, also, and in
Dialogue: 0,0:11:36.57,0:11:38.07,Default,,0,0,0,,very rare cases, it could get
Dialogue: 0,0:11:38.07,0:11:40.73,Default,,0,0,0,,delayed up to 10 minutes, but
Dialogue: 0,0:11:40.73,0:11:42.30,Default,,0,0,0,,it's a very rare situation.
Dialogue: 0,0:11:42.94,0:11:44.57,Default,,0,0,0,,If you've ever used
Dialogue: 0,0:11:44.64,0:11:46.59,Default,,0,0,0,,NSURLSession, which probably
Dialogue: 0,0:11:46.59,0:11:48.32,Default,,0,0,0,,almost everyone has here, for a
Dialogue: 0,0:11:48.32,0:11:49.94,Default,,0,0,0,,background transfer, this is a
Dialogue: 0,0:11:49.94,0:11:51.48,Default,,0,0,0,,really big deal on the frontmost
Dialogue: 0,0:11:51.48,0:11:51.77,Default,,0,0,0,,state.
Dialogue: 0,0:11:52.23,0:11:54.73,Default,,0,0,0,,To reliably depend on the
Dialogue: 0,0:11:54.73,0:11:57.87,Default,,0,0,0,,initiation and the resume of our
Dialogue: 0,0:11:57.87,0:11:59.97,Default,,0,0,0,,connectivity is really going to
Dialogue: 0,0:11:59.97,0:12:01.37,Default,,0,0,0,,change the design landscape for
Dialogue: 0,0:12:01.37,0:12:03.13,Default,,0,0,0,,the watch, and also, in
Dialogue: 0,0:12:03.13,0:12:03.82,Default,,0,0,0,,addition, with our
Dialogue: 0,0:12:03.82,0:12:05.23,Default,,0,0,0,,WatchConnectivity and getting
Dialogue: 0,0:12:05.23,0:12:06.44,Default,,0,0,0,,requests right from our phone.
Dialogue: 0,0:12:09.25,0:12:12.83,Default,,0,0,0,,So, another thing is, a lot of
Dialogue: 0,0:12:12.83,0:12:13.82,Default,,0,0,0,,times, a user might put their
Dialogue: 0,0:12:13.82,0:12:15.59,Default,,0,0,0,,wrist down, and in that moment,
Dialogue: 0,0:12:15.59,0:12:17.30,Default,,0,0,0,,your application goes into the
Dialogue: 0,0:12:17.30,0:12:19.97,Default,,0,0,0,,background, but you might need
Dialogue: 0,0:12:19.97,0:12:21.09,Default,,0,0,0,,to finish up a task.
Dialogue: 0,0:12:21.09,0:12:22.19,Default,,0,0,0,,So, say you need to close a
Dialogue: 0,0:12:22.19,0:12:23.77,Default,,0,0,0,,database, or do something else.
Dialogue: 0,0:12:24.54,0:12:26.29,Default,,0,0,0,,So, you can just use the
Dialogue: 0,0:12:26.38,0:12:28.33,Default,,0,0,0,,NSProcessInfo class to perform
Dialogue: 0,0:12:28.33,0:12:31.01,Default,,0,0,0,,expiring activity API to get up
Dialogue: 0,0:12:31.01,0:12:32.77,Default,,0,0,0,,to 30 seconds when foreground
Dialogue: 0,0:12:32.77,0:12:34.96,Default,,0,0,0,,initiated, and up to 10 seconds
Dialogue: 0,0:12:34.96,0:12:36.15,Default,,0,0,0,,when background initiated.
Dialogue: 0,0:12:36.57,0:12:38.71,Default,,0,0,0,,So, for example, for background
Dialogue: 0,0:12:38.71,0:12:40.27,Default,,0,0,0,,initiated, maybe you're running
Dialogue: 0,0:12:40.27,0:12:42.25,Default,,0,0,0,,in a complication for an update,
Dialogue: 0,0:12:42.25,0:12:43.61,Default,,0,0,0,,and you just need a little extra
Dialogue: 0,0:12:43.61,0:12:45.04,Default,,0,0,0,,time to get done.
Dialogue: 0,0:12:45.49,0:12:46.66,Default,,0,0,0,,So, you can just use the
Dialogue: 0,0:12:46.66,0:12:48.90,Default,,0,0,0,,NSProcessInfo class to get some
Dialogue: 0,0:12:48.90,0:12:49.68,Default,,0,0,0,,additional time.
Dialogue: 0,0:12:50.86,0:12:52.83,Default,,0,0,0,,And now, when you're frontmost,
Dialogue: 0,0:12:52.83,0:12:55.24,Default,,0,0,0,,and you use that API, then
Dialogue: 0,0:12:55.96,0:12:57.86,Default,,0,0,0,,you'll get increased priority by
Dialogue: 0,0:12:57.86,0:12:58.51,Default,,0,0,0,,the system.
Dialogue: 0,0:12:58.94,0:13:00.81,Default,,0,0,0,,So, because the system believes
Dialogue: 0,0:13:00.81,0:13:02.71,Default,,0,0,0,,that your app is more important
Dialogue: 0,0:13:02.71,0:13:04.03,Default,,0,0,0,,to the user, because it's still
Dialogue: 0,0:13:04.03,0:13:05.57,Default,,0,0,0,,in the frontmost state, the
Dialogue: 0,0:13:05.57,0:13:07.20,Default,,0,0,0,,priority by the system will get
Dialogue: 0,0:13:07.20,0:13:09.13,Default,,0,0,0,,increased, so you're more likely
Dialogue: 0,0:13:09.13,0:13:10.75,Default,,0,0,0,,to get the runtime that you need
Dialogue: 0,0:13:11.00,0:13:12.43,Default,,0,0,0,,to finish up whatever task you
Dialogue: 0,0:13:12.43,0:13:13.70,Default,,0,0,0,,need to do for your user.
Dialogue: 0,0:13:16.64,0:13:18.13,Default,,0,0,0,,And, another benefit of being
Dialogue: 0,0:13:18.13,0:13:20.13,Default,,0,0,0,,frontmost is, you can now play
Dialogue: 0,0:13:20.13,0:13:21.95,Default,,0,0,0,,haptics, so when you have
Dialogue: 0,0:13:21.95,0:13:23.60,Default,,0,0,0,,runtime for another reason, you
Dialogue: 0,0:13:23.60,0:13:24.98,Default,,0,0,0,,can easily just play a haptic.
Dialogue: 0,0:13:26.06,0:13:26.40,Default,,0,0,0,,Thank you.
Dialogue: 0,0:13:27.52,0:13:29.77,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:13:30.27,0:13:31.84,Default,,0,0,0,,>> So, sometimes haptics can get
Dialogue: 0,0:13:31.84,0:13:33.20,Default,,0,0,0,,a little confusing here or
Dialogue: 0,0:13:33.20,0:13:35.39,Default,,0,0,0,,there, so let me just dive in
Dialogue: 0,0:13:35.39,0:13:38.44,Default,,0,0,0,,and talk to you about, so if
Dialogue: 0,0:13:38.44,0:13:39.99,Default,,0,0,0,,haptics, if you play a haptic,
Dialogue: 0,0:13:39.99,0:13:41.96,Default,,0,0,0,,and let's say some audio is
Dialogue: 0,0:13:41.96,0:13:44.10,Default,,0,0,0,,playing out a speaker, then only
Dialogue: 0,0:13:44.10,0:13:45.35,Default,,0,0,0,,the audio from a haptic will
Dialogue: 0,0:13:45.35,0:13:46.98,Default,,0,0,0,,play, and it ducks what's
Dialogue: 0,0:13:47.01,0:13:47.73,Default,,0,0,0,,currently playing.
Dialogue: 0,0:13:48.62,0:13:49.94,Default,,0,0,0,,If audio is playing out of
Dialogue: 0,0:13:50.01,0:13:51.54,Default,,0,0,0,,Bluetooth headphones and the
Dialogue: 0,0:13:51.54,0:13:53.38,Default,,0,0,0,,screen is on, then the haptics
Dialogue: 0,0:13:53.38,0:13:55.17,Default,,0,0,0,,will play, and if the screen is
Dialogue: 0,0:13:55.17,0:13:56.61,Default,,0,0,0,,off, then just the audio will
Dialogue: 0,0:13:56.61,0:13:58.06,Default,,0,0,0,,play, because that makes the
Dialogue: 0,0:13:58.06,0:14:00.10,Default,,0,0,0,,most sense for your user.
Dialogue: 0,0:14:02.72,0:14:04.46,Default,,0,0,0,,And so lastly, the other benefit
Dialogue: 0,0:14:04.46,0:14:06.28,Default,,0,0,0,,of being frontmost is, when you
Dialogue: 0,0:14:06.28,0:14:07.73,Default,,0,0,0,,receive a remote or local
Dialogue: 0,0:14:07.73,0:14:09.47,Default,,0,0,0,,notification via the user
Dialogue: 0,0:14:09.47,0:14:11.19,Default,,0,0,0,,notifications framework, you'll
Dialogue: 0,0:14:11.19,0:14:13.14,Default,,0,0,0,,then get called into, and then
Dialogue: 0,0:14:13.14,0:14:14.30,Default,,0,0,0,,you can decide the right
Dialogue: 0,0:14:14.30,0:14:15.56,Default,,0,0,0,,experience for your user.
Dialogue: 0,0:14:16.09,0:14:17.42,Default,,0,0,0,,So, maybe you want to just
Dialogue: 0,0:14:17.42,0:14:19.13,Default,,0,0,0,,update your UI, and play the
Dialogue: 0,0:14:19.13,0:14:20.75,Default,,0,0,0,,notification like normally, you
Dialogue: 0,0:14:20.75,0:14:22.22,Default,,0,0,0,,can have that choice, now.
Dialogue: 0,0:14:23.60,0:14:25.67,Default,,0,0,0,,And so, you'll get called into,
Dialogue: 0,0:14:25.67,0:14:26.61,Default,,0,0,0,,when you just override the
Dialogue: 0,0:14:26.61,0:14:28.27,Default,,0,0,0,,function userNotification
Dialogue: 0,0:14:28.61,0:14:30.00,Default,,0,0,0,,willPresent notification
Dialogue: 0,0:14:30.11,0:14:31.07,Default,,0,0,0,,withCompletionHandler.
Dialogue: 0,0:14:31.61,0:14:34.45,Default,,0,0,0,,And, the key of all these
Dialogue: 0,0:14:34.45,0:14:36.66,Default,,0,0,0,,benefits, and this can really
Dialogue: 0,0:14:36.66,0:14:38.57,Default,,0,0,0,,change the design landscape, but
Dialogue: 0,0:14:38.57,0:14:40.92,Default,,0,0,0,,the best part about all this is
Dialogue: 0,0:14:40.92,0:14:43.98,Default,,0,0,0,,it's free, so if your app gets a
Dialogue: 0,0:14:43.98,0:14:45.16,Default,,0,0,0,,WatchConnectivity or
Dialogue: 0,0:14:45.25,0:14:47.56,Default,,0,0,0,,NSURLSession resume, your app
Dialogue: 0,0:14:47.56,0:14:49.03,Default,,0,0,0,,will now get additional runtime.
Dialogue: 0,0:14:49.77,0:14:50.91,Default,,0,0,0,,If your app implements the
Dialogue: 0,0:14:50.91,0:14:52.10,Default,,0,0,0,,willPresent notification
Dialogue: 0,0:14:52.10,0:14:53.76,Default,,0,0,0,,callback, you'll now get that
Dialogue: 0,0:14:53.76,0:14:55.36,Default,,0,0,0,,for free in the frontmost state.
Dialogue: 0,0:14:56.10,0:14:58.05,Default,,0,0,0,,Also, if, for example, you want
Dialogue: 0,0:14:58.05,0:14:59.70,Default,,0,0,0,,to use a NSProcessInfo
Dialogue: 0,0:14:59.70,0:15:02.39,Default,,0,0,0,,performExpiringActivity API to
Dialogue: 0,0:15:02.39,0:15:03.44,Default,,0,0,0,,complete a task on
Dialogue: 0,0:15:03.44,0:15:05.20,Default,,0,0,0,,applicationWillEnterBackground,
Dialogue: 0,0:15:05.57,0:15:06.47,Default,,0,0,0,,you'll get some additional
Dialogue: 0,0:15:06.47,0:15:07.54,Default,,0,0,0,,priority by the system.
Dialogue: 0,0:15:08.68,0:15:10.13,Default,,0,0,0,,You can change nothing in
Dialogue: 0,0:15:10.13,0:15:12.07,Default,,0,0,0,,watchOS 4, and your current,
Dialogue: 0,0:15:12.07,0:15:13.84,Default,,0,0,0,,native application will
Dialogue: 0,0:15:13.84,0:15:15.95,Default,,0,0,0,,automatically be more glanceable
Dialogue: 0,0:15:15.95,0:15:17.64,Default,,0,0,0,,and actionable by default.
Dialogue: 0,0:15:18.25,0:15:19.77,Default,,0,0,0,,And, with the Unified Process
Dialogue: 0,0:15:19.77,0:15:21.18,Default,,0,0,0,,Runtime we talked about earlier,
Dialogue: 0,0:15:21.58,0:15:22.92,Default,,0,0,0,,your application will be even
Dialogue: 0,0:15:22.92,0:15:23.76,Default,,0,0,0,,more responsive.
Dialogue: 0,0:15:24.86,0:15:27.04,Default,,0,0,0,,But, we want you all to take it
Dialogue: 0,0:15:27.04,0:15:27.86,Default,,0,0,0,,a step further.
Dialogue: 0,0:15:28.71,0:15:30.48,Default,,0,0,0,,Your apps can now leap forward
Dialogue: 0,0:15:30.48,0:15:32.10,Default,,0,0,0,,in functionality if you take
Dialogue: 0,0:15:32.10,0:15:33.31,Default,,0,0,0,,these new behaviors into
Dialogue: 0,0:15:33.31,0:15:33.77,Default,,0,0,0,,account.
Dialogue: 0,0:15:34.66,0:15:36.59,Default,,0,0,0,,You need to architect your apps
Dialogue: 0,0:15:36.59,0:15:37.85,Default,,0,0,0,,for this experience.
Dialogue: 0,0:15:38.93,0:15:41.12,Default,,0,0,0,,So now, let's talk through the
Dialogue: 0,0:15:41.12,0:15:42.53,Default,,0,0,0,,Apple Pie Me app, and get
Dialogue: 0,0:15:42.53,0:15:44.02,Default,,0,0,0,,started architecting our app
Dialogue: 0,0:15:44.07,0:15:45.50,Default,,0,0,0,,using these new capabilities.
Dialogue: 0,0:15:46.27,0:15:47.71,Default,,0,0,0,,So, let's revisit some of the
Dialogue: 0,0:15:47.71,0:15:49.66,Default,,0,0,0,,design goals for the app from
Dialogue: 0,0:15:49.66,0:15:50.96,Default,,0,0,0,,the perspective of our user.
Dialogue: 0,0:15:52.76,0:15:55.19,Default,,0,0,0,,So, here we are at a timeline of
Dialogue: 0,0:15:55.19,0:15:56.89,Default,,0,0,0,,our user, and really, the user
Dialogue: 0,0:15:56.89,0:15:58.31,Default,,0,0,0,,just wants to order apple pie,
Dialogue: 0,0:15:58.68,0:15:59.98,Default,,0,0,0,,and then they want to eat apple
Dialogue: 0,0:15:59.98,0:16:02.11,Default,,0,0,0,,pie, and sometimes in between,
Dialogue: 0,0:16:02.11,0:16:02.87,Default,,0,0,0,,they just want to view the
Dialogue: 0,0:16:02.87,0:16:03.90,Default,,0,0,0,,status of their order.
Dialogue: 0,0:16:04.56,0:16:05.79,Default,,0,0,0,,So, it's a pretty simple app
Dialogue: 0,0:16:05.79,0:16:06.96,Default,,0,0,0,,from the user's perspective.
Dialogue: 0,0:16:07.56,0:16:08.77,Default,,0,0,0,,But now, let's break down the
Dialogue: 0,0:16:08.77,0:16:10.07,Default,,0,0,0,,problem from our app's
Dialogue: 0,0:16:10.07,0:16:10.73,Default,,0,0,0,,perspective.
Dialogue: 0,0:16:12.68,0:16:14.70,Default,,0,0,0,,So, when that Order button is
Dialogue: 0,0:16:14.70,0:16:15.89,Default,,0,0,0,,pressed, then we're going to
Dialogue: 0,0:16:15.89,0:16:17.32,Default,,0,0,0,,send that order to our server,
Dialogue: 0,0:16:17.92,0:16:19.38,Default,,0,0,0,,and eventually, when the
Dialogue: 0,0:16:19.80,0:16:21.03,Default,,0,0,0,,restaurant has received the
Dialogue: 0,0:16:21.03,0:16:23.80,Default,,0,0,0,,request properly, and we know
Dialogue: 0,0:16:23.80,0:16:24.84,Default,,0,0,0,,that the pie is cooking, we're
Dialogue: 0,0:16:24.84,0:16:25.49,Default,,0,0,0,,going to send a push
Dialogue: 0,0:16:25.49,0:16:26.19,Default,,0,0,0,,notification.
Dialogue: 0,0:16:26.62,0:16:27.91,Default,,0,0,0,,And then, we also want to tell
Dialogue: 0,0:16:27.91,0:16:30.36,Default,,0,0,0,,our user when a courier is on
Dialogue: 0,0:16:30.36,0:16:32.63,Default,,0,0,0,,the way, and when a courier is
Dialogue: 0,0:16:32.63,0:16:33.07,Default,,0,0,0,,outside.
Dialogue: 0,0:16:34.17,0:16:35.60,Default,,0,0,0,,So, let's break this down some
Dialogue: 0,0:16:35.60,0:16:38.94,Default,,0,0,0,,more, and take it step by step.
Dialogue: 0,0:16:39.14,0:16:40.83,Default,,0,0,0,,So, we're at the Receive Order,
Dialogue: 0,0:16:40.83,0:16:43.01,Default,,0,0,0,,and how exactly do we do this?
Dialogue: 0,0:16:43.62,0:16:45.23,Default,,0,0,0,,Once the user taps the Order
Dialogue: 0,0:16:45.23,0:16:46.94,Default,,0,0,0,,button, what exactly should we
Dialogue: 0,0:16:46.94,0:16:47.40,Default,,0,0,0,,show?
Dialogue: 0,0:16:48.58,0:16:49.56,Default,,0,0,0,,We're going to be sending the
Dialogue: 0,0:16:49.56,0:16:50.67,Default,,0,0,0,,order to our server here, and
Dialogue: 0,0:16:50.67,0:16:52.38,Default,,0,0,0,,can't guarantee it'll come back
Dialogue: 0,0:16:52.38,0:16:53.64,Default,,0,0,0,,immediately, no matter what.
Dialogue: 0,0:16:54.40,0:16:56.74,Default,,0,0,0,,And, do we show something like
Dialogue: 0,0:16:56.81,0:16:58.45,Default,,0,0,0,,this, maybe a Loading indicator?
Dialogue: 0,0:16:59.08,0:17:00.66,Default,,0,0,0,,So, sometimes Loading indicators
Dialogue: 0,0:17:00.66,0:17:02.46,Default,,0,0,0,,do make sense to your user, but
Dialogue: 0,0:17:02.46,0:17:04.16,Default,,0,0,0,,in this case, it's actually
Dialogue: 0,0:17:04.16,0:17:05.17,Default,,0,0,0,,pretty confusing.
Dialogue: 0,0:17:05.26,0:17:06.91,Default,,0,0,0,,I might see this, and I might
Dialogue: 0,0:17:06.91,0:17:08.67,Default,,0,0,0,,think, "Oh, I need to hold my
Dialogue: 0,0:17:08.67,0:17:09.65,Default,,0,0,0,,wrist up.
Dialogue: 0,0:17:09.97,0:17:11.01,Default,,0,0,0,,How long do I have to hold my
Dialogue: 0,0:17:11.01,0:17:11.49,Default,,0,0,0,,wrist up?"
Dialogue: 0,0:17:12.05,0:17:13.11,Default,,0,0,0,,This isn't really a great
Dialogue: 0,0:17:13.11,0:17:14.25,Default,,0,0,0,,experience on the watch.
Dialogue: 0,0:17:15.19,0:17:16.92,Default,,0,0,0,,But instead, we could actually
Dialogue: 0,0:17:16.92,0:17:18.05,Default,,0,0,0,,show something like this.
Dialogue: 0,0:17:18.49,0:17:20.02,Default,,0,0,0,,So, hey, we'll tap you when the
Dialogue: 0,0:17:20.02,0:17:20.73,Default,,0,0,0,,pie's ready.
Dialogue: 0,0:17:21.01,0:17:22.38,Default,,0,0,0,,So, the user knows they can just
Dialogue: 0,0:17:22.38,0:17:24.09,Default,,0,0,0,,drop their wrist and go about
Dialogue: 0,0:17:24.09,0:17:26.69,Default,,0,0,0,,their day.
Dialogue: 0,0:17:26.94,0:17:28.78,Default,,0,0,0,,So, now we know at the Receive
Dialogue: 0,0:17:28.78,0:17:30.90,Default,,0,0,0,,Order screen, we know we just
Dialogue: 0,0:17:30.90,0:17:31.93,Default,,0,0,0,,want to show this new UI
Dialogue: 0,0:17:31.93,0:17:34.20,Default,,0,0,0,,immediately, so now let's break
Dialogue: 0,0:17:34.20,0:17:36.27,Default,,0,0,0,,this down into its separate
Dialogue: 0,0:17:36.27,0:17:36.89,Default,,0,0,0,,components.
Dialogue: 0,0:17:38.12,0:17:40.65,Default,,0,0,0,,So, we want to use NSURLSession
Dialogue: 0,0:17:40.65,0:17:41.82,Default,,0,0,0,,and post the order to our
Dialogue: 0,0:17:41.82,0:17:44.18,Default,,0,0,0,,server, and we also want to
Dialogue: 0,0:17:44.18,0:17:45.97,Default,,0,0,0,,extend the timeout, and then
Dialogue: 0,0:17:45.97,0:17:46.80,Default,,0,0,0,,just update our UI.
Dialogue: 0,0:17:48.22,0:17:50.35,Default,,0,0,0,,And lastly, there are times when
Dialogue: 0,0:17:50.35,0:17:51.87,Default,,0,0,0,,our server might not be
Dialogue: 0,0:17:51.87,0:17:53.49,Default,,0,0,0,,responsive, or something could
Dialogue: 0,0:17:53.49,0:17:55.47,Default,,0,0,0,,have gone wrong, and we need to
Dialogue: 0,0:17:55.47,0:17:57.93,Default,,0,0,0,,handle that case.
Dialogue: 0,0:17:58.10,0:18:00.36,Default,,0,0,0,,So, we need a mechanism that
Dialogue: 0,0:18:00.36,0:18:01.96,Default,,0,0,0,,allows us to schedule something
Dialogue: 0,0:18:01.96,0:18:03.71,Default,,0,0,0,,around, let's say, five minutes
Dialogue: 0,0:18:03.71,0:18:04.05,Default,,0,0,0,,from now.
Dialogue: 0,0:18:04.58,0:18:06.17,Default,,0,0,0,,And, we also need something that
Dialogue: 0,0:18:06.17,0:18:07.94,Default,,0,0,0,,doesn't depend on the network,
Dialogue: 0,0:18:08.43,0:18:10.20,Default,,0,0,0,,or something that, regardless of
Dialogue: 0,0:18:10.20,0:18:12.17,Default,,0,0,0,,frontmost or not, should alert
Dialogue: 0,0:18:12.17,0:18:12.68,Default,,0,0,0,,our user.
Dialogue: 0,0:18:14.39,0:18:15.93,Default,,0,0,0,,We also need something that we
Dialogue: 0,0:18:15.93,0:18:18.83,Default,,0,0,0,,can cancel later on, and so, if
Dialogue: 0,0:18:18.83,0:18:19.72,Default,,0,0,0,,you're thinking about a local
Dialogue: 0,0:18:19.72,0:18:20.82,Default,,0,0,0,,notification, then you'd be
Dialogue: 0,0:18:20.82,0:18:21.75,Default,,0,0,0,,absolutely right.
Dialogue: 0,0:18:22.40,0:18:23.66,Default,,0,0,0,,So, we could just show a local
Dialogue: 0,0:18:23.66,0:18:25.04,Default,,0,0,0,,notification that says, "Oh no!
Dialogue: 0,0:18:25.14,0:18:26.10,Default,,0,0,0,,Something went wrong."
Dialogue: 0,0:18:26.10,0:18:27.63,Default,,0,0,0,,And then, the user can easily
Dialogue: 0,0:18:27.63,0:18:29.08,Default,,0,0,0,,just tap on the Reorder button
Dialogue: 0,0:18:29.62,0:18:32.01,Default,,0,0,0,,and get another apple pie, or
Dialogue: 0,0:18:32.21,0:18:33.33,Default,,0,0,0,,they could just tap on the App
Dialogue: 0,0:18:33.33,0:18:34.97,Default,,0,0,0,,icon and go into the app and see
Dialogue: 0,0:18:34.97,0:18:35.57,Default,,0,0,0,,what went wrong.
Dialogue: 0,0:18:37.24,0:18:39.23,Default,,0,0,0,,So, let's just add that last
Dialogue: 0,0:18:39.23,0:18:41.84,Default,,0,0,0,,step, and now, let's just jump
Dialogue: 0,0:18:41.84,0:18:43.73,Default,,0,0,0,,into some code and see how this
Dialogue: 0,0:18:43.73,0:18:46.85,Default,,0,0,0,,can be done.
Dialogue: 0,0:18:47.02,0:18:48.75,Default,,0,0,0,,So, here we are at our IBAction
Dialogue: 0,0:18:48.75,0:18:49.93,Default,,0,0,0,,for when the Order button is
Dialogue: 0,0:18:49.93,0:18:51.77,Default,,0,0,0,,actually pressed, and then we
Dialogue: 0,0:18:51.77,0:18:52.99,Default,,0,0,0,,just want to grab our background
Dialogue: 0,0:18:52.99,0:18:54.28,Default,,0,0,0,,session, and then we're going to
Dialogue: 0,0:18:54.28,0:18:55.57,Default,,0,0,0,,want to post the order to our
Dialogue: 0,0:18:55.57,0:18:56.06,Default,,0,0,0,,server.
Dialogue: 0,0:18:56.63,0:18:57.84,Default,,0,0,0,,And then, because there's a
Dialogue: 0,0:18:57.84,0:18:59.37,Default,,0,0,0,,reasonable expectation that the
Dialogue: 0,0:18:59.37,0:19:01.09,Default,,0,0,0,,user wants to see our app the
Dialogue: 0,0:19:01.09,0:19:02.39,Default,,0,0,0,,next time, because they just
Dialogue: 0,0:19:02.39,0:19:04.17,Default,,0,0,0,,pressed the Order button, then
Dialogue: 0,0:19:04.17,0:19:05.40,Default,,0,0,0,,we're just going to extend our
Dialogue: 0,0:19:05.40,0:19:06.27,Default,,0,0,0,,frontmost timeout.
Dialogue: 0,0:19:07.02,0:19:08.45,Default,,0,0,0,,And then, we're going to trigger
Dialogue: 0,0:19:08.45,0:19:10.60,Default,,0,0,0,,that just-in-case scenario, our
Dialogue: 0,0:19:10.60,0:19:13.46,Default,,0,0,0,,fallback local notification, and
Dialogue: 0,0:19:13.46,0:19:14.42,Default,,0,0,0,,then we're just going to want to
Dialogue: 0,0:19:14.42,0:19:15.38,Default,,0,0,0,,reload some new UI.
Dialogue: 0,0:19:18.48,0:19:20.56,Default,,0,0,0,,Great. So now, we've received
Dialogue: 0,0:19:20.56,0:19:22.10,Default,,0,0,0,,the order, and eventually we're
Dialogue: 0,0:19:22.10,0:19:22.80,Default,,0,0,0,,going to send a push
Dialogue: 0,0:19:22.80,0:19:24.60,Default,,0,0,0,,notification for when the pie is
Dialogue: 0,0:19:24.60,0:19:24.98,Default,,0,0,0,,cooking.
Dialogue: 0,0:19:25.88,0:19:27.90,Default,,0,0,0,,So now, let's say our user puts
Dialogue: 0,0:19:27.90,0:19:29.66,Default,,0,0,0,,their wrist down sometime after
Dialogue: 0,0:19:29.94,0:19:30.99,Default,,0,0,0,,we've received the order.
Dialogue: 0,0:19:32.45,0:19:35.07,Default,,0,0,0,,So, right before we send that
Dialogue: 0,0:19:35.07,0:19:37.24,Default,,0,0,0,,notification, we expect to be in
Dialogue: 0,0:19:37.24,0:19:39.62,Default,,0,0,0,,the Frontmost App State, but
Dialogue: 0,0:19:39.62,0:19:41.77,Default,,0,0,0,,really, we, the developer, we
Dialogue: 0,0:19:41.77,0:19:42.77,Default,,0,0,0,,don't really need to know too
Dialogue: 0,0:19:42.77,0:19:44.56,Default,,0,0,0,,much about when the user puts
Dialogue: 0,0:19:44.56,0:19:45.79,Default,,0,0,0,,their wrist down, or raises it
Dialogue: 0,0:19:45.79,0:19:46.24,Default,,0,0,0,,up.
Dialogue: 0,0:19:46.55,0:19:47.79,Default,,0,0,0,,The next event that's really
Dialogue: 0,0:19:47.79,0:19:49.89,Default,,0,0,0,,just important is our push
Dialogue: 0,0:19:49.89,0:19:51.37,Default,,0,0,0,,notification, to just alert our
Dialogue: 0,0:19:51.37,0:19:52.80,Default,,0,0,0,,user that their pie is cooking.
Dialogue: 0,0:19:53.66,0:19:55.22,Default,,0,0,0,,If the app is frontmost, we'll
Dialogue: 0,0:19:55.22,0:19:56.70,Default,,0,0,0,,get our willPresent notification
Dialogue: 0,0:19:56.70,0:19:58.03,Default,,0,0,0,,callback we talked about
Dialogue: 0,0:19:58.03,0:19:58.42,Default,,0,0,0,,earlier.
Dialogue: 0,0:19:59.45,0:20:00.79,Default,,0,0,0,,Otherwise, if we're not
Dialogue: 0,0:20:00.79,0:20:02.67,Default,,0,0,0,,frontmost, the user just gets a
Dialogue: 0,0:20:02.67,0:20:03.94,Default,,0,0,0,,notification like normally.
Dialogue: 0,0:20:05.00,0:20:06.24,Default,,0,0,0,,And so, let's jump back into
Dialogue: 0,0:20:06.24,0:20:07.80,Default,,0,0,0,,some code and see what we can
Dialogue: 0,0:20:07.80,0:20:07.97,Default,,0,0,0,,do.
Dialogue: 0,0:20:10.26,0:20:11.74,Default,,0,0,0,,So, here we're just going to
Dialogue: 0,0:20:11.74,0:20:13.36,Default,,0,0,0,,override our user notification
Dialogue: 0,0:20:13.36,0:20:15.30,Default,,0,0,0,,center, willPresent notification
Dialogue: 0,0:20:15.52,0:20:16.50,Default,,0,0,0,,withCompletionHandler.
Dialogue: 0,0:20:17.03,0:20:17.91,Default,,0,0,0,,And then, the first thing we
Dialogue: 0,0:20:17.91,0:20:19.64,Default,,0,0,0,,want to do is, we just want to
Dialogue: 0,0:20:19.64,0:20:21.72,Default,,0,0,0,,make sure that we cancel our
Dialogue: 0,0:20:21.72,0:20:22.85,Default,,0,0,0,,local notification.
Dialogue: 0,0:20:23.43,0:20:24.94,Default,,0,0,0,,And then, we just want to reload
Dialogue: 0,0:20:24.94,0:20:27.16,Default,,0,0,0,,our new UI, and then, because we
Dialogue: 0,0:20:27.16,0:20:29.04,Default,,0,0,0,,did that, we want to just tap
Dialogue: 0,0:20:29.04,0:20:30.26,Default,,0,0,0,,our user, so they know to raise
Dialogue: 0,0:20:30.26,0:20:30.77,Default,,0,0,0,,their wrist.
Dialogue: 0,0:20:31.45,0:20:32.76,Default,,0,0,0,,And lastly, we want to call the
Dialogue: 0,0:20:32.76,0:20:34.20,Default,,0,0,0,,completionHandler and finish up.
Dialogue: 0,0:20:35.02,0:20:36.09,Default,,0,0,0,,And, I wanted to point out for
Dialogue: 0,0:20:36.09,0:20:37.72,Default,,0,0,0,,the completionHandler, it
Dialogue: 0,0:20:37.72,0:20:39.38,Default,,0,0,0,,actually takes a UNNotification
Dialogue: 0,0:20:39.38,0:20:41.14,Default,,0,0,0,,PresentationOptions, and so
Dialogue: 0,0:20:41.14,0:20:43.86,Default,,0,0,0,,that's the options of alert,
Dialogue: 0,0:20:43.86,0:20:44.76,Default,,0,0,0,,badge, or sound.
Dialogue: 0,0:20:45.71,0:20:47.38,Default,,0,0,0,,And, in this particular case, we
Dialogue: 0,0:20:47.38,0:20:48.54,Default,,0,0,0,,actually don't want a
Dialogue: 0,0:20:48.54,0:20:50.49,Default,,0,0,0,,notification to appear on top of
Dialogue: 0,0:20:50.49,0:20:52.05,Default,,0,0,0,,our app, because we've already
Dialogue: 0,0:20:52.05,0:20:53.78,Default,,0,0,0,,tapped the user, and we've
Dialogue: 0,0:20:53.78,0:20:56.02,Default,,0,0,0,,updated our UI, so instead,
Dialogue: 0,0:20:56.02,0:20:56.84,Default,,0,0,0,,we're just calling
Dialogue: 0,0:20:56.84,0:20:57.95,Default,,0,0,0,,completionHandler with none of
Dialogue: 0,0:20:57.95,0:20:59.46,Default,,0,0,0,,the options, so essentially
Dialogue: 0,0:20:59.46,0:21:00.58,Default,,0,0,0,,we're just going to be consuming
Dialogue: 0,0:21:00.58,0:21:02.44,Default,,0,0,0,,the notification, and then,
Dialogue: 0,0:21:02.63,0:21:04.26,Default,,0,0,0,,because the tap comes in, the
Dialogue: 0,0:21:04.26,0:21:05.33,Default,,0,0,0,,user would raise their wrist.
Dialogue: 0,0:21:09.06,0:21:11.59,Default,,0,0,0,,So, we just tap the user, and
Dialogue: 0,0:21:11.59,0:21:12.74,Default,,0,0,0,,they might see something such as
Dialogue: 0,0:21:12.74,0:21:13.21,Default,,0,0,0,,the following.
Dialogue: 0,0:21:14.72,0:21:16.82,Default,,0,0,0,,So, great, their pie is coming.
Dialogue: 0,0:21:16.82,0:21:18.07,Default,,0,0,0,,It's about 12 minutes away.
Dialogue: 0,0:21:18.56,0:21:22.26,Default,,0,0,0,,It's cooking in the oven.
Dialogue: 0,0:21:22.26,0:21:23.97,Default,,0,0,0,,So, here's where we were, and
Dialogue: 0,0:21:23.97,0:21:24.86,Default,,0,0,0,,now let's go back to our
Dialogue: 0,0:21:24.86,0:21:25.40,Default,,0,0,0,,timeline.
Dialogue: 0,0:21:26.76,0:21:28.03,Default,,0,0,0,,So, now we know our pie's
Dialogue: 0,0:21:28.03,0:21:29.10,Default,,0,0,0,,cooking at the restaurant.
Dialogue: 0,0:21:29.71,0:21:31.41,Default,,0,0,0,,And now, let's say we want the
Dialogue: 0,0:21:31.41,0:21:33.33,Default,,0,0,0,,user to be able to raise their
Dialogue: 0,0:21:33.33,0:21:34.90,Default,,0,0,0,,wrist and see as up to date of
Dialogue: 0,0:21:34.90,0:21:36.00,Default,,0,0,0,,an ETA as possible.
Dialogue: 0,0:21:36.88,0:21:38.41,Default,,0,0,0,,So, as soon as the user raises
Dialogue: 0,0:21:38.41,0:21:39.95,Default,,0,0,0,,their wrist, we will, of course,
Dialogue: 0,0:21:39.95,0:21:41.69,Default,,0,0,0,,ask for the most up-to-date ETA,
Dialogue: 0,0:21:42.63,0:21:44.32,Default,,0,0,0,,and this means that the next
Dialogue: 0,0:21:44.32,0:21:45.52,Default,,0,0,0,,time the user raises their wrist
Dialogue: 0,0:21:45.52,0:21:48.21,Default,,0,0,0,,again, we'd expect them to see
Dialogue: 0,0:21:48.21,0:21:49.52,Default,,0,0,0,,that up-to-date ETA.
Dialogue: 0,0:21:52.28,0:21:54.04,Default,,0,0,0,,Great. So, we handled our push
Dialogue: 0,0:21:54.04,0:21:54.85,Default,,0,0,0,,notification.
Dialogue: 0,0:21:55.08,0:21:56.34,Default,,0,0,0,,We now have a mechanism for
Dialogue: 0,0:21:56.34,0:21:59.20,Default,,0,0,0,,updating our ETAs, and now we
Dialogue: 0,0:21:59.20,0:22:00.14,Default,,0,0,0,,just want to send a push
Dialogue: 0,0:22:00.14,0:22:01.71,Default,,0,0,0,,notification again for when the
Dialogue: 0,0:22:01.71,0:22:02.60,Default,,0,0,0,,courier is on the way.
Dialogue: 0,0:22:03.74,0:22:05.54,Default,,0,0,0,,And, if we receive this push in
Dialogue: 0,0:22:05.54,0:22:07.77,Default,,0,0,0,,willPresent, then we're just
Dialogue: 0,0:22:07.77,0:22:10.15,Default,,0,0,0,,going to tap our user again, and
Dialogue: 0,0:22:10.15,0:22:11.53,Default,,0,0,0,,then maybe we might want to add
Dialogue: 0,0:22:11.53,0:22:13.42,Default,,0,0,0,,a map and an updated ETA showing
Dialogue: 0,0:22:13.42,0:22:14.67,Default,,0,0,0,,either where we are, or where
Dialogue: 0,0:22:14.67,0:22:17.60,Default,,0,0,0,,the courier is.
Dialogue: 0,0:22:17.82,0:22:19.47,Default,,0,0,0,,And, let's say, after we sent a
Dialogue: 0,0:22:19.47,0:22:21.24,Default,,0,0,0,,push notification for our
Dialogue: 0,0:22:21.24,0:22:22.71,Default,,0,0,0,,courier is on the way, the user
Dialogue: 0,0:22:22.71,0:22:24.42,Default,,0,0,0,,decides to maybe raise their
Dialogue: 0,0:22:24.42,0:22:24.75,Default,,0,0,0,,wrist.
Dialogue: 0,0:22:25.51,0:22:27.03,Default,,0,0,0,,So now, the user would see the
Dialogue: 0,0:22:27.03,0:22:28.59,Default,,0,0,0,,map and where their courier is,
Dialogue: 0,0:22:28.65,0:22:30.10,Default,,0,0,0,,and the app would provide a
Dialogue: 0,0:22:30.10,0:22:31.93,Default,,0,0,0,,great, glanceable experience.
Dialogue: 0,0:22:32.40,0:22:34.21,Default,,0,0,0,,And next, we can just send
Dialogue: 0,0:22:34.31,0:22:35.98,Default,,0,0,0,,another push for when our
Dialogue: 0,0:22:35.98,0:22:36.81,Default,,0,0,0,,courier is outside.
Dialogue: 0,0:22:38.19,0:22:40.10,Default,,0,0,0,,And then, if we're still in the
Dialogue: 0,0:22:40.10,0:22:41.77,Default,,0,0,0,,frontmost state, we can easily
Dialogue: 0,0:22:41.77,0:22:43.28,Default,,0,0,0,,just play another haptic like
Dialogue: 0,0:22:43.28,0:22:45.36,Default,,0,0,0,,before, and update our UI to
Dialogue: 0,0:22:45.36,0:22:46.42,Default,,0,0,0,,show that the courier is right
Dialogue: 0,0:22:46.42,0:22:46.91,Default,,0,0,0,,outside.
Dialogue: 0,0:22:47.62,0:22:49.84,Default,,0,0,0,,And, at this point, let's just
Dialogue: 0,0:22:49.84,0:22:50.97,Default,,0,0,0,,make sure to disable our
Dialogue: 0,0:22:50.97,0:22:52.59,Default,,0,0,0,,frontmost timeout extended API,
Dialogue: 0,0:22:53.24,0:22:55.09,Default,,0,0,0,,since we expect our user to be
Dialogue: 0,0:22:55.09,0:22:57.01,Default,,0,0,0,,eating apple pie now, instead of
Dialogue: 0,0:22:57.38,0:22:58.63,Default,,0,0,0,,actually just using our app.
Dialogue: 0,0:22:59.58,0:23:01.00,Default,,0,0,0,,So, let's take a look at our
Dialogue: 0,0:23:01.00,0:23:01.84,Default,,0,0,0,,overall timeline.
Dialogue: 0,0:23:04.22,0:23:06.30,Default,,0,0,0,,So, here's our whole flow, and
Dialogue: 0,0:23:06.30,0:23:08.05,Default,,0,0,0,,it all looks great, but let's
Dialogue: 0,0:23:08.05,0:23:09.65,Default,,0,0,0,,try to challenge our assumptions
Dialogue: 0,0:23:09.65,0:23:10.63,Default,,0,0,0,,as much as possible.
Dialogue: 0,0:23:11.43,0:23:12.73,Default,,0,0,0,,Now, what happens if the user
Dialogue: 0,0:23:12.73,0:23:14.22,Default,,0,0,0,,decides to go back to the watch
Dialogue: 0,0:23:14.22,0:23:14.57,Default,,0,0,0,,face?
Dialogue: 0,0:23:15.75,0:23:17.55,Default,,0,0,0,,So, we're no longer frontmost in
Dialogue: 0,0:23:17.55,0:23:19.94,Default,,0,0,0,,that case, but does that really
Dialogue: 0,0:23:19.94,0:23:20.83,Default,,0,0,0,,change anything?
Dialogue: 0,0:23:21.35,0:23:22.45,Default,,0,0,0,,Not really, right?
Dialogue: 0,0:23:22.45,0:23:24.07,Default,,0,0,0,,Let's take it through our app
Dialogue: 0,0:23:24.07,0:23:27.67,Default,,0,0,0,,code again.
Dialogue: 0,0:23:27.85,0:23:29.12,Default,,0,0,0,,So, we use the background
Dialogue: 0,0:23:29.12,0:23:30.80,Default,,0,0,0,,NSURLSession to post the order
Dialogue: 0,0:23:30.80,0:23:32.27,Default,,0,0,0,,to our server, so if, right
Dialogue: 0,0:23:32.27,0:23:34.02,Default,,0,0,0,,afterwards, the user decided to
Dialogue: 0,0:23:34.02,0:23:35.47,Default,,0,0,0,,go back to the watch face, we
Dialogue: 0,0:23:35.47,0:23:36.79,Default,,0,0,0,,know that that will continue,
Dialogue: 0,0:23:36.85,0:23:38.83,Default,,0,0,0,,and then properly post the order
Dialogue: 0,0:23:38.83,0:23:39.46,Default,,0,0,0,,to our server.
Dialogue: 0,0:23:40.01,0:23:41.28,Default,,0,0,0,,And then, we just send a push
Dialogue: 0,0:23:41.28,0:23:42.58,Default,,0,0,0,,notification for all the
Dialogue: 0,0:23:42.58,0:23:43.42,Default,,0,0,0,,different stages.
Dialogue: 0,0:23:43.90,0:23:45.28,Default,,0,0,0,,So, even if we're not frontmost,
Dialogue: 0,0:23:45.32,0:23:46.64,Default,,0,0,0,,the user just gets a regular
Dialogue: 0,0:23:46.64,0:23:47.37,Default,,0,0,0,,notification.
Dialogue: 0,0:23:49.78,0:23:51.70,Default,,0,0,0,,And so, here we are at our
Dialogue: 0,0:23:51.70,0:23:52.62,Default,,0,0,0,,overall timeline.
Dialogue: 0,0:23:53.04,0:23:55.64,Default,,0,0,0,,So, we've handled the cases when
Dialogue: 0,0:23:55.64,0:23:57.28,Default,,0,0,0,,our server wasn't working
Dialogue: 0,0:23:57.28,0:23:58.46,Default,,0,0,0,,properly with the local
Dialogue: 0,0:23:58.46,0:24:00.38,Default,,0,0,0,,notification, and we've worked
Dialogue: 0,0:24:00.38,0:24:01.84,Default,,0,0,0,,through how to use some of the
Dialogue: 0,0:24:01.84,0:24:03.45,Default,,0,0,0,,new Frontmost App State to
Dialogue: 0,0:24:03.48,0:24:04.93,Default,,0,0,0,,provide a great experience to
Dialogue: 0,0:24:04.93,0:24:05.47,Default,,0,0,0,,our user.
Dialogue: 0,0:24:06.19,0:24:07.56,Default,,0,0,0,,And, the best part about all of
Dialogue: 0,0:24:07.56,0:24:09.59,Default,,0,0,0,,this is that our app works great
Dialogue: 0,0:24:09.59,0:24:10.92,Default,,0,0,0,,with or without the Frontmost
Dialogue: 0,0:24:10.92,0:24:11.43,Default,,0,0,0,,App State.
Dialogue: 0,0:24:14.89,0:24:16.97,Default,,0,0,0,,And so, we've now gone through
Dialogue: 0,0:24:16.97,0:24:18.59,Default,,0,0,0,,the Frontmost App State, and our
Dialogue: 0,0:24:18.73,0:24:20.46,Default,,0,0,0,,Unified Process Runtime, and how
Dialogue: 0,0:24:20.46,0:24:21.16,Default,,0,0,0,,it affects our app.
Dialogue: 0,0:24:21.90,0:24:23.23,Default,,0,0,0,,So, let's just now take some
Dialogue: 0,0:24:23.23,0:24:24.89,Default,,0,0,0,,time to revisit Background App
Dialogue: 0,0:24:24.89,0:24:26.60,Default,,0,0,0,,Refresh, which was introduced
Dialogue: 0,0:24:26.60,0:24:28.00,Default,,0,0,0,,last year, and see what
Dialogue: 0,0:24:28.00,0:24:29.56,Default,,0,0,0,,improvements we've added, and
Dialogue: 0,0:24:29.56,0:24:30.89,Default,,0,0,0,,how we can apply it to Apple Pie
Dialogue: 0,0:24:30.89,0:24:31.01,Default,,0,0,0,,Me.
Dialogue: 0,0:24:32.28,0:24:33.11,Default,,0,0,0,,So, let's just go through a
Dialogue: 0,0:24:33.11,0:24:33.86,Default,,0,0,0,,brief overview.
Dialogue: 0,0:24:34.95,0:24:37.46,Default,,0,0,0,,So, in watchOS, the system wakes
Dialogue: 0,0:24:37.46,0:24:39.01,Default,,0,0,0,,your application by handing it a
Dialogue: 0,0:24:39.76,0:24:40.85,Default,,0,0,0,,task, and the system has a
Dialogue: 0,0:24:40.85,0:24:43.29,Default,,0,0,0,,limited number of these to hand
Dialogue: 0,0:24:43.29,0:24:44.58,Default,,0,0,0,,out, so just make sure to make
Dialogue: 0,0:24:44.58,0:24:45.65,Default,,0,0,0,,the best use of each one you
Dialogue: 0,0:24:45.65,0:24:45.94,Default,,0,0,0,,get.
Dialogue: 0,0:24:47.46,0:24:48.96,Default,,0,0,0,,And, when the system wants to
Dialogue: 0,0:24:48.96,0:24:51.21,Default,,0,0,0,,wake your app, it gives you one
Dialogue: 0,0:24:51.21,0:24:53.15,Default,,0,0,0,,or more of these tasks, and then
Dialogue: 0,0:24:53.15,0:24:54.55,Default,,0,0,0,,you can do any work you'd like
Dialogue: 0,0:24:54.55,0:24:55.89,Default,,0,0,0,,in the background, and you just
Dialogue: 0,0:24:55.89,0:24:57.15,Default,,0,0,0,,make sure to hold this task for
Dialogue: 0,0:24:57.15,0:24:58.20,Default,,0,0,0,,as long as you're doing work.
Dialogue: 0,0:24:58.64,0:25:01.12,Default,,0,0,0,,And, the way in which the system
Dialogue: 0,0:25:01.12,0:25:02.52,Default,,0,0,0,,will deliver these tasks to you
Dialogue: 0,0:25:02.99,0:25:04.72,Default,,0,0,0,,is when you implement your
Dialogue: 0,0:25:04.94,0:25:07.00,Default,,0,0,0,,handle background tasks callback
Dialogue: 0,0:25:07.29,0:25:08.97,Default,,0,0,0,,on your WKExtension delegate.
Dialogue: 0,0:25:14.48,0:25:15.73,Default,,0,0,0,,And so, when you finish your
Dialogue: 0,0:25:15.73,0:25:17.93,Default,,0,0,0,,background work, you just return
Dialogue: 0,0:25:17.93,0:25:19.51,Default,,0,0,0,,the task to the system by
Dialogue: 0,0:25:19.51,0:25:20.95,Default,,0,0,0,,calling setTaskCompleted.
Dialogue: 0,0:25:22.18,0:25:23.92,Default,,0,0,0,,So, we've changed a little bit
Dialogue: 0,0:25:23.92,0:25:26.03,Default,,0,0,0,,of the API, so let's walk
Dialogue: 0,0:25:26.03,0:25:27.11,Default,,0,0,0,,through that now, now that we
Dialogue: 0,0:25:27.11,0:25:28.16,Default,,0,0,0,,have a good, conceptual
Dialogue: 0,0:25:28.16,0:25:28.54,Default,,0,0,0,,overview.
Dialogue: 0,0:25:31.34,0:25:33.30,Default,,0,0,0,,So, before, we would implement
Dialogue: 0,0:25:33.30,0:25:35.05,Default,,0,0,0,,our handle background tasks, and
Dialogue: 0,0:25:35.05,0:25:36.45,Default,,0,0,0,,then we would switch case on all
Dialogue: 0,0:25:36.45,0:25:37.36,Default,,0,0,0,,of the different tasks.
Dialogue: 0,0:25:37.81,0:25:39.79,Default,,0,0,0,,So, in this example, we have a
Dialogue: 0,0:25:39.79,0:25:41.25,Default,,0,0,0,,WKApplicationRefresh
Dialogue: 0,0:25:41.25,0:25:44.47,Default,,0,0,0,,BackgroundTask, and then, let's
Dialogue: 0,0:25:44.47,0:25:45.43,Default,,0,0,0,,say we perform whatever
Dialogue: 0,0:25:45.43,0:25:46.81,Default,,0,0,0,,functions we need to, to get our
Dialogue: 0,0:25:46.81,0:25:48.55,Default,,0,0,0,,app up to date, and then we just
Dialogue: 0,0:25:48.55,0:25:49.73,Default,,0,0,0,,want to schedule a snapshot.
Dialogue: 0,0:25:50.78,0:25:51.46,Default,,0,0,0,,And so, we use the
Dialogue: 0,0:25:51.46,0:25:54.04,Default,,0,0,0,,scheduleSnapshotRefresh, and we
Dialogue: 0,0:25:54.59,0:25:55.54,Default,,0,0,0,,use a preferred date.
Dialogue: 0,0:25:55.73,0:25:56.97,Default,,0,0,0,,And then, we just call
Dialogue: 0,0:25:56.97,0:25:58.04,Default,,0,0,0,,setTaskCompleted.
Dialogue: 0,0:25:58.74,0:26:00.32,Default,,0,0,0,,And, the important thing here
Dialogue: 0,0:26:00.75,0:26:02.23,Default,,0,0,0,,that was a little tricky was, it
Dialogue: 0,0:26:02.23,0:26:03.62,Default,,0,0,0,,was really important to call
Dialogue: 0,0:26:03.62,0:26:05.65,Default,,0,0,0,,setTaskCompleted after you
Dialogue: 0,0:26:05.65,0:26:06.94,Default,,0,0,0,,actually scheduled a snapshot
Dialogue: 0,0:26:06.94,0:26:08.88,Default,,0,0,0,,refresh, because if you called
Dialogue: 0,0:26:08.88,0:26:10.85,Default,,0,0,0,,it before, then, like I
Dialogue: 0,0:26:10.85,0:26:12.51,Default,,0,0,0,,mentioned, you're actually, by
Dialogue: 0,0:26:12.51,0:26:14.31,Default,,0,0,0,,calling setTaskCompleted, you're
Dialogue: 0,0:26:14.31,0:26:15.77,Default,,0,0,0,,returning the task to the
Dialogue: 0,0:26:15.77,0:26:17.74,Default,,0,0,0,,system, and no snapshot would
Dialogue: 0,0:26:17.74,0:26:18.58,Default,,0,0,0,,then be scheduled.
Dialogue: 0,0:26:18.58,0:26:20.83,Default,,0,0,0,,So, this was a little bit
Dialogue: 0,0:26:20.83,0:26:22.78,Default,,0,0,0,,cumbersome, and not the best
Dialogue: 0,0:26:22.78,0:26:23.44,Default,,0,0,0,,experience.
Dialogue: 0,0:26:24.78,0:26:26.76,Default,,0,0,0,,So now, all you have to do is
Dialogue: 0,0:26:26.76,0:26:27.89,Default,,0,0,0,,just call a new function that
Dialogue: 0,0:26:27.89,0:26:27.98,Default,,0,0,0,,says
Dialogue: 0,0:26:28.14,0:26:29.96,Default,,0,0,0,,setTaskCompletedWithSnapshot,
Dialogue: 0,0:26:30.25,0:26:31.75,Default,,0,0,0,,and you set it to be true when
Dialogue: 0,0:26:31.75,0:26:33.29,Default,,0,0,0,,you want that snapshot, and set
Dialogue: 0,0:26:33.29,0:26:34.45,Default,,0,0,0,,it to be false when you don't.
Dialogue: 0,0:26:35.88,0:26:37.49,Default,,0,0,0,,And so, for all tasks, the
Dialogue: 0,0:26:37.49,0:26:39.30,Default,,0,0,0,,default is just to take a
Dialogue: 0,0:26:39.30,0:26:40.51,Default,,0,0,0,,snapshot immediately.
Dialogue: 0,0:26:41.26,0:26:43.70,Default,,0,0,0,,However, for snapshot, just make
Dialogue: 0,0:26:43.70,0:26:45.25,Default,,0,0,0,,sure to remember that there's a
Dialogue: 0,0:26:45.25,0:26:47.33,Default,,0,0,0,,special call to setTaskCompleted
Dialogue: 0,0:26:47.70,0:26:48.45,Default,,0,0,0,,with a snapshot.
Dialogue: 0,0:26:48.85,0:26:51.91,Default,,0,0,0,,So, let's take a look at that.
Dialogue: 0,0:26:52.09,0:26:54.25,Default,,0,0,0,,So, here it is, again, we're
Dialogue: 0,0:26:54.25,0:26:55.20,Default,,0,0,0,,implementing our handle
Dialogue: 0,0:26:55.20,0:26:56.61,Default,,0,0,0,,background task, and this time,
Dialogue: 0,0:26:56.96,0:26:57.61,Default,,0,0,0,,we just have a
Dialogue: 0,0:26:57.61,0:26:59.68,Default,,0,0,0,,WKSnapshotRefreshBackgroundTask,
Dialogue: 0,0:27:00.32,0:27:01.26,Default,,0,0,0,,so we're just going to call
Dialogue: 0,0:27:01.26,0:27:02.97,Default,,0,0,0,,setTaskCompleted with a restored
Dialogue: 0,0:27:02.97,0:27:04.46,Default,,0,0,0,,default state, and then our
Dialogue: 0,0:27:04.46,0:27:06.10,Default,,0,0,0,,estimatedSnapshotExpiration.
Dialogue: 0,0:27:07.38,0:27:09.32,Default,,0,0,0,,So, this is really great, and
Dialogue: 0,0:27:09.32,0:27:10.96,Default,,0,0,0,,it's very simple to use, but I
Dialogue: 0,0:27:10.96,0:27:12.32,Default,,0,0,0,,actually want to point out one
Dialogue: 0,0:27:12.32,0:27:14.25,Default,,0,0,0,,cool trick.
Dialogue: 0,0:27:14.43,0:27:16.05,Default,,0,0,0,,So now, you can actually use
Dialogue: 0,0:27:16.05,0:27:17.93,Default,,0,0,0,,setTaskCompletedWithSnapshot on
Dialogue: 0,0:27:17.93,0:27:19.09,Default,,0,0,0,,your snapshotTask.
Dialogue: 0,0:27:19.53,0:27:22.04,Default,,0,0,0,,So, what that does is it will,
Dialogue: 0,0:27:22.04,0:27:23.13,Default,,0,0,0,,of course, take a snapshot
Dialogue: 0,0:27:23.13,0:27:25.21,Default,,0,0,0,,immediately, and then it'll
Dialogue: 0,0:27:25.21,0:27:26.98,Default,,0,0,0,,actually schedule a snapshot an
Dialogue: 0,0:27:27.11,0:27:28.51,Default,,0,0,0,,hour from now, if you set it to
Dialogue: 0,0:27:28.51,0:27:29.01,Default,,0,0,0,,be true.
Dialogue: 0,0:27:29.81,0:27:31.56,Default,,0,0,0,,So, essentially what this means,
Dialogue: 0,0:27:31.89,0:27:33.25,Default,,0,0,0,,if you just keep calling
Dialogue: 0,0:27:33.25,0:27:35.15,Default,,0,0,0,,setTaskCompletedWithSnapshot as
Dialogue: 0,0:27:35.15,0:27:36.78,Default,,0,0,0,,true, you're going to set up a
Dialogue: 0,0:27:36.78,0:27:38.37,Default,,0,0,0,,one-hour cadence, and it's
Dialogue: 0,0:27:38.37,0:27:39.91,Default,,0,0,0,,really easy to constantly make
Dialogue: 0,0:27:39.91,0:27:41.81,Default,,0,0,0,,sure that your app is up to date
Dialogue: 0,0:27:41.81,0:27:42.54,Default,,0,0,0,,every hour.
Dialogue: 0,0:27:43.98,0:27:46.08,Default,,0,0,0,,And, if you want more custom
Dialogue: 0,0:27:46.08,0:27:48.35,Default,,0,0,0,,data behavior, for example, then
Dialogue: 0,0:27:48.35,0:27:49.49,Default,,0,0,0,,just make sure to call
Dialogue: 0,0:27:49.49,0:27:51.22,Default,,0,0,0,,setTaskCompletedWithSnapshot
Dialogue: 0,0:27:51.22,0:27:54.53,Default,,0,0,0,,false after scheduling your
Dialogue: 0,0:27:54.64,0:27:56.37,Default,,0,0,0,,snapshot refresh, because if you
Dialogue: 0,0:27:56.37,0:27:58.17,Default,,0,0,0,,call it with true in this case,
Dialogue: 0,0:27:58.17,0:27:58.96,Default,,0,0,0,,then we're actually going to
Dialogue: 0,0:27:58.96,0:28:00.75,Default,,0,0,0,,replace your previously
Dialogue: 0,0:28:00.75,0:28:02.18,Default,,0,0,0,,scheduled snapshot, and just
Dialogue: 0,0:28:02.18,0:28:03.55,Default,,0,0,0,,replace it with one an hour from
Dialogue: 0,0:28:03.55,0:28:03.78,Default,,0,0,0,,now.
Dialogue: 0,0:28:04.19,0:28:05.36,Default,,0,0,0,,So, if you do want that custom
Dialogue: 0,0:28:05.36,0:28:06.97,Default,,0,0,0,,behavior, just make sure to set
Dialogue: 0,0:28:06.97,0:28:07.60,Default,,0,0,0,,it to be false.
Dialogue: 0,0:28:10.70,0:28:12.77,Default,,0,0,0,,So, another important thing for
Dialogue: 0,0:28:12.77,0:28:14.29,Default,,0,0,0,,our handle background tasks is
Dialogue: 0,0:28:14.74,0:28:16.59,Default,,0,0,0,,how we actually update our
Dialogue: 0,0:28:16.59,0:28:17.48,Default,,0,0,0,,complications.
Dialogue: 0,0:28:17.91,0:28:20.00,Default,,0,0,0,,So, in watchOS 3, we actually
Dialogue: 0,0:28:20.00,0:28:21.53,Default,,0,0,0,,soft deprecated on our
Dialogue: 0,0:28:21.53,0:28:24.58,Default,,0,0,0,,CLKComplicationDataSource, our
Dialogue: 0,0:28:24.58,0:28:26.98,Default,,0,0,0,,getNextRequestedUpdateDate, our
Dialogue: 0,0:28:26.98,0:28:29.41,Default,,0,0,0,,requestedUpdateDidBegin, and our
Dialogue: 0,0:28:29.41,0:28:31.34,Default,,0,0,0,,requestedUpdateBudgetExhausted.
Dialogue: 0,0:28:31.90,0:28:34.71,Default,,0,0,0,,So now, in watchOS 3, I should
Dialogue: 0,0:28:34.71,0:28:37.09,Default,,0,0,0,,say, if you implemented handle
Dialogue: 0,0:28:37.09,0:28:38.52,Default,,0,0,0,,background tasks, these just
Dialogue: 0,0:28:38.52,0:28:40.12,Default,,0,0,0,,wouldn't get called into, and
Dialogue: 0,0:28:40.12,0:28:41.08,Default,,0,0,0,,now they're just fully
Dialogue: 0,0:28:41.08,0:28:42.24,Default,,0,0,0,,deprecated, so they won't get
Dialogue: 0,0:28:42.24,0:28:43.03,Default,,0,0,0,,called into at all.
Dialogue: 0,0:28:44.46,0:28:46.23,Default,,0,0,0,,So, if you want to update your
Dialogue: 0,0:28:46.23,0:28:48.24,Default,,0,0,0,,complications, again, just make
Dialogue: 0,0:28:48.24,0:28:49.74,Default,,0,0,0,,sure to handle background tasks,
Dialogue: 0,0:28:50.31,0:28:51.08,Default,,0,0,0,,and then just call
Dialogue: 0,0:28:51.08,0:28:53.64,Default,,0,0,0,,scheduleBackgroundRefresh with
Dialogue: 0,0:28:53.69,0:28:54.97,Default,,0,0,0,,whatever date you want to update
Dialogue: 0,0:28:54.97,0:28:55.86,Default,,0,0,0,,your complication.
Dialogue: 0,0:28:57.06,0:28:58.82,Default,,0,0,0,,And so, last year, a lot of
Dialogue: 0,0:28:58.82,0:29:00.24,Default,,0,0,0,,times complications can be tied
Dialogue: 0,0:29:00.24,0:29:01.68,Default,,0,0,0,,to some sort of networking task,
Dialogue: 0,0:29:01.91,0:29:05.11,Default,,0,0,0,,and so last year, we guided you
Dialogue: 0,0:29:05.11,0:29:09.42,Default,,0,0,0,,all to essentially, basically
Dialogue: 0,0:29:09.42,0:29:10.90,Default,,0,0,0,,just schedule a background
Dialogue: 0,0:29:10.90,0:29:13.59,Default,,0,0,0,,refresh, and then that way you
Dialogue: 0,0:29:13.59,0:29:15.05,Default,,0,0,0,,would schedule it maybe for,
Dialogue: 0,0:29:15.63,0:29:17.27,Default,,0,0,0,,let's say, 15 minutes from now,
Dialogue: 0,0:29:17.27,0:29:18.47,Default,,0,0,0,,if you wanted a complication
Dialogue: 0,0:29:18.47,0:29:19.83,Default,,0,0,0,,update by 7:45.
Dialogue: 0,0:29:20.42,0:29:21.15,Default,,0,0,0,,So, essentially you would
Dialogue: 0,0:29:21.15,0:29:22.09,Default,,0,0,0,,schedule that background
Dialogue: 0,0:29:22.09,0:29:24.05,Default,,0,0,0,,refresh, and then you would get
Dialogue: 0,0:29:24.05,0:29:26.76,Default,,0,0,0,,woken up around 7:30 to get that
Dialogue: 0,0:29:26.76,0:29:28.69,Default,,0,0,0,,NSURLSession, and then you could
Dialogue: 0,0:29:28.76,0:29:31.70,Default,,0,0,0,,trigger that, and then by 7:45,
Dialogue: 0,0:29:31.70,0:29:33.25,Default,,0,0,0,,you would have enough time to
Dialogue: 0,0:29:33.25,0:29:34.41,Default,,0,0,0,,update your complication.
Dialogue: 0,0:29:38.22,0:29:40.30,Default,,0,0,0,,But now, with some new
Dialogue: 0,0:29:40.39,0:29:42.04,Default,,0,0,0,,NSURLSession APIs, we can
Dialogue: 0,0:29:42.04,0:29:43.30,Default,,0,0,0,,actually just reduce a step
Dialogue: 0,0:29:43.30,0:29:45.01,Default,,0,0,0,,here, and the reason we had
Dialogue: 0,0:29:45.01,0:29:46.25,Default,,0,0,0,,these steps was really because
Dialogue: 0,0:29:46.65,0:29:48.09,Default,,0,0,0,,we wanted to ensure we gave
Dialogue: 0,0:29:48.09,0:29:49.79,Default,,0,0,0,,enough background running time
Dialogue: 0,0:29:49.79,0:29:51.14,Default,,0,0,0,,to our NSURLSession.
Dialogue: 0,0:29:51.66,0:29:53.86,Default,,0,0,0,,But now, with some new API in
Dialogue: 0,0:29:53.86,0:29:55.88,Default,,0,0,0,,URLSessionTask, we can actually
Dialogue: 0,0:29:55.88,0:29:56.97,Default,,0,0,0,,just set an earliest begin date.
Dialogue: 0,0:29:57.05,0:29:59.46,Default,,0,0,0,,So, when we actually call the
Dialogue: 0,0:29:59.46,0:30:02.07,Default,,0,0,0,,download task, we can actually
Dialogue: 0,0:30:02.07,0:30:03.87,Default,,0,0,0,,just set on that task our
Dialogue: 0,0:30:03.87,0:30:06.15,Default,,0,0,0,,variable, earliestBeginDate, so
Dialogue: 0,0:30:06.15,0:30:07.17,Default,,0,0,0,,that way, we're telling the
Dialogue: 0,0:30:07.17,0:30:08.86,Default,,0,0,0,,system, "Hey, we don't need this
Dialogue: 0,0:30:08.86,0:30:10.35,Default,,0,0,0,,right now, we just need this at
Dialogue: 0,0:30:10.68,0:30:12.08,Default,,0,0,0,,whenever date we've specified."
Dialogue: 0,0:30:12.60,0:30:16.78,Default,,0,0,0,,And so now, we can actually just
Dialogue: 0,0:30:16.94,0:30:17.80,Default,,0,0,0,,reduce that step.
Dialogue: 0,0:30:18.22,0:30:19.56,Default,,0,0,0,,So, here in our schedule
Dialogue: 0,0:30:19.56,0:30:21.30,Default,,0,0,0,,background refresh, we probably
Dialogue: 0,0:30:21.30,0:30:23.24,Default,,0,0,0,,also just want to kick off our
Dialogue: 0,0:30:23.29,0:30:25.10,Default,,0,0,0,,URLSession task, and set it up
Dialogue: 0,0:30:25.10,0:30:26.59,Default,,0,0,0,,with the earliest begin date,
Dialogue: 0,0:30:26.75,0:30:28.90,Default,,0,0,0,,and so that way the system, on
Dialogue: 0,0:30:28.90,0:30:30.29,Default,,0,0,0,,our behalf, will actually just
Dialogue: 0,0:30:30.29,0:30:32.79,Default,,0,0,0,,trigger that NSURLSession around
Dialogue: 0,0:30:32.79,0:30:35.04,Default,,0,0,0,,7:30 p.m., and then when that
Dialogue: 0,0:30:35.04,0:30:37.63,Default,,0,0,0,,resume comes back, we can update
Dialogue: 0,0:30:37.63,0:30:39.63,Default,,0,0,0,,our complication at 7:45 p.m.
Dialogue: 0,0:30:42.36,0:30:44.65,Default,,0,0,0,,So now, let's talk about how we
Dialogue: 0,0:30:44.65,0:30:46.19,Default,,0,0,0,,can actually incorporate some of
Dialogue: 0,0:30:46.19,0:30:47.50,Default,,0,0,0,,the Background App Refresh
Dialogue: 0,0:30:47.85,0:30:50.56,Default,,0,0,0,,things we just talked about into
Dialogue: 0,0:30:50.56,0:30:53.39,Default,,0,0,0,,our app, Apple Pie Me.
Dialogue: 0,0:30:53.63,0:30:55.87,Default,,0,0,0,,So, here's that timeline we
Dialogue: 0,0:30:55.87,0:30:56.59,Default,,0,0,0,,looked at earlier.
Dialogue: 0,0:30:57.21,0:30:58.70,Default,,0,0,0,,So now, let's just focus in on
Dialogue: 0,0:30:58.70,0:31:00.18,Default,,0,0,0,,the Pie's Cooking notification.
Dialogue: 0,0:31:00.53,0:31:03.23,Default,,0,0,0,,So, if you remember, the code,
Dialogue: 0,0:31:03.37,0:31:04.41,Default,,0,0,0,,before, it looked a lot like
Dialogue: 0,0:31:04.41,0:31:04.80,Default,,0,0,0,,this.
Dialogue: 0,0:31:04.80,0:31:06.53,Default,,0,0,0,,We implemented
Dialogue: 0,0:31:06.53,0:31:08.12,Default,,0,0,0,,userNotificationCenter,
Dialogue: 0,0:31:08.12,0:31:09.72,Default,,0,0,0,,willPresent notification with
Dialogue: 0,0:31:09.72,0:31:12.03,Default,,0,0,0,,CompletionHandler, and then we
Dialogue: 0,0:31:12.03,0:31:13.58,Default,,0,0,0,,just cancelled those fallback
Dialogue: 0,0:31:13.58,0:31:14.78,Default,,0,0,0,,local notifications.
Dialogue: 0,0:31:15.31,0:31:16.50,Default,,0,0,0,,We updated our UI.
Dialogue: 0,0:31:16.94,0:31:18.38,Default,,0,0,0,,We then played a haptic, and
Dialogue: 0,0:31:18.38,0:31:19.59,Default,,0,0,0,,called our completionHandler.
Dialogue: 0,0:31:20.17,0:31:21.40,Default,,0,0,0,,And now, the great thing is,
Dialogue: 0,0:31:21.40,0:31:22.19,Default,,0,0,0,,once you call that
Dialogue: 0,0:31:22.19,0:31:23.85,Default,,0,0,0,,completionHandler, your app will
Dialogue: 0,0:31:23.85,0:31:26.31,Default,,0,0,0,,get suspended, and you will get
Dialogue: 0,0:31:26.31,0:31:28.06,Default,,0,0,0,,called into via handle
Dialogue: 0,0:31:28.06,0:31:29.82,Default,,0,0,0,,background tasks with a snapshot
Dialogue: 0,0:31:29.82,0:31:31.57,Default,,0,0,0,,task, and then your reason for
Dialogue: 0,0:31:31.57,0:31:33.12,Default,,0,0,0,,that snapshot would be app
Dialogue: 0,0:31:33.12,0:31:33.76,Default,,0,0,0,,backgrounded.
Dialogue: 0,0:31:35.30,0:31:37.42,Default,,0,0,0,,So now, when you have an ETA you
Dialogue: 0,0:31:37.46,0:31:39.19,Default,,0,0,0,,can share, you can just make
Dialogue: 0,0:31:39.19,0:31:41.15,Default,,0,0,0,,sure your snapshot looks as up
Dialogue: 0,0:31:41.15,0:31:42.61,Default,,0,0,0,,to date as possible in the doc.
Dialogue: 0,0:31:43.10,0:31:45.34,Default,,0,0,0,,And then, another thing I wanted
Dialogue: 0,0:31:45.34,0:31:47.61,Default,,0,0,0,,to point out from before was, if
Dialogue: 0,0:31:47.61,0:31:49.21,Default,,0,0,0,,you remember, we actually used,
Dialogue: 0,0:31:49.41,0:31:50.32,Default,,0,0,0,,when the user raised their
Dialogue: 0,0:31:50.32,0:31:52.09,Default,,0,0,0,,wrist, we then kicked off an
Dialogue: 0,0:31:52.09,0:31:54.34,Default,,0,0,0,,NSURLSession to then grab the
Dialogue: 0,0:31:54.34,0:31:55.75,Default,,0,0,0,,most up-to-date ETA.
Dialogue: 0,0:31:55.75,0:31:57.62,Default,,0,0,0,,And so now, with that new API we
Dialogue: 0,0:31:57.62,0:31:58.95,Default,,0,0,0,,just talked about on our
Dialogue: 0,0:31:58.95,0:32:01.27,Default,,0,0,0,,URLSessionTask, we can actually
Dialogue: 0,0:32:01.27,0:32:03.52,Default,,0,0,0,,just even schedule an ETA for
Dialogue: 0,0:32:03.52,0:32:04.42,Default,,0,0,0,,some time from now.
Dialogue: 0,0:32:05.01,0:32:06.32,Default,,0,0,0,,So, let's say, for example,
Dialogue: 0,0:32:07.16,0:32:08.72,Default,,0,0,0,,maybe our pie's coming in 12
Dialogue: 0,0:32:08.72,0:32:09.92,Default,,0,0,0,,minutes, and we just want to
Dialogue: 0,0:32:09.92,0:32:11.96,Default,,0,0,0,,schedule an ETA, like a refresh,
Dialogue: 0,0:32:12.37,0:32:14.49,Default,,0,0,0,,around, let's say, like, eight
Dialogue: 0,0:32:14.49,0:32:15.74,Default,,0,0,0,,minutes from now, for example.
Dialogue: 0,0:32:18.56,0:32:20.30,Default,,0,0,0,,So, let's think about our
Dialogue: 0,0:32:20.30,0:32:21.95,Default,,0,0,0,,overall timeline once again.
Dialogue: 0,0:32:22.25,0:32:23.62,Default,,0,0,0,,This was a really simple app,
Dialogue: 0,0:32:23.62,0:32:24.02,Default,,0,0,0,,actually.
Dialogue: 0,0:32:24.02,0:32:26.18,Default,,0,0,0,,It was just, we had an Order
Dialogue: 0,0:32:26.18,0:32:28.13,Default,,0,0,0,,button, and then we were able to
Dialogue: 0,0:32:28.13,0:32:28.62,Default,,0,0,0,,eat pie.
Dialogue: 0,0:32:29.19,0:32:30.91,Default,,0,0,0,,And then, but, it was actually
Dialogue: 0,0:32:30.99,0:32:33.95,Default,,0,0,0,,really powerful under the
Dialogue: 0,0:32:33.95,0:32:37.95,Default,,0,0,0,,surface in our app code, and so
Dialogue: 0,0:32:37.95,0:32:40.11,Default,,0,0,0,,we were able to take advantage
Dialogue: 0,0:32:40.11,0:32:43.23,Default,,0,0,0,,of our NSURLSession resumes, our
Dialogue: 0,0:32:43.23,0:32:45.50,Default,,0,0,0,,haptics in conjunction with our
Dialogue: 0,0:32:45.74,0:32:47.21,Default,,0,0,0,,frontmost notifications.
Dialogue: 0,0:32:47.60,0:32:49.97,Default,,0,0,0,,We're also taking advantage of
Dialogue: 0,0:32:49.97,0:32:51.85,Default,,0,0,0,,our Background App Refresh, as
Dialogue: 0,0:32:51.85,0:32:53.52,Default,,0,0,0,,well as we were able to schedule
Dialogue: 0,0:32:53.65,0:32:55.87,Default,,0,0,0,,NSURLSession ETA requests.
Dialogue: 0,0:32:56.69,0:32:58.55,Default,,0,0,0,,So, creating a great watch app
Dialogue: 0,0:32:58.74,0:33:00.24,Default,,0,0,0,,that delivered you apple pies
Dialogue: 0,0:33:00.54,0:33:02.28,Default,,0,0,0,,was certainly possible before,
Dialogue: 0,0:33:02.62,0:33:05.38,Default,,0,0,0,,but now with watchOS 4, you can
Dialogue: 0,0:33:05.38,0:33:07.78,Default,,0,0,0,,take a huge leap forward and wow
Dialogue: 0,0:33:07.78,0:33:08.50,Default,,0,0,0,,your users.
Dialogue: 0,0:33:09.86,0:33:12.24,Default,,0,0,0,,So now, let's dive into some of
Dialogue: 0,0:33:12.24,0:33:13.33,Default,,0,0,0,,our new background modes.
Dialogue: 0,0:33:14.59,0:33:17.09,Default,,0,0,0,,So, in watchOS 3, we introduced
Dialogue: 0,0:33:17.09,0:33:19.10,Default,,0,0,0,,our workout session as a
Dialogue: 0,0:33:19.10,0:33:21.25,Default,,0,0,0,,background mode, and now we
Dialogue: 0,0:33:21.25,0:33:22.69,Default,,0,0,0,,actually have audio recording
Dialogue: 0,0:33:22.69,0:33:24.97,Default,,0,0,0,,sessions, and then we also have
Dialogue: 0,0:33:24.97,0:33:26.13,Default,,0,0,0,,navigation sessions.
Dialogue: 0,0:33:26.82,0:33:28.04,Default,,0,0,0,,So, let's dive right into our
Dialogue: 0,0:33:28.04,0:33:29.63,Default,,0,0,0,,audio recording session.
Dialogue: 0,0:33:30.71,0:33:32.48,Default,,0,0,0,,So, in watchOS 3, you could
Dialogue: 0,0:33:32.48,0:33:34.52,Default,,0,0,0,,record audio, but it would,
Dialogue: 0,0:33:34.52,0:33:35.82,Default,,0,0,0,,essentially the API would
Dialogue: 0,0:33:36.12,0:33:38.58,Default,,0,0,0,,present a modal presentation
Dialogue: 0,0:33:38.95,0:33:40.61,Default,,0,0,0,,that would show our UI, and then
Dialogue: 0,0:33:40.61,0:33:42.59,Default,,0,0,0,,the user could then stop the
Dialogue: 0,0:33:42.59,0:33:44.18,Default,,0,0,0,,recording, and then that file
Dialogue: 0,0:33:44.18,0:33:45.50,Default,,0,0,0,,would get delivered to you all,
Dialogue: 0,0:33:45.50,0:33:46.12,Default,,0,0,0,,the developer.
Dialogue: 0,0:33:47.38,0:33:49.31,Default,,0,0,0,,However, now you can actually
Dialogue: 0,0:33:49.31,0:33:51.41,Default,,0,0,0,,just use your own UI, so you can
Dialogue: 0,0:33:51.41,0:33:52.77,Default,,0,0,0,,build the exact recording
Dialogue: 0,0:33:52.77,0:33:54.88,Default,,0,0,0,,experience you want in watchOS4.
Dialogue: 0,0:33:55.87,0:33:57.43,Default,,0,0,0,,And, the important thing is, now
Dialogue: 0,0:33:57.43,0:33:58.76,Default,,0,0,0,,it can be background running
Dialogue: 0,0:33:59.25,0:34:00.36,Default,,0,0,0,,but, of course, it's foreground
Dialogue: 0,0:34:00.36,0:34:01.76,Default,,0,0,0,,initiated and background
Dialogue: 0,0:34:01.76,0:34:03.17,Default,,0,0,0,,running, just like our workouts.
Dialogue: 0,0:34:03.65,0:34:06.83,Default,,0,0,0,,And then, your app will stay
Dialogue: 0,0:34:06.83,0:34:09.93,Default,,0,0,0,,frontmost while it's recording,
Dialogue: 0,0:34:10.34,0:34:12.69,Default,,0,0,0,,and what's great about that is,
Dialogue: 0,0:34:12.69,0:34:13.79,Default,,0,0,0,,you actually have the ability to
Dialogue: 0,0:34:13.79,0:34:14.68,Default,,0,0,0,,play haptics.
Dialogue: 0,0:34:15.09,0:34:16.31,Default,,0,0,0,,So, let's say, for example,
Dialogue: 0,0:34:16.31,0:34:18.03,Default,,0,0,0,,you're an app that wants to
Dialogue: 0,0:34:18.03,0:34:19.27,Default,,0,0,0,,detect what sort of song is
Dialogue: 0,0:34:19.27,0:34:20.27,Default,,0,0,0,,playing around you.
Dialogue: 0,0:34:20.27,0:34:22.31,Default,,0,0,0,,You could easily just press the
Dialogue: 0,0:34:22.31,0:34:23.15,Default,,0,0,0,,Record button.
Dialogue: 0,0:34:23.61,0:34:24.66,Default,,0,0,0,,The user would put their wrist
Dialogue: 0,0:34:24.66,0:34:25.13,Default,,0,0,0,,down.
Dialogue: 0,0:34:25.13,0:34:26.43,Default,,0,0,0,,You could detect what's playing,
Dialogue: 0,0:34:26.79,0:34:27.84,Default,,0,0,0,,and then you could easily tap
Dialogue: 0,0:34:27.84,0:34:29.05,Default,,0,0,0,,your user, so they know that,
Dialogue: 0,0:34:29.05,0:34:30.26,Default,,0,0,0,,hey, you detected what song it
Dialogue: 0,0:34:30.26,0:34:32.25,Default,,0,0,0,,was, and then you could show
Dialogue: 0,0:34:32.25,0:34:33.08,Default,,0,0,0,,that to your user.
Dialogue: 0,0:34:33.54,0:34:36.68,Default,,0,0,0,,And then, what's also great is
Dialogue: 0,0:34:36.68,0:34:38.39,Default,,0,0,0,,that, just like workout
Dialogue: 0,0:34:38.39,0:34:39.57,Default,,0,0,0,,sessions, it's a background
Dialogue: 0,0:34:39.57,0:34:42.25,Default,,0,0,0,,running mode, but the heart rate
Dialogue: 0,0:34:42.25,0:34:43.41,Default,,0,0,0,,sensor is not going to be on, so
Dialogue: 0,0:34:43.41,0:34:44.70,Default,,0,0,0,,there's actually less battery
Dialogue: 0,0:34:44.70,0:34:47.65,Default,,0,0,0,,life impact because of this.
Dialogue: 0,0:34:47.84,0:34:49.04,Default,,0,0,0,,And, another thing I wanted to
Dialogue: 0,0:34:49.04,0:34:51.95,Default,,0,0,0,,mention is, if for some reason
Dialogue: 0,0:34:51.95,0:34:53.52,Default,,0,0,0,,the user decides to go back to
Dialogue: 0,0:34:53.52,0:34:54.70,Default,,0,0,0,,the watch face, for instance,
Dialogue: 0,0:34:55.02,0:34:55.97,Default,,0,0,0,,we're going to show that
Dialogue: 0,0:34:56.31,0:34:58.46,Default,,0,0,0,,Microphone icon at the very top,
Dialogue: 0,0:34:58.46,0:34:59.89,Default,,0,0,0,,so that way the user knows that
Dialogue: 0,0:34:59.89,0:35:01.52,Default,,0,0,0,,something's recording, and then
Dialogue: 0,0:35:01.62,0:35:03.33,Default,,0,0,0,,they can also tap on that icon
Dialogue: 0,0:35:03.55,0:35:04.71,Default,,0,0,0,,and get launched right back to
Dialogue: 0,0:35:04.71,0:35:04.98,Default,,0,0,0,,the app.
Dialogue: 0,0:35:08.58,0:35:12.45,Default,,0,0,0,,So, for playback, in watchOS3.1,
Dialogue: 0,0:35:12.45,0:35:14.73,Default,,0,0,0,,we introduced AVAudioPlayer, and
Dialogue: 0,0:35:14.73,0:35:17.31,Default,,0,0,0,,so now, for recording, all you
Dialogue: 0,0:35:17.31,0:35:19.24,Default,,0,0,0,,need to use is AVAudioInputNode
Dialogue: 0,0:35:19.24,0:35:21.09,Default,,0,0,0,,via AVAudioEngine, or
Dialogue: 0,0:35:21.09,0:35:23.80,Default,,0,0,0,,AVAudioRecorder, and then our
Dialogue: 0,0:35:23.80,0:35:25.23,Default,,0,0,0,,AVAudio recording for
Dialogue: 0,0:35:25.23,0:35:25.81,Default,,0,0,0,,permissions.
Dialogue: 0,0:35:27.01,0:35:28.15,Default,,0,0,0,,And, there's a whole bunch of
Dialogue: 0,0:35:28.15,0:35:29.57,Default,,0,0,0,,formats that are now supported.
Dialogue: 0,0:35:30.53,0:35:33.08,Default,,0,0,0,,And so, let's talk about some of
Dialogue: 0,0:35:33.08,0:35:36.52,Default,,0,0,0,,our locations background mode.
Dialogue: 0,0:35:36.69,0:35:38.42,Default,,0,0,0,,So, just like audio recording
Dialogue: 0,0:35:38.49,0:35:40.29,Default,,0,0,0,,and our workout sessions, it's
Dialogue: 0,0:35:40.29,0:35:41.94,Default,,0,0,0,,foreground initiated, and then
Dialogue: 0,0:35:41.94,0:35:42.82,Default,,0,0,0,,just background running.
Dialogue: 0,0:35:44.25,0:35:45.35,Default,,0,0,0,,And, of course, you're going to
Dialogue: 0,0:35:45.35,0:35:46.88,Default,,0,0,0,,be frontmost while in session.
Dialogue: 0,0:35:49.01,0:35:50.78,Default,,0,0,0,,So, one thing to note is, you
Dialogue: 0,0:35:50.78,0:35:53.37,Default,,0,0,0,,must call startUpdatingLocation
Dialogue: 0,0:35:53.37,0:35:54.17,Default,,0,0,0,,while your app is in the
Dialogue: 0,0:35:54.17,0:35:56.50,Default,,0,0,0,,foreground, and you should also
Dialogue: 0,0:35:56.50,0:35:57.61,Default,,0,0,0,,just make sure to set
Dialogue: 0,0:35:57.61,0:35:59.80,Default,,0,0,0,,allowsBackgroundLocationUpdates
Dialogue: 0,0:35:59.80,0:36:01.60,Default,,0,0,0,,to true only when the navigation
Dialogue: 0,0:36:01.60,0:36:03.21,Default,,0,0,0,,session has actually begun, and
Dialogue: 0,0:36:03.21,0:36:04.41,Default,,0,0,0,,then set it to be false when
Dialogue: 0,0:36:04.41,0:36:06.88,Default,,0,0,0,,it's not.
Dialogue: 0,0:36:07.10,0:36:09.13,Default,,0,0,0,,So, if you recall, for Apple Pie
Dialogue: 0,0:36:09.13,0:36:11.08,Default,,0,0,0,,Me app, we actually had two
Dialogue: 0,0:36:11.08,0:36:11.76,Default,,0,0,0,,users.
Dialogue: 0,0:36:12.08,0:36:13.59,Default,,0,0,0,,We had myself, the person that
Dialogue: 0,0:36:13.59,0:36:15.25,Default,,0,0,0,,was about to eat that awesome
Dialogue: 0,0:36:15.25,0:36:17.06,Default,,0,0,0,,apple pie, and then we actually
Dialogue: 0,0:36:17.06,0:36:18.26,Default,,0,0,0,,had a courier that was going to
Dialogue: 0,0:36:18.26,0:36:19.08,Default,,0,0,0,,bring it to us.
Dialogue: 0,0:36:19.56,0:36:20.64,Default,,0,0,0,,So, in this case, we might
Dialogue: 0,0:36:20.64,0:36:22.29,Default,,0,0,0,,actually just want to build a
Dialogue: 0,0:36:22.29,0:36:24.04,Default,,0,0,0,,companion driver app for that
Dialogue: 0,0:36:24.58,0:36:26.13,Default,,0,0,0,,driver, so that way they can
Dialogue: 0,0:36:26.13,0:36:27.49,Default,,0,0,0,,easily be navigated on their
Dialogue: 0,0:36:27.49,0:36:29.24,Default,,0,0,0,,wrist to our destination.
Dialogue: 0,0:36:29.74,0:36:31.91,Default,,0,0,0,,And, the great thing is, you can
Dialogue: 0,0:36:31.91,0:36:33.08,Default,,0,0,0,,even play haptics while in
Dialogue: 0,0:36:33.08,0:36:36.50,Default,,0,0,0,,session, so now if, for example,
Dialogue: 0,0:36:36.50,0:36:38.56,Default,,0,0,0,,for a right turn or a left turn,
Dialogue: 0,0:36:38.56,0:36:39.32,Default,,0,0,0,,you could play a different
Dialogue: 0,0:36:39.32,0:36:41.57,Default,,0,0,0,,haptic, or maybe when a user has
Dialogue: 0,0:36:41.78,0:36:43.16,Default,,0,0,0,,missed a turn, for example.
Dialogue: 0,0:36:43.59,0:36:44.84,Default,,0,0,0,,And, I'm really excited about
Dialogue: 0,0:36:44.84,0:36:46.73,Default,,0,0,0,,this one, because, like, for
Dialogue: 0,0:36:46.73,0:36:49.04,Default,,0,0,0,,example, transit apps that, you
Dialogue: 0,0:36:49.04,0:36:51.25,Default,,0,0,0,,could imagine, you want to, just
Dialogue: 0,0:36:51.25,0:36:52.13,Default,,0,0,0,,right before the stop you're
Dialogue: 0,0:36:52.13,0:36:53.95,Default,,0,0,0,,about to get off at, the user
Dialogue: 0,0:36:53.95,0:36:56.06,Default,,0,0,0,,could be easily tapped, and then
Dialogue: 0,0:36:56.06,0:36:57.05,Default,,0,0,0,,they could know, oh, I need to
Dialogue: 0,0:36:57.05,0:36:58.91,Default,,0,0,0,,go to the doors, and so I can
Dialogue: 0,0:36:58.91,0:37:03.22,Default,,0,0,0,,get off at the next stop.
Dialogue: 0,0:37:03.43,0:37:05.64,Default,,0,0,0,,So, we're really excited about
Dialogue: 0,0:37:05.64,0:37:07.62,Default,,0,0,0,,our new Unified Process Runtime,
Dialogue: 0,0:37:07.84,0:37:09.01,Default,,0,0,0,,our new enhancements to
Dialogue: 0,0:37:09.01,0:37:10.94,Default,,0,0,0,,Background App Refresh, and our
Dialogue: 0,0:37:10.94,0:37:12.61,Default,,0,0,0,,new background modes, and I
Dialogue: 0,0:37:12.61,0:37:14.27,Default,,0,0,0,,especially am really excited
Dialogue: 0,0:37:14.27,0:37:15.92,Default,,0,0,0,,about the new Frontmost App
Dialogue: 0,0:37:15.92,0:37:16.28,Default,,0,0,0,,State.
Dialogue: 0,0:37:16.98,0:37:18.28,Default,,0,0,0,,And, we think the design
Dialogue: 0,0:37:18.28,0:37:19.56,Default,,0,0,0,,landscape will change in a
Dialogue: 0,0:37:19.56,0:37:21.47,Default,,0,0,0,,really unique way on watchOS.
Dialogue: 0,0:37:25.14,0:37:27.37,Default,,0,0,0,,So, I challenge you all to
Dialogue: 0,0:37:27.37,0:37:28.76,Default,,0,0,0,,design apps for the new
Dialogue: 0,0:37:28.76,0:37:29.78,Default,,0,0,0,,Frontmost App State.
Dialogue: 0,0:37:30.89,0:37:32.00,Default,,0,0,0,,Think through the enhanced
Dialogue: 0,0:37:32.00,0:37:33.50,Default,,0,0,0,,capabilities, and design
Dialogue: 0,0:37:33.50,0:37:34.63,Default,,0,0,0,,experiences where the
Dialogue: 0,0:37:34.63,0:37:36.40,Default,,0,0,0,,interactions are just two
Dialogue: 0,0:37:36.40,0:37:37.04,Default,,0,0,0,,seconds.
Dialogue: 0,0:37:37.68,0:37:39.49,Default,,0,0,0,,And so, we went through how to
Dialogue: 0,0:37:39.49,0:37:42.54,Default,,0,0,0,,use NSURLSession, haptics, and
Dialogue: 0,0:37:42.54,0:37:44.67,Default,,0,0,0,,frontmost notifications, but
Dialogue: 0,0:37:44.67,0:37:45.82,Default,,0,0,0,,that only really scratches the
Dialogue: 0,0:37:45.82,0:37:46.39,Default,,0,0,0,,surface.
Dialogue: 0,0:37:46.82,0:37:48.15,Default,,0,0,0,,With the enhancements to watch
Dialogue: 0,0:37:48.15,0:37:49.61,Default,,0,0,0,,connectivity and task
Dialogue: 0,0:37:49.61,0:37:51.29,Default,,0,0,0,,completions, you could design
Dialogue: 0,0:37:51.32,0:37:53.20,Default,,0,0,0,,even more powerful interactions
Dialogue: 0,0:37:53.50,0:37:54.89,Default,,0,0,0,,that are incredibly simple to
Dialogue: 0,0:37:54.89,0:37:55.33,Default,,0,0,0,,use.
Dialogue: 0,0:37:55.92,0:37:57.21,Default,,0,0,0,,And so, I'm really excited to
Dialogue: 0,0:37:57.21,0:37:58.68,Default,,0,0,0,,see how you all take advantage
Dialogue: 0,0:37:58.68,0:37:59.87,Default,,0,0,0,,of these new capabilities.
Dialogue: 0,0:38:00.81,0:38:02.21,Default,,0,0,0,,So, if you want more information
Dialogue: 0,0:38:02.21,0:38:03.41,Default,,0,0,0,,about this session or any other
Dialogue: 0,0:38:03.41,0:38:05.07,Default,,0,0,0,,session, feel free to go to
Dialogue: 0,0:38:05.07,0:38:08.00,Default,,0,0,0,,developer.apple.com, and then we
Dialogue: 0,0:38:08.00,0:38:08.85,Default,,0,0,0,,have some great related
Dialogue: 0,0:38:08.85,0:38:09.43,Default,,0,0,0,,sessions.
Dialogue: 0,0:38:09.43,0:38:10.75,Default,,0,0,0,,There's a great one tomorrow for
Dialogue: 0,0:38:10.75,0:38:12.08,Default,,0,0,0,,planning a great Apple Watch
Dialogue: 0,0:38:12.08,0:38:12.79,Default,,0,0,0,,experience.
Dialogue: 0,0:38:13.06,0:38:14.34,Default,,0,0,0,,I highly recommend checking it
Dialogue: 0,0:38:14.34,0:38:14.59,Default,,0,0,0,,out.
Dialogue: 0,0:38:14.59,0:38:16.04,Default,,0,0,0,,I'm super excited for that one.
Dialogue: 0,0:38:16.42,0:38:18.34,Default,,0,0,0,,And, I hope you all have a great
Dialogue: 0,0:38:18.34,0:38:18.98,Default,,0,0,0,,WWDC.
Dialogue: 0,0:38:19.26,0:38:19.65,Default,,0,0,0,,Thank you.
Dialogue: 0,0:38:20.52,0:38:23.50,Default,,0,0,0,,[ Applause ]
