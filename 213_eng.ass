[Script Info]
; Script generated by FFmpeg/Lavc57.89.100
ScriptType: v4.00+
PlayResX: 384
PlayResY: 288

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,16,&Hffffff,&Hffffff,&H0,&H0,0,0,0,0,100,100,0,0,1,1,0,2,10,10,10,0

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:22.21,0:00:22.72,Default,,0,0,0,,>> Good morning.
Dialogue: 0,0:00:25.09,0:00:26.01,Default,,0,0,0,,I'm glad you could make it.
Dialogue: 0,0:00:26.58,0:00:27.68,Default,,0,0,0,,My name is Robb, and together
Dialogue: 0,0:00:27.68,0:00:28.79,Default,,0,0,0,,with my coworkers, Wenson and
Dialogue: 0,0:00:28.79,0:00:29.76,Default,,0,0,0,,Tom, I'm going to take you on a
Dialogue: 0,0:00:29.76,0:00:31.33,Default,,0,0,0,,deep dive today through the new
Dialogue: 0,0:00:31.33,0:00:32.49,Default,,0,0,0,,eight drag-and-drop APIs we are
Dialogue: 0,0:00:32.49,0:00:34.22,Default,,0,0,0,,introducing in iOS 11.
Dialogue: 0,0:00:34.48,0:00:36.78,Default,,0,0,0,,So, we have a bunch of new APIs
Dialogue: 0,0:00:36.78,0:00:38.17,Default,,0,0,0,,for you, but I don't want you to
Dialogue: 0,0:00:38.17,0:00:38.87,Default,,0,0,0,,get intimidated.
Dialogue: 0,0:00:39.27,0:00:40.07,Default,,0,0,0,,Even though we have a lot of
Dialogue: 0,0:00:40.07,0:00:41.66,Default,,0,0,0,,ground to cover, you can
Dialogue: 0,0:00:41.66,0:00:44.19,Default,,0,0,0,,gradually adopt these APIs and,
Dialogue: 0,0:00:44.19,0:00:45.47,Default,,0,0,0,,in fact, if you are one of the
Dialogue: 0,0:00:45.47,0:00:47.01,Default,,0,0,0,,few people who use Collection
Dialogue: 0,0:00:47.01,0:00:48.18,Default,,0,0,0,,view or Table view, there is a
Dialogue: 0,0:00:48.18,0:00:49.30,Default,,0,0,0,,dedicated session for you
Dialogue: 0,0:00:49.30,0:00:51.89,Default,,0,0,0,,tomorrow in Hall 2 that you can
Dialogue: 0,0:00:51.89,0:00:53.22,Default,,0,0,0,,check out, and it's followed
Dialogue: 0,0:00:53.22,0:00:54.53,Default,,0,0,0,,back-to-back by one on
Dialogue: 0,0:00:54.58,0:00:55.41,Default,,0,0,0,,NSItemProvider.
Dialogue: 0,0:00:55.79,0:00:57.16,Default,,0,0,0,,If you ever wondered what the U
Dialogue: 0,0:00:57.16,0:00:58.74,Default,,0,0,0,,in UDI stands for, do not miss
Dialogue: 0,0:00:58.74,0:01:00.24,Default,,0,0,0,,this session.
Dialogue: 0,0:01:00.56,0:01:02.13,Default,,0,0,0,,This session, however, is going
Dialogue: 0,0:01:02.13,0:01:03.13,Default,,0,0,0,,to split in two halves.
Dialogue: 0,0:01:03.20,0:01:04.34,Default,,0,0,0,,First, we're going to talk about
Dialogue: 0,0:01:04.34,0:01:05.54,Default,,0,0,0,,the drag side of things, the
Dialogue: 0,0:01:05.54,0:01:07.00,Default,,0,0,0,,drag interactions, it's
Dialogue: 0,0:01:07.00,0:01:08.48,Default,,0,0,0,,delegate, the session, the
Dialogue: 0,0:01:08.48,0:01:09.48,Default,,0,0,0,,associated drag item and
Dialogue: 0,0:01:09.48,0:01:11.01,Default,,0,0,0,,previews, and then Tom is going
Dialogue: 0,0:01:11.01,0:01:12.23,Default,,0,0,0,,to take over in the second half,
Dialogue: 0,0:01:12.23,0:01:13.66,Default,,0,0,0,,and do a similar thing for the
Dialogue: 0,0:01:13.66,0:01:14.26,Default,,0,0,0,,drop side.
Dialogue: 0,0:01:14.38,0:01:16.55,Default,,0,0,0,,So, we have a lot of stuff to
Dialogue: 0,0:01:16.55,0:01:17.76,Default,,0,0,0,,talk about, and we're going to
Dialogue: 0,0:01:17.76,0:01:19.30,Default,,0,0,0,,start with advanced drag
Dialogue: 0,0:01:19.30,0:01:19.93,Default,,0,0,0,,interactions.
Dialogue: 0,0:01:21.16,0:01:22.52,Default,,0,0,0,,So, as you already know, drag
Dialogue: 0,0:01:22.82,0:01:25.02,Default,,0,0,0,,and drop on iOS is not only a
Dialogue: 0,0:01:25.02,0:01:26.11,Default,,0,0,0,,way to share data between
Dialogue: 0,0:01:26.11,0:01:27.68,Default,,0,0,0,,applications, it's also a fluid
Dialogue: 0,0:01:27.68,0:01:29.30,Default,,0,0,0,,user interaction, and with these
Dialogue: 0,0:01:29.30,0:01:32.16,Default,,0,0,0,,kinds of complex user
Dialogue: 0,0:01:32.16,0:01:33.69,Default,,0,0,0,,interactions, consistency is
Dialogue: 0,0:01:33.69,0:01:34.79,Default,,0,0,0,,key, and you achieve this
Dialogue: 0,0:01:34.79,0:01:36.19,Default,,0,0,0,,consistency by using
Dialogue: 0,0:01:36.19,0:01:37.17,Default,,0,0,0,,UIDragInteraction.
Dialogue: 0,0:01:37.21,0:01:38.32,Default,,0,0,0,,You can take one of those and
Dialogue: 0,0:01:38.32,0:01:39.92,Default,,0,0,0,,install it on any of your views.
Dialogue: 0,0:01:39.92,0:01:40.97,Default,,0,0,0,,You don't have to subclass
Dialogue: 0,0:01:40.97,0:01:43.03,Default,,0,0,0,,anything, or even worse, go in
Dialogue: 0,0:01:43.03,0:01:43.80,Default,,0,0,0,,and change the existing
Dialogue: 0,0:01:43.80,0:01:45.10,Default,,0,0,0,,superclass of the custom views.
Dialogue: 0,0:01:45.46,0:01:46.60,Default,,0,0,0,,Just install one of them, and it
Dialogue: 0,0:01:46.60,0:01:47.89,Default,,0,0,0,,will do the necessary gesture
Dialogue: 0,0:01:47.89,0:01:48.72,Default,,0,0,0,,bookkeeping for you.
Dialogue: 0,0:01:49.11,0:01:50.11,Default,,0,0,0,,You do, however, have to
Dialogue: 0,0:01:50.39,0:01:51.35,Default,,0,0,0,,implement
Dialogue: 0,0:01:51.35,0:01:53.72,Default,,0,0,0,,UIDragInteractionDelegate, which
Dialogue: 0,0:01:53.72,0:01:55.43,Default,,0,0,0,,at least return a UIDragItem.
Dialogue: 0,0:01:55.86,0:01:57.39,Default,,0,0,0,,You can [inaudible] into a bunch
Dialogue: 0,0:01:57.39,0:01:59.56,Default,,0,0,0,,of notifications about lifecycle
Dialogue: 0,0:01:59.56,0:02:00.93,Default,,0,0,0,,and perform some animations, and
Dialogue: 0,0:02:00.93,0:02:03.08,Default,,0,0,0,,we'll go over those in a second.
Dialogue: 0,0:02:04.00,0:02:05.20,Default,,0,0,0,,If none of this makes any sense
Dialogue: 0,0:02:05.20,0:02:06.35,Default,,0,0,0,,to you, I would recommend you
Dialogue: 0,0:02:06.35,0:02:07.79,Default,,0,0,0,,catch up on Introducing Drag and
Dialogue: 0,0:02:07.79,0:02:08.98,Default,,0,0,0,,Drop, which is a session we had
Dialogue: 0,0:02:08.98,0:02:10.95,Default,,0,0,0,,yesterday, so if you missed it,
Dialogue: 0,0:02:10.95,0:02:12.46,Default,,0,0,0,,you will have to check out the
Dialogue: 0,0:02:12.46,0:02:14.63,Default,,0,0,0,,video, and that will kind of
Dialogue: 0,0:02:14.63,0:02:15.34,Default,,0,0,0,,cover the basics.
Dialogue: 0,0:02:15.67,0:02:17.18,Default,,0,0,0,,However, if the basics were good
Dialogue: 0,0:02:17.18,0:02:18.70,Default,,0,0,0,,enough, you wouldn't be here
Dialogue: 0,0:02:18.70,0:02:20.10,Default,,0,0,0,,today, so let's look at some of
Dialogue: 0,0:02:20.10,0:02:21.54,Default,,0,0,0,,the behaviors that native
Dialogue: 0,0:02:21.54,0:02:24.12,Default,,0,0,0,,applications in iOS 11 employ,
Dialogue: 0,0:02:24.43,0:02:25.63,Default,,0,0,0,,and what your users will come to
Dialogue: 0,0:02:25.63,0:02:26.68,Default,,0,0,0,,expect of your applications,
Dialogue: 0,0:02:26.68,0:02:27.14,Default,,0,0,0,,going forward.
Dialogue: 0,0:02:27.85,0:02:30.59,Default,,0,0,0,,So, here you see me in Mail, and
Dialogue: 0,0:02:30.59,0:02:31.88,Default,,0,0,0,,you can see that, as I start a
Dialogue: 0,0:02:31.88,0:02:33.45,Default,,0,0,0,,drag with a long press on a
Dialogue: 0,0:02:33.45,0:02:34.52,Default,,0,0,0,,message, I can then tap
Dialogue: 0,0:02:34.89,0:02:36.37,Default,,0,0,0,,subsequent messages and they
Dialogue: 0,0:02:36.37,0:02:39.02,Default,,0,0,0,,will flock to the drag session
Dialogue: 0,0:02:39.02,0:02:40.40,Default,,0,0,0,,that I have already in progress,
Dialogue: 0,0:02:40.40,0:02:41.84,Default,,0,0,0,,so the little batch count keeps
Dialogue: 0,0:02:41.84,0:02:42.35,Default,,0,0,0,,increasing, there.
Dialogue: 0,0:02:42.90,0:02:43.80,Default,,0,0,0,,This is not something you get
Dialogue: 0,0:02:43.80,0:02:45.29,Default,,0,0,0,,out of the box for free, but
Dialogue: 0,0:02:45.29,0:02:46.43,Default,,0,0,0,,it's not very hard to implement,
Dialogue: 0,0:02:46.43,0:02:47.18,Default,,0,0,0,,either, and I'm going to show
Dialogue: 0,0:02:47.18,0:02:47.60,Default,,0,0,0,,you how.
Dialogue: 0,0:02:48.67,0:02:49.73,Default,,0,0,0,,So, in this example, I've
Dialogue: 0,0:02:49.73,0:02:50.56,Default,,0,0,0,,already implemented
Dialogue: 0,0:02:50.56,0:02:51.78,Default,,0,0,0,,UIDragInteractionDelegate,
Dialogue: 0,0:02:52.43,0:02:54.56,Default,,0,0,0,,specifically the required method
Dialogue: 0,0:02:54.56,0:02:55.28,Default,,0,0,0,,dragInteraction
Dialogue: 0,0:02:55.28,0:02:57.08,Default,,0,0,0,,itemsForBeginning session, in
Dialogue: 0,0:02:57.08,0:02:58.87,Default,,0,0,0,,which I create an NSItemProvider
Dialogue: 0,0:02:58.87,0:03:00.80,Default,,0,0,0,,for the message I want to drag,
Dialogue: 0,0:03:01.90,0:03:04.00,Default,,0,0,0,,then I create a UIDragItem with
Dialogue: 0,0:03:04.00,0:03:05.85,Default,,0,0,0,,said itemProvider set to
Dialogue: 0,0:03:05.85,0:03:07.73,Default,,0,0,0,,localObject to the message, so I
Dialogue: 0,0:03:07.73,0:03:09.47,Default,,0,0,0,,can later easily refer back to
Dialogue: 0,0:03:09.47,0:03:11.23,Default,,0,0,0,,the message, and then I return
Dialogue: 0,0:03:11.23,0:03:12.09,Default,,0,0,0,,the dropped-in array.
Dialogue: 0,0:03:13.23,0:03:14.85,Default,,0,0,0,,Now, you could use the exact
Dialogue: 0,0:03:14.85,0:03:15.91,Default,,0,0,0,,same implementation for
Dialogue: 0,0:03:15.91,0:03:17.31,Default,,0,0,0,,dragInteraction itemsForAddingTo
Dialogue: 0,0:03:17.31,0:03:19.11,Default,,0,0,0,,session withTouchAt point, and
Dialogue: 0,0:03:19.11,0:03:19.65,Default,,0,0,0,,that would work.
Dialogue: 0,0:03:20.39,0:03:21.42,Default,,0,0,0,,However, there is some edge
Dialogue: 0,0:03:21.42,0:03:22.89,Default,,0,0,0,,cases that I want you to think
Dialogue: 0,0:03:22.89,0:03:24.42,Default,,0,0,0,,about as you implement flocking
Dialogue: 0,0:03:24.42,0:03:25.84,Default,,0,0,0,,by opting into this method.
Dialogue: 0,0:03:26.65,0:03:28.18,Default,,0,0,0,,First, if you implement this
Dialogue: 0,0:03:28.18,0:03:29.68,Default,,0,0,0,,method, your dragInteraction can
Dialogue: 0,0:03:29.68,0:03:31.13,Default,,0,0,0,,now flock with any other
Dialogue: 0,0:03:31.33,0:03:32.25,Default,,0,0,0,,dragInteraction in your
Dialogue: 0,0:03:32.25,0:03:33.42,Default,,0,0,0,,application, not with
Dialogue: 0,0:03:33.42,0:03:34.22,Default,,0,0,0,,dragInteractions in other
Dialogue: 0,0:03:34.22,0:03:35.25,Default,,0,0,0,,applications, because we
Dialogue: 0,0:03:35.25,0:03:36.09,Default,,0,0,0,,currently don't allow
Dialogue: 0,0:03:36.09,0:03:37.69,Default,,0,0,0,,cross-application flocking, but
Dialogue: 0,0:03:37.69,0:03:38.88,Default,,0,0,0,,that dragInteractionDelegate
Dialogue: 0,0:03:38.88,0:03:40.24,Default,,0,0,0,,that Bob's implementing in that
Dialogue: 0,0:03:40.24,0:03:41.92,Default,,0,0,0,,other department, you can
Dialogue: 0,0:03:41.92,0:03:42.95,Default,,0,0,0,,potentially flock with that, so
Dialogue: 0,0:03:42.95,0:03:43.92,Default,,0,0,0,,you want to be aware.
Dialogue: 0,0:03:44.31,0:03:45.54,Default,,0,0,0,,In this case, I decided that I
Dialogue: 0,0:03:45.54,0:03:46.82,Default,,0,0,0,,only want to flock my messages
Dialogue: 0,0:03:47.26,0:03:51.23,Default,,0,0,0,,with other messages, so I
Dialogue: 0,0:03:51.23,0:03:52.36,Default,,0,0,0,,iterate over all the items in
Dialogue: 0,0:03:52.36,0:03:54.02,Default,,0,0,0,,the session, and if any of them
Dialogue: 0,0:03:54.19,0:03:56.74,Default,,0,0,0,,does not have an NSItemProvider
Dialogue: 0,0:03:56.96,0:03:58.56,Default,,0,0,0,,that has a UDI conforming to
Dialogue: 0,0:03:58.56,0:04:00.14,Default,,0,0,0,,this type, in this example,
Dialogue: 0,0:04:00.14,0:04:01.96,Default,,0,0,0,,private.example.mail, I'll abort
Dialogue: 0,0:04:02.03,0:04:03.88,Default,,0,0,0,,by returning an empty array, and
Dialogue: 0,0:04:03.88,0:04:04.89,Default,,0,0,0,,this will give other gesture
Dialogue: 0,0:04:04.89,0:04:07.09,Default,,0,0,0,,recognizes to recognize the tap
Dialogue: 0,0:04:07.09,0:04:08.26,Default,,0,0,0,,that triggered this flocking
Dialogue: 0,0:04:08.51,0:04:08.94,Default,,0,0,0,,attempt.
Dialogue: 0,0:04:09.52,0:04:12.65,Default,,0,0,0,,Similarly, by default, the same
Dialogue: 0,0:04:13.06,0:04:14.18,Default,,0,0,0,,dragInteraction, therefore the
Dialogue: 0,0:04:14.18,0:04:15.85,Default,,0,0,0,,same UI view can flock multiple
Dialogue: 0,0:04:16.46,0:04:16.73,Default,,0,0,0,,times.
Dialogue: 0,0:04:16.73,0:04:17.94,Default,,0,0,0,,We can't possibly know if that
Dialogue: 0,0:04:17.94,0:04:18.68,Default,,0,0,0,,makes sense for your
Dialogue: 0,0:04:18.68,0:04:21.09,Default,,0,0,0,,application, or if maybe
Dialogue: 0,0:04:21.09,0:04:22.32,Default,,0,0,0,,different regions inside your
Dialogue: 0,0:04:22.32,0:04:23.68,Default,,0,0,0,,view correspond to different
Dialogue: 0,0:04:23.68,0:04:25.46,Default,,0,0,0,,drag items, so you have to tell
Dialogue: 0,0:04:25.46,0:04:25.61,Default,,0,0,0,,us.
Dialogue: 0,0:04:25.69,0:04:26.79,Default,,0,0,0,,And, in this case, I check if
Dialogue: 0,0:04:26.79,0:04:28.23,Default,,0,0,0,,the local object of any of the
Dialogue: 0,0:04:28.23,0:04:29.52,Default,,0,0,0,,other items already in the
Dialogue: 0,0:04:29.52,0:04:30.79,Default,,0,0,0,,session correspond to the
Dialogue: 0,0:04:30.79,0:04:31.90,Default,,0,0,0,,message that I want to check
Dialogue: 0,0:04:31.90,0:04:33.51,Default,,0,0,0,,now, and if it's already there,
Dialogue: 0,0:04:33.72,0:04:34.99,Default,,0,0,0,,I also abort, using an empty
Dialogue: 0,0:04:34.99,0:04:35.24,Default,,0,0,0,,array.
Dialogue: 0,0:04:35.24,0:04:36.62,Default,,0,0,0,,So, this is how you get
Dialogue: 0,0:04:36.62,0:04:37.02,Default,,0,0,0,,flocking.
Dialogue: 0,0:04:38.46,0:04:40.33,Default,,0,0,0,,Another behavior that Mail has
Dialogue: 0,0:04:41.40,0:04:42.35,Default,,0,0,0,,is this.
Dialogue: 0,0:04:42.83,0:04:44.18,Default,,0,0,0,,As I long-press on a thread,
Dialogue: 0,0:04:44.18,0:04:45.98,Default,,0,0,0,,instead of lifting one item that
Dialogue: 0,0:04:45.98,0:04:49.08,Default,,0,0,0,,represents the thread, one item,
Dialogue: 0,0:04:49.45,0:04:51.30,Default,,0,0,0,,I instead lift three that each
Dialogue: 0,0:04:51.30,0:04:52.76,Default,,0,0,0,,represent a message in this
Dialogue: 0,0:04:52.81,0:04:54.02,Default,,0,0,0,,thread, as indicated by the
Dialogue: 0,0:04:54.02,0:04:57.10,Default,,0,0,0,,little blue bubble, there.
Dialogue: 0,0:04:57.10,0:04:58.19,Default,,0,0,0,,As we've already seen,
Dialogue: 0,0:04:58.85,0:05:00.71,Default,,0,0,0,,UIDragInteractionDelegates drag
Dialogue: 0,0:05:00.71,0:05:02.37,Default,,0,0,0,,item itemsForBeginning session
Dialogue: 0,0:05:02.37,0:05:03.67,Default,,0,0,0,,returns an array, so it stands
Dialogue: 0,0:05:03.67,0:05:04.65,Default,,0,0,0,,to reason we can, in fact,
Dialogue: 0,0:05:04.65,0:05:06.28,Default,,0,0,0,,return multiple items here, and
Dialogue: 0,0:05:06.34,0:05:08.42,Default,,0,0,0,,then that's something I'll do
Dialogue: 0,0:05:08.42,0:05:08.63,Default,,0,0,0,,here.
Dialogue: 0,0:05:08.80,0:05:10.47,Default,,0,0,0,,So, I grab all the messages from
Dialogue: 0,0:05:10.47,0:05:13.60,Default,,0,0,0,,my mailThread, I sort them, and
Dialogue: 0,0:05:13.60,0:05:14.65,Default,,0,0,0,,I'll explain why in a second,
Dialogue: 0,0:05:14.92,0:05:18.13,Default,,0,0,0,,and then I return a UIDragItem
Dialogue: 0,0:05:18.13,0:05:19.16,Default,,0,0,0,,for each of them in the exact
Dialogue: 0,0:05:19.16,0:05:20.03,Default,,0,0,0,,same fashion that you've seen
Dialogue: 0,0:05:20.03,0:05:20.34,Default,,0,0,0,,before.
Dialogue: 0,0:05:20.71,0:05:21.72,Default,,0,0,0,,Now, the reason that I'm sorting
Dialogue: 0,0:05:21.72,0:05:23.69,Default,,0,0,0,,them is that the order of the
Dialogue: 0,0:05:23.69,0:05:24.58,Default,,0,0,0,,array that you return here
Dialogue: 0,0:05:24.58,0:05:25.70,Default,,0,0,0,,matters, and it's so that the
Dialogue: 0,0:05:25.70,0:05:27.59,Default,,0,0,0,,last item in the array is going
Dialogue: 0,0:05:27.59,0:05:29.35,Default,,0,0,0,,to be the topmost object of your
Dialogue: 0,0:05:29.35,0:05:30.20,Default,,0,0,0,,lift, and since I want the
Dialogue: 0,0:05:30.20,0:05:31.72,Default,,0,0,0,,newest message first, I sort
Dialogue: 0,0:05:31.72,0:05:33.88,Default,,0,0,0,,them so that the oldest is the
Dialogue: 0,0:05:33.88,0:05:34.60,Default,,0,0,0,,first in the array.
Dialogue: 0,0:05:35.17,0:05:35.97,Default,,0,0,0,,And, this would work.
Dialogue: 0,0:05:36.23,0:05:37.54,Default,,0,0,0,,However, if this was all we
Dialogue: 0,0:05:37.54,0:05:41.01,Default,,0,0,0,,implemented, all the items would
Dialogue: 0,0:05:41.01,0:05:43.00,Default,,0,0,0,,lift with the same preview.
Dialogue: 0,0:05:43.17,0:05:44.02,Default,,0,0,0,,That means they would have the
Dialogue: 0,0:05:44.02,0:05:45.37,Default,,0,0,0,,same visual representation and,
Dialogue: 0,0:05:45.37,0:05:46.86,Default,,0,0,0,,by default, the preview that we
Dialogue: 0,0:05:46.86,0:05:48.85,Default,,0,0,0,,create is going to be based on
Dialogue: 0,0:05:48.85,0:05:49.86,Default,,0,0,0,,the view that the interaction is
Dialogue: 0,0:05:49.86,0:05:51.04,Default,,0,0,0,,installed on, so that would mean
Dialogue: 0,0:05:51.04,0:05:52.15,Default,,0,0,0,,that all three messages would
Dialogue: 0,0:05:52.15,0:05:53.83,Default,,0,0,0,,have the thread as their visual
Dialogue: 0,0:05:53.83,0:05:54.49,Default,,0,0,0,,representation.
Dialogue: 0,0:05:54.75,0:05:56.25,Default,,0,0,0,,And, since I don't want that, I
Dialogue: 0,0:05:56.25,0:05:57.29,Default,,0,0,0,,implement the optional
Dialogue: 0,0:05:57.29,0:05:58.01,Default,,0,0,0,,dragInteraction
Dialogue: 0,0:05:58.01,0:05:59.54,Default,,0,0,0,,previewForLifting item session,
Dialogue: 0,0:05:59.82,0:06:00.96,Default,,0,0,0,,in which I get to return my own
Dialogue: 0,0:06:00.96,0:06:01.48,Default,,0,0,0,,drag preview.
Dialogue: 0,0:06:01.98,0:06:04.10,Default,,0,0,0,,So, what I do here is, I first
Dialogue: 0,0:06:04.10,0:06:05.34,Default,,0,0,0,,attempt to find the message
Dialogue: 0,0:06:05.60,0:06:08.50,Default,,0,0,0,,associated with that item, and
Dialogue: 0,0:06:08.50,0:06:10.46,Default,,0,0,0,,if I have it, I grab its
Dialogue: 0,0:06:10.46,0:06:11.69,Default,,0,0,0,,associated message views through
Dialogue: 0,0:06:11.69,0:06:12.86,Default,,0,0,0,,its helper method I happen to
Dialogue: 0,0:06:12.86,0:06:14.25,Default,,0,0,0,,have, and initialize my
Dialogue: 0,0:06:14.25,0:06:16.19,Default,,0,0,0,,UITargetedDragPreview with that.
Dialogue: 0,0:06:16.19,0:06:18.12,Default,,0,0,0,,And, that would mean that all of
Dialogue: 0,0:06:18.86,0:06:20.29,Default,,0,0,0,,the messages that I'm lifting
Dialogue: 0,0:06:20.29,0:06:21.11,Default,,0,0,0,,would have their own
Dialogue: 0,0:06:21.11,0:06:22.43,Default,,0,0,0,,representation based on the
Dialogue: 0,0:06:22.43,0:06:23.77,Default,,0,0,0,,message view dedicated to them.
Dialogue: 0,0:06:24.56,0:06:26.34,Default,,0,0,0,,And, last but not least, here's
Dialogue: 0,0:06:26.34,0:06:28.81,Default,,0,0,0,,another thing that Mail can do
Dialogue: 0,0:06:28.81,0:06:29.76,Default,,0,0,0,,that is kind of tricky.
Dialogue: 0,0:06:30.97,0:06:32.46,Default,,0,0,0,,You see me here dragging photos
Dialogue: 0,0:06:32.54,0:06:35.15,Default,,0,0,0,,from Photos to Mail, and if you
Dialogue: 0,0:06:35.15,0:06:36.70,Default,,0,0,0,,pay attention, you'll notice
Dialogue: 0,0:06:36.70,0:06:39.79,Default,,0,0,0,,that the photos lift into an
Dialogue: 0,0:06:40.43,0:06:42.07,Default,,0,0,0,,appropriate size for the entire
Dialogue: 0,0:06:42.07,0:06:43.15,Default,,0,0,0,,width of the compose sheet.
Dialogue: 0,0:06:43.81,0:06:45.93,Default,,0,0,0,,So, how is it that Mail already
Dialogue: 0,0:06:45.93,0:06:47.26,Default,,0,0,0,,knows how much room to make, and
Dialogue: 0,0:06:47.26,0:06:48.43,Default,,0,0,0,,where to target the preview?
Dialogue: 0,0:06:48.76,0:06:49.92,Default,,0,0,0,,Is it because the data just
Dialogue: 0,0:06:49.92,0:06:51.23,Default,,0,0,0,,happened to arrive so quickly?
Dialogue: 0,0:06:51.52,0:06:53.75,Default,,0,0,0,,No. You should not make any
Dialogue: 0,0:06:54.11,0:06:55.39,Default,,0,0,0,,assumptions here.
Dialogue: 0,0:06:55.39,0:06:56.83,Default,,0,0,0,,In my demos, the data's going to
Dialogue: 0,0:06:56.83,0:06:58.19,Default,,0,0,0,,arrive in time, but that may not
Dialogue: 0,0:06:58.19,0:07:00.19,Default,,0,0,0,,be the case for your users, and
Dialogue: 0,0:07:00.19,0:07:01.12,Default,,0,0,0,,there's a better way to handle
Dialogue: 0,0:07:01.12,0:07:01.71,Default,,0,0,0,,this situation.
Dialogue: 0,0:07:02.18,0:07:04.18,Default,,0,0,0,,It turns out that NSItemProvider
Dialogue: 0,0:07:05.09,0:07:06.15,Default,,0,0,0,,has a property called
Dialogue: 0,0:07:06.50,0:07:08.36,Default,,0,0,0,,preferredPresentationSize, which
Dialogue: 0,0:07:08.36,0:07:09.44,Default,,0,0,0,,allows you to communicate the
Dialogue: 0,0:07:09.44,0:07:10.73,Default,,0,0,0,,size that you expect something
Dialogue: 0,0:07:10.73,0:07:11.83,Default,,0,0,0,,to be represented at on the
Dialogue: 0,0:07:11.83,0:07:12.93,Default,,0,0,0,,other side, kind of out of
Dialogue: 0,0:07:12.98,0:07:14.69,Default,,0,0,0,,channel, so even though I'm
Dialogue: 0,0:07:14.69,0:07:16.17,Default,,0,0,0,,initializing the NSItemProvider
Dialogue: 0,0:07:16.17,0:07:17.49,Default,,0,0,0,,with the file here, I happen to
Dialogue: 0,0:07:17.49,0:07:18.90,Default,,0,0,0,,know the size, and I can set its
Dialogue: 0,0:07:18.90,0:07:20.02,Default,,0,0,0,,preferredPresentationSize
Dialogue: 0,0:07:20.02,0:07:21.48,Default,,0,0,0,,accordingly, and then Mail is
Dialogue: 0,0:07:21.48,0:07:22.55,Default,,0,0,0,,able to read that out on the
Dialogue: 0,0:07:22.55,0:07:24.13,Default,,0,0,0,,other side, and everything else
Dialogue: 0,0:07:24.13,0:07:25.00,Default,,0,0,0,,is just the same.
Dialogue: 0,0:07:25.62,0:07:27.45,Default,,0,0,0,,Now, you can take my word for it
Dialogue: 0,0:07:27.45,0:07:28.81,Default,,0,0,0,,that this works, but we've only
Dialogue: 0,0:07:28.81,0:07:29.98,Default,,0,0,0,,known each other for what, nine
Dialogue: 0,0:07:29.98,0:07:30.27,Default,,0,0,0,,minutes?
Dialogue: 0,0:07:30.44,0:07:31.96,Default,,0,0,0,,So, Wenson's going to show you a
Dialogue: 0,0:07:31.96,0:07:33.53,Default,,0,0,0,,demo now.
Dialogue: 0,0:07:34.52,0:07:41.64,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:07:42.14,0:07:42.53,Default,,0,0,0,,>> Alright.
Dialogue: 0,0:07:42.53,0:07:43.16,Default,,0,0,0,,Thank you, Robb.
Dialogue: 0,0:07:48.08,0:07:49.10,Default,,0,0,0,,>> So now, before I jump into
Dialogue: 0,0:07:49.10,0:07:50.36,Default,,0,0,0,,the demo, there's a couple of
Dialogue: 0,0:07:50.36,0:07:51.17,Default,,0,0,0,,things I'd like to say.
Dialogue: 0,0:07:51.72,0:07:53.06,Default,,0,0,0,,All of the sample code that I'm
Dialogue: 0,0:07:53.06,0:07:54.59,Default,,0,0,0,,about to show you will all be
Dialogue: 0,0:07:54.59,0:07:56.43,Default,,0,0,0,,available online, and I strongly
Dialogue: 0,0:07:56.43,0:07:57.35,Default,,0,0,0,,encourage you all to check it
Dialogue: 0,0:07:57.35,0:07:57.64,Default,,0,0,0,,out.
Dialogue: 0,0:07:58.18,0:07:59.54,Default,,0,0,0,,Second of all, we will be going
Dialogue: 0,0:07:59.54,0:08:01.24,Default,,0,0,0,,over not one but two demo apps
Dialogue: 0,0:08:01.24,0:08:01.51,Default,,0,0,0,,today.
Dialogue: 0,0:08:01.97,0:08:03.24,Default,,0,0,0,,First one is called Drag Source,
Dialogue: 0,0:08:03.24,0:08:04.70,Default,,0,0,0,,and it will focus on drag
Dialogue: 0,0:08:04.70,0:08:05.31,Default,,0,0,0,,interactions.
Dialogue: 0,0:08:05.62,0:08:07.35,Default,,0,0,0,,Second one, Drop Destination,
Dialogue: 0,0:08:07.39,0:08:08.68,Default,,0,0,0,,will focus, as you might have
Dialogue: 0,0:08:08.72,0:08:09.88,Default,,0,0,0,,guessed, on the drop side.
Dialogue: 0,0:08:10.46,0:08:12.97,Default,,0,0,0,,So, with that said, let's take a
Dialogue: 0,0:08:12.97,0:08:15.27,Default,,0,0,0,,look at our first demo app.
Dialogue: 0,0:08:15.51,0:08:19.24,Default,,0,0,0,,So, in here, we see four stacks
Dialogue: 0,0:08:19.24,0:08:22.52,Default,,0,0,0,,of images, and currently, we
Dialogue: 0,0:08:22.52,0:08:24.03,Default,,0,0,0,,have implemented very basic
Dialogue: 0,0:08:24.03,0:08:26.00,Default,,0,0,0,,cases of drag interactions, so
Dialogue: 0,0:08:26.00,0:08:27.40,Default,,0,0,0,,we're able to drag a single
Dialogue: 0,0:08:27.40,0:08:28.78,Default,,0,0,0,,image out of each stack.
Dialogue: 0,0:08:29.93,0:08:31.82,Default,,0,0,0,,So, that works great, but it
Dialogue: 0,0:08:31.82,0:08:33.08,Default,,0,0,0,,would be kind of cool if we
Dialogue: 0,0:08:33.08,0:08:34.95,Default,,0,0,0,,could drag an entire stack of
Dialogue: 0,0:08:34.95,0:08:36.88,Default,,0,0,0,,images out as individual items,
Dialogue: 0,0:08:37.07,0:08:38.00,Default,,0,0,0,,one per each image.
Dialogue: 0,0:08:38.77,0:08:39.55,Default,,0,0,0,,So, let's take a look at the
Dialogue: 0,0:08:39.55,0:08:40.79,Default,,0,0,0,,code and see what we can do.
Dialogue: 0,0:08:41.94,0:08:43.73,Default,,0,0,0,,Now, currently, if you look at
Dialogue: 0,0:08:43.73,0:08:45.92,Default,,0,0,0,,this, we just consider the last
Dialogue: 0,0:08:45.92,0:08:47.68,Default,,0,0,0,,image view, and use it to create
Dialogue: 0,0:08:47.68,0:08:50.05,Default,,0,0,0,,a new drag item, just using that
Dialogue: 0,0:08:50.05,0:08:50.78,Default,,0,0,0,,last image view.
Dialogue: 0,0:08:51.43,0:08:52.75,Default,,0,0,0,,Instead, it's a pretty short
Dialogue: 0,0:08:52.75,0:08:55.27,Default,,0,0,0,,stretch to enumerate through all
Dialogue: 0,0:08:55.27,0:08:57.61,Default,,0,0,0,,of our available image views and
Dialogue: 0,0:08:57.61,0:08:59.21,Default,,0,0,0,,return drag item for each one.
Dialogue: 0,0:08:59.21,0:09:00.93,Default,,0,0,0,,So, we're going to do just that,
Dialogue: 0,0:09:01.82,0:09:02.92,Default,,0,0,0,,and now let's see how it
Dialogue: 0,0:09:02.92,0:09:03.44,Default,,0,0,0,,behaves.
Dialogue: 0,0:09:04.51,0:09:05.64,Default,,0,0,0,,So, watch what happens when I
Dialogue: 0,0:09:05.64,0:09:07.31,Default,,0,0,0,,begin a drag on the second stack
Dialogue: 0,0:09:07.31,0:09:07.89,Default,,0,0,0,,of images.
Dialogue: 0,0:09:09.10,0:09:10.20,Default,,0,0,0,,You'll notice that there's a
Dialogue: 0,0:09:10.20,0:09:11.75,Default,,0,0,0,,badge count of three this time.
Dialogue: 0,0:09:11.95,0:09:12.88,Default,,0,0,0,,That indicates that there are
Dialogue: 0,0:09:12.88,0:09:14.00,Default,,0,0,0,,three items in the drag,
Dialogue: 0,0:09:14.30,0:09:15.18,Default,,0,0,0,,corresponding to the three
Dialogue: 0,0:09:15.18,0:09:16.20,Default,,0,0,0,,images in the stack.
Dialogue: 0,0:09:16.82,0:09:18.07,Default,,0,0,0,,Now, if I bring up Photos on my
Dialogue: 0,0:09:18.07,0:09:20.71,Default,,0,0,0,,right side, here, you'll notice
Dialogue: 0,0:09:21.16,0:09:23.50,Default,,0,0,0,,that I can actually drop these
Dialogue: 0,0:09:23.50,0:09:25.27,Default,,0,0,0,,three images into Photos, and
Dialogue: 0,0:09:25.27,0:09:27.98,Default,,0,0,0,,it'll save them as individual
Dialogue: 0,0:09:27.98,0:09:28.35,Default,,0,0,0,,items.
Dialogue: 0,0:09:29.27,0:09:30.36,Default,,0,0,0,,Now, while we're in Photos,
Dialogue: 0,0:09:30.36,0:09:31.17,Default,,0,0,0,,there's something else I'd like
Dialogue: 0,0:09:31.17,0:09:31.65,Default,,0,0,0,,to show you.
Dialogue: 0,0:09:32.05,0:09:34.59,Default,,0,0,0,,So, I've begun a drag on one of
Dialogue: 0,0:09:34.59,0:09:36.64,Default,,0,0,0,,these images, and now, if I tap
Dialogue: 0,0:09:37.30,0:09:38.39,Default,,0,0,0,,on these other two images,
Dialogue: 0,0:09:38.49,0:09:39.68,Default,,0,0,0,,you'll see that we add those to
Dialogue: 0,0:09:39.68,0:09:41.11,Default,,0,0,0,,the existing drag session as
Dialogue: 0,0:09:41.11,0:09:41.62,Default,,0,0,0,,well.
Dialogue: 0,0:09:42.29,0:09:43.51,Default,,0,0,0,,So, as Robb mentioned, this is
Dialogue: 0,0:09:43.51,0:09:44.90,Default,,0,0,0,,not a behavior we get for free.
Dialogue: 0,0:09:45.45,0:09:46.51,Default,,0,0,0,,Luckily, it's pretty easy to
Dialogue: 0,0:09:46.51,0:09:47.92,Default,,0,0,0,,implement, and I'll show you
Dialogue: 0,0:09:47.92,0:09:48.13,Default,,0,0,0,,how.
Dialogue: 0,0:09:48.97,0:09:51.10,Default,,0,0,0,,So, going back to the code, all
Dialogue: 0,0:09:51.10,0:09:51.95,Default,,0,0,0,,we've got to implement is
Dialogue: 0,0:09:51.95,0:09:53.25,Default,,0,0,0,,itemsForAddingTo session.
Dialogue: 0,0:09:54.17,0:09:55.71,Default,,0,0,0,,So, the thing to notice here is
Dialogue: 0,0:09:55.71,0:09:57.29,Default,,0,0,0,,that we can actually use the
Dialogue: 0,0:09:57.29,0:09:59.30,Default,,0,0,0,,exact same logic to construct
Dialogue: 0,0:09:59.30,0:10:01.09,Default,,0,0,0,,drag items in itemsForAddingTo
Dialogue: 0,0:10:01.09,0:10:03.09,Default,,0,0,0,,session as in itemsForBeginning
Dialogue: 0,0:10:03.09,0:10:03.47,Default,,0,0,0,,session.
Dialogue: 0,0:10:04.05,0:10:05.78,Default,,0,0,0,,So, to make this easier for
Dialogue: 0,0:10:05.78,0:10:07.03,Default,,0,0,0,,ourselves, we'll just take the
Dialogue: 0,0:10:07.03,0:10:08.46,Default,,0,0,0,,logic that used to have in
Dialogue: 0,0:10:08.46,0:10:09.75,Default,,0,0,0,,itemsForBeginning session and
Dialogue: 0,0:10:10.09,0:10:11.62,Default,,0,0,0,,introduce a new helper method.
Dialogue: 0,0:10:11.70,0:10:13.47,Default,,0,0,0,,I'm going to call this dragItems
Dialogue: 0,0:10:13.47,0:10:13.95,Default,,0,0,0,,for session.
Dialogue: 0,0:10:15.47,0:10:17.06,Default,,0,0,0,,Then, in both places, when we
Dialogue: 0,0:10:17.06,0:10:18.23,Default,,0,0,0,,are adding to an existing
Dialogue: 0,0:10:18.23,0:10:21.53,Default,,0,0,0,,session, right here, and when we
Dialogue: 0,0:10:21.53,0:10:23.89,Default,,0,0,0,,are creating a new session in
Dialogue: 0,0:10:23.89,0:10:25.72,Default,,0,0,0,,itemsForBeginning session, we'll
Dialogue: 0,0:10:25.72,0:10:27.08,Default,,0,0,0,,simply turn around and call this
Dialogue: 0,0:10:27.08,0:10:27.57,Default,,0,0,0,,new helper.
Dialogue: 0,0:10:27.57,0:10:31.47,Default,,0,0,0,,OK? So, that should give us the
Dialogue: 0,0:10:31.47,0:10:34.24,Default,,0,0,0,,ability to add more images into
Dialogue: 0,0:10:34.24,0:10:36.18,Default,,0,0,0,,our existing drag session, and
Dialogue: 0,0:10:36.18,0:10:38.04,Default,,0,0,0,,as you can see, as I tap on each
Dialogue: 0,0:10:38.04,0:10:39.19,Default,,0,0,0,,of these other three views,
Dialogue: 0,0:10:39.73,0:10:42.12,Default,,0,0,0,,we're able to add all 10 images
Dialogue: 0,0:10:42.12,0:10:43.42,Default,,0,0,0,,into the drag session.
Dialogue: 0,0:10:43.94,0:10:45.22,Default,,0,0,0,,So, that works pretty well, but
Dialogue: 0,0:10:45.59,0:10:46.99,Default,,0,0,0,,there's one caveat.
Dialogue: 0,0:10:47.29,0:10:49.17,Default,,0,0,0,,So, notice here, I'm going to
Dialogue: 0,0:10:49.17,0:10:50.28,Default,,0,0,0,,start a drag on the first stack
Dialogue: 0,0:10:50.28,0:10:51.62,Default,,0,0,0,,of images, and I'm just going to
Dialogue: 0,0:10:51.62,0:10:52.62,Default,,0,0,0,,keep on tapping the first stack
Dialogue: 0,0:10:52.62,0:10:53.20,Default,,0,0,0,,of images.
Dialogue: 0,0:10:54.20,0:10:55.61,Default,,0,0,0,,So, you can see that I'm able to
Dialogue: 0,0:10:55.61,0:10:56.95,Default,,0,0,0,,arbitrarily add a whole ton of
Dialogue: 0,0:10:56.95,0:10:58.55,Default,,0,0,0,,images that I probably shouldn't
Dialogue: 0,0:10:58.55,0:10:59.17,Default,,0,0,0,,be able to add.
Dialogue: 0,0:10:59.53,0:11:00.66,Default,,0,0,0,,This seems like a bug to me.
Dialogue: 0,0:11:00.98,0:11:02.92,Default,,0,0,0,,I have 26 copies of each image
Dialogue: 0,0:11:02.92,0:11:03.92,Default,,0,0,0,,now in the drag session.
Dialogue: 0,0:11:04.42,0:11:06.32,Default,,0,0,0,,So, let's figure out how we can
Dialogue: 0,0:11:06.32,0:11:06.78,Default,,0,0,0,,fix that.
Dialogue: 0,0:11:07.70,0:11:09.40,Default,,0,0,0,,Now, here's our helper that we
Dialogue: 0,0:11:09.40,0:11:11.83,Default,,0,0,0,,just introduced, and what we can
Dialogue: 0,0:11:11.83,0:11:13.50,Default,,0,0,0,,do here is, instead of using all
Dialogue: 0,0:11:13.50,0:11:14.48,Default,,0,0,0,,the imageViews to create
Dialogue: 0,0:11:14.48,0:11:16.13,Default,,0,0,0,,dragItems every single time we
Dialogue: 0,0:11:16.13,0:11:17.82,Default,,0,0,0,,tap, what we're going to do is
Dialogue: 0,0:11:17.89,0:11:19.09,Default,,0,0,0,,filter out the imageViews, so we
Dialogue: 0,0:11:19.09,0:11:20.52,Default,,0,0,0,,don't use an imageView to create
Dialogue: 0,0:11:20.52,0:11:22.11,Default,,0,0,0,,more than one dragItem.
Dialogue: 0,0:11:23.95,0:11:25.61,Default,,0,0,0,,So, with those three lines of
Dialogue: 0,0:11:25.61,0:11:27.64,Default,,0,0,0,,code, I'm going to hop back into
Dialogue: 0,0:11:27.64,0:11:29.87,Default,,0,0,0,,the app and show you how it
Dialogue: 0,0:11:30.79,0:11:30.94,Default,,0,0,0,,works.
Dialogue: 0,0:11:31.09,0:11:33.69,Default,,0,0,0,,OK. So now, I've begun a drag on
Dialogue: 0,0:11:33.69,0:11:34.70,Default,,0,0,0,,the first stack of images, and
Dialogue: 0,0:11:34.70,0:11:35.76,Default,,0,0,0,,I'm going to tap the next three
Dialogue: 0,0:11:35.76,0:11:36.15,Default,,0,0,0,,stacks.
Dialogue: 0,0:11:36.54,0:11:37.67,Default,,0,0,0,,Now, watch what happens when I
Dialogue: 0,0:11:37.67,0:11:38.94,Default,,0,0,0,,try to add more items.
Dialogue: 0,0:11:40.06,0:11:41.49,Default,,0,0,0,,Our bug seems to be fixed.
Dialogue: 0,0:11:41.49,0:11:42.83,Default,,0,0,0,,We can no longer add redundant
Dialogue: 0,0:11:42.83,0:11:44.29,Default,,0,0,0,,items to our drag session.
Dialogue: 0,0:11:44.90,0:11:46.06,Default,,0,0,0,,So, these were just some basics
Dialogue: 0,0:11:46.06,0:11:47.40,Default,,0,0,0,,for manipulating the drag items
Dialogue: 0,0:11:47.40,0:11:48.26,Default,,0,0,0,,that we supplied through our
Dialogue: 0,0:11:48.26,0:11:48.83,Default,,0,0,0,,delegates.
Dialogue: 0,0:11:49.33,0:11:50.43,Default,,0,0,0,,I'd like to now hand it back to
Dialogue: 0,0:11:50.43,0:11:52.65,Default,,0,0,0,,Robb to discuss some of the more
Dialogue: 0,0:11:52.65,0:11:54.18,Default,,0,0,0,,advanced techniques for
Dialogue: 0,0:11:54.18,0:11:55.92,Default,,0,0,0,,customizing animations and drag
Dialogue: 0,0:11:55.92,0:11:56.43,Default,,0,0,0,,previews.
Dialogue: 0,0:11:57.52,0:12:04.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:12:05.05,0:12:07.08,Default,,0,0,0,,>> So, let's add some polish to
Dialogue: 0,0:12:07.08,0:12:07.72,Default,,0,0,0,,our previews.
Dialogue: 0,0:12:09.03,0:12:10.91,Default,,0,0,0,,One thing that's often the case
Dialogue: 0,0:12:11.00,0:12:12.68,Default,,0,0,0,,is that the view that you want
Dialogue: 0,0:12:12.68,0:12:14.96,Default,,0,0,0,,to lift is not quite ready for
Dialogue: 0,0:12:14.96,0:12:16.36,Default,,0,0,0,,prime time, so maybe there's
Dialogue: 0,0:12:16.36,0:12:17.66,Default,,0,0,0,,some highlighting state, or you
Dialogue: 0,0:12:17.66,0:12:18.96,Default,,0,0,0,,have some overlay that you want
Dialogue: 0,0:12:18.96,0:12:19.46,Default,,0,0,0,,to fade out.
Dialogue: 0,0:12:19.87,0:12:21.31,Default,,0,0,0,,And, the lift is actually a
Dialogue: 0,0:12:21.31,0:12:22.96,Default,,0,0,0,,great point to do that, because
Dialogue: 0,0:12:23.29,0:12:24.95,Default,,0,0,0,,during the lift, the view is
Dialogue: 0,0:12:24.95,0:12:26.41,Default,,0,0,0,,still live, so any changes you
Dialogue: 0,0:12:26.41,0:12:28.09,Default,,0,0,0,,make inside of that view will be
Dialogue: 0,0:12:28.09,0:12:29.61,Default,,0,0,0,,reflected during the animation,
Dialogue: 0,0:12:29.61,0:12:31.46,Default,,0,0,0,,and it's only that, at the point
Dialogue: 0,0:12:31.46,0:12:33.70,Default,,0,0,0,,where the user starts moving
Dialogue: 0,0:12:33.70,0:12:35.22,Default,,0,0,0,,their finger that we perform a
Dialogue: 0,0:12:35.22,0:12:37.23,Default,,0,0,0,,snapshot, and that state is what
Dialogue: 0,0:12:37.23,0:12:38.47,Default,,0,0,0,,the user will see for the rest
Dialogue: 0,0:12:38.47,0:12:39.30,Default,,0,0,0,,of the drag interaction.
Dialogue: 0,0:12:40.41,0:12:42.81,Default,,0,0,0,,The way you could animate
Dialogue: 0,0:12:42.81,0:12:45.64,Default,,0,0,0,,alongside the lift is like so.
Dialogue: 0,0:12:46.26,0:12:47.29,Default,,0,0,0,,There is an option delegate
Dialogue: 0,0:12:47.29,0:12:48.41,Default,,0,0,0,,method, dragInteraction
Dialogue: 0,0:12:48.41,0:12:49.80,Default,,0,0,0,,willAnimateLiftWith animator
Dialogue: 0,0:12:49.80,0:12:52.53,Default,,0,0,0,,session, in which you get handed
Dialogue: 0,0:12:52.53,0:12:54.70,Default,,0,0,0,,an animator object, and here I'm
Dialogue: 0,0:12:55.04,0:12:57.21,Default,,0,0,0,,going to just grab all the
Dialogue: 0,0:12:57.21,0:12:58.76,Default,,0,0,0,,messages that I have on the
Dialogue: 0,0:12:58.76,0:13:00.02,Default,,0,0,0,,items in the session, and find
Dialogue: 0,0:13:00.02,0:13:01.36,Default,,0,0,0,,their associated messageViews.
Dialogue: 0,0:13:01.39,0:13:02.83,Default,,0,0,0,,So now, I have an array of
Dialogue: 0,0:13:02.83,0:13:04.30,Default,,0,0,0,,messageViews, and for each of
Dialogue: 0,0:13:04.30,0:13:06.43,Default,,0,0,0,,them, I will just add an
Dialogue: 0,0:13:06.43,0:13:08.41,Default,,0,0,0,,animation to the animator in
Dialogue: 0,0:13:08.41,0:13:09.91,Default,,0,0,0,,which I fade out an overlay by
Dialogue: 0,0:13:09.91,0:13:11.06,Default,,0,0,0,,setting its alpha to zero.
Dialogue: 0,0:13:11.62,0:13:13.27,Default,,0,0,0,,And then, in the completion
Dialogue: 0,0:13:13.27,0:13:14.87,Default,,0,0,0,,block, I will set the alpha back
Dialogue: 0,0:13:14.87,0:13:16.18,Default,,0,0,0,,to one, and what that will do is
Dialogue: 0,0:13:16.22,0:13:18.58,Default,,0,0,0,,that as the view lifts up, the
Dialogue: 0,0:13:18.58,0:13:19.65,Default,,0,0,0,,overlay will fade out.
Dialogue: 0,0:13:19.65,0:13:21.46,Default,,0,0,0,,If the user lets go and the view
Dialogue: 0,0:13:21.46,0:13:22.46,Default,,0,0,0,,settles back into place, the
Dialogue: 0,0:13:22.46,0:13:23.81,Default,,0,0,0,,overlay will fade in, because
Dialogue: 0,0:13:23.81,0:13:24.98,Default,,0,0,0,,the animator is able to
Dialogue: 0,0:13:24.98,0:13:26.21,Default,,0,0,0,,automatically revert this
Dialogue: 0,0:13:26.21,0:13:26.68,Default,,0,0,0,,animation.
Dialogue: 0,0:13:27.03,0:13:28.72,Default,,0,0,0,,Then, when the drag starts, we
Dialogue: 0,0:13:28.72,0:13:30.27,Default,,0,0,0,,will snapshot the view, and
Dialogue: 0,0:13:30.27,0:13:31.54,Default,,0,0,0,,after that, the completion block
Dialogue: 0,0:13:31.54,0:13:33.09,Default,,0,0,0,,will get called, and the overlay
Dialogue: 0,0:13:33.53,0:13:34.90,Default,,0,0,0,,will be reinstalled.
Dialogue: 0,0:13:34.90,0:13:37.44,Default,,0,0,0,,So, that means in the snapshot,
Dialogue: 0,0:13:37.44,0:13:38.64,Default,,0,0,0,,there won't be an overlay, but
Dialogue: 0,0:13:38.64,0:13:39.62,Default,,0,0,0,,in the view that remains inside
Dialogue: 0,0:13:39.62,0:13:40.74,Default,,0,0,0,,the application, there will be.
Dialogue: 0,0:13:41.55,0:13:42.71,Default,,0,0,0,,But, what if the view that
Dialogue: 0,0:13:42.81,0:13:45.36,Default,,0,0,0,,you're lifting, the view that
Dialogue: 0,0:13:45.36,0:13:46.42,Default,,0,0,0,,you're lifting is not the view
Dialogue: 0,0:13:46.42,0:13:47.08,Default,,0,0,0,,that the interaction is
Dialogue: 0,0:13:47.08,0:13:48.31,Default,,0,0,0,,installed on, or what if the
Dialogue: 0,0:13:48.31,0:13:51.27,Default,,0,0,0,,view isn't square, or what else
Dialogue: 0,0:13:51.27,0:13:51.68,Default,,0,0,0,,can we do?
Dialogue: 0,0:13:51.98,0:13:53.06,Default,,0,0,0,,So, we already saw that
Dialogue: 0,0:13:53.06,0:13:54.54,Default,,0,0,0,,UIDragPreview can be initialized
Dialogue: 0,0:13:54.54,0:13:55.76,Default,,0,0,0,,with the view, but there are two
Dialogue: 0,0:13:55.82,0:13:57.47,Default,,0,0,0,,other parameters, and I'll go
Dialogue: 0,0:13:57.47,0:13:58.57,Default,,0,0,0,,over each of them individually.
Dialogue: 0,0:13:58.99,0:14:00.91,Default,,0,0,0,,The first is a parameters object
Dialogue: 0,0:14:00.91,0:14:02.43,Default,,0,0,0,,that allows you to customize the
Dialogue: 0,0:14:02.76,0:14:04.09,Default,,0,0,0,,appearance, and the second one
Dialogue: 0,0:14:04.09,0:14:05.08,Default,,0,0,0,,is a target that's used for
Dialogue: 0,0:14:05.08,0:14:05.54,Default,,0,0,0,,positioning.
Dialogue: 0,0:14:06.50,0:14:07.76,Default,,0,0,0,,So first, the parameters.
Dialogue: 0,0:14:08.04,0:14:09.12,Default,,0,0,0,,That is an instance of
Dialogue: 0,0:14:09.12,0:14:10.79,Default,,0,0,0,,UIDragPreviewParameters, and it
Dialogue: 0,0:14:10.79,0:14:11.68,Default,,0,0,0,,has two properties.
Dialogue: 0,0:14:12.00,0:14:13.14,Default,,0,0,0,,The first is a color, and that's
Dialogue: 0,0:14:13.14,0:14:14.29,Default,,0,0,0,,going to be the background color
Dialogue: 0,0:14:14.29,0:14:15.68,Default,,0,0,0,,of the view that we will install
Dialogue: 0,0:14:15.68,0:14:17.35,Default,,0,0,0,,behind your view, because a lot
Dialogue: 0,0:14:17.35,0:14:18.37,Default,,0,0,0,,of views aren't actually fully
Dialogue: 0,0:14:18.37,0:14:20.49,Default,,0,0,0,,opaque, and it would look not so
Dialogue: 0,0:14:20.49,0:14:21.89,Default,,0,0,0,,good if we just lifted them as
Dialogue: 0,0:14:21.93,0:14:22.26,Default,,0,0,0,,they are.
Dialogue: 0,0:14:22.68,0:14:24.37,Default,,0,0,0,,However, you get to customize
Dialogue: 0,0:14:24.37,0:14:25.78,Default,,0,0,0,,this color in any way you want.
Dialogue: 0,0:14:25.78,0:14:27.54,Default,,0,0,0,,You can make it black, or clear.
Dialogue: 0,0:14:27.54,0:14:30.38,Default,,0,0,0,,You can really go to town, here.
Dialogue: 0,0:14:30.38,0:14:31.52,Default,,0,0,0,,The second property is a little
Dialogue: 0,0:14:31.52,0:14:32.24,Default,,0,0,0,,more complicated.
Dialogue: 0,0:14:32.24,0:14:35.34,Default,,0,0,0,,It's a UIBezierPath that lets us
Dialogue: 0,0:14:35.34,0:14:37.35,Default,,0,0,0,,know what the visible region of
Dialogue: 0,0:14:37.82,0:14:39.40,Default,,0,0,0,,your view should be, so if your
Dialogue: 0,0:14:39.40,0:14:41.43,Default,,0,0,0,,view is not square, you could
Dialogue: 0,0:14:41.43,0:14:42.55,Default,,0,0,0,,set a rounded rectangle here.
Dialogue: 0,0:14:42.91,0:14:44.58,Default,,0,0,0,,But, there are some things to be
Dialogue: 0,0:14:44.58,0:14:44.93,Default,,0,0,0,,aware of.
Dialogue: 0,0:14:45.38,0:14:46.60,Default,,0,0,0,,So, by default, if you don't
Dialogue: 0,0:14:46.60,0:14:48.24,Default,,0,0,0,,supply drag preview parameters,
Dialogue: 0,0:14:48.24,0:14:50.68,Default,,0,0,0,,so you don't set a path on the
Dialogue: 0,0:14:50.75,0:14:52.03,Default,,0,0,0,,drag preview parameters you
Dialogue: 0,0:14:52.03,0:14:53.70,Default,,0,0,0,,supply, we will lift the entire
Dialogue: 0,0:14:53.70,0:14:53.93,Default,,0,0,0,,view.
Dialogue: 0,0:14:54.25,0:14:56.21,Default,,0,0,0,,If you wanted to crop out the
Dialogue: 0,0:14:56.21,0:14:57.79,Default,,0,0,0,,subrect phon, so in this case,
Dialogue: 0,0:14:57.79,0:14:58.86,Default,,0,0,0,,the rounded rectangle with the
Dialogue: 0,0:14:58.86,0:15:00.24,Default,,0,0,0,,kid in it, you could supply a
Dialogue: 0,0:15:00.24,0:15:02.18,Default,,0,0,0,,Bezier path, and it would result
Dialogue: 0,0:15:02.23,0:15:03.14,Default,,0,0,0,,in something like this.
Dialogue: 0,0:15:03.18,0:15:04.98,Default,,0,0,0,,So, it's important, however,
Dialogue: 0,0:15:05.14,0:15:07.48,Default,,0,0,0,,that the Bezier path that you
Dialogue: 0,0:15:07.48,0:15:09.49,Default,,0,0,0,,supply has to make sense within
Dialogue: 0,0:15:09.49,0:15:10.53,Default,,0,0,0,,the coordinate space of the
Dialogue: 0,0:15:10.53,0:15:10.81,Default,,0,0,0,,view.
Dialogue: 0,0:15:10.81,0:15:12.01,Default,,0,0,0,,So, in this case, the bounds
Dialogue: 0,0:15:12.01,0:15:13.18,Default,,0,0,0,,that I initialized this rounded
Dialogue: 0,0:15:13.18,0:15:14.90,Default,,0,0,0,,rectangle with have an origin
Dialogue: 0,0:15:14.90,0:15:16.59,Default,,0,0,0,,that is relative to the origin
Dialogue: 0,0:15:16.86,0:15:18.44,Default,,0,0,0,,of the container, as indicated
Dialogue: 0,0:15:18.44,0:15:20.53,Default,,0,0,0,,in gray, sorry, as, the origin
Dialogue: 0,0:15:20.53,0:15:21.96,Default,,0,0,0,,of the view, as indicated in
Dialogue: 0,0:15:21.96,0:15:23.26,Default,,0,0,0,,gray, so that's the top left
Dialogue: 0,0:15:23.26,0:15:23.59,Default,,0,0,0,,corner.
Dialogue: 0,0:15:24.54,0:15:25.83,Default,,0,0,0,,And, you want to also make note
Dialogue: 0,0:15:25.83,0:15:27.13,Default,,0,0,0,,of the midpoint, because it's
Dialogue: 0,0:15:27.13,0:15:28.31,Default,,0,0,0,,the midpoint of the visible path
Dialogue: 0,0:15:28.31,0:15:29.65,Default,,0,0,0,,that we'll later use for
Dialogue: 0,0:15:29.65,0:15:30.84,Default,,0,0,0,,positioning, when we talk about
Dialogue: 0,0:15:30.84,0:15:31.22,Default,,0,0,0,,target.
Dialogue: 0,0:15:31.98,0:15:33.57,Default,,0,0,0,,So, this is how you would get
Dialogue: 0,0:15:33.61,0:15:35.21,Default,,0,0,0,,this kind of preview.
Dialogue: 0,0:15:35.65,0:15:36.82,Default,,0,0,0,,However, you're not limited to
Dialogue: 0,0:15:36.82,0:15:38.56,Default,,0,0,0,,giving us a path that is smaller
Dialogue: 0,0:15:38.82,0:15:39.43,Default,,0,0,0,,than the view.
Dialogue: 0,0:15:39.49,0:15:41.38,Default,,0,0,0,,You can also give us one that's
Dialogue: 0,0:15:41.38,0:15:41.66,Default,,0,0,0,,bigger.
Dialogue: 0,0:15:41.66,0:15:43.02,Default,,0,0,0,,So, in this case, I chose an
Dialogue: 0,0:15:43.02,0:15:45.20,Default,,0,0,0,,origin that is negative, and it
Dialogue: 0,0:15:45.20,0:15:46.05,Default,,0,0,0,,works in the [inaudible] of the
Dialogue: 0,0:15:46.05,0:15:47.54,Default,,0,0,0,,view, and that would result in
Dialogue: 0,0:15:47.54,0:15:49.09,Default,,0,0,0,,this kind of platter that frames
Dialogue: 0,0:15:49.09,0:15:49.54,Default,,0,0,0,,the picture.
Dialogue: 0,0:15:49.54,0:15:50.53,Default,,0,0,0,,And, the color you see here is
Dialogue: 0,0:15:50.53,0:15:51.91,Default,,0,0,0,,in fact a background color that
Dialogue: 0,0:15:51.91,0:15:52.64,Default,,0,0,0,,defaulted to white.
Dialogue: 0,0:15:53.23,0:15:54.55,Default,,0,0,0,,Now, if you're bold enough to
Dialogue: 0,0:15:54.55,0:15:55.42,Default,,0,0,0,,implement your own text
Dialogue: 0,0:15:55.42,0:15:56.94,Default,,0,0,0,,rendering, there's a dedicated,
Dialogue: 0,0:15:56.94,0:15:59.24,Default,,0,0,0,,thank you, style that you can
Dialogue: 0,0:15:59.24,0:16:01.86,Default,,0,0,0,,use to match the way that we
Dialogue: 0,0:16:01.86,0:16:03.63,Default,,0,0,0,,lift text, so you want to refer
Dialogue: 0,0:16:03.63,0:16:05.82,Default,,0,0,0,,to the documentation for that.
Dialogue: 0,0:16:06.30,0:16:08.34,Default,,0,0,0,,And, the target, so the target
Dialogue: 0,0:16:08.34,0:16:10.70,Default,,0,0,0,,is used to position a transitory
Dialogue: 0,0:16:10.70,0:16:12.27,Default,,0,0,0,,view that we will use to perform
Dialogue: 0,0:16:12.27,0:16:13.38,Default,,0,0,0,,the animation with inside your
Dialogue: 0,0:16:13.38,0:16:13.93,Default,,0,0,0,,view hierarchy.
Dialogue: 0,0:16:14.29,0:16:16.14,Default,,0,0,0,,If you don't supply your target,
Dialogue: 0,0:16:16.14,0:16:17.39,Default,,0,0,0,,we will infer one based on the
Dialogue: 0,0:16:17.39,0:16:18.40,Default,,0,0,0,,superview of the view that you
Dialogue: 0,0:16:18.40,0:16:18.87,Default,,0,0,0,,provided.
Dialogue: 0,0:16:18.87,0:16:20.91,Default,,0,0,0,,That means if you provide a view
Dialogue: 0,0:16:20.91,0:16:23.00,Default,,0,0,0,,as your view in the direct, in
Dialogue: 0,0:16:23.00,0:16:25.03,Default,,0,0,0,,the targeted direct preview, if
Dialogue: 0,0:16:25.71,0:16:27.45,Default,,0,0,0,,that view is not in the view
Dialogue: 0,0:16:27.45,0:16:28.72,Default,,0,0,0,,hierarchy, you will have to
Dialogue: 0,0:16:28.72,0:16:29.44,Default,,0,0,0,,supply your target.
Dialogue: 0,0:16:29.44,0:16:31.40,Default,,0,0,0,,Otherwise, we can infer one.
Dialogue: 0,0:16:31.68,0:16:33.75,Default,,0,0,0,,This UIDragPreviewTarget has
Dialogue: 0,0:16:33.83,0:16:34.43,Default,,0,0,0,,three parameters.
Dialogue: 0,0:16:34.43,0:16:35.34,Default,,0,0,0,,The first is the container.
Dialogue: 0,0:16:35.44,0:16:36.11,Default,,0,0,0,,This is where we're going to
Dialogue: 0,0:16:36.11,0:16:37.58,Default,,0,0,0,,install the view, so you want to
Dialogue: 0,0:16:37.58,0:16:39.37,Default,,0,0,0,,be aware of any add or remove
Dialogue: 0,0:16:39.37,0:16:40.81,Default,,0,0,0,,subview calls in that container.
Dialogue: 0,0:16:42.07,0:16:42.76,Default,,0,0,0,,And, the second one is a
Dialogue: 0,0:16:42.76,0:16:44.12,Default,,0,0,0,,position, and the third is a
Dialogue: 0,0:16:44.12,0:16:44.60,Default,,0,0,0,,transform.
Dialogue: 0,0:16:44.60,0:16:45.69,Default,,0,0,0,,The transform is only relevant
Dialogue: 0,0:16:45.69,0:16:46.92,Default,,0,0,0,,on drop, and it allows you to
Dialogue: 0,0:16:47.14,0:16:49.33,Default,,0,0,0,,rotate or scale on set down.
Dialogue: 0,0:16:49.67,0:16:50.47,Default,,0,0,0,,The position, however, is a
Dialogue: 0,0:16:50.47,0:16:51.38,Default,,0,0,0,,little more tricky.
Dialogue: 0,0:16:52.07,0:16:54.71,Default,,0,0,0,,So, as I mentioned, if you give
Dialogue: 0,0:16:54.71,0:16:56.08,Default,,0,0,0,,us a point in your container, as
Dialogue: 0,0:16:56.08,0:16:57.48,Default,,0,0,0,,indicated in gray, by default we
Dialogue: 0,0:16:57.48,0:16:59.22,Default,,0,0,0,,will center the midpoint of your
Dialogue: 0,0:16:59.22,0:17:01.35,Default,,0,0,0,,view around this position, so if
Dialogue: 0,0:17:01.35,0:17:03.13,Default,,0,0,0,,you don't supply a visible path,
Dialogue: 0,0:17:03.44,0:17:04.28,Default,,0,0,0,,it would look like so.
Dialogue: 0,0:17:04.78,0:17:05.81,Default,,0,0,0,,However, if you do supply a
Dialogue: 0,0:17:05.81,0:17:07.70,Default,,0,0,0,,visible path, then as I said,
Dialogue: 0,0:17:08.22,0:17:10.84,Default,,0,0,0,,the midpoint of the bounds of
Dialogue: 0,0:17:10.84,0:17:12.15,Default,,0,0,0,,this path will be centered
Dialogue: 0,0:17:12.15,0:17:12.84,Default,,0,0,0,,around this point.
Dialogue: 0,0:17:12.84,0:17:14.24,Default,,0,0,0,,So, it's no longer the midpoint
Dialogue: 0,0:17:14.24,0:17:14.77,Default,,0,0,0,,of the view.
Dialogue: 0,0:17:14.77,0:17:16.21,Default,,0,0,0,,It's the midpoint of the visible
Dialogue: 0,0:17:16.21,0:17:16.54,Default,,0,0,0,,path.
Dialogue: 0,0:17:16.57,0:17:17.99,Default,,0,0,0,,And, it also means that if your
Dialogue: 0,0:17:17.99,0:17:18.89,Default,,0,0,0,,path is a little bit more
Dialogue: 0,0:17:18.89,0:17:21.21,Default,,0,0,0,,complicated, such as this one,
Dialogue: 0,0:17:21.28,0:17:22.84,Default,,0,0,0,,where I just unioned two rounded
Dialogue: 0,0:17:22.84,0:17:24.21,Default,,0,0,0,,rectangles together, the
Dialogue: 0,0:17:24.21,0:17:26.42,Default,,0,0,0,,midpoint is now not even in any
Dialogue: 0,0:17:26.42,0:17:27.56,Default,,0,0,0,,of the two rectangles.
Dialogue: 0,0:17:27.56,0:17:28.75,Default,,0,0,0,,It's still the midpoint of the
Dialogue: 0,0:17:28.75,0:17:30.00,Default,,0,0,0,,enclosing bounds of both of
Dialogue: 0,0:17:30.00,0:17:30.49,Default,,0,0,0,,these shapes.
Dialogue: 0,0:17:31.85,0:17:33.51,Default,,0,0,0,,But, if you already had a chance
Dialogue: 0,0:17:33.51,0:17:34.99,Default,,0,0,0,,to look at iOS 11, you have
Dialogue: 0,0:17:34.99,0:17:36.47,Default,,0,0,0,,noticed that a lot of the apps
Dialogue: 0,0:17:36.47,0:17:38.03,Default,,0,0,0,,in the system are actually able
Dialogue: 0,0:17:38.03,0:17:39.93,Default,,0,0,0,,to update the preview after the
Dialogue: 0,0:17:39.93,0:17:41.43,Default,,0,0,0,,lift, so here you can see Maps,
Dialogue: 0,0:17:41.43,0:17:43.68,Default,,0,0,0,,and as I move this little Apple
Dialogue: 0,0:17:44.30,0:17:46.54,Default,,0,0,0,,Park cell around, it gets
Dialogue: 0,0:17:46.54,0:17:47.79,Default,,0,0,0,,replaced by this little map
Dialogue: 0,0:17:47.79,0:17:49.39,Default,,0,0,0,,snippet after the fact.
Dialogue: 0,0:17:49.39,0:17:50.85,Default,,0,0,0,,So, how can we do that?
Dialogue: 0,0:17:50.85,0:17:51.91,Default,,0,0,0,,Well, it turns out, there's a
Dialogue: 0,0:17:51.91,0:17:53.50,Default,,0,0,0,,second preview class in the
Dialogue: 0,0:17:53.50,0:17:54.72,Default,,0,0,0,,systems, next to
Dialogue: 0,0:17:54.72,0:17:55.87,Default,,0,0,0,,UITargetedDragPreview, and that
Dialogue: 0,0:17:55.87,0:17:58.51,Default,,0,0,0,,is UIDragPreview which, as you
Dialogue: 0,0:17:58.51,0:17:59.27,Default,,0,0,0,,might have guessed, is very
Dialogue: 0,0:17:59.27,0:17:59.77,Default,,0,0,0,,similar to
Dialogue: 0,0:17:59.77,0:18:01.77,Default,,0,0,0,,UITargetedDragPreview, but it
Dialogue: 0,0:18:01.77,0:18:03.41,Default,,0,0,0,,doesn't have a target.
Dialogue: 0,0:18:03.59,0:18:04.64,Default,,0,0,0,,All the other semantics still
Dialogue: 0,0:18:04.64,0:18:06.37,Default,,0,0,0,,apply, and the view that you
Dialogue: 0,0:18:06.81,0:18:08.84,Default,,0,0,0,,initialize this preview with may
Dialogue: 0,0:18:08.84,0:18:09.61,Default,,0,0,0,,or may not be in the view
Dialogue: 0,0:18:09.61,0:18:09.98,Default,,0,0,0,,hierarchy.
Dialogue: 0,0:18:09.98,0:18:11.01,Default,,0,0,0,,It's not relevant anymore, at
Dialogue: 0,0:18:11.01,0:18:11.41,Default,,0,0,0,,this point.
Dialogue: 0,0:18:12.70,0:18:14.15,Default,,0,0,0,,But, how will you update this
Dialogue: 0,0:18:14.18,0:18:14.57,Default,,0,0,0,,preview?
Dialogue: 0,0:18:15.12,0:18:17.40,Default,,0,0,0,,First, you want to find a spot
Dialogue: 0,0:18:17.40,0:18:19.37,Default,,0,0,0,,in your session lifecycle where
Dialogue: 0,0:18:19.37,0:18:19.91,Default,,0,0,0,,it's appropriate.
Dialogue: 0,0:18:19.91,0:18:21.53,Default,,0,0,0,,So, in this case, I chose
Dialogue: 0,0:18:21.53,0:18:22.99,Default,,0,0,0,,sessionDidMove, and what I want
Dialogue: 0,0:18:22.99,0:18:24.76,Default,,0,0,0,,to do here is that as the user
Dialogue: 0,0:18:25.09,0:18:26.95,Default,,0,0,0,,moves out of the listView in my
Dialogue: 0,0:18:26.95,0:18:28.72,Default,,0,0,0,,hypothetical Mail app, I want to
Dialogue: 0,0:18:28.72,0:18:29.89,Default,,0,0,0,,replace what they're dragging
Dialogue: 0,0:18:29.89,0:18:31.06,Default,,0,0,0,,with a little envelope graphic.
Dialogue: 0,0:18:31.58,0:18:32.80,Default,,0,0,0,,So first, I perform a hit check
Dialogue: 0,0:18:32.80,0:18:34.46,Default,,0,0,0,,to see if I'm still inside the
Dialogue: 0,0:18:34.46,0:18:35.57,Default,,0,0,0,,listView, and if I am, I just
Dialogue: 0,0:18:35.57,0:18:36.92,Default,,0,0,0,,abort by returning nothing.
Dialogue: 0,0:18:38.13,0:18:39.65,Default,,0,0,0,,And then, I iterate over all the
Dialogue: 0,0:18:39.90,0:18:41.72,Default,,0,0,0,,items that have a message as
Dialogue: 0,0:18:41.72,0:18:43.05,Default,,0,0,0,,their localObject.
Dialogue: 0,0:18:44.12,0:18:45.54,Default,,0,0,0,,I check if I have already
Dialogue: 0,0:18:45.54,0:18:46.78,Default,,0,0,0,,updated this item, because this
Dialogue: 0,0:18:46.78,0:18:47.95,Default,,0,0,0,,operation is not free, and
Dialogue: 0,0:18:47.95,0:18:49.74,Default,,0,0,0,,sessionDidMove may get called
Dialogue: 0,0:18:49.74,0:18:51.34,Default,,0,0,0,,quite frequently, but if I
Dialogue: 0,0:18:51.34,0:18:53.59,Default,,0,0,0,,haven't, then I will set the
Dialogue: 0,0:18:53.59,0:18:54.99,Default,,0,0,0,,previewProvider, and this is a
Dialogue: 0,0:18:54.99,0:18:56.40,Default,,0,0,0,,block that we will later call to
Dialogue: 0,0:18:56.40,0:18:58.21,Default,,0,0,0,,update the preview, and inside
Dialogue: 0,0:18:58.21,0:18:59.17,Default,,0,0,0,,the block, I first create an
Dialogue: 0,0:18:59.17,0:19:00.32,Default,,0,0,0,,imageView with the image I would
Dialogue: 0,0:19:00.32,0:19:02.54,Default,,0,0,0,,like, and then I initialize a
Dialogue: 0,0:19:02.54,0:19:03.98,Default,,0,0,0,,new drag preview with this, and
Dialogue: 0,0:19:03.98,0:19:05.17,Default,,0,0,0,,it's important to realize that
Dialogue: 0,0:19:05.25,0:19:06.89,Default,,0,0,0,,we may not actually call in this
Dialogue: 0,0:19:06.96,0:19:07.26,Default,,0,0,0,,block.
Dialogue: 0,0:19:07.74,0:19:09.77,Default,,0,0,0,,So, if you are lifting many
Dialogue: 0,0:19:09.77,0:19:11.48,Default,,0,0,0,,messages, we may not, we may
Dialogue: 0,0:19:11.48,0:19:12.62,Default,,0,0,0,,decide not to display all of
Dialogue: 0,0:19:12.62,0:19:13.83,Default,,0,0,0,,them, and we wouldn't bother
Dialogue: 0,0:19:13.83,0:19:15.04,Default,,0,0,0,,calling in a preview block for
Dialogue: 0,0:19:15.04,0:19:15.99,Default,,0,0,0,,the views that we don't actually
Dialogue: 0,0:19:15.99,0:19:16.58,Default,,0,0,0,,show on the screen.
Dialogue: 0,0:19:16.58,0:19:18.44,Default,,0,0,0,,And, last but not least, I have
Dialogue: 0,0:19:18.44,0:19:19.30,Default,,0,0,0,,to do some bookkeeping.
Dialogue: 0,0:19:19.68,0:19:21.85,Default,,0,0,0,,So, theory is still second to
Dialogue: 0,0:19:21.85,0:19:23.04,Default,,0,0,0,,practice, and Wenson's going to
Dialogue: 0,0:19:23.04,0:19:24.14,Default,,0,0,0,,give you another demo, and I'll
Dialogue: 0,0:19:24.14,0:19:24.73,Default,,0,0,0,,see you in the last.
Dialogue: 0,0:19:24.73,0:19:25.08,Default,,0,0,0,,Thank you.
Dialogue: 0,0:19:26.52,0:19:30.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:19:31.05,0:19:31.26,Default,,0,0,0,,>> Alright.
Dialogue: 0,0:19:31.57,0:19:32.32,Default,,0,0,0,,Thanks again, Robb.
Dialogue: 0,0:19:32.81,0:19:34.18,Default,,0,0,0,,So now, I'd like to introduce
Dialogue: 0,0:19:34.29,0:19:36.22,Default,,0,0,0,,the second example we are going
Dialogue: 0,0:19:36.22,0:19:37.65,Default,,0,0,0,,to be looking at in Drag Source.
Dialogue: 0,0:19:38.56,0:19:39.27,Default,,0,0,0,,So, check this out.
Dialogue: 0,0:19:40.32,0:19:41.81,Default,,0,0,0,,When I drag on this image of two
Dialogue: 0,0:19:41.81,0:19:44.30,Default,,0,0,0,,QR codes, we have a drag session
Dialogue: 0,0:19:44.30,0:19:45.69,Default,,0,0,0,,that contains two items.
Dialogue: 0,0:19:45.92,0:19:47.00,Default,,0,0,0,,What are these two items?
Dialogue: 0,0:19:47.00,0:19:48.45,Default,,0,0,0,,Well, if I drop it in Photos,
Dialogue: 0,0:19:48.45,0:19:49.49,Default,,0,0,0,,we'll see that it's actually the
Dialogue: 0,0:19:49.49,0:19:50.94,Default,,0,0,0,,cropped images of the QR codes.
Dialogue: 0,0:19:51.20,0:19:51.95,Default,,0,0,0,,So, I've gone ahead and
Dialogue: 0,0:19:51.95,0:19:53.20,Default,,0,0,0,,detected, where are the QR codes
Dialogue: 0,0:19:53.20,0:19:54.75,Default,,0,0,0,,are already in this image?
Dialogue: 0,0:19:55.36,0:19:56.55,Default,,0,0,0,,Now, the thing we can polish
Dialogue: 0,0:19:56.55,0:19:58.58,Default,,0,0,0,,here is the drag preview.
Dialogue: 0,0:19:58.80,0:19:59.50,Default,,0,0,0,,So, we haven't done any
Dialogue: 0,0:19:59.50,0:19:59.98,Default,,0,0,0,,customization yet.
Dialogue: 0,0:20:00.22,0:20:01.87,Default,,0,0,0,,And so, by default, we use the
Dialogue: 0,0:20:01.87,0:20:03.45,Default,,0,0,0,,entire image view to represent
Dialogue: 0,0:20:03.86,0:20:06.18,Default,,0,0,0,,either of the items, either of
Dialogue: 0,0:20:06.40,0:20:07.41,Default,,0,0,0,,the QR codes.
Dialogue: 0,0:20:07.71,0:20:09.34,Default,,0,0,0,,That is, we are actually seeing
Dialogue: 0,0:20:09.56,0:20:11.59,Default,,0,0,0,,the entire image view twice, two
Dialogue: 0,0:20:11.59,0:20:12.54,Default,,0,0,0,,of them stacked on top of each
Dialogue: 0,0:20:12.54,0:20:12.75,Default,,0,0,0,,other.
Dialogue: 0,0:20:13.01,0:20:14.46,Default,,0,0,0,,It would be kind of cool if we
Dialogue: 0,0:20:14.46,0:20:16.03,Default,,0,0,0,,could use just the cropped image
Dialogue: 0,0:20:16.03,0:20:17.34,Default,,0,0,0,,of the QR code as the drag
Dialogue: 0,0:20:17.34,0:20:19.11,Default,,0,0,0,,preview as we are lifting, and
Dialogue: 0,0:20:19.11,0:20:19.96,Default,,0,0,0,,when we are dragging them
Dialogue: 0,0:20:19.96,0:20:20.32,Default,,0,0,0,,around.
Dialogue: 0,0:20:21.08,0:20:22.73,Default,,0,0,0,,So, let's take a look at what we
Dialogue: 0,0:20:22.73,0:20:23.96,Default,,0,0,0,,need to do this.
Dialogue: 0,0:20:25.14,0:20:26.34,Default,,0,0,0,,First thing we're going to do is
Dialogue: 0,0:20:26.34,0:20:27.74,Default,,0,0,0,,implement previewForLifting
Dialogue: 0,0:20:27.74,0:20:29.60,Default,,0,0,0,,item, so in here, we're going to
Dialogue: 0,0:20:29.60,0:20:30.76,Default,,0,0,0,,take some information about the
Dialogue: 0,0:20:30.76,0:20:32.90,Default,,0,0,0,,QR code, namely the cropped
Dialogue: 0,0:20:32.90,0:20:34.53,Default,,0,0,0,,image of the QR code, as well as
Dialogue: 0,0:20:34.53,0:20:35.89,Default,,0,0,0,,some geometry describing where
Dialogue: 0,0:20:35.89,0:20:37.15,Default,,0,0,0,,it is in the image, and we're
Dialogue: 0,0:20:37.15,0:20:38.35,Default,,0,0,0,,going to use it to create a new
Dialogue: 0,0:20:38.35,0:20:39.23,Default,,0,0,0,,UIImageView.
Dialogue: 0,0:20:40.32,0:20:41.35,Default,,0,0,0,,Then, we're going to create a
Dialogue: 0,0:20:41.35,0:20:43.32,Default,,0,0,0,,drag preview target and drag
Dialogue: 0,0:20:43.32,0:20:44.30,Default,,0,0,0,,preview parameters.
Dialogue: 0,0:20:44.63,0:20:45.78,Default,,0,0,0,,Note that right here we set the
Dialogue: 0,0:20:45.78,0:20:47.14,Default,,0,0,0,,visiblePath to a new
Dialogue: 0,0:20:47.14,0:20:48.16,Default,,0,0,0,,UIBezierPath that's a
Dialogue: 0,0:20:48.16,0:20:49.55,Default,,0,0,0,,roundedRect, and that will give
Dialogue: 0,0:20:49.55,0:20:51.01,Default,,0,0,0,,us a nice rounded preview.
Dialogue: 0,0:20:51.57,0:20:52.41,Default,,0,0,0,,So, we combine all of this
Dialogue: 0,0:20:52.41,0:20:53.83,Default,,0,0,0,,information into a new targeted
Dialogue: 0,0:20:53.83,0:20:55.96,Default,,0,0,0,,drag preview, and with this
Dialogue: 0,0:20:55.96,0:20:58.62,Default,,0,0,0,,change, we should see a much
Dialogue: 0,0:20:58.62,0:21:01.28,Default,,0,0,0,,more polished drag preview when
Dialogue: 0,0:21:01.28,0:21:01.55,Default,,0,0,0,,we lift.
Dialogue: 0,0:21:02.22,0:21:03.63,Default,,0,0,0,,Now, check out what happens when
Dialogue: 0,0:21:03.63,0:21:04.37,Default,,0,0,0,,I begin to lift.
Dialogue: 0,0:21:04.97,0:21:06.29,Default,,0,0,0,,So, instead of the entire image
Dialogue: 0,0:21:06.29,0:21:07.67,Default,,0,0,0,,view popping up this time, we
Dialogue: 0,0:21:07.67,0:21:10.50,Default,,0,0,0,,see individual rects for the QR
Dialogue: 0,0:21:10.50,0:21:13.13,Default,,0,0,0,,codes get lifted up, and as I
Dialogue: 0,0:21:13.13,0:21:14.67,Default,,0,0,0,,drag, you can see that these are
Dialogue: 0,0:21:14.67,0:21:16.52,Default,,0,0,0,,the two QR codes flying around,
Dialogue: 0,0:21:17.06,0:21:19.69,Default,,0,0,0,,so that looks pretty good, but
Dialogue: 0,0:21:19.69,0:21:20.71,Default,,0,0,0,,there's something that looks
Dialogue: 0,0:21:20.71,0:21:21.92,Default,,0,0,0,,kind of weird, and I'm about to
Dialogue: 0,0:21:21.92,0:21:22.22,Default,,0,0,0,,show you.
Dialogue: 0,0:21:22.22,0:21:23.27,Default,,0,0,0,,Watch what happens to the QR
Dialogue: 0,0:21:23.27,0:21:24.74,Default,,0,0,0,,codes when I let go.
Dialogue: 0,0:21:25.05,0:21:26.18,Default,,0,0,0,,Now, I've let go somewhere that
Dialogue: 0,0:21:26.18,0:21:26.88,Default,,0,0,0,,doesn't actually accept the
Dialogue: 0,0:21:26.88,0:21:28.46,Default,,0,0,0,,drop, and so we'll do a cancel
Dialogue: 0,0:21:28.46,0:21:28.93,Default,,0,0,0,,animation.
Dialogue: 0,0:21:29.25,0:21:30.48,Default,,0,0,0,,The problem is that we haven't
Dialogue: 0,0:21:30.48,0:21:32.48,Default,,0,0,0,,actually told UIKit where the
Dialogue: 0,0:21:32.66,0:21:34.12,Default,,0,0,0,,drag preview should animate to
Dialogue: 0,0:21:34.12,0:21:34.77,Default,,0,0,0,,when we cancel.
Dialogue: 0,0:21:35.32,0:21:36.38,Default,,0,0,0,,So, let's fix that problem.
Dialogue: 0,0:21:36.38,0:21:38.41,Default,,0,0,0,,We're going to do that by
Dialogue: 0,0:21:38.41,0:21:39.05,Default,,0,0,0,,implementing
Dialogue: 0,0:21:39.05,0:21:40.44,Default,,0,0,0,,previewForCancelling item.
Dialogue: 0,0:21:41.16,0:21:42.75,Default,,0,0,0,,This looks and works a lot like
Dialogue: 0,0:21:42.75,0:21:43.69,Default,,0,0,0,,previewForLifting item.
Dialogue: 0,0:21:44.15,0:21:45.70,Default,,0,0,0,,In fact, observe that if we want
Dialogue: 0,0:21:45.70,0:21:46.95,Default,,0,0,0,,the QR codes to go back to their
Dialogue: 0,0:21:46.95,0:21:48.50,Default,,0,0,0,,original locations, what we can
Dialogue: 0,0:21:48.50,0:21:50.10,Default,,0,0,0,,actually do, similar to what we
Dialogue: 0,0:21:50.10,0:21:51.79,Default,,0,0,0,,did in the first example, is
Dialogue: 0,0:21:51.79,0:21:53.45,Default,,0,0,0,,take our code that used to live
Dialogue: 0,0:21:53.45,0:21:55.18,Default,,0,0,0,,in previewForLifting item and
Dialogue: 0,0:21:55.18,0:21:56.92,Default,,0,0,0,,factor it out into a separate
Dialogue: 0,0:21:56.92,0:21:57.25,Default,,0,0,0,,helper.
Dialogue: 0,0:21:57.29,0:21:58.06,Default,,0,0,0,,So, we're going to call it
Dialogue: 0,0:21:58.06,0:21:59.71,Default,,0,0,0,,dragPreview for item, and what
Dialogue: 0,0:21:59.71,0:22:03.51,Default,,0,0,0,,this is going to do is return
Dialogue: 0,0:22:03.51,0:22:05.26,Default,,0,0,0,,the original location of the QR
Dialogue: 0,0:22:05.26,0:22:07.56,Default,,0,0,0,,codes in both the places where
Dialogue: 0,0:22:07.56,0:22:09.74,Default,,0,0,0,,we are lifting and when we are
Dialogue: 0,0:22:09.74,0:22:10.24,Default,,0,0,0,,cancelling.
Dialogue: 0,0:22:11.17,0:22:12.65,Default,,0,0,0,,So, I'm going to call that
Dialogue: 0,0:22:12.65,0:22:14.58,Default,,0,0,0,,helper in these two places
Dialogue: 0,0:22:15.21,0:22:18.18,Default,,0,0,0,,really fast, and rerun the
Dialogue: 0,0:22:18.18,0:22:18.66,Default,,0,0,0,,application.
Dialogue: 0,0:22:20.97,0:22:22.66,Default,,0,0,0,,Alright. Now, let's see what
Dialogue: 0,0:22:22.66,0:22:23.47,Default,,0,0,0,,happens when I cancel.
Dialogue: 0,0:22:24.44,0:22:25.57,Default,,0,0,0,,And, see that they fly back to
Dialogue: 0,0:22:25.57,0:22:26.88,Default,,0,0,0,,their original locations and
Dialogue: 0,0:22:26.88,0:22:27.58,Default,,0,0,0,,then settle down.
Dialogue: 0,0:22:27.58,0:22:29.35,Default,,0,0,0,,So, that looks so much better
Dialogue: 0,0:22:29.35,0:22:30.86,Default,,0,0,0,,than it did before, but there's
Dialogue: 0,0:22:30.86,0:22:31.81,Default,,0,0,0,,one more thing I'd like to show
Dialogue: 0,0:22:31.81,0:22:32.00,Default,,0,0,0,,you.
Dialogue: 0,0:22:32.63,0:22:35.25,Default,,0,0,0,,So, we're going to hop on over
Dialogue: 0,0:22:35.37,0:22:36.54,Default,,0,0,0,,to the right side, where we have
Dialogue: 0,0:22:36.54,0:22:38.97,Default,,0,0,0,,Photos, and you can notice that,
Dialogue: 0,0:22:38.97,0:22:40.71,Default,,0,0,0,,as I drag some images, we'll
Dialogue: 0,0:22:40.71,0:22:41.80,Default,,0,0,0,,fade out the background of the
Dialogue: 0,0:22:41.80,0:22:43.54,Default,,0,0,0,,image views to kind of indicate
Dialogue: 0,0:22:43.60,0:22:44.81,Default,,0,0,0,,that we are currently dragging
Dialogue: 0,0:22:44.81,0:22:45.93,Default,,0,0,0,,an image from that view.
Dialogue: 0,0:22:46.57,0:22:47.83,Default,,0,0,0,,There are a lot of apps around
Dialogue: 0,0:22:47.83,0:22:49.34,Default,,0,0,0,,the system that do this, and we
Dialogue: 0,0:22:49.34,0:22:50.59,Default,,0,0,0,,can certainly get the same
Dialogue: 0,0:22:50.59,0:22:52.17,Default,,0,0,0,,effect in our own demo app.
Dialogue: 0,0:22:53.08,0:22:53.80,Default,,0,0,0,,So, I'll show you how.
Dialogue: 0,0:22:54.47,0:22:56.96,Default,,0,0,0,,What we're going to do is
Dialogue: 0,0:22:56.96,0:22:58.04,Default,,0,0,0,,implement a few alongside
Dialogue: 0,0:22:58.04,0:22:58.72,Default,,0,0,0,,animations.
Dialogue: 0,0:22:59.16,0:23:00.83,Default,,0,0,0,,So, as we animate the lift, we
Dialogue: 0,0:23:00.83,0:23:02.21,Default,,0,0,0,,get this animator object that
Dialogue: 0,0:23:02.21,0:23:03.69,Default,,0,0,0,,we're able to attach alongside
Dialogue: 0,0:23:03.69,0:23:04.47,Default,,0,0,0,,animations on.
Dialogue: 0,0:23:04.47,0:23:05.65,Default,,0,0,0,,So, we're going to add this new
Dialogue: 0,0:23:05.65,0:23:07.40,Default,,0,0,0,,block that sets our alpha to
Dialogue: 0,0:23:07.40,0:23:10.06,Default,,0,0,0,,0.5, our alpha being the alpha
Dialogue: 0,0:23:10.06,0:23:11.47,Default,,0,0,0,,of the overall image view.
Dialogue: 0,0:23:11.77,0:23:12.80,Default,,0,0,0,,So, we're going to fade out the
Dialogue: 0,0:23:12.80,0:23:13.67,Default,,0,0,0,,image view as the lift is
Dialogue: 0,0:23:13.67,0:23:15.41,Default,,0,0,0,,happening, and as the lift is
Dialogue: 0,0:23:15.41,0:23:16.74,Default,,0,0,0,,canceling, I'm sorry, as the
Dialogue: 0,0:23:16.74,0:23:18.40,Default,,0,0,0,,drag preview is canceling, we
Dialogue: 0,0:23:18.40,0:23:19.66,Default,,0,0,0,,are going to revert the alpha to
Dialogue: 0,0:23:19.66,0:23:20.58,Default,,0,0,0,,1, so we're going to fade the
Dialogue: 0,0:23:20.58,0:23:21.44,Default,,0,0,0,,view back in.
Dialogue: 0,0:23:21.95,0:23:23.27,Default,,0,0,0,,Now, it would be kind of a shame
Dialogue: 0,0:23:23.27,0:23:25.49,Default,,0,0,0,,if our alpha were permanently
Dialogue: 0,0:23:25.49,0:23:27.97,Default,,0,0,0,,ghosted at 0.5, so when the drag
Dialogue: 0,0:23:27.97,0:23:29.76,Default,,0,0,0,,session ends, we've got to be
Dialogue: 0,0:23:29.76,0:23:31.33,Default,,0,0,0,,careful and set our alpha back
Dialogue: 0,0:23:31.33,0:23:33.22,Default,,0,0,0,,to 1, to make sure that we're at
Dialogue: 0,0:23:33.22,0:23:34.51,Default,,0,0,0,,full opacity when the drag
Dialogue: 0,0:23:34.55,0:23:35.09,Default,,0,0,0,,finishes.
Dialogue: 0,0:23:37.22,0:23:39.81,Default,,0,0,0,,So, with those changes, I've
Dialogue: 0,0:23:39.81,0:23:42.06,Default,,0,0,0,,rerun the app, and now watch
Dialogue: 0,0:23:42.06,0:23:42.96,Default,,0,0,0,,what happens when I begin the
Dialogue: 0,0:23:42.96,0:23:43.20,Default,,0,0,0,,lift.
Dialogue: 0,0:23:44.05,0:23:45.33,Default,,0,0,0,,You can see, this nicely
Dialogue: 0,0:23:45.33,0:23:46.98,Default,,0,0,0,,indicates exactly where the QR
Dialogue: 0,0:23:46.98,0:23:48.56,Default,,0,0,0,,codes are by fading out the rest
Dialogue: 0,0:23:48.56,0:23:51.14,Default,,0,0,0,,of the image view, and as I
Dialogue: 0,0:23:51.14,0:23:52.79,Default,,0,0,0,,cancel, you notice that the rest
Dialogue: 0,0:23:52.79,0:23:54.15,Default,,0,0,0,,of the image view fades back in
Dialogue: 0,0:23:54.43,0:23:55.07,Default,,0,0,0,,just as nicely.
Dialogue: 0,0:23:56.32,0:23:57.03,Default,,0,0,0,,So, that's all good and
Dialogue: 0,0:23:57.03,0:23:57.50,Default,,0,0,0,,polished.
Dialogue: 0,0:23:57.76,0:23:58.80,Default,,0,0,0,,Let's look at our third example.
Dialogue: 0,0:23:59.33,0:24:00.78,Default,,0,0,0,,This is Draggable Location Image
Dialogue: 0,0:24:00.78,0:24:03.23,Default,,0,0,0,,View, and in here, the trick is
Dialogue: 0,0:24:03.23,0:24:06.41,Default,,0,0,0,,that we're adding not only the
Dialogue: 0,0:24:06.41,0:24:08.51,Default,,0,0,0,,image as a representation to the
Dialogue: 0,0:24:08.51,0:24:09.66,Default,,0,0,0,,item providers when we start a
Dialogue: 0,0:24:09.66,0:24:11.65,Default,,0,0,0,,drag, but we are also adding the
Dialogue: 0,0:24:11.65,0:24:12.30,Default,,0,0,0,,location.
Dialogue: 0,0:24:12.82,0:24:15.11,Default,,0,0,0,,What that means is that I'm able
Dialogue: 0,0:24:15.11,0:24:16.42,Default,,0,0,0,,to drop into an application that
Dialogue: 0,0:24:16.42,0:24:18.21,Default,,0,0,0,,accepts location, such as Maps,
Dialogue: 0,0:24:18.60,0:24:20.15,Default,,0,0,0,,at it will actually navigate me
Dialogue: 0,0:24:20.21,0:24:21.90,Default,,0,0,0,,and drop a pin at the location
Dialogue: 0,0:24:22.09,0:24:23.24,Default,,0,0,0,,where this photo was taken,
Dialogue: 0,0:24:23.50,0:24:24.52,Default,,0,0,0,,which is, of course, the Golden
Dialogue: 0,0:24:24.52,0:24:25.02,Default,,0,0,0,,Gate Bridge.
Dialogue: 0,0:24:25.50,0:24:26.51,Default,,0,0,0,,So, that looks pretty good,
Dialogue: 0,0:24:26.93,0:24:27.74,Default,,0,0,0,,except for one thing.
Dialogue: 0,0:24:28.73,0:24:29.95,Default,,0,0,0,,Now, when I begin a drag, I
Dialogue: 0,0:24:29.95,0:24:31.11,Default,,0,0,0,,haven't done any customization
Dialogue: 0,0:24:31.11,0:24:32.99,Default,,0,0,0,,around the drag preview, and so
Dialogue: 0,0:24:32.99,0:24:34.46,Default,,0,0,0,,this default drag preview, which
Dialogue: 0,0:24:34.46,0:24:35.36,Default,,0,0,0,,is the entire image view,
Dialogue: 0,0:24:35.56,0:24:36.94,Default,,0,0,0,,doesn't do a really good job of
Dialogue: 0,0:24:36.94,0:24:37.92,Default,,0,0,0,,really highlighting the fact
Dialogue: 0,0:24:38.26,0:24:39.96,Default,,0,0,0,,that we have a location, and not
Dialogue: 0,0:24:39.96,0:24:40.69,Default,,0,0,0,,just an image.
Dialogue: 0,0:24:40.83,0:24:41.56,Default,,0,0,0,,It looks just like we're
Dialogue: 0,0:24:41.56,0:24:42.64,Default,,0,0,0,,dragging an image right now.
Dialogue: 0,0:24:43.46,0:24:44.42,Default,,0,0,0,,So, let's fix that.
Dialogue: 0,0:24:44.68,0:24:45.84,Default,,0,0,0,,Now, we're going to go into
Dialogue: 0,0:24:45.84,0:24:47.01,Default,,0,0,0,,Draggable Location Image View.
Dialogue: 0,0:24:47.01,0:24:48.36,Default,,0,0,0,,This is where our logic is going
Dialogue: 0,0:24:48.45,0:24:49.78,Default,,0,0,0,,to live, and we're going to
Dialogue: 0,0:24:49.78,0:24:51.15,Default,,0,0,0,,implement sessionWillBegin.
Dialogue: 0,0:24:51.68,0:24:53.38,Default,,0,0,0,,So, what do we want to do when
Dialogue: 0,0:24:53.38,0:24:54.38,Default,,0,0,0,,the session is about to begin?
Dialogue: 0,0:24:55.34,0:24:56.54,Default,,0,0,0,,We're going to take our drag
Dialogue: 0,0:24:56.54,0:24:57.68,Default,,0,0,0,,item that we've created, and
Dialogue: 0,0:24:57.80,0:24:58.56,Default,,0,0,0,,we're going to set the
Dialogue: 0,0:24:58.56,0:25:00.12,Default,,0,0,0,,previewProvider property to a
Dialogue: 0,0:25:00.12,0:25:00.76,Default,,0,0,0,,new block.
Dialogue: 0,0:25:01.23,0:25:02.45,Default,,0,0,0,,Now, in this block, what we're
Dialogue: 0,0:25:02.45,0:25:03.70,Default,,0,0,0,,going to do is create a new
Dialogue: 0,0:25:03.70,0:25:04.58,Default,,0,0,0,,LocationPlatterView.
Dialogue: 0,0:25:04.58,0:25:05.60,Default,,0,0,0,,This is just a custom view I
Dialogue: 0,0:25:05.60,0:25:06.93,Default,,0,0,0,,wrote that knows how to
Dialogue: 0,0:25:06.93,0:25:08.47,Default,,0,0,0,,represent both an image, as well
Dialogue: 0,0:25:08.47,0:25:10.23,Default,,0,0,0,,as some text describing the
Dialogue: 0,0:25:10.23,0:25:11.16,Default,,0,0,0,,location of the image.
Dialogue: 0,0:25:11.45,0:25:13.37,Default,,0,0,0,,And, we're going to create a new
Dialogue: 0,0:25:13.37,0:25:14.99,Default,,0,0,0,,UIDragPreview using this
Dialogue: 0,0:25:14.99,0:25:15.62,Default,,0,0,0,,information.
Dialogue: 0,0:25:16.13,0:25:20.35,Default,,0,0,0,,OK. So, with that change, we
Dialogue: 0,0:25:20.35,0:25:21.64,Default,,0,0,0,,should be able to see a much
Dialogue: 0,0:25:21.64,0:25:24.14,Default,,0,0,0,,nicer, hotter representation for
Dialogue: 0,0:25:24.14,0:25:24.82,Default,,0,0,0,,our drag preview.
Dialogue: 0,0:25:25.85,0:25:26.75,Default,,0,0,0,,So, watch what happens when I
Dialogue: 0,0:25:26.75,0:25:27.36,Default,,0,0,0,,begin a lift.
Dialogue: 0,0:25:27.99,0:25:29.07,Default,,0,0,0,,Now, interestingly, there's
Dialogue: 0,0:25:29.17,0:25:30.73,Default,,0,0,0,,actually no difference.
Dialogue: 0,0:25:31.33,0:25:32.89,Default,,0,0,0,,The reason is because we put our
Dialogue: 0,0:25:32.89,0:25:34.94,Default,,0,0,0,,logic into sessionWillBegin, and
Dialogue: 0,0:25:34.94,0:25:36.97,Default,,0,0,0,,the session does not begin until
Dialogue: 0,0:25:36.97,0:25:38.24,Default,,0,0,0,,I actually start moving my
Dialogue: 0,0:25:38.24,0:25:38.59,Default,,0,0,0,,finger.
Dialogue: 0,0:25:39.26,0:25:40.55,Default,,0,0,0,,So now, I'm going to start
Dialogue: 0,0:25:40.55,0:25:41.88,Default,,0,0,0,,moving, and look at that.
Dialogue: 0,0:25:42.04,0:25:43.41,Default,,0,0,0,,The drag preview has now morphed
Dialogue: 0,0:25:43.41,0:25:44.97,Default,,0,0,0,,into this platter representation
Dialogue: 0,0:25:45.18,0:25:46.34,Default,,0,0,0,,that shows both the image.
Dialogue: 0,0:25:47.52,0:25:49.61,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:25:50.11,0:25:51.27,Default,,0,0,0,,That now shows both the image,
Dialogue: 0,0:25:51.27,0:25:52.65,Default,,0,0,0,,as well as the location, and as
Dialogue: 0,0:25:52.65,0:25:53.77,Default,,0,0,0,,always, I'm able to drop into
Dialogue: 0,0:25:53.77,0:25:54.14,Default,,0,0,0,,Maps.
Dialogue: 0,0:25:54.25,0:25:56.19,Default,,0,0,0,,It'll navigate me and drop a pin
Dialogue: 0,0:25:56.19,0:25:56.35,Default,,0,0,0,,there.
Dialogue: 0,0:25:57.17,0:25:58.24,Default,,0,0,0,,So, we've discussed a number of
Dialogue: 0,0:25:58.30,0:26:00.53,Default,,0,0,0,,the advanced techniques on the
Dialogue: 0,0:26:00.60,0:26:01.91,Default,,0,0,0,,drag interaction side of things.
Dialogue: 0,0:26:02.13,0:26:03.45,Default,,0,0,0,,I would like to now hand it to
Dialogue: 0,0:26:03.45,0:26:05.03,Default,,0,0,0,,my other colleague, Tom, to
Dialogue: 0,0:26:05.03,0:26:06.98,Default,,0,0,0,,discuss some of the advanced
Dialogue: 0,0:26:06.98,0:26:09.42,Default,,0,0,0,,APIs used to customize drop
Dialogue: 0,0:26:09.42,0:26:10.09,Default,,0,0,0,,interactions.
Dialogue: 0,0:26:11.52,0:26:15.02,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:26:15.52,0:26:17.76,Default,,0,0,0,,>> Thanks, Wenson, for finally
Dialogue: 0,0:26:17.76,0:26:18.76,Default,,0,0,0,,dragging me into this.
Dialogue: 0,0:26:19.49,0:26:20.48,Default,,0,0,0,,No, I'm happy to be here.
Dialogue: 0,0:26:22.00,0:26:23.65,Default,,0,0,0,,So, let's talk about the drop
Dialogue: 0,0:26:23.65,0:26:23.98,Default,,0,0,0,,side.
Dialogue: 0,0:26:24.47,0:26:26.36,Default,,0,0,0,,Let's take a deep dive into a
Dialogue: 0,0:26:26.36,0:26:26.62,Default,,0,0,0,,drop.
Dialogue: 0,0:26:26.62,0:26:28.64,Default,,0,0,0,,We're going to talk about drop
Dialogue: 0,0:26:28.64,0:26:30.62,Default,,0,0,0,,sessions first, and that will
Dialogue: 0,0:26:30.62,0:26:32.31,Default,,0,0,0,,bring us to actually performing
Dialogue: 0,0:26:32.35,0:26:32.74,Default,,0,0,0,,a drop.
Dialogue: 0,0:26:32.74,0:26:34.96,Default,,0,0,0,,So, what is a drop session?
Dialogue: 0,0:26:34.96,0:26:36.40,Default,,0,0,0,,It's the other side of a drag
Dialogue: 0,0:26:36.40,0:26:36.78,Default,,0,0,0,,session.
Dialogue: 0,0:26:36.89,0:26:37.77,Default,,0,0,0,,It gives you access to
Dialogue: 0,0:26:37.77,0:26:39.27,Default,,0,0,0,,everything related to a drop.
Dialogue: 0,0:26:39.81,0:26:41.54,Default,,0,0,0,,You can get access to the drag
Dialogue: 0,0:26:41.54,0:26:42.82,Default,,0,0,0,,location where the user is
Dialogue: 0,0:26:42.82,0:26:44.02,Default,,0,0,0,,dragging inside your view.
Dialogue: 0,0:26:44.02,0:26:46.37,Default,,0,0,0,,It gives you access to the items
Dialogue: 0,0:26:46.37,0:26:48.39,Default,,0,0,0,,in the view, what type of data
Dialogue: 0,0:26:48.39,0:26:50.22,Default,,0,0,0,,is there, and actually their
Dialogue: 0,0:26:50.22,0:26:51.05,Default,,0,0,0,,data in the end.
Dialogue: 0,0:26:51.05,0:26:52.58,Default,,0,0,0,,It gives you access to the
Dialogue: 0,0:26:52.58,0:26:54.38,Default,,0,0,0,,configuration, so you can act
Dialogue: 0,0:26:54.38,0:26:55.12,Default,,0,0,0,,appropriately.
Dialogue: 0,0:26:55.84,0:26:56.99,Default,,0,0,0,,And finally, it gives you access
Dialogue: 0,0:26:56.99,0:26:58.35,Default,,0,0,0,,to the drag session itself when
Dialogue: 0,0:26:58.35,0:26:59.52,Default,,0,0,0,,you're dragging locally, but
Dialogue: 0,0:26:59.52,0:27:00.59,Default,,0,0,0,,more about that later.
Dialogue: 0,0:27:04.48,0:27:06.02,Default,,0,0,0,,One thing to keep in mind about
Dialogue: 0,0:27:06.06,0:27:08.26,Default,,0,0,0,,drop interactions is that only
Dialogue: 0,0:27:08.26,0:27:09.51,Default,,0,0,0,,one interaction would handle
Dialogue: 0,0:27:09.51,0:27:11.04,Default,,0,0,0,,only one active drop session at
Dialogue: 0,0:27:11.04,0:27:11.71,Default,,0,0,0,,the same time.
Dialogue: 0,0:27:12.82,0:27:13.34,Default,,0,0,0,,Why is this?
Dialogue: 0,0:27:13.41,0:27:15.38,Default,,0,0,0,,Because, it would fit most use
Dialogue: 0,0:27:15.51,0:27:16.48,Default,,0,0,0,,case scenarios.
Dialogue: 0,0:27:17.09,0:27:18.77,Default,,0,0,0,,That means that once the user is
Dialogue: 0,0:27:18.77,0:27:20.60,Default,,0,0,0,,dragging around and enters your
Dialogue: 0,0:27:20.60,0:27:23.05,Default,,0,0,0,,interaction, any other session
Dialogue: 0,0:27:23.05,0:27:24.29,Default,,0,0,0,,that comes around and tries to
Dialogue: 0,0:27:24.29,0:27:26.19,Default,,0,0,0,,enter your interaction won't be
Dialogue: 0,0:27:26.19,0:27:26.62,Default,,0,0,0,,picked up.
Dialogue: 0,0:27:27.74,0:27:29.48,Default,,0,0,0,,Remember, you can drag with more
Dialogue: 0,0:27:29.48,0:27:30.44,Default,,0,0,0,,than one finger at the same
Dialogue: 0,0:27:30.44,0:27:30.73,Default,,0,0,0,,time.
Dialogue: 0,0:27:31.82,0:27:32.83,Default,,0,0,0,,Now, if you don't want this
Dialogue: 0,0:27:32.83,0:27:34.38,Default,,0,0,0,,behavior, and you do want more
Dialogue: 0,0:27:34.38,0:27:35.86,Default,,0,0,0,,than one session to be active on
Dialogue: 0,0:27:35.86,0:27:37.05,Default,,0,0,0,,your view at the same time,
Dialogue: 0,0:27:37.33,0:27:38.35,Default,,0,0,0,,there's a few options.
Dialogue: 0,0:27:38.82,0:27:40.24,Default,,0,0,0,,You can add more interactions,
Dialogue: 0,0:27:40.24,0:27:41.34,Default,,0,0,0,,just add a few more drop
Dialogue: 0,0:27:41.34,0:27:42.39,Default,,0,0,0,,interactions, and they will all
Dialogue: 0,0:27:42.39,0:27:43.64,Default,,0,0,0,,be handled at the same time.
Dialogue: 0,0:27:44.10,0:27:45.85,Default,,0,0,0,,They can have the same logic, or
Dialogue: 0,0:27:45.85,0:27:46.94,Default,,0,0,0,,they can have different logic.
Dialogue: 0,0:27:46.94,0:27:47.62,Default,,0,0,0,,Doesn't really matter.
Dialogue: 0,0:27:48.40,0:27:49.46,Default,,0,0,0,,Or, there's a property you can
Dialogue: 0,0:27:49.46,0:27:50.77,Default,,0,0,0,,set on the interaction called
Dialogue: 0,0:27:50.77,0:27:52.67,Default,,0,0,0,,allowSimultaneousDropSessions.
Dialogue: 0,0:27:52.84,0:27:54.36,Default,,0,0,0,,Set it to true, and that will
Dialogue: 0,0:27:54.36,0:27:56.17,Default,,0,0,0,,lift the block on only one
Dialogue: 0,0:27:56.17,0:27:57.83,Default,,0,0,0,,session, and you can handle more
Dialogue: 0,0:27:57.83,0:27:58.93,Default,,0,0,0,,than one session at the same
Dialogue: 0,0:27:58.93,0:27:59.18,Default,,0,0,0,,time.
Dialogue: 0,0:27:59.62,0:28:01.26,Default,,0,0,0,,But, your delegate has to handle
Dialogue: 0,0:28:01.26,0:28:01.92,Default,,0,0,0,,this properly.
Dialogue: 0,0:28:02.01,0:28:05.11,Default,,0,0,0,,Let's talk a bit about how a
Dialogue: 0,0:28:05.11,0:28:05.75,Default,,0,0,0,,drop works.
Dialogue: 0,0:28:05.86,0:28:07.08,Default,,0,0,0,,We've been over this yesterday
Dialogue: 0,0:28:07.08,0:28:08.29,Default,,0,0,0,,in the introductory talk, but
Dialogue: 0,0:28:08.29,0:28:09.12,Default,,0,0,0,,let's gloss over it.
Dialogue: 0,0:28:09.83,0:28:10.99,Default,,0,0,0,,User is dragging something, it's
Dialogue: 0,0:28:11.17,0:28:12.27,Default,,0,0,0,,approaching your view.
Dialogue: 0,0:28:13.13,0:28:14.84,Default,,0,0,0,,Before we do anything, we'll
Dialogue: 0,0:28:14.84,0:28:16.53,Default,,0,0,0,,call canHandle session on your
Dialogue: 0,0:28:16.53,0:28:18.27,Default,,0,0,0,,interaction delegate, and that
Dialogue: 0,0:28:18.27,0:28:20.47,Default,,0,0,0,,will trigger, depending on what
Dialogue: 0,0:28:20.47,0:28:22.23,Default,,0,0,0,,you return here, will allow you
Dialogue: 0,0:28:22.23,0:28:23.55,Default,,0,0,0,,to handle the session or not.
Dialogue: 0,0:28:23.55,0:28:25.55,Default,,0,0,0,,If you return false, it will be
Dialogue: 0,0:28:25.55,0:28:26.83,Default,,0,0,0,,as if the view doesn't appear to
Dialogue: 0,0:28:26.83,0:28:28.21,Default,,0,0,0,,the drop session, and nothing
Dialogue: 0,0:28:28.21,0:28:28.58,Default,,0,0,0,,will happen.
Dialogue: 0,0:28:29.21,0:28:30.78,Default,,0,0,0,,If you return true or do not
Dialogue: 0,0:28:30.82,0:28:32.09,Default,,0,0,0,,implement this, will continue
Dialogue: 0,0:28:32.09,0:28:33.42,Default,,0,0,0,,and call sessionDidEnter to
Dialogue: 0,0:28:33.42,0:28:35.47,Default,,0,0,0,,indicate that the drag has
Dialogue: 0,0:28:35.47,0:28:37.74,Default,,0,0,0,,entered your view.
Dialogue: 0,0:28:37.95,0:28:39.15,Default,,0,0,0,,User then moves their finger
Dialogue: 0,0:28:39.15,0:28:40.00,Default,,0,0,0,,around, and will call
Dialogue: 0,0:28:40.00,0:28:42.29,Default,,0,0,0,,sessionDidUpdate repeatedly, and
Dialogue: 0,0:28:42.29,0:28:43.17,Default,,0,0,0,,you have to return a drop
Dialogue: 0,0:28:43.17,0:28:43.87,Default,,0,0,0,,proposal here.
Dialogue: 0,0:28:44.13,0:28:45.86,Default,,0,0,0,,Now, keep in mind, this will be
Dialogue: 0,0:28:45.86,0:28:48.15,Default,,0,0,0,,called a lot of times, so try to
Dialogue: 0,0:28:48.15,0:28:49.88,Default,,0,0,0,,do at least minimal work here.
Dialogue: 0,0:28:50.27,0:28:51.64,Default,,0,0,0,,Don't do too much, because your
Dialogue: 0,0:28:51.64,0:28:53.55,Default,,0,0,0,,frame rate will suffer and users
Dialogue: 0,0:28:53.55,0:28:54.69,Default,,0,0,0,,don't like that.
Dialogue: 0,0:28:55.86,0:28:57.42,Default,,0,0,0,,When a user lifts their finger,
Dialogue: 0,0:28:57.42,0:28:58.33,Default,,0,0,0,,will execute a drop.
Dialogue: 0,0:28:58.50,0:28:59.48,Default,,0,0,0,,More about that later.
Dialogue: 0,0:29:00.14,0:29:01.67,Default,,0,0,0,,And finally, will call
Dialogue: 0,0:29:01.67,0:29:02.92,Default,,0,0,0,,sessionDidEnd to indicate that
Dialogue: 0,0:29:02.92,0:29:04.47,Default,,0,0,0,,the session has ended and your
Dialogue: 0,0:29:04.47,0:29:05.84,Default,,0,0,0,,interaction, by default, is
Dialogue: 0,0:29:05.84,0:29:07.65,Default,,0,0,0,,ready to accept new sessions
Dialogue: 0,0:29:07.69,0:29:08.02,Default,,0,0,0,,again.
Dialogue: 0,0:29:09.18,0:29:11.19,Default,,0,0,0,,Now, let's pretend that the user
Dialogue: 0,0:29:11.63,0:29:13.38,Default,,0,0,0,,did not lift their finger, and
Dialogue: 0,0:29:13.38,0:29:13.94,Default,,0,0,0,,bring them back.
Dialogue: 0,0:29:15.32,0:29:16.83,Default,,0,0,0,,If they move outside, we'll call
Dialogue: 0,0:29:16.83,0:29:18.27,Default,,0,0,0,,sessionDidExit to indicate that
Dialogue: 0,0:29:18.27,0:29:19.87,Default,,0,0,0,,the session has left your view.
Dialogue: 0,0:29:20.44,0:29:21.54,Default,,0,0,0,,It does not mean that the
Dialogue: 0,0:29:21.60,0:29:22.48,Default,,0,0,0,,session has ended.
Dialogue: 0,0:29:23.02,0:29:24.38,Default,,0,0,0,,It's still going on, so if the
Dialogue: 0,0:29:24.38,0:29:26.66,Default,,0,0,0,,user lifts their finger outside
Dialogue: 0,0:29:26.66,0:29:27.89,Default,,0,0,0,,of your view, we'll call
Dialogue: 0,0:29:27.89,0:29:29.51,Default,,0,0,0,,sessionDidEnd again to indicate
Dialogue: 0,0:29:29.51,0:29:30.70,Default,,0,0,0,,that the session has actually
Dialogue: 0,0:29:30.70,0:29:31.09,Default,,0,0,0,,ended.
Dialogue: 0,0:29:32.36,0:29:34.02,Default,,0,0,0,,Now, let's pretend again that
Dialogue: 0,0:29:34.02,0:29:35.19,Default,,0,0,0,,the user did not lift their
Dialogue: 0,0:29:35.19,0:29:36.21,Default,,0,0,0,,finger, and bring it back,
Dialogue: 0,0:29:37.10,0:29:38.81,Default,,0,0,0,,outside of the view, they bring
Dialogue: 0,0:29:38.81,0:29:40.06,Default,,0,0,0,,it back in again, we'll call
Dialogue: 0,0:29:40.06,0:29:42.09,Default,,0,0,0,,sessionDidEnter again, and start
Dialogue: 0,0:29:42.09,0:29:43.62,Default,,0,0,0,,calling sessionDidUpdate to
Dialogue: 0,0:29:43.62,0:29:45.15,Default,,0,0,0,,update the session and get a
Dialogue: 0,0:29:45.15,0:29:45.83,Default,,0,0,0,,drop proposal.
Dialogue: 0,0:29:47.24,0:29:48.81,Default,,0,0,0,,Now, pretend that the user has
Dialogue: 0,0:29:48.81,0:29:50.67,Default,,0,0,0,,rested on a place inside your
Dialogue: 0,0:29:50.67,0:29:51.90,Default,,0,0,0,,view where you cannot accept a
Dialogue: 0,0:29:51.90,0:29:52.25,Default,,0,0,0,,drop.
Dialogue: 0,0:29:52.69,0:29:54.21,Default,,0,0,0,,You'll return an operation
Dialogue: 0,0:29:54.21,0:29:55.59,Default,,0,0,0,,cancel or forbidden.
Dialogue: 0,0:29:55.59,0:29:57.39,Default,,0,0,0,,If the user then lifts their
Dialogue: 0,0:29:57.39,0:30:00.60,Default,,0,0,0,,finger, we'll call sessionDidEnd
Dialogue: 0,0:30:00.60,0:30:00.98,Default,,0,0,0,,right away.
Dialogue: 0,0:30:01.30,0:30:02.08,Default,,0,0,0,,Nothing happens.
Dialogue: 0,0:30:02.08,0:30:03.45,Default,,0,0,0,,No drop is executed, and we're
Dialogue: 0,0:30:03.45,0:30:06.71,Default,,0,0,0,,just canceling the drop.
Dialogue: 0,0:30:06.85,0:30:08.09,Default,,0,0,0,,Let's focus on this drop
Dialogue: 0,0:30:08.09,0:30:09.17,Default,,0,0,0,,proposal for a second.
Dialogue: 0,0:30:09.60,0:30:10.70,Default,,0,0,0,,I'm not going to talk about the
Dialogue: 0,0:30:10.70,0:30:11.91,Default,,0,0,0,,drop operations that was covered
Dialogue: 0,0:30:11.91,0:30:13.20,Default,,0,0,0,,yesterday in the introductory
Dialogue: 0,0:30:13.20,0:30:14.85,Default,,0,0,0,,talk, but there's two more
Dialogue: 0,0:30:14.85,0:30:15.86,Default,,0,0,0,,properties that might be
Dialogue: 0,0:30:15.86,0:30:16.28,Default,,0,0,0,,interesting.
Dialogue: 0,0:30:16.47,0:30:17.46,Default,,0,0,0,,First, precision mode.
Dialogue: 0,0:30:18.14,0:30:19.59,Default,,0,0,0,,If you set precision mode by
Dialogue: 0,0:30:19.86,0:30:22.21,Default,,0,0,0,,setting isPrecise to true, your
Dialogue: 0,0:30:22.21,0:30:25.40,Default,,0,0,0,,will hit tests inside your view
Dialogue: 0,0:30:25.40,0:30:26.82,Default,,0,0,0,,slightly above the touch of the
Dialogue: 0,0:30:26.82,0:30:27.25,Default,,0,0,0,,user.
Dialogue: 0,0:30:27.42,0:30:29.59,Default,,0,0,0,,So, the actual hit test location
Dialogue: 0,0:30:29.59,0:30:31.00,Default,,0,0,0,,inside your view will be not
Dialogue: 0,0:30:31.00,0:30:32.71,Default,,0,0,0,,under the finger, but slightly
Dialogue: 0,0:30:32.71,0:30:33.01,Default,,0,0,0,,above.
Dialogue: 0,0:30:33.68,0:30:35.22,Default,,0,0,0,,This allows more precise
Dialogue: 0,0:30:35.27,0:30:36.51,Default,,0,0,0,,dropping inside your view,
Dialogue: 0,0:30:36.51,0:30:37.74,Default,,0,0,0,,because the user can actually
Dialogue: 0,0:30:37.74,0:30:39.31,Default,,0,0,0,,see where they are dropping.
Dialogue: 0,0:30:39.71,0:30:41.28,Default,,0,0,0,,A good example is the Text
Dialogue: 0,0:30:41.28,0:30:41.88,Default,,0,0,0,,controls.
Dialogue: 0,0:30:42.13,0:30:43.67,Default,,0,0,0,,They use precision mode to show
Dialogue: 0,0:30:43.67,0:30:45.54,Default,,0,0,0,,with carets where the user will
Dialogue: 0,0:30:45.54,0:30:47.17,Default,,0,0,0,,actually drop the items inside a
Dialogue: 0,0:30:47.17,0:30:48.03,Default,,0,0,0,,Text view.
Dialogue: 0,0:30:48.47,0:30:50.17,Default,,0,0,0,,You can see it here, that the
Dialogue: 0,0:30:50.17,0:30:51.75,Default,,0,0,0,,caret is shown slightly above
Dialogue: 0,0:30:51.75,0:30:53.20,Default,,0,0,0,,the touch where the user is
Dialogue: 0,0:30:53.20,0:30:54.10,Default,,0,0,0,,touching the glass.
Dialogue: 0,0:30:54.60,0:30:55.85,Default,,0,0,0,,If you would not do this, the
Dialogue: 0,0:30:55.85,0:30:57.22,Default,,0,0,0,,caret will be below the finger,
Dialogue: 0,0:30:57.22,0:30:58.31,Default,,0,0,0,,and it will be very hard to
Dialogue: 0,0:30:58.56,0:31:01.47,Default,,0,0,0,,precisely drop inside a specific
Dialogue: 0,0:31:01.51,0:31:02.31,Default,,0,0,0,,point in the text.
Dialogue: 0,0:31:02.95,0:31:03.88,Default,,0,0,0,,So, if you do implement
Dialogue: 0,0:31:03.88,0:31:06.84,Default,,0,0,0,,precision mode, please indicate
Dialogue: 0,0:31:06.84,0:31:08.99,Default,,0,0,0,,some UI at the drop site to
Dialogue: 0,0:31:08.99,0:31:10.41,Default,,0,0,0,,indicate to the user where they
Dialogue: 0,0:31:10.41,0:31:12.36,Default,,0,0,0,,will be dropping this items.
Dialogue: 0,0:31:12.79,0:31:14.51,Default,,0,0,0,,Next up is
Dialogue: 0,0:31:14.51,0:31:16.22,Default,,0,0,0,,prefersFullSizePreview.
Dialogue: 0,0:31:16.77,0:31:18.88,Default,,0,0,0,,This brings us to preview
Dialogue: 0,0:31:18.88,0:31:19.29,Default,,0,0,0,,scaling.
Dialogue: 0,0:31:19.29,0:31:20.30,Default,,0,0,0,,As you might have noticed by
Dialogue: 0,0:31:20.30,0:31:22.79,Default,,0,0,0,,playing around with iOS 11, if
Dialogue: 0,0:31:22.79,0:31:24.04,Default,,0,0,0,,you start to drag something, it
Dialogue: 0,0:31:24.04,0:31:25.00,Default,,0,0,0,,will scale it down.
Dialogue: 0,0:31:25.00,0:31:26.37,Default,,0,0,0,,The system will always scale
Dialogue: 0,0:31:26.37,0:31:26.89,Default,,0,0,0,,things down.
Dialogue: 0,0:31:27.50,0:31:28.39,Default,,0,0,0,,Why do we do this?
Dialogue: 0,0:31:28.48,0:31:29.47,Default,,0,0,0,,Because it doesn't make a lot of
Dialogue: 0,0:31:29.47,0:31:30.90,Default,,0,0,0,,sense to have a big preview
Dialogue: 0,0:31:30.90,0:31:32.35,Default,,0,0,0,,covering the screen and your UI,
Dialogue: 0,0:31:32.54,0:31:33.65,Default,,0,0,0,,because it's interactive.
Dialogue: 0,0:31:34.36,0:31:36.01,Default,,0,0,0,,If you blocked the screen with a
Dialogue: 0,0:31:36.01,0:31:37.72,Default,,0,0,0,,preview that's too large, it's
Dialogue: 0,0:31:37.72,0:31:39.26,Default,,0,0,0,,hard to navigate around, so we
Dialogue: 0,0:31:39.26,0:31:42.03,Default,,0,0,0,,scale those down, but in certain
Dialogue: 0,0:31:42.03,0:31:44.00,Default,,0,0,0,,cases, it might be interesting
Dialogue: 0,0:31:44.00,0:31:45.59,Default,,0,0,0,,to prefer a full-size preview.
Dialogue: 0,0:31:46.02,0:31:47.89,Default,,0,0,0,,For example, you have a list and
Dialogue: 0,0:31:47.89,0:31:49.41,Default,,0,0,0,,this list you can reorder.
Dialogue: 0,0:31:49.41,0:31:50.66,Default,,0,0,0,,So, you pick something up and
Dialogue: 0,0:31:50.75,0:31:51.51,Default,,0,0,0,,try to drag it up.
Dialogue: 0,0:31:52.09,0:31:53.44,Default,,0,0,0,,It would not make sense to scale
Dialogue: 0,0:31:53.44,0:31:55.96,Default,,0,0,0,,that whole item down, so you can
Dialogue: 0,0:31:55.96,0:31:57.67,Default,,0,0,0,,add prefersFullSizePreviews
Dialogue: 0,0:31:57.67,0:31:57.88,Default,,0,0,0,,here.
Dialogue: 0,0:31:58.46,0:31:59.63,Default,,0,0,0,,There's two ways to do this.
Dialogue: 0,0:31:59.72,0:32:00.84,Default,,0,0,0,,At the drag site, there's drag
Dialogue: 0,0:32:00.84,0:32:01.36,Default,,0,0,0,,interaction
Dialogue: 0,0:32:01.36,0:32:03.01,Default,,0,0,0,,prefersFullSizePreviewsFor
Dialogue: 0,0:32:03.01,0:32:03.47,Default,,0,0,0,,session.
Dialogue: 0,0:32:04.18,0:32:05.57,Default,,0,0,0,,Return true here, and we'll try
Dialogue: 0,0:32:05.57,0:32:07.54,Default,,0,0,0,,to keep those previews full
Dialogue: 0,0:32:07.54,0:32:09.64,Default,,0,0,0,,size, and at the drop site, you
Dialogue: 0,0:32:09.64,0:32:11.30,Default,,0,0,0,,can set the flag to true on the
Dialogue: 0,0:32:11.30,0:32:12.10,Default,,0,0,0,,drop proposal.
Dialogue: 0,0:32:12.93,0:32:15.15,Default,,0,0,0,,Note that this is a preference.
Dialogue: 0,0:32:15.86,0:32:18.62,Default,,0,0,0,,You can ask to scale, not to
Dialogue: 0,0:32:18.62,0:32:20.37,Default,,0,0,0,,scale, but we might not always
Dialogue: 0,0:32:20.43,0:32:20.87,Default,,0,0,0,,honor it.
Dialogue: 0,0:32:20.92,0:32:22.33,Default,,0,0,0,,There's certain conditions where
Dialogue: 0,0:32:22.33,0:32:23.73,Default,,0,0,0,,the system will scale down
Dialogue: 0,0:32:23.76,0:32:24.22,Default,,0,0,0,,anyway.
Dialogue: 0,0:32:25.30,0:32:27.03,Default,,0,0,0,,A few of these are flocks.
Dialogue: 0,0:32:27.03,0:32:29.11,Default,,0,0,0,,So, if you add more items to the
Dialogue: 0,0:32:29.11,0:32:31.04,Default,,0,0,0,,drag, we will always scale those
Dialogue: 0,0:32:31.04,0:32:32.85,Default,,0,0,0,,items down, even if you prefer
Dialogue: 0,0:32:32.85,0:32:33.75,Default,,0,0,0,,full-size scaling.
Dialogue: 0,0:32:35.13,0:32:37.32,Default,,0,0,0,,A single preview, if you are
Dialogue: 0,0:32:37.47,0:32:40.07,Default,,0,0,0,,dragging one item and dragging
Dialogue: 0,0:32:40.07,0:32:41.18,Default,,0,0,0,,it outside your app, we will
Dialogue: 0,0:32:41.18,0:32:42.90,Default,,0,0,0,,always scale that down, too.
Dialogue: 0,0:32:43.98,0:32:45.40,Default,,0,0,0,,And finally, once something is
Dialogue: 0,0:32:45.40,0:32:46.84,Default,,0,0,0,,scaled down, we will never scale
Dialogue: 0,0:32:46.84,0:32:47.48,Default,,0,0,0,,it back up again.
Dialogue: 0,0:32:47.53,0:32:48.40,Default,,0,0,0,,So, keep that in mind.
Dialogue: 0,0:32:48.45,0:32:49.85,Default,,0,0,0,,It's a preference, but not
Dialogue: 0,0:32:50.02,0:32:50.91,Default,,0,0,0,,something set in stone.
Dialogue: 0,0:32:51.37,0:32:54.10,Default,,0,0,0,,Let's go to performing a drop.
Dialogue: 0,0:32:54.25,0:32:55.17,Default,,0,0,0,,When you're ready to perform a
Dialogue: 0,0:32:55.17,0:32:56.75,Default,,0,0,0,,drop, user lift their finger,
Dialogue: 0,0:32:57.26,0:33:00.29,Default,,0,0,0,,and we'll have to start loading
Dialogue: 0,0:33:00.29,0:33:01.17,Default,,0,0,0,,the data at this point.
Dialogue: 0,0:33:01.41,0:33:03.15,Default,,0,0,0,,In fact, this is the only moment
Dialogue: 0,0:33:03.15,0:33:04.72,Default,,0,0,0,,in time where you can actually
Dialogue: 0,0:33:04.72,0:33:07.75,Default,,0,0,0,,request data and allow it to
Dialogue: 0,0:33:07.75,0:33:09.89,Default,,0,0,0,,succeed, because in any other of
Dialogue: 0,0:33:09.89,0:33:11.56,Default,,0,0,0,,the lifetime calls, if you try
Dialogue: 0,0:33:11.56,0:33:12.97,Default,,0,0,0,,this, it will always fail.
Dialogue: 0,0:33:12.97,0:33:14.67,Default,,0,0,0,,Only in performDrop you have a
Dialogue: 0,0:33:14.67,0:33:15.75,Default,,0,0,0,,chance of getting data.
Dialogue: 0,0:33:16.37,0:33:17.49,Default,,0,0,0,,There's cooperation required on
Dialogue: 0,0:33:17.49,0:33:18.71,Default,,0,0,0,,the other side, so that's why I
Dialogue: 0,0:33:18.71,0:33:19.84,Default,,0,0,0,,say, "There's only a chance,"
Dialogue: 0,0:33:19.90,0:33:21.28,Default,,0,0,0,,but usually you will get some
Dialogue: 0,0:33:21.28,0:33:21.67,Default,,0,0,0,,data.
Dialogue: 0,0:33:22.29,0:33:23.28,Default,,0,0,0,,These data loads are always
Dialogue: 0,0:33:23.28,0:33:24.72,Default,,0,0,0,,asynchronous, so please don't
Dialogue: 0,0:33:24.72,0:33:25.20,Default,,0,0,0,,block here.
Dialogue: 0,0:33:25.61,0:33:26.84,Default,,0,0,0,,If you block for too long and
Dialogue: 0,0:33:26.84,0:33:28.38,Default,,0,0,0,,you don't know how long this
Dialogue: 0,0:33:28.38,0:33:30.89,Default,,0,0,0,,data will be taking to arrive
Dialogue: 0,0:33:30.89,0:33:32.43,Default,,0,0,0,,there, will kill your app, and
Dialogue: 0,0:33:32.43,0:33:33.42,Default,,0,0,0,,that's not the best user
Dialogue: 0,0:33:33.42,0:33:34.76,Default,,0,0,0,,experience for our users.
Dialogue: 0,0:33:35.03,0:33:35.86,Default,,0,0,0,,So, don't do this.
Dialogue: 0,0:33:36.37,0:33:39.01,Default,,0,0,0,,Load data in the background will
Dialogue: 0,0:33:39.01,0:33:40.86,Default,,0,0,0,,animate the items down into your
Dialogue: 0,0:33:40.86,0:33:42.23,Default,,0,0,0,,view so the user can see you
Dialogue: 0,0:33:42.23,0:33:43.74,Default,,0,0,0,,dropped, and then finally, we'll
Dialogue: 0,0:33:43.74,0:33:45.00,Default,,0,0,0,,call concludeDrop to indicate
Dialogue: 0,0:33:45.00,0:33:46.19,Default,,0,0,0,,that the animation is done, and
Dialogue: 0,0:33:46.38,0:33:47.70,Default,,0,0,0,,as far as the user is concerned,
Dialogue: 0,0:33:47.81,0:33:48.84,Default,,0,0,0,,the drop is finished.
Dialogue: 0,0:33:51.40,0:33:53.12,Default,,0,0,0,,This does not mean that the data
Dialogue: 0,0:33:53.18,0:33:53.73,Default,,0,0,0,,is there yet.
Dialogue: 0,0:33:53.90,0:33:55.36,Default,,0,0,0,,If you can see, the first call
Dialogue: 0,0:33:55.36,0:33:56.46,Default,,0,0,0,,here is still going on.
Dialogue: 0,0:33:56.77,0:33:57.80,Default,,0,0,0,,But, more about that later.
Dialogue: 0,0:33:58.92,0:33:59.70,Default,,0,0,0,,How do you load data?
Dialogue: 0,0:33:59.70,0:34:02.83,Default,,0,0,0,,There's a very useful call on
Dialogue: 0,0:34:02.83,0:34:04.63,Default,,0,0,0,,the session called loadObjects
Dialogue: 0,0:34:04.63,0:34:05.63,Default,,0,0,0,,of class completion.
Dialogue: 0,0:34:06.14,0:34:06.99,Default,,0,0,0,,It's very good to load
Dialogue: 0,0:34:06.99,0:34:07.78,Default,,0,0,0,,homogeneous data.
Dialogue: 0,0:34:07.78,0:34:09.57,Default,,0,0,0,,If you have only images in the
Dialogue: 0,0:34:09.57,0:34:11.60,Default,,0,0,0,,drag or in the drop, and you
Dialogue: 0,0:34:11.60,0:34:12.83,Default,,0,0,0,,know you can only accept those,
Dialogue: 0,0:34:12.83,0:34:14.89,Default,,0,0,0,,use URImage as class here, and
Dialogue: 0,0:34:14.89,0:34:16.25,Default,,0,0,0,,it will give you back a nice
Dialogue: 0,0:34:16.25,0:34:17.95,Default,,0,0,0,,array sorted exactly the same as
Dialogue: 0,0:34:17.95,0:34:19.43,Default,,0,0,0,,the sessions, in the sessions
Dialogue: 0,0:34:19.43,0:34:22.60,Default,,0,0,0,,items array, and we'll give it
Dialogue: 0,0:34:22.60,0:34:23.03,Default,,0,0,0,,right to you.
Dialogue: 0,0:34:23.06,0:34:23.91,Default,,0,0,0,,We'll do the heaving lifting
Dialogue: 0,0:34:23.91,0:34:25.02,Default,,0,0,0,,behind your back, and you'll get
Dialogue: 0,0:34:25.02,0:34:25.81,Default,,0,0,0,,a nice array back.
Dialogue: 0,0:34:26.21,0:34:27.13,Default,,0,0,0,,This completion block will be
Dialogue: 0,0:34:27.13,0:34:28.73,Default,,0,0,0,,called on the main queue, so you
Dialogue: 0,0:34:28.73,0:34:30.25,Default,,0,0,0,,can update URI right away.
Dialogue: 0,0:34:30.86,0:34:32.81,Default,,0,0,0,,If you have more mixed data
Dialogue: 0,0:34:32.81,0:34:33.83,Default,,0,0,0,,here, or you wanted some more
Dialogue: 0,0:34:33.83,0:34:35.55,Default,,0,0,0,,control, you can just iterate
Dialogue: 0,0:34:35.55,0:34:37.45,Default,,0,0,0,,over the session items and load
Dialogue: 0,0:34:37.65,0:34:38.77,Default,,0,0,0,,each of them individually, if
Dialogue: 0,0:34:38.77,0:34:39.13,Default,,0,0,0,,you want.
Dialogue: 0,0:34:39.29,0:34:40.27,Default,,0,0,0,,Use loadObject, or
Dialogue: 0,0:34:40.27,0:34:41.93,Default,,0,0,0,,loadDataRepresentation, or
Dialogue: 0,0:34:41.93,0:34:44.22,Default,,0,0,0,,loadFileRepresentation on the
Dialogue: 0,0:34:44.22,0:34:45.16,Default,,0,0,0,,item provider.
Dialogue: 0,0:34:45.19,0:34:46.27,Default,,0,0,0,,It gives you more fine-grained
Dialogue: 0,0:34:46.27,0:34:47.36,Default,,0,0,0,,control over what you want to
Dialogue: 0,0:34:47.36,0:34:49.34,Default,,0,0,0,,load and how, and it even allows
Dialogue: 0,0:34:49.34,0:34:51.42,Default,,0,0,0,,you to load multiple file
Dialogue: 0,0:34:51.42,0:34:53.12,Default,,0,0,0,,representations for each item,
Dialogue: 0,0:34:53.12,0:34:53.88,Default,,0,0,0,,if you choose to.
Dialogue: 0,0:34:54.95,0:34:55.80,Default,,0,0,0,,Keep in mind that this
Dialogue: 0,0:34:55.80,0:34:56.81,Default,,0,0,0,,completion block will be called
Dialogue: 0,0:34:56.81,0:34:59.50,Default,,0,0,0,,on the background queue, so if
Dialogue: 0,0:34:59.50,0:35:00.81,Default,,0,0,0,,you want to do URI work here,
Dialogue: 0,0:35:00.81,0:35:01.88,Default,,0,0,0,,dispatch to the main queue.
Dialogue: 0,0:35:02.03,0:35:04.54,Default,,0,0,0,,I'm going to hand it over back
Dialogue: 0,0:35:04.54,0:35:06.10,Default,,0,0,0,,to Wenson to show off how that
Dialogue: 0,0:35:06.10,0:35:07.43,Default,,0,0,0,,actually works in practice.
Dialogue: 0,0:35:08.52,0:35:13.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:35:14.05,0:35:14.23,Default,,0,0,0,,>> Alright.
Dialogue: 0,0:35:14.69,0:35:15.21,Default,,0,0,0,,Thanks, Tom.
Dialogue: 0,0:35:15.88,0:35:17.04,Default,,0,0,0,,So now, I'd like to introduce
Dialogue: 0,0:35:17.39,0:35:18.71,Default,,0,0,0,,the second part of our demo.
Dialogue: 0,0:35:19.44,0:35:21.48,Default,,0,0,0,,This is the, this is the second
Dialogue: 0,0:35:21.48,0:35:22.47,Default,,0,0,0,,demo app, called Drop
Dialogue: 0,0:35:22.47,0:35:24.14,Default,,0,0,0,,Destination, and what we'll be
Dialogue: 0,0:35:24.14,0:35:25.70,Default,,0,0,0,,doing here is building a photo
Dialogue: 0,0:35:25.70,0:35:26.84,Default,,0,0,0,,gallery very similar to the
Dialogue: 0,0:35:26.84,0:35:28.22,Default,,0,0,0,,Photos app, where dropping
Dialogue: 0,0:35:28.22,0:35:29.96,Default,,0,0,0,,images will populate this area
Dialogue: 0,0:35:29.96,0:35:31.44,Default,,0,0,0,,with additional Image views.
Dialogue: 0,0:35:32.07,0:35:34.31,Default,,0,0,0,,So, the idea is that this flow
Dialogue: 0,0:35:34.31,0:35:34.82,Default,,0,0,0,,should work.
Dialogue: 0,0:35:34.82,0:35:35.90,Default,,0,0,0,,I should be able to drop here,
Dialogue: 0,0:35:36.26,0:35:37.91,Default,,0,0,0,,and I should see more Image
Dialogue: 0,0:35:37.91,0:35:38.31,Default,,0,0,0,,views.
Dialogue: 0,0:35:38.80,0:35:39.46,Default,,0,0,0,,Now, of course, that didn't
Dialogue: 0,0:35:39.46,0:35:41.16,Default,,0,0,0,,happen, so let's go into the
Dialogue: 0,0:35:41.16,0:35:42.52,Default,,0,0,0,,code and see why that's the
Dialogue: 0,0:35:42.52,0:35:42.83,Default,,0,0,0,,case.
Dialogue: 0,0:35:43.93,0:35:44.85,Default,,0,0,0,,So, this is where most of our
Dialogue: 0,0:35:44.85,0:35:45.80,Default,,0,0,0,,logic is going to live,
Dialogue: 0,0:35:45.80,0:35:47.01,Default,,0,0,0,,Droppable Image Preview
Dialogue: 0,0:35:47.01,0:35:48.74,Default,,0,0,0,,Controller, and here, you can
Dialogue: 0,0:35:48.74,0:35:49.93,Default,,0,0,0,,see that all we've implemented
Dialogue: 0,0:35:49.93,0:35:50.85,Default,,0,0,0,,is sessionDidUpdate.
Dialogue: 0,0:35:51.55,0:35:52.80,Default,,0,0,0,,So, it's no wonder that the drop
Dialogue: 0,0:35:52.80,0:35:53.94,Default,,0,0,0,,doesn't work, because we haven't
Dialogue: 0,0:35:53.94,0:35:55.42,Default,,0,0,0,,actually implemented any drop
Dialogue: 0,0:35:55.42,0:35:55.97,Default,,0,0,0,,handling yet.
Dialogue: 0,0:35:56.26,0:35:57.31,Default,,0,0,0,,I'm going to implement
Dialogue: 0,0:35:57.31,0:35:59.31,Default,,0,0,0,,performDrop right here, and in
Dialogue: 0,0:35:59.56,0:36:01.35,Default,,0,0,0,,this method, we are going to
Dialogue: 0,0:36:01.35,0:36:02.89,Default,,0,0,0,,iterate through all of our items
Dialogue: 0,0:36:02.89,0:36:03.33,Default,,0,0,0,,in the session.
Dialogue: 0,0:36:03.57,0:36:05.13,Default,,0,0,0,,Now, for each item, if we are
Dialogue: 0,0:36:05.13,0:36:06.92,Default,,0,0,0,,able to load a UI image, we're
Dialogue: 0,0:36:06.92,0:36:08.21,Default,,0,0,0,,going to go ahead and insert a
Dialogue: 0,0:36:08.21,0:36:09.30,Default,,0,0,0,,new Image view into our
Dialogue: 0,0:36:09.30,0:36:11.43,Default,,0,0,0,,hierarchy and kick off a load
Dialogue: 0,0:36:11.43,0:36:12.29,Default,,0,0,0,,from the itemProvider.
Dialogue: 0,0:36:12.95,0:36:13.91,Default,,0,0,0,,Now, when the itemProvider is
Dialogue: 0,0:36:13.91,0:36:14.79,Default,,0,0,0,,done loading, we're going to
Dialogue: 0,0:36:14.79,0:36:16.36,Default,,0,0,0,,call back to the main queue and
Dialogue: 0,0:36:16.36,0:36:17.83,Default,,0,0,0,,set the image of the Image view
Dialogue: 0,0:36:17.83,0:36:19.53,Default,,0,0,0,,that we just inserted to this
Dialogue: 0,0:36:19.53,0:36:20.61,Default,,0,0,0,,new image returned by the
Dialogue: 0,0:36:20.61,0:36:21.39,Default,,0,0,0,,itemProvider.
Dialogue: 0,0:36:21.39,0:36:23.99,Default,,0,0,0,,So, with that little change, we
Dialogue: 0,0:36:23.99,0:36:25.97,Default,,0,0,0,,should be able to get this flow,
Dialogue: 0,0:36:25.97,0:36:27.15,Default,,0,0,0,,this basic flow to work.
Dialogue: 0,0:36:27.75,0:36:31.20,Default,,0,0,0,,So, let's see what happens.
Dialogue: 0,0:36:31.72,0:36:33.31,Default,,0,0,0,,Now, the first thing you'll
Dialogue: 0,0:36:33.31,0:36:34.30,Default,,0,0,0,,notice is that now there's a
Dialogue: 0,0:36:34.30,0:36:35.47,Default,,0,0,0,,green plus-three badge.
Dialogue: 0,0:36:35.58,0:36:36.60,Default,,0,0,0,,This indicates that there is
Dialogue: 0,0:36:36.60,0:36:37.81,Default,,0,0,0,,indeed an action to be
Dialogue: 0,0:36:37.81,0:36:39.49,Default,,0,0,0,,performed, and that action, of
Dialogue: 0,0:36:39.49,0:36:41.66,Default,,0,0,0,,course, is inserting new images.
Dialogue: 0,0:36:42.28,0:36:42.92,Default,,0,0,0,,So, that works.
Dialogue: 0,0:36:43.45,0:36:44.29,Default,,0,0,0,,It's very basic, though.
Dialogue: 0,0:36:44.64,0:36:46.48,Default,,0,0,0,,There is now another feature I'd
Dialogue: 0,0:36:46.48,0:36:47.71,Default,,0,0,0,,like to highlight while we're
Dialogue: 0,0:36:47.96,0:36:48.07,Default,,0,0,0,,here.
Dialogue: 0,0:36:48.37,0:36:49.78,Default,,0,0,0,,So, you might have noticed this
Dialogue: 0,0:36:49.92,0:36:50.95,Default,,0,0,0,,area at the bottom that says
Dialogue: 0,0:36:50.95,0:36:52.55,Default,,0,0,0,,Drop here to delete photos.
Dialogue: 0,0:36:53.29,0:36:54.37,Default,,0,0,0,,It does what it says on the tin.
Dialogue: 0,0:36:55.02,0:36:56.33,Default,,0,0,0,,When I drop it here, we remove
Dialogue: 0,0:36:56.33,0:36:57.23,Default,,0,0,0,,it from the top area.
Dialogue: 0,0:36:57.28,0:36:58.89,Default,,0,0,0,,So, that's kind of nice, but the
Dialogue: 0,0:36:58.89,0:36:59.96,Default,,0,0,0,,thing is, we haven't done any
Dialogue: 0,0:36:59.96,0:37:01.39,Default,,0,0,0,,customization around the drop
Dialogue: 0,0:37:01.39,0:37:02.98,Default,,0,0,0,,preview yet, and so by default,
Dialogue: 0,0:37:03.16,0:37:04.67,Default,,0,0,0,,images just kind of fly towards
Dialogue: 0,0:37:04.67,0:37:05.71,Default,,0,0,0,,the center and fade out.
Dialogue: 0,0:37:06.17,0:37:07.46,Default,,0,0,0,,I'm going to now hand it back to
Dialogue: 0,0:37:07.46,0:37:09.38,Default,,0,0,0,,Tom to see what we can do to
Dialogue: 0,0:37:09.38,0:37:09.98,Default,,0,0,0,,make this better.
Dialogue: 0,0:37:10.52,0:37:15.55,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:37:16.05,0:37:16.79,Default,,0,0,0,,>> Turns out, you don't need a
Dialogue: 0,0:37:16.79,0:37:18.78,Default,,0,0,0,,lot of codes to perform a drop.
Dialogue: 0,0:37:18.78,0:37:20.78,Default,,0,0,0,,So, let's talk about drop
Dialogue: 0,0:37:20.78,0:37:22.43,Default,,0,0,0,,previews and their animations.
Dialogue: 0,0:37:22.95,0:37:25.36,Default,,0,0,0,,Let's bring back this diagram,
Dialogue: 0,0:37:25.36,0:37:28.10,Default,,0,0,0,,but it turns out that it's a bit
Dialogue: 0,0:37:28.10,0:37:29.99,Default,,0,0,0,,more of a simplification, and
Dialogue: 0,0:37:29.99,0:37:30.84,Default,,0,0,0,,there's more going on.
Dialogue: 0,0:37:30.84,0:37:31.84,Default,,0,0,0,,So, let's bring this
Dialogue: 0,0:37:31.84,0:37:33.63,Default,,0,0,0,,concludeDrop to the side, and
Dialogue: 0,0:37:33.63,0:37:35.10,Default,,0,0,0,,let's talk about what's going on
Dialogue: 0,0:37:35.16,0:37:35.65,Default,,0,0,0,,in between.
Dialogue: 0,0:37:36.81,0:37:37.94,Default,,0,0,0,,Started loading our data, and
Dialogue: 0,0:37:38.67,0:37:40.03,Default,,0,0,0,,once we've performed our
Dialogue: 0,0:37:40.03,0:37:42.44,Default,,0,0,0,,completes, we ask you for a
Dialogue: 0,0:37:42.44,0:37:44.06,Default,,0,0,0,,preview for dropping the item by
Dialogue: 0,0:37:44.06,0:37:45.48,Default,,0,0,0,,calling previewForDropping item
Dialogue: 0,0:37:45.48,0:37:46.91,Default,,0,0,0,,with defaultPreview, giving you
Dialogue: 0,0:37:46.91,0:37:47.74,Default,,0,0,0,,a default preview.
Dialogue: 0,0:37:48.31,0:37:49.53,Default,,0,0,0,,You can return a new preview
Dialogue: 0,0:37:49.53,0:37:51.75,Default,,0,0,0,,here, or return the default
Dialogue: 0,0:37:51.75,0:37:53.15,Default,,0,0,0,,preview, or nil, whatever you
Dialogue: 0,0:37:53.15,0:37:53.53,Default,,0,0,0,,want.
Dialogue: 0,0:37:53.83,0:37:54.80,Default,,0,0,0,,More about that later.
Dialogue: 0,0:37:54.80,0:37:58.06,Default,,0,0,0,,So, any of the previews we get,
Dialogue: 0,0:37:58.06,0:38:00.05,Default,,0,0,0,,or the defaults we have, we'll
Dialogue: 0,0:38:00.05,0:38:01.84,Default,,0,0,0,,use these and animate those down
Dialogue: 0,0:38:01.88,0:38:03.85,Default,,0,0,0,,into your view, so the user can
Dialogue: 0,0:38:03.85,0:38:04.93,Default,,0,0,0,,actually see something dropping.
Dialogue: 0,0:38:06.08,0:38:08.06,Default,,0,0,0,,While that's going on, we'll
Dialogue: 0,0:38:08.06,0:38:09.81,Default,,0,0,0,,animate willDropWith animator so
Dialogue: 0,0:38:09.81,0:38:11.22,Default,,0,0,0,,you can animate alongside.
Dialogue: 0,0:38:12.37,0:38:13.75,Default,,0,0,0,,Now, as Robb mentioned before,
Dialogue: 0,0:38:14.66,0:38:16.10,Default,,0,0,0,,same as in the lift side, the
Dialogue: 0,0:38:16.10,0:38:17.30,Default,,0,0,0,,drop side is live, too.
Dialogue: 0,0:38:17.91,0:38:19.59,Default,,0,0,0,,While you're dragging, there is
Dialogue: 0,0:38:19.59,0:38:20.71,Default,,0,0,0,,a snapshot, but while you're
Dialogue: 0,0:38:20.71,0:38:21.96,Default,,0,0,0,,dropping or canceling or
Dialogue: 0,0:38:21.96,0:38:23.54,Default,,0,0,0,,lifting, the view is live, so
Dialogue: 0,0:38:23.54,0:38:25.07,Default,,0,0,0,,you can also update the view you
Dialogue: 0,0:38:25.07,0:38:27.04,Default,,0,0,0,,give us here, or animate
Dialogue: 0,0:38:27.04,0:38:29.53,Default,,0,0,0,,alongside any other UI you have.
Dialogue: 0,0:38:31.68,0:38:33.56,Default,,0,0,0,,Those animations finish, and
Dialogue: 0,0:38:33.70,0:38:34.83,Default,,0,0,0,,we'll call concludeDrop to
Dialogue: 0,0:38:34.83,0:38:36.83,Default,,0,0,0,,indicate to you that the drop is
Dialogue: 0,0:38:36.83,0:38:38.50,Default,,0,0,0,,finished and, as far as the user
Dialogue: 0,0:38:38.50,0:38:39.96,Default,,0,0,0,,is concerned, they can continue
Dialogue: 0,0:38:39.96,0:38:40.98,Default,,0,0,0,,with their business.
Dialogue: 0,0:38:41.96,0:38:46.43,Default,,0,0,0,,Now, again, this does not mean
Dialogue: 0,0:38:46.47,0:38:48.08,Default,,0,0,0,,that the data is already there.
Dialogue: 0,0:38:48.52,0:38:49.85,Default,,0,0,0,,You can see here, and that's
Dialogue: 0,0:38:50.07,0:38:51.75,Default,,0,0,0,,just two examples, there's one
Dialogue: 0,0:38:51.80,0:38:53.09,Default,,0,0,0,,very long load object call
Dialogue: 0,0:38:53.09,0:38:54.19,Default,,0,0,0,,that's going on beyond
Dialogue: 0,0:38:54.33,0:38:55.00,Default,,0,0,0,,concludeDrop.
Dialogue: 0,0:38:55.39,0:38:56.80,Default,,0,0,0,,There's one that, like, ends in
Dialogue: 0,0:38:56.80,0:38:58.47,Default,,0,0,0,,the middle between willAnimate
Dialogue: 0,0:38:58.47,0:39:00.17,Default,,0,0,0,,and previewForDropping, and even
Dialogue: 0,0:39:00.17,0:39:01.65,Default,,0,0,0,,the previews are animating at a
Dialogue: 0,0:39:01.65,0:39:02.92,Default,,0,0,0,,different duration.
Dialogue: 0,0:39:03.26,0:39:04.43,Default,,0,0,0,,That's because, depending on
Dialogue: 0,0:39:04.43,0:39:06.11,Default,,0,0,0,,what target you give us, they
Dialogue: 0,0:39:06.11,0:39:07.66,Default,,0,0,0,,might take longer to travel
Dialogue: 0,0:39:07.66,0:39:07.96,Default,,0,0,0,,there.
Dialogue: 0,0:39:08.78,0:39:09.78,Default,,0,0,0,,Something that's farther away
Dialogue: 0,0:39:09.78,0:39:11.28,Default,,0,0,0,,from the finger will take a
Dialogue: 0,0:39:11.28,0:39:12.34,Default,,0,0,0,,little bit longer than something
Dialogue: 0,0:39:12.34,0:39:13.55,Default,,0,0,0,,that's closer to your finger.
Dialogue: 0,0:39:14.14,0:39:15.02,Default,,0,0,0,,So, keep this in mind.
Dialogue: 0,0:39:15.27,0:39:17.03,Default,,0,0,0,,The animations do not take the
Dialogue: 0,0:39:17.03,0:39:17.59,Default,,0,0,0,,same time.
Dialogue: 0,0:39:17.77,0:39:18.72,Default,,0,0,0,,They are slightly different.
Dialogue: 0,0:39:22.14,0:39:23.87,Default,,0,0,0,,So, we have drop previews, and
Dialogue: 0,0:39:23.87,0:39:25.63,Default,,0,0,0,,as Wenson already showed, we
Dialogue: 0,0:39:25.63,0:39:26.89,Default,,0,0,0,,also have cancel previews.
Dialogue: 0,0:39:26.89,0:39:28.17,Default,,0,0,0,,They look almost exactly the
Dialogue: 0,0:39:28.17,0:39:29.51,Default,,0,0,0,,same, and the same goes for
Dialogue: 0,0:39:29.51,0:39:30.41,Default,,0,0,0,,lifting previews.
Dialogue: 0,0:39:30.41,0:39:32.28,Default,,0,0,0,,It's the same approach, but just
Dialogue: 0,0:39:32.28,0:39:33.21,Default,,0,0,0,,different locations.
Dialogue: 0,0:39:34.64,0:39:36.04,Default,,0,0,0,,Wenson's previews demos showed
Dialogue: 0,0:39:36.04,0:39:37.19,Default,,0,0,0,,that it's probably better to
Dialogue: 0,0:39:37.19,0:39:39.46,Default,,0,0,0,,implement previewForCanceling
Dialogue: 0,0:39:39.46,0:39:40.57,Default,,0,0,0,,item, because it gives a better
Dialogue: 0,0:39:40.57,0:39:41.50,Default,,0,0,0,,user experience.
Dialogue: 0,0:39:41.50,0:39:43.04,Default,,0,0,0,,You can fly back the items.
Dialogue: 0,0:39:43.83,0:39:45.88,Default,,0,0,0,,When you update the UI, you can,
Dialogue: 0,0:39:45.88,0:39:46.87,Default,,0,0,0,,I mean, the user can navigate
Dialogue: 0,0:39:46.87,0:39:48.52,Default,,0,0,0,,around so your original UI can
Dialogue: 0,0:39:48.52,0:39:50.81,Default,,0,0,0,,be very different than the one
Dialogue: 0,0:39:50.81,0:39:52.48,Default,,0,0,0,,that you started at, so keep
Dialogue: 0,0:39:52.48,0:39:56.18,Default,,0,0,0,,this in mind.
Dialogue: 0,0:39:56.36,0:39:56.89,Default,,0,0,0,,Additionally,
Dialogue: 0,0:39:56.89,0:39:58.50,Default,,0,0,0,,willAnimateDropWith animator is
Dialogue: 0,0:39:58.57,0:39:59.38,Default,,0,0,0,,very similar to
Dialogue: 0,0:39:59.38,0:40:00.98,Default,,0,0,0,,willAnimateCancelWith animator.
Dialogue: 0,0:40:01.17,0:40:03.96,Default,,0,0,0,,And again, different occasions,
Dialogue: 0,0:40:03.96,0:40:04.92,Default,,0,0,0,,but the same approach.
Dialogue: 0,0:40:05.49,0:40:07.48,Default,,0,0,0,,The UIDragAnimating protocol
Dialogue: 0,0:40:07.48,0:40:08.82,Default,,0,0,0,,here is very similar to
Dialogue: 0,0:40:08.82,0:40:10.63,Default,,0,0,0,,UIViewPropertyAnimator, so
Dialogue: 0,0:40:10.63,0:40:12.63,Default,,0,0,0,,you'll be right at home, there.
Dialogue: 0,0:40:13.25,0:40:14.99,Default,,0,0,0,,Now, let's talk about this
Dialogue: 0,0:40:14.99,0:40:15.96,Default,,0,0,0,,default preview we give you.
Dialogue: 0,0:40:15.96,0:40:17.02,Default,,0,0,0,,Why do we give it to you?
Dialogue: 0,0:40:17.09,0:40:20.64,Default,,0,0,0,,You could just return it here,
Dialogue: 0,0:40:20.78,0:40:21.56,Default,,0,0,0,,and you get this.
Dialogue: 0,0:40:22.04,0:40:25.21,Default,,0,0,0,,Well, that's fine, but that's
Dialogue: 0,0:40:25.21,0:40:26.09,Default,,0,0,0,,not why we give it to you.
Dialogue: 0,0:40:26.33,0:40:27.73,Default,,0,0,0,,So, if you do want the default
Dialogue: 0,0:40:27.73,0:40:28.82,Default,,0,0,0,,preview, and you want the
Dialogue: 0,0:40:28.82,0:40:31.09,Default,,0,0,0,,default animations, just return
Dialogue: 0,0:40:31.09,0:40:31.52,Default,,0,0,0,,nil here.
Dialogue: 0,0:40:31.52,0:40:32.81,Default,,0,0,0,,That indicates to the system
Dialogue: 0,0:40:33.09,0:40:34.04,Default,,0,0,0,,that you're fine with the
Dialogue: 0,0:40:34.04,0:40:36.07,Default,,0,0,0,,defaults and the system can do
Dialogue: 0,0:40:36.07,0:40:37.56,Default,,0,0,0,,what it wants to animate
Dialogue: 0,0:40:37.56,0:40:38.78,Default,,0,0,0,,everything down, and how it
Dialogue: 0,0:40:38.78,0:40:39.34,Default,,0,0,0,,represents it.
Dialogue: 0,0:40:40.24,0:40:41.32,Default,,0,0,0,,So, why do we give you this
Dialogue: 0,0:40:41.32,0:40:42.00,Default,,0,0,0,,default preview?
Dialogue: 0,0:40:42.99,0:40:44.43,Default,,0,0,0,,Well, you can retarget it.
Dialogue: 0,0:40:44.47,0:40:46.63,Default,,0,0,0,,That's why we, what we want you
Dialogue: 0,0:40:46.63,0:40:46.90,Default,,0,0,0,,to do.
Dialogue: 0,0:40:46.90,0:40:47.95,Default,,0,0,0,,If you retarget it, you know
Dialogue: 0,0:40:47.95,0:40:49.11,Default,,0,0,0,,where it's going to be inside
Dialogue: 0,0:40:49.11,0:40:49.51,Default,,0,0,0,,your view.
Dialogue: 0,0:40:49.86,0:40:51.44,Default,,0,0,0,,We'll animate it down into the
Dialogue: 0,0:40:51.44,0:40:53.52,Default,,0,0,0,,target you specified, and that's
Dialogue: 0,0:40:53.52,0:40:55.02,Default,,0,0,0,,a better experience.
Dialogue: 0,0:40:55.56,0:40:57.06,Default,,0,0,0,,That only works, of course, if
Dialogue: 0,0:40:57.06,0:40:58.27,Default,,0,0,0,,you know where to target to.
Dialogue: 0,0:40:58.27,0:40:59.47,Default,,0,0,0,,If you don't know the location,
Dialogue: 0,0:40:59.81,0:41:00.66,Default,,0,0,0,,you can't retarget.
Dialogue: 0,0:41:02.04,0:41:04.45,Default,,0,0,0,,And finally, you can create your
Dialogue: 0,0:41:04.45,0:41:06.65,Default,,0,0,0,,own custom preview and make your
Dialogue: 0,0:41:06.65,0:41:07.18,Default,,0,0,0,,own UI here.
Dialogue: 0,0:41:07.18,0:41:08.51,Default,,0,0,0,,You're free to do what you want.
Dialogue: 0,0:41:09.33,0:41:11.34,Default,,0,0,0,,The preview you give us will
Dialogue: 0,0:41:11.34,0:41:12.42,Default,,0,0,0,,animate to the target you
Dialogue: 0,0:41:12.42,0:41:13.03,Default,,0,0,0,,specified.
Dialogue: 0,0:41:14.32,0:41:15.57,Default,,0,0,0,,There's a few limits here.
Dialogue: 0,0:41:15.57,0:41:16.91,Default,,0,0,0,,If there's fewer items in the
Dialogue: 0,0:41:16.91,0:41:18.47,Default,,0,0,0,,flock, then we'll ask you a
Dialogue: 0,0:41:18.47,0:41:20.13,Default,,0,0,0,,preview for each of the items
Dialogue: 0,0:41:20.41,0:41:21.46,Default,,0,0,0,,and give you an alongside
Dialogue: 0,0:41:21.46,0:41:23.18,Default,,0,0,0,,animation for each of the items,
Dialogue: 0,0:41:23.18,0:41:25.84,Default,,0,0,0,,so depending on how much they
Dialogue: 0,0:41:25.84,0:41:27.26,Default,,0,0,0,,are, you'll get these.
Dialogue: 0,0:41:27.76,0:41:31.42,Default,,0,0,0,,If there are many items in the
Dialogue: 0,0:41:31.42,0:41:33.78,Default,,0,0,0,,flock, or in the session, then
Dialogue: 0,0:41:33.78,0:41:35.43,Default,,0,0,0,,we'll use the default previews
Dialogue: 0,0:41:35.43,0:41:37.60,Default,,0,0,0,,for all of them, so we won't ask
Dialogue: 0,0:41:37.60,0:41:38.39,Default,,0,0,0,,you for preview.
Dialogue: 0,0:41:39.05,0:41:40.92,Default,,0,0,0,,We do give you one alongside
Dialogue: 0,0:41:40.92,0:41:42.98,Default,,0,0,0,,animation to go with that one
Dialogue: 0,0:41:42.98,0:41:44.70,Default,,0,0,0,,animation for all the items.
Dialogue: 0,0:41:45.35,0:41:47.32,Default,,0,0,0,,Don't take my word for it.
Dialogue: 0,0:41:47.47,0:41:49.05,Default,,0,0,0,,Wenson's going to show how to do
Dialogue: 0,0:41:49.87,0:41:49.98,Default,,0,0,0,,this.
Dialogue: 0,0:41:50.52,0:41:54.23,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:41:54.73,0:41:55.49,Default,,0,0,0,,>> Thanks again, Tom.
Dialogue: 0,0:41:56.30,0:41:58.21,Default,,0,0,0,,So, to jog your memory, the part
Dialogue: 0,0:41:58.21,0:41:59.78,Default,,0,0,0,,that we'd like to polish is this
Dialogue: 0,0:41:59.78,0:42:00.61,Default,,0,0,0,,drop animation.
Dialogue: 0,0:42:01.41,0:42:02.40,Default,,0,0,0,,Let's find out how to do that.
Dialogue: 0,0:42:03.55,0:42:04.80,Default,,0,0,0,,So, we're now in Droppable
Dialogue: 0,0:42:04.80,0:42:06.62,Default,,0,0,0,,Delete View, and over here,
Dialogue: 0,0:42:07.11,0:42:08.37,Default,,0,0,0,,first thing we're going to do is
Dialogue: 0,0:42:08.37,0:42:09.73,Default,,0,0,0,,implement a previewForDropping.
Dialogue: 0,0:42:11.08,0:42:12.31,Default,,0,0,0,,So, given the item, we're going
Dialogue: 0,0:42:12.31,0:42:13.45,Default,,0,0,0,,to create this drag preview
Dialogue: 0,0:42:13.45,0:42:13.84,Default,,0,0,0,,target.
Dialogue: 0,0:42:14.87,0:42:16.66,Default,,0,0,0,,Now, this looks very similar to
Dialogue: 0,0:42:16.66,0:42:17.90,Default,,0,0,0,,what we've done before, only
Dialogue: 0,0:42:17.90,0:42:19.17,Default,,0,0,0,,this time, we have an explicit
Dialogue: 0,0:42:19.17,0:42:21.32,Default,,0,0,0,,transform set, so what this is
Dialogue: 0,0:42:21.32,0:42:22.96,Default,,0,0,0,,going to do is animate our
Dialogue: 0,0:42:22.96,0:42:24.50,Default,,0,0,0,,default preview's width and
Dialogue: 0,0:42:24.50,0:42:26.55,Default,,0,0,0,,height to 10% of its original
Dialogue: 0,0:42:26.55,0:42:26.94,Default,,0,0,0,,value.
Dialogue: 0,0:42:27.16,0:42:28.37,Default,,0,0,0,,So, you're going to specify that
Dialogue: 0,0:42:28.37,0:42:28.85,Default,,0,0,0,,transform.
Dialogue: 0,0:42:28.85,0:42:29.83,Default,,0,0,0,,We're also going to set the
Dialogue: 0,0:42:29.83,0:42:31.51,Default,,0,0,0,,center to the be the iconView
Dialogue: 0,0:42:31.51,0:42:31.81,Default,,0,0,0,,center.
Dialogue: 0,0:42:31.81,0:42:33.66,Default,,0,0,0,,The iconView is, if you go back
Dialogue: 0,0:42:33.66,0:42:35.34,Default,,0,0,0,,to the app, this little trash
Dialogue: 0,0:42:35.34,0:42:37.06,Default,,0,0,0,,can at the very bottom, here, on
Dialogue: 0,0:42:37.06,0:42:37.47,Default,,0,0,0,,the left.
Dialogue: 0,0:42:38.63,0:42:39.87,Default,,0,0,0,,So, we're going to animate to
Dialogue: 0,0:42:39.87,0:42:41.26,Default,,0,0,0,,there, and we're going to
Dialogue: 0,0:42:41.26,0:42:42.97,Default,,0,0,0,,retarget the default preview to
Dialogue: 0,0:42:42.97,0:42:44.52,Default,,0,0,0,,that location using this target.
Dialogue: 0,0:42:44.75,0:42:46.30,Default,,0,0,0,,But wait, there's more.
Dialogue: 0,0:42:47.09,0:42:49.49,Default,,0,0,0,,We can actually do a little more
Dialogue: 0,0:42:49.49,0:42:50.01,Default,,0,0,0,,polish here.
Dialogue: 0,0:42:50.63,0:42:52.03,Default,,0,0,0,,Let's add an alongside animation
Dialogue: 0,0:42:52.03,0:42:53.02,Default,,0,0,0,,on the drop, as well.
Dialogue: 0,0:42:53.27,0:42:55.69,Default,,0,0,0,,So, let's add a transform to the
Dialogue: 0,0:42:55.69,0:42:57.77,Default,,0,0,0,,iconView to the trash can as the
Dialogue: 0,0:42:57.77,0:42:59.08,Default,,0,0,0,,drop is taking place.
Dialogue: 0,0:42:59.08,0:43:00.11,Default,,0,0,0,,So, we're going to transform it
Dialogue: 0,0:43:00.15,0:43:01.99,Default,,0,0,0,,to 1.25 scale.
Dialogue: 0,0:43:01.99,0:43:03.18,Default,,0,0,0,,That's going to make it grow
Dialogue: 0,0:43:03.18,0:43:04.68,Default,,0,0,0,,slightly, by 25%.
Dialogue: 0,0:43:05.72,0:43:06.84,Default,,0,0,0,,Now, we don't want to have it
Dialogue: 0,0:43:06.84,0:43:09.75,Default,,0,0,0,,permanently at 125% size, so
Dialogue: 0,0:43:09.75,0:43:10.89,Default,,0,0,0,,we're going to set the transform
Dialogue: 0,0:43:10.89,0:43:12.32,Default,,0,0,0,,back to the identity when we
Dialogue: 0,0:43:12.32,0:43:13.65,Default,,0,0,0,,conclude the drop.
Dialogue: 0,0:43:14.59,0:43:16.57,Default,,0,0,0,,So, with these little tweaks,
Dialogue: 0,0:43:17.29,0:43:18.66,Default,,0,0,0,,should be able to see a little
Dialogue: 0,0:43:18.66,0:43:20.01,Default,,0,0,0,,more polished experience.
Dialogue: 0,0:43:20.51,0:43:23.22,Default,,0,0,0,,I'm going to go back and drag
Dialogue: 0,0:43:23.22,0:43:23.83,Default,,0,0,0,,some photos here.
Dialogue: 0,0:43:24.08,0:43:25.39,Default,,0,0,0,,So, pay attention to what
Dialogue: 0,0:43:25.39,0:43:26.92,Default,,0,0,0,,happens to the photo when I drop
Dialogue: 0,0:43:26.92,0:43:27.03,Default,,0,0,0,,it.
Dialogue: 0,0:43:27.89,0:43:29.28,Default,,0,0,0,,You see, this time it goes into
Dialogue: 0,0:43:29.28,0:43:30.74,Default,,0,0,0,,the trash can and disappears.
Dialogue: 0,0:43:31.17,0:43:32.42,Default,,0,0,0,,And, speaking of the trash can,
Dialogue: 0,0:43:32.93,0:43:34.33,Default,,0,0,0,,you also see that kind of grow
Dialogue: 0,0:43:34.33,0:43:36.31,Default,,0,0,0,,in size and then shrink when the
Dialogue: 0,0:43:36.31,0:43:37.26,Default,,0,0,0,,drop is concluded.
Dialogue: 0,0:43:38.30,0:43:39.38,Default,,0,0,0,,So, that looks a lot better than
Dialogue: 0,0:43:39.38,0:43:40.00,Default,,0,0,0,,it did before.
Dialogue: 0,0:43:40.00,0:43:40.18,Default,,0,0,0,,Now.
Dialogue: 0,0:43:41.52,0:43:44.56,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:43:45.06,0:43:45.82,Default,,0,0,0,,So, I'd like to now show you
Dialogue: 0,0:43:45.82,0:43:47.08,Default,,0,0,0,,something that might not look as
Dialogue: 0,0:43:47.08,0:43:47.27,Default,,0,0,0,,good.
Dialogue: 0,0:43:48.37,0:43:50.40,Default,,0,0,0,,So, in this case, this is the
Dialogue: 0,0:43:50.40,0:43:52.13,Default,,0,0,0,,last panel of Drag Source.
Dialogue: 0,0:43:52.43,0:43:53.68,Default,,0,0,0,,We have Slow Draggable Image
Dialogue: 0,0:43:53.68,0:43:53.93,Default,,0,0,0,,Views.
Dialogue: 0,0:43:53.93,0:43:55.11,Default,,0,0,0,,Now, they're called slow because
Dialogue: 0,0:43:55.11,0:43:56.45,Default,,0,0,0,,they're stimulating items coming
Dialogue: 0,0:43:56.45,0:43:58.73,Default,,0,0,0,,in from a remote server far, far
Dialogue: 0,0:43:58.73,0:43:59.01,Default,,0,0,0,,away.
Dialogue: 0,0:44:00.18,0:44:01.88,Default,,0,0,0,,If I drop these four photos into
Dialogue: 0,0:44:01.88,0:44:03.35,Default,,0,0,0,,here, it's going to take a
Dialogue: 0,0:44:03.35,0:44:04.66,Default,,0,0,0,,really long time to load.
Dialogue: 0,0:44:05.12,0:44:07.30,Default,,0,0,0,,So long, in fact, that we will
Dialogue: 0,0:44:07.30,0:44:08.59,Default,,0,0,0,,begin showing this app modal
Dialogue: 0,0:44:08.59,0:44:10.12,Default,,0,0,0,,dialog that at least allows the
Dialogue: 0,0:44:10.12,0:44:10.86,Default,,0,0,0,,user to cancel.
Dialogue: 0,0:44:12.14,0:44:13.57,Default,,0,0,0,,But, as is the theme of this
Dialogue: 0,0:44:13.57,0:44:15.29,Default,,0,0,0,,presentation, this can also be
Dialogue: 0,0:44:15.29,0:44:16.12,Default,,0,0,0,,customized away.
Dialogue: 0,0:44:16.12,0:44:17.65,Default,,0,0,0,,So, I'm going to hand it back to
Dialogue: 0,0:44:17.65,0:44:19.81,Default,,0,0,0,,Tom to see how we can do that.
Dialogue: 0,0:44:20.52,0:44:24.56,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:44:25.06,0:44:27.42,Default,,0,0,0,,>> So, how do we deal with slow
Dialogue: 0,0:44:27.42,0:44:28.11,Default,,0,0,0,,data delivery?
Dialogue: 0,0:44:28.69,0:44:31.52,Default,,0,0,0,,Like I mentioned before, data
Dialogue: 0,0:44:31.52,0:44:33.15,Default,,0,0,0,,loads are always asynchronous.
Dialogue: 0,0:44:33.86,0:44:35.03,Default,,0,0,0,,So, there's two disconnected
Dialogue: 0,0:44:35.03,0:44:35.95,Default,,0,0,0,,timelines at play here.
Dialogue: 0,0:44:35.99,0:44:37.90,Default,,0,0,0,,There's data loading, one goal,
Dialogue: 0,0:44:37.90,0:44:39.17,Default,,0,0,0,,and there's animating the drop
Dialogue: 0,0:44:39.17,0:44:40.65,Default,,0,0,0,,previews, and they're not the
Dialogue: 0,0:44:40.65,0:44:41.00,Default,,0,0,0,,same.
Dialogue: 0,0:44:42.02,0:44:43.28,Default,,0,0,0,,Bring back this diagram, you can
Dialogue: 0,0:44:43.40,0:44:45.54,Default,,0,0,0,,clearly see that there's not one
Dialogue: 0,0:44:45.54,0:44:47.28,Default,,0,0,0,,line here that's equally in
Dialogue: 0,0:44:47.28,0:44:47.81,Default,,0,0,0,,size.
Dialogue: 0,0:44:48.49,0:44:49.85,Default,,0,0,0,,The loadObject calls take
Dialogue: 0,0:44:49.85,0:44:51.21,Default,,0,0,0,,different time, and the preview
Dialogue: 0,0:44:51.21,0:44:52.46,Default,,0,0,0,,animations take different time.
Dialogue: 0,0:44:53.13,0:44:55.73,Default,,0,0,0,,And, you can also see that we
Dialogue: 0,0:44:55.82,0:44:56.92,Default,,0,0,0,,don't have data yet at the
Dialogue: 0,0:44:56.92,0:44:58.67,Default,,0,0,0,,moment we ask you for a preview.
Dialogue: 0,0:45:00.84,0:45:02.73,Default,,0,0,0,,One use case for this, or one
Dialogue: 0,0:45:02.96,0:45:04.31,Default,,0,0,0,,case that you might run into if
Dialogue: 0,0:45:04.31,0:45:06.24,Default,,0,0,0,,you drag photos from Photos into
Dialogue: 0,0:45:06.24,0:45:08.14,Default,,0,0,0,,an email, and those photos might
Dialogue: 0,0:45:08.14,0:45:09.61,Default,,0,0,0,,be stored on iCloud, because
Dialogue: 0,0:45:09.61,0:45:10.62,Default,,0,0,0,,we're saving space on your
Dialogue: 0,0:45:10.62,0:45:11.21,Default,,0,0,0,,device.
Dialogue: 0,0:45:12.13,0:45:14.45,Default,,0,0,0,,While you're dropping, well show
Dialogue: 0,0:45:14.45,0:45:16.91,Default,,0,0,0,,the app modal UI, giving the
Dialogue: 0,0:45:16.95,0:45:18.69,Default,,0,0,0,,user some sense of progress and
Dialogue: 0,0:45:18.69,0:45:19.85,Default,,0,0,0,,a way to cancel out.
Dialogue: 0,0:45:21.81,0:45:23.32,Default,,0,0,0,,That's a real-life use case.
Dialogue: 0,0:45:24.79,0:45:26.78,Default,,0,0,0,,So, you saw this Cancel button,
Dialogue: 0,0:45:26.78,0:45:28.67,Default,,0,0,0,,because we don't want to user to
Dialogue: 0,0:45:28.67,0:45:29.59,Default,,0,0,0,,be waiting forever.
Dialogue: 0,0:45:29.77,0:45:31.31,Default,,0,0,0,,We don't know how long the data
Dialogue: 0,0:45:31.31,0:45:32.56,Default,,0,0,0,,will take to arrive.
Dialogue: 0,0:45:33.23,0:45:34.45,Default,,0,0,0,,Might be two seconds, might be
Dialogue: 0,0:45:34.45,0:45:35.06,Default,,0,0,0,,two minutes.
Dialogue: 0,0:45:35.06,0:45:36.59,Default,,0,0,0,,So, we give the user a way to
Dialogue: 0,0:45:36.59,0:45:37.06,Default,,0,0,0,,cancel.
Dialogue: 0,0:45:37.43,0:45:38.95,Default,,0,0,0,,If that happens, we'll call the
Dialogue: 0,0:45:38.95,0:45:40.75,Default,,0,0,0,,completion blocks with nil data
Dialogue: 0,0:45:40.75,0:45:42.00,Default,,0,0,0,,and an error set so you can
Dialogue: 0,0:45:42.00,0:45:43.35,Default,,0,0,0,,detect this.
Dialogue: 0,0:45:43.95,0:45:46.25,Default,,0,0,0,,Additionally, both sessions and
Dialogue: 0,0:45:46.25,0:45:47.35,Default,,0,0,0,,item providers provide
Dialogue: 0,0:45:47.47,0:45:48.33,Default,,0,0,0,,ProgressReporting.
Dialogue: 0,0:45:48.33,0:45:48.82,Default,,0,0,0,,The session is
Dialogue: 0,0:45:48.82,0:45:50.00,Default,,0,0,0,,ProgressReporting, so you can
Dialogue: 0,0:45:50.20,0:45:51.35,Default,,0,0,0,,observe its progress.
Dialogue: 0,0:45:51.65,0:45:53.35,Default,,0,0,0,,And, the item provider load
Dialogue: 0,0:45:53.35,0:45:55.60,Default,,0,0,0,,methods all return a progress
Dialogue: 0,0:45:55.60,0:45:57.37,Default,,0,0,0,,object you can also use.
Dialogue: 0,0:45:59.52,0:46:00.88,Default,,0,0,0,,Progress has a cancellation
Dialogue: 0,0:46:00.88,0:46:02.58,Default,,0,0,0,,handler which is a perfect spot
Dialogue: 0,0:46:02.58,0:46:03.78,Default,,0,0,0,,to handle the cancel.
Dialogue: 0,0:46:04.51,0:46:06.27,Default,,0,0,0,,Add you code there to handle any
Dialogue: 0,0:46:06.27,0:46:08.31,Default,,0,0,0,,of the items coming in and not
Dialogue: 0,0:46:08.31,0:46:09.70,Default,,0,0,0,,being there, and you can remove
Dialogue: 0,0:46:09.70,0:46:11.66,Default,,0,0,0,,them again from your modal.
Dialogue: 0,0:46:13.11,0:46:14.92,Default,,0,0,0,,Now, this also brings us to
Dialogue: 0,0:46:14.92,0:46:16.25,Default,,0,0,0,,showing custom progress, like
Dialogue: 0,0:46:16.25,0:46:17.41,Default,,0,0,0,,Wenson said before.
Dialogue: 0,0:46:17.62,0:46:20.00,Default,,0,0,0,,If you don't want this app modal
Dialogue: 0,0:46:20.00,0:46:21.39,Default,,0,0,0,,UI, you can turn it off by
Dialogue: 0,0:46:21.39,0:46:22.09,Default,,0,0,0,,setting session
Dialogue: 0,0:46:22.18,0:46:23.69,Default,,0,0,0,,progressIndicatorStyle to none,
Dialogue: 0,0:46:23.69,0:46:25.57,Default,,0,0,0,,and then we won't show the UI at
Dialogue: 0,0:46:25.63,0:46:26.29,Default,,0,0,0,,all.
Dialogue: 0,0:46:26.83,0:46:28.41,Default,,0,0,0,,Now, this does mean you have to
Dialogue: 0,0:46:28.41,0:46:29.79,Default,,0,0,0,,provide that experience to the
Dialogue: 0,0:46:29.79,0:46:30.92,Default,,0,0,0,,user, yourself.
Dialogue: 0,0:46:31.30,0:46:32.47,Default,,0,0,0,,You can do this by observing the
Dialogue: 0,0:46:32.47,0:46:33.30,Default,,0,0,0,,progress again.
Dialogue: 0,0:46:33.47,0:46:34.19,Default,,0,0,0,,There's a progress on the
Dialogue: 0,0:46:34.19,0:46:35.79,Default,,0,0,0,,session, and the per-item
Dialogue: 0,0:46:35.79,0:46:36.97,Default,,0,0,0,,progress returned by the item
Dialogue: 0,0:46:36.97,0:46:37.62,Default,,0,0,0,,providers.
Dialogue: 0,0:46:38.41,0:46:39.64,Default,,0,0,0,,If you do this, use this
Dialogue: 0,0:46:39.67,0:46:41.30,Default,,0,0,0,,progress to indicate some UI
Dialogue: 0,0:46:41.30,0:46:43.91,Default,,0,0,0,,there where the user is, where
Dialogue: 0,0:46:44.31,0:46:45.99,Default,,0,0,0,,you can see, for each item, if
Dialogue: 0,0:46:45.99,0:46:47.71,Default,,0,0,0,,it's loading or, in general, for
Dialogue: 0,0:46:47.71,0:46:49.41,Default,,0,0,0,,your view, but please allow the
Dialogue: 0,0:46:49.41,0:46:51.26,Default,,0,0,0,,user to cancel or navigate away,
Dialogue: 0,0:46:51.26,0:46:53.03,Default,,0,0,0,,so they are not blocked on using
Dialogue: 0,0:46:53.03,0:46:53.42,Default,,0,0,0,,your view.
Dialogue: 0,0:46:53.95,0:46:57.47,Default,,0,0,0,,But, the big question remains,
Dialogue: 0,0:46:57.47,0:46:59.13,Default,,0,0,0,,how do I generate a preview if I
Dialogue: 0,0:46:59.13,0:46:59.86,Default,,0,0,0,,don't have any data?
Dialogue: 0,0:47:00.05,0:47:01.19,Default,,0,0,0,,I want to create this custom
Dialogue: 0,0:47:01.19,0:47:02.31,Default,,0,0,0,,preview, but it doesn't work.
Dialogue: 0,0:47:02.74,0:47:04.26,Default,,0,0,0,,Well, turns out, you can't.
Dialogue: 0,0:47:04.48,0:47:05.79,Default,,0,0,0,,If there's no data, you cannot
Dialogue: 0,0:47:06.99,0:47:07.74,Default,,0,0,0,,create a new one.
Dialogue: 0,0:47:08.71,0:47:10.13,Default,,0,0,0,,Just use the default previews.
Dialogue: 0,0:47:10.13,0:47:11.08,Default,,0,0,0,,They're a pretty accurate
Dialogue: 0,0:47:11.08,0:47:12.37,Default,,0,0,0,,representation of what's
Dialogue: 0,0:47:12.37,0:47:13.40,Default,,0,0,0,,actually in the item.
Dialogue: 0,0:47:14.35,0:47:16.26,Default,,0,0,0,,Was set by the drag side, and so
Dialogue: 0,0:47:16.26,0:47:17.64,Default,,0,0,0,,you can actually use this to
Dialogue: 0,0:47:17.64,0:47:18.40,Default,,0,0,0,,animate this down.
Dialogue: 0,0:47:19.03,0:47:21.45,Default,,0,0,0,,We target it, add a transform,
Dialogue: 0,0:47:21.45,0:47:22.94,Default,,0,0,0,,you can change however you want
Dialogue: 0,0:47:23.56,0:47:23.63,Default,,0,0,0,,it.
Dialogue: 0,0:47:25.50,0:47:27.84,Default,,0,0,0,,You can also make a placeholder
Dialogue: 0,0:47:28.00,0:47:28.69,Default,,0,0,0,,progress view.
Dialogue: 0,0:47:29.17,0:47:30.52,Default,,0,0,0,,If you have something that you
Dialogue: 0,0:47:30.52,0:47:32.39,Default,,0,0,0,,want to show, and like, show a
Dialogue: 0,0:47:32.39,0:47:34.23,Default,,0,0,0,,spinner there, that's probably a
Dialogue: 0,0:47:34.23,0:47:36.41,Default,,0,0,0,,good idea, if it makes sense for
Dialogue: 0,0:47:36.41,0:47:36.63,Default,,0,0,0,,your UI.
Dialogue: 0,0:47:36.63,0:47:39.13,Default,,0,0,0,,One of the great things is that
Dialogue: 0,0:47:39.29,0:47:40.56,Default,,0,0,0,,Collection view and Table view
Dialogue: 0,0:47:40.56,0:47:42.09,Default,,0,0,0,,have built-in support for this,
Dialogue: 0,0:47:42.46,0:47:43.66,Default,,0,0,0,,so you don't have to worry about
Dialogue: 0,0:47:43.66,0:47:43.76,Default,,0,0,0,,it.
Dialogue: 0,0:47:43.76,0:47:45.74,Default,,0,0,0,,It's very easy to turn on.
Dialogue: 0,0:47:46.59,0:47:48.72,Default,,0,0,0,,So, I know it's early, tomorrow
Dialogue: 0,0:47:48.72,0:47:51.77,Default,,0,0,0,,at 9 a.m., fourth day of WWDC,
Dialogue: 0,0:47:51.77,0:47:53.12,Default,,0,0,0,,but please come to this session.
Dialogue: 0,0:47:53.12,0:47:56.07,Default,,0,0,0,,It will be worth your time.
Dialogue: 0,0:47:56.29,0:47:57.82,Default,,0,0,0,,So, never assume the data will
Dialogue: 0,0:47:57.82,0:47:58.40,Default,,0,0,0,,be there.
Dialogue: 0,0:47:59.01,0:48:00.62,Default,,0,0,0,,That's the one advice I can give
Dialogue: 0,0:48:00.62,0:48:00.85,Default,,0,0,0,,you.
Dialogue: 0,0:48:01.69,0:48:03.41,Default,,0,0,0,,Even if you are testing, and
Dialogue: 0,0:48:04.26,0:48:06.19,Default,,0,0,0,,locally it might be, the data
Dialogue: 0,0:48:06.19,0:48:07.49,Default,,0,0,0,,might be there right away, this
Dialogue: 0,0:48:07.49,0:48:08.84,Default,,0,0,0,,might not be the case for your
Dialogue: 0,0:48:08.84,0:48:09.42,Default,,0,0,0,,users.
Dialogue: 0,0:48:09.42,0:48:10.77,Default,,0,0,0,,You don't know how it's going to
Dialogue: 0,0:48:10.77,0:48:11.56,Default,,0,0,0,,be in the field.
Dialogue: 0,0:48:12.80,0:48:13.89,Default,,0,0,0,,And, always account for the
Dialogue: 0,0:48:13.89,0:48:14.66,Default,,0,0,0,,worst case.
Dialogue: 0,0:48:15.15,0:48:16.20,Default,,0,0,0,,That's the best approach you can
Dialogue: 0,0:48:16.20,0:48:17.74,Default,,0,0,0,,take, even if it goes fast, does
Dialogue: 0,0:48:17.74,0:48:19.27,Default,,0,0,0,,good, but assume that it's going
Dialogue: 0,0:48:19.27,0:48:20.34,Default,,0,0,0,,to take a while.
Dialogue: 0,0:48:21.52,0:48:23.24,Default,,0,0,0,,If implemented properly, this
Dialogue: 0,0:48:23.24,0:48:24.98,Default,,0,0,0,,could look like this.
Dialogue: 0,0:48:34.05,0:48:35.86,Default,,0,0,0,,Custom preview, custom progress
Dialogue: 0,0:48:35.86,0:48:37.71,Default,,0,0,0,,here, so your user is not
Dialogue: 0,0:48:37.71,0:48:37.97,Default,,0,0,0,,blocked.
Dialogue: 0,0:48:39.94,0:48:41.57,Default,,0,0,0,,Finally, let's talk about how to
Dialogue: 0,0:48:41.57,0:48:43.56,Default,,0,0,0,,improve your in-app experience
Dialogue: 0,0:48:43.60,0:48:45.06,Default,,0,0,0,,by adding drag and drop.
Dialogue: 0,0:48:45.37,0:48:46.22,Default,,0,0,0,,Drag and drop is something you
Dialogue: 0,0:48:46.22,0:48:48.95,Default,,0,0,0,,can use, to use between apps,
Dialogue: 0,0:48:49.03,0:48:50.50,Default,,0,0,0,,but you can also use it to
Dialogue: 0,0:48:50.50,0:48:51.43,Default,,0,0,0,,enhance your own app.
Dialogue: 0,0:48:52.22,0:48:53.89,Default,,0,0,0,,There's a few nice things we
Dialogue: 0,0:48:53.89,0:48:55.74,Default,,0,0,0,,added to accommodate that.
Dialogue: 0,0:48:55.88,0:48:57.48,Default,,0,0,0,,First is localDragSession on
Dialogue: 0,0:48:57.48,0:48:58.47,Default,,0,0,0,,UIDropSession.
Dialogue: 0,0:48:58.79,0:49:00.09,Default,,0,0,0,,This gives you access to the
Dialogue: 0,0:49:00.09,0:49:01.18,Default,,0,0,0,,drag session, as I mentioned
Dialogue: 0,0:49:01.18,0:49:01.88,Default,,0,0,0,,before.
Dialogue: 0,0:49:02.87,0:49:04.54,Default,,0,0,0,,You can access any kind of data
Dialogue: 0,0:49:04.54,0:49:05.28,Default,,0,0,0,,in the drag session.
Dialogue: 0,0:49:05.58,0:49:07.86,Default,,0,0,0,,The items again, any stages that
Dialogue: 0,0:49:07.86,0:49:08.96,Default,,0,0,0,,are, is available.
Dialogue: 0,0:49:09.76,0:49:11.74,Default,,0,0,0,,It only works for in-drag apps.
Dialogue: 0,0:49:11.88,0:49:13.01,Default,,0,0,0,,If you're dragging outside your
Dialogue: 0,0:49:13.01,0:49:14.30,Default,,0,0,0,,app, the drop session will not
Dialogue: 0,0:49:14.30,0:49:16.08,Default,,0,0,0,,have corresponding local drag
Dialogue: 0,0:49:18.22,0:49:18.40,Default,,0,0,0,,session.
Dialogue: 0,0:49:18.56,0:49:19.81,Default,,0,0,0,,Additionally, as Robb showed
Dialogue: 0,0:49:19.81,0:49:21.26,Default,,0,0,0,,before, there's localObject on
Dialogue: 0,0:49:21.26,0:49:22.04,Default,,0,0,0,,UIDragItem.
Dialogue: 0,0:49:23.33,0:49:25.65,Default,,0,0,0,,It's a very good container for
Dialogue: 0,0:49:25.65,0:49:26.45,Default,,0,0,0,,local data.
Dialogue: 0,0:49:26.76,0:49:28.56,Default,,0,0,0,,You can use it to have states,
Dialogue: 0,0:49:28.79,0:49:30.29,Default,,0,0,0,,set some states in
Dialogue: 0,0:49:30.29,0:49:32.46,Default,,0,0,0,,itemsForBeginning session, and
Dialogue: 0,0:49:32.60,0:49:34.06,Default,,0,0,0,,use that state to generate a
Dialogue: 0,0:49:34.06,0:49:35.31,Default,,0,0,0,,lift preview, for example.
Dialogue: 0,0:49:35.76,0:49:37.32,Default,,0,0,0,,Or, you can use it to transfer
Dialogue: 0,0:49:37.32,0:49:38.83,Default,,0,0,0,,data from the drag site to the
Dialogue: 0,0:49:38.83,0:49:39.32,Default,,0,0,0,,drop site.
Dialogue: 0,0:49:39.80,0:49:41.40,Default,,0,0,0,,That's much easier than building
Dialogue: 0,0:49:41.40,0:49:43.28,Default,,0,0,0,,itemProviders that will transfer
Dialogue: 0,0:49:43.28,0:49:44.59,Default,,0,0,0,,your data outside your app.
Dialogue: 0,0:49:45.20,0:49:46.51,Default,,0,0,0,,If you do allow the drag to go
Dialogue: 0,0:49:46.51,0:49:47.72,Default,,0,0,0,,outside your app, you still have
Dialogue: 0,0:49:47.75,0:49:48.65,Default,,0,0,0,,to do that, of course.
Dialogue: 0,0:49:49.18,0:49:51.30,Default,,0,0,0,,And finally, there's
Dialogue: 0,0:49:51.30,0:49:52.96,Default,,0,0,0,,localContext for UIDragSession
Dialogue: 0,0:49:53.29,0:49:55.65,Default,,0,0,0,,which allows you to keep states
Dialogue: 0,0:49:55.70,0:49:57.05,Default,,0,0,0,,for that drag session and the
Dialogue: 0,0:49:57.05,0:49:58.53,Default,,0,0,0,,drop session, of course,
Dialogue: 0,0:49:59.59,0:50:01.28,Default,,0,0,0,,locally, without resorting to
Dialogue: 0,0:50:01.28,0:50:04.09,Default,,0,0,0,,app global states, and it makes
Dialogue: 0,0:50:04.12,0:50:05.40,Default,,0,0,0,,things a bit easier for you.
Dialogue: 0,0:50:08.50,0:50:10.28,Default,,0,0,0,,How do you keep a drag inside
Dialogue: 0,0:50:10.28,0:50:10.58,Default,,0,0,0,,your app?
Dialogue: 0,0:50:11.02,0:50:12.27,Default,,0,0,0,,There's a method you have to
Dialogue: 0,0:50:12.27,0:50:14.32,Default,,0,0,0,,implement on the dragInteraction
Dialogue: 0,0:50:14.32,0:50:15.18,Default,,0,0,0,,delegate called
Dialogue: 0,0:50:15.18,0:50:16.22,Default,,0,0,0,,sessionIsRestrictedTo
Dialogue: 0,0:50:16.22,0:50:17.30,Default,,0,0,0,,DraggingApplication.
Dialogue: 0,0:50:17.74,0:50:19.47,Default,,0,0,0,,If you return true here, then
Dialogue: 0,0:50:19.47,0:50:20.83,Default,,0,0,0,,the drag won't be able to leave
Dialogue: 0,0:50:20.83,0:50:21.18,Default,,0,0,0,,your app.
Dialogue: 0,0:50:21.35,0:50:23.08,Default,,0,0,0,,The user will still be able to
Dialogue: 0,0:50:23.47,0:50:24.53,Default,,0,0,0,,drag outside your app, of
Dialogue: 0,0:50:24.53,0:50:26.34,Default,,0,0,0,,course, but any of the drop
Dialogue: 0,0:50:26.34,0:50:28.12,Default,,0,0,0,,sessions outside your app will
Dialogue: 0,0:50:28.12,0:50:30.01,Default,,0,0,0,,not see the drag.
Dialogue: 0,0:50:30.29,0:50:32.40,Default,,0,0,0,,So, visually, it will look the
Dialogue: 0,0:50:32.40,0:50:33.89,Default,,0,0,0,,same, but nothing will be able
Dialogue: 0,0:50:33.89,0:50:35.55,Default,,0,0,0,,to accept it, only inside your
Dialogue: 0,0:50:35.55,0:50:35.76,Default,,0,0,0,,app.
Dialogue: 0,0:50:35.90,0:50:38.08,Default,,0,0,0,,You can also inspect this on the
Dialogue: 0,0:50:38.08,0:50:39.33,Default,,0,0,0,,drag and the drop session, if
Dialogue: 0,0:50:39.33,0:50:40.36,Default,,0,0,0,,you want to.
Dialogue: 0,0:50:42.72,0:50:45.20,Default,,0,0,0,,One last thing, local drag and
Dialogue: 0,0:50:45.35,0:50:46.87,Default,,0,0,0,,drop for iPhone, this is
Dialogue: 0,0:50:46.87,0:50:47.90,Default,,0,0,0,,disabled by default.
Dialogue: 0,0:50:48.49,0:50:50.21,Default,,0,0,0,,On iPad, it's enabled by
Dialogue: 0,0:50:50.21,0:50:50.62,Default,,0,0,0,,default.
Dialogue: 0,0:50:51.22,0:50:53.50,Default,,0,0,0,,This is because you want your
Dialogue: 0,0:50:53.50,0:50:56.07,Default,,0,0,0,,apps to behave according to size
Dialogue: 0,0:50:56.07,0:50:57.59,Default,,0,0,0,,class so that if you have a side
Dialogue: 0,0:50:57.59,0:50:59.14,Default,,0,0,0,,app, that works, too, but still,
Dialogue: 0,0:50:59.14,0:51:00.35,Default,,0,0,0,,on the iPad, you can drag out
Dialogue: 0,0:51:00.53,0:51:02.55,Default,,0,0,0,,into another app, but an app of
Dialogue: 0,0:51:02.70,0:51:04.40,Default,,0,0,0,,the same size will not work on
Dialogue: 0,0:51:04.49,0:51:04.89,Default,,0,0,0,,iPhone.
Dialogue: 0,0:51:05.40,0:51:06.76,Default,,0,0,0,,So, if you do go on to enable
Dialogue: 0,0:51:06.76,0:51:08.01,Default,,0,0,0,,drag and drop inside your app
Dialogue: 0,0:51:08.01,0:51:09.69,Default,,0,0,0,,also on the phone, you have to
Dialogue: 0,0:51:09.69,0:51:11.79,Default,,0,0,0,,enable it by setting isEnabled
Dialogue: 0,0:51:12.22,0:51:14.18,Default,,0,0,0,,on the drag interaction to true.
Dialogue: 0,0:51:14.36,0:51:16.28,Default,,0,0,0,,That will enable the
Dialogue: 0,0:51:16.28,0:51:17.67,Default,,0,0,0,,interaction, even on the phone.
Dialogue: 0,0:51:17.67,0:51:21.45,Default,,0,0,0,,I'm going to hand it over to
Dialogue: 0,0:51:21.45,0:51:22.68,Default,,0,0,0,,Wenson for a final demo.
Dialogue: 0,0:51:24.52,0:51:28.06,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:51:28.56,0:51:29.40,Default,,0,0,0,,>> Thanks again, Tom.
Dialogue: 0,0:51:29.78,0:51:30.87,Default,,0,0,0,,So now, we're going to put
Dialogue: 0,0:51:30.87,0:51:31.68,Default,,0,0,0,,together everything we've
Dialogue: 0,0:51:31.68,0:51:33.35,Default,,0,0,0,,learned so far to implement our
Dialogue: 0,0:51:33.35,0:51:34.80,Default,,0,0,0,,own custom progress UI.
Dialogue: 0,0:51:34.80,0:51:36.71,Default,,0,0,0,,Let's just jump right into the
Dialogue: 0,0:51:36.71,0:51:37.04,Default,,0,0,0,,code.
Dialogue: 0,0:51:37.28,0:51:38.56,Default,,0,0,0,,So, we're going back and
Dialogue: 0,0:51:38.56,0:51:40.05,Default,,0,0,0,,revisiting Droppable Image Grid
Dialogue: 0,0:51:40.05,0:51:40.69,Default,,0,0,0,,View Controller.
Dialogue: 0,0:51:41.27,0:51:42.23,Default,,0,0,0,,Now, here's the function that we
Dialogue: 0,0:51:42.23,0:51:43.66,Default,,0,0,0,,implemented earlier for
Dialogue: 0,0:51:43.66,0:51:44.68,Default,,0,0,0,,performDrop.
Dialogue: 0,0:51:44.68,0:51:46.62,Default,,0,0,0,,We're just going to add a few
Dialogue: 0,0:51:46.62,0:51:47.17,Default,,0,0,0,,lines here.
Dialogue: 0,0:51:48.29,0:51:49.75,Default,,0,0,0,,It's going to look something
Dialogue: 0,0:51:50.11,0:51:53.55,Default,,0,0,0,,like this.
Dialogue: 0,0:51:53.69,0:51:54.91,Default,,0,0,0,,First of all, we're going to set
Dialogue: 0,0:51:54.91,0:51:57.22,Default,,0,0,0,,the progressIndicatorStyle to
Dialogue: 0,0:51:57.22,0:51:57.54,Default,,0,0,0,,none.
Dialogue: 0,0:51:57.74,0:51:59.05,Default,,0,0,0,,This is going to instruct UIKit
Dialogue: 0,0:51:59.36,0:52:00.53,Default,,0,0,0,,to not show the app modal
Dialogue: 0,0:52:00.53,0:52:01.04,Default,,0,0,0,,dialog.
Dialogue: 0,0:52:01.52,0:52:03.51,Default,,0,0,0,,Next, we're going to remember a
Dialogue: 0,0:52:03.51,0:52:05.49,Default,,0,0,0,,little bit of state for the drag
Dialogue: 0,0:52:05.49,0:52:06.57,Default,,0,0,0,,item that is being dropped.
Dialogue: 0,0:52:06.71,0:52:08.60,Default,,0,0,0,,Now, the important thing here is
Dialogue: 0,0:52:08.60,0:52:09.57,Default,,0,0,0,,that we're going to remember the
Dialogue: 0,0:52:09.67,0:52:11.66,Default,,0,0,0,,view that we are inserting into
Dialogue: 0,0:52:11.66,0:52:13.01,Default,,0,0,0,,the view hierarchy of the grid,
Dialogue: 0,0:52:13.25,0:52:14.80,Default,,0,0,0,,as well as this progress that's
Dialogue: 0,0:52:14.80,0:52:16.55,Default,,0,0,0,,returned when we load object on
Dialogue: 0,0:52:16.55,0:52:17.18,Default,,0,0,0,,the item provider.
Dialogue: 0,0:52:17.50,0:52:19.16,Default,,0,0,0,,This is going to come in handy
Dialogue: 0,0:52:19.26,0:52:20.57,Default,,0,0,0,,right now when we implement
Dialogue: 0,0:52:20.72,0:52:21.57,Default,,0,0,0,,previewForDropping.
Dialogue: 0,0:52:22.94,0:52:24.30,Default,,0,0,0,,So, the first thing we do here
Dialogue: 0,0:52:24.61,0:52:25.49,Default,,0,0,0,,is we're going to read some
Dialogue: 0,0:52:25.49,0:52:27.57,Default,,0,0,0,,state out of our item states
Dialogue: 0,0:52:27.57,0:52:28.08,Default,,0,0,0,,dictionary.
Dialogue: 0,0:52:28.23,0:52:29.41,Default,,0,0,0,,This is going to describe
Dialogue: 0,0:52:29.75,0:52:31.61,Default,,0,0,0,,information about the item that
Dialogue: 0,0:52:31.61,0:52:32.52,Default,,0,0,0,,is being dropped.
Dialogue: 0,0:52:33.06,0:52:34.39,Default,,0,0,0,,Namely, it will allow us to
Dialogue: 0,0:52:34.39,0:52:35.64,Default,,0,0,0,,create a new progress spinner
Dialogue: 0,0:52:35.64,0:52:35.82,Default,,0,0,0,,view.
Dialogue: 0,0:52:36.31,0:52:37.40,Default,,0,0,0,,This is a custom view that just
Dialogue: 0,0:52:37.40,0:52:39.83,Default,,0,0,0,,knows how to represent a spinner
Dialogue: 0,0:52:40.69,0:52:42.03,Default,,0,0,0,,indicating the progress of a
Dialogue: 0,0:52:42.03,0:52:42.32,Default,,0,0,0,,load.
Dialogue: 0,0:52:43.54,0:52:44.37,Default,,0,0,0,,So, we'll create this custom
Dialogue: 0,0:52:44.37,0:52:44.99,Default,,0,0,0,,view right here.
Dialogue: 0,0:52:45.25,0:52:46.32,Default,,0,0,0,,The rest is very similar to what
Dialogue: 0,0:52:46.32,0:52:47.00,Default,,0,0,0,,you've seen before.
Dialogue: 0,0:52:47.00,0:52:48.17,Default,,0,0,0,,We'll create a target, create a
Dialogue: 0,0:52:48.17,0:52:49.82,Default,,0,0,0,,drag preview using that target
Dialogue: 0,0:52:50.56,0:52:51.46,Default,,0,0,0,,and parameters.
Dialogue: 0,0:52:52.73,0:52:53.71,Default,,0,0,0,,So, consider this.
Dialogue: 0,0:52:54.35,0:52:55.77,Default,,0,0,0,,What happens if the image
Dialogue: 0,0:52:55.77,0:52:57.04,Default,,0,0,0,,actually loads really fast?
Dialogue: 0,0:52:57.18,0:52:59.54,Default,,0,0,0,,What will happen is, we'll show
Dialogue: 0,0:52:59.54,0:53:00.60,Default,,0,0,0,,something at their destination
Dialogue: 0,0:53:01.07,0:53:02.20,Default,,0,0,0,,while the drop is still
Dialogue: 0,0:53:02.20,0:53:03.63,Default,,0,0,0,,animating, so we'll see this
Dialogue: 0,0:53:03.63,0:53:04.63,Default,,0,0,0,,drop preview flying to the
Dialogue: 0,0:53:04.63,0:53:06.20,Default,,0,0,0,,destination that already has
Dialogue: 0,0:53:06.20,0:53:07.62,Default,,0,0,0,,content, and the drop preview is
Dialogue: 0,0:53:07.62,0:53:08.88,Default,,0,0,0,,going to show this spinny
Dialogue: 0,0:53:09.11,0:53:09.85,Default,,0,0,0,,loading progress.
Dialogue: 0,0:53:09.85,0:53:10.52,Default,,0,0,0,,It's going to look kind of
Dialogue: 0,0:53:10.52,0:53:10.83,Default,,0,0,0,,weird.
Dialogue: 0,0:53:11.43,0:53:12.85,Default,,0,0,0,,So, this will handle that edge
Dialogue: 0,0:53:12.85,0:53:13.92,Default,,0,0,0,,case right here.
Dialogue: 0,0:53:14.24,0:53:15.51,Default,,0,0,0,,What we're going to do is set
Dialogue: 0,0:53:15.51,0:53:16.89,Default,,0,0,0,,the alpha of our destination
Dialogue: 0,0:53:16.89,0:53:17.81,Default,,0,0,0,,view to zero, so we're going to
Dialogue: 0,0:53:17.81,0:53:19.10,Default,,0,0,0,,hide whatever we show at our
Dialogue: 0,0:53:19.10,0:53:21.00,Default,,0,0,0,,destination while the drop is
Dialogue: 0,0:53:21.00,0:53:21.66,Default,,0,0,0,,taking place.
Dialogue: 0,0:53:22.32,0:53:23.29,Default,,0,0,0,,Now, when the drop is finished
Dialogue: 0,0:53:23.29,0:53:24.30,Default,,0,0,0,,animating, we're going to set
Dialogue: 0,0:53:24.30,0:53:25.21,Default,,0,0,0,,the alpha back to one, and
Dialogue: 0,0:53:25.21,0:53:26.51,Default,,0,0,0,,what's going to happen is that
Dialogue: 0,0:53:26.51,0:53:27.29,Default,,0,0,0,,the drop preview at the
Dialogue: 0,0:53:27.29,0:53:29.31,Default,,0,0,0,,destination will fade away and
Dialogue: 0,0:53:29.31,0:53:31.76,Default,,0,0,0,,give way to show the actual
Dialogue: 0,0:53:31.76,0:53:32.99,Default,,0,0,0,,destination view underneath,
Dialogue: 0,0:53:32.99,0:53:34.17,Default,,0,0,0,,because we set the alpha to one
Dialogue: 0,0:53:34.33,0:53:34.74,Default,,0,0,0,,this time.
Dialogue: 0,0:53:35.78,0:53:36.54,Default,,0,0,0,,So, that should take care of
Dialogue: 0,0:53:36.54,0:53:36.76,Default,,0,0,0,,that.
Dialogue: 0,0:53:37.31,0:53:38.39,Default,,0,0,0,,There's one last bit of
Dialogue: 0,0:53:38.39,0:53:39.54,Default,,0,0,0,,bookkeeping we should do, and
Dialogue: 0,0:53:40.31,0:53:41.05,Default,,0,0,0,,that's implementing
Dialogue: 0,0:53:41.05,0:53:41.69,Default,,0,0,0,,concludeDrop.
Dialogue: 0,0:53:41.69,0:53:42.83,Default,,0,0,0,,Now, when the drop is finished,
Dialogue: 0,0:53:42.83,0:53:43.90,Default,,0,0,0,,we've just got to do a little
Dialogue: 0,0:53:43.90,0:53:45.38,Default,,0,0,0,,bit of good bookkeeping and
Dialogue: 0,0:53:45.81,0:53:47.80,Default,,0,0,0,,remove all of the items that are
Dialogue: 0,0:53:47.80,0:53:49.08,Default,,0,0,0,,no longer relevant in our
Dialogue: 0,0:53:49.08,0:53:50.38,Default,,0,0,0,,dictionary of item states.
Dialogue: 0,0:53:51.55,0:53:52.73,Default,,0,0,0,,So, that was a lot of, those
Dialogue: 0,0:53:52.80,0:53:53.78,Default,,0,0,0,,were a lot of changes.
Dialogue: 0,0:53:54.77,0:53:55.61,Default,,0,0,0,,Let's see it in action.
Dialogue: 0,0:54:01.07,0:54:02.22,Default,,0,0,0,,So, I'm going to repeat the same
Dialogue: 0,0:54:02.22,0:54:03.66,Default,,0,0,0,,scenario with Slow Draggable
Dialogue: 0,0:54:03.66,0:54:04.21,Default,,0,0,0,,Image Views.
Dialogue: 0,0:54:04.50,0:54:05.29,Default,,0,0,0,,Watch what happens.
Dialogue: 0,0:54:06.40,0:54:07.87,Default,,0,0,0,,This time, we get a different
Dialogue: 0,0:54:07.90,0:54:09.86,Default,,0,0,0,,progress UI for each drop that
Dialogue: 0,0:54:09.86,0:54:11.24,Default,,0,0,0,,is happening, each item that is
Dialogue: 0,0:54:11.24,0:54:13.03,Default,,0,0,0,,being dropped, and that is
Dialogue: 0,0:54:13.03,0:54:14.98,Default,,0,0,0,,really cool, because it allows
Dialogue: 0,0:54:14.98,0:54:16.59,Default,,0,0,0,,us to do things such as this.
Dialogue: 0,0:54:17.14,0:54:19.48,Default,,0,0,0,,If I repeat the same procedure,
Dialogue: 0,0:54:19.72,0:54:20.82,Default,,0,0,0,,you can see that I'm able to do
Dialogue: 0,0:54:20.82,0:54:21.90,Default,,0,0,0,,things like scroll the Image
Dialogue: 0,0:54:21.90,0:54:23.58,Default,,0,0,0,,view, sorry, the Grid view, and
Dialogue: 0,0:54:23.58,0:54:24.78,Default,,0,0,0,,also interact with different
Dialogue: 0,0:54:24.78,0:54:27.06,Default,,0,0,0,,items while the load is
Dialogue: 0,0:54:27.06,0:54:27.43,Default,,0,0,0,,happening.
Dialogue: 0,0:54:28.52,0:54:32.22,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:54:32.72,0:54:33.69,Default,,0,0,0,,So, that's some really powerful
Dialogue: 0,0:54:33.69,0:54:35.08,Default,,0,0,0,,stuff, and we've come a long way
Dialogue: 0,0:54:35.08,0:54:35.81,Default,,0,0,0,,in today's session.
Dialogue: 0,0:54:36.31,0:54:37.47,Default,,0,0,0,,I would like to now hand it back
Dialogue: 0,0:54:37.47,0:54:39.04,Default,,0,0,0,,to Tom to give a quick recap.
Dialogue: 0,0:54:40.03,0:54:40.86,Default,,0,0,0,,I'll see you at the labs.
Dialogue: 0,0:54:42.52,0:54:46.72,Default,,0,0,0,,[ Applause ]
Dialogue: 0,0:54:47.22,0:54:48.36,Default,,0,0,0,,>> That looks pretty sweet, if
Dialogue: 0,0:54:48.36,0:54:49.02,Default,,0,0,0,,you ask me.
Dialogue: 0,0:54:50.49,0:54:53.17,Default,,0,0,0,,Anyway, we talked about how drag
Dialogue: 0,0:54:53.17,0:54:54.88,Default,,0,0,0,,and drop can be a very powerful
Dialogue: 0,0:54:54.88,0:54:56.37,Default,,0,0,0,,and user-driven input-output
Dialogue: 0,0:54:56.37,0:54:57.28,Default,,0,0,0,,mechanism for your app.
Dialogue: 0,0:54:58.92,0:55:00.67,Default,,0,0,0,,You can create custom and very
Dialogue: 0,0:55:00.67,0:55:02.13,Default,,0,0,0,,stunning visuals on the lift
Dialogue: 0,0:55:02.13,0:55:04.04,Default,,0,0,0,,side, on the drop side, and when
Dialogue: 0,0:55:04.04,0:55:04.66,Default,,0,0,0,,you're canceling.
Dialogue: 0,0:55:05.10,0:55:06.92,Default,,0,0,0,,You can animate a lot.
Dialogue: 0,0:55:07.59,0:55:08.87,Default,,0,0,0,,We talked about how to handle
Dialogue: 0,0:55:08.87,0:55:10.25,Default,,0,0,0,,asynchronous data, and
Dialogue: 0,0:55:10.63,0:55:11.45,Default,,0,0,0,,slow-running data.
Dialogue: 0,0:55:12.22,0:55:13.36,Default,,0,0,0,,And finally, we mentioned how
Dialogue: 0,0:55:13.36,0:55:14.99,Default,,0,0,0,,you can use drag and drop even
Dialogue: 0,0:55:14.99,0:55:16.11,Default,,0,0,0,,inside your app, to make your
Dialogue: 0,0:55:16.11,0:55:17.01,Default,,0,0,0,,app a lot better.
Dialogue: 0,0:55:19.28,0:55:20.50,Default,,0,0,0,,There is some more information
Dialogue: 0,0:55:20.50,0:55:20.76,Default,,0,0,0,,here.
Dialogue: 0,0:55:20.76,0:55:22.51,Default,,0,0,0,,You can re-watch this video, if
Dialogue: 0,0:55:22.51,0:55:23.15,Default,,0,0,0,,you weren't here.
Dialogue: 0,0:55:23.15,0:55:26.31,Default,,0,0,0,,That would be strange, I guess.
Dialogue: 0,0:55:27.92,0:55:29.17,Default,,0,0,0,,There's a few related sessions,
Dialogue: 0,0:55:29.17,0:55:30.36,Default,,0,0,0,,if you missed Introducing Drag
Dialogue: 0,0:55:30.36,0:55:32.62,Default,,0,0,0,,and Drop yesterday, please watch
Dialogue: 0,0:55:32.62,0:55:34.51,Default,,0,0,0,,the video, it's chock full of
Dialogue: 0,0:55:34.51,0:55:35.14,Default,,0,0,0,,information.
Dialogue: 0,0:55:35.79,0:55:37.30,Default,,0,0,0,,Again, there's two sessions
Dialogue: 0,0:55:37.30,0:55:39.31,Default,,0,0,0,,tomorrow, on Collection view and
Dialogue: 0,0:55:39.31,0:55:40.70,Default,,0,0,0,,Table view, and then data
Dialogue: 0,0:55:40.70,0:55:43.28,Default,,0,0,0,,delivery, back to back, in Hall
Dialogue: 0,0:55:43.28,0:55:43.58,Default,,0,0,0,,2.
Dialogue: 0,0:55:43.94,0:55:44.78,Default,,0,0,0,,Thanks for listening.
Dialogue: 0,0:55:44.96,0:55:46.18,Default,,0,0,0,,Enjoy the rest of your WWDC, and
Dialogue: 0,0:55:46.18,0:55:47.39,Default,,0,0,0,,see you around.
Dialogue: 0,0:55:48.52,0:55:51.94,Default,,0,0,0,,[ Applause ]
